import{v as F,g as c}from"./vm-B61G6sTM.js";import{g as q,a3 as Q,h as T,n as _,q as h,a4 as P,m as N,a as b,a1 as S,C as y,s as w,a5 as G,k as C,i as I}from"./index-BtKb8wT8.js";import{r as $,b as K}from"./focus-manager-BJWzFvJg.js";function X(){let e;const t=q();function n(){e=void 0}return Q(n),T(n),{removeTick:n,registerTick(o){e=o,_(()=>{e===o&&(F(t)===!1&&e(),e=void 0)})}}}const Y={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Z(e,t=()=>{},n=()=>{}){return{transitionProps:h(()=>{const o=`q-transition--${e.transitionShow||t()}`,a=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${o}-enter-from`,enterActiveClass:`${o}-enter-active`,enterToClass:`${o}-enter-to`,leaveFromClass:`${a}-leave-from`,leaveActiveClass:`${a}-leave-active`,leaveToClass:`${a}-leave-to`}}),transitionStyle:h(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}let L=1,O=document.body;function A(e,t){const n=document.createElement("div");if(n.id=t!==void 0?`q-portal--${t}--${L++}`:e,P.globalNodes!==void 0){const o=P.globalNodes.class;o!==void 0&&(n.className=o)}return O.appendChild(n),n}function M(e){e.remove()}const f=[];function x(e){return f.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function j(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return c(e)}else if(e.__qPortal===!0){const n=c(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=c(e)}while(e!=null)}function ee(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=j(e,t);continue}e.hide(t)}e=c(e)}}const B=N({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function H(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function te(e,t,n,o){const a=b(!1),u=b(!1);let l=null;const d={},g=o==="dialog"&&H(e);function D(v){if(v===!0){$(d),u.value=!0;return}u.value=!1,a.value===!1&&(g===!1&&l===null&&(l=A(!1,o)),a.value=!0,f.push(e.proxy),K(d))}function p(v){if(u.value=!1,v!==!0)return;$(d),a.value=!1;const m=f.indexOf(e.proxy);m!==-1&&f.splice(m,1),l!==null&&(M(l),l=null)}return S(()=>{p(!0)}),e.proxy.__qPortal=!0,y(e.proxy,"contentEl",()=>t.value),{showPortal:D,hidePortal:p,portalIsActive:a,portalIsAccessible:u,renderPortal:()=>g===!0?n():a.value===!0?[w(G,{to:l},w(B,n))]:void 0}}const i=[];let r;function U(e){r=e.keyCode===27}function W(){r===!0&&(r=!1)}function z(e){r===!0&&(r=!1,I(e,27)===!0&&i[i.length-1](e))}function k(e){window[e]("keydown",U),window[e]("blur",W),window[e]("keyup",z),r=!1}function ne(e){C.is.desktop===!0&&(i.push(e),i.length===1&&k("addEventListener"))}function oe(e){const t=i.indexOf(e);t!==-1&&(i.splice(t,1),i.length===0&&k("removeEventListener"))}const s=[];function E(e){s[s.length-1](e)}function ae(e){C.is.desktop===!0&&(s.push(e),s.length===1&&document.body.addEventListener("focusin",E))}function ie(e){const t=s.indexOf(e);t!==-1&&(s.splice(t,1),s.length===0&&document.body.removeEventListener("focusin",E))}export{X as a,Z as b,te as c,ae as d,oe as e,j as f,ne as g,x as h,ee as i,f as p,ie as r,Y as u};
