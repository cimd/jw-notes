import{v as H,a as h}from"./vm-B61G6sTM.js";import{g as M,a3 as x,h as A,w as T,f as B,n as g}from"./index-BtKb8wT8.js";function P(){let o=null;const i=M();function l(){o!==null&&(clearTimeout(o),o=null)}return x(l),A(l),{removeTimeout:l,registerTimeout(s,n){l(),H(i)===!1&&(o=setTimeout(()=>{o=null,s()},n))}}}const j={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},k=["beforeShow","show","beforeHide","hide"];function q({showing:o,canShow:i,hideOnRouteChange:l,handleShow:s,handleHide:n,processOnMount:y}){const d=M(),{props:u,emit:t,proxy:c}=d;let a;function U(e){o.value===!0?f(e):m(e)}function m(e){if(u.disable===!0||e!==void 0&&e.qAnchorHandled===!0||i!==void 0&&i(e)!==!0)return;const r=u["onUpdate:modelValue"]!==void 0;r===!0&&(t("update:modelValue",!0),a=e,g(()=>{a===e&&(a=void 0)})),(u.modelValue===null||r===!1)&&p(e)}function p(e){o.value!==!0&&(o.value=!0,t("beforeShow",e),s!==void 0?s(e):t("show",e))}function f(e){if(u.disable===!0)return;const r=u["onUpdate:modelValue"]!==void 0;r===!0&&(t("update:modelValue",!1),a=e,g(()=>{a===e&&(a=void 0)})),(u.modelValue===null||r===!1)&&V(e)}function V(e){o.value!==!1&&(o.value=!1,t("beforeHide",e),n!==void 0?n(e):t("hide",e))}function v(e){u.disable===!0&&e===!0?u["onUpdate:modelValue"]!==void 0&&t("update:modelValue",!1):e===!0!==o.value&&(e===!0?p:V)(a)}T(()=>u.modelValue,v),l!==void 0&&h(d)===!0&&T(()=>c.$route.fullPath,()=>{l.value===!0&&o.value===!0&&f()}),y===!0&&B(()=>{v(u.modelValue)});const b={show:m,hide:f,toggle:U};return Object.assign(c,b),b}export{k as a,P as b,q as c,j as u};
