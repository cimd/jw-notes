import{i as P,q as x,r as S,g as p,n as b,p as $,s as A,e as O,t as D}from"./isTypedArray-3TB5rZnQ.js";import{t as q}from"./toString-BWhIxKdR.js";import{b as K,h}from"./http-CAOryOOa.js";import{a0 as l}from"./index-BtKb8wT8.js";var U=P,G=x,I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,L=/^\w*$/;function T(n,t){if(U(n))return!1;var r=typeof n;return r=="number"||r=="symbol"||r=="boolean"||n==null||G(n)?!0:L.test(n)||!I.test(n)||t!=null&&n in Object(t)}var B=T,N=P,V=B,F=S,H=q;function J(n,t){return N(n)?n:V(n,t)?[n]:F(H(n))}var w=J,C=x,M=1/0;function Q(n){if(typeof n=="string"||C(n))return n;var t=n+"";return t=="0"&&1/n==-M?"-0":t}var v=Q,X=w,Y=v;function W(n,t){t=X(t,n);for(var r=0,e=t.length;n!=null&&r<e;)n=n[Y(t[r++])];return r&&r==e?n:void 0}var Z=W,z=Z;function j(n,t,r){var e=n==null?void 0:z(n,t);return e===void 0?r:e}var k=j;const tt=p(k);var rt=Object.prototype,et=rt.hasOwnProperty;function st(n,t){return n!=null&&et.call(n,t)}var nt=st,it=9007199254740991,at=/^(?:0|[1-9]\d*)$/;function ot(n,t){var r=typeof n;return t=t??it,!!t&&(r=="number"||r!="symbol"&&at.test(n))&&n>-1&&n%1==0&&n<t}var y=ot,ct=w,ut=b,ht=P,ft=y,dt=$,lt=v;function gt(n,t,r){t=ct(t,n);for(var e=-1,a=t.length,o=!1;++e<a;){var s=lt(t[e]);if(!(o=n!=null&&r(n,s)))break;n=n[s]}return o||++e!=a?o:(a=n==null?0:n.length,!!a&&dt(a)&&ft(s,a)&&(ht(n)||ut(n)))}var pt=gt,mt=nt,Pt=pt;function wt(n,t){return n!=null&&Pt(n,t,mt)}var vt=wt;const Et=p(vt);var E=A;function Rt(n,t,r){t=="__proto__"&&E?E(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}var _t=Rt,xt=_t,yt=O,St=Object.prototype,bt=St.hasOwnProperty;function $t(n,t,r){var e=n[t];(!(bt.call(n,t)&&yt(e,r))||r===void 0&&!(t in n))&&xt(n,t,r)}var At=$t,Ot=At,Dt=w,qt=y,R=D,Kt=v;function Ut(n,t,r,e){if(!R(n))return n;t=Dt(t,n);for(var a=-1,o=t.length,s=o-1,c=n;c!=null&&++a<o;){var i=Kt(t[a]),d=r;if(i==="__proto__"||i==="constructor"||i==="prototype")return n;if(a!=s){var m=c[i];d=e?e(m,i,c):void 0,d===void 0&&(d=R(m)?m:qt(t[a+1])?[]:{})}Ot(c,i,d),c=c[i]}return n}var Gt=Ut,It=Gt;function Lt(n,t,r){return n==null?n:It(n,t,r)}var Tt=Lt;const Bt=p(Tt),_=(n,t)=>(t.forEach(r=>{const a=r.split(".").join(".");if(Et(n,a)){const o=tt(n,a);o&&Bt(n,a,new Date(o))}}),n),Nt=(n,t)=>typeof n<"u"?typeof n.length>"u"?(n=_(n,t),n):(n.forEach(r=>{_(r,t)}),n):n;var Vt=Array.prototype,Ft=Vt.join;function Ht(n,t){return n==null?"":Ft.call(n,t)}var Jt=Ht;const u=p(Jt);class Ct extends Error{constructor(t,r){super(t),this.name="",this.message=t+" ||| "+r.message,this.error=r,this.stack=r.stack}}class f extends Ct{constructor(t,r){super(t,r),this.name=this.constructor.name}}const g=async()=>{},Zt=({data:n,title:t="Event"})=>{};class Mt{constructor(){this.filter=l({}),this.include=l([]),this.attributes=l([]),this.fieldsSelection=l([]),this.paging=l({}),this.sorting=l([])}static where(t){return this.instance().where(t)}static with(t){return this.instance().with(t)}static append(t){return this.instance().append(t)}static select(t){return this.instance().select(t)}static sort(t){return this.instance().sort(t)}static paginate(t){return this.instance().paginate(t)}where(t){return Object.assign(this.filter,t),g().then(),this}with(t){return this.include=[...t],g().then(),this}append(t){return this.attributes=[...t],g().then(),this}select(t){return this.fieldsSelection=[...t],g().then(),this}sort(t){return this.sorting=[...t],g().then(),this}paginate(t){return Object.assign(this.paging,t),g().then(),this}queryString(){const t={};return this.filter&&(t.filter=this.filter),this.include.length&&(t.include=this.include.join(",")),this.fieldsSelection.length&&(t.fields=this.fieldsSelection.join(",")),this.sorting.length&&(t.sort=this.sorting.join(",")),this.attributes.length&&(t.append=this.attributes),this.paging&&(t.paginate=this.paging),t}}class zt extends Mt{constructor(){super(),this.resource="",this.apiPrefix=K,this.dates=["created_at","updated_at","deleted_at"],this.validateRequests=!1}static instance(){return new this}static async get(t){return await this.instance().get(t)}static show(t){const r=this.instance(),e=u([r.apiPrefix,r.resource,t],"/");return r.retrieving(t),new Promise((a,o)=>{h.get(e,{transformResponse:[s=>r.transformResponse(s)]}).then(s=>{r.retrieved(s.data),a(s.data)}).catch(s=>{r.retrievingError(s),o(new f("Show",s))})})}static updateValidationRules(t){const r=this.instance(),e=u([r.apiPrefix,r.resource,t.id],"/");return new Promise((a,o)=>{h.patch(e,t,{headers:{"Request-Rules":!0}}).then(s=>{a(s.data)}).catch(s=>{o(s.response)})})}static update(t){const r=this.instance(),e=u([r.apiPrefix,r.resource,t.id],"/");return r.updating(t),new Promise((a,o)=>{h.patch(e,t,{retries:0,transformResponse:[s=>r.transformResponse(s)]}).then(s=>{r.updated(s.data),a(s.data)}).catch(s=>{r.updatingError(s),o(new f("Update",s))})})}static store(t){const r=this.instance(),e=u([r.apiPrefix,r.resource],"/");return r.storing(t),new Promise((a,o)=>{h.post(e,t,{retries:0,transformResponse:[s=>r.transformResponse(s)]}).then(s=>{r.stored(s.data),a(s.data)}).catch(s=>{r.storingError(s),o(new f("Store",s))})})}static hasOne(t,r){const e=this.instance();return{get(a){const o=u([e.apiPrefix,e.resource,r,t],"/");return e.fetching(a),new Promise((s,c)=>{h.get(o,a,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.fetched(i.data),s(i.data.data[0])}).catch(i=>{e.fetchingError(i),c(new f("Store",i))})})},show(a){const o=u([e.apiPrefix,e.resource,r,t,a.id],"/");return e.retrieving(a),new Promise((s,c)=>{h.get(o,a,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.retrieved(i.data),s(i.data)}).catch(i=>{e.retrievingError(i),c(new f("Store",i))})})},store(a){const o=u([e.apiPrefix,e.resource,r,t],"/");return e.storing(a),new Promise((s,c)=>{h.post(o,a,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.stored(i.data),s(i.data)}).catch(i=>{e.storingError(i),c(new f("Store",i))})})},update(a){const o=u([e.apiPrefix,e.resource,r,t,a.id],"/");return e.updating(a),new Promise((s,c)=>{h.patch(o,a,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.updated(i.data),s(i.data)}).catch(i=>{e.updatingError(i),c(new f("Store",i))})})},delete(a){const o=u([e.apiPrefix,e.resource,r,t,a.id],"/");return e.destroying(a),new Promise((s,c)=>{h.delete(o,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.destroyed(i.data),s(i.data)}).catch(i=>{e.destroyingError(i),c(new f("Store",i))})})}}}static hasMany(t,r){const e=this.instance();return{get(a){const o=u([e.apiPrefix,e.resource,r,t],"/");return e.fetching(a),new Promise((s,c)=>{h.get(o,a,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.fetched(i.data),s(i.data.data)}).catch(i=>{e.fetchingError(i),c(new f("Store",i))})})},show(a){const o=u([e.apiPrefix,e.resource,r,t,a.id],"/");return e.retrieving(a),new Promise((s,c)=>{h.get(o,a,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.retrieved(i.data),s(i.data)}).catch(i=>{e.retrievingError(i),c(new f("Store",i))})})},store(a){const o=u([e.apiPrefix,e.resource,r,t],"/");return e.storing(a),new Promise((s,c)=>{h.post(o,a,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.stored(i.data),s(i.data)}).catch(i=>{e.storingError(i),c(new f("Store",i))})})},update(a){const o=u([e.apiPrefix,e.resource,r,t,a.id],"/");return e.updating(a),new Promise((s,c)=>{h.patch(o,a,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.updated(i.data),s(i.data)}).catch(i=>{e.updatingError(i),c(new f("Store",i))})})},delete(a){const o=u([e.apiPrefix,e.resource,r,t,a.id],"/");return e.destroying(a),new Promise((s,c)=>{h.delete(o,{retries:0,transformResponse:[i=>e.transformResponse(i)]}).then(i=>{e.destroyed(i.data),s(i.data)}).catch(i=>{e.destroyingError(i),c(new f("Store",i))})})}}}static storeValidationRules(t){const r=this.instance(),e=u([r.apiPrefix,r.resource],"/");return new Promise((a,o)=>{h.post(e,t,{headers:{Precognition:!0}}).then(s=>{a(s.data)}).catch(s=>{o(s.response)})})}static delete(t){const r=this.instance(),e=u([r.apiPrefix,r.resource,t.id],"/");return r.destroying(t),new Promise((a,o)=>{h.delete(e,{transformResponse:[s=>r.transformResponse(s)]}).then(s=>{r.destroyed(s.data),a(s.data)}).catch(s=>{r.destroyingError(s),o(new f("Delete",s))})})}static destroy(t,r=!0){const e=typeof t=="number"?t:t?.id,a=this.instance();let o=null;r||(o=t);let s="";return r?s=u([a.apiPrefix,a.resource,e],"/"):s=u([a.apiPrefix,a.resource],"/"),a.destroying(t),new Promise((c,i)=>{h.delete(s,{params:o,transformResponse:[d=>a.transformResponse(d)]}).then(d=>{a.destroyed(d.data),c(d.data)}).catch(d=>{a.destroyingError(d),i(new f("Destroy",d))})})}static batchStore(t){const r=this.instance(),e=u([r.apiPrefix,r.resource,"batch"],"/");return new Promise((a,o)=>{h.post(e,{data:t},{retries:0,transformResponse:[s=>r.transformResponse(s)]}).then(s=>{a(s.data)}).catch(s=>{r.batchStoringError(s),o(new f("BatchStoring",s))})})}static batchUpdate(t){const r=this.instance(),e=u([r.apiPrefix,r.resource,"batch"],"/");return new Promise((a,o)=>{h.patch(e,{data:t},{retries:0,transformResponse:[s=>r.transformResponse(s)]}).then(s=>{a(s.data)}).catch(s=>{r.batchUpdatingError(s),o(new f("BatchUpdate",s))})})}static batchDelete(t){const r=this.instance(),e=u([r.apiPrefix,r.resource,"batch-delete"],"/");return new Promise((a,o)=>{h.post(e,{data:t},{retries:0,transformResponse:[s=>r.transformResponse(s)]}).then(s=>{a(s.data)}).catch(s=>{r.batchDestroyingError(s),o(new f("BatchDelete",s))})})}static batchDestroy(t){const r=this.instance(),e=u([r.apiPrefix,r.resource,"batch-destroy"],"/");return new Promise((a,o)=>{h.patch(e,{data:t},{retries:0,transformResponse:[s=>r.transformResponse(s)]}).then(s=>{a(s.data)}).catch(s=>{r.batchDestroyingError(s),o(new f("BatchDestroy",s))})})}static logs(t){const r=this.instance();let e;typeof t=="number"?e=t:e=t.id;const a=u([r.apiPrefix,r.resource,e,"logs"],"/");return new Promise((o,s)=>{h.get(a,{transformResponse:[c=>r.transformResponse(c)]}).then(c=>{o(c.data)}).catch(c=>{r.fetchingLogsError(c),s(new f("Logs",c))})})}static getResource(){return this.instance().resource}get(t){const r=u([this.apiPrefix,this.resource],"/");let e;return t?e=t:e=this.queryString(),this.fetching(e),new Promise((a,o)=>{h.get(r,{params:e,transformResponse:[s=>this.transformResponse(s)]}).then(s=>{this.fetched(s.data),a(s.data)}).catch(s=>{this.fetchingError(s),o(new f("Get",s))})})}batchStoringError(t){}batchUpdatingError(t){}batchDestroyingError(t){}fetchingLogsError(t){}transformResponse(t){const r=JSON.parse(t);return r.data=Nt(r.data,this.dates),r}fetching(t){}fetchingError(t){}fetched(t){}retrieving(t){}retrievingError(t){}retrieved(t){}storing(t){}storingError(t){}stored(t){}updating(t){}updatingError(t){}updated(t){}destroying(t){}destroyingError(t){}destroyed(t){}}export{zt as A,Ct as E,y as _,Mt as a,Zt as b,g as r};
