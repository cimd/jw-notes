import{Q as e}from"./QInput-BGGB3zN-.js";import{Q as m}from"./QBtn-uIBLO3Xd.js";import{Q as n}from"./QForm-ChBslSnh.js";import{Q as d}from"./QPage-B37jp_D7.js";import{u as p}from"./index-DjwF1BFA.js";import{r as t,m as l,s as f}from"./index-D4Nly2oq.js";import{auth as u}from"./apis-CjmXX0Bf.js";import{d as w,_ as h,o as $,c as g,u as i,J as C,K as a,a2 as D}from"./index-BtKb8wT8.js";import"./use-file-dom-props-DQ4-sdV9.js";import"./use-dark-Ck3iFzaA.js";import"./render-DRulWU2P.js";import"./focus-manager-BJWzFvJg.js";import"./use-key-composition-C-bUBPiv.js";import"./dom-DXkm9Q41.js";import"./vm-B61G6sTM.js";import"./isTypedArray-3TB5rZnQ.js";import"./http-CAOryOOa.js";const v=w({setup(){return{v$:p()}},data(){return{open:!0,formData:{password:"",passwordConfirmation:null},loading:!1,passwordErrorMessage:"",passwordConfirmationErrorMessage:""}},validations(){return{formData:{password:{required:t,minLength:l(6)},passwordConfirmation:{required:t,sameAsPassword:f(this.formData.password)}}}},methods:{submitForm(){if(this.v$.$touch(),this.v$.$invalid)return this.setErrorMessages(),!0;this.loading=!0;const r={email:this.$route.params.email,password:this.formData.password,token:this.$route.params.token};u.resetPassword(r).then(()=>{this.$router.push({path:"/"})}).finally(()=>{this.loading=!1})},setErrorMessages(){this.v$.formData.password.$error&&(this.v$.formData.passwordConfirmation.required&&(this.passwordErrorMessage="Password is required"),this.v$.formData.password.minLength&&(this.passwordErrorMessage="Password must be at least 6 characters")),this.v$.formData.passwordConfirmation.$error&&(this.v$.formData.passwordConfirmation.required&&(this.passwordConfirmationErrorMessage="Confirm Password is required"),this.v$.formData.passwordConfirmation.sameAsPassword&&(this.passwordConfirmationErrorMessage="Passwords must match"))}}}),b={class:"fixed-top-left form-box"};function V(r,s,E,M,P,Q){return $(),g(d,null,{default:i(()=>[C("div",b,[a(n,{ref:"Form",onSubmit:D(r.submitForm,["prevent"])},{default:i(()=>[a(e,{ref:"email",modelValue:r.$route.params.email,"onUpdate:modelValue":s[0]||(s[0]=o=>r.$route.params.email=o),label:"Email",name:"email",readonly:""},null,8,["modelValue"]),a(e,{ref:"password",modelValue:r.formData.password,"onUpdate:modelValue":s[1]||(s[1]=o=>r.formData.password=o),error:r.v$.formData.password.$error,"error-message":r.passwordErrorMessage,label:"Password",name:"password",type:"password"},null,8,["modelValue","error","error-message"]),a(e,{ref:"passwordConfirmation",modelValue:r.formData.passwordConfirmation,"onUpdate:modelValue":s[2]||(s[2]=o=>r.formData.passwordConfirmation=o),error:r.v$.formData.passwordConfirmation.$error,"error-message":r.passwordConfirmationErrorMessage,label:"Confirm Password",name:"passwordConfirmation",type:"password"},null,8,["modelValue","error","error-message"]),a(m,{class:"q-mt-md",color:"primary",label:"Submit",loading:r.loading,type:"submit"},null,8,["loading"])]),_:1},8,["onSubmit"])])]),_:1})}const G=h(v,[["render",V]]);export{G as default};
