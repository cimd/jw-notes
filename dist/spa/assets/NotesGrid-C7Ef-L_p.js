import{Q as yp}from"./QSeparator-ijjLOKF9.js";import{Q as Cp}from"./QSpace-BHKl-E7w.js";import{Q as bp}from"./QPage-CW88zJPQ.js";import{B as zr,c as mr,D as Cr,a as Dn,s as ur,h as kn,T as Sp,b as Eo,I as G,i as Or,P as Yr,V as bn,H as Na,g as _o,d as Jh,f as wp,e as ia,R as Ko,C as Xh,N as Do,j as Ip,v as ko,k as vi,l as Zh,m as xp,n as Ep,o as Dp}from"./NoteApi-D_NlhKrY.js";import{i as u,g as j,m as zi,e as P,s as st,F as ra,I as Ne,a as kp,P as C,b as $,c as N,d as R,f as se,u as cr,h as hi,D as eu,j as M,k as ae,l as Rp,n as ge,o as ti,p as Yo,q as yi,E as S,B as T,t as Le,C as Ye,v as nt,w as ke,x as We,y as br,L as Xt,z as Hi,A as be,K as St,S as $r,G as mt,H as B,N as kt,J as za,M as ne,O as Ap,Q as ht,R as $o,T as Tp,U as Mp,V as mi,W as tu,X as oi,Y as Pi,Z as ui,_ as Ha,$ as xi,a0 as Oi,a1 as Bi,a2 as Fp,a3 as Lp,a4 as Qo}from"./sanitize-helper-B-wurFwY.js";import{a0 as na,h as Op,d as iu,a as Bp,_ as Pp,r as ji,o as Np,c as zp,u as Un,K as Mt}from"./index-CPXBor41.js";import{_ as Ro,a as ru,b as nu,c as Nn,d as Hp,e as Vp,i as su,f as Gs,h as qp,j as Wp,k as jp,l as Up,m as Gp,g as _p}from"./isTypedArray-V6sIBVz1.js";import{E as Kp,a as Yp,v as $p,b as Qp,c as Ui,r as xr,k as Jp}from"./Api-DXgXXLek.js";import"./use-dark-BVUz_ulx.js";import"./render-D-1utwwR.js";import"./Action-BeMcUDL_.js";import"./index-kbbxJ5lx.js";import"./http-CAOryOOa.js";let Jo;class Xp extends Kp{constructor(e,t){super(e,t),this.name=this.constructor.name}}class Zp extends Yp{constructor(){super(),this.state=na({isLoading:!1,isSuccess:!0,isError:!1}),this.isBroadcasting=!1,this.channel="",this.uuid=$p(),Qp(this).then(),Ui({data:{uuid:this.uuid},title:"Collection Initialized"}),Op(()=>{this.leaveChannel()})}async get(e){let t;this.setStateLoading();try{e?t=e:t=this.queryString(),Ui({title:"Fetching",data:{query:t}}),this.fetching(t);const i=await this.api.get(t);return this.fetched(i),this.updateDataSource(i.data),Ui({title:"Fetched",data:{data:i.data}}),this.setStateSuccess(),i.data}catch(i){throw this.fetchingError(i),this.setStateError(),new Xp("Get",i)}}joinChannel(e){e&&(this.channel=e),Jo.join(this.channel).error(t=>{console.error(t)}).listen(".created",t=>{this.broadcastCreated(t)}).listen(".updated",t=>{this.broadcastUpdated(t)}).listen(".deleted",t=>{this.broadcastDeleted(t)}),this.isBroadcasting=!0,xr().then(),Ui({title:"Broadcasting",data:{channel:this.channel}})}leaveChannel(){this.isBroadcasting&&(Jo.leave(this.channel),this.isBroadcasting=!1),xr().then(),Ui({title:"Leaving Broadcast Channel",data:{channel:this.channel}})}factory(e){e&&e.length&&(this.data=na([...e]))}fetching(e){}fetchingError(e){}fetched(e){}setStateLoading(){this.state.isLoading=!0,this.state.isSuccess=!0,this.state.isError=!1,xr().then(),Ui({title:"Loading",data:this.state})}setStateSuccess(){this.state.isLoading=!1,this.state.isSuccess=!0,this.state.isError=!1,xr().then(),Ui({title:"Loading success",data:this.state})}setStateError(){this.state.isLoading=!1,this.state.isSuccess=!1,this.state.isError=!0,xr().then(),Ui({title:"Loading error",data:this.state})}updateDataSource(e){this.data=na([...e]),xr().then()}}var re=function(){function a(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="",typeof e=="string"?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return Object.defineProperty(a.prototype,"moduleName",{get:function(){return"query"},enumerable:!0,configurable:!0}),a.prototype.setKey=function(e){return this.key=e,this},a.prototype.using=function(e){return this.dataManager=e,this},a.prototype.execute=function(e,t,i,r){return e=e||this.dataManager,e?e.executeQuery(this,t,i,r):A.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},a.prototype.executeLocal=function(e){return e=e||this.dataManager,e?e.executeLocal(this):A.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},a.prototype.clone=function(){var e=new a;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e.lazyLoad=this.lazyLoad.slice(0),e},a.prototype.from=function(e){return this.fromTable=e,this},a.prototype.addParams=function(e,t){return typeof t=="function"?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},a.prototype.distinct=function(e){return typeof e=="string"?this.distincts=[].slice.call([e],0):this.distincts=e.slice(0),this},a.prototype.expand=function(e){return typeof e=="string"?this.expands=[].slice.call([e],0):this.expands=e.slice(0),this},a.prototype.where=function(e,t,i,r,n,s){t=t?t.toLowerCase():null;var o=null;return typeof e=="string"?o=new pe(e,t,i,r,n,s):e instanceof pe&&(o=e),this.queries.push({fn:"onWhere",e:o}),this},a.prototype.search=function(e,t,i,r,n){typeof t=="string"&&(t=[t]),(!i||i==="none")&&(i="contains");var s=A.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:r,ignoreAccent:n,comparer:s}}),this},a.prototype.sortBy=function(e,t,i){return this.sortByForeignKey(e,t,i)},a.prototype.sortByForeignKey=function(e,t,i,r){var n=u(r)?"ascending":r,s,o;if(typeof e=="string"&&A.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),t="descending"),(!t||typeof t=="string")&&(n=t?t.toLowerCase():"ascending",t=A.fnSort(t)),i){s=a.filterQueries(this.queries,"onSortBy");for(var l=0;l<s.length;l++)if(o=s[l].e.fieldName,typeof o=="string"){if(o===e)return this}else if(o instanceof Array){for(var h=0;h<o.length;h++)if(o[h]===e||e.toLowerCase()===o[h]+" desc")return this}}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:n}}),this},a.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},a.prototype.group=function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this},a.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},a.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},a.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},a.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},a.prototype.select=function(e){return typeof e=="string"&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},a.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},a.prototype.foreignKey=function(e){return this.fKey=e,this},a.prototype.requiresCount=function(){return this.isCountRequired=!0,this},a.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},a.filterQueries=function(e,t){return e.filter(function(i){return i.fn===t})},a.filterQueryLists=function(e,t){for(var i=e.filter(function(s){return t.indexOf(s.fn)!==-1}),r={},n=0;n<i.length;n++)r[i[n].fn]||(r[i[n].fn]=i[n].e);return r},a}(),pe=function(){function a(e,t,i,r,n,s){return r===void 0&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,typeof e=="string"?(this.field=e,this.operator=t.toLowerCase(),this.value=i,this.matchCase=s,this.ignoreCase=r,this.ignoreAccent=n,this.isComplex=!1,this.comparer=A.fnOperators.processOperator(this.operator)):(e instanceof a&&i instanceof a||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],this.matchCase=e.matchCase,this.ignoreCase=e.ignoreCase,this.ignoreAccent=e.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return a.and=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.combinePredicates([].slice.call(e,0),"and")},a.prototype.and=function(e,t,i,r,n){return a.combine(this,e,t,i,"and",r,n)},a.or=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.combinePredicates([].slice.call(e,0),"or")},a.prototype.or=function(e,t,i,r,n){return a.combine(this,e,t,i,"or",r,n)},a.ornot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.combinePredicates([].slice.call(e,0),"or not")},a.prototype.ornot=function(e,t,i,r,n){return a.combine(this,e,t,i,"ornot",r,n)},a.andnot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.combinePredicates([].slice.call(e,0),"and not")},a.prototype.andnot=function(e,t,i,r,n){return a.combine(this,e,t,i,"andnot",r,n)},a.fromJson=function(e){if(e instanceof Array){for(var t=[],i=0,r=e.length;i<r;i++)t.push(this.fromJSONData(e[i]));return t}var n=e;return this.fromJSONData(n)},a.prototype.validate=function(e){var t=this.predicates?this.predicates:[],i,r;if(!this.isComplex&&this.comparer)return this.condition&&this.condition.indexOf("not")!==-1?(this.condition=this.condition.split("not")[0]===""?void 0:this.condition.split("not")[0],!this.comparer.call(this,A.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,A.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);this.condition&&this.condition.indexOf("not")!==-1?r=this.condition.indexOf("and")!==-1:r=this.condition==="and";for(var n=0;n<t.length;n++)if(n>0&&this.condition&&this.condition.indexOf("not")!==-1&&(t[n].condition=t[n].condition?t[n].condition+"not":"not"),i=t[n].validate(e),r){if(!i)return!1}else if(i)return!0;return r},a.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,matchCase:this.matchCase}},a.combinePredicates=function(e,t){if(e.length===1){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new a(e[0],t,e.slice(1))},a.combine=function(e,t,i,r,n,s,o){return t instanceof a?a[n](e,t):typeof t=="string"?a[n](e,new a(t,i,r,s,o)):A.throwError("Predicate - "+n+" : invalid arguments")},a.fromJSONData=function(e){for(var t=e.predicates||[],i=t.length,r=[],n,s=0;s<i;s++)r.push(this.fromJSONData(t[s]));return e.isComplex?n=new a(r[0],e.condition,r.slice(1)):n=new a(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent),n},a}(),Xo={GroupGuid:"{271bbba0-1ee7}"},A=function(){function a(){}return a.getValue=function(e,t){return typeof e=="function"?e.call(t||{}):e},a.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},a.notEndsWith=function(e,t){return e.slice&&e.slice(-t.length)!==t},a.startsWith=function(e,t){return e.slice(0,t.length)===t},a.notStartsWith=function(e,t){return e.slice(0,t.length)!==t},a.wildCard=function(e,t){var i,r;if(t.indexOf("[")!==-1&&(t=t.split("[").join("[[]")),t.indexOf("(")!==-1&&(t=t.split("(").join("[(]")),t.indexOf(")")!==-1&&(t=t.split(")").join("[)]")),t.indexOf("\\")!==-1&&(t=t.split("\\").join("[\\\\]")),t.indexOf("*")!==-1){t.charAt(0)!=="*"&&(t="^"+t),t.charAt(t.length-1)!=="*"&&(t=t+"$"),i=t.split("*");for(var n=0;n<i.length;n++)i[n].indexOf(".")===-1?i[n]=i[n]+".*":i[n]=i[n]+"*";t=i.join("")}(t.indexOf("%3f")!==-1||t.indexOf("?")!==-1)&&(r=t.indexOf("%3f")!==-1?t.split("%3f"):t.split("?"),t=r.join("."));var s=new RegExp(t,"g");return s.test(e)},a.like=function(e,t){return t.indexOf("%")!==-1?t.charAt(0)==="%"&&t.lastIndexOf("%")<2?(t=t.substring(1,t.length),a.startsWith(a.toLowerCase(e),a.toLowerCase(t))):t.charAt(t.length-1)==="%"&&t.indexOf("%")>t.length-3?(t=t.substring(0,t.length-1),a.endsWith(a.toLowerCase(e),a.toLowerCase(t))):(t.lastIndexOf("%")!==t.indexOf("%")&&t.lastIndexOf("%")>t.indexOf("%")+1&&(t=t.substring(t.indexOf("%")+1,t.lastIndexOf("%"))),e.indexOf(t)!==-1):!1},a.fnSort=function(e){return e=e?a.toLowerCase(e):"ascending",e==="ascending"?this.fnAscending:this.fnDescending},a.fnAscending=function(e,t){return u(e)&&u(t)||t==null?-1:typeof e=="string"?e.localeCompare(t):e==null?1:e-t},a.fnDescending=function(e,t){return u(e)&&u(t)?-1:t==null?1:typeof e=="string"?e.localeCompare(t)*-1:e==null?-1:t-e},a.extractFields=function(e,t){for(var i={},r=0;r<t.length;r++)i=this.setValue(t[r],this.getObject(t[r],e),i);return i},a.select=function(e,t){for(var i=[],r=0;r<e.length;r++)i.push(this.extractFields(e[r],t));return i},a.group=function(e,t,i,r,n,s,o){r=r||1;var l=e,h="GroupGuid";if(l.GroupGuid===Xo[h]){for(var p=function(b){if(u(n))l[b].items=c.group(l[b].items,t,i,l.level+1,null,s,o),l[b].count=l[b].items.length;else{var I=-1,k=n.filter(function(D){return D.key===l[b].key});I=n.indexOf(k[0]),l[b].items=c.group(l[b].items,t,i,l.level+1,n[I].items,s,o),l[b].count=n[I].count}},c=this,d=0;d<l.length;d++)p(d);return l.childLevels+=1,l}var f={},g=[];g.GroupGuid=Xo[h],g.level=r,g.childLevels=0,g.records=l;for(var m=function(b){var I=v.getVal(l,b,t);if(u(s)||(I=s(I,t)),!f[I]&&(f[I]={key:I,count:0,items:[],aggregates:{},field:t},g.push(f[I]),!u(n))){var k=n.filter(function(D){return D.key===f[I].key});f[I].count=k[0].count}f[I].count=u(n)?f[I].count+=1:f[I].count,(!o||o&&i.length)&&f[I].items.push(l[b])},v=this,y=0;y<l.length;y++)m(y);if(i&&i.length)for(var w=function(b){for(var I={},k=void 0,D=i,W=0;W<i.length;W++)if(k=a.aggregates[i[W].type],u(n))k&&(I[D[W].field+" - "+D[W].type]=k(g[b].items,D[W].field));else{var Z=n.filter(function(J){return J.key===g[b].key});k&&(I[D[W].field+" - "+D[W].type]=k(Z[0].items,D[W].field))}g[b].aggregates=I},y=0;y<g.length;y++)w(y);if(o&&g.length&&i.length)for(var y=0;y<g.length;y++)g[y].items=[];return l.length&&g||l},a.buildHierarchy=function(e,t,i,r,n){var s,o={},l;for(r.result&&(r=r.result),r.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),s=0;s<r.length;s++){var h=this.getObject(e,r[s]);l=o[h]||(o[h]=[]),l.push(r[s])}for(s=0;s<i.length;s++){var h=this.getObject(n||e,i[s]);i[s][t]=o[h]}},a.getFieldList=function(e,t,i){if(i===void 0&&(i=""),t==null)return this.getFieldList(e,[],i);for(var r=e,n=Object.keys(e),s=0,o=n;s<o.length;s++){var l=o[s];typeof r[l]=="object"&&!(r[l]instanceof Array)?this.getFieldList(r[l],t,i+l+"."):t.push(i+l)}return t},a.getObject=function(e,t){if(!e)return t;if(t){if(e.indexOf(".")===-1){var i=e.charAt(0).toLowerCase()+e.slice(1),r=e.charAt(0).toUpperCase()+e.slice(1);return u(t[e])?u(t[i])?u(t[r])?null:t[r]:t[i]:t[e]}for(var n=t,s=e.split("."),o=0;o<s.length&&n!=null;o++){if(n=n[s[o]],n===void 0){var l=s[o].charAt(0).toUpperCase()+s[o].slice(1);n=t[l]||t[l.charAt(0).toLowerCase()+l.slice(1)]||null}t=n}return n}},a.setValue=function(e,t,i){var r=e.toString().split("."),n=i||{},s=n,o,l=r.length,h;for(o=0;o<l;o++)h=r[o],o+1===l?s[h]=t===void 0?void 0:t:u(s[h])&&(s[h]={}),s=s[h];return n},a.sort=function(e,t,i){if(e.length<=1)return e;var r=parseInt((e.length/2).toString(),10),n=e.slice(0,r),s=e.slice(r);return n=this.sort(n,t,i),s=this.sort(s,t,i),this.merge(n,s,t,i)},a.ignoreDiacritics=function(e){if(typeof e!="string")return e;var t=e.split(""),i=t.map(function(r){return r in a.diacritics?a.diacritics[r]:r});return i.join("")},a.merge=function(e,t,i,r){for(var n=[],s;e.length>0||t.length>0;)e.length>0&&t.length>0?r?s=r(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:s=e[0][i]<e[0][i]?e:t:s=e.length>0?e:t,n.push(s.shift());return n},a.getVal=function(e,t,i){return i?this.getObject(i,e[t]):e[t]},a.toLowerCase=function(e){return e?typeof e=="string"?e.toLowerCase():e.toString():e===0||e===!1?e.toString():""},a.callAdaptorFunction=function(e,t,i,r){if(t in e){var n=e[t](i,r);u(n)||(i=n)}return i},a.getAddParams=function(e,t,i){var r={};return a.callAdaptorFunction(e,"addParams",{dm:t,query:i,params:i.params,reqParams:r}),r},a.isPlainObject=function(e){return!!e&&e.constructor===Object},a.isCors=function(){var e=null,t="XMLHttpRequest";try{e=new window[t]}catch{}return!!e&&"withCredentials"in e},a.getGuid=function(e){var t="0123456789abcdef",i;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(r,n){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),i=s[0]%16|0}else i=Math.random()*16|0;return t[n===19?i&3|8:i]})},a.isNull=function(e){return e==null},a.getItemFromComparer=function(e,t,i){var r,n,s,o=0,l=typeof a.getVal(e,0,t)=="string";if(e.length)for(;u(r)&&o<e.length;)r=a.getVal(e,o,t),s=e[o++];for(;o<e.length;o++)n=a.getVal(e,o,t),!u(n)&&(l&&(r=+r,n=+n),i(r,n)>0&&(r=n,s=e[o]));return s},a.distinct=function(e,t,i){i=u(i)?!1:i;var r=[],n,s={};return e.forEach(function(o,l){n=typeof e[l]=="object"?a.getVal(e,l,t):e[l],n in s||(r.push(i?e[l]:n),s[n]=1)}),r},a.processData=function(e,t){var i=this.prepareQuery(e),r=new q(t);e.requiresCounts&&i.requiresCount();var n=r.executeLocal(i),s={result:e.requiresCounts?n.result:n,count:n.count,aggregates:JSON.stringify(n.aggregates)};return e.requiresCounts?s:n},a.prepareQuery=function(e){var t=this,i=new re;if(e.select&&i.select(e.select),e.where){var r=a.parse.parseJson(e.where);r.filter(function(s){if(u(s.condition))i.where(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent);else{var o=[];s.field?o.push(new pe(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent)):o=o.concat(t.getPredicate(s.predicates)),s.condition==="or"?i.where(pe.or(o)):s.condition==="and"&&i.where(pe.and(o))}})}if(e.search){var n=a.parse.parseJson(e.search);n.filter(function(s){return i.search(s.key,s.fields,s.operator,s.ignoreCase,s.ignoreAccent)})}return e.aggregates&&e.aggregates.filter(function(s){return i.aggregate(s.type,s.field)}),e.sorted&&e.sorted.filter(function(s){return i.sortBy(s.name,s.direction)}),e.skip&&i.skip(e.skip),e.take&&i.take(e.take),e.group&&e.group.filter(function(s){return i.group(s)}),i},a.getPredicate=function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];if(r.field)t.push(new pe(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent));else{for(var n=[],s=this.getPredicate(r.predicates),o=0,l=Object.keys(s);o<l.length;o++){var h=l[o];n.push(s[h])}t.push(r.condition==="or"?pe.or(n):pe.and(n))}}return t},a.serverTimezoneOffset=null,a.timeZoneHandling=!0,a.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+`
`+t.stack}},a.aggregates={sum:function(e,t){for(var i=0,r,n=typeof a.getVal(e,0,t)!="number",s=0;s<e.length;s++)r=a.getVal(e,s,t),!isNaN(r)&&r!==null&&(n&&(r=+r),i+=r);return i},average:function(e,t){return a.aggregates.sum(e,t)/e.length},min:function(e,t){var i;return typeof t=="function"&&(i=t,t=null),a.getObject(t,a.getItemFromComparer(e,t,i||a.fnAscending))},max:function(e,t){var i;return typeof t=="function"&&(i=t,t=null),a.getObject(t,a.getItemFromComparer(e,t,i||a.fnDescending))},truecount:function(e,t){return new q(e).executeLocal(new re().where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new q(e).executeLocal(new re().where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},a.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},a.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},a.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},a.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},a.diacritics={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B","Ƀ":"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D","Ꝺ":"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F","Ꝼ":"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J","Ɉ":"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M","Ɱ":"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N","Ƞ":"N",Ɲ:"N","Ꞑ":"N","Ꞥ":"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O","Ꝋ":"O","Ꝍ":"O",Ƣ:"OI","Ꝏ":"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q",Ｑ:"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S",Ｓ:"S","ẞ":"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U","Ʉ":"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W","Ⱳ":"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a","ⱥ":"a",ɐ:"a","ꜳ":"aa",æ:"ae",ǽ:"ae",ǣ:"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d","ꝺ":"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e","ɇ":"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f","ꝼ":"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h","ⱨ":"h","ⱶ":"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j","ɉ":"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n","ꞑ":"n","ꞥ":"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o","ꝋ":"o","ꝍ":"o",ɵ:"o",ƣ:"oi",ȣ:"ou","ꝏ":"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q",ｑ:"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r","ɍ":"r",ɽ:"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s","ȿ":"s","ꞩ":"s","ꞅ":"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v","ꝟ":"v",ʌ:"v","ꝡ":"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w","ⱳ":"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y","ɏ":"y","ỿ":"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z","ɀ":"z","ⱬ":"z","ꝣ":"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"},a.fnOperators={equal:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?a.toLowerCase(e)===a.toLowerCase(t):e===t},notequal:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),!a.fnOperators.equal(e,t,i)},lessthan:function(e,t,i){return i?a.toLowerCase(e)<a.toLowerCase(t):(u(e)&&(e=void 0),e<t)},greaterthan:function(e,t,i){return i?a.toLowerCase(e)>a.toLowerCase(t):e>t},lessthanorequal:function(e,t,i){return i?a.toLowerCase(e)<=a.toLowerCase(t):(u(e)&&(e=void 0),e<=t)},greaterthanorequal:function(e,t,i){return i?a.toLowerCase(e)>=a.toLowerCase(t):e>=t},contains:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?!u(e)&&!u(t)&&a.toLowerCase(e).indexOf(a.toLowerCase(t))!==-1:!u(e)&&!u(t)&&e.toString().indexOf(t)!==-1},doesnotcontain:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?!u(e)&&!u(t)&&a.toLowerCase(e).indexOf(a.toLowerCase(t))===-1:!u(e)&&!u(t)&&e.toString().indexOf(t)===-1},isnotnull:function(e){return e!=null},isnull:function(e){return e==null},startswith:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?e&&t&&a.startsWith(a.toLowerCase(e),a.toLowerCase(t)):e&&t&&a.startsWith(e,t)},doesnotstartwith:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?e&&t&&a.notStartsWith(a.toLowerCase(e),a.toLowerCase(t)):e&&t&&a.notStartsWith(e,t)},like:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?e&&t&&a.like(a.toLowerCase(e),a.toLowerCase(t)):e&&t&&a.like(e,t)},isempty:function(e){return e===void 0||e===""},isnotempty:function(e){return e!==void 0&&e!==""},wildcard:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?(e||typeof e=="boolean")&&t&&typeof e!="object"&&a.wildCard(a.toLowerCase(e),a.toLowerCase(t)):(e||typeof e=="boolean")&&t&&a.wildCard(e,t)},endswith:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?e&&t&&a.endsWith(a.toLowerCase(e),a.toLowerCase(t)):e&&t&&a.endsWith(e,t)},doesnotendwith:function(e,t,i,r){return r&&(e=a.ignoreDiacritics(e),t=a.ignoreDiacritics(t)),i?e&&t&&a.notEndsWith(a.toLowerCase(e),a.toLowerCase(t)):e&&t&&a.notEndsWith(e,t)},processSymbols:function(e){var t=a.operatorSymbols[e];if(t){var i=a.fnOperators[t];return i}return a.throwError("Query - Process Operator : Invalid operator")},processOperator:function(e){var t=a.fnOperators[e];return t||a.fnOperators.processSymbols(e)}},a.parse={parseJson:function(e){return typeof e=="string"&&(/^[\s]*\[|^[\s]*\{(.)+:/g.test(e)||e.indexOf('"')===-1)?e=JSON.parse(e,a.parse.jsonReviver):e instanceof Array?a.parse.iterateAndReviveArray(e):typeof e=="object"&&e!==null&&a.parse.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)typeof e[t]=="object"&&e[t]!==null?a.parse.iterateAndReviveJson(e[t]):typeof e[t]=="string"&&(!/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[t])||e[t].toString().indexOf('"')===-1)?e[t]=a.parse.jsonReviver("",e[t]):e[t]=a.parse.parseJson(e[t])},iterateAndReviveJson:function(e){for(var t,i=Object.keys(e),r=0,n=i;r<n.length;r++){var s=n[r];a.startsWith(s,"__")||(t=e[s],typeof t=="object"?t instanceof Array?a.parse.iterateAndReviveArray(t):t&&a.parse.iterateAndReviveJson(t):e[s]=a.parse.jsonReviver(e[s],t))}},jsonReviver:function(e,t){if(typeof t=="string"){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),r=a.timeZoneHandling?a.serverTimezoneOffset:null;if(i)return a.dateParse.toTimeZone(new Date(parseInt(i[1],10)),r,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var n=t.indexOf("Z")>-1||t.indexOf("z")>-1,s=t.split(/[^0-9.]/);if(n){if(s[5].indexOf(".")>-1){var o=s[5].split(".");s[5]=o[0],s[6]=new Date(t).getUTCMilliseconds().toString()}else s[6]="00";t=a.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5]?s[5]:"00",10),parseInt(s[6],10)),a.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5]?s[5]:"00",10)),h=parseInt(s[6],10),p=parseInt(s[7],10);if(isNaN(h)&&isNaN(p))return l;t.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-p):l.setHours(l.getHours()+h,l.getMinutes()+p),t=a.dateParse.toTimeZone(l,a.serverTimezoneOffset,!1)}a.serverTimezoneOffset==null&&(t=a.dateParse.addSelfOffset(t))}}return t},isJson:function(e){return typeof e[0]=="string"?e:a.parse.parseJson(e)},isGuid:function(e){var t=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i,i=t.exec(e);return i!=null},replacer:function(e,t){return a.isPlainObject(e)?a.parse.jsonReplacer(e,t):e instanceof Array?a.parse.arrayReplacer(e):e instanceof Date?a.parse.jsonReplacer({val:e},t).val:e},jsonReplacer:function(e,t){for(var i,r=Object.keys(e),n=0,s=r;n<s.length;n++){var o=s[n];if(i=e[o],i instanceof Date){var l=i;a.serverTimezoneOffset==null?e[o]=a.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+a.serverTimezoneOffset*36e5),e[o]=a.dateParse.toTimeZone(a.dateParse.addSelfOffset(l),null).toJSON())}}return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)a.isPlainObject(e[t])?e[t]=a.parse.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=a.parse.jsonReplacer({date:e[t]}).date);return e},jsonDateReplacer:function(e,t){if(e==="value"&&t){if(typeof t=="string"){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(i)t=a.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var r=t.split(/[^0-9]/);t=a.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(t instanceof Date)return t=a.dateParse.addSelfOffset(t),a.serverTimezoneOffset===null?a.dateParse.toTimeZone(a.dateParse.addSelfOffset(t),null).toJSON():(t=a.dateParse.toTimeZone(t,t.getTimezoneOffset()/60-a.serverTimezoneOffset,!1),t.toJSON())}return t}},a.dateParse={addSelfOffset:function(e){return new Date(+e-e.getTimezoneOffset()*6e4)},toUTC:function(e){return new Date(+e+e.getTimezoneOffset()*6e4)},toTimeZone:function(e,t,i){if(t===null)return e;var r=i?a.dateParse.toUTC(e):e;return new Date(+r-t*36e5)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),r=i>=0?"+":"-",n=function(o){var l=Math.floor(Math.abs(o));return(l<10?"0":"")+l},s=t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+"T"+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())+r+n(i/60)+":"+n(i%60);return s}},a}(),wi=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ec={GroupGuid:"{271bbba0-1ee7}"},au=function(){function a(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=a,this.dataSource=e,this.pvt={}}return a.prototype.processResponse=function(e,t,i,r){return e},a}(),Va=function(a){wi(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.processQuery=function(t,i){for(var r=t.dataSource.json.slice(0),n=r.length,s=!0,o,l,h={},p=0,c=[],d=[],f,g=0;g<i.lazyLoad.length;g++)p++,h[i.lazyLoad[g].key]=i.lazyLoad[g].value;var m={},v=!1;if(i.lazyLoad.length){for(var g=0;g<i.queries.length;g++)if(l=i.queries[g],l.fn==="onGroup"&&!u(l.e.format)){v=!0;break}}for(var g=0;g<i.queries.length;g++){if(l=i.queries[g],(l.fn==="onPage"||l.fn==="onGroup"||l.fn==="onSortBy"&&!v)&&i.lazyLoad.length){l.fn==="onGroup"&&c.push(l.e),l.fn==="onPage"&&(f=l.e),l.fn==="onSortBy"&&d.unshift(l.e);continue}o=this[l.fn].call(this,r,l.e,i),l.fn==="onAggregates"?m[l.e.field+" - "+l.e.type]=o:r=o!==void 0?o:r,(l.fn==="onPage"||l.fn==="onSkip"||l.fn==="onTake"||l.fn==="onRange")&&(s=!1),s&&(n=r.length)}if(p){var y={query:i,lazyLoad:h,result:r,group:c,page:f,sort:d},w=this.lazyLoadGroup(y);r=w.result,n=w.count}return i.isCountRequired&&(r={result:r,count:n,aggregates:m}),r},e.prototype.lazyLoadGroup=function(t){var i=0,r=this.getAggregate(t.query),n=t.result;if(u(t.lazyLoad.onDemandGroupInfo)){var p=t.group[0].fieldName;n=A.group(n,p,r,null,null,t.group[0].comparer,!0),i=n.length;var h=n;if(t.sort.length){var c=t.sort.length>1?t.sort.filter(function(f){return f.fieldName===p})[0]:t.sort[0];n=this.onSortBy(n,c,t.query,!0)}t.page&&(n=this.onPage(n,t.page,t.query)),this.formGroupResult(n,h)}else{for(var s=t.lazyLoad.onDemandGroupInfo,o=s.where.length-1;o>=0;o--)n=this.onWhere(n,s.where[o]);if(t.group.length!==s.level){var l=t.group[s.level].fieldName;n=A.group(n,l,r,null,null,t.group[s.level].comparer,!0),t.sort.length&&(n=this.onSortBy(n,t.sort[parseInt(s.level.toString(),10)],t.query,!0))}else for(var o=t.sort.length-1;o>=s.level;o--)n=this.onSortBy(n,t.sort[parseInt(o.toString(),10)],t.query,!1);i=n.length;var h=n;n=n.slice(s.skip),n=n.slice(0,s.take),t.group.length!==s.level&&this.formGroupResult(n,h)}return{result:n,count:i}},e.prototype.formGroupResult=function(t,i){if(t.length&&i.length){var r="GroupGuid",n="childLevels",s="level",o="records";t[r]=i[r],t[n]=i[n],t[s]=i[s],t[o]=i[o]}return t},e.prototype.getAggregate=function(t){var i=re.filterQueries(t.queries,"onAggregates"),r=[];if(i.length)for(var n=void 0,s=0;s<i.length;s++)n=i[s].e,r.push({type:n.type,field:A.getValue(n.field,t)});return r},e.prototype.batchRequest=function(t,i,r){var n,s=i.deletedRecords.length;for(n=0;n<i.addedRecords.length;n++)this.insert(t,i.addedRecords[n]);for(n=0;n<i.changedRecords.length;n++)this.update(t,r.key,i.changedRecords[n]);for(n=0;n<s;n++)this.remove(t,r.key,i.deletedRecords[n]);return i},e.prototype.onWhere=function(t,i){return!t||!t.length?t:t.filter(function(r){if(i)return i.validate(r)})},e.prototype.onAggregates=function(t,i){var r=A.aggregates[i.type];return!t||!r||t.length===0?null:r(t,i.field)},e.prototype.onSearch=function(t,i){return!t||!t.length?t:(i.fieldNames.length===0&&A.getFieldList(t[0],i.fieldNames),t.filter(function(r){for(var n=0;n<i.fieldNames.length;n++)if(i.comparer.call(r,A.getObject(i.fieldNames[n],r),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1}))},e.prototype.onSortBy=function(t,i,r,n){if(!t||!t.length)return t;var s,o=A.getValue(i.fieldName,r);if(!o)return t.sort(i.comparer);if(o instanceof Array){o=o.slice(0);for(var l=o.length-1;l>=0;l--)o[l]&&(s=i.comparer,A.endsWith(o[l]," desc")&&(s=A.fnSort("descending"),o[l]=o[l].replace(" desc","")),t=A.sort(t,o[l],s));return t}return A.sort(t,n?"key":o,i.comparer)},e.prototype.onGroup=function(t,i,r){if(!t||!t.length)return t;var n=this.getAggregate(r);return A.group(t,A.getValue(i.fieldName,r),n,null,null,i.comparer)},e.prototype.onPage=function(t,i,r){var n=A.getValue(i.pageSize,r),s=(A.getValue(i.pageIndex,r)-1)*n,o=s+n;return!t||!t.length?t:t.slice(s,o)},e.prototype.onRange=function(t,i){return!t||!t.length?t:t.slice(A.getValue(i.start),A.getValue(i.end))},e.prototype.onTake=function(t,i){return!t||!t.length?t:t.slice(0,A.getValue(i.nos))},e.prototype.onSkip=function(t,i){return!t||!t.length?t:t.slice(A.getValue(i.nos))},e.prototype.onSelect=function(t,i){return!t||!t.length?t:A.select(t,A.getValue(i.fieldNames))},e.prototype.insert=function(t,i,r,n,s){return u(s)?t.dataSource.json.push(i):t.dataSource.json.splice(s,0,i)},e.prototype.remove=function(t,i,r,n){var s=t.dataSource.json,o;for(typeof r=="object"&&!(r instanceof Date)&&(r=A.getObject(i,r)),o=0;o<s.length&&A.getObject(i,s[o])!==r;o++);return o!==s.length?s.splice(o,1):null},e.prototype.update=function(t,i,r,n){var s=t.dataSource.json,o,l;for(u(i)||(l=j(i,r)),o=0;o<s.length&&!(!u(i)&&j(i,s[o])===l);o++);return o<s.length?zi(s[o],r):null},e}(au),jt=function(a){wi(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.processQuery=function(t,i,r){var n=this.getQueryRequest(i),s=re.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=i.params,l=t.dataSource.url,h,p,c=null,d=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in s?(h=s.onPage,p=A.getValue(h.pageIndex,i),c=A.getValue(h.pageSize,i),p=(p-1)*c):"onRange"in s&&(h=s.onRange,p=h.start,c=h.end-h.start);for(var g=0;g<n.sorts.length;g++)h=A.getValue(n.sorts[g].e.fieldName,i),f.sorts.push(A.callAdaptorFunction(this,"onEachSort",{name:h,direction:n.sorts[g].e.direction},i));r&&(h=this.getFiltersFrom(r,i),h&&f.filters.push(A.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)));for(var g=0;g<n.filters.length;g++){var m=A.callAdaptorFunction(this,"onEachWhere",n.filters[g].e.toJson(),i);this.getModuleName&&this.getModuleName()==="ODataV4Adaptor"&&!u(n.filters[g].e.key)&&n.filters.length>1&&(m="("+m+")"),f.filters.push(m);for(var v=typeof f.filters[g]=="object"?Object.keys(f.filters[g]):[],y=0,w=v;y<w.length;y++){var b=w[y];A.isNull(f[b])&&delete f[b]}}for(var g=0;g<n.searches.length;g++)h=n.searches[g].e,f.searches.push(A.callAdaptorFunction(this,"onEachSearch",{fields:h.fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase},i));for(var g=0;g<n.groups.length;g++)f.groups.push(A.getValue(n.groups[g].e.fieldName,i));for(var g=0;g<n.aggregates.length;g++)h=n.aggregates[g].e,f.aggregates.push({type:h.type,field:A.getValue(h.field,i)});var I={};if(this.getRequestQuery(d,i,s,f,I),A.callAdaptorFunction(this,"addParams",{dm:t,query:i,params:o,reqParams:I}),i.lazyLoad.length)for(var g=0;g<i.lazyLoad.length;g++)I[i.lazyLoad[g].key]=i.lazyLoad[g].value;for(var k=Object.keys(I),D=0,W=k;D<W.length;D++){var b=W[D];(A.isNull(I[b])||I[b]===""||I[b].length===0)&&delete I[b]}!(d.skip in I&&d.take in I)&&c!==null&&(I[d.skip]=A.callAdaptorFunction(this,"onSkip",p,i),I[d.take]=A.callAdaptorFunction(this,"onTake",c,i));var Z=this.pvt;return this.pvt={},this.options.requestType==="json"?{data:JSON.stringify(I,A.parse.jsonDateReplacer),url:l,pvtData:Z,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(I,i,t),h=(t.dataSource.url.indexOf("?")!==-1?"&":"/")+h,{type:"GET",url:h.length?l.replace(/\/*$/,h):l,pvtData:Z})},e.prototype.getRequestQuery=function(t,i,r,n,s){var o="param",l=s;l[t.from]=i.fromTable,t.apply&&i.distincts.length&&(l[t.apply]="onDistinct"in this?A.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&t.expand&&(l[t.expand]="onExpand"in this&&"onSelect"in r?A.callAdaptorFunction(this,"onExpand",{selects:A.getValue(r.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[t.select]="onSelect"in r&&!i.distincts.length?A.callAdaptorFunction(this,"onSelect",A.getValue(r.onSelect.fieldNames,i),i):"",l[t.count]=i.isCountRequired?A.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[t.search]=n.searches.length?A.callAdaptorFunction(this,"onSearch",n.searches,i):"",l[t.skip]="onSkip"in r?A.callAdaptorFunction(this,"onSkip",A.getValue(r.onSkip.nos,i),i):"",l[t.take]="onTake"in r?A.callAdaptorFunction(this,"onTake",A.getValue(r.onTake.nos,i),i):"",l[t.where]=n.filters.length||n.searches.length?A.callAdaptorFunction(this,"onWhere",n.filters,i):"",l[t.sortBy]=n.sorts.length?A.callAdaptorFunction(this,"onSortBy",n.sorts,i):"",l[t.group]=n.groups.length?A.callAdaptorFunction(this,"onGroup",n.groups,i):"",l[t.aggregates]=n.aggregates.length?A.callAdaptorFunction(this,"onAggregates",n.aggregates,i):"",l[o]=[]},e.prototype.convertToQueryString=function(t,i,r){return""},e.prototype.processResponse=function(t,i,r,n,s,o){if(n&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("application/json")!==-1){var l=A.timeZoneHandling;i&&!i.timeZoneHandling&&(A.timeZoneHandling=!1),t=A.parse.parseJson(t),A.timeZoneHandling=l}var h=s,p=h.pvtData||{},c=t?t.groupDs:[];if(n&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("xml")!==-1)return r.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(h.data);if(d&&d.action==="batch"&&t&&t.addedRecords)return o.addedRecords=t.addedRecords,o;t&&t.d&&(t=t.d);var f={};t&&"count"in t&&(f.count=t.count),f.result=t&&t.result?t.result:t;var g=!1;if(Array.isArray(t.result)&&t.result.length){var m="key",v="value",y="level";if(u(t.result[0][m])||(f.result=this.formRemoteGroupedData(f.result,1,p.groups.length-1)),r&&r.lazyLoad.length&&p.groups.length){for(var w=0;w<r.lazyLoad.length;w++)if(r.lazyLoad[w][m]==="onDemandGroupInfo"){var b=r.lazyLoad[w][v][y];p.groups.length===b&&(g=!0)}}}return g||this.getAggregateResult(p,t,f,c,r),A.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},e.prototype.formRemoteGroupedData=function(t,i,r){for(var n=0;n<t.length;n++)t[n].items.length&&Object.keys(t[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(t[n].items,i+1,r-1);var s="GroupGuid",o="childLevels",l="level",h="records";return t[s]=ec[s],t[l]=i,t[o]=r,t[h]=t[0].items.length?this.getGroupedRecords(t,!u(t[0].items[h])):[],t},e.prototype.getGroupedRecords=function(t,i){for(var r=[],n="records",s=0;s<t.length;s++)if(i)r=r.concat(t[s].items[n]);else for(var o=0;o<t[s].items.length;o++)r.push(t[s].items[o]);return r},e.prototype.onGroup=function(t){return this.pvt.groups=t,t},e.prototype.onAggregates=function(t){this.pvt.aggregates=t},e.prototype.batchRequest=function(t,i,r,n,s){var o,l;return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.removeUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(P({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:r[o],key:r[l]},A.getAddParams(this,t,n)))}},e.prototype.beforeSend=function(t,i){},e.prototype.insert=function(t,i,r,n){return{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(P({},{value:i,table:r,action:"insert"},A.getAddParams(this,t,n)))}},e.prototype.remove=function(t,i,r,n,s){return{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(P({},{key:r,keyColumn:i,table:n,action:"remove"},A.getAddParams(this,t,s)))}},e.prototype.update=function(t,i,r,n,s){return{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(P({},{value:r,action:"update",keyColumn:i,key:A.getObject(i,r),table:n},A.getAddParams(this,t,s)))}},e.prototype.getFiltersFrom=function(t,i){var r=i.fKey,n,s=r,o=i.key,l=[];typeof t[0]!="object"&&(s=null);for(var h=0;h<t.length;h++)typeof t[0]=="object"?n=A.getObject(o||s,t[h]):n=t[h],l.push(new pe(r,"equal",n));return pe.or(l)},e.prototype.getAggregateResult=function(t,i,r,n,s){var o=i;if(i&&i.result&&(o=i.result),t&&t.aggregates&&t.aggregates.length){var l=t.aggregates,h=void 0,p=o,c={};i.aggregate&&(p=i.aggregate);for(var d=0;d<l.length;d++)h=A.aggregates[l[d].type],h&&(c[l[d].field+" - "+l[d].type]=h(p,l[d].field));r.aggregates=c}var f="key",g=Array.isArray(i.result)&&i.result.length&&!u(i.result[0][f]);if(t&&t.groups&&t.groups.length&&!g){for(var m=t.groups,d=0;d<m.length;d++){var v=null;u(n)||(n=A.group(n,m[d]));var y=re.filterQueries(s.queries,"onGroup")[d].e;o=A.group(o,m[d],t.aggregates,v,n,y.comparer)}r.result=o}return r},e.prototype.getQueryRequest=function(t){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=re.filterQueries(t.queries,"onSortBy"),i.groups=re.filterQueries(t.queries,"onGroup"),i.filters=re.filterQueries(t.queries,"onWhere"),i.searches=re.filterQueries(t.queries,"onSearch"),i.aggregates=re.filterQueries(t.queries,"onAggregates"),i},e.prototype.addParams=function(t){var i=t.reqParams;t.params.length&&(i.params={});for(var r=0,n=t.params;r<n.length;r++){var s=n[r];if(i[s.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[s.key]=s.value,s.fn&&(i[s.key]=s.fn.call(t.query,s.key,t.query,t.dm)),i.params[s.key]=i[s.key]}},e}(au),jr=function(a){wi(e,a);function e(t){var i=a.call(this)||this;return i.options=P({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),P(i.options,t||{}),i}return e.prototype.getModuleName=function(){return"ODataAdaptor"},e.prototype.onPredicate=function(t,i,r){var n="",s,o,l=t.value,h=typeof l,p=t.field?e.getField(t.field):null;if(l instanceof Date&&(l="datetime'"+A.parse.replacer(l)+"'"),h==="string"&&(l=l.replace(/'/g,"''"),t.ignoreCase&&(l=l.toLowerCase()),t.operator!=="like"&&(l=encodeURIComponent(l)),t.operator!=="wildcard"&&t.operator!=="like"&&(l="'"+l+"'"),r&&(p="cast("+p+", 'Edm.String')"),A.parse.isGuid(l)&&(o="guid"),t.ignoreCase&&(o||(p="tolower("+p+")"),l=l.toLowerCase())),t.operator==="isempty"||t.operator==="isnull"||t.operator==="isnotempty"||t.operator==="isnotnull"?(s=t.operator.indexOf("isnot")!==-1?A.odBiOperator.notequal:A.odBiOperator.equal,l=t.operator==="isnull"||t.operator==="isnotnull"?null:"''"):s=A.odBiOperator[t.operator],s)return n+=p,n+=s,o&&(n+=o),n+l;if(!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?s=A.odv4UniOperator[t.operator]:s=A.odUniOperator[t.operator],s==="like")l=l,l.indexOf("%")!==-1&&(l.charAt(0)==="%"&&l.lastIndexOf("%")<2?(l=l.substring(1,l.length),s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.startswith:A.odUniOperator.startswith):l.charAt(l.length-1)==="%"&&l.indexOf("%")>l.length-3?(l=l.substring(0,l.length-1),s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.endswith:A.odUniOperator.endswith):l.lastIndexOf("%")!==l.indexOf("%")&&l.lastIndexOf("%")>l.indexOf("%")+1?(l=l.substring(l.indexOf("%")+1,l.lastIndexOf("%")),s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains):s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains),l=encodeURIComponent(l),l="'"+l+"'";else if(s==="wildcard")if(l=l,l.indexOf("*")!==-1){var c=l.split("*"),d=void 0,f=0;if(l.indexOf("*")!==0&&c[0].indexOf("%3f")===-1&&c[0].indexOf("?")===-1&&(d=c[0],d="'"+d+"'",s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.startswith:A.odUniOperator.startswith,n+=s+"(",n+=p+",",o&&(n+=o),n+=d+")",f++),l.lastIndexOf("*")!==l.length-1&&c[c.length-1].indexOf("%3f")===-1&&c[c.length-1].indexOf("?")===-1&&(d=c[c.length-1],d="'"+d+"'",s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.endswith:A.odUniOperator.endswith,f>0&&(n+=" and "),n+=s+"(",n+=p+",",o&&(n+=o),n+=d+")",f++),c.length>2){for(var g=1;g<c.length-1;g++)if(c[g].indexOf("%3f")===-1&&c[g].indexOf("?")===-1){if(d=c[g],d="'"+d+"'",s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,f>0&&(n+=" and "),s==="substringof"||s==="not substringof"){var m=d;d=p,p=m}n+=s+"(",n+=p+",",o&&(n+=o),n+=d+")",f++}}f===0?(s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'"):s="wildcard"}else s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'";if(s==="substringof"||s==="not substringof"){var m=l;l=p,p=m}return s!=="wildcard"&&(n+=s+"(",n+=p+",",o&&(n+=o),n+=l+")"),n},e.prototype.addParams=function(t){a.prototype.addParams.call(this,t),delete t.reqParams.params},e.prototype.onComplexPredicate=function(t,i,r){for(var n=[],s=0;s<t.predicates.length;s++)n.push("("+this.onEachWhere(t.predicates[s],i,r)+")");return n.join(" "+t.condition+" ")},e.prototype.onEachWhere=function(t,i,r){return t.isComplex?this.onComplexPredicate(t,i,r):this.onPredicate(t,i,r)},e.prototype.onWhere=function(t){return this.pvt.search&&t.push(this.onEachWhere(this.pvt.search,null,!0)),t.join(" and ")},e.prototype.onEachSearch=function(t){t.fields&&t.fields.length===0&&A.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],r=0;r<t.fields.length;r++)i.push(new pe(t.fields[r],t.operator,t.key,t.ignoreCase));this.pvt.search=i},e.prototype.onSearch=function(t){return this.pvt.search=pe.or(this.pvt.search),""},e.prototype.onEachSort=function(t){var i=[];if(t.name instanceof Array)for(var r=0;r<t.name.length;r++)i.push(e.getField(t.name[r])+(t.direction==="descending"?" desc":""));else i.push(e.getField(t.name)+(t.direction==="descending"?" desc":""));return i.join(",")},e.prototype.onSortBy=function(t){return t.reverse().join(",")},e.prototype.onGroup=function(t){return this.pvt.groups=t,[]},e.prototype.onSelect=function(t){for(var i=0;i<t.length;i++)t[i]=e.getField(t[i]);return t.join(",")},e.prototype.onAggregates=function(t){return this.pvt.aggregates=t,""},e.prototype.onCount=function(t){return t===!0?"allpages":""},e.prototype.beforeSend=function(t,i,r){A.endsWith(r.url,this.options.batch)&&r.type.toLowerCase()==="post"?(i.headers.set("Accept",this.options.multipartAccept),i.headers.set("DataServiceVersion","2.0")):i.headers.set("Accept",this.options.accept),i.headers.set("DataServiceVersion","2.0"),i.headers.set("MaxDataServiceVersion","2.0")},e.prototype.processResponse=function(t,i,r,n,s,o){var l="odata.metadata";if(s&&s.type==="GET"&&!this.rootUrl&&t[l]){var h=t[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}var p="pvtData";if(!u(t.d)){var c=r&&r.isCountRequired?t.d.results:t.d,d="__metadata";if(!u(c))for(var f=0;f<c.length;f++)u(c[f][d])||delete c[f][d]}var g=s&&s[p],m=this.processBatchResponse(t,r,n,s,o);if(m)return m;var v=n&&s.fetchRequest.headers.get("DataServiceVersion"),y=null,w=v&&parseInt(v,10)||2;if(r&&r.isCountRequired){var b="__count";(t[b]||t["odata.count"])&&(y=t[b]||t["odata.count"]),t.d&&(t=t.d),(t[b]||t["odata.count"])&&(y=t[b]||t["odata.count"])}w===3&&t.value&&(t=t.value),t.d&&(t=t.d),w<3&&t.results&&(t=t.results);var I={};return I.count=y,I.result=t,this.getAggregateResult(g,t,I,null,r),A.isNull(y)?I.result:{result:I.result,count:I.count,aggregates:I.aggregates}},e.prototype.convertToQueryString=function(t,i,r){var n=[],s="table",o=t[s]||"",l="$format";delete t[s],r.dataSource.requiresFormat&&(t[l]="json");for(var h=Object.keys(t),p=0,c=h;p<c.length;p++){var d=c[p];n.push(d+"="+t[d])}return n=n.join("&"),r.dataSource.url&&r.dataSource.url.indexOf("?")!==-1&&!o?n:n.length?o+"?"+n:o||""},e.prototype.localTimeReplacer=function(t,i){for(var r=0,n=u(i)?[]:Object.keys(i);r<n.length;r++){var s=n[r];i[s]instanceof Date&&(i[s]=A.dateParse.toLocalTime(i[s]))}return i},e.prototype.insert=function(t,i,r){return{url:(t.dataSource.insertUrl||t.dataSource.url).replace(/\/*$/,r?"/"+r:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},e.prototype.remove=function(t,i,r,n){var s;return typeof r=="string"&&!A.parse.isGuid(r)?s="('"+r+"')":s="("+r+")",{type:"DELETE",url:(t.dataSource.removeUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s}},e.prototype.update=function(t,i,r,n,s,o){this.options.updateType==="PATCH"&&!u(o)&&(r=this.compareAndRemove(r,o,i));var l;return typeof r[i]=="string"&&!A.parse.isGuid(r[i])?l="('"+r[i]+"')":l="("+r[i]+")",{type:this.options.updateType,url:(t.dataSource.updateUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+l,data:JSON.stringify(r,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},e.prototype.batchRequest=function(t,i,r,n,s){var o=r.guid=A.getGuid(this.options.batchPre),l=t.dataSource.batchUrl||this.rootUrl?(t.dataSource.batchUrl||this.rootUrl)+"/"+this.options.batch:(t.dataSource.batchUrl||t.dataSource.url).replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;var h={url:r.url,key:r.key,cid:1,cSet:A.getGuid(this.options.changeSet)},p="--"+o+`
`;return p+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+`
`,this.pvt.changeSet=0,p+=this.generateInsertRequest(i.addedRecords,h,t),p+=this.generateUpdateRequest(i.changedRecords,h,t,s?s.changedRecords:[]),p+=this.generateDeleteRequest(i.deletedRecords,h,t),p+=h.cSet+`--
`,p+="--"+o+"--",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+o,data:p}},e.prototype.generateDeleteRequest=function(t,i,r){if(!t)return"";var n="",s={method:"DELETE ",url:function(o,l,h){var p=A.getObject(h,o[l]);if(typeof p=="number"||A.parse.isGuid(p))return"("+p+")";if(p instanceof Date){var c=o[l][h];return"("+c.toJSON()+")"}else return"('"+p+"')"},data:function(o,l){return""}};return n=this.generateBodyContent(t,i,s,r),n+`
`},e.prototype.generateInsertRequest=function(t,i,r){if(!t)return"";var n="",s={method:"POST ",url:function(o,l,h){return""},data:function(o,l){return JSON.stringify(o[l])+`

`}};return n=this.generateBodyContent(t,i,s,r),n},e.prototype.generateUpdateRequest=function(t,i,r,n){var s=this;if(!t)return"";var o="";t.forEach(function(h){return h=s.compareAndRemove(h,n.filter(function(p){return A.getObject(i.key,p)===A.getObject(i.key,h)})[0],i.key)});var l={method:this.options.updateType+" ",url:function(h,p,c){if(typeof h[p][c]=="number"||A.parse.isGuid(h[p][c]))return"("+h[p][c]+")";if(h[p][c]instanceof Date){var d=h[p][c];return"("+d.toJSON()+")"}else return"('"+h[p][c]+"')"},data:function(h,p){return JSON.stringify(h[p])+`

`}};return o=this.generateBodyContent(t,i,l,r),o},e.getField=function(t){return t.replace(/\./g,"/")},e.prototype.generateBodyContent=function(t,i,r,n){for(var s="",o=0;o<t.length;o++)s+=`
`+i.cSet+`
`,s+=this.options.changeSetContent+`

`,s+=r.method,r.method==="POST "?s+=(n.dataSource.insertUrl||n.dataSource.crudUrl||i.url)+r.url(t,o,i.key)+` HTTP/1.1
`:r.method==="PUT "||r.method==="PATCH "?s+=(n.dataSource.updateUrl||n.dataSource.crudUrl||i.url)+r.url(t,o,i.key)+` HTTP/1.1
`:r.method==="DELETE "&&(s+=(n.dataSource.removeUrl||n.dataSource.crudUrl||i.url)+r.url(t,o,i.key)+` HTTP/1.1
`),s+="Accept: "+this.options.accept+`
`,s+="Content-Id: "+this.pvt.changeSet+++`
`,s+=this.options.batchChangeSetContentType+`
`,u(t[o]["@odata.etag"])?s+=`
`:(s+="If-Match: "+t[o]["@odata.etag"]+`

`,delete t[o]["@odata.etag"]),s+=r.data(t,o);return s},e.prototype.processBatchResponse=function(t,i,r,n,s){if(r&&r.headers.get("Content-Type")&&r.headers.get("Content-Type").indexOf("xml")!==-1)return i.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&A.endsWith(n.url,this.options.batch)&&n.type.toLowerCase()==="post"){var o=r.headers.get("Content-Type"),l=void 0,h=void 0,p=t+"";if(o=o.substring(o.indexOf("=batchresponse")+1),p=p.split(o),p.length<2)return{};p=p[1];var c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(p);c&&p.replace(c[0],"");var d=c?c[1]:"";p=p.split(d);for(var f=p.length;f>-1;f--)!/\bContent-ID:/i.test(p[f])||!/\bHTTP.+201/.test(p[f])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(p[f])[1],10),s.addedRecords[l]&&(h=A.parse.parseJson(/^\{.+\}/m.exec(p[f])[0]),P({},s.addedRecords[l],this.processResponse(h))));return s}return null},e.prototype.compareAndRemove=function(t,i,r){var n=this;return u(i)||Object.keys(t).forEach(function(s){if(s!==r&&s!=="@odata.etag")if(A.isPlainObject(t[s])){n.compareAndRemove(t[s],i[s]);var o=Object.keys(t[s]).filter(function(l){return l!=="@odata.etag"});o.length===0&&delete t[s]}else(t[s]===i[s]||t[s]&&i[s]&&t[s].valueOf()===i[s].valueOf())&&delete t[s]}),t},e}(jt);(function(a){wi(e,a);function e(t){var i=a.call(this,t)||this;return i.options=P({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),P(i.options,t||{}),i}return e.prototype.getModuleName=function(){return"ODataV4Adaptor"},e.prototype.onCount=function(t){return t===!0?"true":""},e.prototype.onPredicate=function(t,i,r){var n="",s=t.value,o=s instanceof Date;if(i instanceof re)for(var l=this.getQueryRequest(i),h=0;h<l.filters.length;h++)l.filters[h].e.key===t.value&&(r=!0);return n=a.prototype.onPredicate.call(this,t,i,r),o&&(n=n.replace(/datetime'(.*)'$/,"$1")),A.parse.isGuid(s)&&(n=n.replace("guid","").replace(/'/g,"")),n},e.prototype.onEachSearch=function(t){var i=this.pvt.searches||[];i.push(t.key),this.pvt.searches=i},e.prototype.onSearch=function(t){return this.pvt.searches.join(" OR ")},e.prototype.onExpand=function(t){var i=this,r={},n={},s=t.expands.slice(),o=[],l=t.selects.filter(function(h){return h.indexOf(".")>-1});return l.forEach(function(h){var p=h.split(".");if(p[0]in r||(r[p[0]]=[]),p.length===2)r[p[0]].length&&Object.keys(r).indexOf(p[0])!==-1?r[p[0]][0].indexOf("$expand")!==-1&&r[p[0]][0].indexOf(";$select=")===-1?r[p[0]][0]=r[p[0]][0]+";$select="+p[1]:r[p[0]][0]=r[p[0]][0]+","+p[1]:r[p[0]].push("$select="+p[1]);else{for(var c="$select="+p[p.length-1],d="",f="",g=1;g<p.length-1;g++)d=d+"$expand="+p[g]+"(",f=f+")";var m=d+c+f;if(r[p[0]].length&&Object.keys(r).indexOf(p[0])!==-1&&i.expandQueryIndex(r[p[0]],!0)){var v=i.expandQueryIndex(r[p[0]]);r[p[0]][v]=r[p[0]][v]+m.replace("$expand=",",")}else r[p[0]].push(m)}}),Object.keys(r).forEach(function(h){s.indexOf(h)===-1&&s.push(h)}),s.forEach(function(h){n[h]=h in r?h+"("+r[h].join(";")+")":h}),Object.keys(n).forEach(function(h){return o.push(n[h])}),o.join(",")},e.prototype.expandQueryIndex=function(t,i){for(var r=0;r<t.length;r++)if(t[r].indexOf("$expand")!==-1)return i?!0:r;return i?!1:0},e.prototype.onDistinct=function(t){var i=t.map(function(r){return jr.getField(r)}).join(",");return"groupby(("+i+"))"},e.prototype.onSelect=function(t){return a.prototype.onSelect.call(this,t.filter(function(i){return i.indexOf(".")===-1}))},e.prototype.beforeSend=function(t,i,r){(r.type==="POST"||r.type==="PUT"||r.type==="PATCH")&&i.headers.set("Prefer","return=representation"),i.headers.set("Accept",this.options.accept)},e.prototype.processResponse=function(t,i,r,n,s,o){var l="@odata.context",h="@context";if(s&&s.type==="GET"&&!this.rootUrl&&(t[l]||t[h])){var p=t[l]?t[l].split("/$metadata#"):t[h].split("/$metadata#");this.rootUrl=p[0],this.resourceTableName=p[1]}var c="pvtData",d=s&&s[c],f=a.prototype.processBatchResponse.call(this,t,r,n,s,o);if(f)return f;var g=null,m="@odata.count",v="@count";r&&r.isCountRequired&&(m in t?g=t[m]:v in t&&(g=t[v])),t=u(t.value)?t:t.value;var y={};return y.count=g,y.result=t,this.getAggregateResult(d,t,y,null,r),A.isNull(g)?y.result:{result:y.result,count:g,aggregates:y.aggregates}},e})(jr);(function(a){wi(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.getModuleName=function(){return"WebApiAdaptor"},e.prototype.insert=function(t,i,r){return{type:"POST",url:t.dataSource.url,data:JSON.stringify(i)}},e.prototype.remove=function(t,i,r,n){return{type:"DELETE",url:t.dataSource.url+"/"+r,data:JSON.stringify(r)}},e.prototype.update=function(t,i,r,n){return{type:"PUT",url:t.dataSource.url,data:JSON.stringify(r)}},e.prototype.batchRequest=function(t,i,r){var n=this,s=r.guid=A.getGuid(this.options.batchPre),o=t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;for(var l=[],h=function(g,m){i.addedRecords.forEach(function(v,y){var w={method:"POST ",url:function(b,I,k){return""},data:function(b,I){return JSON.stringify(b[I])+`

`}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("POST /api/"+(t.dataSource.insertUrl||t.dataSource.crudUrl||r.url)+w.url(i.addedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",v?JSON.stringify(v):"")})},p=0,c=i.addedRecords.length;p<c;p++)h(p);for(var d=function(g,m){i.changedRecords.forEach(function(v,y){var w={method:n.options.updateType+" ",url:function(b,I,k){return""},data:function(b,I){return JSON.stringify(b[I])+`

`}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("PUT /api/"+(t.dataSource.updateUrl||t.dataSource.crudUrl||r.url)+w.url(i.changedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",v?JSON.stringify(v):"")})},p=0,c=i.changedRecords.length;p<c;p++)d(p);for(var f=function(g,m){i.deletedRecords.forEach(function(v,y){var w={mtd:"DELETE ",url:function(b,I,k){var D=A.getObject(k,b[I]);if(typeof D=="number"||A.parse.isGuid(D))return"/"+D;if(D instanceof Date){var W=b[I][k];return"/"+W.toJSON()}else return"/'"+D+"'"},data:function(b,I){return""}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("DELETE /api/"+(t.dataSource.removeUrl||t.dataSource.crudUrl||r.url)+w.url(i.deletedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",v?JSON.stringify(v):"")})},p=0,c=i.deletedRecords.length;p<c;p++)f(p);return l.push("--"+s+"--",""),{type:"POST",url:o,contentType:"multipart/mixed; boundary="+s,data:l.join(`\r
`)}},e.prototype.beforeSend=function(t,i,r){i.headers.set("Accept","application/json, text/javascript, */*; q=0.01")},e.prototype.processResponse=function(t,i,r,n,s,o){var l="pvtData",h=s&&s[l],p=null,c={};if(s&&s.type.toLowerCase()!=="post"){var d=n&&s.fetchRequest.headers.get("DataServiceVersion"),f=d&&parseInt(d,10)||2;r&&r.isCountRequired&&(A.isNull(t.Count)||(p=t.Count)),f<3&&t.Items&&(t=t.Items),c.count=p,c.result=t,this.getAggregateResult(h,t,c,null,r)}return c.result=c.result||t,A.isNull(p)?c.result:{result:c.result,count:c.count,aggregates:c.aggregates}},e})(jr);(function(a){wi(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.processQuery=function(t,i,r){var n=new jt().processQuery(t,i,r),s="data",o=A.parse.parseJson(n[s]),l={},h="value";if(o.param)for(var p=0;p<o.param.length;p++){var c=o.param[p],d=Object.keys(c)[0];l[d]=c[d]}l[h]=o;var f="pvtData",g="url";return{data:JSON.stringify(l,A.parse.jsonDateReplacer),url:n[g],pvtData:n[f],type:"POST",contentType:"application/json; charset=utf-8"}},e})(jt);var ou=function(a){wi(e,a);function e(){var t=a.call(this)||this;return st("beforeSend",jt.prototype.beforeSend,t),t}return e.prototype.insert=function(t,i,r,n,s){return this.pvt.position=s,this.updateType="add",{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(P({},{value:i,table:r,action:"insert"},A.getAddParams(this,t,n)))}},e.prototype.remove=function(t,i,r,n,s){return a.prototype.remove.call(this,t,i,r),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(P({},{key:r,keyColumn:i,table:n,action:"remove"},A.getAddParams(this,t,s)))}},e.prototype.update=function(t,i,r,n,s){return this.updateType="update",this.updateKey=i,{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(P({},{value:r,action:"update",keyColumn:i,key:r[i],table:n},A.getAddParams(this,t,s)))}},e.prototype.processResponse=function(t,i,r,n,s,o,l){var h,p=s?JSON.parse(s.data):t;if(t=p.action==="batch"?A.parse.parseJson(t):t,this.updateType==="add"&&a.prototype.insert.call(this,i,t,null,null,this.pvt.position),this.updateType==="update"&&a.prototype.update.call(this,i,this.updateKey,t),this.updateType=void 0,t.added)for(h=0;h<t.added.length;h++)a.prototype.insert.call(this,i,t.added[h]);if(t.changed)for(h=0;h<t.changed.length;h++)a.prototype.update.call(this,i,l.key,t.changed[h]);if(t.deleted)for(h=0;h<t.deleted.length;h++)a.prototype.remove.call(this,i,l.key,t.deleted[h]);return t},e.prototype.batchRequest=function(t,i,r,n,s){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(P({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:r.url,key:r.key},A.getAddParams(this,t,n)))}},e.prototype.addParams=function(t){var i=new jt;i.addParams(t)},e}(Va),tc=function(a){wi(e,a);function e(t){var i=a.call(this)||this;return i.options=P({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),P(i.options,t||{}),i}return e.prototype.getModuleName=function(){return"CustomDataAdaptor"},e}(jt);(function(a){wi(e,a);function e(t){var i=a.call(this)||this;return i.opt=t,i.schema=i.opt.response,i.query=i.opt.query,i.getVariables=i.opt.getVariables?i.opt.getVariables:function(){},i.getQuery=function(){return i.query},i}return e.prototype.getModuleName=function(){return"GraphQLAdaptor"},e.prototype.processQuery=function(t,i){var r=a.prototype.processQuery.apply(this,arguments),n=JSON.parse(r.data),s=["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"],o={},l="searchwhereparams";s.filter(function(c){o[c]=l.indexOf(c)>-1?JSON.stringify(n[c]):n[c]});var h=this.getVariables()||{};h.datamanager=o;var p=JSON.stringify({query:this.getQuery(),variables:h});return r.data=p,r},e.prototype.processResponse=function(t,i,r,n,s){var o=t,l,h,p=j(this.schema.result,o.data);this.schema.count&&(l=j(this.schema.count,o.data)),this.schema.aggregates&&(h=j(this.schema.aggregates,o.data),h=u(h)?h:A.parse.parseJson(h));var c=s.pvtData||{},d={result:p,aggregates:h},f=d;return c&&c.groups&&c.groups.length&&this.getAggregateResult(c,f,d,null,r),u(l)?d.result:{result:d.result,count:l,aggregates:h}},e.prototype.insert=function(){var t=a.prototype.insert.apply(this,arguments);return this.generateCrudData(t,"insert")},e.prototype.update=function(){var t=a.prototype.update.apply(this,arguments);return this.generateCrudData(t,"update")},e.prototype.remove=function(){var t=a.prototype.remove.apply(this,arguments);return this.generateCrudData(t,"remove")},e.prototype.batchRequest=function(t,i,r,n,s){var o=a.prototype.batchRequest.apply(this,arguments),l=JSON.parse(o.data);return l.key=r.key,o.data=JSON.stringify(l),this.generateCrudData(o,"batch")},e.prototype.generateCrudData=function(t,i){var r=JSON.parse(t.data);return t.data=JSON.stringify({query:this.opt.getMutation(i),variables:r}),t},e})(jt);var ic=function(a){wi(e,a);function e(t,i,r){var n=a.call(this)||this;n.isCrudAction=!1,n.isInsertAction=!1,u(t)||(n.cacheAdaptor=t),n.pageSize=r,n.guidId=A.getGuid("cacheAdaptor");var s={keys:[],results:[]};window.localStorage.setItem(n.guidId,JSON.stringify(s));var o=n.guidId;return u(i)||setInterval(function(){for(var l=A.parse.parseJson(window.localStorage.getItem(o)),h=[],p=0;p<l.results.length;p++){var c=+new Date,d=+new Date(l.results[p].timeStamp);l.results[p].timeStamp=c-d,c-d>i&&h.push(p)}for(var p=0;p<h.length;p++)l.results.splice(h[p],1),l.keys.splice(h[p],1);window.localStorage.removeItem(o),window.localStorage.setItem(o,JSON.stringify(l))},i),n}return e.prototype.generateKey=function(t,i){var r=this.getQueryRequest(i),n=re.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=t,o="onPage";o in n&&(s+=n[o].pageIndex),r.sorts.forEach(function(d){s+=d.e.direction+d.e.fieldName}),r.groups.forEach(function(d){s+=d.e.fieldName}),r.searches.forEach(function(d){s+=d.e.searchKey});for(var l=0;l<r.filters.length;l++){var h=r.filters[l];if(h.e.isComplex){var p=i.clone();p.queries=[];for(var c=0;c<h.e.predicates.length;c++)p.queries.push({fn:"onWhere",e:h.e.predicates[c],filter:i.queries.filter});s+=h.e.condition+this.generateKey(t,p)}else s+=h.e.field+h.e.operator+h.e.value}return s},e.prototype.processQuery=function(t,i,r){var n=this.generateKey(t.dataSource.url,i),s=A.parse.parseJson(window.localStorage.getItem(this.guidId)),o=s?s.results[s.keys.indexOf(n)]:null;return o!=null&&!this.isCrudAction&&!this.isInsertAction?o:(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0)))},e.prototype.processResponse=function(t,i,r,n,s,o){if(this.isInsertAction||s&&this.cacheAdaptor.options.batch&&A.endsWith(s.url,this.cacheAdaptor.options.batch)&&s.type.toLowerCase()==="post")return this.cacheAdaptor.processResponse(t,i,r,n,s,o);t=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=r?this.generateKey(i.dataSource.url,r):i.dataSource.url,h={};h=A.parse.parseJson(window.localStorage.getItem(this.guidId));var p=h.keys.indexOf(l);for(p!==-1&&(h.results.splice(p,1),h.keys.splice(p,1)),h.results[h.keys.push(l)-1]={keys:l,result:t.result,timeStamp:new Date,count:t.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),t},e.prototype.beforeSend=function(t,i,r){!u(this.cacheAdaptor.options.batch)&&A.endsWith(r.url,this.cacheAdaptor.options.batch)&&r.type.toLowerCase()==="post"&&i.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),t.dataSource.crossDomain||i.headers.set("Accept",this.cacheAdaptor.options.accept)},e.prototype.update=function(t,i,r,n){return this.isCrudAction=!0,this.cacheAdaptor.update(t,i,r,n)},e.prototype.insert=function(t,i,r){return this.isInsertAction=!0,this.cacheAdaptor.insert(t,i,r)},e.prototype.remove=function(t,i,r,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(t,i,r,n)},e.prototype.batchRequest=function(t,i,r){return this.cacheAdaptor.batchRequest(t,i,r)},e}(jt),q=function(){function a(e,t,i){var r=this;this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isInitialLoad=!0,!e&&!this.dataSource&&(e=[]),i=i||e.adaptor,e&&e.timeZoneHandling===!1&&(this.timeZoneHandling=e.timeZoneHandling);var n;return e instanceof Array?n={json:e,offline:!0}:typeof e=="object"?(e.json||(e.json=[]),e.enablePersistence||(e.enablePersistence=!1),e.id||(e.id=""),e.ignoreOnPersist||(e.ignoreOnPersist=[]),n={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:e.offline!==void 0?e.offline:e.adaptor instanceof ou||e.adaptor instanceof tc?!1:!e.url,requiresFormat:e.requiresFormat,enablePersistence:e.enablePersistence,id:e.id,ignoreOnPersist:e.ignoreOnPersist}):A.throwError("DataManager: Invalid arguments"),n.requiresFormat===void 0&&!A.isCors()&&(n.requiresFormat=u(n.crossDomain)?!0:n.crossDomain),n.dataType===void 0&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=t,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new jr,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new re),this.ready.then(function(s){r.dataSource.offline=!0,r.isDataAvailable=!0,n.json=s.result,r.adaptor=new Va})):this.adaptor=n.offline?new Va:new jr,!n.jsonp&&this.adaptor instanceof jr&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,n.enableCaching&&(this.adaptor=new ic(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return Object.defineProperty(a.prototype,"moduleName",{get:function(){return"datamanager"},enumerable:!0,configurable:!0}),a.prototype.getPersistedData=function(e){var t=localStorage.getItem(e||this.dataSource.id);return JSON.parse(t)},a.prototype.setPersistData=function(e,t,i){localStorage.setItem(t||this.dataSource.id,JSON.stringify(i||this.persistQuery))},a.prototype.setPersistQuery=function(e){var t=this,i=this.getPersistedData();if(this.isInitialLoad&&i&&Object.keys(i).length){this.persistQuery=i,this.persistQuery.queries=this.persistQuery.queries.filter(function(n){if(t.dataSource.ignoreOnPersist&&t.dataSource.ignoreOnPersist.length&&n.fn&&t.dataSource.ignoreOnPersist.some(function(l){return n.fn===l}))return!1;if(n.fn==="onWhere"){var s=n.e;if(s&&s.isComplex&&s.predicates instanceof Array){var o=s.predicates.map(function(l){if(l.predicates&&l.predicates instanceof Array){var h=l.predicates.map(function(v){var y=v.field,w=v.operator,b=v.value,I=v.ignoreCase,k=v.ignoreAccent,D=v.matchCase;return new pe(y,w,b,I,k,D)});return l.condition==="and"?pe.and(h):pe.or(h)}else{var p=l.field,c=l.operator,d=l.value,f=l.ignoreCase,g=l.ignoreAccent,m=l.matchCase;return new pe(p,c,d,f,g,m)}});n.e=new pe(o[0],s.condition,o.slice(1))}}return!0});var r=P(new re,this.persistQuery);return this.isInitialLoad=!1,r}else return this.persistQuery=e,this.isInitialLoad=!1,e},a.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},a.prototype.executeLocal=function(e){!this.defaultQuery&&!(e instanceof re)&&A.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||A.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(e=this.setPersistQuery(e)),e=e||this.defaultQuery;var t=this.adaptor.processQuery(this,e);if(e.subQuery){var i=e.subQuery.fromTable,r=e.subQuery.lookups,n=e.isCountRequired?t.result:t;r&&r instanceof Array&&A.buildHierarchy(e.subQuery.fKey,i,n,r,e.subQuery.key);for(var s=0;s<n.length;s++)n[s][i]instanceof Array&&(n[s]=P({},{},n[s]),n[s][i]=this.adaptor.processResponse(e.subQuery.using(new a(n[s][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)},a.prototype.executeQuery=function(e,t,i,r){var n=this,s="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(e=this.setPersistQuery(e)),typeof e=="function"&&(r=i,i=t,t=e,e=null),e||(e=this.defaultQuery),e instanceof re||A.throwError("DataManager - executeQuery() : A query is required to execute");var o=new wt,l={query:e};if(!this.dataSource.offline&&this.dataSource.url!==void 0&&this.dataSource.url!==""||!u(this.adaptor[s])||this.isCustomDataAdaptor(this.adaptor)){var h=this.adaptor.processQuery(this,e);u(this.adaptor[s])?!u(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,o,l,e)):(l=a.getDeferedArgs(e,h,l),o.resolve(l)):this.adaptor[s](h,o,l,e)}else a.nextTick(function(){var p=n.executeLocal(e);l=a.getDeferedArgs(e,p,l),o.resolve(l)});return(t||i)&&o.promise.then(t,i),r&&o.promise.then(r,r),o.promise},a.getDeferedArgs=function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i},a.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},a.prototype.extendRequest=function(e,t,i){return P({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)},a.prototype.makeRequest=function(e,t,i,r){var n=this,s=!!r.subQuerySelector,o=function(v){i.error=v,t.reject(i)},l=function(v,y,w,b,I,k,D){i.xhr=w,i.count=y?parseInt(y.toString(),10):0,i.result=v,i.request=b,i.aggregates=k,i.actual=I,i.virtualSelectRecords=D,t.resolve(i)},h=function(v,y){var w=new wt,b={parent:i};r.subQuery.isChild=!0;var I=n.adaptor.processQuery(n,r.subQuery,v?n.adaptor.processResponse(v):y),k=n.makeRequest(I,w,b,r.subQuery);return s||w.then(function(D){v&&(A.buildHierarchy(r.subQuery.fKey,r.subQuery.fromTable,v,D,r.subQuery.key),l(v,D.count,D.xhr))},o),k},p=function(v,y){if(n.isGraphQLAdaptor(n.adaptor)&&!u(v.errors))return o(v.errors);n.isCustomDataAdaptor(n.adaptor)&&(y=P({},n.fetchReqOption,y)),y.contentType.indexOf("xml")===-1&&n.dateParse&&(v=A.parse.parseJson(v));var w=n.adaptor.processResponse(v,n,r,y.fetchRequest,y),b=0,I=null,k="virtualSelectRecords",D=v[k];if(r.isCountRequired&&(b=w.count,I=w.aggregates,w=w.result),!r.subQuery){l(w,b,y.fetchRequest,y.type,v,I,D);return}s||h(w,y)},c=this.extendRequest(e,p,o);if(this.isCustomDataAdaptor(this.adaptor)){this.fetchReqOption=c;var f=c;this.adaptor.options.getData({data:f.data,onSuccess:f.onSuccess,onFailure:f.onFailure})}else{var d=new ra(c);d.beforeSend=function(){n.beforeSend(d.fetchRequest,d)},c=d.send(),c.catch(function(v){return!0}),this.requests.push(d)}if(s){var g=void 0,m=r.subQuerySelector.call(this,{query:r.subQuery,parent:r});m&&m.length?(g=Promise.all([c,h(null,m)]),g.then(function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];var w=v[0],b=n.adaptor.processResponse(w[0],n,r,n.requests[0].fetchRequest,n.requests[0]),I=0;r.isCountRequired&&(I=b.count,b=b.result);var k=n.adaptor.processResponse(w[1],n,r.subQuery,n.requests[1].fetchRequest,n.requests[1]);I=0,r.subQuery.isCountRequired&&(I=k.count,k=k.result),A.buildHierarchy(r.subQuery.fKey,r.subQuery.fromTable,b,k,r.subQuery.key),s=!1,l(b,I,n.requests[0].fetchRequest)})):s=!1}return c},a.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var i=this.dataSource.headers,r,n=0;i&&n<i.length;n++){r=[];for(var s=Object.keys(i[n]),o=0,l=s;o<l.length;o++){var h=l[o];r.push(h),e.headers.set(h,i[n][h])}}},a.prototype.saveChanges=function(e,t,i,r,n){var s=this;i instanceof re&&(r=i,i=null);var o={url:i,key:t||this.dataSource.key},l=this.adaptor.batchRequest(this,e,o,r||new re,n),h="dofetchRequest";if(this.dataSource.offline)return l;if(u(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(l,this.adaptor.options.batchUpdate);var p=new wt,c=new ra(l);return c.beforeSend=function(){s.beforeSend(c.fetchRequest,c)},c.onSuccess=function(d,f){s.isGraphQLAdaptor(s.adaptor)&&(u(d.errors)||c.onFailure(JSON.stringify(d.errors))),p.resolve(s.adaptor.processResponse(d,s,null,f.fetchRequest,f,e,o))},c.onFailure=function(d){p.reject([{error:d}])},c.send().catch(function(d){return!0}),p.promise}else return this.adaptor[h](l)},a.prototype.insert=function(e,t,i,r){t instanceof re&&(i=t,t=null);var n=this.adaptor.insert(this,e,t,i,r),s="dofetchRequest";return this.dataSource.offline?n:u(this.adaptor[s])?this.dofetchRequest(n,this.adaptor.options.addRecord):this.adaptor[s](n)},a.prototype.remove=function(e,t,i,r){typeof t=="object"&&(t=A.getObject(e,t)),i instanceof re&&(r=i,i=null);var n=this.adaptor.remove(this,e,t,i,r),s="dofetchRequest";if(this.dataSource.offline)return n;if(u(this.adaptor[s])){var o=this.adaptor.options.deleteRecord;return this.dofetchRequest(n,o)}else return this.adaptor[s](n)},a.prototype.update=function(e,t,i,r,n){i instanceof re&&(r=i,i=null);var s=this.adaptor.update(this,e,t,i,r,n),o="dofetchRequest";if(this.dataSource.offline)return s;if(u(this.adaptor[o])){var l=this.adaptor.options.updateRecord;return this.dofetchRequest(s,l)}else return this.adaptor[o](s)},a.prototype.isCustomDataAdaptor=function(e){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="CustomDataAdaptor"},a.prototype.isGraphQLAdaptor=function(e){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="GraphQLAdaptor"},a.prototype.successFunc=function(e,t){if(this.isGraphQLAdaptor(this.adaptor)){var i=typeof e=="object"?e:JSON.parse(e);u(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(t=P({},this.fetchReqOption,t));try{A.parse.parseJson(e)}catch{e=[]}e=this.adaptor.processResponse(A.parse.parseJson(e),this,null,t.fetchRequest,t),this.fetchDeffered.resolve(e)},a.prototype.failureFunc=function(e){this.fetchDeffered.reject([{error:e}])},a.prototype.dofetchRequest=function(e,t){var i=this;if(e=P({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.fetchDeffered=new wt,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var r=new ra(e);r.beforeSend=function(){i.beforeSend(r.fetchRequest,r)},r.onSuccess=this.successFunc.bind(this),r.onFailure=this.failureFunc.bind(this),r.send().catch(function(n){return!0})}return this.fetchDeffered.promise},a.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},a}(),wt=function(){function a(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return a}(),tn=function(){function a(e){this.intl=new Ne,u(e)||(this.intl.culture=e)}return a.prototype.getFormatFunction=function(e){return!u(e)&&(e.type==="dateTime"||e.type==="datetime"||e.type==="date"||e.type==="time")?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)},a.prototype.getParserFunction=function(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)},a.prototype.fromView=function(e,t,i){return(i==="date"||i==="datetime"||i==="number")&&!u(t)?t(e):e},a.prototype.toView=function(e,t){var i=e;return!u(t)&&!u(e)&&(i=t(e)),i},a.prototype.setCulture=function(e){u(e)||kp(e)},a}(),lu=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),gs=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Xe=function(){function a(e,t){var i=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return i.editTemplateFn},this.getFilterTemplate=function(){return i.filterTemplateFn},zi(this,e),this.parent=t,this.type==="none"?this.type=null:this.type&&(this.type=typeof this.type=="string"?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),u(this.uid)&&(this.uid=li("grid-column"));var r=new tn;if(e.format&&(e.format.skeleton||e.format.format&&typeof e.format.format=="string")&&(this.setFormatter(r.getFormatFunction(P({},e.format))),this.setParser(r.getParserFunction(e.format))),this.toJSON=function(){for(var s={},o=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(i),h=0;h<l.length;h++)if(l[parseInt(h.toString(),10)]==="columns"){s[l[parseInt(h.toString(),10)]]=[];for(var p=0;p<i[l[parseInt(h.toString(),10)]].length;p++)s[l[parseInt(h.toString(),10)]].push(i[l[parseInt(h.toString(),10)]][parseInt(p.toString(),10)].toJSON())}else o.indexOf(l[parseInt(h.toString(),10)])<0&&(s[l[parseInt(h.toString(),10)]]=i[l[parseInt(h.toString(),10)]]);return s},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(s){return s.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=tt(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=tt(this.headerTemplate)),!u(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=tt(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=tt(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=tt(this.filterTemplate)),this.isForeignColumn()&&(u(this.editType)||this.editType==="dropdownedit"||this.editType==="defaultedit")&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=P({dataSource:this.dataSource,query:new re,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var n=this.sortComparer;this.sortComparer=function(s,o,l,h){if(typeof n=="string"&&(n=Ue(n,window)),i.sortDirection==="Descending"){var p=s;s=o,o=p;var c=l;l=h,h=c}return n(s,o,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(s,o){return s=Ue(i.foreignKeyValue,Xi(i,{},s)[0]),o=Ue(i.foreignKeyValue,Xi(i,{},o)[0]),i.sortDirection==="Descending"?A.fnDescending(s,o):A.fnAscending(s,o)})}return a.prototype.getSortDirection=function(){return this.sortDirection},a.prototype.setSortDirection=function(e){this.sortDirection=e},a.prototype.getFreezeTableName=function(){return this.freezeTable},a.prototype.setProperties=function(e){for(var t=Object.keys(e),i=function(s){if(t[parseInt(s.toString(),10)]==="columns")for(var o=e[t[parseInt(s.toString(),10)]],l=function(p){r.columns.find(function(c){return c.field===o[parseInt(p.toString(),10)].field}).setProperties(o[parseInt(p.toString(),10)])},h=0;h<o.length;h++)l(h);else r[t[parseInt(s.toString(),10)]]=e[t[parseInt(s.toString(),10)]];r.parent&&r.parent.isReact&&(t[parseInt(s.toString(),10)]==="template"?(r.templateFn=tt(e[t[parseInt(s.toString(),10)]]),r.parent.refreshReactColumnTemplateByUid(r.uid,!0)):t[parseInt(s.toString(),10)]==="headerTemplate"?(r.headerTemplateFn=tt(e[t[parseInt(s.toString(),10)]]),r.parent.refreshReactHeaderTemplateByUid(r.uid)):t[parseInt(s.toString(),10)]==="editTemplate"&&(r.editTemplateFn=tt(e[t[parseInt(s.toString(),10)]])))},r=this,n=0;n<t.length;n++)i(n)},a.prototype.isForeignColumn=function(){return!!(this.dataSource&&this.foreignKeyValue)},a.prototype.getFormatter=function(){return this.formatFn},a.prototype.setFormatter=function(e){this.formatFn=e},a.prototype.getParser=function(){return this.parserFn},a.prototype.setParser=function(e){this.parserFn=e},a.prototype.getColumnTemplate=function(){return this.templateFn},a.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},a.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},a.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},a}();(function(){function a(){}return gs([C()],a.prototype,"title",void 0),gs([C()],a.prototype,"type",void 0),gs([C()],a.prototype,"buttonOption",void 0),a})();var rc=function(a){lu(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return gs([C(null)],e.prototype,"columns",void 0),e}(Xe);(function(a){lu(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e})(rc);var qa="load",Es="rowDataBound",Ur="queryCellInfo",Wa="headerCellInfo",Ae="actionBegin",ce="actionComplete",Ao="actionFailure",Qt="dataBound",sa="rowSelecting",aa="rowSelected",oa="rowDeselecting",la="rowDeselected",on="cellSelecting",Gn="cellSelected",Zo="cellDeselecting",el="cellDeselected",ha="columnSelecting",ua="columnSelected",nc="columnDeselecting",sc="columnDeselected",ms="columnDragStart",vs="columnDrag",hu="columnDrop",tl="beforePrint",il="printComplete",ac="detailDataBound",ja="batchAdd",Hr="batchCancel",Ua="batchDelete",oc="beforeBatchAdd",lc="beforeBatchDelete",hc="beforeBatchSave",uc="beginEdit",pc="cellEdit",cc="cellSave",pa="cellSaved",dc="recordDoubleClick",fc="recordClick",Ds="beforeDataBound",gc="beforeOpenColumnChooser",rl="beforeOpenAdaptiveDialog",mc="resizeStart",vc="resizing",Ga="resizeStop",yc="checkBoxChange",Cc="beforeCopy",bc="beforePaste",Sc="beforeAutoFill",nl="filterchoicerequest",uu="filterAfterOpen",pu="filterBeforeOpen",wc="filterSearchBegin",Ic="commandClick",xc="exportGroupCaption",To="initial-load",ci="initial-end",Qr="data-ready",je="content-ready",qe="ui-update",Ci="on-empty",vt="inbound-model-changed",qt="model-changed",cu="colgroup-refresh",It="header-refreshed",Ec="paging-complete",Dc="sorting-complete",sl="filtering-complete",al="searching-complete",ol="reorder-complete",kc="grouping-complete",Sn="group-aggregates",Fi="refresh-footer-rendered",Rc="refresh-aggregate-cell",Ac="rowselected",Tc="cellselected",_a="destroy-autofill-elements",ks="beforecellfocused",Rs="cellfocused",at="key-pressed",Ut="click",Ie="destroy",As="column-visible-changed",ll="scroll",du="column-width-changed",Rn="column-position-changed",hl="rows-added",Ka="rows-removed",Ya="column-drag-stop",ys="header-drop",$a="datasource-modified",Mc="refresh-complete",An="dblclick",Qi="toolbar-refresh",fu="bulk-save",Jr="auto-col",vr="tooltip-destroy",Tn="update-data",Fc="save-complete",Lc="delete-complete",Jt="prevent-batch",Ts="dialog-destroy",gu="crud-Action",ul="add-delete-Action",Mo="destroy-form",Fo="double-tap",Oc="beforeExcelExport",Bc="excelExportComplete",Pc="excelQueryCellInfo",Nc="excelHeaderQueryCellInfo",zc="exportDetailDataBound",Hc="exportDetailTemplate",dr="freezerender",pl="filterOpen",Lo="filterDialogCreated",Bt="filter-menu-close",Qa="initForeignKeyColumn",Ms="getForeignKeyData",Gr="generateQuery",mu="showEmptyGrid",vu="foreignKeyData",Vc="columnDataStateChange",Mn="dataStateChange",cl="dataSourceChanged",Ja="rtl-updated",yu="beforeFragAppend",Xa="textWrapRefresh",Za="recordAdded",Fs="cancel-Begin",Ls="editNextValCell",dl="hierarchyprint",qc="expandchildgrid",Wc="printGrid-Init",jc="export-RowDataBound",Uc="export-DataBound",Gc="row-position-changed",_c="columnChooserOpened",Kc="batchedit-form",Yc="edit-form",$c="before-batch-cancel",Qc="batcheditform-rendered",Cu="partial-refresh",Jc="beforeCustomFilterOpen",Xc="select-virtual-Row",eo="columns-prepared",to="cbox-filter-begin",Xr="cbox-filter-complete",Fn="filter-Prevent",Zc="before-filter-cmenu-open",ed="validation-custom-placement",td="filter-cbox-value",zn="restore-Focus",bu="detail-indentcell-info",id="virtaul-cell-focus",rd="virtual-scroll-edit-action-begin",fl="virtual-scroll-edit-success",nd="virtual-scroll-edit-cancel",sd="virtual-scroll-edit",ad="refresh-virtual-cache",od="edit-reset",ld="virtual-scroll-add-action-begin",io="get-virtual-data",hd="refresh-infinite-mode-blocks",ud="reset-infinite-blocks",pd="infinite-scroll-handler",cd="infinite-page-query",dd="infinite-show-hide",fd="append-infinite-content",gd="remove-infinite-rows",md="set-infinite-cache",gl="infinite-edit-handler",ro="close-filter-dialog",vd="columnChooserCancelBtnClick",yd="get-filterbar-operator",no="reset-columns",Cd="excelAggregateQueryCellInfo",bd="group-cache",Sd="lazy-load-scroll-handler",ml="group-collapse",wd="beforeCheckboxRenderer",wn="refreshResizeHandlers",Id="refresh-frozen-columns",xd="set-reorder-destination-element",Ed="set-freeze-selection",so="before-refresh-on-data-change",Dd="immutable-batch-cancel",kd="check-scroll-reset",Rd="prevent-frozen-scroll-refresh",Ad="next-cell-index",Td="refresh-infinite-current-view-data",_s="filter-dialog-close",Li="refresh-cutsom-filter-ok-button",Su="refresh-cutsom-filter-clear-button",ao="render-responsive-cmenu",wu="filter-cmenu-select",Iu="custom-filter-close",fr="set-fullscreen-dialog",xu="refresh-Expand-and-Collapse",Eu="row-mode-change",Cs="enter-key-handler",Md="set-virtual-page-query",vl="pager-refresh",Fd="closeinline",Du="close-edit",Ld="reset-virtual-focus",Od="before-checkbox-renderer-query",yl="create-virtual-validation-form",Bd="validate-virtual-form",Pd="destroy-child-grid",Nd="sticky-scroll-complete",Cl="refresh-infinite-persist-selection",zd="refresh-infinite-editrowindex",ku="after-filter-column-menu-close",Hd="beforeCheckboxfilterRenderer",oo="commandColumnDestroy",Vd="cancelcnfrmDlg",Os="refresh-Frozen-Position",lo="refresh-Resize-Position",ho="refresh-Split-Frozen-Column",Ni="render-Responsive-Change-Action",In="render-Responsive-Column-Chooser-Div",Vi="show-Add-New-Row-Focus",Q;(function(a){a[a.Data=0]="Data",a[a.Header=1]="Header",a[a.Summary=2]="Summary",a[a.GroupSummary=3]="GroupSummary",a[a.CaptionSummary=4]="CaptionSummary",a[a.Filter=5]="Filter",a[a.Indent=6]="Indent",a[a.GroupCaption=7]="GroupCaption",a[a.GroupCaptionEmpty=8]="GroupCaptionEmpty",a[a.Expand=9]="Expand",a[a.HeaderIndent=10]="HeaderIndent",a[a.StackedHeader=11]="StackedHeader",a[a.DetailHeader=12]="DetailHeader",a[a.DetailExpand=13]="DetailExpand",a[a.CommandColumn=14]="CommandColumn",a[a.DetailFooterIntent=15]="DetailFooterIntent",a[a.RowDragIcon=16]="RowDragIcon",a[a.RowDragHIcon=17]="RowDragHIcon"})(Q||(Q={}));var Vt;(function(a){a[a.Header=0]="Header",a[a.Content=1]="Content",a[a.Summary=2]="Summary"})(Vt||(Vt={}));var bl;(function(a){a[a.Add=0]="Add",a[a.Edit=1]="Edit",a[a.Update=2]="Update",a[a.Delete=3]="Delete",a[a.Cancel=4]="Cancel",a[a.Print=5]="Print",a[a.Search=6]="Search",a[a.ColumnChooser=7]="ColumnChooser",a[a.PdfExport=8]="PdfExport",a[a.ExcelExport=9]="ExcelExport",a[a.CsvExport=10]="CsvExport",a[a.WordExport=11]="WordExport"})(bl||(bl={}));var oe;(function(a){a[a.isEdit=0]="isEdit",a[a.isAdd=1]="isAdd",a[a.isSort=2]="isSort",a[a.isFilter=3]="isFilter",a[a.isColMenu=4]="isColMenu",a[a.isColumnChooser=5]="isColumnChooser"})(oe||(oe={}));var Sl;(function(a){a[a.isInitial=0]="isInitial",a[a.isSearch=1]="isSearch"})(Sl||(Sl={}));var Oo=function(){function a(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),!(this.parent.isDestroyed||this.getModuleName()==="foreignKey")&&(this.parent.on(hl,this.addRows,this),this.parent.on(Gc,this.reorderRows,this),this.parent.on(Ka,this.removeRows,this),this.parent.on($a,this.initDataManager,this),this.parent.on(Ie,this.destroy,this),this.parent.on(Tn,this.crudActions,this),this.parent.on(ul,this.getData,this),this.parent.on(Jr,this.refreshFilteredCols,this),this.parent.on(eo,this.refreshFilteredCols,this))}return a.prototype.reorderRows=function(e){this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords().splice(e.toIndex,0,this.parent.getCurrentViewRecords().splice(e.fromIndex,1)[0]):this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},a.prototype.getModuleName=function(){return"data"},a.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof q?e.dataSource:u(e.dataSource)?new q:new q(e.dataSource),e.isAngular&&!(e.query instanceof re)?e.setProperties({query:new re},!0):(this.isQueryInvokedFromData=!0,e.query instanceof re||(e.query=new re))},a.prototype.generateQuery=function(e,t){var i=this.parent,r=u(i.getQuery())?new re:i.getQuery().clone();if(this.parent.columnQueryMode==="ExcludeHidden")r.select(this.parent.getColumns().filter(function(l){return!(l.isPrimaryKey!==!0&&l.visible===!1||l.field===void 0)}).map(function(l){return l.field}));else if(this.parent.columnQueryMode==="Schema"){for(var n=[],s=this.parent.columns,o=0;o<s.length;o++)n.push(s[parseInt(o.toString(),10)].field);r.select(n)}return this.filterQuery(r),this.searchQuery(r),this.aggregateQuery(r),this.sortQuery(r),pi(this.parent)?this.virtualGroupPageQuery(r):this.pageQuery(r,e),(u(t)||!t)&&this.groupQuery(r),r},a.prototype.aggregateQuery=function(e){for(var t=this.parent.aggregates,i=0;i<t.length;i++)for(var r=t[parseInt(i.toString(),10)],n=0;n<r.columns.length;n++)for(var s=r.columns[parseInt(n.toString(),10)],o=s.type instanceof Array?s.type:[s.type],l=0;l<o.length;l++)e.aggregate(o[parseInt(l.toString(),10)].toLowerCase(),s.field);return e},a.prototype.virtualGroupPageQuery=function(e){var t="fn";if(e.queries.length)for(var i=0;i<e.queries.length;i++)e.queries[parseInt(i.toString(),10)][""+t]==="onPage"&&e.queries.splice(i,1);return e},a.prototype.pageQuery=function(e,t){var i=this.parent,r="fn",n={query:e,skipPage:!1};if(i.notify(Md,n),n.skipPage)return e;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&t!==!0){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),e.queries.length)for(var s=0;s<e.queries.length;s++)e.queries[parseInt(s.toString(),10)][""+r]==="onPage"&&e.queries.splice(s,1);!u(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify(cd,e):e.page(i.pageSettings.currentPage,i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage&&!i.isManualRefresh&&!this.dataManager.dataSource.offline&&!(this.dataManager.adaptor instanceof ou)?null:i.pageSettings.pageSize)}return e},a.prototype.groupQuery=function(e){var t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=t.groupSettings.columns,r=0,n=i.length;r<n;r++){var s=this.getColumnByField(i[parseInt(r.toString(),10)]);s||this.parent.log("initial_action",{moduleName:"group",columnName:i[parseInt(r.toString(),10)]});var o=s.enableGroupByFormat,l=s.format;o?e.group(i[parseInt(r.toString(),10)],this.formatGroupColumn.bind(this),l):e.group(i[parseInt(r.toString(),10)],null)}}return e},a.prototype.sortQuery=function(e){var t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){for(var i=t.sortSettings.columns,r=[],n=i.length-1;n>-1;n--){var s=this.getColumnByField(i[parseInt(n.toString(),10)].field);if(s)s.setSortDirection(i[parseInt(n.toString(),10)].direction);else return this.parent.log("initial_action",{moduleName:"sort",columnName:i[parseInt(n.toString(),10)].field}),e;var o=i[parseInt(n.toString(),10)].direction;s.sortComparer&&(this.parent.log("grid_sort_comparer"),o=this.isRemote()?i[parseInt(n.toString(),10)].direction:s.sortComparer.bind(s)),t.groupSettings.columns.indexOf(i[parseInt(n.toString(),10)].field)===-1?s.isForeignColumn()||s.sortComparer?e.sortByForeignKey(s.field,o,void 0,i[parseInt(n.toString(),10)].direction.toLowerCase()):e.sortBy(s.field,o):r.push({direction:o,field:s.field})}for(var n=0,l=r.length;n<l;n++)if(typeof r[parseInt(n.toString(),10)].direction=="string")e.sortBy(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction);else{var s=this.getColumnByField(r[parseInt(n.toString(),10)].field);e.sortByForeignKey(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction,void 0,s.getSortDirection().toLowerCase())}}return e},a.prototype.searchQuery=function(e,t,i){var r=this.parent.searchSettings,n=!u(r.fields)&&r.fields.length?r.fields:this.getSearchColumnFieldNames(),s=[],o=!1;if(!u(this.parent.searchSettings.key)&&this.parent.searchSettings.key.length){o=this.parent.getForeignKeyColumns().some(function(d){return n.indexOf(d.field)>-1});var l=i?t.dataSource.adaptor:this.dataManager.adaptor;if(o||l.getModuleName&&l.getModuleName()==="ODataV4Adaptor"){n=i?[t.foreignKeyValue]:n;for(var h=0;h<n.length;h++){var p=i?t:this.getColumnByField(n[parseInt(h.toString(),10)]);p.isForeignColumn()&&!i?s=this.fGeneratePredicate(p,s):s.push(new pe(n[parseInt(h.toString(),10)],r.operator,r.key,r.ignoreCase,r.ignoreAccent))}var c=pe.or(s);c.key=r.key,e.where(c)}else e.search(r.key,n,r.operator,r.ignoreCase,r.ignoreAccent)}return e},a.prototype.filterQuery=function(e,t,i){var r=this.parent,n=[],s=this.parent.getForeignKeyColumns(),o;if(r.allowFiltering&&r.filterSettings.columns.length){for(var l=t||r.filterSettings.columns,h={},p=0,c=r.getColumns();p<c.length;p++){var d=c[p];h[d.field]=d.filter.type?d.filter.type:r.filterSettings.type}for(var f=[],g=[],m=0,v=l;m<v.length;m++){var d=v[m],y=d.isForeignKey?r.getColumnByUid(d.uid):r.getColumnByField(d.field);u(d.type)&&y&&(y.type==="date"||y.type==="datetime"||y.type==="dateonly")&&(d.type=d.isForeignKey?r.getColumnByUid(d.uid).type:r.getColumnByField(d.field).type),d.isForeignKey?f.push(d):g.push(d)}if(g.length){for(var w=0,b=g.length;w<b;w++)g[parseInt(w.toString(),10)].uid=g[parseInt(w.toString(),10)].uid||this.parent.grabColumnByFieldFromAllCols(g[parseInt(w.toString(),10)].field,g[parseInt(w.toString(),10)].isForeignKey).uid;for(var I=en.getPredicate(g),k=0,D=Object.keys(I);k<D.length;k++){var W=D[k];n.push(I[""+W])}}if(f.length)for(var Z=0,J=f;Z<J.length;Z++){var d=J[Z];d.uid=d.uid||this.parent.grabColumnByFieldFromAllCols(d.field,d.isForeignKey).uid;var X=this.parent.grabColumnByUidFromAllCols(d.uid);if(X||this.parent.log("initial_action",{moduleName:"filter",columnName:d.field}),X.isForeignColumn()&&Pn(d.field,s)&&!i)X.columnData.length||(o=!0),n=this.fGeneratePredicate(X,n);else for(var I=en.getPredicate(l),L=0,O=Object.keys(I);L<O.length;L++){var W=O[L];n.push(I[""+W])}}n.length&&!o?e.where(pe.and(n)):this.parent.notify(mu,{})}return e},a.prototype.fGeneratePredicate=function(e,t){var i={};return e&&(this.parent.notify(Gr,{predicate:i,column:e}),i.predicate.predicates.length&&t.push(i.predicate)),t},a.prototype.getData=function(e,t){var i=this;e===void 0&&(e={requestType:""});var r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource){var n=this.eventPromise(e,t,r);return n.promise}else{var s=void 0;switch(e.requestType){case"delete":t=t||this.generateQuery();var o=Object.keys(e.data).length;if(o===1)s=this.dataManager.remove(r,e.data[0],t.fromTable,t);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=e.data,s=this.dataManager.saveChanges(l,r,t.fromTable,t.requiresCount())}break;case"save":t=t||this.generateQuery(),e.index=u(e.index)?0:e.index,s=this.dataManager.insert(e.data,t.fromTable,t,e.index);break}var h="promise";return e[""+h]=s,s&&!Array.isArray(s)&&!s.hasOwnProperty("deletedRecords")?s.then(function(){return i.insert(t,e)}):this.insert(t,e)}},a.prototype.insert=function(e,t){return t.requestType==="save"&&this.parent.notify(Za,t),this.executeQuery(e)},a.prototype.executeQuery=function(e){var t=this;if(this.dataManager.ready){var i=new wt,r=this.dataManager.ready;return r.then(function(){t.dataManager.executeQuery(e).then(function(n){i.resolve(n)})}).catch(function(n){i.reject(n)}),i.promise}else return this.dataManager.executeQuery(e)},a.prototype.formatGroupColumn=function(e,t){var i=this.serviceLocator,r=this.getColumnByField(t),n=e;r.type||(r.type=n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof e),u(r.getFormatter())&&po(i,r);var s=tn.prototype.toView(e,r.getFormatter());return s},a.prototype.crudActions=function(e){var t=this.generateQuery(),i=null,r="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,n),e.requestType){case"save":i=this.dataManager.update(n,e.data,t.fromTable,t,e.previousData);break}e[""+r]=i||e[""+r],this.parent.notify(gu,e)},a.prototype.saveChanges=function(e,t,i,r){if(r===void 0&&(r=this.generateQuery()),r.requiresCount(),"result"in this.parent.dataSource){var n=new wt,s={requestType:"batchsave",changes:e,key:t,query:r,endEdit:n.resolve};return this.setState({isPending:!0,resolver:n.resolve}),this.parent.trigger(cl,s),n.promise}else{var o=this.dataManager.saveChanges(e,t,r.fromTable,r,i);return o}},a.prototype.getKey=function(e){if(e&&e.length)return e[0]},a.prototype.isRemote=function(){return this.dataManager.dataSource.offline!==!0&&this.dataManager.dataSource.url!==void 0&&this.dataManager.dataSource.url!==""},a.prototype.addRows=function(e){for(var t=e.records.length;t>0;t--)this.parent.dataSource instanceof q&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1]):!this.parent.getDataModule().isRemote()&&!u(this.parent.dataSource)&&!this.parent.dataSource.result&&this.parent.dataSource.splice(e.toIndex,0,e.records[t-1])},a.prototype.removeRows=function(e){var t=this.dataManager.dataSource.json;this.parent.dataSource instanceof q&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json=t.filter(function(i){return e.records.indexOf(i)===-1}):!this.parent.getDataModule().isRemote()&&!u(this.parent.dataSource)&&!this.parent.dataSource.result&&(this.parent.dataSource=t.filter(function(i){return e.records.indexOf(i)===-1}))},a.prototype.getColumnByField=function(e){var t;return this.parent.columnModel.some(function(i){return t=i,i.field===e})&&t},a.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(hl,this.addRows),this.parent.off(Ka,this.removeRows),this.parent.off($a,this.initDataManager),this.parent.off(Ie,this.destroy),this.parent.off(Tn,this.crudActions),this.parent.off(ul,this.getData),this.parent.off(Jr,this.refreshFilteredCols),this.parent.off(eo,this.refreshFilteredCols))},a.prototype.getState=function(){return this.dataState},a.prototype.setState=function(e){return this.dataState=e},a.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},a.prototype.setForeignKeyDataState=function(e){this.foreignKeyDataState=e},a.prototype.getStateEventArgument=function(e){var t=new jt,i=new q({url:"",adaptor:new jt}),r=t.processQuery(i,e),n=JSON.parse(r.data);return P(n,r.pvtData)},a.prototype.eventPromise=function(e,t,i){var r=this,n=e,s=this.getStateEventArgument(t),o=new wt,l=new wt;if((e.requestType!==void 0||this.parent.groupSettings.disablePageWiseAggregates&&t.queries.some(function(c){return c.fn==="onGroup"}))&&this.dataState.isDataChanged!==!1)if(s.action=e,e.requestType==="save"||e.requestType==="delete"){var h=e;h.key=i;var p="promise";h[""+p]=l.promise,h.state=s,this.setState({isPending:!0,resolver:l.resolve}),n.endEdit=l.resolve,n.cancelEdit=l.reject,this.parent.trigger(cl,h),l.promise.then(function(){r.setState({isPending:!0,resolver:o.resolve,group:s.group,aggregates:s.aggregates}),h.requestType==="save"&&r.parent.notify(Za,h),r.parent.trigger(Mn,s)}).catch(function(){})}else this.setState({isPending:!0,resolver:o.resolve,group:s.group,aggregates:s.aggregates}),this.parent.trigger(Mn,s);else this.setState({}),o.resolve(this.parent.dataSource);return o},a.prototype.getSearchColumnFieldNames=function(){for(var e=[],t=this.parent.getColumns(),i=0,r=t;i<r.length;i++){var n=r[i];n.allowSearching&&!u(n.field)&&e.push(n.field)}return e},a.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&ng(this.parent,this.parent.filterSettings.columns)},a}(),bi=function(){function a(e,t){zi(this,e),this.parent=t}return a.prototype.clone=function(){var e=new a({});return zi(e,this),e.cells=this.cells.map(function(t){return t.clone()}),e},a.prototype.setRowValue=function(e){if(this.parent){var t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,e)}},a.prototype.setCellValue=function(e,t){if(this.parent){var i=this.data[""+e].toString()!==t.toString();if(i){var r=this.parent.getPrimaryKeyFieldNames()[0],n=this.data[""+r];this.parent.setCellValue(n,e,t),this.makechanges(r,this.data)}else return}},a.prototype.makechanges=function(e,t){if(this.parent){var i=this.parent,r=i.getDataModule().dataManager;r.update(e,t)}},a}(),Si=function(){function a(e){this.isSpanned=!1,this.isRowSpanned=!1,zi(this,e)}return a.prototype.clone=function(){var e=new a({});return zi(e,this),e},a}(),Ru=function(){function a(e,t){this.serviceLocator=e,this.parent=t}return a.prototype.render=function(e,t,i,r){var n=this.serviceLocator.getService("cellRendererFactory"),s=n.getCellRenderer(t.cells[parseInt(i.toString(),10)].cellType||Q.Data),o=t.cells[parseInt(i.toString(),10)].cellSpan?t.cells[parseInt(i.toString(),10)].cellSpan:e.colSpan+i<=t.cells.length?e.colSpan:t.cells.length-i,l=e.rowSpan,h=0,p;if(t.index>0){var c=this.parent.getRowsObject(),d=this.parent.groupSettings.columns.length>0&&!c[t.index-1].isDataRow?c[t.index].cells:c[t.index-1].cells,f=t.cells[parseInt(i.toString(),10)],g="uid";p=d.filter(function(y){return y.column.uid===f.column[""+g]})[0]}for(var m=p&&p.colSpanRange>1&&p.rowSpanRange>1?p.colSpanRange:o,v=i+1;v<i+m&&v<t.cells.length;v++)t.cells[parseInt(v.toString(),10)].visible===!1?h++:t.cells[parseInt(v.toString(),10)].isSpanned=!0;if(h>0){for(var v=i+o;v<i+o+h&&v<t.cells.length;v++)t.cells[parseInt(v.toString(),10)].isSpanned=!0;i+o+h>=t.cells.length&&(o-=i+o+h-t.cells.length)}return t.cells[parseInt(i.toString(),10)].cellSpan&&(t.data[e.column.field]=t.cells[parseInt(i.toString(),10)].spanText,r=s.render(t.cells[parseInt(i.toString(),10)],t.data,{index:u(t.index)?"":t.index.toString()})),o>1&&$(r,{colSpan:o.toString(),"aria-colSpan":o.toString()}),l>1&&($(r,{rowspan:l.toString(),"aria-rowspan":l.toString()}),t.cells[parseInt(i.toString(),10)].isRowSpanned=!0,t.cells[parseInt(i.toString(),10)].rowSpanRange=Number(l),o>1&&(t.cells[parseInt(i.toString(),10)].colSpanRange=Number(o))),t.index>0&&p.rowSpanRange>1&&(t.cells[parseInt(i.toString(),10)].isSpanned=!0,t.cells[parseInt(i.toString(),10)].rowSpanRange=Number(p.rowSpanRange-1),t.cells[parseInt(i.toString(),10)].colSpanRange=p.rowSpanRange>0?p.colSpanRange:1),this.parent.enableColumnVirtualization&&!t.cells[parseInt(i.toString(),10)].cellSpan&&!this.containsKey(e.column.field,e.data[e.column.field])&&this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),r},a.prototype.backupMergeCells=function(e,t,i){this.setMergeCells(this.generteKey(e,t),i)},a.prototype.generteKey=function(e,t){return e+"__"+t.toString()},a.prototype.splitKey=function(e){return e.split("__")},a.prototype.containsKey=function(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))},a.prototype.getMergeCells=function(){return this.parent.mergeCells},a.prototype.setMergeCells=function(e,t){this.parent.mergeCells[""+e]=t},a.prototype.updateVirtualCells=function(e){for(var t=this.getMergeCells(),i=0,r=Object.keys(t);i<r.length;i++){var n=r[i],s=t[""+n],o=this.splitKey(n),l=this.getIndexFromAllColumns(o[0]),h=this.parent.getColumnIndexesInView(),p=s-(h[0]-l);if(l<h[0]&&p>1)for(var c=0,d=e;c<d.length;c++){var f=d[c];if(f.data[o[0]].toString()===o[1].toString()){f.cells[0].cellSpan=p,f.cells[0].spanText=o[1];break}}}return e},a.prototype.getIndexFromAllColumns=function(e){var t=pr(this.parent.getVisibleColumns(),function(i,r){if(i.field===e)return r})[0];return t},a}(),fe="e-rowcell",pt="e-gridheader",ot="e-gridcontent",xn="e-gridfooter",it="e-headercontent",_n="e-movablecontent",Bs="e-movableheader",qd="e-frozencontent",Wd="e-frozenheader",ut="e-content",$t="e-table",ze="e-row",_r="e-gridchkbox",Ke="e-editedrow",Wt="e-addedrow",jd="changedRecords",Zr="addedRecords",Bo="deletedRecords",ii="Left-Right",Po="frozen-right",Ud="frozen-left",_e="data-colindex",wl="aria-colindex",Se="data-rowindex",Ln="aria-rowindex",me="tbody",Lt="colgroup",Ot="open",Vr="change",qr="focus",Ps="created",Il="beforeOpen",xl="initialFrozenColumnIndex",Wi=function(){function a(e,t,i){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return a.prototype.render=function(e,t,i,r,n){return this.refreshRow(e,t,i,r,n)},a.prototype.refresh=function(e,t,i,r,n){var s=this;i&&(e.data=Ys({},e.changes),this.refreshMergeCells(e));var o=this.parent.element.querySelector("[data-uid="+e.uid+"]"),l=this.refreshRow(e,t,r,n,null,i),h=[].slice.call(l.cells),p=[].slice.call(o.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&p.length)for(var c=function(I){if(I.template)return setTimeout(function(){s.parent.refreshReactColumnTemplateByUid(I.uid,!0)},0),"break"},d=0,f=t;d<f.length;d++){var g=f[d],m=c(g);if(m==="break")break}var v=[].slice.call(l.attributes);v.map(function(I){o.setAttribute(I.name,I.value)}),o.innerHTML="";for(var y=0,w=h;y<w.length;y++){var b=w[y];o.appendChild(b)}},a.prototype.refreshRow=function(e,t,i,r,n,s){var o=u(n)?this.element.cloneNode():n,l={data:e.data},h={data:e.data},p=this.parent.getColumns().filter(function(ie){return ie.type==="checkbox"&&ie.field})[0],c=!1,d=this.parent.isFrozenGrid();p&&(c=Ue(p.field,l.data));var f=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=f.indexOf(e.index)>-1||c),e.isDataRow&&this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(e.isSelected=!0,f.indexOf(e.index)===-1&&f.push(e.index)),this.buildAttributeFromRow(o,e),$(o,P({},i,{})),ai(o,e.attributes);for(var g=this.serviceLocator.getService("cellRendererFactory"),m=function(ie,ye){var _=e.cells[parseInt(ie.toString(),10)];_.isSelected=e.isSelected,_.isColumnSelected=_.column.isSelected;var Fe=g.getCellRenderer(e.cells[parseInt(ie.toString(),10)].cellType||Q.Data),dt={index:u(e.index)?"":e.index.toString()};e.isExpand&&e.cells[parseInt(ie.toString(),10)].cellType===Q.DetailExpand&&(dt.class=v.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var xe=Fe.render(e.cells[parseInt(ie.toString(),10)],e.data,dt,e.isExpand,s);if(e.cells[parseInt(ie.toString(),10)].cellType!==Q.Filter){if(e.cells[parseInt(ie.toString(),10)].cellType===Q.Data||e.cells[parseInt(ie.toString(),10)].cellType===Q.CommandColumn){var Rt=v.parent.parentDetails&&v.parent.parentDetails.parentInstObj&&v.parent.parentDetails.parentInstObj.isReact;if((v.parent.isReact&&v.parent.requireTemplateRef||Rt&&v.parent.parentDetails.parentInstObj.requireTemplateRef)&&_.isTemplate){var ve=v;ve.parent.renderTemplates(function(){if(typeof _.column.template!="string"){var ta=xe.getAttribute("aria-label");xe.setAttribute("aria-label",xe.innerText+ta)}ve.parent.trigger(Ur,P(h,{cell:xe,column:_.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[parseInt(ie.toString(),10)].foreignKeyData,requestType:ve.parent.requestTypeAction}))})}else v.parent.trigger(Ur,P(h,{cell:xe,column:_.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[parseInt(ie.toString(),10)].foreignKeyData,requestType:v.parent.requestTypeAction}));var Zt=!1;if(e.index>0&&(v.isSpan||v.parent.isSpan&&s)){var At=v.parent.getRowsObject(),Tt=v.parent.groupSettings.columns.length>0&&!At[e.index-1].isDataRow?At[e.index].cells:At[e.index-1].cells,Ii="uid",Qe=Tt.filter(function(ta){return ta.column.uid===e.cells[parseInt(ie.toString(),10)].column[""+Ii]})[0];Zt=Qe.isRowSpanned?Qe.isRowSpanned:Qe.rowSpanRange>1}if(h.rowSpan>1||h.colSpan>1){if(v.resetrowSpanvalue(v.parent.frozenRows>e.index?v.parent.frozenRows:v.parent.currentViewData.length,h,e.index),h.column.visible===!1)h.colSpan=1;else if(d){var wr=v.parent.getColumns(),Xs=v.parent.getFrozenRightColumnsCount(),ei=v.parent.getFrozenLeftCount(),Gt=wr.length-Xs,Nt=h.column.index;if(ei>Nt&&ei<Nt+h.colSpan){var di=Nt+h.colSpan-ei;h.colSpan=h.colSpan-di}else if(Gt<=Nt&&wr.length<Nt+h.colSpan){var di=Nt+h.colSpan-wr.length;h.colSpan=h.colSpan-di}else if(h.column.freeze==="Fixed"){for(var di=1,er=Nt,Zs=er+1;Zs<er+h.colSpan&&wr[parseInt(Zs.toString(),10)].freeze==="Fixed";Zs++)di++;h.colSpan=di}else if(Gt>Nt&&Gt<Nt+h.colSpan){var di=Nt+h.colSpan-Gt;h.colSpan=h.colSpan-di}}}if(h.colSpan>1||e.cells[parseInt(ie.toString(),10)].cellSpan>1||h.rowSpan>1||Zt){v.parent.isSpan=!0,v.isSpan=!0;var vp=new Ru(v.serviceLocator,v.parent);xe=vp.render(h,e,ie,xe),d&&$u(v.parent,h.column,xe,h.colSpan)}}if(v.isSpan){var At=v.parent.getRowsObject(),an=v.parent.enableRtl;if(At[e.index-1]){var Tt=At[e.index-1].cells,Qe=Tt[ie-1],jn=Tt[parseInt(ie.toString(),10)],Ir=Tt[ie+1],ea=Tt[parseInt(ie.toString(),10)].column.freeze;Qe&&(Qe.isRowSpanned||Qe.rowSpanRange>1)&&Qe.visible&&(!an&&(!jn.isRowSpanned||Qe.rowSpanRange>jn.rowSpanRange)&&xe.classList.add("e-rowcell-firstchild"),d&&(Qe.column.freeze==="Fixed"&&ea==="Fixed"?xe.classList.add(an?"e-removefreezerightborder":"e-removefreezeleftborder"):!an&&ie===1&&ea==="Left"&&xe.classList.add("e-addfreezefirstchildborder"))),Ir&&(Ir.isRowSpanned||Ir.rowSpanRange>1)&&Ir.visible&&(an&&(!jn.isRowSpanned||Ir.rowSpanRange>jn.rowSpanRange)&&xe.classList.add("e-rowcell-lastchild"),d&&Ir.column.freeze==="Fixed"&&ea==="Fixed"&&h.colSpan<2&&xe.classList.add(an?"e-removefreezeleftborder":"e-removefreezerightborder"))}}h.rowSpan>1&&v.parent.currentViewData.length-e.index===h.rowSpan&&xe.classList.add("e-row-span-lastrowcell"),e.cells[parseInt(ie.toString(),10)].isSpanned||o.appendChild(xe)}},v=this,y=0,w=e.cells.length;y<w;y++)m(y);var b=0;if(this.parent.groupSettings.columns.length&&this.parent.getFrozenLeftColumnsCount()){if(o.classList.contains("e-groupcaptionrow")){var I=[].slice.call(o.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder"));if(I.length&&N(I,["e-leftfreeze","e-unfreeze","e-rightfreeze","e-fixedfreeze","e-freezerightborder","e-freezeleftborder"]),o.querySelector(".e-summarycell"))Ku(o,this.parent);else{for(var k=0;k<o.childNodes.length;k++){var D=o.childNodes[parseInt(k.toString(),10)];if(D.classList.add("e-leftfreeze"),Re(D,k*30,this.parent.enableRtl,"Left"),D.classList.contains("e-groupcaption")){var W=parseInt(D.getAttribute("colspan"),10),Z=_u(this.parent,k);D.setAttribute("colspan",Z.toString()),b=W-Z}}if(b){var D=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{colspan:b.toString(),id:this.parent.element.id+"captioncell",tabindex:"-1"}});o.appendChild(D)}}}if(o.querySelectorAll(".e-leftfreeze").length&&(o.querySelectorAll(".e-indentcell").length||o.querySelectorAll(".e-grouptopleftcell").length))for(var D=o.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),y=0;y<D.length;y++)D[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),Re(D[parseInt(y.toString(),10)],y*30,this.parent.enableRtl,"Left")}var J={row:o,rowHeight:this.parent.rowHeight};if(e.isDataRow){var X=P(l,J);X.isSelectable=!0;var L=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,O=X.row.querySelectorAll(".e-templatecell");if((this.parent.isReact&&this.parent.requireTemplateRef||L&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&O.length){var F=this;F.parent.renderTemplates(function(){F.parent.trigger(Es,X),X.isSelectable||(e.isSelectable=X.isSelectable,F.disableRowSelection(F,e,J,X))})}else this.parent.trigger(Es,X);e.isSelectable=X.isSelectable;var V=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var K=this.parent.getPrimaryKeyFieldNames()[0],U=e.data?e.data[""+K]:null,H=X.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;H.some(function(ie){return ie[""+K]===U})||H.push(e.data)}if(X.isSelectable||this.disableRowSelection(this,e,J,X),this.parent.childGrid||V||this.parent.detailTemplate){var D=o.querySelectorAll(".e-rowcell:not(.e-hide)")[0];D&&D.classList.add("e-detailrowvisible")}}this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?o.style.height=l.rowHeight+"px":this.parent.rowHeight&&(o.querySelector(".e-headercell")||o.querySelector(".e-groupcaption"))&&(o.style.height=this.parent.rowHeight+"px"),e.cssClass&&o.classList.add(e.cssClass),e.lazyLoadCssClass&&o.classList.add(e.lazyLoadCssClass),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both")&&o.classList.add("e-verticalwrap");var z=this.parent.enableColumnVirtualization;if(!z&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(var y=0;y<this.parent.aggregates.length;y++){var Y="properties",le="columns";if(this.parent.aggregates[parseInt(y.toString(),10)][""+Y][""+le][0].footerTemplate){var de=[].slice.call(o.getElementsByClassName("e-summarycell"));if(de.length){var he=de[de.length-1];R([he],["e-lastsummarycell"]);var ue=de[0];R([ue],["e-firstsummarycell"])}}}return o},a.prototype.resetrowSpanvalue=function(e,t,i){if(e>i&&e<i+t.rowSpan){var r=i+t.rowSpan-e;t.rowSpan=t.rowSpan-r}},a.prototype.disableRowSelection=function(e,t,i,r){var n=this.parent.getSelectedRowIndexes();this.parent.selectionModule.isPartialSelection=!0,t.isSelected=!1;var s=n.indexOf(t.index);s>-1&&n.splice(s,1);for(var o=i.row.querySelectorAll(".e-rowcell.e-gridchkbox"),l=r.row.querySelector(".e-rowdragdrop"),h=e.parent.groupSettings.columns.length+(l||e.parent.isDetail()?1:0),p=0;p<o.length;p++)o[parseInt(p.toString(),10)].firstElementChild.classList.add("e-checkbox-disabled"),o[parseInt(p.toString(),10)].querySelector(".e-frame").classList.remove("e-check");if(t.cells.length)for(var p=h;p<t.cells.length;p++){var c=r.row.querySelector('.e-rowcell[data-colindex="'+t.cells[parseInt(p.toString(),10)].index+'"]');c&&N([c],["e-selectionbackground","e-active"])}l&&N([l],["e-selectionbackground","e-active"])},a.prototype.refreshMergeCells=function(e){for(var t=0,i=e.cells;t<i.length;t++){var r=i[t];r.isSpanned=!1}return e},a.prototype.buildAttributeFromRow=function(e,t){var i={},r={rowindex:Se,dataUID:"data-uid",ariaSelected:"aria-selected"},n=[];t.isDataRow&&n.push(ze),t.isAltRow&&n.push("e-altrow"),t.isCaptionRow&&n.push("e-groupcaptionrow"),t.isAggregateRow&&t.parentUid&&n.push("e-groupfooterrow"),u(t.index)||(i[Ln]=t.index+1,i[r.rowindex]=t.index),t.rowSpan&&(i.rowSpan=t.rowSpan),t.uid&&(i[r.dataUID]=t.uid),t.isSelected&&(i[r.ariaSelected]=!0),t.visible===!1&&n.push("e-hide"),i.class=n,ai(e,i)},a}(),rn=function(){function a(e){this.parent=e}return a.prototype.generateRows=function(e,t){var i=[],r=this.parent.enableVirtualization&&t?t.startIndex:0;r=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):r,this.parent.enableImmutableMode&&t&&t.startIndex&&(r=t.startIndex);for(var n=0,s=Object.keys(e).length;n<s;n++,r++)i[parseInt(n.toString(),10)]=this.generateRow(e[parseInt(n.toString(),10)],r);return i},a.prototype.ensureColumns=function(){var e=[];if(this.parent.detailTemplate||this.parent.childGrid){var t={};this.parent.notify(bu,t),e.push(this.generateCell(t,null,Q.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,Q.RowDragIcon)),e},a.prototype.generateRow=function(e,t,i,r,n,s,o){var l={};l.foreignKeyData={},l.uid=li("grid-row"),l.data=e,l.index=t,l.indent=r,l.tIndex=s,l.isDataRow=!0,l.parentGid=n,l.parentUid=o,this.parent.isPrinting&&(this.parent.hierarchyPrintMode==="All"?l.isExpand=!0:this.parent.hierarchyPrintMode==="Expanded"&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(t.toString(),10)]&&(l.isExpand=this.parent.expandedRows[parseInt(t.toString(),10)].isExpand)),l.cssClass=i,l.isAltRow=this.parent.enableAltRow?t%2!==0:!1,l.isAltRow=this.parent.enableAltRow?t%2!==0:!1,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(l);var h=this.ensureColumns(),p=new bi(l,this.parent);return p.cells=this.parent.getFrozenMode()==="Right"?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),p},a.prototype.refreshForeignKeyRow=function(e){for(var t=this.parent.getForeignKeyColumns(),i=0;i<t.length;i++)st(t[parseInt(i.toString(),10)].field,Xi(t[parseInt(i.toString(),10)],e.data),e.foreignKeyData)},a.prototype.generateCells=function(e){for(var t=this.parent.getColumns(),i=[],r=0;r<t.length;r++)i.push(this.generateCell(t[parseInt(r.toString(),10)],e.uid,u(t[parseInt(r.toString(),10)].commands)?void 0:Q.CommandColumn,null,r,e.foreignKeyData));return i},a.prototype.generateCell=function(e,t,i,r,n,s){var o={visible:e.visible,isDataCell:!u(e.field||e.template),isTemplate:!u(e.template),rowID:t,column:e,cellType:u(i)?Q.Data:i,colSpan:r,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&j(e.field,s)};return(o.isDataCell||o.column.type==="checkbox"||o.commands)&&(o.index=n),new Si(o)},a.prototype.refreshRows=function(e){for(var t=0;t<e.length;t++)this.refreshForeignKeyRow(e[parseInt(t.toString(),10)]),e[parseInt(t.toString(),10)].cells=this.generateCells(e[parseInt(t.toString(),10)]);return e},a.prototype.getInfiniteIndex=function(e){return e.requestType==="infiniteScroll"||e.requestType==="delete"||e.action==="add"?u(e.startIndex)?e.index:e.startIndex:0},a}(),Au=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),No=function(){function a(e){this.parent=e}return a.prototype.getData=function(){for(var e=this,t=[],i=this.parent.aggregates.slice(),r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)].columns.filter(function(s){return!(s.footerTemplate||s.groupFooterTemplate||s.groupCaptionTemplate)||e.columnSelector(s)});n.length&&t.push({columns:n})}return t},a.prototype.columnSelector=function(e){return e.footerTemplate!==void 0},a.prototype.getColumns=function(e){var t=[];if((this.parent.detailTemplate||!u(this.parent.childGrid))&&t.push(new Xe({})),this.parent.allowGrouping)for(var i=0;i<this.parent.groupSettings.columns.length;i++)t.push(new Xe({}));return this.parent.isRowDragable()&&!e&&t.push(new Xe({})),t.push.apply(t,this.parent.getColumns()),t},a.prototype.generateRows=function(e,t,i,r,n){if(e.length===0&&(t===void 0||!(t.count||t.loadSummaryOnEmpty)))return[];for(var s=this.buildSummaryData(e,t),o=[],l=this.getData(),h=0;h<l.length;h++)o.push(this.getGeneratedRow(l[parseInt(h.toString(),10)],s[parseInt(h.toString(),10)],t?t.level:void 0,i,r,t?t.parentUid:void 0,n));return o},a.prototype.getGeneratedRow=function(e,t,i,r,n,s,o){var l=[],h=this.getIndentByLevel(),p=!u(this.parent.childGrid),c=this.parent.getIndentCount();this.parent.groupSettings.columns.length&&this.parent.allowRowDragAndDrop?h.push("e-indentcelltop"):this.parent.isRowDragable()&&!r&&(h=["e-indentcelltop"]);for(var d=o||this.getColumns(r),f=0;f<d.length;f++)l.push(this.getGeneratedCell(d[parseInt(f.toString(),10)],e,f>=c?this.getCellType():f===0&&this.parent.childGrid?Q.DetailFooterIntent:Q.Indent,h[parseInt(f.toString(),10)],p));var g=new bi({data:t,attributes:{class:"e-summaryrow"}});return g.cells=l,g.uid=li("grid-row"),g.parentUid=s,g.isAggregateRow=!0,g.visible=l.some(function(m){return m.isDataCell&&m.visible}),g},a.prototype.getGeneratedCell=function(e,t,i,r,n){var s=t.columns.filter(function(h){return h.columnName===e.field})[0],o={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};r&&(o.class=r),u(r)&&n&&(o.class="e-detailindentcelltop");var l={visible:e.visible,isDataCell:!u(s),isTemplate:s&&!u(s.footerTemplate||s.groupFooterTemplate||s.groupCaptionTemplate),column:s||{},attributes:o,cellType:i};return l.column.headerText=e.headerText,new Si(l)},a.prototype.buildSummaryData=function(e,t){for(var i=[],r=this.getData(),n={},s=0;s<r.length;s++){n={};for(var o=r[parseInt(s.toString(),10)].columns,l=0;l<o.length;l++)n=this.setTemplate(o[parseInt(l.toString(),10)],t&&t.aggregates?t:e,n);i.push(n)}return i},a.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},a.prototype.setTemplate=function(e,t,i){var r=e.type,n={},s=e.getFormatter()||function(){return function(f){return f}}(),o=t;r instanceof Array||(r=[e.type]);for(var l=0;l<r.length;l++){var h=e.field+" - "+r[parseInt(l.toString(),10)].toLowerCase(),p=e.columnName,c=!!(this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&o.items),d=(r[parseInt(l.toString(),10)]!=="Custom"||c)&&o.aggregates&&h in o.aggregates?o.aggregates[""+h]:Zf(r[parseInt(l.toString(),10)],o.aggregates?o:t,e,this.parent);i[""+p]=i[""+p]||{},i[""+p][""+h]=d,i[""+p][r[parseInt(l.toString(),10)]]=u(d)?" ":s(d),o.field&&(i[""+p].field=o.field,i[""+p].key=o.key)}return n.format=e.getFormatter(),e.setTemplate(n),i},a.prototype.getCellType=function(){return Q.Summary},a}(),Tu=function(a){Au(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.columnSelector=function(t){return t.groupFooterTemplate!==void 0},e.prototype.getIndentByLevel=function(t){return t===void 0&&(t=this.parent.groupSettings.columns.length),this.parent.allowRowDragAndDrop&&this.parent.groupSettings.columns.length&&(t-=1),this.parent.groupSettings.columns.map(function(i,r){return r<=t-1?"":"e-indentcelltop"})},e.prototype.getCellType=function(){return Q.GroupSummary},e}(No),Mu=function(a){Au(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.columnSelector=function(t){return t.groupCaptionTemplate!==void 0},e.prototype.getData=function(){var t={columns:[]};return[a.prototype.getData.call(this).reduce(function(i,r){return i.columns=i.columns.concat(r.columns),i},t)]},e.prototype.isEmpty=function(){return(this.getData()[0].columns||[]).length===0},e.prototype.getCellType=function(){return Q.CaptionSummary},e}(No),Gd=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_d=function(a){Gd(e,a);function e(t){var i=a.call(this,t)||this;return i.rows=[],i.index=0,i.infiniteChildCount=0,i.renderInfiniteAgg=!0,i.parent=t,i.summaryModelGen=new Tu(t),i.captionModelGen=new Mu(t),i}return e.prototype.generateRows=function(t,i){if(this.parent.groupSettings.columns.length===0)return a.prototype.generateRows.call(this,t,i);this.isInfiniteScroll=i.requestType==="infiniteScroll",this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var r=0,n=t.length;r<n;r++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,t[parseInt(r.toString(),10)],t.level,r,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},e.prototype.getGroupedRecords=function(t,i,r,n,s,o,l){var h,p=r;if(u(i.items))if(u(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,t,n,this.rows.length,l));else for(var c=0,d=i.length;c<d;c++)this.getGroupedRecords(t,i[parseInt(c.toString(),10)],i.level,n,t,this.rows.length,l);else{var f=void 0,g=this.generateCaptionRow(i,t,n,s,o,l);if(this.isInfiniteScroll&&(f=this.getPreCaption(t,g.data.key)),f?g.uid=f.uid:this.rows=this.rows.concat(g),i.items&&i.items.length&&this.getGroupedRecords(t+1,i.items,i.items.level,n,t+1,this.rows.length,g.uid),this.parent.aggregates.length&&this.isRenderAggregate(g)){var m=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(i,{level:p,parentUid:g.uid}));for(var v=m-1;v>=0;v--)if(this.rows[parseInt(v.toString(),10)].isCaptionRow)this.rows[parseInt(v.toString(),10)].aggregatesCount=this.rows.length-m;else if(!this.rows[parseInt(v.toString(),10)].isCaptionRow&&!this.rows[parseInt(v.toString(),10)].isDataRow)break}f&&this.setInfiniteRowVisibility(f)}},e.prototype.isRenderAggregate=function(t){return this.parent.enableInfiniteScrolling?this.renderInfiniteAgg?(this.getPreCaption(t.indent,t.data.key),this.renderInfiniteAgg=t.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!1:!this.parent.enableInfiniteScrolling},e.prototype.getPreCaption=function(t,i){var r=this.parent.getRowsObject().concat(this.rows),n;this.infiniteChildCount=0;for(var s=r.length;s--;){if(r[parseInt(s.toString(),10)].isCaptionRow&&r[parseInt(s.toString(),10)].indent===t){var o=r[parseInt(s.toString(),10)].data.key;(o.toString()===i.toString()&&o instanceof Date||o===i)&&(n=r[parseInt(s.toString(),10)])}if(r[parseInt(s.toString(),10)].indent===t||r[parseInt(s.toString(),10)].indent<t)break;r[parseInt(s.toString(),10)].indent===t+1&&this.infiniteChildCount++}return n},e.prototype.getCaptionRowCells=function(t,i,r){var n=[],s=[],o=this.parent.getColumnByField(t),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(o=this.parent.columns.filter(function(b){return b.field===t})[0]);var h=this.parent.groupSettings.columns.length,p=this.parent;if(!this.parent.enableColumnVirtualization||l.indexOf(i)!==-1){for(var c=0;c<i;c++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,Q.Expand))}if(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(p.detailTemplate||p.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var d=this.captionModelGen.generateRows(r)[0];P(r,d.data);var f=0;d.cells.some(function(b,I){return f=I,b.visible&&b.isDataCell}),s=d.cells.slice(f).filter(function(b){return b.visible}),d.visible&&s[0].column.field===this.parent.getVisibleColumns()[0].field&&(s=s.slice(1)),this.parent.getVisibleColumns().length===1&&(s=[]),i=i-s.length}for(var g=this.parent.enableColumnVirtualization?this.parent.getColumns():[o],m=!0,v=0;v<g.length;v++){var y=m&&l.indexOf(i)!==-1;y&&(m=!1);var w=!this.parent.enableColumnVirtualization||y?Q.GroupCaption:Q.GroupCaptionEmpty;i=this.parent.enableColumnVirtualization&&w===Q.GroupCaption?i+h:i,p.isRowDragable()&&i++,n.push(this.generateCell(o,null,w,i))}return n.push.apply(n,s),n},e.prototype.generateCaptionRow=function(t,i,r,n,s,o){var l={},h="records",p=this.parent.getColumnByField(t.field);l.data=P({},t),p&&(l.data.field=t.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=r,l.childGid=n,l.tIndex=s,l.isCaptionRow=!0,l.parentUid=o,l.gSummary=u(t.items[""+h])?t.items.length:t.items[""+h].length,l.uid=li("grid-row");var c=new bi(l);return c.indent=i,this.getForeignKeyData(c),c.cells=this.getCaptionRowCells(t.field,i,c.data),c},e.prototype.getForeignKeyData=function(t){var i=t.data,r=this.parent.getColumnByField(i.field);if(r&&r.isForeignColumn&&r.isForeignColumn()){var n=u(i.key)?"":r.valueAccessor(r.foreignKeyValue,Xi(r,{},i.key)[0],r);st("foreignKey",n,t.data)}},e.prototype.generateDataRows=function(t,i,r,n,s){for(var o=[],l=this.parent.getColumnIndexesInView(),h=0,p=t.length;h<p;h++,n++){o[parseInt(h.toString(),10)]=this.generateRow(t[parseInt(h.toString(),10)],this.index,h?void 0:"e-firstchildrow",i,r,n,s);for(var c=0;c<i;c++)this.parent.enableColumnVirtualization&&l.indexOf(i)===-1||o[parseInt(h.toString(),10)].cells.unshift(this.generateIndentCell());this.index++}return o},e.prototype.generateIndentCell=function(){return this.generateCell({},null,Q.Indent)},e.prototype.refreshRows=function(t){for(var i=this.parent.getColumnIndexesInView(),r=0;r<t.length;r++)if(t[parseInt(r.toString(),10)].isDataRow){t[parseInt(r.toString(),10)].cells=this.generateCells(t[parseInt(r.toString(),10)]);for(var n=0;n<t[parseInt(r.toString(),10)].indent;n++)this.parent.enableColumnVirtualization&&i.indexOf(t[parseInt(r.toString(),10)].indent)===-1||t[parseInt(r.toString(),10)].cells.unshift(this.generateIndentCell())}else{var s=this.generateCaptionRow(t[parseInt(r.toString(),10)].data,t[parseInt(r.toString(),10)].indent);t[parseInt(r.toString(),10)].cells=s.cells}return t},e.prototype.setInfiniteRowVisibility=function(t){if(!t.isExpand||t.visible===!1)for(var i=0,r=this.rows;i<r.length;i++){var n=r[i];n.parentUid===t.uid&&(n.visible=!1,n.isCaptionRow&&this.setInfiniteRowVisibility(n))}},e.prototype.ensureRowVisibility=function(){for(var t=0;t<this.rows.length;t++){var i=this.rows[parseInt(t.toString(),10)];if(i.isCaptionRow)for(var r=t+1;r<this.rows.length;r++){var n=this.rows[parseInt(r.toString(),10)];i.uid===n.parentUid&&(this.rows[parseInt(r.toString(),10)].visible=i.isExpand)}}},e}(rn),Kd=function(){function a(e,t){var i=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.drop=function(r){i.parent.notify(hu,{target:r.target,droppedElement:r.droppedElement}),se(r.droppedElement)},this.infiniteCache={},this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.tempFreezeRows=[],this.rafCallback=function(r){var n=r;return function(){if(i.ariaService.setBusy(i.getPanel().querySelector("."+ut),!1),!i.parent.isDestroyed){var s=i.rows.slice(0);if(i.parent.enableInfiniteScrolling){if(i.parent.groupSettings.enableLazyLoading)for(var o=0;o<i.visibleRows.length;o++)i.setRowsInLazyGroup(i.visibleRows[parseInt(o.toString(),10)],o);s=i.parent.getRowsObject();var l=n.prevPage;if(i.parent.infiniteScrollSettings.enableCache&&l){var h=i.parent.infiniteScrollSettings.maxBlocks;s=[];for(var p=parseInt(i.rowElements[0].getAttribute("data-rowindex"),10)+1,c=Math.ceil(p/i.parent.pageSettings.pageSize),o=0,d=c;o<h;o++,d++)i.infiniteCache[parseInt(d.toString(),10)]&&(s=s.concat(i.infiniteCache[parseInt(d.toString(),10)]))}}if(i.parent.notify(je,{rows:s,args:n}),i.parent.editSettings.showAddNewRow&&i.parent.addNewRowFocus&&(i.parent.notify(Vi,{}),i.parent.addNewRowFocus=!1),i.parent.autoFit&&i.parent.preventAdjustColumns(),i.parent.isInitialLoad||i.parent.focusModule.setFirstFocusableTabIndex(),i.isLoaded){i.parent.isManualRefresh=!1,i.parent.enableInfiniteScrolling&&i.parent.groupSettings.enableLazyLoading&&r.requestType==="sorting"&&(i.parent.infiniteScrollModule.groupCaptionAction=void 0);var f=i.parent.parentDetails&&i.parent.parentDetails.parentInstObj&&i.parent.parentDetails.parentInstObj.isReact;if((i.parent.isReact||f)&&i.parent.element.querySelectorAll(".e-templatecell").length){var g=i;g.parent.renderTemplates(function(){g.parent.trigger(Qt,{},function(){g.parent.allowTextWrap&&g.parent.notify(dr,{case:"textwrap"})})})}else i.parent.trigger(Qt,{},function(){i.parent.allowTextWrap&&i.parent.notify(dr,{case:"textwrap"})});i.parent.allowTextWrap&&i.parent.height==="auto"&&(i.parent.getContentTable().scrollHeight>i.parent.getContent().clientHeight?i.parent.scrollModule.setPadding():i.parent.scrollModule.removePadding())}if(n){var m=(n.requestType||"").toLowerCase()+"-complete";i.parent.notify(m,n),r.requestType==="batchsave"&&(r.cancel=!1,i.parent.trigger(ce,r))}i.isLoaded&&i.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=t,this.widthService=t.getService("widthService"),this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(As,this.setVisible,this),this.parent.on(cu,this.colGroupRefresh,this),this.parent.on(qe,this.enableAfterRender,this),this.parent.on(hd,this.refreshContentRows,this),this.parent.on(ks,this.beforeCellFocused,this),this.parent.on(Ie,this.droppableDestroy,this))}return a.prototype.beforeCellFocused=function(e){e.byKey&&(e.keyArgs.action==="upArrow"||e.keyArgs.action==="downArrow")?this.pressedKey=e.keyArgs.action:this.pressedKey=void 0},a.prototype.renderPanel=function(){var e=this.parent,t=this.parent.element.querySelector("."+ot);if(t){this.ariaService.setOptions(this.parent.element.querySelector("."+ut),{busy:!1}),this.setPanel(t);return}t=this.parent.createElement("div",{className:ot});var i=this.parent.createElement("div",{className:ut});this.ariaService.setOptions(i,{busy:!1}),this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(this.renderHorizontalScrollbar(t),i.classList.add("e-virtual-content")),t.appendChild(i),this.setPanel(t),e.element.appendChild(t)},a.prototype.renderHorizontalScrollbar=function(e){var t=this.parent.createElement("div",{className:"e-movablescrollbar"}),i=this.parent.createElement("div",{className:"e-movablechild"}),r=Dt().toString();this.setScrollbarHeight(i,r),this.setScrollbarHeight(t,r),t.appendChild(i),e.appendChild(t)},a.prototype.setScrollbarHeight=function(e,t){e.style.minHeight=t+"px",e.style.maxHeight=t+"px"},a.prototype.renderTable=function(){var e=this.getPanel(),t=e.querySelector(".e-virtualtable"),i=e.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!u(t)&&!u(i)&&(se(t),se(i)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector("."+$t)),this.parent.selectionSettings.type==="Multiple"&&this.ariaService.setOptions(this.parent.element,{multiselectable:!0}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdr")},a.prototype.createContentTable=function(e){var t=this.getPanel().firstElementChild;this.getTable()&&se(this.getTable());var i=t.querySelector("."+$t)?t.querySelector("."+$t):this.parent.createElement("table",{className:$t,attrs:{cellspacing:"0.25px",role:"presentation",id:this.parent.element.id+e}});return this.setColGroup(this.parent.getHeaderTable().querySelector(Lt).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(me,{attrs:{role:"rowgroup"}})),t.appendChild(i),t},a.prototype.refreshContentRows=function(e){var t=this;e===void 0&&(e={});var i=this.parent;if(i.currentViewData.length!==0){i.editSettings&&i.editModule&&i.editSettings.mode==="Batch"&&i.editModule.formObj&&i.editSettings.showConfirmDialog===!1&&i.editModule.destroyForm();var r=this.currentMovableRows||i.currentViewData,n=i.isReact&&!u(i.rowTemplate),s=n?i.createElement(me,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=P([],r));var o=n?i.createElement(me,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),l,h;i.isReact&&i.rowTemplate&&(l=s,h=o);var p=i.getColumns(),c,d,f,g=new Wi(this.serviceLocator,null,this.parent),m=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll",v=this.isInfiniteColumnvirtualization()&&e.requestType!=="virtualscroll";i.notify(Pd,{}),this.rowElements=[],this.rows=[],this.tempFreezeRows=[];var y,w,b=!!(this.parent.frozenRows&&this.parent.groupSettings.columns.length);pi(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(ve){return e.requestType===ve})&&this.emptyVcRows();var I;I=this.checkCache(I,e),!this.isAddRows&&!this.useGroupCache&&(I=this.generator.generateRows(r,e)),this.setGroupCache(I,e),this.parent.notify(md,{isInfiniteScroll:m,modelData:I,args:e});var k=!1,D=this.parent.registeredTemplate;if(!(e.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&D&&D.template&&!e.isFrozen&&!k){for(var W=[],Z=0;Z<D.template.length;Z++)for(var J=0;J<D.template[parseInt(Z.toString(),10)].rootNodes.length;J++)u(D.template[parseInt(Z.toString(),10)].rootNodes[parseInt(J.toString(),10)].parentNode)&&W.push(D.template[parseInt(Z.toString(),10)]);this.parent.destroyTemplate(["template"],W)}if((this.parent.isReact||this.parent.isVue)&&!(e.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&!e.isFrozen){var X=[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"];e.requestType==="infiniteScroll"&&this.parent.infiniteScrollSettings.enableCache&&(X=[this.parent.isVue?"template":"columnTemplate","commandsTemplate"]),qn(this.parent,X)}if(this.parent.enableColumnVirtualization){var L=new Ru(this.serviceLocator,this.parent);L.updateVirtualCells(I)}this.tbody=this.getTable().querySelector(me);var O=0,F=!0;if(pi(i)&&i.vcRows.length){var V="top",K=u(e.virtualInfo.offsets)?u(e.scrollTop)?0:e.scrollTop[""+V]:e.virtualInfo.offsets.top;if(K!==0){for(var U=i.vGroupOffsets,H=i.pageSettings.pageSize/2,z=Object.keys(U).map(function(ve){return U[""+ve]}),Y=0;Y<z.length;Y++)if(K<z[parseInt(Y.toString(),10)])if(!u(e.virtualInfo)&&e.virtualInfo.direction==="up"){O=Y>0?(Y-1)*H:Y*H;break}else{O=Y*H,(this.parent.contentModule.isEndBlock(Y)||this.parent.contentModule.isEndBlock(Y+1))&&(e.virtualInfo.blockIndexes=[Y,Y+1]);break}Math.round(K+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(F=!1)}}var le=i.frozenRows&&this.parent.enableVirtualization&&e.requestType==="reorder";if(i.frozenRows&&e.requestType==="virtualscroll"&&e.virtualInfo.sentinelInfo.axis==="X"||le){var de=e.virtualInfo.blockIndexes,he=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],le&&(e.virtualInfo.page=1);var ue=le?this.initialPageRecords:r,ie=this.vgenerator.generateRows(ue,e);ie.splice(this.parent.frozenRows);for(var Z=0;Z<this.parent.frozenRows;Z++)c=g.render(ie[parseInt(Z.toString(),10)],p),yr(c),o.appendChild(c);e.virtualInfo.blockIndexes=de,e.virtualInfo.page=he,le&&e.virtualInfo.page===1&&I.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(o,I,g,e,r,p),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&((this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]=[]),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&e.requestType==="delete"&&(this.visibleRows=[]);for(var ye=function(ve,Zt){if(_.rows.push(I[parseInt(ve.toString(),10)]),_.parent.groupSettings.enableLazyLoading&&!_.useGroupCache&&_.parent.groupSettings.columns.length&&((_.parent.enableVirtualization?_.parent.lazyLoadRender:_.parent.contentModule).refRowsObj[_.parent.pageSettings.currentPage].push(I[parseInt(ve.toString(),10)]),_.setRowsInLazyGroup(I[parseInt(ve.toString(),10)],ve),u(I[parseInt(ve.toString(),10)].indent)))return"continue";if(_.setInfiniteVisibleRows(e,I[parseInt(ve.toString(),10)]),pi(i)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&_.rowElements.length>=e.virtualInfo.blockIndexes.length*_.parent.contentModule.getBlockSize()&&F)return _.parent.currentViewData.records=_.rows.map(function(er){return er.data}),"break";if(i.rowTemplate){var Ii=i.element.id+"rowTemplate",Qe=void 0;if(i.isReact){var wr=i.frozenRows&&ve<i.frozenRows,Xs=P({index:ve},r[parseInt(ve.toString(),10)]);if(i.getRowTemplate()(Xs,i,"rowTemplate",Ii,null,null,wr?o:s),i.requireTemplateRef){var ei=_;return ei.parent.renderTemplates(function(){i.frozenRows&&ve<i.frozenRows?c=h.childNodes[parseInt(ve.toString(),10)]:f=l.childNodes[parseInt(ve.toString(),10)];var er={data:I[parseInt(ve.toString(),10)].data,row:f||c};ei.parent.trigger(Es,er),(I[parseInt(ve.toString(),10)].isDataRow||ei.parent.enableVirtualization&&ei.parent.groupSettings.enableLazyLoading)&&ei.rowElements.push(er.row),ei.ariaService.setOptions(ei.parent.element,{colcount:i.getColumns().length.toString()}),ve===I.length-1&&(l=null,h=null)}),"continue"}}else Qe=i.getRowTemplate()(P({index:ve},r[parseInt(ve.toString(),10)]),i,"rowTemplate",Ii,void 0,void 0,void 0,_.parent.root);if(!i.isReact&&Qe[0].tagName==="TBODY"){for(var Gt=0;Gt<Qe.length;Gt++){var Nt=Qe[parseInt(Gt.toString(),10)].nodeName.toLowerCase()==="tr";(Nt||Qe[parseInt(Gt.toString(),10)].querySelectorAll&&Qe[parseInt(Gt.toString(),10)].querySelectorAll("tr").length)&&(c=Nt?Qe[parseInt(Gt.toString(),10)]:Qe[parseInt(Gt.toString(),10)].querySelector("tr"))}i.frozenRows&&ve<i.frozenRows?o.appendChild(c):s.appendChild(c)}else i.frozenRows&&ve<i.frozenRows?c=i.isReact?o.lastElementChild:$e(o,Qe):(i.isReact||(c=$e(s,Qe)),f=i.isReact?s.lastElementChild:c.lastElementChild);var di={data:I[parseInt(ve.toString(),10)].data,row:f||c};_.parent.trigger(Es,di)}else{c=g.render(I[parseInt(ve.toString(),10)],p),yr(c);var At=_.ensureFrozenHeaderRender(e);i.frozenRows&&(ve<i.frozenRows||b)&&!m&&e.requestType!=="virtualscroll"&&At&&_.ensureVirtualFrozenHeaderRender(e)?o.appendChild(c):s.appendChild(c);var Tt=parseInt(c.getAttribute("data-rowindex"),10);Tt+1===i.frozenRows&&(b=!1),I[parseInt(ve.toString(),10)].isExpand&&i.notify(qc,c.cells[i.groupSettings.columns.length])}(I[parseInt(ve.toString(),10)].isDataRow||_.parent.enableVirtualization&&_.parent.groupSettings.enableLazyLoading)&&(!u(i.rowTemplate)&&(i.isAngular||i.isVue3||i.isVue)?_.rowElements.push(f||c):_.rowElements.push(c)),_.ariaService.setOptions(_.parent.element,{colcount:i.getColumns().length.toString()})},_=this,Z=O,Fe=I.length;Z<Fe;Z++){var dt=ye(Z);if(dt==="break")break}var xe=i.parentDetails&&i.parentDetails.parentInstObj&&i.parentDetails.parentInstObj.isReact;if((i.isReact||xe)&&!i.requireTemplateRef&&i.renderTemplates(),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(xu,{rows:(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]}),i.removeMaskRow(),this.parent.notify("removeGanttShimmer",{requestType:"hideShimmer"}),i.frozenRows&&e.requestType!=="virtualscroll"&&!m&&this.ensureVirtualFrozenHeaderRender(e)||e.requestType==="virtualscroll"&&e.virtualInfo.sentinelInfo&&e.virtualInfo.sentinelInfo.axis==="X"){if(d=i.getHeaderTable().querySelector(me),n){var Rt=d.parentElement;se(d),Rt.appendChild(o)}else d.innerHTML="",d.appendChild(o);i.isInitialLoad||i.scrollModule.setHeight()}e.rows=this.rows.slice(0),qu(function(){if(t.parent.notify(yu,e),!t.parent.enableVirtualization&&(!t.parent.enableColumnVirtualization||v)&&!m&&(i.isReact||(t.tbody.innerHTML=""),u(t.tbody.parentElement)?se(i.getContentTable().querySelector(me)):se(t.tbody),t.tbody=t.parent.createElement(me,{attrs:{role:"rowgroup"}})),i.rowTemplate&&cr(i.element.id+"rowTemplate","RowTemplate",i),!u(t.parent.infiniteScrollModule)&&(t.parent.enableInfiniteScrolling&&!t.isInfiniteColumnvirtualization()||v)){if(t.isAddRows=!1,t.parent.notify(gd,{args:e}),t.parent.notify(fd,{tbody:y||t.tbody,frag:s,args:e,rows:t.rows,rowElements:t.rowElements,visibleRows:t.visibleRows,tableName:w}),t.isInfiniteColumnvirtualization()&&t.parent.isFrozenGrid()){var ve=t.parent.getContent().querySelector(".e-virtualtable"),Zt=co(ve);t.parent.contentModule.resetStickyLeftPos(Zt.width),t.widthService.refreshFrozenScrollbar()}}else t.useGroupCache=!1,t.appendContent(t.tbody,s,e);if(t.parent.editSettings.showAddNewRow&&(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)){var At=t.parent.element.querySelector(".e-addrow-removed");At&&se(At)}var Tt=!t.parent.element.querySelector("."+Wt);t.parent.editSettings.showAddNewRow&&t.parent.editSettings.mode==="Normal"&&(Tt&&((t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&(t.parent.isAddNewRow=!0),t.parent.isEdit=!1,t.parent.addRecord()),(Tt||(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(Ii){return e.requestType===Ii}))&&t.parent.notify(Vi,{})),t.parent.getVisibleFrozenRightCount()&&t.parent.getContent()&&Wo(t.parent)>0&&t.parent.element.classList.add("e-right-shadow"),s=null},this.rafCallback(P({},e)))}},a.prototype.isInfiniteColumnvirtualization=function(){return this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling},a.prototype.enableCacheOnInfiniteColumnVirtual=function(){return this.isInfiniteColumnvirtualization()&&this.parent.infiniteScrollSettings.enableCache},a.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},a.prototype.appendContent=function(e,t,i,r){var n=this.parent.isReact&&!u(this.parent.rowTemplate);if(n?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e)),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both"))for(var s=e.querySelectorAll("td"),o=0;o<s.length;o++){var l=parseFloat(document.defaultView.getComputedStyle(s[parseInt(o.toString(),10)],"::before").getPropertyValue("height")),h=s[parseInt(o.toString(),10)].offsetHeight;l>h&&(s[parseInt(o.toString(),10)].style.height=l+"px",s[parseInt(o.toString(),10)].style.boxSizing="content-box")}this.parent.getVisibleFrozenLeftCount()&&this.parent.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar()},a.prototype.setRowsInLazyGroup=function(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).maintainRows(e,t)},a.prototype.setGroupCache=function(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify(bd,{args:t,data:e})},a.prototype.ensureFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&(e.requestType==="reorder"||e.requestType==="refresh")||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&this.parent.infiniteScrollModule.requestType==="delete"&&this.parent.pageSettings.currentPage!==1)},a.prototype.ensureVirtualFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&e.requestType==="delete")},a.prototype.checkCache=function(e,t){if(this.parent.infiniteScrollSettings.enableCache&&t.requestType==="infiniteScroll"){if(this.isAddRows=!u(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows){var i=this.infiniteCache[this.parent.pageSettings.currentPage];e=this.parent.pageSettings.currentPage===1?i.slice(this.parent.frozenRows):i}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(t.requestType==="paging"||t.requestType==="columnstate"||t.requestType==="reorder"||t.requestType==="virtualscroll")&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]?(this.parent.enableVirtualization||(this.useGroupCache=!0),this.parent.enableVirtualization?this.parent.getRowsObject():this.parent.contentModule.initialGroupRows(t.requestType==="reorder")):null},a.prototype.setInfiniteVisibleRows=function(e,t){this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!(this.isInfiniteColumnvirtualization()&&e.requestType==="virtualscroll")&&this.visibleRows.push(t)},a.prototype.getCurrentBlockInfiniteRecords=function(){var e=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var t=this.parent.getRows(),i=parseInt(t[this.parent.frozenRows].getAttribute(Se),10),r=Math.ceil((i+1)/this.parent.pageSettings.pageSize);i=parseInt(t[t.length-1].getAttribute(Se),10);for(var n=Math.ceil((i+(t.length?1:0))/this.parent.pageSettings.pageSize),s=r;s<=n;s++)e=e.length?e.concat(this.infiniteCache[parseInt(s.toString(),10)]):this.infiniteCache[parseInt(s.toString(),10)];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(e))}return e},a.prototype.getReorderedRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},a.prototype.virtualFrozenHdrRefresh=function(e,t,i,r,n,s){if(this.parent.frozenRows&&this.parent.enableVirtualization&&(r.requestType==="reorder"||r.requestType==="refresh")){for(var o=void 0,l=this.getReorderedRows(r),h=0;h<l.length;h++)o=i.render(l[parseInt(h.toString(),10)],s),e.appendChild(o);r.virtualInfo.page===1&&t.splice(0,this.parent.frozenRows)}},a.prototype.getInfiniteRows=function(){var e=[];if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var t=Object.keys(this.infiniteCache),i=0;i<t.length;i++)e=e.concat(this.infiniteCache[t[parseInt(i.toString(),10)]]);else e=this.visibleRows;return e},a.prototype.getInfiniteMovableRows=function(){var e=this.getCurrentBlockInfiniteRecords(),t=this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[];return t},a.prototype.getPanel=function(){return this.contentPanel},a.prototype.setPanel=function(e){this.contentPanel=e},a.prototype.getTable=function(){return this.contentTable},a.prototype.setTable=function(e){this.contentTable=e},a.prototype.getRows=function(){var e=this.getInfiniteRows();return e.length?e:this.rows},a.prototype.getRowElements=function(){return this.rowElements},a.prototype.setRowElements=function(e){this.rowElements=e},a.prototype.getColGroup=function(){return this.colgroup},a.prototype.setColGroup=function(e){return u(e)||(e.id="content-"+e.id),this.colgroup=e},a.prototype.setVisible=function(e){var t=this.parent,i=this.getRows(),r;i.some(function(v){return v.isDataRow&&(r=v),v.isDataRow});var n=!0;!t.groupSettings.columns.length&&r&&(n=!1);for(var s=t.getDataRows(),o={},l=this.infiniteRowVisibility(),h=l||this.rows.filter(function(v){return!v.isDetailRow}),p=0,c=e.length;p<c;p++){var d=e[parseInt(p.toString(),10)],f=this.parent.getNormalizedColumnIndex(d.uid),g=this.parent.getColumnIndexByUid(d.uid),m=d.visible===!0?"":"none";f!==-1&&r&&f<r.cells.length&&hi(this.getColGroup().childNodes[parseInt(f.toString(),10)],{display:m}),n||this.setDisplayNone(s,g,m,h),!this.parent.invokedFromMedia&&d.hideAtMedia&&this.parent.updateMediaColumns(d),this.parent.invokedFromMedia=!1}n?this.refreshContentRows({requestType:"refresh"}):(this.parent.notify(Cu,{rows:h,args:o}),this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.notify(Vi,{}))},a.prototype.setDisplayNone=function(e,t,i,r){pg(e,t,i,r,this.parent,this.parent.isRowDragable()),this.parent.notify(dd,{visible:i,index:t,isFreeze:this.isInfiniteFreeze})},a.prototype.infiniteRowVisibility=function(e){var t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,this.parent.infiniteScrollSettings.enableCache?t=this.getCurrentBlockInfiniteRecords():t=e?this.visibleFrozenRows:this.visibleRows),t},a.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e=this.getHeaderColGroup();this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}},a.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+pt).querySelector(Lt+":not(.e-masked-colgroup)").cloneNode(!0)},a.prototype.initializeContentDrop=function(){var e=this.parent;this.droppable=new eu(e.element,{accept:".e-dragclone",drop:this.drop})},a.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},a.prototype.canSkip=function(e,t,i){return u(t)||u(e.visible)||t.cells[parseInt(i.toString(),10)].visible===e.visible},a.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new _d(this.parent):new rn(this.parent)},a.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(me).innerHTML="")},a.prototype.setSelection=function(e,t,i){this.parent.notify(Ed,{uid:e,set:t,clearAll:i});for(var r=this.getRows().filter(function(l){return i||e===l.uid}),n=0;n<r.length;n++){r[parseInt(n.toString(),10)].isSelected=t;for(var s=r[parseInt(n.toString(),10)].cells,o=0;o<s.length;o++)s[parseInt(o.toString(),10)].isSelected=t}},a.prototype.getRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),u(e)?void 0:this.parent.getDataRows()[parseInt(e.toString(),10)]},a.prototype.getInfiniteRowIndex=function(e){if(this.parent.infiniteScrollSettings.enableCache&&!u(e)){var t=this.parent.frozenRows,i=t>e?0:t,r=parseInt(this.parent.getRows()[parseInt(i.toString(),10)].getAttribute(Se),10);e=t>e?e:e-r+t}return e},a.prototype.getVirtualRowIndex=function(e){return e},a.prototype.enableAfterRender=function(e){e.module==="group"&&e.enable&&(this.generator=this.getModelGenerator())},a.prototype.setRowObjects=function(e){this.rows=e},a.prototype.immutableModeRendering=function(e){var t=this;e===void 0&&(e={});var i=this.parent;i.hideSpinner();var r=i.getPrimaryKeyFieldNames()[0],n={},s={},o=[],l={},h=i.getRowsObject().slice(),p=this.getBatchEditedRecords(r,h),c={},d=Object.keys(p).length!==0;if(i.getContent().querySelector(".e-emptyrow")||e.requestType==="reorder"||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(i.currentViewData.length===0)return;var f={},g=i.createElement(me,{attrs:{role:"rowgroup"}}),m=i.currentViewData,v=[].slice.call(this.getTable().querySelector(me).children);if(this.prevCurrentView.length){var y=this.prevCurrentView.length,w=m.length;if(y===w)for(var b=0;b<w;b++){if(this.parent.editSettings.mode==="Batch"&&v[parseInt(b.toString(),10)].classList.contains("e-insertedrow")){v.splice(b,1),--b;continue}s[m[parseInt(b.toString(),10)][""+r]]=n[this.prevCurrentView[parseInt(b.toString(),10)][""+r]]=b,c[parseInt(b.toString(),10)]=m[parseInt(b.toString(),10)][""+r],f[h[parseInt(b.toString(),10)].uid]=v[parseInt(b.toString(),10)],l[parseInt(b.toString(),10)]=this.prevCurrentView[parseInt(b.toString(),10)][""+r]}else{for(var b=0;b<w;b++)s[m[parseInt(b.toString(),10)][""+r]]=b,c[parseInt(b.toString(),10)]=m[parseInt(b.toString(),10)][""+r];for(var b=0;b<y;b++){if(this.parent.editSettings.mode==="Batch"&&v[parseInt(b.toString(),10)].classList.contains("e-insertedrow")){v.splice(b,1),--b;continue}f[h[parseInt(b.toString(),10)].uid]=v[parseInt(b.toString(),10)],n[this.prevCurrentView[parseInt(b.toString(),10)][""+r]]=b,l[parseInt(b.toString(),10)]=this.prevCurrentView[parseInt(b.toString(),10)][""+r]}}}for(var b=0;b<m.length;b++){var I=n[m[parseInt(b.toString(),10)][""+r]];if(u(I)){var W=new Wi(this.serviceLocator,null,i),Z={startIndex:b},J=this.generator.generateRows([m[parseInt(b.toString(),10)]],Z);o.push(J[0]);var D=W.render(J[0],i.getColumns());g.appendChild(D),this.refreshImmutableContent(b,D,o[parseInt(b.toString(),10)])}else{var k=!1;this.parent.enableDeepCompare&&(k=this.objectEqualityChecker(this.prevCurrentView[parseInt(I.toString(),10)],m[parseInt(b.toString(),10)]));var D=f[h[parseInt(I.toString(),10)].uid];if(o.push(h[parseInt(I.toString(),10)]),this.rowElements[parseInt(I.toString(),10)]&&this.rowElements[parseInt(I.toString(),10)].getAttribute("data-uid")===o[parseInt(b.toString(),10)].uid&&(d&&u(p[c[parseInt(b.toString(),10)]])||!d&&(k||this.prevCurrentView[parseInt(I.toString(),10)]===m[parseInt(b.toString(),10)]))){I!==b&&this.refreshImmutableContent(b,D,o[parseInt(b.toString(),10)]),g.appendChild(D);continue}(d&&!u(p[c[parseInt(b.toString(),10)]])||!this.parent.enableDeepCompare&&m[parseInt(b.toString(),10)]!==this.prevCurrentView[parseInt(I.toString(),10)]||this.parent.enableDeepCompare&&!k)&&h[parseInt(I.toString(),10)].setRowValue(m[parseInt(b.toString(),10)]),g.appendChild(D),this.refreshImmutableContent(b,D,o[parseInt(b.toString(),10)])}}if(this.rows=o,this.rowElements=[].slice.call(g.children),se(this.getTable().querySelector(me)),this.getTable().appendChild(g),this.parent.trigger(Qt,{},function(){t.parent.allowTextWrap&&t.parent.notify(dr,{case:"textwrap"})}),e){var X=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(X,e)}}},a.prototype.objectEqualityChecker=function(e,t){for(var i=Object.keys(e),r=!0,n=0;n<i.length;n++)if(e[i[parseInt(n.toString(),10)]]!==t[i[parseInt(n.toString(),10)]]){var s=e[i[parseInt(n.toString(),10)]]instanceof Date&&t[i[parseInt(n.toString(),10)]]instanceof Date;if(!s||e[i[parseInt(n.toString(),10)]].getTime()!==t[i[parseInt(n.toString(),10)]].getTime()){r=!1;break}}return r},a.prototype.getBatchEditedRecords=function(e,t){var i={},r=this.parent.getBatchChanges(),n=[],s=[];Object.keys(r).length&&(n=r.changedRecords,s=r.addedRecords);var o={cancel:!1};this.parent.notify(Dd,{rows:t,args:o}),s.length&&(this.parent.editSettings.newRowPosition==="Bottom"?t.splice(t.length-1,s.length):o.cancel||t.splice(0,s.length));for(var l=0;l<n.length;l++)i[n[parseInt(l.toString(),10)][""+e]]=l;return i},a.prototype.refreshImmutableContent=function(e,t,i){i.isAltRow=this.parent.enableAltRow?e%2!==0:!1,i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),i.index=e,i.edit=void 0,i.isDirty=!1,t.setAttribute(Se,e.toString()),t.setAttribute(Ln,(e+1).toString()),this.updateCellIndex(t,e)},a.prototype.updateCellIndex=function(e,t){for(var i=0;i<e.cells.length;i++)e.cells[parseInt(i.toString(),10)].setAttribute("index",t.toString())},a}(),Yd=function(){function a(e,t){var i=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(r){var n=i.parent,s=i.draggable.currentStateTarget,o=x(s,"e-headercell");if(!(n.allowReordering||n.allowGrouping)||!u(o)&&o.getElementsByClassName("e-checkselectall").length>0)return!1;var l=i.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=s.classList.contains("e-headercell")?s:o;if(!h||!n.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var p=h.offsetHeight,c=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv"),d;if(c){if(h.querySelector(".e-stackedheadercelldiv")?d=n.getStackedHeaderColumnByHeaderText(c.innerText.trim(),n.columns):d=n.getColumnByUid(c.getAttribute("e-mappinguid")),i.column=d,i.column.lockColumn)return!1;l.setAttribute("e-mappinguid",i.column.uid)}if(d&&!u(d.headerTemplate)){if(u(d.headerTemplate))l.innerHTML=d.headerTemplate;else{var f=n.getColumnIndexByField(d.field),g=d.getHeaderTemplate()(P({index:f},d),n,"headerTemplate",null,null,null,null,n.root),m=n.isReact&&typeof d.headerTemplate!="string",v=n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isReact;(m||v)&&n.renderTemplates(),$e(l,g)}!u(l.firstChild)&&l.firstChild.nodeType===1&&(l.firstChild.style.pointerEvents="none")}else l.innerHTML=c?d.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(p-6).toString()+"px",n.element.appendChild(l),l},this.dragStart=function(r){var n=i.parent;n.element.querySelector(".e-gridpopup").style.display="none",n.notify(ms,{target:i.draggable.currentStateTarget,column:i.column,event:r.event})},this.drag=function(r){var n=i.parent,s=r.target;if(s){var o=M(s,".e-grid"),l=i.parent.element.querySelector(".e-cloneproperties");if((!o||o.getAttribute("id")!==n.element.getAttribute("id"))&&(ae(l,["e-notallowedcur"],["e-defaultcur"]),n.allowReordering&&(n.element.querySelector(".e-reorderuparrow").style.display="none",n.element.querySelector(".e-reorderdownarrow").style.display="none"),!n.groupSettings.allowReordering))return;n.notify(vs,{target:r.target,column:i.column,event:r.event})}},this.dragStop=function(r){var n=i.parent,s;n.element.querySelector(".e-gridpopup").style.display="none",(!x(r.target,"e-headercell")&&!x(r.target,"e-groupdroparea")||!n.allowReordering&&x(r.target,"e-headercell")||!r.helper.getAttribute("e-mappinguid")&&x(r.target,"e-groupdroparea"))&&(se(r.helper),s=!0),n.notify(Ya,{target:r.target,event:r.event,column:i.column,cancel:s})},this.drop=function(r){var n=i.parent,s=r.droppedElement.getAttribute("e-mappinguid"),o=M(r.target,".e-grid");se(r.droppedElement),!(o&&o.getAttribute("id")!==n.element.getAttribute("id")||!(n.allowReordering||n.allowGrouping))&&n.notify(ys,{target:r.target,uid:s,droppedElement:r.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(this.parent.enableColumnVirtualization||this.parent.on(As,this.setVisible,this),this.parent.on(Rn,this.colPosRefresh,this),this.parent.on(ci,this.renderCustomToolbar,this),this.parent.rowRenderingMode==="Vertical"&&this.parent.on(qe,this.updateCustomResponsiveToolbar,this))}return a.prototype.renderPanel=function(){var e=this.parent.element.querySelector("."+pt),t=e!=null;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});var i=t?e.querySelector("."+it):this.parent.createElement("div",{className:it});this.toggleStackClass(e),e.appendChild(i),this.setPanel(e),t||this.parent.element.appendChild(e)},a.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector("."+$t)),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(It,{rows:this.rows})},a.prototype.getPanel=function(){return this.headerPanel},a.prototype.setPanel=function(e){this.headerPanel=e},a.prototype.getTable=function(){return this.headerTable},a.prototype.setTable=function(e){this.headerTable=e},a.prototype.getColGroup=function(){return this.colgroup},a.prototype.setColGroup=function(e){return this.colgroup=e},a.prototype.getRows=function(){var e=this.getTable();return e.tHead.rows},a.prototype.createHeaderTable=function(){var e=this.createTable(),t=this.getPanel().querySelector("."+it);return t.appendChild(e),t},a.prototype.createHeader=function(e,t){var i=this.parent;this.getTable()&&se(this.getTable());var r=this.parent.createElement("table",{className:$t,attrs:{cellspacing:"0.25px",role:"presentation"}}),n=this.createHeaderContent(t),s=n.thead,o=this.parent.createElement(me,{className:this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var l=this.parent.createElement(Lt),h=this.parent.createElement("tr",{attrs:{role:"row"},className:(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"e-hide":""}),p,c=this.rows=n.rows,d=0,f=c.length;d<f;d++)for(var g=0,m=c[parseInt(d.toString(),10)].cells.length;g<m;g++)p=this.parent.createElement("td"),h.appendChild(p);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(l),o.appendChild(h),r.appendChild(this.setColGroup(l)),r.appendChild(s),r.appendChild(o),r.appendChild(this.caption),r},a.prototype.createTable=function(e){return e===void 0&&(e=null),this.createHeader(e)},a.prototype.createHeaderContent=function(e){var t=this.parent,i=t.getColumns(),r=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),n=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),s=new Wi(this.serviceLocator,Q.Header,t);s.element=n;var o=[],l;this.colDepth=qo(t.columns);for(var h=0,p=this.colDepth;h<p;h++)o[parseInt(h.toString(),10)]=this.generateRow(h),o[parseInt(h.toString(),10)].cells=[];if(o=this.ensureColumns(o),o=this.getHeaderCells(o,e),t.isRowDragable()&&this.parent.getFrozenMode()==="Right")for(var h=0,p=o.length;h<p;h++)o[parseInt(h.toString(),10)].cells.push(this.generateCell({},Q.RowDragHIcon));var c=i.filter(function(f){return f.headerTemplate});c.length&&(this.parent.isReact||this.parent.isVue)&&qn(this.parent,["headerTemplate"]);for(var h=0,p=this.colDepth;h<p;h++)l=s.render(o[parseInt(h.toString(),10)],i),this.parent.rowHeight&&l.querySelector(".e-headercell")&&(l.style.height=this.parent.rowHeight+"px"),yr(l),r.appendChild(l);var d={thead:r,rows:o};return d},a.prototype.updateColGroup=function(e){var t=this.parent.getColumns(),i,r=this.parent.getColumnIndexesInView();if(e.id=this.parent.element.id+Lt,this.parent.allowGrouping)for(var n=0,s=this.parent.groupSettings.columns.length;n<s;n++)this.parent.enableColumnVirtualization&&r.indexOf(n)===-1||(i=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(i));(this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(i)),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(i));for(var n=0,s=t.length;n<s;n++)i=this.parent.createElement("col"),t[parseInt(n.toString(),10)].visible===!1&&hi(i,{display:"none"}),e.appendChild(i);return this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(i)),e},a.prototype.ensureColumns=function(e){for(var t=this.parent,i=this.parent.getColumnIndexesInView(),r=0,n=e.length;r<n;r++){if(t.allowGrouping)for(var s=0,o=t.groupSettings.columns.length;s<o;s++)this.parent.enableColumnVirtualization&&i.indexOf(s)===-1||e[parseInt(r.toString(),10)].cells.push(this.generateCell({},Q.HeaderIndent));if(t.detailTemplate||t.childGrid){var l={};this.parent.notify(bu,l),e[parseInt(r.toString(),10)].cells.push(this.generateCell(l,Q.DetailHeader))}t.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&e[parseInt(r.toString(),10)].cells.push(this.generateCell({},Q.RowDragHIcon))}return e},a.prototype.getHeaderCells=function(e,t){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),r=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var n=0;n<(u(r)?0:r.length);n++)this.lockColsRendered=!1,e=this.appendCells(r[parseInt(n.toString(),10)],e,0,n===0,!1,n===r.length-1,i,t,!1);for(var n=0,s=u(r)?0:r.length;n<s;n++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(r[parseInt(n.toString(),10)],e,0,n===0,!1,n===s-1,i,t,!1);return e},a.prototype.appendCells=function(e,t,i,r,n,s,o,l,h){var p=s?h?"e-laststackcell":"e-lastcell":"",c=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered;if(!e.columns)c&&t[parseInt(i.toString(),10)].cells.push(this.generateCell(e,Q.Header,this.colDepth-i,(r?"":n?"e-firstcell":"")+p,i,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;else{this.isFirstCol=!1;var d=this.getCellCnt(e,0);if(d){var f=this.getStackedLockColsCount(e,0),g=this.parent.lockcolPositionCount===0||!this.lockColsRendered&&f!==0||this.lockColsRendered&&d-f!==0;g&&t[parseInt(i.toString(),10)].cells.push(new Si({cellType:Q.StackedHeader,column:e,colSpan:this.getColSpan(d,f),className:r?"":n?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var m=0;m<e.columns.length;m++)t=this.appendCells(e.columns[parseInt(m.toString(),10)],t,i+1,r,m===0,m===e.columns.length-1&&s,o,l,!1);if(this.lockColsRendered)for(var m=0,v=e.columns.length;m<v;m++){r=r&&m===0;var y=this.isFirstCol=e.columns[parseInt(m.toString(),10)].visible&&!r,w=m===v-1&&s;t=this.appendCells(e.columns[parseInt(m.toString(),10)],t,i+1,r,y&&!w,w,o,l,!0)}}return t},a.prototype.getStackedLockColsCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getStackedLockColsCount(e.columns[parseInt(i.toString(),10)],t);else e.lockColumn&&t++;return t},a.prototype.getColSpan=function(e,t){return e=this.lockColsRendered?e-t:t,e},a.prototype.generateRow=function(e){return new bi({})},a.prototype.generateCell=function(e,t,i,r,n,s){var o={visible:e.visible,isDataCell:!1,isTemplate:!u(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:i,className:r,index:n,colIndex:s};return(!o.rowSpan||o.rowSpan<2)&&delete o.rowSpan,new Si(o)},a.prototype.setVisible=function(e){for(var t=this.parent,i,r,n=0,s=e.length;n<s;n++){var o=e[parseInt(n.toString(),10)];r=t.getNormalizedColumnIndex(o.uid),i=o.visible?"":"none",hi(this.getColGroup().children[parseInt(r.toString(),10)],{display:i}),t.editSettings.showAddNewRow&&t.element.querySelector(".e-addedrow")&&hi(t.element.querySelector(".e-addedrow").querySelector("colgroup").childNodes[parseInt(r.toString(),10)],{display:i})}this.refreshUI(),this.parent.editSettings.showAddNewRow&&(this.parent.isAddNewRow=!0)},a.prototype.colPosRefresh=function(){this.refreshUI()},a.prototype.refreshUI=function(){var e=this.getPanel();this.toggleStackClass(e);var t=this.freezeReorder?this.headerPanel.querySelector("."+Bs).querySelector("."+$t):this.getTable(),i=void 0;if(t){se(t),this.parent.editSettings.showAddNewRow&&!this.parent.isAddNewRow&&t.querySelector(".e-addedrow")&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(t.querySelector(".e-addedrow").classList.add("e-addrow-removed"),this.parent.isAddNewRow=!0),t.removeChild(t.firstChild),t.removeChild(t.childNodes[0]);var r=this.parent.createElement(Lt),n=this.createHeaderContent(i);this.rows=n.rows,t.insertBefore(n.thead,t.firstChild),this.updateColGroup(r),t.insertBefore(this.setColGroup(r),t.firstChild),this.appendContent(t),this.parent.notify(cu,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),this.initializeHeaderDrag();for(var s=[].slice.call(e.querySelectorAll("tr.e-columnheader")),o=0,l=s;o<l.length;o++){var h=l[o],p=[].slice.call(h.getElementsByClassName("e-grouptopleftcell"));p.length&&p[p.length-1].classList.add("e-lastgrouptopleftcell")}this.parent.notify(It,{rows:this.rows}),this.parent.enableColumnVirtualization&&x(t,Bs)&&this.parent.notify(It,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&this.parent.textWrapSettings.wrapMode==="Header"&&zt(s,!0)}var c=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");u(c)||(c.tabIndex=0)},a.prototype.toggleStackClass=function(e){var t=this.parent.columns,i=u(t)?!1:t.some(function(r){return!u(r.columns)});i?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")},a.prototype.appendContent=function(e){this.getPanel().querySelector("."+it).appendChild(e)},a.prototype.getCellCnt=function(e,t){if(e.columns)for(var i=0,r=e.columns.length;i<r;i++)t=this.getCellCnt(e.columns[parseInt(i.toString(),10)],t);else e.visible&&t++;return t},a.prototype.initializeHeaderDrag=function(){var e=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new Rp(e.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}),this.parent.on(Ie,this.droppableDestroy,this))},a.prototype.initializeHeaderDrop=function(){var e=this.parent;this.droppable=new eu(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop}),this.parent.on(Ie,this.droppableDestroy,this)},a.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy(),this.draggable&&!this.draggable.isDestroyed&&this.draggable.destroy()},a.prototype.renderCustomToolbar=function(){var e=this,t=this.parent;if(t.rowRenderingMode==="Vertical"&&!t.toolbar&&(t.allowSorting||t.allowFiltering&&t.filterSettings.type!=="FilterBar")){for(var i=t.createElement("div",{className:"e-res-toolbar e-toolbar"}),r=t.createElement("div",{className:"e-toolbar-items"}),n=t.createElement("div",{className:"e-toolbar-left"}),s=this.parent.allowFiltering&&this.parent.allowSorting?2:1,o=0;o<s;o++){var l=t.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=s===1?this.parent.allowSorting?"sort":"filter":o===1?"sort":"filter",p=t.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),c=t.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});p.appendChild(c);var d=new zr({cssClass:this.parent.cssClass?this.parent.cssClass:""});d.appendTo(p),p.onclick=function(f){f.target.classList.contains("e-ressort-btn")||f.target.classList.contains("e-ressort-icon")||f.target.querySelector(".e-ressort-icon")?e.parent.showResponsiveCustomSort():e.parent.showResponsiveCustomFilter()},l.appendChild(p),n.appendChild(l)}r.appendChild(n),i.appendChild(r),t.element.insertBefore(i,this.parent.element.querySelector("."+pt))}else t.enableAdaptiveUI&&!t.toolbar&&t.getContent().classList.add("e-responsive-header")},a.prototype.updateCustomResponsiveToolbar=function(e){var t=this.parent.element.querySelector(".e-responsive-toolbar");e.module==="toolbar"&&(t?se(t):this.renderCustomToolbar())},a}(),xt=function(){function a(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:fe,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("SelectRow")}})}return a.prototype.getGui=function(){return""},a.prototype.format=function(e,t,i){if(!u(e.format)){if(e.type==="number"&&isNaN(parseInt(t,10))&&(t=null),e.type==="dateonly"&&typeof t=="string"&&t){var r=t.split(/[^0-9.]/);t=new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10))}t=this.formatter.toView(t,e.getFormatter())}return u(t)?"":t.toString()},a.prototype.evaluate=function(e,t,i,r,n,s){var o,l;if(t.column.template){var h=this.parent.isReact&&typeof t.column.template!="string"&&t.column.template.prototype&&!t.column.template.prototype.CSPTemplate,p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,c=["index"],d=Ys({},i,(o={},o[vu]=n,o.column=t.column,o)),f=this.parent.element.id+t.column.uid,g="isStringTemplate";if(h||p){var m={index:r[c[0]]};t.column.getColumnTemplate()(P(m,d),this.parent,"columnTemplate",f,this.parent[""+g],null,e)}else l=t.column.getColumnTemplate()(P({index:r[c[0]]},d),this.parent,"template",f,this.parent[""+g],void 0,void 0,this.parent.root);return!h&&!p&&$e(e,l),this.parent.notify("template-result",{template:l}),l=null,e.setAttribute("aria-label",e.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+t.column.headerText),!1}return!0},a.prototype.invokeFormatter=function(e,t,i){if(!u(e.formatter))if($f(e.formatter,"getValue")){var r=e.formatter;t=new r().getValue(e,i)}else typeof e.formatter=="function"?t=e.formatter(e,i):t=e.formatter.getValue(e,i);return t},a.prototype.render=function(e,t,i,r,n){return this.refreshCell(e,t,i,n)},a.prototype.refreshTD=function(e,t,i,r){var n=this.parent.editSettings.mode==="Batch"&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){var s=e.cellIndex,o=e.parentElement;se(e);var l=this.refreshCell(t,i,r,n);this.cloneAttributes(l,e),o.cells.length!==s-1?o.insertBefore(l,o.cells[parseInt(s.toString(),10)]):o.appendChild(l)}else{var h=this.refreshCell(t,i,r,n);e.innerHTML="";var p=h.getAttribute("aria-label");p&&e.setAttribute("aria-label",p);for(var c=[].slice.call(h.childNodes),d=0,f=c;d<f.length;d++){var g=f[d];e.appendChild(g)}}},a.prototype.cloneAttributes=function(e,t){for(var i=t.attributes,r=i.length,n;r--;)n=i[parseInt(r.toString(),10)],e.setAttribute(n.name,n.value)},a.prototype.refreshCell=function(e,t,i,r){var n,s=this.element.cloneNode(),o=e.column,l;e.isForeignKey&&(l=e.foreignKeyData[0]||(n={},n[o.foreignKeyValue]=o.format?null:"",n));var h=this.getGui(),p=e.isForeignKey?this.getValue(o.foreignKeyValue,l,o):this.getValue(o.field,t,o);if((o.type==="date"||o.type==="datetime")&&!u(p)&&(p=new Date(p)),o.type==="dateonly"&&!u(p)&&typeof p=="string"){var c=p.split(/[^0-9.]/);p=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))}if(p=this.format(o,p,t),h=p.toString(),o.type==="boolean"&&!o.displayAsCheckBox){var d=p!=="true"&&p!=="false"?null:p==="true"?"True":"False";h=d?this.localizer.getConstant(d):h}var f=this.invokeFormatter(o,p,t);if(h=u(o.formatter)?h:u(f)?"":f.toString(),this.evaluate(s,e,t,i,l,r)&&o.type!=="checkbox")this.appendHtml(s,this.parent.sanitize(h),o.getDomSetter?o.getDomSetter():"innerHTML");else if(o.type==="checkbox"){s.classList.add(_r),this.parent.selectionSettings.persistSelection?p=p==="true":p=!1;var g=mr(this.parent.createElement,!1,{checked:p,label:" "});this.parent.cssClass&&R([g],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+e.rowID,g.insertBefore(this.rowChkBox.cloneNode(),g.firstChild),s.appendChild(g)}if(this.parent.checkAllRows==="Check"&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(s,e,i),o.type==="boolean"&&o.displayAsCheckBox){var m=isNaN(parseInt(p.toString(),10))?p==="true":parseInt(p.toString(),10)>0,g=mr(this.parent.createElement,!1,{checked:m,label:" "});s.innerHTML="",s.classList.add("e-gridchkbox-cell"),g.classList.add("e-checkbox-disabled"),this.parent.cssClass&&R([g],[this.parent.cssClass]),s.appendChild(g)}if(s.classList.contains("e-summarycell")&&!t.key){var v=s.getAttribute("e-mappinguid");o=this.parent.getColumnByUid(v),s.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+e.column.headerText)}return this.parent.isFrozenGrid()&&(!t||t&&!t.key)&&Vn(this.parent,o,s),s},a.prototype.appendHtml=function(e,t,i){return i===void 0&&(i="innerHTML"),e[""+i]=t,e},a.prototype.setAttributes=function(e,t,i){var r=t.column;this.buildAttributeFromCell(e,t,r.type==="checkbox"),ai(e,i),ai(e,t.attributes),r.customAttributes&&ai(e,r.customAttributes),this.parent.rowRenderingMode==="Vertical"&&ai(e,{"data-cell":r.headerText}),r.textAlign&&(e.style.textAlign=r.textAlign),r.clipMode==="Clip"||!r.clipMode&&this.parent.clipMode==="Clip"?e.classList.add("e-gridclip"):(r.clipMode==="EllipsisWithTooltip"||!r.clipMode&&this.parent.clipMode==="EllipsisWithTooltip"&&!(this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Content"||this.parent.textWrapSettings.wrapMode==="Both")))&&r.type!=="checkbox"&&e.classList.add("e-ellipsistooltip")},a.prototype.buildAttributeFromCell=function(e,t,i){var r={},n={colindex:_e},s=[];t.colSpan&&(r.colSpan=t.colSpan),t.rowSpan&&(r.rowSpan=t.rowSpan),t.isTemplate&&s.push("e-templatecell"),t.isSelected&&(s.push.apply(s,["e-selectionbackground","e-active"]),i&&e.querySelector(".e-frame").classList.add("e-check")),t.isColumnSelected&&s.push.apply(s,["e-columnselection"]),t.cellType===Q.Header?(r[n.colindex]=t.colIndex,r[wl]=t.colIndex+1):u(t.index)||(r[n.colindex]=t.index,r[wl]=t.index+1),t.visible||s.push("e-hide"),r.class=s,ai(e,r)},a.prototype.getValue=function(e,t,i){return i.valueAccessor(e,t,i)},a}(),zo=function(){function a(){}return a.prototype.setOptions=function(e,t){for(var i=Object.keys(t),r=0;r<i.length;r++)tr(e,ir[i[parseInt(r.toString(),10)]],t[i[parseInt(r.toString(),10)]])},a.prototype.setExpand=function(e,t){tr(e,ir.expand,t)},a.prototype.setSort=function(e,t){tr(e,ir.sort,t,typeof t=="boolean")},a.prototype.setBusy=function(e,t){tr(e,ir.busy,t),tr(e,ir.invalid,null,!0)},a.prototype.setGrabbed=function(e,t,i){tr(e,ir.grabbed,t,i)},a.prototype.setDropTarget=function(e,t){tr(e,ir.dropeffect,"copy",!t)},a}();function tr(a,e,t,i){if(i&&a){a.removeAttribute(e);return}a&&a.setAttribute(e,t)}var ir={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},$d=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Fu=function(a){$d(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell",attrs:{tabindex:"-1",role:"columnheader"}}),t.ariaService=new zo,t.hTxtEle=t.parent.createElement("span",{className:"e-headertext"}),t.sortEle=t.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),t.gui=t.parent.createElement("div"),t.chkAllBox=t.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":t.localizer.getConstant("SelectAllCheckbox")}}),t}return e.prototype.getGui=function(){return this.gui.cloneNode()},e.prototype.render=function(t,i,r){var n=this.element.cloneNode(),s=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(t,n,s)},e.prototype.refresh=function(t,i){this.clean(i);var r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(t,i,r)},e.prototype.clean=function(t){t.innerHTML=""},e.prototype.prepareHeader=function(t,i,r){var n=t.column,s={},o="",l=this.getGui(),h;if($(l,{"e-mappinguid":n.uid,class:"e-headercelldiv"}),u(n.headerValueAccessor)||(h=this.getValue(n.headerText,n)),this.parent.allowSorting&&n.allowSorting&&!u(n.field)&&i.classList.add("e-sort-icon"),n.type!=="checkbox"){var p=n.headerText;u(h)||(p=h);var c=this.hTxtEle.cloneNode();c[n.getDomSetter()]=this.parent.sanitize(p),l.appendChild(c)}else{n.editType="booleanedit";var d=mr(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+n.uid,d.insertBefore(this.chkAllBox.cloneNode(),d.firstChild),this.parent.cssClass&&R([d],[this.parent.cssClass]),l.appendChild(d),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(i,t),this.appendHtml(i,l),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&this.parent.filterSettings.type!=="FilterBar"&&n.allowFiltering&&!u(n.field)&&!(this.parent.showColumnMenu&&n.showColumnMenu)){$(r,{"e-mappinguid":"e-flmenu-"+n.uid}),o=o.length?o+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),i.classList.add("e-fltr-icon");var f=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==f.length){for(var g=this.parent.getForeignKeyColumns(),m=0;m<this.parent.columns.length;m++)for(var v=0;v<this.parent.filterSettings.columns.length;v++)if(this.parent.filterSettings.columns[parseInt(v.toString(),10)].field===n.field||g.length&&n.foreignKeyValue===this.parent.filterSettings.columns[parseInt(v.toString(),10)].field){r.classList.add("e-filtered"),f.push(n.field);break}}i.appendChild(r.cloneNode())}t.className&&i.classList.add(t.className),n.customAttributes&&ai(i,n.customAttributes),this.parent.allowSorting&&n.allowSorting&&(s.sort="none",o=o.length?o+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&n.allowGrouping||this.parent.allowReordering&&n.allowReordering)&&(s.grabbed=!1,o=o.length?o+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&n.type!=="checkbox"&&!n.template&&(o=o.length?o+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),i=this.extendPrepareHeader(n,i);var y,w=this.parent,b=w.getColumnIndexByField(n.field);if(!u(n.headerTemplate)){var I=w.element.id+n.uid+"headerTemplate",k="isStringTemplate",D=n,W=this.parent.isReact&&typeof n.headerTemplate!="string",Z=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(W||Z){var J={index:b};i.firstElementChild.innerHTML="",n.getHeaderTemplate()(P(J,D),w,"headerTemplate",I,this.parent[""+k],null,i.firstElementChild),this.parent.renderTemplates()}else y=n.getHeaderTemplate()(P({index:b},D),w,"headerTemplate",I,this.parent[""+k],void 0,void 0,this.parent.root),i.firstElementChild.innerHTML="",$e(i.firstElementChild,y)}if(this.ariaService.setOptions(i,s),!u(n.headerTextAlign)||!u(n.textAlign)){var X=n.headerTextAlign||n.textAlign;l.style.textAlign=X,X==="Right"||X==="Left"?i.classList.add(X==="Right"?"e-rightalign":"e-leftalign"):X==="Center"&&i.classList.add("e-centeralign")}if(n.clipMode==="Clip"||!n.clipMode&&this.parent.clipMode==="Clip"?i.classList.add("e-gridclip"):(n.clipMode==="EllipsisWithTooltip"||!n.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&!(w.allowTextWrap&&(w.textWrapSettings.wrapMode==="Header"||w.textWrapSettings.wrapMode==="Both"))&&n.type!=="checkbox"&&i.classList.add("e-ellipsistooltip"),o){var L=this.parent.createElement("span",{id:"headerTitle-"+n.uid,innerHTML:o,attrs:{style:"display:none"}});i.appendChild(L),i.setAttribute("aria-describedby",L.id)}i.setAttribute("aria-rowspan",(u(t.rowSpan)?1:t.rowSpan).toString()),i.setAttribute("aria-colspan","1");var O=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if((this.parent.isReact&&this.parent.requireTemplateRef||O&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&!u(n.headerTemplate)){var F=this;F.parent.renderTemplates(function(){F.parent.trigger(Wa,{cell:t,node:i})})}else this.parent.trigger(Wa,{cell:t,node:i});return this.parent.isFrozenGrid()&&Vn(this.parent,n,i),i},e.prototype.getValue=function(t,i){return i.headerValueAccessor(t,i)},e.prototype.extendPrepareHeader=function(t,i){if(this.parent.showColumnMenu&&t.showColumnMenu&&!u(t.field)){var r=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length){for(var s=0;s<this.parent.columns.length;s++)for(var o=0;o<this.parent.filterSettings.columns.length;o++)if(this.parent.filterSettings.columns[parseInt(o.toString(),10)].field===t.field){r.classList.add("e-filtered"),n.push(t.field);break}}i.classList.add("e-fltr-icon"),i.appendChild(r)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=t.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(l)}return i},e.prototype.appendHtml=function(t,i){return t.appendChild(i),t},e}(xt),Qd=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),El=function(a){Qd(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{tabindex:"-1",role:"columnheader"}}),t}return e.prototype.render=function(t,i,r){var n=this.element.cloneNode(),s=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":t.column.uid}}),o=t.column;if(n.appendChild(s),u(o.headerTemplate)?this.appendHtml(s,this.parent.sanitize(o.headerText),o.getDomSetter()):$e(s,o.getHeaderTemplate()(o,this.parent,"headerTemplate",null,null,null,null,this.parent.root)),t.column.toolTip&&n.setAttribute("title",t.column.toolTip),o.clipMode==="Clip"||!o.clipMode&&this.parent.clipMode==="Clip"?n.classList.add("e-gridclip"):(o.clipMode==="EllipsisWithTooltip"||!o.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&n.classList.add("e-ellipsistooltip"),u(t.column.textAlign)||(s.style.textAlign=t.column.textAlign),t.column.customAttributes&&ai(n,t.column.customAttributes),n.setAttribute("colspan",t.colSpan.toString()),n.setAttribute("aria-colspan",t.colSpan.toString()),n.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var l=this.parent.createElement("div");l.className=t.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",n.appendChild(l)}if(t.className&&n.classList.add(t.className),this.parent.trigger(Wa,{cell:t,node:n}),gr(o)==="Left")if(n.classList.add("e-leftfreeze"),o.border==="Left"&&n.classList.add("e-freezeleftborder"),o.index===0)Re(n,this.parent.getIndentCount()*30,this.parent.enableRtl,"Left");else{for(var h=this.parent.getColumns(),p=this.parent.getIndentCount()*30,c=0;c<h.length&&!(o.index<h[parseInt(c.toString(),10)].index);c++)h[parseInt(c.toString(),10)].visible&&(p+=parseFloat(h[parseInt(c.toString(),10)].width.toString()));Re(n,p,this.parent.enableRtl,"Left")}else if(gr(o)==="Right"){n.classList.add("e-rightfreeze");for(var h=this.parent.getColumns(),p=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0,c=h.length-1;c>=0&&!(Vs(o,h[parseInt(c.toString(),10)].uid)||o.index>h[parseInt(c.toString(),10)].index);c--)h[parseInt(c.toString(),10)].visible&&(p+=parseFloat(h[parseInt(c.toString(),10)].width.toString()));Re(n,p,this.parent.enableRtl,"Right"),o.border==="Right"&&n.classList.add("e-freezerightborder")}else if(gr(o)==="Fixed"){n.classList.add("e-fixedfreeze");var h=this.parent.getColumns(),p=0;this.parent.getVisibleFrozenLeftCount()?p=this.parent.getIndentCount()*30:this.parent.getFrozenMode()==="Right"&&(p=this.parent.groupSettings.columns.length*30);for(var c=0;c<h.length;c++)o.index>h[parseInt(c.toString(),10)].index&&(h[parseInt(c.toString(),10)].freeze==="Left"||h[parseInt(c.toString(),10)].isFrozen||h[parseInt(c.toString(),10)].freeze==="Fixed")&&h[parseInt(c.toString(),10)].visible&&(p+=parseFloat(h[parseInt(c.toString(),10)].width.toString()));Re(n,p-1,this.parent.enableRtl,"Left"),p=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0;for(var c=h.length-1;c>=0;c--)if(o.index<h[parseInt(c.toString(),10)].index){if(Vs(o,h[parseInt(c.toString(),10)].uid)||o.index>h[parseInt(c.toString(),10)].index)break;(h[parseInt(c.toString(),10)].freeze==="Right"||h[parseInt(c.toString(),10)].freeze==="Fixed")&&h[parseInt(c.toString(),10)].visible&&(p+=parseFloat(h[parseInt(c.toString(),10)].width.toString()))}Re(n,p-1,this.parent.enableRtl,"Right")}else n.classList.add("e-unfreeze");return n},e}(xt),Jd=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),uo=function(a){Jd(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-indentcell"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();return ai(r,t.attributes),r},e}(xt),Lu=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xd=function(a){Lu(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.cellUid=0,t.element=t.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:t.parent.element.id+"captioncell",tabindex:"-1"}}),t}return e.prototype.render=function(t,i){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var r=this.element.cloneNode(),n=this.parent,s=t.column,o=s.getDomSetter?s.getDomSetter():"innerHTML",l,h,p;i.headerText=t.column.headerText,t.isForeignKey&&(h=this.format(t.column,t.column.valueAccessor("foreignKey",i,t.column)));for(var c=t.isForeignKey?h:t.column.enableGroupByFormat?i.key:this.format(t.column,t.column.valueAccessor("key",i,t.column)),d=0;d<n.aggregates.length;d++)for(var f=function(I){if(n.getVisibleColumns()[0].field===n.aggregates[parseInt(d.toString(),10)].columns[parseInt(I.toString(),10)].field&&n.aggregates[parseInt(d.toString(),10)].columns[parseInt(I.toString(),10)].groupCaptionTemplate){var k=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(I.toString(),10)].groupCaptionTemplate;if(typeof k=="string"&&k.includes("$"))p=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(I.toString(),10)].groupCaptionTemplate.split("$")[0]+i[n.getVisibleColumns()[0].field][n.aggregates[parseInt(d.toString(),10)].columns[parseInt(I.toString(),10)].type]+n.aggregates[parseInt(d.toString(),10)].columns[parseInt(I.toString(),10)].groupCaptionTemplate.split("}")[1];else{var D=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(I.toString(),10)],W=D.getTemplate(Q.CaptionSummary),Z="";if(!u(W)){var J=W.fn(i[D.columnName],g.parent,W.property,Z);g.parent.isReact&&typeof D.groupCaptionTemplate!="string"?g.parent.renderTemplates(function(){J&&J.length&&(u(n.groupSettings.captionTemplate)?r.innerText+=" "+J[0].textContent:r.appendChild(J[0]))}):J&&J.length&&(u(n.groupSettings.captionTemplate)?p=J[0].textContent:p=J)}}return"break"}},g=this,m=0;m<n.aggregates[parseInt(d.toString(),10)].columns.length;m++){var v=f(m);if(v==="break")break}if(u(n.groupSettings.captionTemplate))n.groupSettings.enableLazyLoading?r[""+o]=this.parent.sanitize(t.column.headerText)+": "+this.parent.sanitize(c)+(p?"   "+p:""):r[""+o]=this.parent.sanitize(t.column.headerText)+": "+this.parent.sanitize(c)+" - "+i.count+" "+(i.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"))+(p?"   "+p:"");else{var y=this.parent.isReact&&typeof n.groupSettings.captionTemplate!="string",w=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(y||w){var b=n.element.id+"captionTemplate";tt(n.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",b,null,null,r),this.parent.renderTemplates()}else this.parent.isVue||n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isVue?l=tt(n.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",null,null,null,null,n.root):l=tt(n.groupSettings.captionTemplate)(i);!y&&!w&&($e(r,l),p&&p.length&&p[0].textContent&&r.appendChild(p[0]))}return r.setAttribute("colspan",t.colSpan.toString()),r.setAttribute("aria-label",r.innerHTML+this.localizer.getConstant("GroupCaption")),r.setAttribute("title",r.textContent),r},e}(xt),Zd=function(a){Lu(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.innerHTML="&nbsp;",r.setAttribute("colspan",t.colSpan.toString()),r},e}(xt),ef=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),tf=function(a){ef(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.render=function(t,i,r,n){var s=this.element.cloneNode();return s.setAttribute("ej-mappingname",i.field),s.setAttribute("ej-mappingvalue",i.key),s.setAttribute("aria-expanded",n?"true":"false"),s.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?(t.cellType=Q.Indent,s.className=n?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(s.className=n?"e-recordplusexpand":"e-recordpluscollapse",s.appendChild(this.parent.createElement("a",{className:n?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"#",title:n?this.localizer.getConstant("Expanded"):this.localizer.getConstant("Collapsed")}}))),s},e}(uo),rf=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nf=function(a){rf(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-grouptopleftcell"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),r},e}(xt),sf=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),af=function(a){sf(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-detailheadercell"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),r},e}(xt),of=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),lf=function(a){of(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",tabindex:"-1"}}),t}return e.prototype.render=function(t,i,r){var n=this.element.cloneNode();return r&&!u(r.class)?(n.className="",n.className=r.class,n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"#",title:this.localizer.getConstant("Expanded")}}))):n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"#",title:this.localizer.getConstant("Collapsed")}})),t.isSelected&&n.classList.add("e-selectionbackground","e-active"),n},e}(xt),hf=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),uf=function(a){hf(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{tabindex:"-1",role:"gridcell"}}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();if(r.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),t.isSelected&&(r.classList.add("e-selectionbackground"),r.classList.add("e-active")),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;Re(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},e}(xt),pf=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),cf=function(a){pf(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-rowdragheader"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();if(r.appendChild(ge("div",{className:"e-emptycell"})),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;Re(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},e}(xt),df=function(){function a(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new Oo(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return a.prototype.render=function(){var e=this.parent;this.headerRenderer=this.renderer.getRenderer(Vt.Header),this.contentRenderer=this.renderer.getRenderer(Vt.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),this.parent.height!=="auto"&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},a.prototype.refresh=function(e){var t=this;e===void 0&&(e={requestType:"refresh"});var i=this.parent;i.notify(e.requestType+"-begin",e),i.trigger(Ae,e,function(r){if(r===void 0&&(r={requestType:"refresh"}),r.cancel){if(i.notify(Fs,r),r.action==="clearFilter"&&t.parent.filterSettings.type==="Menu"){t.parent.filterSettings.columns[t.parent.filterModule.filterObjIndex]=t.parent.filterModule.prevFilterObject;var n=t.parent.showColumnMenu&&t.parent.filterModule.column.showColumnMenu?".e-columnmenu":".e-icon-filter",s=t.parent.element.querySelector('[e-mappinguid="'+t.parent.filterModule.column.uid+'"]').parentElement,o=s.querySelector(n);u(t.parent.filterModule.prevFilterObject)||o.classList.add("e-filtered")}if(r.action==="clear-filter"&&(t.parent.filterSettings.type==="CheckBox"||t.parent.filterSettings.type==="Excel")&&(t.parent.filterSettings.columns=t.parent.filterModule.checkboxPrevFilterObject),r.requestType==="grouping"){var l=i.groupSettings.columns.indexOf(r.columnName);if(l!==-1){i.setProperties({groupSettings:{Columns:i.groupSettings.columns.splice(l,1)}},!0),i.setProperties({sortSettings:{Columns:i.sortSettings.columns.splice(l,1)}},!0);var h=i.getColumnByField(r.columnName),p=i.getColumnHeaderByField(h.field);h.visible=!u(p)&&!p.classList.contains("e-hide")}}return}if(i.allowSelection&&(r.action==="clearFilter"||r.action==="clear-filter"||r.requestType==="searching"&&r.searchString===""||r.action==="add")&&(i.selectionModule.rmtHdrChkbxClicked=!1),i.allowPaging&&i.pageSettings.pageSizes&&i.pagerModule.pagerObj.isAllPage&&r.action==="add"&&r.requestType==="save"&&i.pagerModule.pagerObj.checkAll&&i.setProperties({pageSettings:{pageSize:i.pageSettings.pageSize+1}},!0),r.requestType==="delete"&&i.allowPaging){var c=r.data.length,d=i.pageSettings.totalRecordsCount-c,f=i.getCurrentViewRecords().length;(!(f-c)&&d&&(i.pageSettings.currentPage-1)*i.pageSettings.pageSize===d||d&&d<=c)&&(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:d,currentPage:Math.ceil(d/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=d)}r.requestType==="reorder"&&t.parent.dataSource&&"result"in t.parent.dataSource||(r.requestType==="paging"||r.requestType==="columnstate"||r.requestType==="reorder")&&t.parent.groupSettings.enableLazyLoading&&t.parent.groupSettings.columns.length&&(t.parent.enableVirtualization?t.parent.lazyLoadRender:t.parent.contentModule).getGroupCache()[t.parent.pageSettings.currentPage]?t.contentRenderer.refreshContentRows(r):t.refreshDataManager(r)})},a.prototype.resetTemplates=function(){var e=this.parent,t=e.getColumns();if(e.detailTemplate){var i=e.element.id+"detailTemplate";Yo[""+i]=[],ti(i)}e.groupSettings.captionTemplate&&ti(e.element.id+"captionTemplate"),e.rowTemplate&&ti(e.element.id+"rowTemplate"),e.toolbarTemplate&&ti(e.element.id+"toolbarTemplate"),e.pageSettings.template&&ti(e.element.id+"_template");for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].template&&(Yo[e.element.id+t[parseInt(r.toString(),10)].uid]=[],ti(e.element.id+t[parseInt(r.toString(),10)].uid)),t[parseInt(r.toString(),10)].headerTemplate&&ti(e.element.id+t[parseInt(r.toString(),10)].uid+"headerTemplate"),t[parseInt(r.toString(),10)].filterTemplate&&ti(e.element.id+t[parseInt(r.toString(),10)].uid+"filterTemplate");for(var n="guid",s=0;s<e.aggregates.length;s++)for(var o=0;o<e.aggregates[parseInt(s.toString(),10)].columns.length;o++){if(e.aggregates[parseInt(s.toString(),10)].columns[parseInt(o.toString(),10)].footerTemplate){var l=e.element.id+e.aggregates[parseInt(s.toString(),10)].columns[parseInt(o.toString(),10)][""+n]+"footerTemplate";ti(l)}if(e.aggregates[parseInt(s.toString(),10)].columns[parseInt(o.toString(),10)].groupFooterTemplate){var l=e.element.id+e.aggregates[parseInt(s.toString(),10)].columns[parseInt(o.toString(),10)][""+n]+"groupFooterTemplate";ti(l)}if(e.aggregates[parseInt(s.toString(),10)].columns[parseInt(o.toString(),10)].groupCaptionTemplate){var l=e.element.id+e.aggregates[parseInt(s.toString(),10)].columns[parseInt(o.toString(),10)][""+n]+"groupCaptionTemplate";ti(l)}}},a.prototype.refreshComplete=function(e){this.parent.trigger(ce,e)},a.prototype.refreshDataManager=function(e){var t=this;e===void 0&&(e={});var i=this.parent,r=i.loadingIndicator.indicatorType==="Shimmer"&&e.requestType!=="virtualscroll"&&e.requestType!=="infiniteScroll"||(e.requestType==="virtualscroll"||e.requestType==="infiniteScroll")&&i.enableVirtualMaskRow;e.requestType!=="virtualscroll"&&!e.isCaptionCollapse&&!r&&this.parent.showSpinner(),r&&i.showMaskRow(e.requestType==="virtualscroll"?e.virtualInfo.sentinelInfo.axis:e.requestType==="infiniteScroll"?e.direction:void 0),this.parent.notify(ud,e),this.emptyGrid=!1;var n,s=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+ut),!0),s){var o=new wt;n=this.getFData(o,e)}n?n=n.then(function(c){var d=t.data.generateQuery().requiresCount();if(t.emptyGrid){var f=new wt;return f.resolve({result:[],count:0}),f.promise}return t.data.getData(e,d)}):(i.allowPaging&&!i.getDataModule().dataManager.dataSource.offline&&i.pageSettings&&i.pageSettings.pageSizes&&i.pagerModule&&i.pagerModule.pagerObj&&i.pagerModule.pagerObj.isAllPage&&(i.pagerModule.pagerObj.isAllPage=void 0),n=this.data.getData(e,this.data.generateQuery().requiresCount()));var l=this.parent.getForeignKeyColumns(),h=l.length;if(this.parent.columnQueryMode==="ExcludeHidden"&&h&&(h=l.filter(function(c){return c.visible!==!1}).length),h&&(!s||this.parent.searchSettings.key.length)){var p=new wt;n=n.then(function(c){return t.parent.notify(Ms,{dataManager:n,result:c,promise:p,action:e}),p.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(n=n.then(function(c){return t.validateGroupRecords(c)})),n.then(function(c){return t.dataManagerSuccess(c,e)}).catch(function(c){return t.dataManagerFailure(c,e)})},a.prototype.getFData=function(e,t){return this.parent.notify(Ms,{isComplex:!0,promise:e,action:t}),e.promise},a.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||!u(e.searchSettings.key)&&e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},a.prototype.foreignKey=function(e){var t=this;return e.some(function(i){var r=!1;return r=t.parent.filterSettings.columns.some(function(n){return i.uid===n.uid}),!!(r||t.parent.searchSettings.key.length)})},a.prototype.sendBulkRequest=function(e){var t=this;e.requestType="batchsave";var i=this.parent;if(i.allowPaging&&i.pageSettings.pageSizes&&i.pagerModule.pagerObj.isAllPage&&i.pagerModule.pagerObj.checkAll){var r=e.changes.addedRecords.length;r&&i.setProperties({pageSettings:{pageSize:i.pageSettings.pageSize+r}},!0)}i.allowPaging&&(e.changes.addedRecords.length||e.changes.deletedRecords.length||e.changes.changedRecords.length)&&i.pageSettings&&i.pageSettings.pageSizes&&i.pagerModule&&i.pagerModule.pagerObj&&!i.getDataModule().dataManager.dataSource.offline&&i.pagerModule.pagerObj.isAllPage&&(i.pagerModule.pagerObj.isAllPage=void 0);var n=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),s=this.data.generateQuery().requiresCount();if(this.data.dataManager.dataSource.offline){this.refreshDataManager({requestType:"batchsave"});return}else n.then(function(o){t.data.getData(e,s).then(function(l){return t.dmSuccess(l,e)}).catch(function(l){return t.dmFailure(l,e)})}).catch(function(o){return t.dmFailure(o,e)})},a.prototype.dmSuccess=function(e,t){this.dataManagerSuccess(e,t)},a.prototype.dmFailure=function(e,t){this.dataManagerFailure(e,t)},a.prototype.renderEmptyRow=function(){this.emptyRow(!0)},a.prototype.emptyRow=function(e){var t=this.parent,i=this.contentRenderer.getTable().querySelector(me);u(i)||se(i),i=this.parent.createElement(me,{attrs:{role:"rowgroup"}});var r=t.allowRowDragAndDrop&&u(t.rowDropSettings.targetID)?1:0;(t.detailTemplate||t.childGrid)&&++r;var n=t.editSettings.showAddNewRow&&t.editSettings.newRowPosition==="Bottom"?"e-emptyrow e-show-added-row":"e-emptyrow",s=this.parent.createElement("tr",{className:n,attrs:{role:"row"}}),o;if(t.emptyRecordTemplate){var l=t.element.id+"emptyRecordTemplate";o=this.parent.createElement("td",{attrs:{colspan:(t.getVisibleColumns().length+r+t.groupSettings.columns.length).toString()}}),t.isVue||t.parentDetails&&t.parentDetails.parentInstObj&&t.parentDetails.parentInstObj.isVue?o.appendChild(t.getEmptyRecordTemplate()(t.dataSource,t,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[1]):o.appendChild(t.getEmptyRecordTemplate()(t.dataSource,t,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[0]),t.isReact&&this.parent.renderTemplates()}else o=this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(t.getVisibleColumns().length+r+(u(t.groupSettings.columns)?0:t.groupSettings.columns.length)).toString()}});t.isFrozenGrid()&&(o.classList.add("e-leftfreeze"),o.style.left="0px"),t.frozenRows&&t.element.querySelector(".e-frozenrow-border")&&this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty"),s.appendChild(o),i.appendChild(s),this.contentRenderer.renderEmpty(i),e&&(this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.trigger(Qt,{}),this.parent.notify(Ci,{rows:[new bi({isDataRow:!0,cells:[new Si({isDataCell:!0,visible:!0})]})]}),t.editSettings.showAddNewRow&&(t.addRecord(),this.parent.notify(Vi,{})))},a.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},a.prototype.updateColumnType=function(e){for(var t=this.parent.getColumns(),i,r="customFormat",n="equalTo",s=e&&e.items?e.items[0]:e,o=this.locator.getService("valueFormatter"),l=0,h=t.length;l<h;l++){i=Ue(t[parseInt(l.toString(),10)].field||"",s),u(t[parseInt(l.toString(),10)][""+r])||(t[parseInt(l.toString(),10)].format=t[parseInt(l.toString(),10)][""+r]),!u(t[parseInt(l.toString(),10)].validationRules)&&!u(t[parseInt(l.toString(),10)].validationRules[""+n])&&(t[parseInt(l.toString(),10)].validationRules[""+n][0]=this.parent.element.id+t[parseInt(l.toString(),10)].validationRules[""+n][0]),t[parseInt(l.toString(),10)].isForeignColumn()&&t[parseInt(l.toString(),10)].columnData&&(i=Ue(t[parseInt(l.toString(),10)].foreignKeyValue||"",t[parseInt(l.toString(),10)].columnData[0])),u(i)?t[parseInt(l.toString(),10)].type=t[parseInt(l.toString(),10)].type||null:(this.isColTypeDef=!0,t[parseInt(l.toString(),10)].type||(t[parseInt(l.toString(),10)].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));var p=new tn;t[parseInt(l.toString(),10)].format&&(t[parseInt(l.toString(),10)].format.skeleton||t[parseInt(l.toString(),10)].format.format&&typeof t[parseInt(l.toString(),10)].format.format=="string")&&(t[parseInt(l.toString(),10)].setFormatter(p.getFormatFunction(P({},t[parseInt(l.toString(),10)].format))),t[parseInt(l.toString(),10)].setParser(p.getParserFunction(t[parseInt(l.toString(),10)].format))),typeof t[parseInt(l.toString(),10)].format=="string"?po(this.locator,t[parseInt(l.toString(),10)]):!t[parseInt(l.toString(),10)].format&&t[parseInt(l.toString(),10)].type==="number"&&t[parseInt(l.toString(),10)].setParser(o.getParserFunction({format:"n2"})),t[parseInt(l.toString(),10)].type==="dateonly"&&!t[parseInt(l.toString(),10)].format&&(t[parseInt(l.toString(),10)].format="yMd",po(this.locator,t[parseInt(l.toString(),10)]))}},a.prototype.dataManagerSuccess=function(e,t){var i=this,r=this.parent;this.contentRenderer=this.renderer.getRenderer(Vt.Content),this.headerRenderer=this.renderer.getRenderer(Vt.Header),e.actionArgs=t;var n=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!r.groupSettings.enableLazyLoading&&(t.requestType==="delete"||t.requestType==="save"&&this.parent.infiniteScrollModule.requestType==="add"&&!(r.sortSettings.columns.length||r.filterSettings.columns.length||this.parent.groupSettings.columns.length||r.searchSettings.key));r.trigger(Ds,e,function(s){if(!s.cancel){s.result=u(s.result)?[]:s.result;var o=Object.keys(s.result).length;if(!i.parent.isDestroyed){if(!r.getColumns().length&&!o&&!(r.columns.length&&r.columns[0]instanceof Xe)){r.hideSpinner();return}if(i.isInfiniteEnd(t)&&!o){i.parent.notify(gl,{e:t,result:e.result,count:e.count,agg:e.aggregates});return}if(i.parent.isEdit=!1,i.parent.notify(od,{}),i.parent.notify(vr,{}),t&&!((t.requestType==="infiniteScroll"||t.requestType==="delete"||t.action==="add")&&r.enableInfiniteScrolling)&&i.parent.notify(oo,{type:"refreshCommandColumn"}),i.contentRenderer.prevCurrentView=!u(i.parent.currentViewData)&&i.parent.currentViewData.slice(),r.currentViewData=s.result,r.notify(Td,{args:t,data:s.result}),s.count&&!r.allowPaging&&(r.enableVirtualization||r.enableInfiniteScrolling)&&(r.totalDataRecordsCount=s.count),!o&&s.count&&r.allowPaging&&t&&t.requestType!=="delete"){i.parent.groupSettings.enableLazyLoading&&(t.requestType==="grouping"||t.requestType==="ungrouping")&&i.parent.notify(kc,t),r.prevPageMoving=!0,r.pageSettings.totalRecordsCount=s.count,t.requestType!=="paging"&&(r.pageSettings.currentPage=Math.ceil(s.count/r.pageSettings.pageSize)),r.dataBind();return}if((!r.getColumns().length&&o||!i.isLayoutRendered)&&!pi(r)&&(r.removeMaskRow(),i.updatesOnInitialRender(s)),!i.isColTypeDef&&r.getCurrentViewRecords()&&(i.data.dataManager.dataSource.offline&&r.dataSource&&r.dataSource.length?i.updateColumnType(r.dataSource[0]):i.updateColumnType(r.getCurrentViewRecords()[0])),!i.parent.isInitialLoad&&i.parent.groupSettings.disablePageWiseAggregates&&!i.parent.groupSettings.columns.length&&(s.result=i.parent.dataSource instanceof Array?i.parent.dataSource:i.parent.currentViewData),(i.parent.isReact||i.parent.isVue)&&!u(t)&&t.requestType!=="infiniteScroll"&&!t.isFrozen&&qn(i.parent,["footerTemplate"]),i.parent.isAngular&&i.parent.allowGrouping&&i.parent.groupSettings.captionTemplate&&!(!u(t)&&t.requestType==="infiniteScroll")&&i.parent.destroyTemplate(["groupSettings_captionTemplate"]),i.parent.notify(Qr,P({count:s.count,result:s.result,aggregates:s.aggregates,loadSummaryOnEmpty:!1},t)),(r.groupSettings.columns.length||t&&t.requestType==="ungrouping")&&t&&t.requestType!=="filtering"&&i.headerRenderer.refreshUI(),o){if(pi(r)){var l="content";t.scrollTop={top:i.contentRenderer[""+l].scrollTop}}n?i.parent.notify(gl,{e:t,result:e.result,count:e.count,agg:e.aggregates}):i.parent.enableImmutableMode?i.contentRenderer.immutableModeRendering(t):i.contentRenderer.refreshContentRows(t)}else{if(t&&t.isCaptionCollapse)return;if(!r.getColumns().length){r.element.innerHTML="",alert(i.l10n.getConstant("EmptyDataSourceError"));return}if(i.contentRenderer.setRowElements([]),i.contentRenderer.setRowObjects([]),i.ariaService.setBusy(i.parent.getContent().querySelector("."+ut),!1),r.removeMaskRow(),i.renderEmptyRow(),r.enableColumnVirtualization&&!o&&i.parent.notify(je,{rows:r.getRowsObject(),args:{}}),t){var h=(t.requestType||"").toLowerCase()+"-complete";i.parent.notify(h,t),t.requestType==="batchsave"&&(t.cancel=!1,t.rows=[],t.isFrozen=!t.isFrozen,i.parent.trigger(ce,t))}i.parent.autoFit&&i.parent.preventAdjustColumns(),i.parent.hideSpinner()}i.parent.notify(Qi,{}),i.setRowCount(i.parent.getCurrentViewRecords().length),"query"in e&&(i.parent.getDataModule().isQueryInvokedFromData=!1)}}})},a.prototype.dataManagerFailure=function(e,t){u(this.parent.contentModule)||(this.ariaService.setOptions(this.parent.getContent().querySelector("."+ut),{busy:!1,invalid:!0}),this.setRowCount(1)),this.parent.trigger(Ao,{error:e}),this.parent.hideSpinner(),this.parent.removeMaskRow(),!(t.requestType==="save"||t.requestType==="delete"||t.name==="bulk-save")&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:e}))},a.prototype.setRowCount=function(e){this.ariaService.setOptions(this.parent.element,{rowcount:e?e.toString():"1"})},a.prototype.isInfiniteEnd=function(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&e.requestType==="delete"},a.prototype.updatesOnInitialRender=function(e){this.isLayoutRendered=!0;var t=!1;this.parent.columns.length<1&&(this.buildColumns(e.result[0]),t=!0),On(this.parent.columns,null,this.parent),t&&this.parent.notify(ho,{}),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(Jr,{})},a.prototype.iterateComplexColumns=function(e,t,i){for(var r=Object.keys(e),n=0;n<r.length;n++){var s=typeof e[r[parseInt(n.toString(),10)]]=="object"&&e[r[parseInt(n.toString(),10)]]&&!(e[r[parseInt(n.toString(),10)]]instanceof Date)?Object.keys(e[r[parseInt(n.toString(),10)]]):[];s.length?this.iterateComplexColumns(e[r[parseInt(n.toString(),10)]],t+(r[parseInt(n.toString(),10)]+"."),i):(i[this.counter]=t+r[parseInt(n.toString(),10)],this.counter++)}},a.prototype.buildColumns=function(e){var t=[],i={};this.iterateComplexColumns(e,"",i);for(var r=Object.keys(i).filter(function(o){return i[""+o]!=="BlazId"}).map(function(o){return i[""+o]}),n=0,s=r.length;n<s;n++)t[parseInt(n.toString(),10)]={field:r[parseInt(n.toString(),10)]},this.parent.enableColumnVirtualization&&(t[parseInt(n.toString(),10)].width=u(t[parseInt(n.toString(),10)].width)?200:t[parseInt(n.toString(),10)].width);this.parent.setProperties({columns:t},!0)},a.prototype.instantiateRenderer=function(){this.renderer.addRenderer(Vt.Header,new Yd(this.parent,this.locator)),this.renderer.addRenderer(Vt.Content,new Kd(this.parent,this.locator));var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(Q.Header,new Fu(this.parent,this.locator)),e.addCellRenderer(Q.Data,new xt(this.parent,this.locator)),e.addCellRenderer(Q.StackedHeader,new El(this.parent,this.locator)),e.addCellRenderer(Q.Indent,new uo(this.parent,this.locator)),e.addCellRenderer(Q.GroupCaption,new Xd(this.parent,this.locator)),e.addCellRenderer(Q.GroupCaptionEmpty,new Zd(this.parent,this.locator)),e.addCellRenderer(Q.Expand,new tf(this.parent,this.locator)),e.addCellRenderer(Q.HeaderIndent,new nf(this.parent,this.locator)),e.addCellRenderer(Q.StackedHeader,new El(this.parent,this.locator)),e.addCellRenderer(Q.DetailHeader,new af(this.parent,this.locator)),e.addCellRenderer(Q.RowDragHIcon,new cf(this.parent,this.locator)),e.addCellRenderer(Q.DetailExpand,new lf(this.parent,this.locator)),e.addCellRenderer(Q.DetailFooterIntent,new uo(this.parent,this.locator)),e.addCellRenderer(Q.RowDragIcon,new uf(this.parent,this.locator))},a.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on(To,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(qt,this.refresh,this),this.parent.on(Mc,this.refreshComplete,this),this.parent.on(fu,this.sendBulkRequest,this),this.parent.on(mu,function(){e.emptyGrid=!0},this),this.parent.on(Jr,this.dynamicColumnChange,this))},a.prototype.validateGroupRecords=function(e){var t=this,i=e.result.length-1;if(i<0)return Promise.resolve(e);var r=e.result[0],n=e.result[parseInt(i.toString(),10)],s=[],o=function(v){for(var y=[r,n],w=0;w<y.length;w++)s.push(new pe("field","==",y[parseInt(w.toString(),10)].field).and(t.getPredicate("key","equal",y[parseInt(w.toString(),10)].key)));v.where(pe.or(s))},l=new re;o(l);var h=new q(e.result),p=h.executeLocal(l),c=this.data.generateQuery(!0),d=[];if(this.data.isRemote()){for(var f=[r,n],g=0;g<f.length;g++)d.push(this.getPredicate(f[parseInt(g.toString(),10)].field,"equal",f[parseInt(g.toString(),10)].key));c.where(pe.or(d))}else o(c);var m=new wt;return this.data.getData({},c).then(function(v){t.updateGroupInfo(p,v.result),m.resolve(e)}).catch(function(v){return m.reject(v)}),m.promise},a.prototype.getPredicate=function(e,t,i){return i instanceof Date?Ji({field:e,operator:t,value:i}):new pe(e,t,i)},a.prototype.updateGroupInfo=function(e,t){for(var i=new q(t),r=e,n=0;n<r.length;n++){var s=i.executeLocal(new re().where(new pe("field","==",r[parseInt(n.toString(),10)].field).and(this.getPredicate("key","equal",r[parseInt(n.toString(),10)].key))))[0];if(!u(s)){r[parseInt(n.toString(),10)].count=s.count;var o=r[parseInt(n.toString(),10)].items,l=s.items;o.GroupGuid&&(r[parseInt(n.toString(),10)].items=this.updateGroupInfo(r[parseInt(n.toString(),10)].items,s.items));for(var h=this.parent.aggregates,p=0;p<h.length;p++)for(var c=h[parseInt(p.toString(),10)],d=0;d<c.columns.length;d++)for(var f=c.columns[parseInt(d.toString(),10)],g=f.type instanceof Array?f.type:[f.type],m=0;m<g.length;m++){var v=f.field+" - "+g[parseInt(m.toString(),10)].toLowerCase(),y=o.level?l.records:s.items,w=this.parent;if(g[parseInt(m.toString(),10)]==="Custom"){var b=o.level?l:s,I=f.customAggregate;typeof I=="string"&&(I=j(I,window)),r[parseInt(n.toString(),10)].aggregates[""+v]=I?I.call(w,b,c.columns[parseInt(d.toString(),10)]):""}else r[parseInt(n.toString(),10)].aggregates[""+v]=A.aggregates[g[parseInt(m.toString(),10)].toLowerCase()](y,c.columns[parseInt(d.toString(),10)].field)}}}return e},a}(),ff=function(){function a(){this.cellRenderMap={}}return a.prototype.addCellRenderer=function(e,t){e=typeof e=="string"?e:yi(Q,e),u(this.cellRenderMap[""+e])&&(this.cellRenderMap[""+e]=t)},a.prototype.getCellRenderer=function(e){if(e=typeof e=="string"?e:yi(Q,e),u(this.cellRenderMap[""+e]))throw"The cellRenderer "+e+" is not found";return this.cellRenderMap[""+e]},a}(),Ou=function(){function a(e,t){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.evtHandlers=[{event:_s,handler:this.closeCustomDialog},{event:Li,handler:this.refreshCustomFilterOkBtn},{event:ao,handler:this.renderResponsiveContextMenu},{event:wu,handler:this.renderCustomFilterDiv},{event:Iu,handler:this.customExFilterClose},{event:Su,handler:this.refreshCustomFilterClearBtn}],ct(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(ce,this.onActionCompleteFn)},a.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},a.prototype.renderCustomFilterDiv=function(){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),t=e.querySelector(".e-dlg-custom-header"),i=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",t.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var r=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),r.appendChild(this.customExcelFilterParent)},a.prototype.renderResponsiveContextMenu=function(e){if(this.action===oe.isFilter){var t=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),r=i.querySelector(".e-dlg-closeicon-btn"),n=i.querySelector(".e-dlg-custom-header");if(e.isOpen){t.firstChild.style.display="none",t.appendChild(e.target),r.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=e.header;var s=this.parent.createElement("button"),o=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});s.appendChild(o),this.backBtn=new zr({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(s),n.parentElement.insertBefore(s,n)}else this.backBtn&&!this.isCustomDlgRender&&(t.firstChild.style.display="",se(this.backBtn.element),r.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:oe.isFilter},e.col))}},a.prototype.refreshCustomFilterClearBtn=function(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")},a.prototype.refreshCustomFilterOkBtn=function(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled),this.parent.columnChooserModule&&this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn&&(this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled=e.disabled)},a.prototype.columnMenuResponsiveContent=function(e,t,i){var r=this.parent.createElement("div",{className:"e-responsivecoldiv e-responsive"+e.toLowerCase()+"div"+(i?" e-disabled":"")}),n=this.parent.createElement("span",{className:"e-icons e-res"+e.toLowerCase()+"-icon e-btn-icon"}),s=this.parent.createElement("span",{innerHTML:t,className:"e-rescolumn-menu e-res-header-text"});r.appendChild(n),r.appendChild(s),this.customColumnDiv.appendChild(r)},a.prototype.renderResponsiveContent=function(e,t){var i=this,r=this.parent,n=this.action===oe.isColumnChooser;if(e||n)return this.filterParent=this.parent.createElement("div",{className:(n?"e-maincolumnchooserdiv ":"")+"e-mainfilterdiv e-default-filter",id:(n?"columchooser":e.uid)+"-main-filter"}),this.filterParent;if(this.customColumnDiv=r.createElement("div",{className:"columndiv columnmenudiv",styles:"width: 100%"}),this.parent.showColumnMenu&&this.parent.rowRenderingMode==="Horizontal"&&this.action===oe.isColMenu){if(this.columnMenuResponsiveContent("AutoFitAll",r.localeObj.getConstant("AutoFitAll")),this.columnMenuResponsiveContent("AutoFit",r.localeObj.getConstant("AutoFit")),t.allowGrouping&&r.allowGrouping&&(this.columnMenuResponsiveContent("Group",r.localeObj.getConstant("Group"),r.groupSettings.columns.indexOf(t.field)>=0),this.columnMenuResponsiveContent("UnGroup",r.localeObj.getConstant("Ungroup"),r.groupSettings.columns.indexOf(t.field)<0)),t.allowSorting&&r.allowSorting){for(var s="None",o=this.parent.sortSettings.columns,l=0;l<o.length;l++)if(o[parseInt(l.toString(),10)].field===t.field){s=o[parseInt(l.toString(),10)].direction;break}this.columnMenuResponsiveContent("ascending",r.localeObj.getConstant("SortAscending"),s==="Ascending"),this.columnMenuResponsiveContent("descending",r.localeObj.getConstant("SortDescending"),s==="Descending")}r.showColumnChooser&&this.columnMenuResponsiveContent("Column",r.localeObj.getConstant("Columnchooser")),t.allowFiltering&&r.allowFiltering&&this.columnMenuResponsiveContent("Filter",r.localeObj.getConstant("FilterMenu"))}else{var h=r.getColumns(),p=r.createElement("div",{className:"e-ressortbutton-parent"}),c=[],d=this.action===oe.isSort,f=this.action===oe.isFilter;if(f)for(var l=0;l<r.filterSettings.columns.length;l++)c.push(r.filterSettings.columns[parseInt(l.toString(),10)].field);for(var l=0;l<h.length;l++)if(!(!h[parseInt(l.toString(),10)].visible||!h[parseInt(l.toString(),10)].allowSorting&&d||!h[parseInt(l.toString(),10)].allowFiltering&&f)){var g=r.createElement("div",{className:"e-responsivecoldiv"});g.setAttribute("data-e-mappingname",h[parseInt(l.toString(),10)].field),g.setAttribute("data-e-mappinguid",h[parseInt(l.toString(),10)].uid);var m=r.createElement("span",{innerHTML:h[parseInt(l.toString(),10)].headerText,className:"e-res-header-text"});if(g.appendChild(m),this.customColumnDiv.appendChild(g),d){var v=this.getSortedFieldsAndDirections("field"),y=v.indexOf(h[parseInt(l.toString(),10)].field),w=r.createElement("button",{id:r.element.id+h[parseInt(l.toString(),10)].field+"sortbutton"}),b=p.cloneNode();b.appendChild(w),g.appendChild(b);var I=new zr({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"});I.appendTo(w);var k=void 0;u(this.parent.sortSettings.columns[parseInt(y.toString(),10)])||(k=this.parent.sortSettings.columns[parseInt(y.toString(),10)].direction==="Ascending"?this.parent.localeObj.getConstant("AscendingText"):this.parent.localeObj.getConstant("DescendingText")),w.innerHTML=y>-1?k:this.parent.localeObj.getConstant("NoneText"),w.onclick=function(J){i.sortButtonClickHandler(J.target)}}if(f&&c.indexOf(h[parseInt(l.toString(),10)].field)>-1){var D=r.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),W=r.createElement("span",{className:"e-icons e-res-icon e-filterset"});W.setAttribute("colType",h[parseInt(l.toString(),10)].type),D.appendChild(W),g.appendChild(D)}}}return S.add(this.customColumnDiv,T.isDevice?"touchend":"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},a.prototype.getSortedFieldsAndDirections=function(e){for(var t=[],i=0;i<this.parent.sortSettings.columns.length;i++)t.push(this.parent.sortSettings.columns[parseInt(i.toString(),10)][""+e]);return t},a.prototype.sortButtonClickHandler=function(e){if(e){var t=x(e,"e-responsivecoldiv"),i=t.getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));var r=e.textContent,n=r===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):r===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),s=n===this.parent.localeObj.getConstant("AscendingText")?"Ascending":n===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";e.innerHTML=n,this.setSortedCols(i,s)}},a.prototype.resetSortButtons=function(e){for(var t=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)]!==e&&(t[parseInt(i.toString(),10)].innerHTML="None")},a.prototype.setSortedCols=function(e,t){var i=this.getCurrentSortedFields(),r=i.indexOf(e);this.parent.allowMultiSorting&&r>-1&&(this.sortedCols.splice(r,1),this.sortPredicate.splice(r,1)),this.isSortApplied=!0,t!=="None"&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:t}))},a.prototype.getCurrentSortedFields=function(){for(var e=[],t=0;t<this.sortedCols.length;t++)e.push(this.sortedCols[parseInt(t.toString(),10)]);return e},a.prototype.customFilterColumnClickHandler=function(e){var t=this.parent,i=e.target;if(x(i,"columnmenudiv")&&this.action===oe.isColMenu&&!x(i,"e-disabled")){var r=this.menuCol?this.menuCol:this.filteredCol;x(i,"e-responsiveautofitalldiv")?(t.autoFitColumns([]),this.closeCustomFilter()):x(i,"e-responsiveautofitdiv")?(t.autoFitColumns(r.field),this.closeCustomFilter()):x(i,"e-responsivegroupdiv")?(t.groupColumn(r.field),this.closeCustomFilter()):x(i,"e-responsiveungroupdiv")?(t.ungroupColumn(r.field),this.closeCustomFilter()):x(i,"e-responsiveascendingdiv")?(t.sortColumn(r.field,"Ascending"),this.closeCustomFilter()):x(i,"e-responsivedescendingdiv")?(t.sortColumn(r.field,"Descending"),this.closeCustomFilter()):x(i,"e-responsivecolumndiv")?(t.notify(Ni,{action:5}),t.showResponsiveCustomColumnChooser()):x(i,"e-responsivefilterdiv")&&(t.notify(Ni,{action:3}),this.isRowResponsive=!0,this.isCustomDialog=!1,t.filterModule&&t.filterModule.responsiveDialogRenderer.showResponsiveDialog(r)),e.preventDefault()}if(this.action===oe.isFilter&&t.filterSettings.type!=="FilterBar"){if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){var n=i.getAttribute("data-e-mappingname");if(n||(n=i.parentElement.getAttribute("data-e-mappingname")),n){var s=t.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(s)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){var o=x(i,"e-responsivecoldiv");if(o){var n=o.getAttribute("data-e-mappingname"),s=t.getColumnByField(n);(s.filter.type==="Menu"||!s.filter.type&&t.filterSettings.type==="Menu")&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(s),this.removeCustomDlgFilterEle(i)}}}},a.prototype.showResponsiveDialog=function(e,t){if(this.isCustomDialog&&this.action===oe.isFilter&&!this.isRowResponsive||t&&this.action===oe.isColMenu)this.menuCol=t,this.renderCustomFilterDialog(null,t);else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===oe.isColumnChooser&&this.parent.notify(In,{action:"open"}),this.action===oe.isSort){var i={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(rl,i),i.cancel)return}if(this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element),this.parent.enableAdaptiveUI&&this.parent.filterSettings&&(this.parent.filterSettings.type==="CheckBox"||this.parent.filterSettings.type==="Excel")&&this.parent.filterSettings.enableInfiniteScrolling&&this.parent.filterSettings.loadingIndicator==="Shimmer"){var r=this.parent.filterSettings.type==="CheckBox"?this.parent.filterModule.filterModule.checkBoxBase:this.parent.filterModule.filterModule.excelFilterBase;r.showMask()}}},a.prototype.setTopToChildDialog=function(e){var t=e.querySelector(".e-dialog");if(t){var i=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;t.style.top=i+"px"}},a.prototype.renderCustomFilterDialog=function(e,t){var i=this.parent,r=this.action===oe.isColMenu;if(!(this.action===oe.isFilter&&i.filterSettings.type==="FilterBar")){var n=r?"e-customcolumnmenudiv ":"",s=this.parent.createElement("div",{id:i.element.id+(r?"customcolumnmenu":"customfilter"),className:this.parent.cssClass?n+"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:n+"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(s),this.customFilterDlg=this.getDialogOptions(e,!0,null,t);var o={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(rl,o),!o.cancel&&(this.customFilterDlg.appendTo(s),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},a.prototype.getDialogOptions=function(e,t,i,r){var n=new Cr({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e,r),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""}),s="isStringTemplate";if(n[""+s]=!0,t){n.header=this.renderResponsiveHeader(e,void 0,!0);var o=this.action===oe.isColMenu?"e-customcolumnmenu ":"";n.cssClass=o+"e-customfilter"}else n.header=this.renderResponsiveHeader(e),n.cssClass=this.parent.rowRenderingMode==="Vertical"&&this.action===oe.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i;return n},a.prototype.renderResponsiveDialog=function(e){var t=this.parent;if(!(this.action===oe.isFilter&&t.filterSettings.type==="FilterBar")){var i=this.action===oe.isFilter?"filter":"sort";i=this.action===oe.isColumnChooser?"columnchooser":i;var r=this.parent.createElement("div",{id:t.element.id+"responsive"+i,className:this.parent.cssClass?"e-res"+i+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(r),this.customResponsiveDlg=this.getDialogOptions(e,!1,i),this.customResponsiveDlg.appendTo(r)}},a.prototype.dialogCreated=function(){Xu(this.parent)},a.prototype.dialogOpen=function(){if(this.action===oe.isSort&&this.parent.allowMultiSorting)for(var e=0;e<this.parent.sortSettings.columns.length;e++){this.sortedCols.push(this.parent.sortSettings.columns[parseInt(e.toString(),10)].field);var t=this.parent.sortSettings.columns[parseInt(e.toString(),10)].field,i=this.parent.sortSettings.columns[parseInt(e.toString(),10)].direction;this.sortPredicate.push({field:t,direction:i})}},a.prototype.beforeDialogClose=function(e){if(this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===oe.isFilter){if(e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter(),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu){this.parent.notify(Ni,{action:4});var t=document.querySelector(".e-resfilter");t&&se(t)}}else if(this.action===oe.isSort)this.closeCustomDialog();else if(this.action===oe.isColMenu){this.closeCustomFilter();var t=document.querySelector(".e-rescolummenu");t&&se(t)}else if(this.action===oe.isColumnChooser){this.parent.notify(In,{action:"clear"});var t=document.querySelector(".e-rescolumnchooser");t&&se(t),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu&&this.parent.notify(Ni,{action:4}),this.isCustomDialog=!1,this.isDialogClose=!1}this.parent.off(Cs,this.keyHandler)},a.prototype.sortColumn=function(){if(!this.isSortApplied){this.closeCustomDialog();return}this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[parseInt(e.toString(),10)].field,this.sortPredicate[parseInt(e.toString(),10)].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()},a.prototype.getHeaderTitle=function(e,t){var i=this.parent,r;return this.action===oe.isEdit?r=i.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===oe.isAdd?r=i.localeObj.getConstant("AddFormTitle"):this.action===oe.isFilter?r=t?t.headerText||t.field:i.localeObj.getConstant("FilterButton"):this.action===oe.isSort?r=i.localeObj.getConstant("Sort"):this.action===oe.isColMenu?r=i.localeObj.getConstant("ColumnMenu"):this.action===oe.isColumnChooser&&(r=i.localeObj.getConstant("ChooseColumns")),r},a.prototype.getDialogName=function(e){var t;return e===oe.isAdd||e===oe.isEdit?t="dialogEdit_wrapper_title":e===oe.isFilter?t="responsive_filter_dialog_wrapper":e===oe.isColumnChooser&&(t="responsive_column_chooser_dialog_wrapper"),t},a.prototype.getButtonText=function(e){var t;return e===oe.isAdd||e===oe.isEdit?t="Save":(e===oe.isFilter||this.action===oe.isSort||e===oe.isColumnChooser||this.action===oe.isColumnChooser)&&(t="OKButton"),t},a.prototype.renderResponsiveHeader=function(e,t,i){var r=this,n=this.parent;n.on(Cs,this.keyHandler,this);var s=n.element.id+this.getDialogName(this.action),o=n.createElement("div",{className:"e-res-custom-element"}),l=n.createElement("div",{className:"e-dlg-custom-header",id:s});l.innerHTML=this.getHeaderTitle(t,e),o.appendChild(l);var h=n.createElement("button");i||(this.saveBtn=new zr({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),h.innerHTML=n.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(h),h.onclick=function(m){r.dialogHdrBtnClickHandler()});var p=this.action===oe.isSort,c=this.action===oe.isFilter;if(c||p){var d=p?"sort":"filter",f=n.createElement("button");if(this.filterClearBtn=new zr({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+d+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+d+"-clear-btn"}),c){var g=n.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});f.appendChild(g)}else f.innerHTML=n.localeObj.getConstant("Clear");o.appendChild(f),this.filterClearBtn.appendTo(f),f.onclick=function(m){x(m.target,"e-customfilter")?(r.parent.filterModule.clearFiltering(),r.removeCustomDlgFilterEle()):c?r.filterClear():(r.resetSortButtons(),r.sortedCols=[],r.sortPredicate=[],r.isSortApplied=!0)},o.appendChild(f)}return i||o.appendChild(h),o},a.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},a.prototype.removeCustomFilterElement=function(){var e=document.getElementById(this.parent.element.id+"customcolumnmenu");if(e){se(e);var t=document.querySelector(".e-customfilter");t&&se(t)}var i=document.querySelector(".e-rescolumnchooser");i&&se(i)},a.prototype.dialogHdrBtnClickHandler=function(){this.action===oe.isEdit||this.action===oe.isAdd?this.parent.endEdit():this.action===oe.isFilter?(this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}),this.removeCustomFilterElement()):this.action===oe.isSort?(this.sortColumn(),this.removeCustomFilterElement()):this.action===oe.isColumnChooser&&(this.parent.notify(In,{action:"confirm"}),this.removeCustomFilterElement(),this.isCustomDialog=!1,this.isDialogClose=!1)},a.prototype.closeCustomDialog=function(){if(this.isCustomDlgRender){var e=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");se(e);return}this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()},a.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),se(e)),this.closeCustomFilter(),this.action===oe.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},a.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),se(e))}this.isCustomDialog=!1,this.isDialogClose=!1},a.prototype.removeCustomDlgFilterEle=function(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?se(e.parentElement):se(e);else for(var t=this.customColumnDiv.children,i=0;i<t.length;i++)e=t[parseInt(i.toString(),10)].querySelector(".e-filtersetdiv"),e&&(se(e),i--)},a.prototype.keyHandler=function(e){e.keyCode===13&&(this.action===oe.isFilter&&e.target.classList.contains("e-searchinput")||this.action===oe.isEdit||this.action===oe.isAdd)&&this.dialogHdrBtnClickHandler()},a.prototype.editComplate=function(e){(e.requestType==="save"||e.requestType==="cancel")&&this.parent.off(Cs,this.keyHandler)},a.prototype.removeEventListener=function(){this.customColumnDiv&&S.remove(this.customColumnDiv,T.isDevice?"touchend":"click",this.customFilterColumnClickHandler),ct(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(ce,this.onActionCompleteFn)},a}(),gf=function(){function a(){this.services={}}return a.prototype.register=function(e,t){u(this.services[""+e])&&(this.services[""+e]=t)},a.prototype.getService=function(e){if(u(this.services[""+e]))throw"The service "+e+" is not registered";return this.services[""+e]},a.prototype.registerAdaptiveService=function(e,t,i){t?(e.responsiveDialogRenderer=new Ou(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=i):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)},a}(),mf=function(){function a(){this.rendererMap={}}return a.prototype.addRenderer=function(e,t){var i=yi(Vt,e);u(this.rendererMap[""+i])&&(this.rendererMap[""+i]=t)},a.prototype.getRenderer=function(e){var t=yi(Vt,e);if(u(this.rendererMap[""+t]))throw"The renderer "+t+" is not found";return this.rendererMap[""+t]},a}(),Ks=function(){function a(e){this.parent=e}return a.prototype.setWidthToColumns=function(){var e=0,t=this.parent.getColumnIndexesInView(),i=!0,r=0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;e<n;e++){if(this.parent.enableColumnVirtualization&&t.indexOf(e)===-1){i=!1;continue}this.setColumnWidth(new Xe({width:"30px"}),e)}(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new Xe({width:"30px"}),e),e++),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(this.setColumnWidth(new Xe({width:"30px"}),e),e++);for(var s=this.parent.getColumns(),o=0;o<s.length;o++)this.setColumnWidth(s[parseInt(o.toString(),10)],i&&this.parent.enableColumnVirtualization?void 0:o+e);if(this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&this.setColumnWidth(new Xe({width:"30px"}),this.parent.groupSettings.columns.length+s.length),r=this.getTableWidth(this.parent.getColumns()),r!=="auto"){this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&this.setMinwidthBycalculation(r);var l=s.filter(function(h){return!u(h.maxWidth)});this.parent.allowResizing&&this.parent.element.getBoundingClientRect().width>r&&l.length===s.length&&R([this.parent.getHeaderTable(),this.parent.getContentTable()],["e-tableborder"])}},a.prototype.setMinwidthBycalculation=function(e){var t=this,i=0,r=this.parent.getColumns().filter(function(c){return t.parent.allowResizing?(u(c.width)||c.width==="auto")&&u(c.maxWidth):u(c.width)||c.width==="auto"});if(r.length){!u(this.parent.width)&&this.parent.width!=="auto"&&typeof this.parent.width=="string"&&this.parent.width.indexOf("%")===-1?i=parseInt(this.parent.width,10)-e:i=this.parent.element.getBoundingClientRect().width-e;for(var n=0,s=0,o=r;s<o.length;s++){var l=o[s];n+=u(l.minWidth)?0:typeof l.minWidth=="string"?parseInt(l.minWidth,10):l.minWidth}for(var h=0;h<r.length;h++){e===0&&this.parent.allowResizing&&this.isWidthUndefined()&&h!==r.length-1&&this.setUndefinedColumnWidth(r);var p=this.parent.getColumnIndexByField(r[parseInt(h.toString(),10)].field)+this.parent.getIndentCount();e!==0&&i<n?this.setWidth(r[parseInt(h.toString(),10)].minWidth,p):e!==0&&i>n&&this.setWidth("",p,!0)}}},a.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[parseInt(t.toString(),10)].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[parseInt(t.toString(),10)].field)))},a.prototype.setColumnWidth=function(e,t,i){if(!(this.parent.getColumns().length<1)){var r=u(t)?this.parent.getNormalizedColumnIndex(e.uid):t,n=this.getWidth(e),s=this.getTableWidth(this.parent.getColumns());n!==null&&(this.setWidth(n,r),this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&s!=="auto"&&this.setMinwidthBycalculation(s),(this.parent.allowResizing&&i==="resize"||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(du,{index:r,width:n,column:e,module:i}))}},a.prototype.setWidth=function(e,t,i){if(this.parent.groupSettings.columns.length>t&&go(this.parent)){var r=this.parent.element.offsetWidth;e=(30/r*100).toFixed(1)+"%"}var n=this.parent.getHeaderTable(),s=this.parent.getContentTable(),o=Le(e),l=n.querySelector(Lt).children[parseInt(t.toString(),10)];l&&!i?l.style.width=o:l&&i&&(l.style.width="");var h=s.querySelector(Lt).children[parseInt(t.toString(),10)];if(h&&!i?h.style.width=o:h&&i&&(h.style.width=""),!this.parent.enableColumnVirtualization&&this.parent.isEdit){for(var p=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),c=[],d=0;d<p.length;d++)if(x(p[parseInt(d.toString(),10)],"e-grid").id===this.parent.element.id)for(var f=0;f<p[parseInt(d.toString(),10)].querySelector("colgroup").children.length;f++)c.push(p[parseInt(d.toString(),10)].querySelector("colgroup").children[parseInt(f.toString(),10)]);p.length&&c.length&&c[parseInt(t.toString(),10)]&&(c[parseInt(t.toString(),10)].style.width=o)}this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.refreshFrozenScrollbar()},a.prototype.refreshFrozenScrollbar=function(){var e={cancel:!1};if(this.parent.notify(Rd,e),!e.cancel){var t=Dt(),i=this.parent.element.querySelector(".e-movablescrollbar"),r=this.parent.getContent().firstElementChild.getBoundingClientRect().width;if(this.parent.enableColumnVirtualization){var n=this.parent.getContent().querySelector(".e-virtualtrack");n&&(r=n.scrollWidth)}this.parent.height!=="auto"&&(r=r+t),i.firstElementChild.style.width=r+"px"}},a.prototype.getSiblingsHeight=function(e){var t=this.getHeightFromDirection(e,"previous"),i=this.getHeightFromDirection(e,"next");return t+i},a.prototype.getHeightFromDirection=function(e,t){for(var i=e[t+"ElementSibling"],r=0,n=[pt,xn,"e-groupdroparea","e-gridpager","e-toolbar","e-temp-toolbar"];i;)n.some(function(s){return i.classList.contains(s)})&&(r+=i.offsetHeight),i=i[t+"ElementSibling"];return r},a.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter(function(t){return u(t.width)&&u(t.minWidth)}).length;return this.parent.getColumns().length===e},a.prototype.getWidth=function(e){if(this.parent.allowResizing&&u(e.width)&&(u(e.minWidth)&&u(e.maxWidth)&&!this.isWidthUndefined()?e.width=200:e.maxWidth&&(e.width=e.maxWidth)),!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&(t<parseInt(e.minWidth.toString(),10)||e.width==="auto"&&u(e.maxWidth))?e.minWidth:e.maxWidth&&(e.width==="auto"||t>parseInt(e.maxWidth.toString(),10))?e.maxWidth:e.width},a.prototype.getTableWidth=function(e){for(var t=0,i=!1,r=0,n=e;r<n.length;r++){var s=n[r];if(s.visible!==!1){var o=this.getWidth(s);(s.width==="auto"||!s.width)&&(this.parent.allowResizing?s.maxWidth||(i=!0):o=0),o!==null&&(t+=parseInt(o.toString(),10))}}return t=i?"auto":t,t},a.prototype.setWidthToTable=function(e){var t=Le(this.getTableWidth(this.parent.getColumns()));(this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new Xe({width:"30px"})),t=this.isAutoResize()||t==="auto"||e?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t;var i=this.parent.element.querySelector(".e-table.e-inline-edit");i&&(i.style.width=t)},a.prototype.isAutoResize=function(){return this.parent.allowResizing&&this.parent.resizeSettings.mode==="Auto"},a}(),vf=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yf=function(){function a(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.virtualSelectionInfo={},this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.firstHeaderCellClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.groupedFrozenRow=0,this.parent=e,this.rowModelGen=new rn(this.parent),this.addEventListener()}return a.prototype.focusCheck=function(e){var t=e.target;this.focusByClick=!0,this.firstHeaderCellClick=!0,this.skipFocus=t.classList.contains("e-grid")},a.prototype.onFocus=function(e){if(!(this.parent.isDestroyed||T.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&e&&e.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&this.parent.frozenRows===0),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&(this.parent.editSettings.mode!=="Batch"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[Zr].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new bi({isDataRow:!0})]}),this.getContent().selector,!1);var t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.skipFocus&&!(e&&e.target===this.parent.element)&&(this.focus(e),this.skipFocus=!1)}},a.prototype.passiveFocus=function(e){if(!this.parent.isDestroyed){var t=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(e.target===t&&e.relatedTarget&&!x(e.relatedTarget,"e-grid")&&!this.firstHeaderCellClick){var i=[0,0];this.active.matrix.matrix[i[0]][i[1]]===0&&(i=si(this.active.matrix.matrix,i,!0)),this.active.matrix.current=i,this.currentInfo.element=e.target,this.currentInfo.elementToFocus=e.target,R([this.currentInfo.element],["e-focused","e-focus"])}this.firstHeaderCellClick=!1,e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,R([this.currentInfo.element],["e-focused","e-focus"]))}},a.prototype.onBlur=function(e){this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");var t=!!(x(e.target,"e-gantt")&&e.target.classList.contains("e-rowcell")&&!u(e.target.nextElementSibling)&&e.target.nextElementSibling.classList.contains("e-rowcell"));(this.parent.isEdit||e&&(!e.relatedTarget||M(e.relatedTarget,".e-grid"))&&!(this.parent.element.classList.contains("e-childgrid")&&!this.parent.element.matches(":focus-within")))&&!(!t&&u(e.relatedTarget)&&parseInt(e.target.getAttribute("data-colindex"),10)===0&&parseInt(e.target.getAttribute("index"),10)===0)&&!(!t&&u(e.relatedTarget)&&!M(document.activeElement,".e-grid")&&!u(e.sourceCapabilities))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex(),this.firstHeaderCellClick=!1)},a.prototype.setFirstFocusableTabIndex=function(){var e=this.parent;if(e.element.tabIndex=-1,e.allowGrouping&&e.groupSettings.showDropArea){var t=e.groupModule,i=t.getFocusableGroupedItems();i.length>0?(t.element.tabIndex=-1,i[0].tabIndex=0):t.element.tabIndex=0;return}if(e.toolbar||e.toolbarTemplate){var r=e.toolbarModule.element,n=this.parent.toolbarModule.getFocusableToolbarItems();n.length>0&&n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input")?(r.tabIndex=-1,n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex=0):r.tabIndex=0;return}if(e.getColumns().length){var s=e.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(s.tabIndex=0,this.setActive(!1),!u(this.active)&&(u(this.active.target)||!this.active.target.classList.contains("e-columnmenu"))){var o=[0,0];this.active.matrix.matrix[o[0]][o[1]]===0&&(o=si(this.active.matrix.matrix,o,!0)),this.active.matrix.current=o}return}},a.prototype.setLastContentCellTabIndex=function(){var e=this.parent.getContentTable();if(e.rows[e.rows.length-1]){var t=e.rows[e.rows.length-1].lastElementChild;t.tabIndex=0}},a.prototype.onClick=function(e,t){if(!(x(e.target,"e-filterbarcell")&&(x(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon")))){var i=!u(M(e.target,"."+ot)),r=!u(M(e.target,"."+pt));if(i=i&&r?!i:i,!(!i&&u(M(e.target,"."+pt))||e.target.classList.contains(ut)||!u(M(e.target,".e-unboundcell"))&&!t)){this.setActive(i);var n={cancel:!1,byKey:!1,byClick:!u(e.target),clickArgs:e};if(this.parent.notify(ks,n),!(n.cancel||M(e.target,".e-inline-edit")&&!this.parent.editSettings.showAddNewRow&&this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))&&(this.setActive(i),this.getContent())){var s=this.getContent().onClick(e,t);if(s===!1)return;this.focus(),this.currentInfo.element.classList.contains("e-rowcell")&&e.type&&e.type==="click"&&R([this.currentInfo.element],["e-focused","e-focus"])}}}},a.prototype.handleFilterNavigation=function(e,t,i){e.target===document.querySelector(t)&&e.key==="Tab"&&e.shiftKey?(e.preventDefault(),document.querySelector(i).focus()):e.target===document.querySelector(i)&&e.key==="Tab"&&!e.shiftKey&&document.activeElement===document.querySelector(i)&&(e.preventDefault(),document.querySelector(t).focus())},a.prototype.onKeyPress=function(e){if(this.parent.allowPaging){var t=this.parent.pagerModule.pagerObj.element,i=this.parent.pagerModule.pagerObj.getFocusablePagerElements(t,[]);if(this.parent.childGrid&&!x(e.target,"e-gridpager")&&this.allowToPaging(e)&&i.length&&(i[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if(e.action==="shiftTab"&&i.length&&i[0]===e.target){this.setActive(!0);var r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[r[0]][r[1]]===0&&(r=si(this.active.matrix.matrix,r,!1)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(r)?r:this.findBatchEditCell(r,!1):r,e.preventDefault(),this.focus(e);return}if(e.action==="tab"&&this.parent.element.classList.contains("e-childgrid")&&(!this.parent.pageSettings.pageSizes&&i.length&&i[i.length-1]===e.target||this.parent.pagerModule.pagerObj.getDropDownPage()===e.target)){var n=x(this.parent.element,"e-detailcell");N([this.parent.element],["e-focus"]),N([n],["e-focused"]),n.tabIndex=-1}else{this.parent.pagerModule.pagerObj.changePagerFocus(e);return}}if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&(e.keyCode===38||e.shiftKey&&e.keyCode===9)){e.preventDefault(),this.focus(e);return}else if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&e.keyCode===9){e.preventDefault(),this.parent.pagerModule.pagerObj.setPagerFocus();return}if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var s=this.getContent().matrix.rows,o=this.getContent().matrix.columns;this.getContent().matrix.current=[s,o]}}if(this.parent.filterSettings.type==="Excel"&&this.handleFilterNavigation(e,".e-excelfilter .e-menu-item:not(.e-disabled)",".e-excelfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="CheckBox"&&this.handleFilterNavigation(e,".e-searchinput.e-input",".e-checkboxfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="Menu"&&this.handleFilterNavigation(e,".e-flmenu .e-input-group.e-popup-flmenu",".e-flmenu .e-footer-content button:nth-child(2)"),!this.skipOn(e)){if(e.target&&x(e.target,"e-gridcontent")){var l=[].slice.call(this.parent.getContentTable().rows),h=l[l.length-1].lastElementChild;e.target===h&&(this.setActive(!0),this.setLastContentCellActive())}if(e.action==="shiftTab"&&e.target&&(e.target===this.parent.element||x(e.target,"e-toolbar")||x(e.target,"e-groupdroparea"))){if(e.target===this.parent.element){this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e);return}if(x(e.target,"e-groupdroparea")){this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus());return}if(x(e.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var p=this.parent.groupModule,c=p.getFocusableGroupedItems();e.preventDefault(),c.length>0?c[c.length-1].focus():p.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus());return}}var d=!1;if(e.action==="tab"&&e.target&&(e.target===this.parent.element||x(e.target,"e-toolbar")||x(e.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(e.target===this.parent.element||e.target.classList.contains("e-groupdroparea"))){var p=this.parent.groupModule,c=p.getFocusableGroupedItems();if(c.length>0){e.preventDefault(),c[0].focus();return}if(!e.target.classList.contains("e-groupdroparea")){e.preventDefault(),p.element.focus();return}}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(e.target===this.parent.element||x(e.target,"e-groupdroparea")||e.target.classList.contains("e-toolbar"))){var f=this.parent.toolbarModule.element,g=this.parent.toolbarModule.getFocusableToolbarItems();if(g.length>0){e.preventDefault(),g[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();return}if(!e.target.classList.contains("e-toolbar")){e.preventDefault(),f.focus();return}}(e.target===this.parent.element||x(e.target,"e-toolbar")||x(e.target,"e-groupdroparea"))&&(d=!0)}d&&(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length?this.setActive(!0):this.setActive(!1),this.active.matrix.current=[0,-1]),this.activeKey=e.action;var m={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(ks,m),!m.cancel){var v=this.getContent().matrix.current,y=this.active&&this.active.matrix.current?[this.active.matrix.current[0],this.active.matrix.current[1]]:void 0;this.currentInfo.outline=!0;var w=this.getContent().jump(e.action,v);this.swap=w,w.swap&&!(this.parent.editSettings.mode==="Batch"&&(e.action==="tab"||e.action==="shiftTab"))&&(this.setActive(!w.toHeader),this.getContent().matrix.current=this.getContent().getNextCurrent(v,w,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent());var b=this.content.lastIdxCell?!1:this.getContent().onKeyPress(e);if(e.target&&x(e.target,"e-gridheader")){if(e.action==="tab"&&v.toString()===this.active.matrix.current.toString()){var I=si(this.active.matrix.matrix,this.active.matrix.current,!0),r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];if(this.active.matrix.matrix[r[0]][r[1]]===0&&(r=si(this.active.matrix.matrix,r,!1)),this.active.matrix.current.toString()===r.toString()&&this.content.matrix.matrix.length){b=!0,this.setActive(!0);var k=[0,0];this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").setAttribute("aria-hidden","true"),this.active.matrix.matrix[k[0]][k[1]]===0&&(k=si(this.active.matrix.matrix,[0,0],!0)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(k)?k:this.findBatchEditCell(k,!0):k}else this.active.matrix.current.toString()!==I.toString()&&(this.active.matrix.current=I)}if(e.action==="shiftTab"&&v.toString()===this.active.matrix.current.toString()){var D=si(this.active.matrix.matrix,this.active.matrix.current,!1);if(D.toString()===this.active.matrix.current.toString()){this.focusOutFromHeader(e);return}this.active.matrix.current.toString()!==D.toString()&&!b&&(b=!0,this.active.matrix.current=D)}}if(e.target&&x(e.target,"e-gridcontent")&&(this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden"),this.parent.editSettings.mode==="Batch"&&(e.action==="tab"||e.action==="shiftTab")&&(this.active.matrix.current=this.findBatchEditCell(y,e.action==="tab"),e.action==="tab"&&y.toString()===this.active.matrix.current.toString()&&(this.parent.editModule.editModule.addBatchRow=!0)),e.action==="shiftTab"&&v.toString()===this.active.matrix.current.toString())){if(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length){this.focusOutFromHeader(e);return}var k=[0,0];this.active.matrix.matrix[k[0]][k[1]]===0&&(k=si(this.active.matrix.matrix,[0,0],!0)),!b&&(k.toString()===this.active.matrix.current.toString()||this.parent.editSettings.mode==="Batch"&&y.toString()===this.active.matrix.current.toString())&&(b=!0,this.setActive(!1),this.setLastContentCellActive())}if(b===!1){if(this.clearIndicator(),e.action==="shiftTab"&&v.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(e)&&v.toString()!==[0,0].toString()){if(e.preventDefault(),e.keyCode===40){this.parent.pagerModule.pagerObj.setPagerContainerFocus();return}else if(e.keyCode===9){this.parent.pagerModule.pagerObj.setPagerFocus();return}}this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e);return}e.preventDefault(),this.focus(e)}}},a.prototype.isValidBatchEditCell=function(e){var t=this.active.getTable().rows[e[0]].cells[e[1]],i=M(t,"tr"),r=parseInt(t.getAttribute("data-colindex"),10),n=this.parent.getColumns()[parseInt(r.toString(),10)];return!!(this.active.matrix.matrix[e[0]][e[1]]===1&&(!i.classList.contains("e-row")||(i.classList.contains("e-insertedrow")||!n.isPrimaryKey)&&n.allowEditing))},a.prototype.findBatchEditCell=function(e,t,i){for(var r=e,n=e,s=!1;!s;){var o=n;if(n=si(this.active.matrix.matrix,n,t),o.toString()===n.toString()||i&&o[0]!==n[0]){s=!0;continue}this.isValidBatchEditCell(n)&&(r=n,s=!0)}return r},a.prototype.setLastContentCellActive=function(){var e=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[e[0]][e[1]]===0&&(e=si(this.active.matrix.matrix,e,!1)),this.active.matrix.current=e},a.prototype.focusOutFromChildGrid=function(e){var t=x(this.parent.element,"e-table"),i=x(t,"e-grid").ej2_instances[0],r=x(this.parent.element,"e-detailcell"),n=x(this.parent.element,"e-detailrow").getAttribute("data-uid"),s=[].slice.call(i.getContentTable().rows),o=s.map(function(d){return d.getAttribute("data-uid")}).indexOf(n);if(!(e.action==="tab"&&o>=s.length-1)){N([this.parent.element],["e-focus"]),N([r],["e-focused"]),r.tabIndex=-1,e.preventDefault();var l;if(i.focusModule.removeFocus(),e.action==="shiftTab"){for(var h=s[o-1],p=h.cells,c=p.length-1;c>=0;c--)if(l=p[parseInt(c.toString(),10)],!l.classList.contains("e-hide")){i.focusModule.active.matrix.current=[o-1,c];break}}else l=s[o+1].cells[0],i.focusModule.active.matrix.current=[o+1,0];i.focusModule.currentInfo.element=l,i.focusModule.currentInfo.elementToFocus=l,R([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},a.prototype.focusOutFromHeader=function(e){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var t=this.parent.toolbarModule.element,i=this.parent.toolbarModule.getFocusableToolbarItems();e.preventDefault(),i.length>0?i[i.length-1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus():t.focus();return}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var r=this.parent.groupModule,n=r.getFocusableGroupedItems();e.preventDefault(),n.length>0?n[n.length-1].focus():r.element.focus();return}this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus())},a.prototype.allowToPaging=function(e){return!(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&e.keyCode!==40)},a.prototype.skipOn=function(e){var t=e.target;if(!t)return!1;if(!this.parent.isEdit&&t&&t.closest(".e-unboundcell")&&this.currentInfo.skipAction&&(e.action==="shiftTab"&&this.commandColumnFocusElement(t.closest(".e-unboundcell"),!1)===t||e.action==="tab"&&this.commandColumnFocusElement(t.closest(".e-unboundcell"),!0)===t))return this.currentInfo.skipAction=!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var i=this.parent.groupModule.getFocusableGroupedItems();if(x(e.target,"e-groupheadercell")&&!(e.target===i[0]&&e.action==="shiftTab"||e.target===i[i.length-1]&&e.action==="tab"))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var r=this.parent.toolbarModule.element,n=r.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(x(e.target,"e-toolbar-item")&&!(n.length>0&&(x(e.target,"e-toolbar-item")===n[0]&&e.action==="shiftTab"||x(e.target,"e-toolbar-item")===n[n.length-1]&&e.action==="tab")))return!0}var s=M(t,"th")&&!M(t,"th").tabIndex;if(e.target.classList.contains("e-filterbaroperator")&&(e.keyCode===13||e.keyCode===27)){var o=M(e.target,".e-filterbarcell");o.querySelector("input").focus()}var l=this.parent.editSettings.showAddNewRow&&M(document.activeElement,".e-addedrow")!==null;(s&&M(document.activeElement,".e-filterbarcell")!==null||l)&&this.removeFocus();var h=M(document.activeElement,".e-filterbarcell")!==null;if(this.parent.enableHeaderFocus&&h){var p=this.active.matrix,c=p.current;h=p.matrix[c[0]].lastIndexOf(1)!==c[1]}if(this.parent.isEdit&&(e.action==="tab"||e.action==="shiftTab")&&this.parent.editSettings.mode==="Normal"&&!this.parent.editSettings.showAddNewRow&&!u(x(t,"e-addedrow"))){var d=this.parent.editModule.formObj.element.querySelectorAll("input.e-field:not(.e-disabled),button:not(.e-hide)"),o=t.classList.contains("e-ddl")?t.querySelector("input"):t,f=e.action==="tab"&&o===d[d.length-1],g=e.action==="shiftTab"&&o===d[0];if(f||g){e.preventDefault();var m=d[f?0:d.length-1];m=m.parentElement.classList.contains("e-ddl")?m.parentElement:m,m.focus()}}return e.action==="delete"||this.parent.editSettings.mode!=="Batch"&&(this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&(!u(this.parent.element.querySelector(".e-editedrow"))||!u(x(t,"e-addedrow"))&&!u(M(e.target,"input"))&&!u(document.querySelector(".e-popup-open"))||!u(x(t,"e-addedrow"))&&t&&!t.querySelector(".e-cancel-icon")&&!u(x(t,"e-unboundcell"))))||["insert","f2"].indexOf(e.action)>-1)||h&&this.parent.enableHeaderFocus||(h||l)&&e.action!=="tab"&&e.action!=="shiftTab"||M(document.activeElement,"#"+this.parent.element.id+"_searchbar")!==null&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||M(t,"."+ot)===null&&M(t,"."+pt)===null&&!(e.target===this.parent.element||x(e.target,"e-toolbar")||x(e.target,"e-groupdroparea"))||e.action==="space"&&!t.classList.contains(_r)&&M(t,"."+_r)===null&&M(t,".e-headerchkcelldiv")===null||M(t,".e-filter-popup")!==null},a.prototype.focusVirtualElement=function(e){var t=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var i={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(io,i);var r=this.actions.some(function(s){return s===t.activeKey}),n=this.parent.contentModule?this.parent.contentModule.selectedRowIndex>-1:!1;i.isAdd||Object.keys(i.virtualData).length||r||i.isCancel||n?(this.parent.notify(Ld,{isCancel:!1}),i.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,r&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},a.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},a.prototype.getContent=function(){return this.active||this.content},a.prototype.setActive=function(e){this.active=e?this.content:this.header},a.prototype.setFocusedElement=function(e,t){var i=this;this.currentInfo.elementToFocus=e,setTimeout(function(){u(i.currentInfo.elementToFocus)||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling?i.focusVirtualElement(t):(u(i.parent.element.querySelector(".e-flmenu"))||x(document.activeElement,"e-flmenu-valuediv")!==i.parent.element.querySelector(".e-flmenu-valuediv"))&&i.currentInfo.elementToFocus.focus())},0)},a.prototype.focus=function(e){this.parent.notify(id,e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},a.prototype.removeFocus=function(e){if(this.currentInfo.element){if(this.parent.isReact&&!this.parent.isEdit&&this.currentInfo.element.classList.contains("e-rowcell")&&!this.currentInfo.element.parentElement&&!(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length)&&this.parent.getRowByIndex(this.prevIndexes.rowIndex)){var t=this.parent.getCellFromIndex(this.prevIndexes.rowIndex,this.prevIndexes.cellIndex);this.currentInfo.element=t||this.currentInfo.element}N([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1}},a.prototype.addOutline=function(){var e=this.getContent().getFocusInfo();e.element&&(R([e.element],["e-focused"]),R([e.elementToFocus],["e-focus"]))},a.prototype.focusHeader=function(){this.setActive(!1),this.resetFocus()},a.prototype.focusContent=function(){this.setActive(!0),this.resetFocus()},a.prototype.resetFocus=function(){var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()},a.prototype.addFocus=function(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&(!u(t)||this.isVirtualScroll),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!!e.element){var i=e.elementToFocus.classList.contains("e-focus");if(!i){this.currentInfo.outline&&R([e.element],["e-focused"]),R([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,i||this.setFocusedElement(e.elementToFocus,t),this.parent.notify(Rs,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!u(t),byClick:u(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!u(t),swapInfo:this.swap});var r=this.getContent().matrix.current,n=r[0],s=r[1];this.prevIndexes={rowIndex:n,cellIndex:s},this.focusedColumnUid=this.parent.getColumnByIndex(s).uid,this.focusByClick=!1}}},a.prototype.refreshMatrix=function(e){var t=this;return function(i){e&&!t.content&&(t.content=new Bu(t.parent)),!e&&!t.header&&(t.header=new bf(t.parent));var r=e?t.content:t.header,n=t.parent.frozenRows,s=0;if(n&&t.parent.editSettings.mode==="Batch"&&(s=t.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length+t.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length),!u(t.parent.groupSettings.columns)&&t.parent.groupSettings.columns.length&&n&&e){n=0;for(var o=0;o<i.rows.length&&(n++,i.rows[parseInt(o.toString(),10)].index+1!==t.parent.frozenRows);o++);t.groupedFrozenRow=n}var l=e?i.rows.slice(n+s):i.rows,h=e?i.rows.slice(0,n+s):i.rows;t.parent.isCollapseStateEnabled()&&e&&(l=l.filter(function(W){return W.visible!==!1}));var p=!u(t.parent.rowTemplate);if(n&&(t.parent.editSettings.mode==="Batch"&&e&&(i.name==="batchDelete"||i.name==="batchAdd"||i.name==="batchCancel"||i.args&&i.args.requestType==="batchsave")||i.args&&(i.args.requestType==="delete"||i.args.requestType==="save"))){var c=t.header.matrix.matrix,d=t.parent.headerModule.rows.length;c.splice(d,c.length-d)}var f=r.matrix.generate(h,r.selector,p);r.matrix.generate(l,r.selector,p);var g=t.parent.enableVirtualization||t.parent.enableInfiniteScrolling;if(t.parent.editSettings.showAddNewRow&&e&&t.header&&t.header.matrix&&(!g||g&&t.parent.isAddNewRow)){var m=t.header.matrix.matrix,v=t.parent.allowFiltering&&t.parent.filterSettings.type==="FilterBar"?2:1;r.matrix.rows=t.parent.frozenRows&&t.parent.editSettings.newRowPosition==="Top"?r.matrix.rows:++r.matrix.rows,t.parent.editSettings.newRowPosition==="Top"?(t.parent.frozenRows||g?f:r.matrix.matrix).unshift(t.refreshAddNewRowMatrix(m[m.length-v])):r.matrix.matrix.push(t.refreshAddNewRowMatrix(m[m.length-v])),t.parent.isAddNewRow=!1}if((!(t.parent.isFrozenGrid()&&i.args&&(i.args.requestType==="sorting"||i.args.requestType==="batchsave"||i.args.requestType==="paging"))||n&&t.parent.editSettings.mode==="Batch"&&e&&(i.name==="batchDelete"||i.name==="batchAdd"||i.name==="batchCancel"||i.args.requestType==="batchsave"))&&r.generateRows(h,{matrix:f,handlerInstance:t.header}),!T.isDevice&&i&&i.args&&(!t.focusByClick&&i.args.requestType==="paging"&&!t.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(t.skipFocus=!1,t.parent.element.focus()),i.args.requestType==="grouping"&&(t.skipFocus=!0)),i&&i.args&&i.args.requestType==="virtualscroll"){if(t.currentInfo.uid){var y,w=i.rows.some(function(W,Z){return y=Z,W.uid===t.currentInfo.uid});if(w){t.content.matrix.current[0]=y,t.content.matrix.current[1]=t.parent.getColumnIndexByUid(t.focusedColumnUid)||0;var b=!!(t.parent.allowGrouping&&t.parent.groupSettings.columns.length);b&&(t.content.matrix.current[1]=t.prevIndexes.cellIndex,t.virtualSelectionInfo.isPending&&(t.content.matrix.current[0]=t.virtualSelectionInfo.direction==="downArrow"?t.content.matrix.current[0]+1:t.content.matrix.current[0]-1));var I=t.getContent().getFocusInfo().elementToFocus;if(I){var k=I.getBoundingClientRect(),D=t.parent.element.getBoundingClientRect();(k.top>=0&&k.left>=0&&k.right<=Math.min(D.right,window.innerWidth||document.documentElement.clientWidth)&&k.bottom<=Math.min(D.bottom,window.innerHeight||document.documentElement.clientHeight)||b)&&(t.isVirtualScroll=!0,t.focus(b&&t.virtualSelectionInfo.isPending?t.virtualSelectionInfo.event:void 0))}}}else if(i.args.focusElement&&i.args.focusElement.classList.contains("e-filtertext")){var I=t.parent.element.querySelector("#"+i.args.focusElement.id);I&&I.focus()}t.virtualSelectionInfo={}}i&&i.args&&i.args.requestType==="infiniteScroll"&&(t.isInfiniteScroll=!0)}},a.prototype.refreshAddNewRowMatrix=function(e){for(var t=this.parent.getColumns(),i=this.parent.getIndentCount(),r=i;r<e.length-1;r++)t[r-i]&&t[r-i].visible&&t[r-i].allowEditing?e[parseInt(r.toString(),10)]=1:e[parseInt(r.toString(),10)]=0;return e},a.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(S.add(this.parent.element,"mousedown",this.focusCheck,this),S.add(this.parent.element,"touchstart",this.focusCheck,this),S.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(t){return e.passiveFocus(t)},!0),S.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:at,handler:this.onKeyPress},{event:Ut,handler:this.onClick},{event:je,handler:this.refMatrix},{event:Cu,handler:this.refMatrix},{event:xu,handler:this.refMatrix},{event:Vi,handler:this.showAddNewRowFocus},{event:It,handler:this.refreshMatrix()},{event:Du,handler:this.restoreFocus},{event:zn,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"custom-filter-close",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:ja,handler:this.refMatrix},{event:Hr,handler:this.refMatrix},{event:Ua,handler:this.refMatrix},{event:ac,handler:this.refMatrix},{event:Ci,handler:this.refMatrix},{event:Rs,handler:this.internalCellFocus}],ct(this.parent,this.evtHandlers,!0,this))},a.prototype.showAddNewRowFocus=function(){if(this.parent.editSettings.showAddNewRow){var e=this.parent.editSettings.newRowPosition==="Top"?0:this.content.matrix.matrix.length-1,t=this.parent.getIndentCount();if(this.parent.editSettings.newRowPosition==="Top"&&(this.parent.frozenRows||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var i=this.header.matrix.matrix.length-(this.groupedFrozenRow?this.groupedFrozenRow:this.parent.frozenRows);t=this.findNextCellFocus(this.header.matrix.matrix[i-1],t),this.header.matrix.current=[i-1,t],this.active=this.header}else t=this.findNextCellFocus(this.content.matrix.matrix[parseInt(e.toString(),10)],t),this.content.matrix.current=[e,t],this.active=this.content;var r=this.parent.element.querySelector(".e-addedrow");r&&r.querySelectorAll("tr")&&r.querySelector("tr").cells[parseInt(t.toString(),10)].querySelector("input")&&r.querySelector("tr").cells[parseInt(t.toString(),10)].querySelector("input").select()}},a.prototype.findNextCellFocus=function(e,t){for(var i=t;i<e.length;i++)if(e[parseInt(i.toString(),10)]===1)return i;return t},a.prototype.filterfocus=function(){this.parent.filterSettings.type!=="FilterBar"&&this.restoreFocus()},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(S.remove(this.parent.element,"mousedown",this.focusCheck),S.remove(this.parent.element,"touchstart",this.focusCheck),S.remove(this.parent.element,"focus",this.onFocus),S.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),ct(this.parent,this.evtHandlers,!1))},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.restoreFocus=function(){var e=this.parent.groupModule;if(this.parent.allowGrouping&&e&&(e.groupSortFocus||e.groupTextFocus)){e.groupSortFocus=!1,e.groupTextFocus=!1;return}this.firstHeaderCellClick=!0,this.addFocus(this.getContent().getFocusInfo())},a.prototype.restoreFocusWithAction=function(e){if(!this.parent.enableInfiniteScrolling){var t=this.getContent().matrix,i=t.current;switch(e.requestType){case"grouping":case"ungrouping":i[1]=i.length&&!this.parent.groupSettings.showGroupedColumn&&!u(t.matrix[i[0]])?t.matrix[i[0]].indexOf(1):e.requestType==="grouping"?i[1]+1:i[1]-1;break}this.getContent().matrix.current=i,this.prevIndexes={rowIndex:i[0],cellIndex:i[1]};var r=this.parent.groupModule;if(this.parent.allowGrouping&&r&&r.groupCancelFocus){var n=r.getFocusableGroupedItems();n.length?n[0].parentElement.getAttribute("ej-mappingname")===e.columnName?n[3].focus():n[0].focus():r.element.focus(),r.groupCancelFocus=!1;return}this.addFocus(this.getContent().getFocusInfo())}},a.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||N([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},a.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},a.prototype.forgetPrevious=function(){this.forget=!0},a.prototype.setActiveByKey=function(e,t){if(this.parent.frozenRows!==0){var i,r={home:function(){return{toHeader:!i.isContent,toFrozen:!0}},end:function(){return{toHeader:!i.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:!1}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(e in r){i=t.getInfo();var n=r[""+e]();this.setActive(!n.toHeader),this.getContent().matrix.current=t.matrix.current}}},a.prototype.internalCellFocus=function(e){if(e.byKey&&e.container.isContent&&(e.keyArgs.action==="enter"&&e.parent.classList.contains("e-detailcell")||(e.keyArgs.action==="tab"||e.keyArgs.action==="shiftTab")&&e.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var t;e.parent&&e.parent.closest(".e-unboundcell")&&e.keyArgs.action==="shiftTab"?t=this.commandColumnFocusElement(e.parent,!0):t=this.getContent().getFocusable(this.getFocusedElement()),this.setFocusedElement(t),this.currentInfo.skipAction=!0}},a.prototype.commandColumnFocusElement=function(e,t){var i=e.querySelectorAll("button:not(.e-hide)");return t?i[i.length-1]:i[0]},a}(),Cf=function(){function a(){this.matrix=[],this.current=[]}return a.prototype.set=function(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[parseInt(e.toString(),10)]=this.matrix[parseInt(e.toString(),10)]||[],this.matrix[parseInt(e.toString(),10)][parseInt(t.toString(),10)]=i?1:0},a.prototype.get=function(e,t,i,r,n){var s=t;if(e+i[0]<0)return[e,t];e=Math.max(0,Math.min(e+i[0],this.rows));var o=!0;if(u(this.matrix[parseInt(e.toString(),10)]))return null;if(t=Math.max(0,Math.min(t+i[1],this.matrix[parseInt(e.toString(),10)].length-1)),s+i[1]>this.matrix[parseInt(e.toString(),10)].length-1&&n(e,t,r))return[e,s];var l=this.first(this.matrix[parseInt(e.toString(),10)],t,i,!0,r);t=l===null?s:l;var h=j(e+"."+t,this.matrix);if(e===this.rows&&(r==="downArrow"||r==="enter")&&(i[0]=-1),l===null){for(var p=0;p<this.rows;p++)if(this.matrix[parseInt(p.toString(),10)].some(function(c){return c===1})){o=!1;break}if(o)return e=this.current.length?this.current[0]:0,[e,t]}return this.inValid(h)||!n(e,t,r)?this.get(e,s,i,r,n):[e,t]},a.prototype.first=function(e,t,i,r,n){return(t<0||t===e.length)&&this.inValid(e[parseInt(t.toString(),10)])&&n!=="upArrow"&&n!=="downArrow"||!e.some(function(s){return s===1})?null:this.inValid(e[parseInt(t.toString(),10)])?this.first(e,["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)!==-1?r?0:++t:t+i[1],i,!1,n):t},a.prototype.select=function(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[parseInt(e.toString(),10)].length-1)),this.current=[e,t]},a.prototype.generate=function(e,t,i){this.rows=e.length-1,this.matrix=[];for(var r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)].cells.filter(function(l){return l.isSpanned!==!0});this.columns=Math.max(n.length-1,this.columns|0);for(var s=0,o=0;o<n.length;o++)n[parseInt(o.toString(),10)].column&&n[parseInt(o.toString(),10)].column.columns?s=this.columnsCount(n[parseInt(o.toString(),10)].column.columns,s):s++,this.set(r,o,e[parseInt(r.toString(),10)].visible===!1?!1:t(e[parseInt(r.toString(),10)],n[parseInt(o.toString(),10)],i));this.columns=Math.max(s-1,this.columns|0)}return this.matrix},a.prototype.columnsCount=function(e,t){for(var i=e,r=t,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].columns?r=this.columnsCount(i[parseInt(n.toString(),10)].columns,r):r++;return r},a.prototype.inValid=function(e){return e===0||e===void 0},a}(),Bu=function(){function a(e){var t=this;this.matrix=new Cf,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(i){var r={home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]};return r[""+i]||null}}return a.prototype.getTable=function(){return this.parent.getContentTable()},a.prototype.onKeyPress=function(e){var t=/(Mac)/i.test(navigator.platform);if(t&&e.metaKey){if(e.action==="home")e.action="ctrlHome";else if(e.action==="end")e.action="ctrlEnd";else if(["downArrow","upArrow","leftArrow","rightArrow"].indexOf(e.action)!==-1)return}var i=this.keyActions[e.action],r=this.getCurrentFromAction(e.action,i,e.action in this.keyActions,e);if(r){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===r.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&e.keyCode===40||e.keyCode===40)){if(r.toString()===[this.matrix.rows,this.matrix.columns].toString()||r.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===r.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&r.toString()===[0,1].toString())return!1;r=this.editNextRow(r[0],r[1],e.action)}this.matrix.select(r[0],r[1])}},a.prototype.editNextRow=function(e,t,i){var r=this.parent,n=r.editSettings.allowNextRowEdit&&(r.isEdit||r.isLastCellPrimaryKey),s=r.getColumnIndexByField(r.getVisibleColumns()[0].field),o=this.getTable().rows[parseInt(e.toString(),10)],l=r.editSettings.showAddNewRow&&o.classList.contains("e-addedrow")?o.querySelectorAll("td:not(.e-editcell)")[parseInt(t.toString(),10)]:o.cells[parseInt(t.toString(),10)];if(i==="tab"&&n){e++;var h=this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-indentcell").length+this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-detailrowcollapse").length;t=s+h}return i==="shiftTab"&&n&&(e--,t=r.getColumnIndexByField(r.getVisibleColumns()[r.getVisibleColumns().length-1].field)),!l.classList.contains(fe)&&!l.classList.contains("e-headercell")&&!l.classList.contains("e-groupcaption")&&!l.classList.contains("e-filterbarcell")?this.editNextRow(e,t,i):[e,t]},a.prototype.getCurrentFromAction=function(e,t,i,r){if(t===void 0&&(t=[0,0]),!i&&!this.indexesByKey(e)||this.matrix.current.length===0)return null;if(!this.shouldFocusChange(r))return this.matrix.current;var n=this.indexesByKey(e)||this.matrix.current.concat(t),s=n[0],o=n[1],l=n[2],h=n[3];if(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&e==="enter")for(var p=s;p<this.matrix.matrix.length;p++){var c=this.getTable().rows[p+1];if(c&&c.cells[parseInt(o.toString(),10)]&&c.cells[parseInt(o.toString(),10)].classList.contains("e-rowcell"))return[p+1,o];if(p===this.matrix.matrix.length-1)return[s,o]}if(e==="ctrlEnd"||e==="end"){var d=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];e==="end"&&(d=[s,this.matrix.matrix[parseInt(s.toString(),10)].length-1]),this.matrix.matrix[d[0]][d[1]]===0&&(d=si(this.matrix.matrix,d,!1)),s=d[0],o=d[1]+1}var f=this.matrix.get(s,o,[l,h],e,this.validator());return f},a.prototype.onClick=function(e,t){var i=e.target;if(this.target=i,i=i.classList.contains(fe)?i:M(i,"td"),i=i||M(e.target,"td.e-detailrowcollapse")||M(e.target,"td.e-detailrowexpand"),i=M(e.target,"td.e-detailcell")&&u(M(M(e.target,".e-grid"),"td.e-detailcell"))?null:i,i=i&&M(i,"table").classList.contains($t)?i:null,!i)return!1;var r=i.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&x(i,"e-addedrow")&&(r=x(i,"e-addedrow").rowIndex);var n=[r,i.cellIndex],s=n[0],o=n[1],l=this.matrix.current,h=l[0],p=l[1],c=j(s+"."+o,this.matrix.matrix);if(this.matrix.inValid(c)||!t&&h===s&&p===o||!x(e.target,fe)&&!x(e.target,"e-groupcaption")&&!x(e.target,"e-recordpluscollapse")&&!x(e.target,"e-recordplusexpand")&&!x(e.target,"e-detailrowcollapse")&&!x(e.target,"e-detailrowexpand")&&!x(e.target,"e-templatecell"))return!1;this.matrix.select(s,o)},a.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],r=i===void 0?0:i,n=t[1],s=n===void 0?0:n;this.matrix.current=[r,s];var o=this.getTable().rows[parseInt(r.toString(),10)];return e.element=u(o)?null:this.parent.editSettings.showAddNewRow&&o.classList.contains("e-addedrow")?o.querySelectorAll("td:not(.e-editcell)")[parseInt(s.toString(),10)]:o.cells[parseInt(s.toString(),10)],e.element&&(e.elementToFocus=(!e.element.classList.contains("e-unboundcell")||this.parent.editSettings.showAddNewRow&&e.element.classList.contains("e-unboundcell")&&x(e.element,"e-addedrow"))&&!e.element.classList.contains("e-detailcell")?this.getFocusable(e.element):e.element,e.elementToFocus=e.element.classList.contains("e-detailcell")&&e.element.querySelector(".e-childgrid")?e.element.querySelector(".e-childgrid"):e.elementToFocus,this.parent.editSettings.mode==="Batch"&&this.parent.isEdit&&e.elementToFocus.tagName.toLowerCase()==="input"&&e.elementToFocus.classList.contains("e-dropdownlist")&&(e.elementToFocus=e.elementToFocus.parentElement),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid")),e},a.prototype.getFocusable=function(e){var t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',i=!u(M(e,".e-templatecell"));if(this.parent.isEdit){var r=this.parent.editSettings.showAddNewRow&&x(e,"e-addedrow")?", button:not(.e-hide)":"";t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea'+r}var n=[].slice.call(e.querySelectorAll(t));return n.length?i&&n.length>1?this.target?this.target:e:n[0]:e},a.prototype.selector=function(e,t,i){var r=[Q.Expand,Q.GroupCaption,Q.CaptionSummary,Q.GroupSummary];return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===Q.DetailExpand&&u(t.visible)||!e.isDataRow&&r.indexOf(t.cellType)>-1&&!((t.cellType===Q.GroupSummary||t.cellType===Q.CaptionSummary)&&!(t.isDataCell&&t.visible))||t.column&&t.visible&&t.column.type==="checkbox"||t.cellType===Q.CommandColumn||e.isDataRow&&i)&&!(e.edit==="delete"&&e.isDirty)},a.prototype.nextRowFocusValidate=function(e){for(var t=e,i=e,r=this.matrix.rows;i<=r;i++)if(this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1)===-1)e=e+1;else return e;return this.lastIdxCell=!0,t},a.prototype.previousRowFocusValidate=function(e){for(var t=e,i=e,r=0;i>=r;i--)if(this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1)===-1){if(e=e-1,e<0)return this.lastIdxCell=!0,t}else return e;return t},a.prototype.jump=function(e,t){this.lastIdxCell=!1;var i=this.parent.frozenRows!==0&&e==="shiftEnter",r=(e==="upArrow"||i)&&t[0]===0;this.matrix.matrix[t[0]]&&e==="tab"&&this.matrix.matrix.length&&t[1]===this.matrix.matrix[t[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==t[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1),e==="shiftTab"&&t[0]!==0&&this.matrix.matrix[t[0]].indexOf(1)===t[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[t[0]].length);var n=!1,s=x(document.activeElement,"e-addedrow")&&this.parent.editSettings.showAddNewRow?x(document.activeElement,"e-addedrow"):document.activeElement.parentElement;if((this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&!u(s)&&s.classList.contains(ze)){var o=parseInt(s.getAttribute(Se),10);n=o>0}var l={swap:n?!1:(e==="upArrow"||i)&&t[0]===0,toHeader:r};return l},a.prototype.getNextCurrent=function(e,t,i,r){e===void 0&&(e=[]);var n=[];return(r==="rightArrow"||r==="tab")&&(n[0]=e[0],n[1]=-1),(r==="downArrow"||r==="enter")&&(n[0]=-1,n[1]=e[1]),n},a.prototype.generateRows=function(e,t){var i,r=t.matrix,n=t.handlerInstance,s=n.matrix.matrix.length,o=this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"?s+1:s;n.matrix.matrix=n.matrix.matrix.slice(0,o),n.matrix.rows=o,(i=n.matrix.matrix).push.apply(i,r),n.matrix.rows+=r.length},a.prototype.getInfo=function(e){var t=this.getFocusInfo(),i=this.matrix.current,r=i[0],n=i[1],s=t.element.classList.contains(fe),o=s||e&&e.action!=="enter"&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(t.element.parentElement.getAttribute(Se),10),r),Math.min(parseInt(t.element.getAttribute(_e),10),n)],h=l[0],p=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&s&&(h=this.parent.getDataRows().indexOf(t.element.parentElement)),this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&(h=r,p=n),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e&&e.action==="downArrow"&&h++,{isContent:!0,isDataCell:s,indexes:[h,p],isSelectable:o}},a.prototype.validator=function(){var e=this.getTable();return function(t,i,r){if(!u(e.rows[parseInt(t.toString(),10)])){var n=void 0;i=e.querySelector(".e-emptyrow")?0:i,e.rows[parseInt(t.toString(),10)].cells[0].classList.contains("e-editcell")?n=e.rows[parseInt(t.toString(),10)].cells[0].querySelectorAll("td")[parseInt(i.toString(),10)]:n=e.rows[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)];var s=n.getBoundingClientRect().width!==0;if(r==="enter"||r==="shiftEnter")return s&&n.classList.contains(fe);if((r==="shiftUp"||r==="shiftDown")&&n.classList.contains(fe))return s;if(r!=="shiftUp"&&r!=="shiftDown")return s}return!1}},a.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],r=i===void 0?-1:i,n=t[1],s=n===void 0?-1:n;if(r<0||s<0)return!0;var o=j(r+".cells."+s,this.getTable().rows);return o&&(e.action==="enter"||e.action==="shiftEnter")?o.classList.contains(fe)&&!o.classList.contains("e-unboundcell")||o.classList.contains("e-editedbatchcell")&&!o.classList.contains("e-detailcell"):!0},a.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},a}(),bf=function(a){vf(e,a);function e(t){return a.call(this,t)||this}return e.prototype.getTable=function(){return this.parent.getHeaderTable()},e.prototype.onClick=function(t){var i=t.target;if(this.target=i,i=i.classList.contains("e-headercell")?i:M(i,"th"),!i&&(this.parent.frozenRows!==0||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&(i=t.target.classList.contains(fe)?t.target:M(t.target,"td")),t.target.classList.contains("e-columnheader")||t.target.querySelector(".e-stackedheadercell"))return!1;if(i){var r=i.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&x(i,"e-addedrow")&&(r=x(i,"e-addedrow").rowIndex);var n=[r,i.cellIndex],s=n[0],o=n[1],l=j(s+"."+o,this.matrix.matrix);if(this.matrix.inValid(l))return!1;this.matrix.select(r,i.cellIndex)}},e.prototype.getFocusInfo=function(){var t={},i=this.matrix.current,r=i[0],n=r===void 0?0:r,s=i[1],o=s===void 0?0:s,l=this.getTable().rows[parseInt(n.toString(),10)];return t.element=u(l)?null:this.parent.editSettings.showAddNewRow&&l.classList.contains("e-addedrow")?l.querySelectorAll("td:not(.e-editcell)")[parseInt(o.toString(),10)]:l.cells[parseInt(o.toString(),10)],u(t.element)||(t.elementToFocus=this.getFocusable(t.element),t.outline=!t.element.classList.contains("e-filterbarcell")),t},e.prototype.selector=function(t,i){return i.visible&&(i.column.field!==void 0||i.isTemplate||!u(i.column.template)||!u(i.column.commands))||i.column.type==="checkbox"||i.cellType===Q.StackedHeader},e.prototype.jump=function(t,i){var r=this.parent.frozenRows!==0&&t==="enter",n,s;return this.parent.enableHeaderFocus&&t==="tab"&&(s=this.matrix.matrix.length-1===i[0],n=i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),n&&(s?this.matrix.current[0]=0:this.matrix.current[0]=this.matrix.current[0]+1,this.matrix.current[1]=-1)),{swap:(t==="downArrow"||r)&&i[0]===this.matrix.matrix.length-1||t==="tab"&&s&&n}},e.prototype.getNextCurrent=function(t,i,r,n){t===void 0&&(t=[]);var s=[];return(n==="rightArrow"||n==="shiftRight"&&this.getGridSeletion()||n==="tab")&&(s[0]=t[0],s[1]=-1),(n==="upArrow"||n==="shiftEnter")&&(s[0]=this.matrix.matrix.length,s[1]=t[1]),s},e.prototype.generateRows=function(t){var i=this.matrix.matrix.length;if(this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"){this.matrix.rows=++this.matrix.rows;for(var r=t[0].cells,n=0,s=0;s<r.length;s++)r[parseInt(s.toString(),10)].column&&r[parseInt(s.toString(),10)].column.columns?n=this.checkFilterColumn(r[parseInt(s.toString(),10)].column.columns,i,n):(this.matrix.set(i,n,r[parseInt(s.toString(),10)].visible&&r[parseInt(s.toString(),10)].column.allowFiltering!==!1),n++)}},e.prototype.checkFilterColumn=function(t,i,r){for(var n=t,s=r,o=0;o<n.length;o++)n[parseInt(o.toString(),10)].columns?s=this.checkFilterColumn(n[parseInt(o.toString(),10)].columns,i,s):(this.matrix.set(i,s,n[parseInt(o.toString(),10)].visible&&n[parseInt(o.toString(),10)].allowFiltering!==!1),s++);return s},e.prototype.getInfo=function(t){return P(a.prototype.getInfo.call(this,t),{isContent:!1,isHeader:!0})},e.prototype.validator=function(){return function(){return!0}},e.prototype.shouldFocusChange=function(t){var i=this.matrix.current,r=i[0],n=i[1];if(r<0||n<0)return!0;var s=j(r+".cells."+n,this.getTable().rows);return s&&(t.action==="enter"||t.action==="altDownArrow")?!s.classList.contains("e-headercell"):!0},e.prototype.getHeaderType=function(){return"HeaderFocus"},e}(Bu),Sf=function(){function a(e,t){this.searchBox=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization")}return a.prototype.searchFocus=function(e){if(e.target.parentElement.classList.add("e-input-focus"),e.target.classList.contains("e-input")&&e.target.classList.contains("e-search")&&e.target.value){var t=e.target.parentElement.querySelector(".e-sicon");t.classList.add("e-clear-icon"),t.setAttribute("title",this.l10n.getConstant("Clear")),t.style.cursor="pointer"}},a.prototype.searchBlur=function(e){var t=e.relatedTarget?e.relatedTarget:null;if(t&&t.classList.contains("e-sicon")?t.classList.contains("e-clear-icon")&&e.target.parentElement.classList.remove("e-input-focus"):e.target.parentElement.classList.remove("e-input-focus"),e.target.classList.contains("e-search")&&(t&&!t.classList.contains("e-sicon e-clear-icon")&&!t.classList.contains("e-sicon")||u(t))){var i=e.target.parentElement.querySelector(".e-sicon");i.classList.remove("e-clear-icon"),i.removeAttribute("title"),i.style.cursor="default"}},a.prototype.wireEvent=function(){this.searchBox&&(S.add(this.searchBox,"focus",this.searchFocus,this),S.add(this.searchBox,"blur",this.searchBlur,this))},a.prototype.unWireEvent=function(){this.searchBox&&(S.remove(this.searchBox,"focus",this.searchFocus),S.remove(this.searchBox,"blur",this.searchBlur))},a}(),wf=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rr=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},If=function(a){wf(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return rr([C(12)],e.prototype,"pageSize",void 0),rr([C(8)],e.prototype,"pageCount",void 0),rr([C(1)],e.prototype,"currentPage",void 0),rr([C()],e.prototype,"totalRecordsCount",void 0),rr([C(!1)],e.prototype,"enableQueryString",void 0),rr([C(!1)],e.prototype,"pageSizes",void 0),rr([C(null)],e.prototype,"template",void 0),e}(Ye),xf=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Dl=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Ef=function(a){xf(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return Dl([C("startsWith")],e.prototype,"operator",void 0),Dl([C(!1)],e.prototype,"ignoreAccent",void 0),e}(Ye),Pu=function(){function a(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.isCheckboxReset=!1,this.isRowDeselect=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return a.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},a.prototype.onActionBegin=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},a.prototype.fDataUpdate=function(e){if(!this.isMultiSelection&&(!u(e.cellIndex)||!u(e.rowIndex))){var t=this.getRowObj(u(e.rowIndex)?u(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e},a.prototype.onActionComplete=function(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1},a.prototype.getModuleName=function(){return"selection"},a.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+pt)&&!e.querySelector("."+ot)||(this.hidePopUp(),this.clearSelection(),this.destroyAutoFillElements(),this.removeEventListener(),this.unWireEvents(),S.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),S.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},a.prototype.isEditing=function(){return(this.parent.editSettings.mode==="Normal"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.editSettings.showAddNewRow&&!this.parent.isPersistSelection},a.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if(e.editSettings.mode==="Batch"&&e.editModule){var t=bs(this.parent.getCurrentViewRecords());t=e.editSettings.newRowPosition==="Bottom"?t.concat(this.parent.editModule.getBatchChanges()[Zr]):this.parent.editModule.getBatchChanges()[Zr].concat(t);for(var i=this.parent.editModule.getBatchChanges()[Bo],r=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<i.length;n++)for(var s=0;s<t.length;s++)if(i[parseInt(n.toString(),10)][""+r]===t[parseInt(s.toString(),10)][""+r]){t.splice(s,1);break}return t}else if(this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&!this.parent.isPersistSelection){var o=e.getCurrentViewRecords().filter(function(l){return l.key===void 0});return o}else return e.getCurrentViewRecords()},a.prototype.selectRow=function(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection){this.addRowsToSelection([e]);return}var i=this.parent,r=i.getRowByIndex(e),n=r&&i.getRowObjectFromUID(r.getAttribute("data-uid"));if(!(this.isPartialSelection&&n&&n.isDataRow&&!n.isSelectable)){var s,o=!1;if(i.enableVirtualization&&e>-1){var l={selectedIndex:e,isAvailable:!0};if(this.parent.notify(Xc,l),r&&i.getRowObjectFromUID(r.getAttribute("data-uid")))s=i.getRowObjectFromUID(r.getAttribute("data-uid")).data;else{if(l.isAvailable&&!i.selectionSettings.persistSelection){var h=this.parent.getSelectedRecords();h.length>0&&this.clearRowSelection()}return}}else s=this.getRowObj(e).data;if(!(!this.isRowType()||!r||this.isEditing())){var p=r.hasAttribute("aria-selected");if(this.activeTarget(),!t||!this.selectedRowIndexes.length)t=!1;else{var c=this.selectionSettings.checkboxMode==="ResetOnRowClick",d=!this.parent.isCheckBoxSelection&&this.selectionSettings.type==="Multiple";!c&&!d||this.selectedRowIndexes.length===1&&(c||d)?t=this.isKeyAction&&this.parent.isCheckBoxSelection?!1:this.selectedRowIndexes.indexOf(e)!==-1:t=!1}this.isKeyAction=!1;var f,g="cancel";if(!t)f={data:s,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:r,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger(sa,this.fDataUpdate(f),this.rowSelectingCallBack(f,t,e,s,o,p,g));else{if(this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&this.selectionSettings.persistSelection){if(this.rowDeselect(oa,[n.index],[n.data],[r],[n.foreignKeyData],this.actualTarget),this.isCancelDeSelect)return;this.parent.isCheckBoxSelection||(this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1)),this.rowDeselect(la,[n.index],[n.data],[r],[n.foreignKeyData],this.actualTarget,void 0,void 0,void 0)}this.rowSelectingCallBack(f,t,e,s,o,p,g)(f)}}}},a.prototype.rowSelectingCallBack=function(e,t,i,r,n,s,o){var l=this;return function(h){if(!u(h)&&h[""+o]===!0){l.disableInteracted();return}l.index=i,l.toggle=t,l.data=r,l.removed=n,s&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"?(l.clearSelectedRow(i),l.selectRowCallBack()):!s&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"&&l.selectRowCallBack(),l.selectionSettings.checkboxMode==="ResetOnRowClick"&&(l.isCheckboxReset=!0,l.clearSelection()),(!l.selectionSettings.persistSelection||l.selectionSettings.checkboxMode==="ResetOnRowClick"||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())}},a.prototype.selectRowCallBack=function(){var e=this.parent,t,i=this.index,r=this.toggle,n=this.data,s=this.removed,o=e.getRowByIndex(i);!r&&!s&&(this.selectedRowIndexes.indexOf(i)<=-1&&this.updateRowSelection(o,i),this.selectRowIndex(i)),r||(t={data:n,rowIndex:i,row:o,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:i},this.onActionComplete(t,aa)),this.isInteracted=!1,this.updateRowProps(i)},a.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)},a.prototype.selectedDataUpdate=function(e,t,i,r,n){for(var s=0,o=r.length;s<o;s++){var l=this.parent.getDataRows()[r[parseInt(s.toString(),10)]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(r[parseInt(s.toString(),10)]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(e.push(h.data),i.push(l),t.push(h.foreignKeyData)):this.isPartialSelection&&n&&n.splice(n.indexOf(r[parseInt(s.toString(),10)]),1)}},a.prototype.selectRows=function(e){var t=this,i=this.parent,r=e.slice(),n=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;var s=[],o=[],l="cancel",h=[];if(!(!this.isRowType()||this.isEditing())){this.selectedDataUpdate(h,o,s,e,r),this.activeTarget();var p={cancel:!1,rowIndexes:r,row:s,rowIndex:n,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:h,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:o};this.parent.trigger(sa,this.fDataUpdate(p),function(c){if(!u(c)&&c[""+l]===!0){t.disableInteracted();return}i.allowRowDragAndDrop&&t.isDragged&&t.selectionSettings.persistSelection||t.clearRow(),t.selectRowIndex(r.slice(-1)[0]);var d=function(v,y){t.updateRowSelection(i.getRowByIndex(v),v,y),t.updateRowProps(n)};if(t.isSingleSel())d(n);else for(var f=0,g=r;f<g.length;f++){var m=g[f];d(m,!!i.enableVirtualization)}c={rowIndexes:r,row:s,rowIndex:n,target:t.actualTarget,prevRow:i.getRows()[t.prevRowIndex],previousRowIndex:t.prevRowIndex,data:t.getSelectedRecords(),isInteracted:t.isInteracted,isHeaderCheckboxClicked:t.isHeaderCheckboxClicked,foreignKeyData:o},t.isRowSelected&&t.onActionComplete(c,aa),t.isInteracted=!1})}},a.prototype.addRowsToSelection=function(e){var t=this.parent,i="cancel",r=this.target;this.isMultiSelection=!0;var n=[],s=[],o=[],l=t.getSelectedRowIndexes().concat(e),h=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]);if(!((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)){var p,c=this.parent.getColumns().filter(function(y){return y.type==="checkbox"});this.isMultiCtrlRequest&&!c.length&&this.selectedDataUpdate(o,s,n,l);for(var d=0,f=e;d<f.length;d++){var g=f[d],m=this.getRowObj(g),v=this.selectedRowIndexes.indexOf(g)>-1;if(!(this.isPartialSelection&&m&&m.isDataRow&&!m.isSelectable)){if(this.selectRowIndex(g),v&&(c.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(oa,[g],[m.data],[h],[m.foreignKeyData],r),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(g),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),this.rowDeselect(la,[g],[m.data],[h],[m.foreignKeyData],r,void 0,void 0,void 0),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),p={cancel:!1,data:o.length?o:m.data,rowIndex:g,row:n.length?n:h,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:s.length?s:m.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.parent.trigger(sa,this.fDataUpdate(p)),!u(p)&&p[""+i]===!0){this.disableInteracted();return}this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,g)}if(v||(p={data:o.length?o:m.data,rowIndex:g,row:n.length?n:h,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:s.length?s:m.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.onActionComplete(p,aa)),this.isInteracted=!1,this.updateRowProps(g),this.isSingleSel())break}}}},a.prototype.getCollectionFromIndexes=function(e,t){for(var i=[],r=e<=t?{i:e,max:t}:{i:t,max:e},n=r.i,s=r.max;n<=s;n++)i.push(n);return e>t&&i.reverse(),i},a.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},a.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&this.parent.checkAllRows!=="Check"||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},a.prototype.clearSelectedRow=function(e){if(this.toggle){var t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},a.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},a.prototype.getPkValue=function(e,t){return e&&gi(e)?Ue(e,t):t[""+e]},a.prototype.updatePersistCollection=function(e,t){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!u(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var r=this.getRowObj(e),n=r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;r.isSelected=t,t&&!this.isPartialSelection||this.isPartialSelection&&r.isSelectable&&r.isSelected?(this.selectedRowState[""+n]=t,delete this.unSelectedRowState[""+n],this.persistSelectedData.some(function(s){return i.getPkValue(i.primaryKey,s)===n})||this.persistSelectedData.push(r.data)):this.updatePersistDelete(n)}},a.prototype.updatePersistDelete=function(e,t){var i=this;delete this.selectedRowState[""+e],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+e]=!0);var r,n=this.persistSelectedData.some(function(s,o){return r=o,i.getPkValue(i.primaryKey,s)===e});n&&(this.persistSelectedData.splice(r,1),t&&this.parent.partialSelectedRecords.splice(r,1))},a.prototype.updateCheckBoxes=function(e,t,i){if(!u(e)){var r=e.querySelector(".e-checkselect");u(r)||(En(r.nextElementSibling,t),Yt(r,t),(u(this.checkedTarget)||!u(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}},a.prototype.updateRowSelection=function(e,t,i){if(e&&(this.selectedRowIndexes.indexOf(t)===-1&&(this.selectedRowIndexes.push(t),this.selectedRecords.push(e)),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus)){var r=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&this.mouseButton===2&&(r=this.parent.contextMenuModule.cell),!r||i)return;this.focus.onClick({target:r},!0)}},a.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=bs(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!u(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},a.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){var t=this.parent.getDataRows(),i=[],r=[],n=[],s=[],o=this.target;this.isRowDeselect=!0;for(var l=0,h=this.selectedRowIndexes.length;l<h;l++){var p=this.parent.editSettings.mode==="Batch"?this.parent.getRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]]:this.parent.getDataRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]],c=this.getRowObj(p);c&&(i.push(c.data),r.push(p),n.push(this.selectedRowIndexes[parseInt(l.toString(),10)]),s.push(c.foreignKeyData))}this.selectionSettings.persistSelection&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(oa,n,i,r,s,o,null,function(){if(e.isCancelDeSelect&&(e.isRowClicked||e.checkSelectAllClicked||e.isInteracted&&!e.parent.isPersistSelection)){if(e.parent.isPersistSelection)if(e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall"))==="Intermediate")for(var d=0;d<e.selectedRecords.length;d++)e.updatePersistCollection(e.selectedRecords[parseInt(d.toString(),10)],!0);else e.parent.checkAllRows="Check",e.updatePersistSelectedData(!0);e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1));return}for(var f=[].slice.call(t.filter(function(m){return m.hasAttribute("aria-selected")})),g=0;g<f.length;g++)e.disableUI||(f[parseInt(g.toString(),10)].removeAttribute("aria-selected"),e.addRemoveClassesForRow(f[parseInt(g.toString(),10)],!1,!0,"e-selectionbackground","e-active")),e.isPrevRowSelection||e.updatePersistCollection(f[parseInt(g.toString(),10)],!1),e.updateCheckBoxes(f[parseInt(g.toString(),10)]);e.selectedRowIndexes=[],e.selectedRecords=[],e.isRowSelected=!1,e.selectRowIndex(-1),e.isPrevRowSelection=!1,e.rowDeselect(la,n,i,r,s,o,null,void 0,null),e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))},null),this.isRowDeselect=!1}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},a.prototype.rowDeselect=function(e,t,i,r,n,s,o,l,h){var p=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||!this.isRowDeselect||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&this.focus.activeKey==="space")||!this.selectionSettings.persistSelection){var c="cancel",d=t.length===1&&this.deSelectedData.length===1,f={rowIndex:t[0],data:this.selectionSettings.persistSelection&&this.parent.checkAllRows==="Uncheck"&&!d&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"?this.deSelectedData:i,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};e==="rowDeselected"&&delete f.cancel;var g="row",m="target",v="rowIndex",y="rowIndexes",w="data",b="foreignKeyData";f[""+g]=r,f[""+m]=this.actualTarget;var I=this.actualTarget&&!u(M(this.actualTarget,"thead"));I||t.length>1?(f[""+v]=t[0],f[""+y]=t):t.length===1&&(f[""+w]=f[""+w][0],f[""+g]=f[""+g][0],f[""+b]=f[""+b][0],this.isAddRowsToSelection&&(f[""+y]=t)),this.parent.trigger(e,f,function(k){p.isCancelDeSelect=k[""+c],(!p.isCancelDeSelect||!p.isRowClicked&&!p.isInteracted&&!p.checkSelectAllClicked)&&(p.updatePersistCollection(r[0],!1),p.updateCheckBoxes(r[0],void 0,t[0])),l!==void 0&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&l!==void 0&&l()},a.prototype.getRowObj=function(e){return e===void 0&&(e=this.currentIndex),u(e)?{}:(typeof e=="number"&&(e=this.parent.getRowByIndex(e)),e?this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{}:{})},a.prototype.selectCell=function(e,t){if(this.isCellType()){var i=this.parent,r,n=i.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex));this.currentIndex=e.rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(!this.isCellType()||!n||this.isEditing())){var o=n.classList.contains("e-cellselectionbackground");if(t=t&&!nt(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&o,t)this.successCallBack(r,t,e,n,s)(r);else{r={data:s,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1};var l="currentCell";r[""+l]=n;var h="previousRowCellIndex";r[""+h]=this.prevECIdxs,this.parent.trigger(on,this.fDataUpdate(r),this.successCallBack(r,t,e,n,s)),this.cellselected=!0}}}},a.prototype.successCallBack=function(e,t,i,r,n){var s=this;return function(o){var l="cancel",h="currentCell";if(!(!u(o)&&o[""+l]===!0)&&(t||(o[""+h]=o[""+h]?o[""+h]:r),s.clearCell(),t||s.updateCellSelection(r,i.rowIndex,i.cellIndex),!t)){var p={data:n,cellIndex:i,currentCell:r,selectedRowCellIndex:s.selectedRowCellIndexes,previousRowCell:s.prevECIdxs?s.getCellIndex(s.prevECIdxs.rowIndex,s.prevECIdxs.cellIndex):void 0},c="previousRowCellIndex";p[""+c]=s.prevECIdxs,s.updateCellProps(i,i),s.onActionComplete(p,Gn)}}},a.prototype.getCellIndex=function(e,t){return this.parent.getCellFromIndex(e,t)},a.prototype.selectCellsByRange=function(e,t){var i=this;if(this.isCellType()){var r=this.parent,n=this.parent.isSpan?mo(this.parent,e.rowIndex,e.cellIndex):r.getCellFromIndex(e.rowIndex,e.cellIndex),s,o,l=e,h=t=t||e,p;this.currentIndex=e.rowIndex;var c="cancel",d=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var f={data:d,cellIndex:e,currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},g="previousRowCellIndex";f[""+g]=this.prevECIdxs,this.parent.trigger(on,this.fDataUpdate(f),function(m){if(!(!u(m)&&m[""+c]===!0)){if(i.clearCell(),e.rowIndex>t.rowIndex){var v=e;e=t,t=v}for(var y=e.rowIndex;y<=t.rowIndex;y++){i.selectionSettings.cellSelectionMode.indexOf("Box")<0?(s=y===e.rowIndex?e.cellIndex:0,o=y===t.rowIndex?t.cellIndex:i.getLastColIndex(y)):(s=e.cellIndex,o=t.cellIndex),p=[];for(var w=s<o?s:o,b=s>o?s:o;w<=b;w++)n=i.parent.isSpan?mo(r,y,w):r.getCellFromIndex(y,w),n&&(p.push(w),i.updateCellSelection(n),i.addAttribute(n));i.selectedRowCellIndexes.push({rowIndex:y,cellIndexes:p})}var I={data:d,cellIndex:h,currentCell:r.getCellFromIndex(h.rowIndex,h.cellIndex),selectedRowCellIndex:i.selectedRowCellIndexes,previousRowCell:i.prevECIdxs?i.getCellIndex(i.prevECIdxs.rowIndex,i.prevECIdxs.cellIndex):void 0},k="previousRowCellIndex";I[""+k]=i.prevECIdxs,i.isDragged||(i.onActionComplete(I,Gn),i.cellselected=!0),i.updateCellProps(l,h)}})}}},a.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0]);this.currentIndex=e[0].rowIndex;var r=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var n={data:r,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},s="previousRowCellIndex";n[""+s]=this.prevECIdxs,this.onActionBegin(n,on);for(var o=0,l=e.length;o<l;o++)for(var h=0,p=e[parseInt(o.toString(),10)].cellIndexes.length;h<p;h++)i=t.getCellFromIndex(e[parseInt(o.toString(),10)].rowIndex,e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]),i&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[parseInt(o.toString(),10)].rowIndex,cellIndex:e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});var c={data:r,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},d="previousRowCellIndex";c[""+d]=this.prevECIdxs,this.onActionComplete(c,Gn)}}},a.prototype.addCellsToSelection=function(e){if(this.isCellType()){var t=this.parent,i,r;this.currentIndex=e[0].rowIndex;var n="cancel",s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){this.hideAutoFill();var o;o=t.getRowsObject()[e[0].rowIndex],t.groupSettings.columns.length>0&&(o=t.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var l=[],h=0,p=e;h<p.length;h++){for(var c=p[h],d=0,f=this.selectedRowCellIndexes.length;d<f;d++)if(this.selectedRowCellIndexes[parseInt(d.toString(),10)].rowIndex===c.rowIndex){r=d;break}i=t.getCellFromIndex(c.rowIndex,this.getColIndex(c.rowIndex,c.cellIndex));var g=c.cellIndex;t.groupSettings.columns.length>0?l.push(o.cells[g+t.groupSettings.columns.length].foreignKeyData):l.push(o.cells[parseInt(g.toString(),10)].foreignKeyData);var m={cancel:!1,data:s,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},v="previousRowCellIndex";m[""+v]=this.prevECIdxs;var y=r>-1;if(y){var w=this.selectedRowCellIndexes[parseInt(r.toString(),10)].cellIndexes;w.indexOf(c.cellIndex)>-1||this.selectionSettings.mode==="Both"&&i.classList.contains("e-gridchkbox")&&!i.getAttribute("aria-selected")?(this.cellDeselect(Zo,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],s,[i],l),w.splice(w.indexOf(c.cellIndex),1),w.length===0&&this.selectedRowCellIndexes.splice(r,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(el,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],s,[i],l)):(y=!1,this.onActionBegin(m,on),this.addRowCellIndex({rowIndex:c.rowIndex,cellIndex:c.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(m,on),!u(m)&&m[""+n]===!0)return;this.updateCellSelection(i,c.rowIndex,c.cellIndex)}if(!y){var b={data:s,cellIndex:e[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};b[""+v]=this.prevECIdxs,this.onActionComplete(b,Gn),this.cellselected=!0}this.updateCellProps(c,c)}}}},a.prototype.getColIndex=function(e,t){var i=this.parent.getColumnByIndex(t),r=Qu(this.parent,i,e);if(r)for(var n=0;n<r.length;n++){var s=parseInt(r[parseInt(n.toString(),10)].getAttribute(_e),10);if(s===t)return n}return-1},a.prototype.getLastColIndex=function(e){var t=this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(_e),10)},a.prototype.clearCell=function(){this.clearCellSelection()},a.prototype.cellDeselect=function(e,t,i,r,n){var s="cancel";if(r&&r.length>0)for(var o=0,l=r;o<l.length;o++){var h=l[o];h&&h.classList.contains(_r)&&this.updateCheckBoxes(M(h,"tr"))}var p={cells:r,data:i,cellIndexes:t,foreignKeyData:n,cancel:!1};this.parent.trigger(e,p),this.isPreventCellSelect=p[""+s]},a.prototype.updateCellSelection=function(e,t,i){u(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains(_r)&&this.updateCheckBoxes(M(e,"tr"),!0),this.addAttribute(e)},a.prototype.addAttribute=function(e){this.target=e,u(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},a.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},a.prototype.addRowCellIndex=function(e){for(var t,i,r=0,n=this.selectedRowCellIndexes.length;r<n;r++)if(this.selectedRowCellIndexes[parseInt(r.toString(),10)].rowIndex===e.rowIndex){t=!0,i=r;break}t?this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},a.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,r=[],n=[],s=[],o=this.getCurrentBatchRecordChanges();this.hideAutoFill();for(var l=0,h=i.length;l<h;l++){r.push(o[i[parseInt(l.toString(),10)].rowIndex]);for(var p=this.getRowObj(i[parseInt(l.toString(),10)].rowIndex),c=0,d=i[parseInt(l.toString(),10)].cellIndexes.length;c<d;c++)p.cells&&s.push(p.cells[i[parseInt(l.toString(),10)].cellIndexes[parseInt(c.toString(),10)]].foreignKeyData),n.push(e.getCellFromIndex(i[parseInt(l.toString(),10)].rowIndex,i[parseInt(l.toString(),10)].cellIndexes[parseInt(c.toString(),10)]))}if(this.cellDeselect(Zo,i,r,n,s),this.isPreventCellSelect===!0)return;for(var l=0,h=t.length;l<h;l++)t[parseInt(l.toString(),10)].classList.remove("e-cellselectionbackground"),t[parseInt(l.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(el,i,r,n,s)}},a.prototype.getSelectedCellsElement=function(){for(var e=this.parent,t=e.getDataRows(),i=[],r=0,n=t.length;r<n;r++)i=i.concat([].slice.call(t[parseInt(r.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return i},a.prototype.mouseMoveHandler=function(e){e.preventDefault(),this.stopTimer();var t=this.parent.element.getBoundingClientRect(),i=this.x,r=this.y,n=Kr(e),s=n.x-t.left,o=n.y-t.top,l,h=M(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=M(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),i>s&&(l=s,s=i,i=l),r>o&&(l=o,o=r,r=l),this.element.style.left=i+"px",this.element.style.top=r+"px",this.element.style.width=s-i+"px",this.element.style.height=o-r+"px"),h&&!e.ctrlKey&&!e.shiftKey){var p=parseInt(h.getAttribute(Se),10);if(!this.isCellDrag)this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,p),this.isRowDragSelected=!0;else{var c=x(e.target,fe);c&&(this.startAFCell=this.startCell,this.endAFCell=x(e.target,fe),p>-1&&this.selectLikeExcel(e,p,parseInt(c.getAttribute(_e),10)))}}!e.ctrlKey&&!e.shiftKey&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.isCellDrag&&this.updateScrollPosition(e,n,this.parent.getContent())},a.prototype.updateScrollPosition=function(e,t,i){var r=this,n=i.getBoundingClientRect();n.left>=t.x-20-(this.parent.enableRtl&&this.parent.height!=="auto"?Dt():0)?this.timer1=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,r.parent.enableRtl?"right":"left",e)},200):n.left+i.clientWidth-20-(!this.parent.enableRtl&&this.parent.height!=="auto"?Dt():0)<t.x&&(this.timer1=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,r.parent.enableRtl?"left":"right",e)},200)),n.top>=t.y-this.parent.getRowHeight()*.5?this.timer2=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,"up",e)},200):n.top+i.clientHeight-this.parent.getRowHeight()*.5-(i.firstElementChild.scrollWidth>i.firstElementChild.offsetWidth?Dt():0)<=t.y&&(this.timer2=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,"down",e)},200))},a.prototype.stopTimer=function(){this.timer1&&(window.clearInterval(this.timer1),this.timer1=null),this.timer2&&(window.clearInterval(this.timer2),this.timer2=null),this.preventFocus=!1},a.prototype.setScrollPosition=function(e,t,i){var r=-1,n=-1;switch((this.endAFCell||this.prevECIdxs)&&(r=this.endAFCell?parseInt(this.endAFCell.getAttribute("index"),10):this.prevECIdxs.rowIndex,n=this.endAFCell?parseInt(this.endAFCell.getAttribute("data-colindex"),10):this.prevECIdxs.cellIndex),t){case"up":if(i&&M(i.target,".e-headercontent"))return;this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes.length===1&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes.length>1&&this.startAFCell.getBoundingClientRect().top>0)&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),r-=1,this.parent.frozenRows&&(r+=this.parent.frozenRows+1),r<1?e.scrollTop=0:e.scrollTop-=this.parent.getRowByIndex(r).offsetHeight;break;case"down":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),r<this.parent.getRows().length-1?(r+=1,this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(r,this.selectedRowCellIndexes[0].cellIndexes[0])),e.scrollTop+=this.parent.getRowByIndex(r).offsetHeight):e.scrollTop=e.scrollHeight;break;case"left":if(n>0&&r>-1){this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[0].cellIndexes.length>0&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes[0].cellIndexes.length>1&&(!this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left>0||this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left<this.parent.element.offsetWidth))&&(n=parseInt(this.startAFCell.getAttribute("data-colindex"),10));var s=this.findNextCell(e,t,n,r);n=s?parseInt(s.getAttribute("data-colindex"),10):-1,this.parent.enableRtl&&s?n<1?e.scrollLeft=e.scrollWidth:e.scrollLeft+=s.offsetWidth:s&&(n<1?e.scrollLeft=0:e.scrollLeft-=s.offsetWidth)}break;case"right":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(n=parseInt(this.startAFCell.getAttribute("data-colindex"),10));var o=this.parent.getCellFromIndex(r,n),l=this.findNextCell(e,t,n,r);l&&this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(this.selectedRowCellIndexes[0].rowIndex,parseInt(l.getAttribute("data-colindex"),10))),n=l?parseInt(l.getAttribute("data-colindex"),10):-1,this.parent.enableRtl&&l?n<this.parent.columns.length-1?e.scrollLeft-=o.offsetWidth:e.scrollLeft=-e.scrollWidth:l&&(n<this.parent.columns.length-1?e.scrollLeft+=o.offsetWidth:e.scrollLeft=e.scrollWidth),this.isAutoFillSel&&(n===this.parent.columns.length-1||n===-1)&&this.startAFCell&&this.endAFCell&&(this.positionAFBorders(),e.scrollLeft=this.parent.enableRtl?-e.scrollWidth:e.scrollWidth);break}if(r>-1&&r<this.parent.getRows().length&&n>-1){var h={target:this.parent.getCellFromIndex(r,n)};if(this.isAutoFillSel&&h.target.classList.contains("e-cellselectionbackground")&&(t==="down"&&parseInt(h.target.getAttribute("index"),10)===this.parent.getRows().length-1||t==="right"&&parseInt(h.target.getAttribute("data-colindex"),10)===this.parent.columns.length-1))return;this.endAFCell=h.target,this.preventFocus=!0,this.selectLikeExcel(h,r,n)}},a.prototype.findNextCell=function(e,t,i,r){var n=this.parent.getCellFromIndex(r,t==="left"?i-1:i+1);if(n&&n.classList.contains("e-hide")){var s=n.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)"),o=Array.from(s).indexOf(n.nextElementSibling);return o>0&&o<s.length-1?(n=s[o+(t==="left"?-1:1)],n):(e.scrollLeft=0,null)}return n},a.prototype.selectLikeExcel=function(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())},a.prototype.setFrozenBorders=function(e,t,i){var r=t.style.borderWidth.toString().split(" "),n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"],s=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+n[""+i])).filter(function(w){return w.style.display===""}),o=[].slice.call(e.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(w){return w.style.display===""}),l=this.parent.enableRtl;if(s.length)for(var h=s[0].getAttribute("index"),p=s[0].getAttribute("data-colindex"),c=s[s.length-1].getAttribute("index"),d=s[s.length-1].getAttribute("data-colindex"),f=0;f<s.length;f++)s[parseInt(f.toString(),10)].getAttribute("index")===h&&(r.length===1||r.length===3&&parseInt(r[0],10)===2||r.length===4&&parseInt(r[0],10)===2)&&s[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),s[parseInt(f.toString(),10)].getAttribute("data-colindex")===p&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&(!l&&parseInt(r[3],10)===2||l&&parseInt(r[1],10)===2))&&s[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border"),s[parseInt(f.toString(),10)].getAttribute("index")===c&&(r.length===1||r.length===3&&parseInt(r[2],10)===2||r.length===4&&parseInt(r[2],10)===2)&&s[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border"),s[parseInt(f.toString(),10)].getAttribute("data-colindex")===d&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&!l&&parseInt(r[1],10)===2||l&&parseInt(r[3],10)===2)&&s[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border");if(o.length)for(var h=o[0].getAttribute("index"),p=o[0].getAttribute("data-colindex"),c=o[o.length-1].getAttribute("index"),d=o[o.length-1].getAttribute("data-colindex"),f=0;f<o.length;f++){var g=o[parseInt(f.toString(),10)].getAttribute("index"),m=o[parseInt(f.toString(),10)].getAttribute("data-colindex");g===h&&(!this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&x(e,"e-content")||!x(e,"e-content"))&&o[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),g===c&&(!this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&x(e,"e-headercontent")||!x(e,"e-headercontent"))&&o[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border");var v=o[parseInt(f.toString(),10)].parentElement.children[parseInt(m,10)-1];m===p&&(!v||v&&!v.classList.contains("e-cellselectionbackground"))&&o[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border");var y=o[parseInt(f.toString(),10)].parentElement.children[parseInt(m,10)+1];m===d&&(!y||y&&!y.classList.contains("e-cellselectionbackground"))&&o[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border")}},a.prototype.refreshFrozenBorders=function(){this.bdrElement&&(this.setFrozenBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===ii&&this.setFrozenBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows&&(this.setFrozenBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===ii&&this.setFrozenBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6")))},a.prototype.drawBorders=function(){this.selectionSettings.cellSelectionMode==="BoxWithBorder"&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders())):this.showHideBorders("none")},a.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e},a.prototype.isLastRow=function(e){var t=[].slice.call(M(e,me).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]},a.prototype.isFirstRow=function(e){var t=[].slice.call(M(e,me).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},a.prototype.isFirstCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[0]===e},a.prototype.setBorders=function(e,t,i){var r=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(function(v){return v.style.display===""});if(r.length&&this.parent.isFrozenGrid()){var n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"];r=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+n[""+i]+":not(.e-hide)")).filter(function(v){return v.style.display===""})}if(r.length){var s=this.parent.isFrozenGrid(),o=r[0],l=r[r.length-1],h=o.getBoundingClientRect(),p=l.getBoundingClientRect(),c=o.offsetParent.getBoundingClientRect();(o.offsetParent.classList.contains("e-content")||o.offsetParent.classList.contains("e-headercontent"))&&(c=o.offsetParent.querySelector("table").getBoundingClientRect());var d=!s&&this.isLastRow(l)&&(i==="1"||i==="2"||i==="5")?2:0,f=0,g=s&&(i==="2"||i==="4")&&this.isFirstCell(o)?1:0,m=(this.parent.getFrozenMode()==="Right"&&(i==="1"||i==="3")||this.parent.getFrozenMode()===ii&&(i==="5"||i==="6"))&&this.isFirstCell(o)?1:0;this.parent.enableRtl?(t.style.right=c.right-h.right-g+"px",t.style.width=h.right-p.left+g+1+"px"):(t.style.left=h.left-c.left-g-m+"px",t.style.width=p.right-h.left+g-m+1+"px"),t.style.top=h.top-c.top-f+"px",t.style.height=p.top-h.top>0?p.top-c.top+p.height+(s?0:1)-(h.top-c.top)-d+f+"px":p.height+f-d+(s?0:1)+"px",this.selectDirection+=i}else t.style.display="none"},a.prototype.positionBorders=function(){this.updateStartEndCells(),!(!this.startCell||!this.bdrElement||!this.selectedRowCellIndexes.length)&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getContentTable(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===ii&&this.setBorders(this.parent.getContentTable(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getHeaderTable(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===ii&&this.setBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},a.prototype.applyBothFrozenBorders=function(e){var t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border);break}},a.prototype.applyBorders=function(e){var t=this.parent.enableRtl;if(this.parent.getFrozenMode()===ii)this.applyBothFrozenBorders(e);else switch(e.length){case 4:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border));break}},a.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(ge("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.getContentTable().parentElement.appendChild(ge("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===ii&&(this.frcBdrElement=this.parent.getContentTable().parentElement.appendChild(ge("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(ge("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(ge("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===ii&&(this.frhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(ge("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},a.prototype.showHideBorders=function(e,t){if(this.bdrElement){if(this.bdrElement.style.display=e,this.parent.isFrozenGrid()){var i=this.parent.getContentTable();N(i.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),N(i.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),N(i.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),N(i.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),t||(this.mcBdrElement.style.display=e),this.parent.getFrozenMode()===ii&&(this.frcBdrElement.style.display=e)}if(this.parent.frozenRows){var i=this.parent.getHeaderTable();N(i.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),N(i.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),N(i.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),N(i.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),this.fhBdrElement.style.display=e}this.parent.frozenRows&&this.parent.isFrozenGrid()&&(t||(this.mhBdrElement.style.display=e),this.parent.getFrozenMode()===ii&&(this.frhBdrElement.style.display=e))}},a.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},a.prototype.positionAFBorders=function(){if(!(!this.startCell||!this.bdrAFLeft)){var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,r=t.top-e.top>=0&&(x(this.startAFCell,_n)||x(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(x(this.startAFCell,_n)||x(this.startAFCell,Bs))&&this.isFirstCell(this.startAFCell)?1:0,s=this.isLastRow(this.endAFCell)&&(x(this.endAFCell,_n)||x(this.endAFCell,"e-frozencontent"))?2:0,o=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),h=this.startAFCell.offsetParent.parentElement.scrollTop,p=this.startAFCell.offsetParent.parentElement.scrollLeft,c=h-this.startAFCell.offsetTop,d=p-this.startAFCell.offsetLeft,f=this.parent.element.clientHeight-Dt();this.parent.allowPaging&&(f-=this.parent.element.querySelector(".e-pager").offsetHeight),this.parent.aggregates.length&&(f-=this.parent.getFooterContent().offsetHeight);var g=this.parent.element.clientWidth-(this.parent.height!=="auto"?Dt():0);c=c>0?Math.floor(c)-1:0,d=d>0?d:0;var m=e.left-l.left;if(this.parent.enableRtl){var y=x(this.startAFCell,_n)||x(this.startAFCell,Bs)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=g<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px";var w=l.right-e.right-n+y-1;w>0?this.bdrAFRight.style.right=w+"px":this.bdrAFRight.style.right="0px",this.bdrAFTop.style.left=t.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.parent.height!=="auto"&&Dt()?(this.bdrAFTop.style.left=Dt()+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-Dt()+"px"):this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=m-n+d-1+"px",this.bdrAFRight.style.left=t.left-l.left-2+t.width+"px",this.bdrAFRight.style.width=g<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=m+d-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",g<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var v=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-g;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-v+"px"}if(this.bdrAFLeft.style.top=e.top-l.top-r+c+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-o.top+t.height+1-(e.top-o.top)+r-s-c+"px":t.height+r-s-c+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=f<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,f<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var b=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-f;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-b+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},a.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(ge("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(ge("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(ge("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(ge("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},a.prototype.destroyAutoFillElements=function(){this.bdrAFLeft&&(this.bdrAFLeft.remove(),this.bdrAFRight.remove(),this.bdrAFBottom.remove(),this.bdrAFTop.remove(),this.bdrAFLeft=this.bdrAFRight=this.bdrAFBottom=this.bdrAFTop=null),this.autofill&&(this.autofill.remove(),this.autofill=null)},a.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},a.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},a.prototype.updateValue=function(e,t,i){var r=this.createBeforeAutoFill(e,t,i);if(!r.cancel){var n=this.parent.getColumnByIndex(t);this.parent.editModule&&i&&(n.type==="number"?this.parent.editModule.updateCell(e,n.field,parseFloat(r.value)):this.parent.editModule.updateCell(e,n.field,r.value))}},a.prototype.createBeforeAutoFill=function(e,t,i){var r=this.parent.getColumnByIndex(t),n={column:r,value:i.innerText};return this.parent.trigger(Sc,n),n},a.prototype.getAutoFillCells=function(e,t){var i=".e-cellselectionbackground",r=[].slice.call(this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll(i));return r},a.prototype.selectLikeAutoFill=function(e,t){var i=parseInt(x(this.startAFCell,ze).getAttribute(Se),10),r=parseInt(this.startAFCell.getAttribute(_e),10),n=parseInt(x(this.endAFCell,ze).getAttribute(Se),10),s=parseInt(this.endAFCell.getAttribute(_e),10),o=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case(!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!x(e.target,fe)):this.startAFCell=this.parent.getCellFromIndex(i,r),this.endAFCell=this.parent.getCellFromIndex(i+o,r+l),this.drawAFBorders();break;case(this.autoFillRLselection&&r+l<s&&s-r-l+1>n-i-o&&s-r-l+1>i-n):if(this.endAFCell=this.parent.getCellFromIndex(i+o,s),n=parseInt(x(this.endAFCell,ze).getAttribute(Se),10),s=parseInt(this.endAFCell.getAttribute(_e),10),!t)this.drawAFBorders();else{for(var h=parseInt(this.endCell.getAttribute(_e),10),p=i;p<=n;p++)for(var c=this.getAutoFillCells(p,r),d=0,f=h+1;f<=s;f++)d>l&&(d=0),this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:s})}break;case(this.autoFillRLselection&&r>s&&r-s+1>n-i-o&&r-s+1>i-n):if(this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.endCell,!t)this.drawAFBorders();else{for(var p=i;p<=i+o;p++){var c=this.getAutoFillCells(p,r);c.reverse();for(var d=0,f=this.startCellIndex-1;f>=s;f--)d>l&&(d=0),this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:i,cellIndex:s},{rowIndex:i+o,cellIndex:this.startCellIndex+l})}break;case i>n:if(this.startAFCell=this.parent.getCellFromIndex(n,r),this.endAFCell=this.endCell,!t)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(Se),10),m=g,p=i-1;p>=n;p--){m===this.startIndex-1&&(m=g);var c=this.getAutoFillCells(m,r),d=0;m--;for(var f=this.startCellIndex;f<=this.startCellIndex+l;f++)this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:n,cellIndex:r+l},{rowIndex:i+o,cellIndex:r})}break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,r+l),!t)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(Se),10),m=this.startIndex,p=g+1;p<=n;p++){m===g+1&&(m=this.startIndex);var c=this.getAutoFillCells(m,r);m++;for(var d=0,v=this.startCellIndex;v<=this.startCellIndex+l;v++)this.updateValue(p,v,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:g-o,cellIndex:r},{rowIndex:n,cellIndex:r+l})}break}},a.prototype.mouseUpHandler=function(e){this.stopTimer(),document.body.classList.remove("e-disableuserselect"),this.element&&!u(this.element.parentElement)&&se(this.element),this.isDragged&&this.selectedRowCellIndexes.length===1&&this.selectedRowCellIndexes[0].cellIndexes.length===1?this.mUPTarget=x(e.target,fe):this.mUPTarget=null;var t=M(e.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&this.selectionSettings.mode==="Cell"&&t&&t.classList.contains(fe)){var i=parseInt(t.parentElement.getAttribute(Se),10),r=parseInt(t.getAttribute(_e),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:r})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){this.preventFocus=!0;var n=x(e.target,fe);this.endAFCell=n||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,!u(this.endAFCell)&&!u(this.startAFCell)&&(this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.parent.aggregates.length>0&&this.parent.notify(Fi,{})),this.isAutoFillSel=!1,this.preventFocus=!1}S.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&S.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),S.remove(document,"mouseup",this.mouseUpHandler)},a.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},a.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=parseInt(this.target.getAttribute(_e),10),t=parseInt(this.target.getAttribute("index"),10),i=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,r=this.getAutoFillCells(i,e).filter(function(g){return g.style.display===""}),n=this.parent.getColumnByIndex(e),s=n.getFreezeTableName()==="movable",o=t<this.parent.frozenRows,l=this.parent.getFrozenMode()===ii&&n.getFreezeTableName()===Po;ke("#"+this.parent.element.id+"_autofill",x(this.target,$t))||(ke("#"+this.parent.element.id+"_autofill",this.parent.element)&&ke("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=ge("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",(this.target.classList.contains("e-leftfreeze")||this.target.classList.contains("e-rightfreeze")||this.target.classList.contains("e-fixedfreeze"))&&this.autofill.classList.add("e-freeze-autofill"),o?s?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):s?this.parent.getContentTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(o?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill)));var h=r[r.length-1];if(h&&h.offsetParent){var p=h.getBoundingClientRect(),c=h.offsetParent.getBoundingClientRect();(h.offsetParent.classList.contains("e-content")||h.offsetParent.classList.contains("e-headercontent"))&&(c=h.offsetParent.querySelector("table").getBoundingClientRect());var d=this.isLastCell(h)?4:0,f=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=c.right-p.right+p.width-4-d+"px":this.autofill.style.left=p.left-c.left+p.width-4-d+"px",this.autofill.style.top=p.top-c.top+p.height-5-f+"px"}this.autofill.style.display=""}else this.hideAutoFill()},a.prototype.mouseDownHandler=function(e){this.mouseButton=e.button;var t=e.target,i=this.parent,r,n=x(t,"e-grid");if(!(n&&n.id!==i.element.id||x(t,it)&&!this.parent.frozenRows||x(t,"e-editedbatchcell")||x(t,Ke))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),x(t,fe)&&!e.shiftKey&&!e.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,r=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||M(t,"td").classList.contains("e-selectionbackground")){this.isDragged=!1;return}r=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}r&&this.enableDrag(e,!0)}this.updateStartEndCells(),(t.classList.contains("e-autofill")||t.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},a.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Se),10),this.startCellIndex=parseInt(x(this.startCell,fe).getAttribute(_e),10))},a.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Se),10),this.startCellIndex=parseInt(x(this.startCell,fe).getAttribute(_e),10))},a.prototype.enableDrag=function(e,t){var i=this.parent;if(t){var r=M(e.target,"tr");this.startDIndex=parseInt(r.getAttribute(Se),10),this.startDCellIndex=parseInt(x(e.target,fe).getAttribute(_e),10)}document.body.classList.add("e-disableuserselect");var n=i.element.getBoundingClientRect(),s=Kr(e);this.x=s.x-n.left,this.y=s.y-n.top,S.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&S.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),S.add(document,"mouseup",this.mouseUpHandler,this)},a.prototype.clearSelAfterRefresh=function(e){var t=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll";if(e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!t&&this.clearSelection(),(e.requestType==="virtualscroll"||t)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(o){return o.isSelectable}),r=[];this.selectedRowState={},this.persistSelectedData=[];for(var n=0;n<i.length;n++){r.push(i[parseInt(n.toString(),10)].index);var s=this.getPkValue(this.primaryKey,i[parseInt(n.toString(),10)].data);this.selectedRowState[""+s]=!0,this.persistSelectedData.push(i[parseInt(n.toString(),10)].data)}this.selectedRowIndexes=r}},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:qe,handler:this.enableAfterRender},{event:ci,handler:this.initializeSelection},{event:Ac,handler:this.onActionComplete},{event:Tc,handler:this.onActionComplete},{event:vt,handler:this.onPropertyChanged},{event:Rs,handler:this.onCellFocused},{event:yu,handler:this.clearSelAfterRefresh},{event:Rn,handler:this.columnPositionChanged},{event:je,handler:this.initialEnd},{event:Ka,handler:this.rowsRemoved},{event:It,handler:this.refreshHeader},{event:_a,handler:this.destroyAutoFillElements},{event:Ie,handler:this.destroy}],ct(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(Ae,this.actionBeginFunction),this.parent.addEventListener(ce,this.actionCompleteFunction),this.addEventListener_checkbox())},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(S.remove(document,"mouseup",this.mouseUpHandler),S.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),S.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler),ct(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Ae,this.actionBeginFunction),this.parent.removeEventListener(ce,this.actionCompleteFunction),this.removeEventListener_checkbox(),this.parent.off(_a,this.destroyAutoFillElements))},a.prototype.wireEvents=function(){this.isMacOS=navigator.userAgent.indexOf("Mac OS")!==-1,this.isMacOS?(S.add(this.parent.element,"keydown",this.keyDownHandler,this),S.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||S.add(this.parent.element,"keydown",this.keyDownHandler,this)},a.prototype.unWireEvents=function(){this.isMacOS?(S.remove(this.parent.element,"keydown",this.keyDownHandler),S.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||S.remove(this.parent.element,"keydown",this.keyDownHandler)},a.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},a.prototype.refreshHeader=function(){this.setCheckAllState()},a.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++){var i=this.getPkValue(this.primaryKey,e.records[parseInt(t.toString(),10)]);delete this.selectedRowState[""+i],--this.totalRecordsCount}this.setCheckAllState()},a.prototype.beforeFragAppend=function(e){e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&this.clearSelection()},a.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},a.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())},a.prototype.render=function(e){S.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),S.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},a.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var t=this.parent;u(e.properties.type)||(this.selectionSettings.type==="Single"?(t.element.removeAttribute("aria-multiselectable"),this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()):this.selectionSettings.type==="Multiple"&&t.element.setAttribute("aria-multiselectable","true")),(!u(e.properties.mode)||!u(e.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection();var i=this.parent.getColumns().filter(function(r){return r.type==="checkbox"});i.length&&(t.isCheckBoxSelection=this.selectionSettings.checkboxMode!=="ResetOnRowClick"),this.drawBorders()}},a.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},a.prototype.initialEnd=function(){this.selectedRowIndexes.length||(this.parent.off(je,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},a.prototype.checkBoxSelectionChanged=function(){var e=this.parent;e.off(je,this.checkBoxSelectionChanged);var t=e.getColumns().filter(function(i){return i.type==="checkbox"});t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,u(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),!e.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},a.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},a.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&Object.keys(this.selectedRowState).length===0||!e.isPersistSelection)){var t=this.parent.getDataModule(),i=new re().where(this.chkField,"equal",!0);i.params||(i.params=this.parent.query.params);var r=t.getData({},i),n=this;this.parent.showSpinner(),r.then(function(s){n.dataSuccess(s.result),n.refreshPersistSelection(),n.parent.hideSpinner()})}},a.prototype.dataSuccess=function(e){for(var t=this.parent.getDataModule().isRemote()&&!u(e.result)?e.result:e,i=0;i<t.length;i++){var r=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);u(this.selectedRowState[""+r])&&t[parseInt(i.toString(),10)][this.chkField]&&(this.selectedRowState[""+r]=t[parseInt(i.toString(),10)][this.chkField])}this.persistSelectedData=t},a.prototype.setRowSelection=function(e){if(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)if(e){var d=Object.keys(this.selectedRowState),f=Object.keys(this.unSelectedRowState);if(!this.isCheckboxReset)for(var g=this.parent.groupSettings.columns.length&&this.parent.isPersistSelection?this.parent.currentViewData.records:this.parent.currentViewData,m=0,v=g;m<v.length;m++){var h=v[m];if(!u(h[this.primaryKey])){var y=h[this.primaryKey].toString();d.indexOf(y)===-1&&f.indexOf(y)===-1&&(this.selectedRowState[h[this.primaryKey]]=!0)}}}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(e)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var t=this.parent.getRowsObject().filter(function(w){return w.isSelectable}),i=0,r=t;i<r.length;i++){var n=r[i];this.selectedRowState[this.getPkValue(this.primaryKey,n.data)]=!0}else{var s=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var o=0,l=this.isPartialSelection?s:s.records;o<l.length;o++){var h=l[o];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}else for(var p=0,c=s;p<c.length;p++){var h=c[p];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}}else this.selectedRowState={}},a.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},a.prototype.getAvailableSelectedData=function(){var e=new q(this.persistSelectedData).executeLocal(this.parent.getDataModule().generateQuery(!0));return this.parent.groupSettings.columns.length&&e&&e.records&&(e=e.records.slice()),e},a.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!u(e)&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var t=[],i=0;i<e.length;i++){var r=this.getRowObj(e[parseInt(i.toString(),10)]),n=r&&r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;if(!(this.isPartialSelection&&!r.isSelectable)){var s=void 0,o=e[parseInt(i.toString(),10)].querySelector(".e-checkselect");this.selectedRowState[""+n]||this.parent.checkAllRows==="Check"&&this.selectedRowState[""+n]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(n)<0||this.parent.checkAllRows==="Uncheck"&&this.chkAllCollec.indexOf(n)>0&&!this.parent.selectedRowIndex||this.parent.checkAllRows==="Intermediate"&&!u(this.chkField)&&r.data[this.chkField]?(t.push(parseInt(e[parseInt(i.toString(),10)].getAttribute(Se),10)),s=!0):(s=!1,this.checkedTarget!==o&&this.parent.isCheckBoxSelection&&o&&En(o.nextElementSibling,s)),this.updatePersistCollection(e[parseInt(i.toString(),10)],s)}}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick")&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},a.prototype.actionBegin=function(e){if(e.requestType==="save"&&this.parent.isPersistSelection){var t=this.parent.element.querySelector(".e-edit-checkselect");if(!u(t)){var i=M(t,"."+Ke);if(i){this.parent.editSettings.mode==="Dialog"&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var r=this.getRowObj(i);if(!r)return;this.selectedRowState[this.getPkValue(this.primaryKey,r.data)]=r.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&(e.requestType==="paging"&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[]),(e.requestType==="filtering"||e.requestType==="searching")&&(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},a.prototype.actionComplete=function(e){if(e.requestType==="save"&&this.parent.isPersistSelection){if(e.action==="add"){if(this.isCheckedOnAdd){var t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,t.data)]=t.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if(e.requestType==="delete"&&this.parent.isPersistSelection){for(var i=e.data,r=i.slice(),n=0;n<r.length;n++){var s=this.getPkValue(this.primaryKey,r[parseInt(n.toString(),10)]);u(s)||this.updatePersistDelete(s,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if(e.requestType==="paging"){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(var o=this.parent.getRowsObject(),l=[],n=0;n<o.length;n++)o[parseInt(n.toString(),10)].isSelectable&&l.push(o[parseInt(n.toString(),10)].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},a.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked&&(this.parent.checkAllRows==="Intermediate"?this.setRowSelection(!0):this.parent.checkAllRows==="Uncheck"&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var e=this.parent.getRowsObject(),t=[],i=0;i<e.length;i++)e[parseInt(i.toString(),10)].isSelected&&t.push(i);t.length&&this.selectRows(t),this.initialRowSelection=!0}},a.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var t=this.parent.getRows(),i=0;i<t.length;i++)this.updatePersistCollection(t[parseInt(i.toString(),10)],e);this.parent.checkAllRows==="Uncheck"?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[]):this.parent.checkAllRows==="Check"&&(this.setRowSelection(!0),this.persistSelectedData=!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection?this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice():this.persistSelectedData)}},a.prototype.checkSelectAllAction=function(e){var t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!u(i)){var r=i.querySelector(".e-edit-checkselect");u(r)||En(r.nextElementSibling,e)}},a.prototype.checkSelectAll=function(e){var t=this,i=this.getCheckAllStatus(e),r=i==="Check";if(this.isHeaderCheckboxClicked=!0,(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(i==="Uncheck"||this.isCheckboxReset||i==="Intermediate"&&this.parent.isPersistSelection)?this.rmtHdrChkbxClicked=!0:this.rmtHdrChkbxClicked=!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,i==="Intermediate"&&(!this.chkField&&!this.parent.isPersistSelection&&(r=this.getCurrentBatchRecordChanges().some(function(s){return t.getPkValue(t.primaryKey,s)in t.selectedRowState})),(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.isPersistSelection)){for(var n=0;n<this.getCurrentBatchRecordChanges().length;n++)if(!u(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+n])))if(Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+n]).toString()))r=!0;else{r=!1;break}}this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!r),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(e,!r)},a.prototype.getCheckAllStatus=function(e){var t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList,i;return t.contains("e-check")?i="Check":t.contains("e-uncheck")?i="Uncheck":t.contains("e-stop")?i="Intermediate":i="None",i},a.prototype.checkSelect=function(e){var t=M(this.checkedTarget,"."+fe),i=this.parent;this.isMultiCtrlRequest=!0;var r=0;if(this.isHeaderCheckboxClicked=!1,pi(i)){var n=t.parentElement.getAttribute("data-uid");this.parent.enableVirtualization&&this.parent.groupSettings.columns.length?r=parseInt(t.parentElement.getAttribute(Se),10):r=i.getRows().map(function(s){return s.getAttribute("data-uid")}).indexOf(n)}else r=parseInt(t.parentElement.getAttribute(Se),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Wt).length>0&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.editSettings.showAddNewRow&&++r,this.rowCellSelectionHandler(r,parseInt(t.getAttribute(_e),10)),this.moveIntoUncheckCollection(M(t,"."+ze)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},a.prototype.moveIntoUncheckCollection=function(e){if(this.parent.checkAllRows==="Check"||this.parent.checkAllRows==="Uncheck"){var t=this.getRowObj(e),i=t&&t.data?this.getPkValue(this.primaryKey,t.data):null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},a.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger(yc,{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},a.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&this.parent.checkAllRows!=="Uncheck")for(var e=this.parent.getRowsObject().filter(function(o){return o.isSelectable}),t=0,i=e;t<i.length;t++){var r=i[t];this.selectedRowIndexes.push(r.index)}if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.isPartialSelection&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.parent.isPersistSelection&&this.parent.checkAllRows==="Check"){var e=this.parent.getRowsObject().filter(function(l){return l.isSelectable});if(e.length!==this.selectedRowIndexes.length)for(var n=0,s=e;n<s.length;n++){var r=s[n];this.selectedRowIndexes.indexOf(r.index)<=-1&&this.selectedRowIndexes.push(r.index)}}},a.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection)if(this.parent.checkAllRows==="Check"){this.selectedRowIndexes=[];for(var t=this.parent.groupSettings.columns.length?this.getData().records.length:this.getData().length,i=0;i<t;i++)this.selectedRowIndexes.push(i)}else if(this.parent.checkAllRows==="Uncheck")this.selectedRowIndexes=[];else{var r=this.parent.getRowByIndex(e);if(e&&r&&r.getAttribute("aria-selected")==="false"){var n=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(n,1)}}},a.prototype.isAllSelected=function(e){if(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)return this.getAvailableSelectedData().length===(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.parent.totalDataRecordsCount:this.totalRecordsCount);if(this.isPartialSelection)if(this.parent.allowPaging&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var t=this.parent.partialSelectedRecords,i=0;i<t.length;i++){var r=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}else return this.isSelectAllRowCount(e);else{for(var t=this.parent.groupSettings.columns.length?this.getData().records:this.getData(),i=0;i<t.length;i++){var r=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}},a.prototype.someDataSelected=function(){if((this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length))for(var e=this.getAvailableSelectedData(),t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[parseInt(t.toString(),10)]);if(this.selectedRowState[""+i])return!1}for(var r=this.isPartialSelection?this.parent.partialSelectedRecords:this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?[]:this.getData(),t=0;t<r.length;t++){var i=this.getPkValue(this.primaryKey,r[parseInt(t.toString(),10)]);if(this.selectedRowState[""+i])return!1}return!0},a.prototype.setCheckAllState=function(e,t){if(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick"){var i=!1,r=!1,n=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!((this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.isPartialSelection)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(r=!0,i=this.isAllSelected(n));var s=this.getCheckAllBox();if(s){var o=s.nextElementSibling;N([o],["e-check","e-stop","e-uncheck"]),Yt(s,!1),s.indeterminate=!1;var l=this.parent.getDataModule().isRemote()?[]:this.parent.groupSettings.columns.length?this.getData().records:this.getData();if(i&&r&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result||l.length)||!r&&(n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(n)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&l.length&&n===l.length||(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&(n===this.parent.totalDataRecordsCount||(this.isSelectAllRowCount(n)||n===this.totalRecordsCount)&&!this.parent.isPersistSelection)||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(n)))||n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.allowPaging&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling)?(R([o],["e-check"]),Yt(s,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!r||r&&this.someDataSelected())||n===0&&this.getCurrentBatchRecordChanges().length===0)&&!this.parent.allowPaging||this.parent.allowPaging&&(n===0||n&&r&&this.someDataSelected())?(R([o],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck"):(R([o],["e-stop"]),this.parent.checkAllRows="Intermediate",s.indeterminate=!0),n===0&&this.getCurrentBatchRecordChanges().length===0?R([o.parentElement],["e-checkbox-disabled"]):N([o.parentElement],["e-checkbox-disabled"]),this.isPartialSelection){var h=this.parent.getRowsObject().filter(function(p){return p.isSelectable}).length;h===0&&o.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?R([o.parentElement],["e-checkbox-disabled"]):N([o.parentElement],["e-checkbox-disabled"])}(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.updateSelectedRowIndex(e)}}},a.prototype.isSelectAllRowCount=function(e){var t=0,i=this.parent.getRowsObject();if(this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var r=this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length;return r===i.length?(t=i.filter(function(n){return n.isSelectable}).length,t&&e===t):!1}else return this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(t=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length,t===this.totalRecordsCount?this.parent.partialSelectedRecords.length&&e===this.parent.partialSelectedRecords.length:!1):(t=i.filter(function(n){return n.isSelectable}).length,t&&e===t)},a.prototype.keyDownHandler=function(e){((T.info.name==="chrome"||T.info.name==="safari")&&(e.keyCode===91||e.keyCode===93)||T.info.name==="opera"&&e.keyCode===17||T.info.name==="mozilla"&&e.keyCode===224)&&(this.cmdKeyPressed=!0);var t=x(e.target,"e-headercell"),i=x(e.target,fe),r=t?t.children[0].classList.contains("e-headerchkcelldiv"):i?i.classList.contains("e-gridchkbox"):!1;r&&!this.parent.allowKeyboard&&e.keyCode===32&&e.preventDefault()},a.prototype.keyUpHandler=function(e){((T.info.name==="chrome"||T.info.name==="safari")&&(e.keyCode===91||e.keyCode===93)||T.info.name==="opera"&&e.keyCode===17||T.info.name==="mozilla"&&e.keyCode===224)&&(this.cmdKeyPressed=!1)},a.prototype.clickHandler=function(e){var t=e.target;this.actualTarget=t,!this.isAutoFillSel&&!e.ctrlKey&&!e.shiftKey&&(this.startAFCell=this.endAFCell=null),this.selectionSettings.persistSelection&&(this.deSelectedData=bs(this.persistSelectedData)),(x(t,ze)||x(t,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&t.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.cmdKeyPressed=e.metaKey,this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=e.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.popUpClickHandler(e);var i=!1;this.preventFocus=!0;var r,n=x(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&x(t,ze)),this.selectionSettings.persistSelection&&this.isPartialSelection&&x(t,"e-headerchkcelldiv")&&!t.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(r=n.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),this.updateAutoFillPosition(),t=x(t,fe),this.parent.isReact&&t&&!t.parentElement&&t.classList.contains("e-rowcell")&&(t=this.parent.getCellFromIndex(parseInt(t.getAttribute("index"),10),parseInt(t.getAttribute("data-colindex"),10))),this.isRowDragSelected&&u(t)&&this.parent.allowRowDragAndDrop&&this.selectionSettings.persistSelection&&this.checkSelectAllClicked&&(this.isRowDragSelected=!1),(t&&t.parentElement.classList.contains(ze)&&!this.parent.selectionSettings.checkboxOnly||i)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,!u(r))this.checkedTarget=r,r.classList.contains("e-checkselectall")?this.checkSelectAll(r):this.checkSelect(r);else{var s=0;s=parseInt(t.parentElement.getAttribute(Se),10),this.parent.isPersistSelection&&!this.parent.editSettings.showAddNewRow&&this.parent.element.getElementsByClassName(Wt).length>0&&++s,(!this.mUPTarget||!this.mUPTarget.isEqualNode(t))&&this.rowCellSelectionHandler(s,parseInt(t.getAttribute(_e),10)),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(M(t,"."+ze)),this.setCheckAllState())}!this.parent.isCheckBoxSelection&&T.isDevice&&!this.isSingleSel()&&this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){var o=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(o))}this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.isMultiShiftRequest=!1,u(M(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},a.prototype.popUpClickHandler=function(e){var t=e.target;M(t,".e-headercell")||e.target.classList.contains(fe)||M(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},a.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||Wu(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>1||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},a.prototype.rowCellSelectionHandler=function(e,t){if(!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel())this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders();else if(this.isMultiShiftRequest)this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!M(this.target,"."+fe).classList.contains(_r)?this.selectRowsByRange(nt(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(nt(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders();else{if(this.addRowsToSelection([e]),this.selectionSettings.mode==="Both"){var i=this.parent.getColumns().find(function(n){return n.type==="checkbox"}),r=i&&i.index!==t;r&&!this.isMultiCtrlRequestCell?this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle):(!i||r)&&this.addCellsToSelection([{rowIndex:e,cellIndex:t}])}else this.addCellsToSelection([{rowIndex:e,cellIndex:t}]);this.showHideBorders("none")}this.isDragged=!1},a.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if(e.keyArgs.action==="upArrow")this.parent.allowFiltering?e.isJump=e.element.tagName==="INPUT":e.isJump=e.element.tagName==="TH";else if(e.keyArgs.action==="downArrow"){var t=Number(e.element.parentElement.getAttribute(Se));e.isJump=t===0}else e.keyArgs.action==="ctrlHome"&&(e.isJump=!0);var i=(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&e.keyArgs.action==="space")&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),r=e.container.isHeader&&e.element.tagName!=="TD"&&!M(e.element,"."+fe)&&!(e.byKey&&e.keyArgs.action==="space");if(!e.byKey||i){i&&!this.parent.isCheckBoxSelection&&this.clearSelection();return}var n=e.container.isContent?e.container.indexes:e.indexes,s=n[0],o=n[1],l=this.focus.getPrevIndexes();if((e.element.parentElement.querySelector(".e-rowcelldrag")||e.element.parentElement.querySelector(".e-dtdiagonalright")||e.element.parentElement.querySelector(".e-dtdiagonaldown"))&&(l.cellIndex=l.cellIndex-1),this.parent.frozenRows)if(e.container.isHeader&&(e.element.tagName==="TD"||M(e.element,"."+fe))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&e.keyArgs.action==="upArrow"&&h++,s-=h,l.rowIndex=u(l.rowIndex)?null:l.rowIndex-h}else s+=this.parent.frozenRows,l.rowIndex=l.rowIndex===0||!u(l.rowIndex)?l.rowIndex+this.parent.frozenRows:null;if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(s=parseInt(e.element.parentElement.getAttribute("data-rowindex"),10)),!((r||["ctrlPlusA","escape"].indexOf(e.keyArgs.action)===-1&&e.keyArgs.action!=="space"&&s===l.rowIndex&&o===l.cellIndex)&&!this.selectionSettings.allowColumnSelection)){this.parent.enableVirtualization&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(s=parseInt(e.element.parentElement.getAttribute("data-rowindex"),10)),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e.keyArgs.action==="downArrow"&&s--,this.preventFocus=!0;var p=this.getKeyColIndex(e);if(this.needColumnSelection&&(o=p),this.parent.element.classList.contains("e-gridcell-read")&&(e.keyArgs.action==="tab"||e.keyArgs.action==="shiftTab"||e.keyArgs.action==="rightArrow"||e.keyArgs.action==="leftArrow")){var c=this.target.getAttribute("aria-label");c=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(o).field,this.target.setAttribute("aria-label",c)}switch(e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(s,o);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(s,o);break;case"shiftDown":case"shiftUp":this.shiftDownKey(s,o);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(s,o);break;case"home":case"end":o=e.keyArgs.action==="end"?this.getLastColIndex(s):0,this.applyHomeEndKey(s,o);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(s,o);break;case"escape":this.clearSelection(),this.parent.clipboardModule&&window.navigator.clipboard.writeText("");break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(s);break}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.updateAutoFillPosition()}},a.prototype.getKeyColIndex=function(e){var t,i=null,r=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&x(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,r){if(e.keyArgs.action==="rightArrow"||e.keyArgs.action==="leftArrow")return i;t=r.getAttribute("e-mappinguid");var n=this.getstackedColumns(this.parent.getColumnByUid(t).columns),s=this.parent.getColumnIndexByUid(n[n.length-1].uid),o=this.parent.getColumnIndexByUid(n[0].uid);i=this.prevColIndex>=s?o:s}else i=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i},a.prototype.ctrlPlusA=function(){if(this.isRowType()&&!this.isSingleSel()){var e=this.parent.getRowsObject();this.selectRowsByRange(e[0].index,e[e.length-1].index)}this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},a.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},a.prototype.applyDownUpKey=function(e,t){var i=this.parent;this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows?(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)):(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)},a.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var t=parseInt(this.target.getAttribute(_e),10),i=this.contentRenderer.getRowByIndex(e);if(i&&(this.target=i.getElementsByClassName(fe)[parseInt(t.toString(),10)]),this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")){var r=this.target.getAttribute("aria-label");r=this.target.innerHTML,this.target.setAttribute("aria-label",r)}}},a.prototype.applyRightLeftKey=function(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},a.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},a.prototype.shiftDownKey=function(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(nt(this.prevRowIndex)?this.isPartialSelection?this.selectRow(e,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},a.prototype.applyShiftLeftRightKey=function(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},a.prototype.getstackedColumns=function(e){for(var t=[],i=0,r=e.length;i<r;i++)e[parseInt(i.toString(),10)].columns?this.getstackedColumns(e[parseInt(i.toString(),10)].columns):t.push(e[parseInt(i.toString(),10)]);return t},a.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},a.prototype.addRemoveClassesForRow=function(e,t,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];if(e){var s=[].slice.call(e.getElementsByClassName(fe)),o=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),l=e.querySelector(".e-rowdragdrop");o&&s.push(o),l&&s.push(l),Mi.apply(void 0,[s,t].concat(r))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)},a.prototype.isRowType=function(){return this.selectionSettings.mode==="Row"||this.selectionSettings.mode==="Both"},a.prototype.isCellType=function(){return this.selectionSettings.mode==="Cell"||this.selectionSettings.mode==="Both"},a.prototype.isSingleSel=function(){return this.selectionSettings.type==="Single"},a.prototype.getRenderer=function(){return u(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(Vt.Content)),this.contentRenderer},a.prototype.getSelectedRecords=function(){var e=[];return!this.selectionSettings.persistSelection&&this.selectedRecords.length?e=this.parent.getRowsObject().filter(function(t){return t.isSelected}).map(function(t){return t.data}):e=this.persistSelectedData,e},a.prototype.selectColumn=function(e){var t=this.parent;if(!u(t.getColumns()[parseInt(e.toString(),10)])){var i=t.getColumnByIndex(e),r=t.getColumnHeaderByUid(i.uid),n=r.classList.contains("e-columnselection");if(t.selectionSettings.allowColumnSelection){var s=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!n||!this.selectionSettings.enableToggle||s){var o={columnIndex:e,headerCell:r,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(o,ha),o.cancel){this.disableInteracted();return}(!(t.selectionSettings.enableToggle&&e===this.prevColIndex&&n)||s)&&this.updateColSelection(r,e);var l={columnIndex:e,headerCell:r,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(l,ua)}this.updateColProps(e)}}},a.prototype.selectColumnsByRange=function(e,t){var i=this.parent;if(!u(i.getColumns()[parseInt(e.toString(),10)])){var r=[];if(i.selectionSettings.type==="Single"||u(t))r[0]=e;else for(var n=e<t,s=e;n?s<=t:s>=t;n?s++:s--)r.push(s);this.selectColumns(r)}},a.prototype.selectColumns=function(e){var t=this.parent,i=this.getselectedCols();if(t.selectionSettings.type==="Single"&&(e=[e[0]]),!!t.selectionSettings.allowColumnSelection){this.clearColDependency();var r={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,ha),r.cancel){this.disableInteracted();return}for(var n=0,s=e.length;n<s;n++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[parseInt(n.toString(),10)]).uid),e[parseInt(n.toString(),10)]);i=this.getselectedCols();var o={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,ua),this.updateColProps(e[0])}},a.prototype.selectColumnWithExisting=function(e){var t=this.parent;if(!u(t.getColumns()[parseInt(e.toString(),10)])){var i=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid),r=this.getselectedCols();if(t.selectionSettings.type==="Single"&&this.clearColDependency(),!!t.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{var n={columnIndex:e,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,ha),n.cancel){this.disableInteracted();return}this.updateColSelection(i,e),r=this.getselectedCols();var s={columnIndex:e,headerCell:r,column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(s,ua)}this.updateColProps(e)}}},a.prototype.clearColumnSelection=function(e){if(this.isColumnSelected){var t=this.parent;if(!u(e)&&this.selectedColumnsIndexes.indexOf(e)===-1)return;var i=u(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,r=t.getColumnByIndex(i),n=t.getColumnHeaderByUid(r.uid),s={columnIndex:i,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:r,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted},o=this.columnDeselect(s,nc);if(o){this.disableInteracted();return}for(var l=u(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[n],h=this.getSelectedColumnCells(e),p=0,c=l.length;p<c;p++)Mi([l[parseInt(p.toString(),10)]],!1,"e-columnselection");for(var p=0,c=h.length;p<c;p++)Mi([h[parseInt(p.toString(),10)]],!1,"e-columnselection");u(e)?(this.columnDeselect(s,sc),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(d){return d.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[parseInt(e.toString(),10)].isSelected=!1)}},a.prototype.getselectedCols=function(){var e=this.parent,t;if(this.selectedColumnsIndexes.length>1){t=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)t.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[parseInt(i.toString(),10)]).uid))}else t=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return t},a.prototype.getSelectedColumnCells=function(e){for(var t=this.parent,i=!u(this.parent.rowTemplate),r=i?t.getRows():t.getDataRows(),n=[],s=u(e)?".e-columnselection":'[data-colindex="'+e+'"]',o=0,l=r.length;o<l;o++)n=n.concat([].slice.call(r[parseInt(o.toString(),10)].querySelectorAll(s)));return n},a.prototype.columnDeselect=function(e,t){return t==="columnDeselected"&&delete e.cancel,this.onActionComplete(e,t),e.cancel},a.prototype.updateColProps=function(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},a.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},a.prototype.updateColSelection=function(e,t){if(!u(this.parent.getColumns()[parseInt(t.toString(),10)])){var i=!u(this.parent.rowTemplate),r=i?this.parent.getRows():this.parent.getDataRows();this.selectedColumnsIndexes.push(t),this.parent.getColumns()[parseInt(t.toString(),10)].isSelected=!0,t=t+this.parent.getIndentCount(),Mi([e],!0,"e-columnselection");for(var n=0,s=r.length;n<s;n++)if(r[parseInt(n.toString(),10)].classList.contains(ze))if((r[parseInt(n.toString(),10)].classList.contains(Ke)||r[parseInt(n.toString(),10)].classList.contains(Wt))&&this.parent.editSettings.mode==="Normal"&&!u(r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(t.toString(),10)]))Mi([r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(t.toString(),10)]],!0,"e-columnselection");else if(this.parent.isSpan&&this.parent.isFrozenGrid())for(var o=r[parseInt(n.toString(),10)].querySelectorAll(".e-rowcell"),l=0;l<o.length;l++)o[parseInt(l.toString(),10)].getAttribute("aria-colindex")===e.getAttribute("aria-colindex")&&Mi([o[parseInt(l.toString(),10)]],!0,"e-columnselection");else u(r[parseInt(n.toString(),10)].childNodes[parseInt(t.toString(),10)])||Mi([r[parseInt(n.toString(),10)].childNodes[parseInt(t.toString(),10)]],!0,"e-columnselection")}},a.prototype.headerSelectionHandler=function(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(nt(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)},a.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on(Qr,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Qt,this.onDataBoundFunction),this.parent.on(Cl,this.onDataBoundFunction),this.parent.on(je,this.checkBoxSelectionChanged,this),this.parent.on(so,this.initPerisistSelection,this),this.parent.on(Ci,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(ce,this.actionCompleteFunc),this.parent.on(Ut,this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(Ga,this.resizeEndFn)},a.prototype.removeEventListener_checkbox=function(){this.parent.off(Qr,this.dataReady),this.parent.removeEventListener(Qt,this.onDataBoundFunction),this.parent.removeEventListener(ce,this.actionCompleteFunc),this.parent.off(Cl,this.onDataBoundFunction),this.parent.off(Ci,this.setCheckAllForEmptyGrid),this.parent.off(Ut,this.clickHandler),this.parent.removeEventListener(Ga,this.resizeEndFn),this.parent.off(so,this.initPerisistSelection)},a.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();if(e){this.parent.isCheckBoxSelection=!0;var t=e.nextElementSibling;N([t],["e-check","e-stop","e-uncheck"]),R([t.parentElement],["e-checkbox-disabled"])}},a.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1;var t=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll";e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!t&&(this.disableUI=!this.parent.enableImmutableMode&&!(e.requestType==="save"&&e.action==="add"),this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},a.prototype.actionCompleteHandler=function(e){e.requestType==="save"&&this.parent.isPersistSelection&&this.refreshPersistSelection()},a.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,u(this.parent.selectedRowIndex)||this.parent.selectedRowIndex===-1||!this.parent.enablePersistence?this.parent.selectedRowIndex=e:this.parent.selectedRowIndex=-1},a.prototype.disableInteracted=function(){this.isInteracted=!1},a.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},a}(),Nu=function(){function a(e){this.parent=e,this.addEventListener()}return a.prototype.hasNonNumericCharacters=function(e){for(var t=!1,i=0,r=e;i<r.length;i++){var n=r[i];if((n<"0"||n>"9")&&n!==".")return!0;if(n==="."){if(t)return!0;t=!0}}return!1},a.prototype.search=function(e){var t=this.parent;if(e=u(e)?"":e,qi(t)){t.notify(Jt,{instance:this,handler:this.search,arg1:e});return}e!==t.searchSettings.key?(e!==""&&!this.hasNonNumericCharacters(e)?e==="."?t.searchSettings.key=e.toString():t.searchSettings.key=parseFloat(e).toString():t.searchSettings.key=e.toString(),t.dataBind()):this.refreshSearch&&t.refresh()},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(vt,this.onPropertyChanged,this),this.parent.on(al,this.onSearchComplete,this),this.parent.on(Ie,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(ce,this.actionCompleteFunc),this.parent.on(Fs,this.cancelBeginEvent,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(vt,this.onPropertyChanged),this.parent.off(al,this.onSearchComplete),this.parent.off(Ie,this.destroy),this.parent.removeEventListener(ce,this.actionCompleteFunc),this.parent.off(Fs,this.cancelBeginEvent))},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(u(e.properties.key)?this.parent.notify(qt,{requestType:"searching",type:Ae}):this.parent.notify(qt,{requestType:"searching",type:Ae,searchString:this.parent.searchSettings.key}))},a.prototype.onSearchComplete=function(e){this.parent.trigger(ce,P(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:ce}))},a.prototype.onActionComplete=function(e){this.refreshSearch=e.requestType!=="searching"},a.prototype.cancelBeginEvent=function(e){e.requestType==="searching"&&this.parent.setProperties({searchSettings:{key:""}},!0)},a.prototype.getModuleName=function(){return"search"},a}(),Df=function(){function a(e){this.colName=[],this.isShowHide=!1,this.parent=e,this.addEventListener(),this.widthService=new Ks(e)}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Hr,handler:this.batchChanges},{event:Vd,handler:this.resetColumnState}],ct(this.parent,this.evtHandlers,!0,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||ct(this.parent,this.evtHandlers,!1)},a.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},a.prototype.show=function(e,t){var i=this.getToggleFields(e),r=this.getColumns(i,t);this.parent.notify(vr,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!0;this.setVisible(r)},a.prototype.hide=function(e,t){var i=this.getToggleFields(e),r=this.getColumns(i,t);this.parent.notify(vr,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!1;this.setVisible(r)},a.prototype.getToggleFields=function(e){var t=[];return typeof e=="string"?t=[e]:t=e,t},a.prototype.getColumns=function(e,t){var i=this,r=pr(e,function(n){return pr(i.parent.columnModel,function(s){if(s[""+t]===n)return s})[0]});return r},a.prototype.batchActionPrevent=function(e,t){return t===void 0&&(t=[]),qi(this.parent)?(this.colName=e,this.changedCol=t,this.parent.closeEdit(),!1):!0},a.prototype.resetColumnState=function(){if(this.isShowHide)for(var e=0;e<this.colName.length;e++)this.colName[parseInt(e.toString(),10)].visible=!this.colName[parseInt(e.toString(),10)].visible},a.prototype.setVisible=function(e,t){var i=this;if(t===void 0&&(t=[]),this.isShowHide=!0,!!this.batchActionPrevent(e,t)){t=t.length>0?t:e;var r={requestType:"columnstate",cancel:!1,columns:t},n="cancel";if(this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(Ae,r,function(o){var l=i.parent.getColumns();if(e=u(e)?l:e,o[""+n]){i.parent.notify(no,{showHideArgs:o}),e.length>0&&(e[0].visible=!0);return}pi(i.parent)&&i.parent.contentModule.emptyVcRows();var h=i.parent.element.querySelector(".e-addedrow");if(i.parent.editSettings.showAddNewRow&&h&&(se(h),(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&(i.parent.isAddNewRow=!0),i.parent.addNewRowFocus=!0,i.parent.isEdit=!1),i.parent.allowSelection&&i.parent.getSelectedRecords().length&&!i.parent.selectionSettings.persistSelection&&i.parent.clearSelection(),i.parent.enableColumnVirtualization){var p=e.filter(function(f){return l.some(function(g){return f.field===g.field})});p.length&&i.parent.notify(As,e)}else i.parent.isFrozenGrid()&&e.length&&i.parent.notify(Os,{isModeChg:!0}),i.parent.notify(As,e);var c={requestType:"columnstate",columns:t};i.parent.trigger(ce,c);var d=!i.parent.element.querySelector(".e-addedrow");i.parent.editSettings.showAddNewRow&&d&&(i.parent.isEdit=!1,i.parent.addRecord(),i.parent.enableVirtualization||i.parent.enableInfiniteScrolling||i.parent.notify(Vi,{})),i.parent.columnQueryMode!=="All"&&i.parent.refresh()}),!this.parent.groupSettings.columns.length){if(this.parent.autoFit)this.parent.preventAdjustColumns();else if(this.parent.allowResizing&&this.parent.resizeSettings.mode==="Normal"){var s=this.parent.getHeaderTable().style.width.indexOf("px")===-1;this.widthService.setWidthToTable(s)}}}},a}(),kf=function(){function a(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Ks(e),this.addEventListener()}return a.prototype.getModuleName=function(){return"scroll"},a.prototype.setWidth=function(e){if(this.parent.element.style.width=Le(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element){var t=this.parent.toolbarModule.toolbar.element,i=t.querySelector(".e-toolbar-left"),r=t.querySelector(".e-toolbar-center"),n=t.querySelector(".e-toolbar-right"),s=t.querySelector(".e-toolbar-items"),o=i?i.clientWidth:0,l=r?r.clientWidth:0,h=n?n.clientWidth:0,p=s?s.clientWidth:0,c=t?t.clientWidth:0;(!this.parent.enableAdaptiveUI||o>c||l>c||h>c||p>c)&&this.parent.toolbarModule.toolbar.refreshOverflow()}},a.prototype.setHeight=function(){var e=0,t=this.parent.getContent().querySelector("."+ut),i=this.parent.height;if(this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&this.parent.height!=="auto"&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-a.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&this.parent.height!=="auto"){var r=this.parent.getHeaderContent().querySelector(me+":not(.e-masked-tbody)");if(e=r?r.offsetHeight:0,r&&e){var n=r.getElementsByClassName(Wt).length,s=n*this.parent.getRowHeight();e-=s}else!this.parent.isInitialLoad&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(i=parseInt(i,10)-this.parent.frozenRows*this.parent.getRowHeight());t.style.height=Le(i-e)}else t.style.height=Le(i);this.ensureOverflow(t),this.parent.isFrozenGrid()&&this.refresh()},a.prototype.setPadding=function(){var e=this.parent.getHeaderContent(),t=a.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties();e.querySelector("."+it).style[i.border]=t>0?"1px":"0px",e.style[i.padding]=t>0?t+"px":"0px"},a.prototype.removePadding=function(e){var t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector("."+it);i.style[t.border]="",i.parentElement.style[t.padding]="";var r=this.parent.getFooterContent();r&&r.classList.contains("e-footerpadding")&&r.classList.remove("e-footerpadding")},a.prototype.refresh=function(){if(this.parent.height==="100%"){var e=this.parent.getContent();this.parent.element.style.height="100%";var t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)"}},a.prototype.getThreshold=function(){var e=T.info.name;return e==="mozilla"?.5:1},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ci,this.wireEvents,this),this.parent.on(je,this.wireEvents,this),this.parent.on(qe,this.onPropertyChanged,this),this.parent.on(Xa,this.wireEvents,this),this.parent.on(It,this.setScrollLeft,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ci,this.wireEvents),this.parent.off(je,this.wireEvents),this.parent.off(qe,this.onPropertyChanged),this.parent.off(Xa,this.wireEvents),this.parent.off(It,this.setScrollLeft),this.unwireEvents())},a.prototype.unwireEvents=function(){this.parent.frozenRows&&this.header&&(S.remove(this.header,"touchstart pointerdown",this.setPageXY),S.remove(this.header,"touchmove pointermove",this.onTouchScroll));var e=this.parent.getContent()?this.parent.getContent().querySelector(".e-movablescrollbar"):null;this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&(e&&S.remove(e,"scroll",this.onCustomScrollbarScroll),this.content&&(S.remove(this.content,"scroll",this.onCustomScrollbarScroll),S.remove(this.content,"touchstart pointerdown",this.setPageXY),/macintosh|ipad/.test(T.userAgent.toLowerCase())&&T.isDevice||S.remove(this.content,"touchmove pointermove",this.onTouchScroll)),this.header&&(S.remove(this.header,"scroll",this.onCustomScrollbarScroll),S.remove(this.header,"touchstart pointerdown",this.setPageXY),S.remove(this.header,"touchmove pointermove",this.onTouchScroll))),this.content&&S.remove(this.content,"scroll",this.contentScrollHandler),this.header&&S.remove(this.header,"scroll",this.headerScrollHandler),this.contentScrollHandler=null,this.headerScrollHandler=null,this.parent.aggregates.length&&this.parent.getFooterContent()&&S.remove(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll)},a.prototype.setScrollLeft=function(){this.parent.getHeaderContent().querySelector("."+it).scrollLeft=this.previousValues.left},a.prototype.onContentScroll=function(e){var t=this,i=e,r=i.classList.contains(it);return function(n){if(!(t.content.querySelector(me)===null||t.parent.isPreventScrollEvent)){var s=n.target;if(t.parent.frozenRows&&(t.content.scrollTop>0&&t.parent.frozenRows?R([t.parent.element],"e-top-shadow"):N([t.parent.element],"e-top-shadow")),t.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length){var o=t.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])'),l=t.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])');s.scrollLeft!==0&&t.parent.getVisibleFrozenLeftCount()?R([t.parent.element],"e-left-shadow"):N([t.parent.element],"e-left-shadow");var h=Math.round((t.parent.enableRtl?s.scrollWidth+s.scrollLeft:s.scrollWidth-s.scrollLeft)+(t.parent.height==="auto"?0:1));h===s.offsetWidth&&t.parent.getVisibleFrozenRightCount()?N([t.parent.element],"e-right-shadow"):R([t.parent.element],"e-right-shadow");var p=[].slice.call(t.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)"));if((p.length===1&&o.length||t.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])')||l.length)&&s.scrollLeft!==t.previousValues.left){s.scrollLeft=t.previousValues.left;return}if(p.length!==1&&(o.length||l.length)&&s.scrollTop!==t.previousValues.top){s.scrollTop=t.previousValues.top;return}}var c=s.scrollLeft;if(!u(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling&&(!t.parent.isEdit||t.parent.editSettings.showAddNewRow&&!t.parent.element.querySelector(".e-editedrow"))&&t.parent.notify(pd,{target:n.target,isLeft:t.previousValues.left!==c}),t.parent.groupSettings.columns.length&&t.parent.groupSettings.enableLazyLoading){var d=t.previousValues.top<t.parent.getContent().firstElementChild.scrollTop;t.parent.notify(Sd,{scrollDown:d})}t.parent.notify(sd,{});var f=s.classList.contains("e-summarycontent");if(t.previousValues.left===c){t.previousValues.top=r?s.scrollTop:t.previousValues.top;return}t.parent.notify(ro,n),i.scrollLeft=c,f&&(t.header.scrollLeft=c),t.previousValues.left=c,t.parent.notify(ll,{left:c})}}},a.prototype.onCustomScrollbarScroll=function(e,t){var i=this,r=e,n=t;return function(s){if(i.content.querySelector(me)!==null){var o=s.target,l=o.scrollLeft;i.previousValues.left!==l&&(r.scrollLeft=l,n.scrollLeft=l,i.previousValues.left=l,i.parent.notify(ll,{left:l}),i.parent.isDestroyed)}}},a.prototype.onTouchScroll=function(e){var t=this,i=e;return function(r){if(r.pointerType!=="mouse"){var n=t.parent.isFrozenGrid(),s=t.getPointXY(r),o=i.scrollLeft+(t.pageXY.x-s.x),l=t.parent.getHeaderContent().querySelector("."+it),h=t.parent.getContent().querySelector("."+ut);if(!(t.previousValues.left===o||o<0||l.scrollWidth-l.clientWidth<o)){if(r.preventDefault(),l.scrollLeft=o,h.scrollLeft=o,n&&t.parent.enableColumnVirtualization){var p=t.parent.getContent().querySelector(".e-movablescrollbar");p.scrollLeft=o}t.pageXY.x=s.x,t.previousValues.left=o}}}},a.prototype.setPageXY=function(){var e=this;return function(t){t.pointerType!=="mouse"&&(e.pageXY=e.getPointXY(t))}},a.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},a.prototype.getScrollbleParent=function(e){if(e===null)return null;var t=u(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&i!=="hidden"&&i!=="visible"||e.tagName==="HTML"||e.tagName==="BODY"?e:this.getScrollbleParent(e.parentNode)},a.prototype.addStickyListener=function(e){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),e&&this.parentElement?(this.eventElement=this.parentElement.tagName==="HTML"||this.parentElement.tagName==="BODY"?document:this.parentElement,S.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(S.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},a.prototype.resizeFrozenRowBorder=function(){var e;this.parent.element.querySelector(".e-frozenrow-border")?e=this.parent.element.querySelector(".e-frozenrow-border"):(e=this.parent.createElement("div",{className:"e-frozenrow-border"}),this.parent.element.insertBefore(e,this.parent.element.querySelector(".e-gridcontent")));var t=this.parent.height!=="auto"?a.getScrollBarWidth():0;e.style.width=this.parent.element.offsetWidth-t-.5+"px"},a.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+ut),this.header=this.parent.getHeaderContent().querySelector("."+it);var i=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&this.header&&this.content&&(S.add(this.header,"touchstart pointerdown",this.setPageXY(),this),S.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this)),t&&i&&this.parent.enableColumnVirtualization&&(S.add(i,"scroll",this.onCustomScrollbarScroll(this.content,this.header),this),S.add(this.content,"scroll",this.onCustomScrollbarScroll(i,this.header),this),S.add(this.header,"scroll",this.onCustomScrollbarScroll(i,this.content),this),S.add(this.header,"touchstart pointerdown",this.setPageXY(),this),S.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this),S.add(this.content,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(T.userAgent.toLowerCase())&&T.isDevice||S.add(this.content,"touchmove pointermove",this.onTouchScroll(this.header),this)),this.contentScrollHandler=this.onContentScroll(this.header),this.headerScrollHandler=this.onContentScroll(this.content),S.add(this.content,"scroll",this.contentScrollHandler,this),S.add(this.header,"scroll",this.headerScrollHandler,this),this.parent.aggregates.length&&S.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var r=this.parent.getContentTable(),n,s,o;qu(function(){n=e.header.scrollLeft,s=r.scrollHeight,o=e.parent.getContent().clientHeight},function(){var l={cancel:!1};e.parent.notify(kd,l),s<o&&e.parent.height!=="auto"&&e.setLastRowCell(),e.parent.frozenRows&&e.resizeFrozenRowBorder(),!e.parent.enableVirtualization&&!e.parent.enableInfiniteScrolling&&(l.cancel||(e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top)),e.parent.enableColumnVirtualization||(e.content.scrollLeft=n,e.parent.isFrozenGrid()&&(e.previousValues.left=n))}),this.parent.isPreventScrollEvent=!1},a.prototype.setLastRowCell=function(){var e=this.parent.getContentTable();e.querySelector("tr:nth-last-child(2)")&&(N(e.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell"),this.parent.isSpan&&N(e.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell"),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Bottom"&&R(e.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell")),R(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isSpan&&R(e.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell")},a.prototype.getCssProperties=function(e){var t={},i=u(e)?this.parent.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t},a.prototype.ensureOverflow=function(e){e.style.overflowY=this.parent.height==="auto"?"auto":"scroll"},a.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){this.setPadding(),this.oneTimeReady=!0,this.parent.height==="auto"&&this.removePadding(),this.wireEvents(),this.setHeight();var t="width";this.setWidth(!u(e.properties[""+t]))}},a.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var e=this.parent.getContent().getClientRects()[0];if(e){var t=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),r=this.parent.element.querySelector(".e-groupdroparea"),n=t.offsetHeight+(i?i.offsetHeight:0)+(r?r.offsetHeight:0),s=this.parentElement.getClientRects()[0].top,o=e.top-(s<0?0:s),l=e.left,h=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(o<n&&e.bottom>0){t.classList.add("e-sticky");var p=0;r&&this.parent.groupSettings.showDropArea&&(this.setSticky(r,p,e.width,l,!0),p+=r.getClientRects()[0].height),i&&(this.setSticky(i,p,e.width,l,!0),p+=i.getClientRects()[0].height),this.setSticky(t,p,e.width,l,!0),u(h)||(h.style.position="fixed",h.style.top=n+"px")}else if(t.classList.contains("e-sticky")){this.setSticky(t,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),r&&this.setSticky(r,null,null,null,!1);var c=this.parent.element.querySelector(".e-ccdlg");if(c&&c.classList.remove("e-sticky"),!u(h)){h.style.position="absolute";var d=e.top-s;h.style.top=d+"px"}}this.parent.notify(Nd,{})}}},a.prototype.setSticky=function(e,t,i,r,n){n?e.classList.add("e-sticky"):e.classList.remove("e-sticky"),e.style.width=i!=null?i+"px":"",e.style.top=t!=null?t+"px":"",e.style.left=r!==null?parseInt(e.style.left,10)!==r?r+"px":e.style.left:""},a.prototype.destroy=function(){var e=this.parent.element;if(!(!e||!e.querySelector("."+pt)&&!e.querySelector("."+ot))){this.removeEventListener();var t=this.parent.getContent().querySelector("."+ut);S.remove(t,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),N([this.parent.getHeaderContent().querySelector("."+it)],it),N([t],ut),t.style.height="",this.parent.element.style.width=""}},a.getScrollBarWidth=function(){return Dt()},a}(),zu=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ti=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Rf=function(a){zu(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.templateFn={},t}return e.prototype.setFormatter=function(t){this.formatFn=t},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setTemplate=function(t){t===void 0&&(t={}),this.footerTemplate!==void 0&&(this.templateFn[yi(Q,Q.Summary)]={fn:We(this.footerTemplate,t),property:"footerTemplate"}),this.groupFooterTemplate!==void 0&&(this.templateFn[yi(Q,Q.GroupSummary)]={fn:We(this.groupFooterTemplate,t),property:"groupFooterTemplate"}),this.groupCaptionTemplate!==void 0&&(this.templateFn[yi(Q,Q.CaptionSummary)]={fn:We(this.groupCaptionTemplate,t),property:"groupCaptionTemplate"})},e.prototype.getTemplate=function(t){return this.templateFn[yi(Q,t)]},e.prototype.setPropertiesSilent=function(t){this.setProperties(t,!0)},Ti([C()],e.prototype,"type",void 0),Ti([C()],e.prototype,"field",void 0),Ti([C()],e.prototype,"columnName",void 0),Ti([C()],e.prototype,"format",void 0),Ti([C()],e.prototype,"footerTemplate",void 0),Ti([C()],e.prototype,"groupFooterTemplate",void 0),Ti([C()],e.prototype,"groupCaptionTemplate",void 0),Ti([C()],e.prototype,"customAggregate",void 0),e}(Ye),Af=function(a){zu(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return Ti([br([],Rf)],e.prototype,"columns",void 0),e}(Ye),Tf=function(){function a(e,t){this.copyContent="",this.isSelect=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(je,this.initialEnd,this),this.parent.on(at,this.keyDownHandler,this),this.parent.on(Ut,this.clickHandler,this),this.parent.on(Ci,this.initialEnd,this),S.add(this.parent.element,"keydown",this.pasteHandler,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(at,this.keyDownHandler),this.parent.off(je,this.initialEnd),this.parent.off(Ut,this.clickHandler),this.parent.off(Ci,this.initialEnd),S.remove(this.parent.element,"keydown",this.pasteHandler))},a.prototype.clickHandler=function(e){var t=e.target;t=x(t,"e-rowcell")},a.prototype.pasteHandler=function(e){var t=this,i=this.parent,r=/(Mac)/i.test(navigator.platform),n=this.parent.getSelectedRowCellIndexes();if(e.keyCode===67&&r&&e.metaKey&&!i.isEdit&&this.copy(),n.length&&e.keyCode===86&&(!r&&e.ctrlKey||r&&e.metaKey)&&!i.isEdit){var s=M(document.activeElement,"."+fe);if(!this.clipBoardTextArea||!s||!i.editSettings.allowEditing||i.editSettings.mode!=="Batch"||i.selectionSettings.mode!=="Cell"||i.selectionSettings.cellSelectionMode==="Flow")return;this.activeElement=document.activeElement;var o=window.scrollX,l=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){t.activeElement.focus(),window.scrollTo(o,l),t.paste(t.clipBoardTextArea.value,n[0].rowIndex,n[0].cellIndexes[0])},r?100:10)}},a.prototype.paste=function(e,t,i){for(var r=this.parent,n=i,s=t,o,l,h,p=e.split(`
`),c,d=0;d<p.length;d++){if(c=p[parseInt(d.toString(),10)].split("	"),n=i,d===p.length-1&&p[parseInt(d.toString(),10)]===""||nt(r.getRowByIndex(s))){n++;break}for(var f=0;f<c.length;f++){if(h=r.getCellFromIndex(s,n),!h){n++;break}if(o=r.getColumnByIndex(n),l=o.getParser()?o.getParser()(c[parseInt(f.toString(),10)]):c[parseInt(f.toString(),10)],o.allowEditing&&!o.isPrimaryKey&&!o.template){var g={column:o,data:l,rowIndex:s};this.parent.trigger(bc,g),s=g.rowIndex,g.cancel||r.editModule&&(o.type==="number"?this.parent.editModule.updateCell(s,o.field,parseFloat(g.data)):r.editModule.updateCell(s,o.field,g.data))}n++}s++}r.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:i},{rowIndex:s-1,cellIndex:n-1});var m=this.parent.getCellFromIndex(s-1,n-1);m&&ae(m,["e-focus","e-focused"],[]),this.clipBoardTextArea.value=""},a.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(je,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.parent.element.appendChild(this.clipBoardTextArea)},a.prototype.keyDownHandler=function(e){e.action==="ctrlPlusC"?this.copy():e.action==="ctrlShiftPlusH"&&this.copy(!0)},a.prototype.setCopyData=function(e){if(window.getSelection().toString()===""){this.clipBoardTextArea.value=this.copyContent="";var t=this.parent.getDataRows();if(this.parent.selectionSettings.mode!=="Cell"){var i=this.parent.getSelectedRowIndexes().sort(function(f,g){return f-g});if(e){for(var r=[],n=0;n<this.parent.getVisibleColumns().length;n++)r[parseInt(n.toString(),10)]=this.parent.getVisibleColumns()[parseInt(n.toString(),10)].headerText;this.getCopyData(r,!1,"	",e),this.copyContent+=`
`}for(var n=0;n<i.length;n++){n>0&&(this.copyContent+=`
`);var s=[],o=i[parseInt(n.toString(),10)];!pi(this.parent)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache||this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading)&&(o=t.map(function(g){return g.getAttribute("data-rowindex")}).indexOf(i[parseInt(n.toString(),10)].toString())),s.push.apply(s,[].slice.call(t[parseInt(o.toString(),10)].querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(s,!1,"	",e)}}else{var l=this.checkBoxSelection();if(l.status){if(e){for(var h=[],n=0;n<l.colIndexes.length;n++){var p=this.parent.getColumnHeaderByIndex(l.colIndexes[parseInt(n.toString(),10)]);p.classList.contains("e-hide")||h.push(p)}this.getCopyData(h,!1,"	",e),this.copyContent+=`
`}for(var n=0;n<l.rowIndexes.length;n++){n>0&&(this.copyContent+=`
`);var c=[].slice.call(t[l.rowIndexes[parseInt(n.toString(),10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)"));this.getCopyData(c,!1,"	",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,`
`,e)}var d={data:this.copyContent,cancel:!1};if(this.parent.trigger(Cc,d),d.cancel)return;this.clipBoardTextArea.value=this.copyContent=d.data,T.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},a.prototype.getCopyData=function(e,t,i,r){for(var n=typeof e[0]!="string",s=0;s<e.length;s++){if(r&&t){var o=parseInt(e[parseInt(s.toString(),10)].getAttribute(_e),10);this.copyContent+=this.parent.getColumns()[parseInt(o.toString(),10)].headerText+`
`}n?e[parseInt(s.toString(),10)].classList.contains("e-hide")||(this.copyContent+=e[parseInt(s.toString(),10)].innerText):this.copyContent+=e[parseInt(s.toString(),10)],s<e.length-1&&(this.copyContent+=i)}},a.prototype.copy=function(e){document.queryCommandSupported("copy")&&this.clipBoardTextArea&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},a.prototype.getModuleName=function(){return"clipboard"},a.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&(se(this.clipBoardTextArea),this.clipBoardTextArea=null)},a.prototype.checkBoxSelection=function(){var e=this.parent,t={status:!1};if(e.selectionSettings.mode==="Cell"){var i=e.getSelectedRowCellIndexes(),r=void 0,n=[],s=void 0;for(s=0;s<i.length&&(i[parseInt(s.toString(),10)].cellIndexes.length&&n.push(i[parseInt(s.toString(),10)].rowIndex),!(i[parseInt(s.toString(),10)].cellIndexes.length&&(r||(r=JSON.stringify(i[parseInt(s.toString(),10)].cellIndexes.sort())),r!==JSON.stringify(i[parseInt(s.toString(),10)].cellIndexes.sort()))));s++);n.sort(function(o,l){return o-l}),s===i.length&&(t={status:!0,rowIndexes:n,colIndexes:i[0].cellIndexes})}return t},a}(),Ei="https://ej2.syncfusion.com/documentation/grid",Ns="https://ej2.syncfusion.com/documentation/",Di="[EJ2Grid.Warning]",nr="[EJ2Grid.Error]",Kn="[EJ2Grid.Info]",Mf=function(){function a(e){this.parent=e,this.parent.on("initial-end",this.patchadaptor,this)}return a.prototype.getModuleName=function(){return"logger"},a.prototype.log=function(e,t){e instanceof Array||(e=[e]);for(var i=e,r=0;r<i.length;r++){var n=Ff[i[parseInt(r.toString(),10)]],s=n.check(t,this.parent);s.success&&console[n.logType](n.generateMessage(t,this.parent,s.options))}},a.prototype.patchadaptor=function(){var e=this.parent.getDataModule().dataManager.adaptor,t=e.beforeSend;t&&(e.beforeSend=function(i,r,n){t.call(e,i,r,n)})},a.prototype.destroy=function(){this.parent.isDestroyed||this.parent.off("initial-end",this.patchadaptor)},a}(),Ff={module_missing:{type:"module_missing",logType:"warn",check:function(a,e){var t=e.getInjectedModules().map(function(r){return r.prototype.getModuleName()}),i=e.requiredModules().map(function(r){return r.member}).filter(function(r){return t.indexOf(r)===-1});return{success:i.filter(function(r){return r!=="resize"}).length>0,options:i}},generateMessage:function(a,e,t){return t=t.filter(function(i){return i!=="resize"}).reduce(function(i,r){return i+("* "+r+`
`)},""),Di+`: MODULES MISSING
The following modules are not injected:.
`+(""+t)+("Refer to "+Ei+"/module.html for documentation on importing feature modules.")}},promise_enabled:{type:"promise_enabled",logType:"error",check:function(){return{success:typeof Promise>"u"}},generateMessage:function(){return nr+`: PROMISE UNDEFINED
Promise object is not present in the global environment,please use polyfil to support Promise object in your environment.
`+("Refer to "+Ns+"/base/browser.html?#required-polyfills for more information.")}},primary_column_missing:{type:"primary_column_missing",logType:"warn",check:function(a,e){return{success:e.enableColumnVirtualization?e.getPrimaryKeyFieldNames().length===0:e.getColumns().filter(function(t){return t.isPrimaryKey}).length===0}},generateMessage:function(){return Di+`: PRIMARY KEY MISSING
Editing is enabled but primary key column is not specified.
`+("Refer to "+Ei+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},selection_key_missing:{type:"selection_key_missing",logType:"warn",check:function(a,e){return{success:e.selectionSettings.persistSelection&&e.getColumns().filter(function(t){return t.isPrimaryKey}).length===0}},generateMessage:function(){return Di+`: PRIMARY KEY MISSING
selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.
`+("Refer to "+Ei+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},actionfailure:{type:"actionfailure",logType:"error",check:function(){return{success:!0}},generateMessage:function(a,e){var t="",i=Lf(a),r=Of(a);return r!==""?t=r:i!==""?t=i:t=a.error,Di+": "+t}},locale_missing:{type:"locale_missing",logType:"warn",check:function(a,e){var t=A.getObject("locale."+e.locale+".grid",Xt);return{success:e.locale!=="en-US"&&u(t)}},generateMessage:function(a,e){return Di+`: LOCALE CONFIG MISSING
`+("Locale configuration for '"+e.locale+`' is not provided.
`)+("Refer to "+Ei+`/globalization-and-localization.html?#localization 
             for documentation on setting locale configuration.`)}},limitation:{type:"limitation",logType:"warn",check:function(a,e){var t=a,i;switch(t){case"freeze":i={success:!nt(e.detailTemplate)||!nt(e.childGrid),options:{name:"freeze"}};break;case"virtualization":i={success:!nt(e.detailTemplate)||!nt(e.childGrid),options:{name:"virtualization"}};break;default:i={success:!1};break}return i},generateMessage:function(a,e,t){var i=t.name,r;switch(i){case"freeze":r=`Frozen rows and columns do not support the following features:
* Details Template
* Hierarchy Grid
`;break;case"virtualization":r=`Virtualization does not support the following features.
* Details Template.
* Hierarchy Grid.
`;break;default:r="";break}return Di+(": "+i.toUpperCase()+` LIMITATIONS
`)+r}},check_datasource_columns:{type:"check_datasource_columns",logType:"warn",check:function(a,e){return{success:!(e.columns.length||e.dataSource instanceof q||!u(e.dataSource)&&e.dataSource.length)}},generateMessage:function(){return Di+`: GRID CONFIG MISSING
dataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.
`+("Refer to "+Ei+"/columns.html for documentation on configuring the grid data and columns.")}},virtual_height:{type:"virtual_height",logType:"error",check:function(a,e){return{success:u(e.height)||e.height==="auto"}},generateMessage:function(){return nr+`: GRID HEIGHT MISSING 
height property is required to use virtualization.
`+("Refer to "+Ei+"/virtual.html for documentation on configuring the virtual grid.")}},grid_remote_edit:{type:"grid_remote_edit",logType:"error",check:function(a){return{success:Array.isArray(a)||Array.isArray(a.result)}},generateMessage:function(){return nr+`: RETRUN VALUE MISSING  
Remote service returns invalid data. 
`+("Refer to "+Ei+"/edit.html for documentation on configuring editing with remote data.")}},grid_sort_comparer:{type:"grid_sort_comparer",logType:"warn",check:function(a,e){return{success:e.getDataModule().isRemote()}},generateMessage:function(){return Di+`: SORT COMPARER NOT WORKING  
Sort comparer will not work with remote data.`+("Refer to "+Ei+"/sorting/#custom-sort-comparer for documentation on using the sort comparer.")}},resize_min_max:{type:"resize_min_max",logType:"info",check:function(a){return{success:a.column.minWidth&&a.column.minWidth>=a.width||a.column.maxWidth&&a.column.maxWidth<=a.width}},generateMessage:function(){return Kn+`: RESIZING COLUMN REACHED MIN OR MAX  
The column resizing width is at its min or max.`}},action_disabled_column:{type:"action_disabled_column",logType:"info",check:function(a){var e=!0,t;switch(a.moduleName){case"reorder":u(a.destColumn)?t="reordering action is disabled for the "+a.column.headerText+" column":t="reordering action is disabled for the "+(a.column.allowReordering?a.destColumn.headerText:a.column.headerText)+" column";break;case"group":t="grouping action is disabled for the "+a.columnName+" column.";break;case"filter":t="filtering action is disabled for the "+a.columnName+" column.";break;case"sort":t="sorting action is disabled for the "+a.columnName+" column.";break}return{success:e,options:{fn:t}}},generateMessage:function(a,e,t){return Kn+(`: ACTION DISABLED 
 `+t.fn)}},exporting_begin:{type:"exporting_begin",logType:"info",check:function(a){return{success:!0,options:{args:a}}},generateMessage:function(a,e,t){return Kn+(`: EXPORTING INPROGRESS 
 Grid `+t.args+"ing is in progress")}},exporting_complete:{type:"exporting_complete",logType:"info",check:function(a){return{success:!0,options:{args:a}}},generateMessage:function(a,e,t){return Kn+(`: EXPORTING COMPLETED 
 Grid `+t.args+"ing is complete")}},foreign_key_failure:{type:"foreign_key_failure",logType:"error",check:function(){return{success:!0}},generateMessage:function(){return nr+`: FOREIGNKEY CONFIG 
  Grid foreign key column needs a valid data source/service.`+("Refer to "+Ei+"/columns/#foreign-key-column for documentation on configuring foreign key columns.")}},initial_action:{type:"initial_action",logType:"error",check:function(a){var e=!0,t;switch(a.moduleName){case"group":t="The "+a.columnName+" column is not available in the grid's column model.Please provide a valid field name to group the column";break;case"filter":t="The "+a.columnName+" column is not available in the grid's column model.Please provide a valid field name to filter the column.";break;case"sort":t="The "+a.columnName+" column is not available in the grid's column model.Please provide a valid field name to sort the column.";break}return{success:e,options:{fn:t}}},generateMessage:function(a,e,t){return nr+(`: INITIAL ACTION FAILURE 
 `+t.fn)}},frozen_rows_columns:{type:"frozen_rows_columns",logType:"error",check:function(a,e){return{success:e.getColumns().length<=e.frozenColumns||e.currentViewData.length&&e.frozenRows>=e.currentViewData.length}},generateMessage:function(a,e){return nr+(`: OUT OF RANGE ERROR-
 `+(e.getColumns().length<=e.frozenColumns?"FROZEN COLUMNS,":""))+((e.frozenRows>=e.currentViewData.length?"FROZEN ROWS":"")+" invalid")}},column_type_missing:{type:"column_type_missing",logType:"error",check:function(a){return{success:u(a.column.type),options:a.column.headerText}},generateMessage:function(a,e,t){return nr+(`: COLUMN TYPE MISSING-
  `+t+" column type was invalid or not defined.")+("Please go through below help link: "+Ns+"/grid/columns/#column-type")}},datasource_syntax_mismatch:{type:"datasource_syntax_mismatch",logType:"warn",check:function(a){return{success:a.dataState.dataSource&&!(a.dataState.dataSource instanceof q||"result"in a.dataState.dataSource||a.dataState.dataSource instanceof Array)&&!u(a.dataState.dataStateChange)}},generateMessage:function(){return Di+`: DATASOURCE SYNTAX WARNING
DataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used`}}},Lf=function(a){var e=a.error;return e.indexOf&&e.indexOf("Format options")!==0?"":`INVALID FORMAT
For more information, refer to the following documentation links:
`+("Number format: "+Ns+`/common/internationalization#supported-format-string
`)+("Date format: "+Ns+`/common/internationalization#manipulating-datetime
`)+("Message: "+e)},Of=function(a){var e=A.getObject("error.error",a);if(u(e))return"";var t="";try{t=JSON.parse(e.responseText)}catch{t=""}return`XMLHTTPREQUEST FAILED
`+("Url: "+e.responseURL+`
`)+("Status: "+e.status+" - "+e.statusText+`
`)+(t!==""?"Message: "+t:"")},Pt=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),E=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Bf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C()],e.prototype,"field",void 0),E([C()],e.prototype,"direction",void 0),E([C(!1)],e.prototype,"isFromGroup",void 0),e}(Ye),Pf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([br([],Bf)],e.prototype,"columns",void 0),E([C(!0)],e.prototype,"allowUnsort",void 0),e}(Ye),Nf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C()],e.prototype,"field",void 0),E([C()],e.prototype,"operator",void 0),E([C()],e.prototype,"value",void 0),E([C()],e.prototype,"matchCase",void 0),E([C(!1)],e.prototype,"ignoreAccent",void 0),E([C()],e.prototype,"predicate",void 0),E([C({})],e.prototype,"actualFilterValue",void 0),E([C({})],e.prototype,"actualOperator",void 0),E([C()],e.prototype,"type",void 0),E([C()],e.prototype,"ejpredicate",void 0),E([C()],e.prototype,"uid",void 0),E([C()],e.prototype,"isForeignKey",void 0),E([C()],e.prototype,"condition",void 0),e}(Ye),zf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C(!1)],e.prototype,"enableCache",void 0),E([C(3)],e.prototype,"maxBlocks",void 0),E([C(3)],e.prototype,"initialBlocks",void 0),e}(Ye),Hf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([br([],Nf)],e.prototype,"columns",void 0),E([C("FilterBar")],e.prototype,"type",void 0),E([C("OnEnter")],e.prototype,"mode",void 0),E([C(!0)],e.prototype,"showFilterBarStatus",void 0),E([C(1500)],e.prototype,"immediateModeDelay",void 0),E([C()],e.prototype,"operators",void 0),E([C(!1)],e.prototype,"ignoreAccent",void 0),E([C(!1)],e.prototype,"enableInfiniteScrolling",void 0),E([C(50)],e.prototype,"itemsCount",void 0),E([C("Shimmer")],e.prototype,"loadingIndicator",void 0),E([C(!1)],e.prototype,"enableCaseSensitivity",void 0),E([C(!1)],e.prototype,"showFilterBarOperator",void 0),e}(Ye),Vf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C("Row")],e.prototype,"mode",void 0),E([C("Flow")],e.prototype,"cellSelectionMode",void 0),E([C("Single")],e.prototype,"type",void 0),E([C(!1)],e.prototype,"checkboxOnly",void 0),E([C(!1)],e.prototype,"persistSelection",void 0),E([C("Default")],e.prototype,"checkboxMode",void 0),E([C(!1)],e.prototype,"enableSimpleMultiRowSelection",void 0),E([C(!0)],e.prototype,"enableToggle",void 0),E([C(!1)],e.prototype,"allowColumnSelection",void 0),e}(Ye),qf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C([])],e.prototype,"fields",void 0),E([C("")],e.prototype,"key",void 0),E([C("contains")],e.prototype,"operator",void 0),E([C(!0)],e.prototype,"ignoreCase",void 0),E([C(!1)],e.prototype,"ignoreAccent",void 0),e}(Ye),Wf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C()],e.prototype,"targetID",void 0),e}(Ye),jf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C("Both")],e.prototype,"wrapMode",void 0),e}(Ye),Uf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C("Normal")],e.prototype,"mode",void 0),e}(Ye),Gf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C(!0)],e.prototype,"showDropArea",void 0),E([C(!1)],e.prototype,"allowReordering",void 0),E([C(!1)],e.prototype,"showToggleButton",void 0),E([C(!1)],e.prototype,"showGroupedColumn",void 0),E([C(!0)],e.prototype,"showUngroupButton",void 0),E([C(!1)],e.prototype,"disablePageWiseAggregates",void 0),E([C([])],e.prototype,"columns",void 0),E([C()],e.prototype,"captionTemplate",void 0),E([C(!1)],e.prototype,"enableLazyLoading",void 0),e}(Ye),_f=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C(!1)],e.prototype,"allowAdding",void 0),E([C(!1)],e.prototype,"allowEditing",void 0),E([C(!1)],e.prototype,"allowDeleting",void 0),E([C("Normal")],e.prototype,"mode",void 0),E([C(!0)],e.prototype,"allowEditOnDblClick",void 0),E([C(!0)],e.prototype,"showConfirmDialog",void 0),E([C(!1)],e.prototype,"showDeleteConfirmDialog",void 0),E([C()],e.prototype,"template",void 0),E([C()],e.prototype,"headerTemplate",void 0),E([C()],e.prototype,"footerTemplate",void 0),E([C("Top")],e.prototype,"newRowPosition",void 0),E([C({})],e.prototype,"dialog",void 0),E([C(!1)],e.prototype,"allowNextRowEdit",void 0),E([C(!1)],e.prototype,"showAddNewRow",void 0),e}(Ye),Kf=function(a){Pt(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return E([C("Spinner")],e.prototype,"indicatorType",void 0),e}(Ye),Et=function(a){Pt(e,a);function e(i,r){var n=a.call(this,i,r)||this;return n.isPreventScrollEvent=!1,n.inViewIndexes=[],n.keyA=!1,n.frozenRightCount=0,n.freezeColumnRefresh=!0,n.rightcount=0,n.frozenLeftCount=0,n.leftcount=0,n.tablesCount=1,n.movableCount=0,n.movablecount=0,n.fixedcount=0,n.fixedCount=0,n.visibleFrozenLeft=0,n.visibleFrozenFixed=0,n.isPreparedFrozenColumns=!1,n.visibleFrozenRight=0,n.visibleMovable=0,n.frozenLeftColumns=[],n.frozenRightColumns=[],n.movableColumns=[],n.fixedColumns=[],n.stackedLeft=[],n.stackedRight=[],n.stackedFixed=[],n.stackedMovable=[],n.stackedarrayLeft=[],n.stackedarrayRight=[],n.stackedarrayFixed=[],n.stackedarrayMovable=[],n.media={},n.autoFitColumnsResize=!1,n.tableIndex=0,n.componentRefresh=Hi.prototype.refresh,n.isChangeDataSourceCall=!1,n.mergedColumns=!1,n.isVirtualAdaptive=!1,n.requireTemplateRef=!0,n.vRows=[],n.vcRows=[],n.vGroupOffsets={},n.rowUid=0,n.translateX=0,n.isManualRefresh=!1,n.isAutoFitColumns=!1,n.enableDeepCompare=!1,n.totalDataRecordsCount=0,n.disableSelectedRecords=[],n.partialSelectedRecords=[],n.isSpan=!1,n.islazyloadRequest=!1,n.isAddNewRow=!1,n.addNewRowFocus=!0,n.lockcolPositionCount=0,n.prevPageMoving=!1,n.pageTemplateChange=!1,n.isAutoGen=!1,n.isAutoGenerateColumns=!1,n.pageRequireRefresh=!0,n.mediaBindInstance={},n.commandDelIndex=void 0,n.asyncTimeOut=50,n.isExportGrid=!1,n.isWidgetsDestroyed=!1,n.enableLogger=!1,n.needsID=!0,t.Inject(Pu),st("mergePersistData",n.mergePersistGridData,n),n}t=e,e.prototype.getPersistData=function(){for(var i=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],r={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},n=0;n<i.length;n++)for(var s=this[i[parseInt(n.toString(),10)]],o=0,l=r[i[parseInt(n.toString(),10)]];o<l.length;o++){var h=l[o];delete s[""+h]}var p=this.pageSettings.template,c=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:c},!0);var d=this.groupSettings.captionTemplate,f=d&&this.isAngular;f&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!u(this.pagerTemplate);var g=this.addOnPersist(i);return c.template=p,this.setProperties({pageSettings:c},!0),f&&(this.groupSettings.captionTemplate=d),g},e.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var i=[];return this.isDestroyed||(this.allowFiltering&&i.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator],name:"Filter"}),this.allowExcelExport&&i.push({member:"ExcelExport",args:[this,this.serviceLocator],name:"ExcelExport"}),this.allowPdfExport&&i.push({member:"PdfExport",args:[this],name:"PdfExport"}),this.allowSorting&&i.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator],name:"Sort"}),this.allowPaging&&i.push({member:"pager",args:[this,this.pageSettings],name:"Page"}),this.allowSelection&&i.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator],name:"Selection"}),this.resizeCheck()&&i.push({member:"resize",args:[this],name:"Resize"}),this.allowReordering&&i.push({member:"reorder",args:[this],name:"Reorder"}),this.allowRowDragAndDrop&&i.push({member:"rowDragAndDrop",args:[this],name:"RowDD"}),this.allowGrouping&&i.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator],name:"Group"}),this.aggregates.length&&i.push({member:"aggregate",args:[this,this.serviceLocator],name:"Aggregate"}),this.isDetail()&&i.push({member:"detailRow",args:[this,this.serviceLocator],name:"DetailRow"}),(this.toolbar||this.toolbarTemplate)&&i.push({member:"toolbar",args:[this,this.serviceLocator],name:"Toolbar"}),(this.enableVirtualization||this.enableColumnVirtualization)&&i.push({member:"virtualscroll",args:[this,this.serviceLocator],name:"VirtualScroll"}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&i.push({member:"freeze",args:[this,this.serviceLocator],name:"Freeze"}),!u(this.columns)&&this.isCommandColumn(this.columns)&&i.push({member:"commandColumn",args:[this,this.serviceLocator],name:"CommandColumn"}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&i.push({member:"edit",args:[this,this.serviceLocator],name:"Edit"}),this.extendRequiredModules(i)),i},e.prototype.extendRequiredModules=function(i){this.enableInfiniteScrolling&&i.push({member:"infiniteScroll",args:[this,this.serviceLocator],name:"InfiniteScroll"}),this.groupSettings.enableLazyLoading&&i.push({member:"lazyLoadGroup",args:[this,this.serviceLocator],name:"LazyLoadGroup"}),this.contextMenuItems&&i.push({member:"contextMenu",args:[this,this.serviceLocator],name:"ContextMenu"}),this.showColumnMenu&&i.push({member:"columnMenu",args:[this,this.serviceLocator],name:"ColumnMenu"}),this.showColumnChooser&&i.push({member:"columnChooser",args:[this,this.serviceLocator],name:"ColumnChooser"}),!u(this.columns)&&this.isForeignKeyEnabled(this.columns)&&i.push({member:"foreignKey",args:[this,this.serviceLocator],name:"ForeignKey"}),this.enableLogger&&i.push({member:"logger",args:[this],name:"Logger"})},e.prototype.resizeCheck=function(){var i=!!this.getColumns().filter(function(s){return s.autoFit===!0}).length;!u(this.columnModel)&&this.columnModel.length&&!(this.columnModel[0]instanceof Xe)&&(this.columnModel=[]);var r=!!(this.showColumnMenu&&(!this.columnMenuItems||this.columnMenuItems.filter(function(s){return s==="AutoFit"||s==="AutoFitAll"}).length)),n=!!(this.contextMenuItems&&this.contextMenuItems.filter(function(s){return s==="AutoFit"||s==="AutoFitAll"}).length);return this.allowResizing||this.autoFitColumnsResize||i||r||n},e.prototype.preRender=function(){this.serviceLocator=new gf,this.initProperties(),this.initializeServices()},e.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=Hi.prototype.refresh,this.freezeColumnRefresh=!0,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",ColumnMenu:"Column Menu",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",NotStartsWith:"Does Not Start With",Like:"Like",EndsWith:"Ends With",NotEndsWith:"Does Not End With",Contains:"Contains",NotContains:"Does Not Contain",IsNull:"Null",NotNull:"Not Null",IsEmpty:"Empty",IsNotEmpty:"Not Empty",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",SelectAllCheckbox:"Select all checkbox",SelectRow:"Select row",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",AddCurrentSelection:"Add current selection to filter",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",ToolbarMenuDialogARIA:"Toolbar menu dialog",FilterMenuDialogARIA:"Filter menu",ExcelFilterDialogARIA:"Excel filter",CheckBoxFilterDialogARIA:"Checkbox filter",DialogEditARIA:"Edit dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None",Expanded:"Expanded",Collapsed:"Collapsed"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},e.prototype.render=function(){if(this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),Dn({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new df(this,this.serviceLocator),this.searchModule=new Nu(this),this.scrollModule=new kf(this),this.notify(To,{}),this.pageSettings.enableQueryString){var i=new URL(window.location.href).searchParams.get("page");if(!u(i)&&window.location.href.indexOf("?page=")>0){var r=parseInt(i,10);this.setProperties({pageSettings:{currentPage:r}},!0),this.pageSettings.currentPage=r}}if((this.getDataModule().dataManager.dataSource.offline===!0||this.getDataModule().dataManager.dataSource.url===void 0)&&!(!u(this.dataSource)&&this.dataSource.result)&&(this.isVirtualAdaptive=!0),this.isReact){var n={requireTemplateRef:this.requireTemplateRef};this.trigger(qa,n),n.requireTemplateRef||(this.requireTemplateRef=n.requireTemplateRef)}else this.trigger(qa);On(this.columns,this.enableColumnVirtualization,this),this.enableColumnVirtualization&&this.isChangeDataSourceCall&&this.columnModel&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.isPreparedFrozenColumns=!0,this.enablePersistence&&this.notify(eo,{}),this.getMediaColumns(),Ss(this.columns),this.isFrozenGrid()&&!this.mergedColumns&&this.setInitialFrozenColumnIndex(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.loadingIndicator.indicatorType==="Spinner"&&this.showSpinner(),this.notify(ci,{}),this.loadingIndicator.indicatorType==="Shimmer"&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},e.prototype.setInitialFrozenColumnIndex=function(i){for(var r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)];n[""+xl]=n.index,n.columns&&this.setInitialFrozenColumnIndex(n.columns)}},e.prototype.showSpinner=function(){this.isExportGrid||ur(this.element)},e.prototype.hideSpinner=function(){this.isExportGrid||kn(this.element)},e.prototype.showMaskRow=function(i,r){if(!(u(this.headerModule)||u(this.contentModule))){var n=this.getHeaderContent().firstChild,s=this.getContent().firstChild,o=this.getFooterContent();if(r){var l=r.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),p='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%;"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var c=0;c<h;c++){l.innerHTML+=p;var d=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));d[0].classList.add("e-mask-checkbox-filter-intent"),d[1].classList.add("e-mask-checkbox-filter-span-intent")}return}if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(s.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var f=s.getBoundingClientRect().height,g=f===0?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:f,m=Math.ceil(g/this.getRowHeight());this.rowRenderingMode!=="Vertical"&&(this.headerMaskTable=this.createEmptyMaskTable(n,1)),this.contentMaskTable=this.createEmptyMaskTable(s,m);return}if(this.maskRowContentScroll=!!((this.enableVirtualization||this.enableColumnVirtualization)&&i),!this.contentMaskTable){var v=s;(this.enableVirtualization||this.enableColumnVirtualization)&&(v=v.querySelector(".e-virtualtable")),u(v.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(v,this.getContentMaskColumns(),i))}if(!this.headerMaskTable&&(this.isFrozenGrid()||this.enableColumnVirtualization&&i==="X")){var v=n;this.enableColumnVirtualization&&i==="X"&&(v=v.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(v,this.getContentMaskColumns(),i)}if(o&&o.querySelector(".e-summaryrow")){var y=o.firstChild;if(!this.footerContentMaskTable){var w=y;this.footerContentMaskTable=this.createMaskTable(w)}}this.enableVirtualization&&i||S.add(s,"scroll",this.translateMaskRow,this)}},e.prototype.getContentMaskColumns=function(){return this.getColumns()},e.prototype.createEmptyMaskTable=function(i,r){var n=this.createElement("table",{className:"e-table e-masked-table"}),s=this.createElement("tbody",{className:"e-masked-tbody"}),o=this.createElement("tr",{className:"e-masked-row e-row",attrs:{style:"height: "+this.getRowHeight()+"px;"}}),l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),o.appendChild(l);for(var h=0;h<r;h++)s.appendChild(o.cloneNode(!0));return n.appendChild(s),i.appendChild(n),n},e.prototype.createMaskTable=function(i,r,n){var s=i,o=!!M(s,".e-gridheader"),l=!!M(s,".e-gridcontent"),h=!!M(s,".e-gridfooter"),p=this.getContent().firstChild,c=p.scrollHeight,d=s.querySelector("table"),f=d.cloneNode();f.removeAttribute("role"),f.removeAttribute("id"),f.style.position="absolute",f.style.zIndex="5",f.style.width=d.getBoundingClientRect().width+"px",o&&!(this.enableColumnVirtualization&&n==="X")&&(f.style.transform="translate(0px,"+d.querySelector("thead").getBoundingClientRect().height+"px)"),f.setAttribute("class","e-table e-masked-table");var g=d.querySelector("colgroup").cloneNode(!0);if(g.removeAttribute("id"),g.setAttribute("class","e-masked-colgroup"),f.appendChild(g),o&&this.enableColumnVirtualization&&n==="X"){var m=this.createMaskRow(g,r);if(this.isFrozenGrid())for(var v=[].slice.call(m.querySelectorAll(".e-rowcell")),y=0;y<v.length;y++)y<this.frozenLeftCount?(this.frozenLeftCount-1===y&&v[parseInt(y.toString(),10)].classList.add("e-freezeleftborder"),v[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),v[parseInt(y.toString(),10)].setAttribute("data-colindex",y.toString()),v[parseInt(y.toString(),10)].style.left=r[parseInt(y.toString(),10)].valueX-this.translateX+"px"):v.length-this.frozenRightCount<=y&&r[parseInt(y.toString(),10)]&&(v.length-this.frozenRightCount===y&&v[parseInt(y.toString(),10)].classList.add("e-freezerightborder"),v[parseInt(y.toString(),10)].classList.add("e-rightfreeze"),v[parseInt(y.toString(),10)].setAttribute("data-colindex",y.toString()),v[parseInt(y.toString(),10)].style.right=this.translateX+r[parseInt(y.toString(),10)].valueX+"px");var w=d.querySelector("thead"),b=[].slice.call(w.querySelectorAll("tr")),I=w.cloneNode();I.removeAttribute("role"),I.setAttribute("class","e-masked-thead");for(var k=b.length,y=0;y<k;y++)I.appendChild(m.cloneNode(!0)),I.childNodes[parseInt(y.toString(),10)].style.height=b[parseInt(y.toString(),10)].getBoundingClientRect().height+"px";f.appendChild(I)}var D=d.querySelector("tbody").cloneNode();D.removeAttribute("role"),D.setAttribute("class","e-masked-tbody");var W=d.querySelector("tbody");if(l||o){var Z=p,k=Math.ceil(Z.getBoundingClientRect().height/this.getRowHeight());if(W.querySelector(".e-emptyrow")||!W.childNodes.length||l&&this.childGrid){var m=this.createMaskRow(g,r),J=m.cloneNode(!0);J.classList.add("e-altrow");for(var y=0;y<k;y++){var X=1;D.appendChild((y+X)%2===0?J.cloneNode(!0):m.cloneNode(!0))}}else{var L='tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"])',b=[].slice.call(W.querySelectorAll(L)),O=W.querySelector(".e-addedrow, .e-editedrow"),F=void 0;if(O){if(F=b.indexOf(O),this.isFrozenGrid()&&this.enableColumnVirtualization)for(var v=[].slice.call(b[F+1].querySelectorAll(".e-rowcell")),y=0;y<v.length;y++)y<this.frozenLeftCount?(v[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),v[parseInt(y.toString(),10)].setAttribute("data-colindex",y.toString()),v[parseInt(y.toString(),10)].style.left=r[parseInt(y.toString(),10)].valueX-this.translateX+"px"):v.length-this.frozenRightCount<=y&&r[parseInt(y.toString(),10)]&&(v[parseInt(y.toString(),10)].classList.add("e-rightfreeze"),v[parseInt(y.toString(),10)].setAttribute("data-colindex",y.toString()),v[parseInt(y.toString(),10)].style.right=this.translateX+r[parseInt(y.toString(),10)].valueX+"px");O.classList.contains("e-addedrow")?b.splice(F,2):b.splice(F,1)}k=(this.enableVirtualization||this.enableColumnVirtualization)&&n?b.length:k<=b.length?k:b.length;for(var y=0;y<k;y++)D.appendChild(this.applyMaskRow(b[parseInt(y.toString(),10)].cloneNode(!0),b[parseInt(y.toString(),10)].getBoundingClientRect().height));if(O&&O.classList.contains("e-editedrow")&&F<k){var V=D.childNodes[parseInt(F.toString(),10)];V.style.height=this.getRowHeight()+"px",V.classList.add("e-row"),O.classList.contains("e-altrow")&&V.classList.add("e-altrow")}}}if(f.appendChild(D),h){var K=d.querySelector("tfoot"),U=K.cloneNode();U.setAttribute("class","e-masked-tfoot");for(var b=[].slice.call(K.querySelectorAll("tr")),y=0;y<b.length;y++)U.appendChild(this.applyMaskRow(b[parseInt(y.toString(),10)].cloneNode(!0),b[parseInt(y.toString(),10)].getBoundingClientRect().height));f.appendChild(U)}if(o&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+it).style.position="relative"),s.insertBefore(f,s.firstChild),l&&!(this.enableVirtualization&&n)){var H=c-f.getBoundingClientRect().height;H=H<0?0:H;var z=p.scrollTop<=H?p.scrollTop:H;this.enableVirtualization&&(z-=co(M(s,".e-virtualtable")).height),f.style.transform="translate(0px,"+z+"px)"}return f},e.prototype.applyMaskRow=function(i,r){var n=i;n.removeAttribute("role"),n.removeAttribute("aria-rowindex"),n.removeAttribute("data-rowindex"),n.removeAttribute("data-uid"),n.classList.add("e-masked-row"),n.style.height=r+"px";for(var s=[].slice.call(n.childNodes),o=0;o<s.length;o++){var l=s[parseInt(o.toString(),10)],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),this.enableColumnVirtualization&&l.classList.contains("e-fixedfreeze")&&(N([l],["e-fixedfreeze","e-freezeleftborder","e-freezerightborder"]),R([l],["e-unfreeze"])),this.enableColumnVirtualization&&(l.classList.contains("e-leftfreeze")||l.classList.contains("e-rightfreeze"))||l.removeAttribute("data-colindex"),l.removeAttribute("aria-colindex"),l.removeAttribute("index"),l.removeAttribute("ej-mappingname"),l.removeAttribute("ej-mappingvalue"),l.removeAttribute("e-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return n},e.prototype.createMaskRow=function(i,r){var n=i,s=r,o=this.createElement("tr",{className:"e-masked-row e-row"});this.rowRenderingMode!=="Vertical"&&(o.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,p=0;h<n.childNodes.length;h++){var c=n.childNodes[parseInt(h.toString(),10)],d=l.cloneNode();d.innerHTML=this.getShimmerTemplate(),c.classList.contains("e-group-intent")||c.classList.contains("e-detail-intent")||c.classList.contains("e-drag-intent")?c.classList.contains("e-group-intent")?d.firstChild.classList.add("e-mask-group-intent"):c.classList.contains("e-detail-intent")?d.firstChild.classList.add("e-mask-detail-intent"):c.classList.contains("e-drag-intent")&&d.firstChild.classList.add("e-mask-drag-intent"):(this.rowRenderingMode==="Vertical"&&s[parseInt(p.toString(),10)]&&d.setAttribute("data-cell",s[parseInt(p.toString(),10)].headerText?s[parseInt(p.toString(),10)].headerText:s[parseInt(p.toString(),10)].field),c.style.display==="none"?d.classList.add("e-hide"):(d.style.textAlign=s[parseInt(p.toString(),10)]&&s[parseInt(p.toString(),10)].textAlign?s[parseInt(p.toString(),10)].textAlign.toLowerCase():this.enableRtl?"right":"left",s[parseInt(p.toString(),10)]&&(s[parseInt(p.toString(),10)].type==="checkbox"||s[parseInt(p.toString(),10)].displayAsCheckBox)&&d.firstChild.classList.add("e-mask-checkbox-intent")),p++),o.appendChild(d)}return o},e.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},e.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var i=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),r=0;r<i.length;r++)i[parseInt(r.toString(),10)]&&i[parseInt(r.toString(),10)].classList.add("e-shimmer-wave")},e.prototype.translateMaskRow=function(i){for(var r=i.target,n=r.querySelectorAll(".e-masked-table"),s=0;s<n.length;s++){var o=n[parseInt(s.toString(),10)];if(o){var l=r.scrollHeight-o.getBoundingClientRect().height;l=l<0?0:l;var h=r.scrollTop<=l?r.scrollTop:l;this.enableVirtualization&&(h-=co(M(o,".e-virtualtable")).height),o.style.transform="translate(0px,"+h+"px)"}}},e.prototype.removeMaskRow=function(){if(!u(this.contentModule)){var i=this.getContent().firstChild;S.remove(i,"scroll",this.translateMaskRow)}this.headerMaskTable&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+it).style.position="");for(var r=[this.headerMaskTable,this.contentMaskTable,this.footerContentMaskTable],n=0;n<r.length;n++){var s=r[parseInt(n.toString(),10)];s&&se(s)}this.headerMaskTable=null,this.contentMaskTable=null,this.footerContentMaskTable=null},e.prototype.refreshMaskRow=function(){var i=this.getContent().firstChild;if(!(!this.isInitialLoad&&!this.getColumns().length)&&this.contentMaskTable&&i.querySelector(".e-masked-table")){var r=i;this.enableVirtualization&&(r=r.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(r)}},e.prototype.refreshMaskRowColgroupWidth=function(i){var r=i.querySelector("table:not(.e-masked-table)"),n=r.querySelector(Lt).cloneNode(!0),s=i.querySelector(".e-masked-table");n.removeAttribute("id"),n.setAttribute("class","e-masked-colgroup");for(var o=0;o<n.childNodes.length;o++)n.childNodes[parseInt(o.toString(),10)].removeAttribute("class");se(s.querySelector(".e-masked-colgroup")),s.insertBefore(n,s.firstChild),s.style.width=r.getBoundingClientRect().width+"px"},e.prototype.updateStackedFilter=function(){this.allowFiltering&&this.filterSettings.type==="FilterBar"&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},e.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var i=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!u(i))for(var r=0;r<i.length;r++)!u(i[parseInt(r.toString(),10)].hideAtMedia)&&(u(i[parseInt(r.toString(),10)].visible)||i[parseInt(r.toString(),10)].visible)&&this.pushMediaColumn(i[parseInt(r.toString(),10)],r)}this.updateFrozenColumnsWidth()},e.prototype.pushMediaColumn=function(i,r){this.mediaCol.push(i),this.media[i.uid]=window.matchMedia(i.hideAtMedia),this.mediaQueryUpdate(r,this.media[i.uid]),this.mediaBindInstance[parseInt(r.toString(),10)]=this.mediaQueryUpdate.bind(this,r),this.media[i.uid].addListener(this.mediaBindInstance[parseInt(r.toString(),10)])},e.prototype.updateMediaColumns=function(i){if(!this.enableColumnVirtualization){for(var r=this.getColumnIndexByUid(i.uid),n=0;n<this.mediaCol.length;n++)if(i.uid===this.mediaCol[parseInt(n.toString(),10)].uid){this.mediaCol.splice(n,1);return}this.pushMediaColumn(i,r)}},e.prototype.mediaQueryUpdate=function(i,r){var n=this.getColumns()[parseInt(i.toString(),10)];this.mediaCol.some(function(s){return s.uid===n.uid})&&(n.visible=r.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,n.visible?this.showHider.show(n.headerText,"headerText"):this.showHider.hide(n.headerText,"headerText")))},e.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var i=this.element.querySelector("."+xn);this.aggregates.length&&this.element.scrollHeight>parseInt(this.height.toString(),10)&&i&&R([i],["e-footerpadding"]);var r=this.getColumns().filter(function(n){return n.type==="checkbox"});(r.length===0||r.length&&this.selectionSettings.checkboxMode==="ResetOnRowClick")&&(this.isCheckBoxSelection=!1),this.rowRenderingMode==="Vertical"&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),N([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh(),this.isFrozenGrid()&&this.isAutoGenerateColumns&&(this.widthService.setWidthToColumns(),this.isAutoGenerateColumns=!1)},e.prototype.removeMediaListener=function(){for(var i=0;i<this.mediaCol.length;i++)this.media[this.mediaCol[parseInt(i.toString(),10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(i.toString(),10)].index])},e.prototype.eventInitializer=function(){},e.prototype.destroy=function(){var i=this.element;if(i){var r=!!(i.querySelector("."+pt)&&i.querySelector("."+ot));r&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(Ie,{}),this.destroyDependentModules(),this.isReact&&this.destroyTemplate(["template"]),this.isVue&&this.destroyTemplate(),r&&a.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!T.isIE&&(this.element.innerHTML="");for(var n=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],s=0;s<n.length;s++)this[n[parseInt(s.toString(),10)]]&&(this[n[parseInt(s.toString(),10)]]=null);this.element.innerHTML="",ae(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},e.prototype.destroyDependentModules=function(){var i=this.element;!i||!i.querySelector("."+pt)&&!i.querySelector("."+ot)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},e.prototype.getModuleName=function(){return"grid"},e.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):(this.element.classList.remove("e-afenabled"),this.notify(_a,{}))},e.prototype.setCSSClass=function(i){this.cssClass&&R([this.element],this.cssClass.split(" ")),i&&N([this.element],i.split(" "))},e.prototype.onPropertyChanged=function(i,r){var n=!1,s=!1,o=!1,l,h={requestType:"refresh"},p=null,c=null;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var d=Object.keys(i);d.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),s=!0);for(var f=0,g=d;f<g.length;f++){var m=g[f];switch(m){case"allowPaging":this.notify(qe,{module:"pager",enable:this.allowPaging}),n=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(vt,{module:"pager",properties:i.pageSettings});break}if(this.pagerModule&&this.pagerModule.isCancel){this.pagerModule.isCancel=!1;return}this.notify(vt,{module:"pager",properties:i.pageSettings}),(u(i.pageSettings.currentPage)&&u(i.pageSettings.pageSize)&&u(i.pageSettings.totalRecordsCount)||!u(r.pageSettings)&&i.pageSettings.currentPage!==r.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageRequireRefresh&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(n=!0),this.pageRequireRefresh||(this.pageRequireRefresh=!0),this.pagerModule&&this.pagerModule.isCancel&&(this.pagerModule.isCancel=!1);break;case"allowSorting":this.notify(qe,{module:"sort",enable:this.allowSorting}),n=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(qe,{module:"filter",enable:this.allowFiltering}),n=!0,this.filterSettings.type!=="FilterBar"||this.editSettings.showAddNewRow&&this.filterSettings.type==="FilterBar"?this.refreshHeader():this.height==="100%"&&this.scrollModule.refresh();break;case"height":case"width":this.notify(qe,{module:"scroll",properties:{width:i.width,height:i.height}}),this.allowPaging&&this.pagerModule.refresh();break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(qe,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(qe,{module:"selection",enable:this.allowSelection});break;case"cssClass":this.setCSSClass(r.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=tt(this.rowTemplate),n=!0;break;case"emptyRecordTemplate":this.emptyRecordTemplateFn=tt(this.emptyRecordTemplate),n=!0;break;case"detailTemplate":this.detailTemplateFn=tt(this.detailTemplate),n=!0;break;case"allowGrouping":this.notify(qe,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),n=!0,l=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"enableInfiniteScrolling":case"childGrid":if(n=!0,p=this.parentDetails?document.querySelector("#"+this.parentDetails.parentID):null,c=p?p.ej2_instances[0]:null,this.childGrid&&c&&u(c.childGrid.childGrid)){var v=Object.assign({},c.childGrid,{childGrid:i.childGrid});for(c.setProperties({childGrid:v},!0);!u(c.parentDetails);){var y=document.querySelector("#"+c.parentDetails.parentID),w=y?y.ej2_instances[0]:null;if(w){var b=Object.assign({},w.childGrid);b.childGrid=c.childGrid,w.setProperties({childGrid:b},!0)}c=w}}this.headerModule.refreshUI();break;case"toolbar":this.notify(qe,{module:"toolbar"}),this.height==="100%"&&this.scrollModule.refresh();break;case"groupSettings":this.notify(vt,{module:"group",properties:i.groupSettings,oldProperties:r.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(n=!0),this.notify(qe,{module:"aggregate",properties:i}),this.height==="100%"&&this.scrollModule.refresh();break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"enableColumnVirtualization":case"currencyCode":case"locale":this.isFrozenGrid()&&this.log("frozen_rows_columns"),o=!0,s=!0,this.addNewRowFocus=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(n=!0),this.getDataModule().isQueryInvokedFromData=!1;break;case"autoFit":this.autoFit?this.preventAdjustColumns():this.restoreAdjustColumns();break;default:this.extendedPropertyChange(m,i,s)}}l&&this.updateDefaultCursor(),s?o||this.getFrozenColumns()||this.frozenRows||this.frozenLeftColumns.length||this.frozenRightColumns.length?this.freezeRefresh():this.refresh():n&&(this.notify(qt,h),n=!1,this.maintainSelection(i.selectedRowIndex))}},e.prototype.extendedPropertyChange=function(i,r,n){switch(i){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=r.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),this.height!=="auto"&&(this.scrollModule.removePadding(!r.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=r.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=r.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&!this.enableAdaptiveUI&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=r.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify(Ja,{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.resizeModule&&this.resizeModule.render(),this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?R([this.element],"e-grid-min-height"):N([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(qe,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(qe,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(qe,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(qe,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(vt,{module:"filter",properties:r.filterSettings});break;case"searchSettings":this.notify(vt,{module:"search",properties:r.searchSettings});break;case"sortSettings":this.notify(vt,{module:"sort"});break;case"selectionSettings":this.notify(vt,{module:"selection",properties:r.selectionSettings});break;case"editSettings":this.notify(vt,{module:"edit",properties:r.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(dr,{case:"textwrap",isModeChg:i==="textWrapSettings"});break;case"dataSource":var s=this.getDataModule().getState();if(this.allowSelection&&this.isPersistSelection&&!(s&&s.isPending)&&this.clearSelection(),!u(this.dataSource)&&this.dataSource.result&&(this.isVirtualAdaptive=!1),Object.getPrototypeOf(r).deepWatch)for(var o=this.getPrimaryKeyFieldNames()[0],l=0,h=Object.keys(r.dataSource);l<h.length;l++)this.setRowData(j(o,this.dataSource[h[parseInt(l.toString(),10)]]),this.dataSource[h[parseInt(l.toString(),10)]]);else if(s.isPending){var p=u(this.dataSource)?[]:this.dataSource.result,c=s.group||[];if(c.length&&!this.groupSettings.enableLazyLoading&&!(p.length&&p[0].field))for(var l=0;l<c.length;l++)p=A.group(p,c[parseInt(l.toString(),10)],s.aggregates||[]);this.dataSource={result:p,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),s.resolver(this.dataSource)}else{if(!u(this.dataSource)&&this.dataSource.result&&this.dataSource.count&&this.groupSettings.columns.length){var p=this.dataSource.result,c=this.groupSettings.columns;if(c.length&&!(p.length&&p[0].field))for(var l=0;l<c.length;l++)p=A.group(p,c[parseInt(l.toString(),10)]);this.dataSource={result:p,count:this.dataSource.count}}this.getDataModule().setState({isDataChanged:!1}),this.notify($a,{}),n||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(so,{}))}this.scrollRefresh();break;case"enableHover":var d=r.enableHover?R:N;d([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(r.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(fr,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(Eu,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(r.enableStickyHeader);break}},e.prototype.maintainSelection=function(i){var r=this;if(i!==-1){var n=function(){r.selectRow(i),r.off(je,n)};this.on(je,n,this)}},e.prototype.setProperties=function(i,r){a.prototype.setProperties.call(this,i,r);var n="filterSettings";i[""+n]&&this.filterModule&&r&&this.filterModule.refreshFilter()},e.prototype.getTablesCount=function(){return this.tablesCount},e.prototype.updateDefaultCursor=function(){for(var i=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),r=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),n=this.getColumns(),s=0;s<i.length;s++){var o=i[parseInt(s.toString(),10)];(this.allowGrouping||this.allowReordering||this.allowSorting)&&(!n[parseInt(s.toString(),10)].allowReordering||!n[parseInt(s.toString(),10)].allowSorting||!n[parseInt(s.toString(),10)].allowGrouping?o.classList.add("e-defaultcursor"):o.classList.add("e-mousepointer"))}for(var l=0;l<r.length;l++)this.allowReordering&&r[parseInt(l.toString(),10)].classList.add("e-mousepointer")},e.prototype.updateColumnModel=function(i,r){for(var n=0,s=u(i)?0:i.length;n<s;n++)i[parseInt(n.toString(),10)].columns?this.updateColumnModel(i[parseInt(n.toString(),10)].columns,!0):this.columnModel.push(i[parseInt(n.toString(),10)]);(u(r)||!r)&&this.updateLockableColumns()},e.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},e.prototype.isFrozenGrid=function(){return this.getFrozenColumns()!==0||this.frozenLeftColumns.length!==0||this.frozenRightColumns.length!==0||this.fixedColumns.length!==0},e.prototype.getFrozenMode=function(){return this.frozenName},e.prototype.updateLockableColumns=function(){for(var i=this.columnModel,r=0,n=0,s=this.getFrozenColumns(),o=0;o<i.length;o++)i[parseInt(o.toString(),10)].lockColumn&&(o<s?(i.splice(r,0,i.splice(o,1)[0]),r++):(i.splice(s+n,0,i.splice(o,1)[0]),n++))},e.prototype.checkLockColumns=function(i){for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].columns?this.checkLockColumns(i[parseInt(r.toString(),10)].columns):i[parseInt(r.toString(),10)].lockColumn&&this.lockcolPositionCount++},e.prototype.leftrightColumnWidth=function(i){var r=i==="left"?this.getFrozenLeftColumns():i==="right"?this.getFrozenRightColumns():[],n=0;return r.filter(function(s){s.visible&&(n+=parseInt(s.width.toString(),10))}),n},e.prototype.getColumns=function(i){var r=this,n=this.inViewIndexes.map(function(f){return f-r.groupSettings.columns.length}).filter(function(f){return f>-1}),s=n.length;(!this.enableColumnVirtualization||u(this.columnModel)||this.columnModel.length===0||i)&&(this.columnModel=[],this.updateColumnModel(this.columns));var o=s===0?this.columnModel:this.columnModel.slice(n[0],n[s-1]+1),l=[],h=[],p=[],c=this.enableColumnVirtualization&&this.isPreparedFrozenColumns&&s===0;c&&(this.frozenRightColumns=[],this.frozenLeftColumns=[]);for(var d=0;d<o.length;d++)o[parseInt(d.toString(),10)].freeze==="Left"||o[parseInt(d.toString(),10)].isFrozen?(l.push(o[parseInt(d.toString(),10)]),c&&this.frozenLeftColumns.push(o[parseInt(d.toString(),10)])):o[parseInt(d.toString(),10)].freeze==="Right"?(h.push(o[parseInt(d.toString(),10)]),c&&this.frozenRightColumns.push(o[parseInt(d.toString(),10)])):p.push(o[parseInt(d.toString(),10)]);return this.enableColumnVirtualization&&this.isFrozenGrid()&&(this.frozenLeftColumns.length&&(l=this.frozenLeftColumns),this.frozenRightColumns.length&&(h=this.frozenRightColumns)),l.concat(p).concat(h)},e.prototype.getStackedHeaderColumnByHeaderText=function(i,r){for(var n=0;n<r.length;n++){var s=r[parseInt(n.toString(),10)];if(s.field===i||s.headerText===i){this.stackedColumn=s;break}else s.columns&&this.getStackedHeaderColumnByHeaderText(i,s.columns)}return this.stackedColumn},e.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},e.prototype.getQuery=function(){return this.query},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setColumnIndexesInView=function(i){this.inViewIndexes=i},e.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},e.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},e.prototype.setGridHeaderContent=function(i){this.headerModule.setPanel(i)},e.prototype.getContentTable=function(){return this.contentModule.getTable()},e.prototype.setGridContentTable=function(i){this.contentModule.setTable(i)},e.prototype.getContent=function(){return this.contentModule.getPanel()},e.prototype.setGridContent=function(i){this.contentModule.setPanel(i)},e.prototype.getHeaderTable=function(){return this.headerModule.getTable()},e.prototype.setGridHeaderTable=function(i){this.headerModule.setTable(i)},e.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(xn)[0],this.footerElement},e.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(xn)[0],this.footerElement.firstChild.firstChild},e.prototype.getPager=function(){return this.gridPager},e.prototype.setGridPager=function(i){this.gridPager=i},e.prototype.getRowByIndex=function(i){return this.enableVirtualization&&this.groupSettings.enableLazyLoading?this.lazyLoadRender.getRowByIndex(i):this.contentModule.getRowByIndex(i)},e.prototype.getMovableRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},e.prototype.getFrozenRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},e.prototype.getRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},e.prototype.getRowInfo=function(i){var r=i,n={target:i};if(!u(i)&&u(x(r,"e-detailrowcollapse")&&u(x(r,"e-recordplusexpand")))){var s=M(r,"."+fe);if(!s){var o=M(r,"."+ze);if(!u(o)&&!o.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(o.getAttribute("data-uid")),h=parseInt(o.getAttribute(Se),10);n={row:o,rowData:l.data,rowIndex:h}}return n}var p=parseInt(s.getAttribute(_e),10),c=M(s,"."+ze);if(!u(s)&&!isNaN(p)&&!u(c)){var h=parseInt(c.getAttribute(Se),10),d=this.contentModule.getRows(),f=p+this.getIndentCount(),g=d.filter(function(w){return w.uid===c.getAttribute("data-uid")}),m={},v=void 0;Object.keys(g).length&&(m=g[0].data,v=g[0].cells[parseInt(f.toString(),10)].column),n={cell:s,cellIndex:p,row:c,rowIndex:h,rowData:m,column:v,target:i}}}return n},e.prototype.getMovableRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRows=function(){return this.contentModule.getRowElements()},e.prototype.getDataRows=function(){return this.getAllDataRows()},e.prototype.getAllDataRows=function(i){if(u(this.getContentTable().querySelector(me)))return[];var r=this.getContentTable().querySelector(me),n=[].slice.call(r.children);if(this.editSettings.showAddNewRow&&(n[0].classList.contains("e-addedrow")?n.shift():n[n.length-1].classList.contains("e-addedrow")&&n.pop()),this.frozenRows){var s=this.getHeaderTable().querySelector(me),o=[].slice.call(s.children);n=this.addMovableRows(o,n),this.editSettings.showAddNewRow&&o[0].classList.contains("e-addedrow")&&o.shift()}var l=this.generateDataRows(n,i);return l},e.prototype.addMovableRows=function(i,r){for(var n=0,s=r.length;n<s;n++)i.push(r[parseInt(n.toString(),10)]);return i},e.prototype.generateDataRows=function(i,r){for(var n=[],s=0,o=i.length;s<o;s++)i[parseInt(s.toString(),10)].classList.contains(ze)&&(!i[parseInt(s.toString(),10)].classList.contains("e-hiddenrow")||r)&&(this.isCollapseStateEnabled()?n[parseInt(i[parseInt(s.toString(),10)].getAttribute("data-rowindex"),10)]=i[parseInt(s.toString(),10)]:n.push(i[parseInt(s.toString(),10)]));return n},e.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},e.prototype.getAllMovableDataRows=function(i){return this.getAllDataRows(i)},e.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},e.prototype.getAllFrozenDataRows=function(i){return this.getAllDataRows(i)},e.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},e.prototype.getAllFrozenRightDataRows=function(i){return this.getAllDataRows(i)},e.prototype.setCellValue=function(i,r,n){var s="cells",o="data",l="index",h="uid",p=this.getPrimaryKeyFieldNames()[0],c=new xt(this,this.serviceLocator),d=this.getColumnIndexByField(r),f=this.getColumnByField(r),g=this.contentModule.getRows(),m=g.filter(function(I){return j(p,I.data)===i})[0],v=m?this.element.querySelector("[data-uid="+m[""+h]+"]"):null;if(!u(v)){typeof n=="string"&&(n=this.sanitize(n)),st(r,n,m[""+o]);var y=this.enableVirtualization?v.children[parseInt(d.toString(),10)]:this.getCellFromIndex(m[""+l],d);if(!u(y)){var w=0;this.groupSettings.columns.length&&(d=d+this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&d++,this.isRowDragable()&&d++;var b=m[""+s][d-w];c.refreshTD(y,b,m[""+o],{index:m[""+l]}),this.isReact&&(y=this.enableVirtualization?v.children[parseInt(d.toString(),10)]:this.getCellFromIndex(m[""+l],d)),this.aggregates.length>0&&(this.notify(Fi,{}),this.groupSettings.columns.length>0&&this.notify(Sn,{})),!u(m)&&!u(m.changes)&&(m.changes[""+r]=n),this.trigger(Ur,{cell:y,column:f,data:m[""+o]}),this.isReact&&y.getAttribute("tabindex")==="0"&&y.classList.contains("e-focused")&&y.focus()}}},e.prototype.refreshReactColumnTemplateByUid=function(i,r){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){var s=!!(n.childGrid&&n.element.querySelectorAll(".e-childgrid").length),o=s?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows();n.refreshReactTemplateTD(o,s),r&&n.renderTemplates()})},e.prototype.refreshReactTemplateTD=function(i,r,n){for(var s="cells",o="index",l=this.getIndentCount(),h=0,p=!1,c=0;c<i.length;c++){var d=this.getRowObjectFromUID(i[parseInt(c.toString(),10)].getAttribute("data-uid"));if(r&&!d&&x(i[parseInt(c.toString(),10)],"e-childgrid")){var f=x(i[parseInt(c.toString(),10)],"e-childgrid").ej2_instances[0];d=f.getRowObjectFromUID(i[parseInt(c.toString(),10)].getAttribute("data-uid")),h=f.getIndentCount(),p=!0}if(d&&d.isDataRow&&!u(d.index)&&!i[parseInt(c.toString(),10)].classList.contains("e-editedrow"))for(var g=0;g<d[""+s].length;g++){var m=d[""+s][parseInt(g.toString(),10)];if(m.isTemplate){var v=new xt(this,this.serviceLocator),y=r?i[parseInt(c.toString(),10)].children[m.index+(p?h:l)]:this.getCellFromIndex(c,n?m.index:g-l);v.refreshTD(y,m,d.data,{index:d[""+o]})}}p=!1}},e.prototype.refreshGroupCaptionFooterTemplate=function(){for(var i=!!(this.childGrid&&this.element.querySelectorAll(".e-childgrid").length),r=this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow"),n=0;n<r.length;n++){var s=this,o=this.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"));if(i&&!o&&x(r[parseInt(n.toString(),10)],"e-childgrid")&&(s=x(r[parseInt(n.toString(),10)],"e-childgrid").ej2_instances[0],o=s.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"))),o){var l=o.cells.filter(function(p){return p.isDataCell}),h={cells:l,data:o.data,dataUid:o.uid};s.notify(Rc,h)}}},e.prototype.refreshReactHeaderTemplateByUid=function(i){if(this.isReact)for(var r="cells",n=this.headerModule.rows,s=this.getNormalizedColumnIndex(i),o=function(p){var c=n[parseInt(p.toString(),10)][""+r][parseInt(s.toString(),10)];if(c&&c.column.uid===i){var d=new Fu(l,l.serviceLocator),f=x(l.element.querySelectorAll("[e-mappinguid="+i+"]")[0],"e-templatecell");d.refresh(c,f);var g=l.sortSettings.columns,m=g.findIndex(function(w){return w.field===c.column.field});if(m!==-1){var v=l.getColumnHeaderByField(c.column.field);l.ariaService.setSort(v,g[parseInt(m.toString(),10)].direction.toLowerCase()),g.length>1&&v.querySelector(".e-headercelldiv").insertBefore(l.createElement("span",{className:"e-sortnumber",innerHTML:(m+1).toString()}),v.querySelector(".e-headertext"));var y=v.querySelector(".e-sortfilterdiv");g[parseInt(m.toString(),10)].direction==="Ascending"?ae(y,["e-ascending","e-icon-ascending"],[]):ae(y,["e-descending","e-icon-descending"],[])}}},l=this,h=0;h<n.length;h++)o(h)},e.prototype.setRowData=function(i,r){var n="uid",s=this.contentModule.getRows(),o=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(s=s.filter(function(c){return c.isDataRow}));var l=s.filter(function(c){return j(o,c.data)===i})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l[""+n]+"]")):void 0;if(!u(l)&&h.length){if(l.changes=r,this.frozenRows){var p=this.getRowsObject()[l.index];this.setFrozenRowData(p,r)}else this.setFrozenRowData(l,r);this.aggregates.length>0&&(this.notify(Fi,{}),this.groupSettings.columns.length>0&&this.notify(Sn,{}))}else return},e.prototype.setFrozenRowData=function(i,r){var n=new Wi(this.serviceLocator,null,this);i.changes=r,zs(i,this.getForeignKeyColumns(),i.changes),n.refresh(i,this.getColumns(),!0)},e.prototype.getCellFromIndex=function(i,r){var n=this.getColumnByIndex(r);return Ju(this,n,i,r)},e.prototype.getMovableCellFromIndex=function(i,r){return this.getCellFromIndex(i,r)},e.prototype.getFrozenRightCellFromIndex=function(i,r){return this.getCellFromIndex(i,r)},e.prototype.getColumnHeaderByIndex=function(i){return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(i.toString(),10)]},e.prototype.getMovableColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},e.prototype.getFrozenRightColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},e.prototype.getFrozenLeftColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},e.prototype.getRowObjectFromUID=function(i){var r=this.contentModule.getRows(),n=this.rowObject(r,i);return u(n)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(n=this.rowObject(this.vRows,i)),n},e.prototype.rowObject=function(i,r){if(i)for(var n=0,s=i;n<s.length;n++){var o=s[n];if(o.uid===r)return o}return null},e.prototype.getRowsObject=function(){return this.contentModule.getRows()},e.prototype.getMovableRowsObject=function(){return this.contentModule.getRows()},e.prototype.getFrozenRightRowsObject=function(){return this.contentModule.getRows()},e.prototype.getColumnHeaderByField=function(i){var r=this.getColumnByField(i);return r?this.getColumnHeaderByUid(r.uid):void 0},e.prototype.getColumnHeaderByUid=function(i){var r=this.getHeaderContent().querySelector("[e-mappinguid="+i+"]");return r?r.parentElement:void 0},e.prototype.getColumnByIndex=function(i){var r;return this.getColumns().some(function(n,s){return r=n,s===i}),r},e.prototype.getColumnByField=function(i){return pr(this.getColumns(),function(r){if(r.field===i)return r})[0]},e.prototype.getColumnIndexByField=function(i){for(var r=this.getColumns(),n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].field===i)return n;return-1},e.prototype.getColumnByUid=function(i){return pr(this.getColumns().concat(this.getStackedColumns(this.columns)),function(r){if(r.uid===i)return r})[0]},e.prototype.getStackedColumns=function(i,r){r===void 0&&(r=[]);for(var n=0,s=i;n<s.length;n++){var o=s[n];o.columns&&(r.push(o),this.getStackedColumns(o.columns,r))}return r},e.prototype.getColumnIndexByUid=function(i){var r=pr(this.getColumns(),function(n,s){if(n.uid===i)return s})[0];return u(r)?-1:r},e.prototype.getUidByColumnField=function(i){return pr(this.getColumns(),function(r){if(r.field===i)return r.uid})[0]},e.prototype.getNormalizedColumnIndex=function(i){var r=this.getColumnIndexByUid(i);return r+this.getIndentCount()},e.prototype.getIndentCount=function(){var i=0;return this.allowGrouping&&(i+=this.groupSettings.columns.length),this.isDetail()&&i++,this.isRowDragable()&&u(this.rowDropSettings.targetID)&&i++,i},e.prototype.getColumnFieldNames=function(){for(var i=[],r,n=0,s=this.getColumns().length;n<s;n++)r=this.getColumns()[parseInt(n.toString(),10)],r.visible&&i.push(r.field);return i},e.prototype.getRowTemplate=function(){return this.rowTemplateFn},e.prototype.getEmptyRecordTemplate=function(){return this.emptyRecordTemplateFn},e.prototype.getDetailTemplate=function(){return this.detailTemplateFn},e.prototype.getEditTemplate=function(){return this.editTemplateFn},e.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},e.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},e.prototype.getPrimaryKeyFieldNames=function(){for(var i=[],r=0;r<this.columnModel.length;r++)this.columnModel[parseInt(r.toString(),10)].isPrimaryKey&&i.push(this.columnModel[parseInt(r.toString(),10)].field);return i},e.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},e.prototype.refreshHeader=function(){this.headerModule.refreshUI()},e.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},e.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},e.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},e.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},e.prototype.getSelectedColumnsUid=function(){var i=this,r=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(n){return r.push(i.getColumns()[parseInt(n.toString(),10)].uid)}),r},e.prototype.getDataModule=function(){return this.renderModule.data},e.prototype.showColumns=function(i,r){r=r||"headerText",this.showHider.show(i,r)},e.prototype.hideColumns=function(i,r){r=r||"headerText",this.showHider.hide(i,r)},e.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},e.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount||this.rightcount},e.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount||this.leftcount},e.prototype.getMovableColumnsCount=function(){return this.movableCount||this.movablecount},e.prototype.updateFrozenColumnsWidth=function(){if(this.isFrozenGrid()&&!this.enableColumnVirtualization)for(var i=this.getColumns(),r=!0,n=0,s=0,o=0,l=i.some(function(d){return(d.freeze==="Left"||d.freeze==="Right"||d.freeze==="Fixed"||d.isFrozen)&&d.width==="auto"}),h=function(d){var f=i[parseInt(d.toString(),10)];if(u(f.width)&&(f.freeze==="Left"||f.freeze==="Right"||f.freeze==="Fixed"||f.isFrozen)&&(f.width=Math.max(200,f.minWidth?parseFloat(f.minWidth.toString()):0),!u(f.maxWidth)&&parseFloat(f.maxWidth.toString())<f.width&&(f.width=f.maxWidth)),f.width==="auto"&&l){var g=0;if(r){i.filter(function(v){if(v.visible&&(v.width==="auto"&&n++,v.width!=="auto")){var y=u(v.width)?Math.max(200,v.minWidth?parseFloat(v.minWidth.toString()):0):parseFloat(v.width.toString());g+=y}});var m=p.isPercentageWidthGrid()||p.width==="auto"?p.element.getBoundingClientRect().width:parseFloat(p.width.toString());s=p.height==="auto"?m-g:m-g-Dt(),s<0&&(s=0),o=parseFloat((s/n).toString()),i.filter(function(v){v.visible&&v.minWidth&&parseFloat(v.minWidth.toString())>o&&(s=s-parseFloat(v.minWidth.toString()),n--)}),r=!1}f.minWidth&&parseFloat(f.minWidth.toString())>o?f.width=parseFloat(f.minWidth.toString()):f.width=s/n}},p=this,c=0;c<i.length;c++)h(c)},e.prototype.refreshSplitFrozenColumn=function(){this.splitFrozenCount(this.columns),this.updateFrozenColumnsWidth(),this.isAutoGenerateColumns=!0},e.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.fixedColumns=[],this.splitFrozenCount(this.columns),this.leftcount=this.frozenLeftCount,this.rightcount=this.frozenRightCount,this.movablecount=this.movableCount,this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount?this.frozenName="Left-Right":this.frozenColumns||this.frozenRows?this.frozenName="Left":this.frozenName=void 0},e.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},e.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},e.prototype.getVisibleMovableCount=function(){return this.visibleMovable},e.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},e.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},e.prototype.getMovableColumns=function(){return this.movableColumns},e.prototype.splitStackedColumns=function(i){for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].columns?this.splitStackedColumns(i[parseInt(r.toString(),10)].columns):i[parseInt(r.toString(),10)].freeze==="Left"||i[parseInt(r.toString(),10)].isFrozen?(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.leftcount++):i[parseInt(r.toString(),10)].freeze==="Right"?(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.rightcount++):i[parseInt(r.toString(),10)].freeze==="Fixed"?(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenFixed++,this.fixedcount++):(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleMovable++,this.movablecount++)},e.prototype.pushStackedColumns=function(i,r,n,s,o){n[parseInt(r.toString(),10)]=s.headerText;for(var l=0;l<i.length;l++)if(i[parseInt(l.toString(),10)].columns)r=r+1,this.pushStackedColumns(i[parseInt(l.toString(),10)].columns,r,n,i[parseInt(l.toString(),10)],o),r=r-1;else{var h=[];h=n.slice().slice(0,r+1),i[parseInt(l.toString(),10)].freeze==="Left"||i[parseInt(l.toString(),10)].isFrozen?(this.stackedLeft.push(h),this.stackedarrayLeft.push(i[parseInt(l.toString(),10)])):i[parseInt(l.toString(),10)].freeze==="Right"?(this.stackedRight.push(h),this.stackedarrayRight.push(i[parseInt(l.toString(),10)])):i[parseInt(l.toString(),10)].freeze==="Fixed"?(this.stackedFixed.push(h),this.stackedarrayFixed.push(i[parseInt(l.toString(),10)])):(this.stackedMovable.push(h),this.stackedarrayMovable.push(i[parseInt(l.toString(),10)]))}},e.prototype.pushallcol=function(i,r,n,s,o){if(n.headerText===r)o?n.columns.push(s):n.columns.push({headerText:i,columns:[]});else if(n.columns&&n.columns.length)for(var l=0;l<n.columns.length;l++)this.pushallcol(i,r,n.columns[parseInt(l.toString(),10)],s,o)},e.prototype.resetStackedColumns=function(i,r,n){for(var s={},o=[],l=1;l<=i.length;l++)for(var h=i[l-1],p=0;p<h.length;p++)if(!s.columns&&l===1?(s={headerText:h[parseInt(p.toString(),10)],columns:[]},o.push(h[parseInt(p.toString(),10)])):o.indexOf(h[parseInt(p.toString(),10)])===-1&&(this.pushallcol(h[parseInt(p.toString(),10)],h[p-1],s),o.push(h[parseInt(p.toString(),10)])),p===h.length-1){this.pushallcol(null,h[parseInt(p.toString(),10)],s,r[l-1],!0);for(var c=0;c!==i.length-1&&l!==i.length;)h.toString()===i[parseInt(l.toString(),10)].toString()&&(l++,this.pushallcol(null,h[parseInt(p.toString(),10)],s,r[l-1],!0)),c++}n==="Left"?this.frozenLeftColumns.push(s):n==="Right"?this.frozenRightColumns.push(s):this.movableColumns.push(s)},e.prototype.splitFrozenCount=function(i){if(this.frozenColumns||this.changedProperties&&this.changedProperties.frozenColumns===0){var r=!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.isPreparedFrozenColumns?this.enableColumnVirtualization&&this.columnModel&&this.columnModel.length?this.columnModel:this.getColumns():this.columns;if(!this.changedProperties||this.changedProperties&&!this.changedProperties.frozenColumns)for(var n=0;n<r.length;n++)this.frozenColumns>n?r[parseInt(n.toString(),10)].freeze="Left":r[parseInt(n.toString(),10)].freeze==="Right"||r[parseInt(n.toString(),10)].freeze==="Fixed"?r[parseInt(n.toString(),10)].freeze=r[parseInt(n.toString(),10)].freeze:r[parseInt(n.toString(),10)].freeze=void 0}for(var n=0;n<(u(i)?0:i.length);n++)if(i[parseInt(n.toString(),10)].columns){this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0;var s=[];this.splitStackedColumns(i[parseInt(n.toString(),10)].columns),this.leftcount&&!this.rightcount&&!this.movablecount&&!this.fixedcount?(this.frozenLeftCount+=this.leftcount,this.frozenLeftColumns.push(i[parseInt(n.toString(),10)])):this.rightcount&&!this.leftcount&&!this.movablecount&&!this.fixedcount?(this.frozenRightCount+=this.rightcount,this.frozenRightColumns.push(i[parseInt(n.toString(),10)])):this.movablecount&&!this.leftcount&&!this.rightcount&&!this.fixedcount?(this.movableCount+=this.movablecount,this.movableColumns.push(i[parseInt(n.toString(),10)])):this.fixedcount&&!this.leftcount&&!this.rightcount&&!this.movablecount?(this.fixedCount+=this.fixedcount,this.fixedColumns.push(i[parseInt(n.toString(),10)]),this.movableCount+=this.movablecount,this.movableColumns.push(i[parseInt(n.toString(),10)])):(this.frozenLeftCount+=this.leftcount,this.frozenRightCount+=this.rightcount,this.movableCount+=this.movablecount,this.fixedCount+=this.fixedcount,this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.stackedLeft=[],this.stackedRight=[],this.stackedFixed=[],this.stackedMovable=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayFixed=[],this.stackedarrayMovable=[],this.pushStackedColumns(i[parseInt(n.toString(),10)].columns,0,s,i[parseInt(n.toString(),10)],{headerText:i[parseInt(n.toString(),10)].headerText,columns:[]}),this.stackedarrayLeft.length&&this.resetStackedColumns(this.stackedLeft,this.stackedarrayLeft,"Left"),this.stackedarrayRight.length&&this.resetStackedColumns(this.stackedRight,this.stackedarrayRight,"Right"),this.stackedarrayFixed.length&&this.resetStackedColumns(this.stackedFixed,this.stackedarrayFixed,"Fixed"),this.stackedarrayMovable.length&&this.resetStackedColumns(this.stackedMovable,this.stackedarrayMovable,"Movable"),this.stackedLeft=[],this.stackedRight=[],this.stackedMovable=[],this.stackedFixed=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayMovable=[],this.stackedarrayFixed=[])}else i[parseInt(n.toString(),10)].freeze==="Right"?(i[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.frozenRightColumns.push(i[parseInt(n.toString(),10)]),this.frozenRightCount++):i[parseInt(n.toString(),10)].freeze==="Left"||i[parseInt(n.toString(),10)].isFrozen?(i[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(i[parseInt(n.toString(),10)]),this.frozenLeftCount++):i[parseInt(n.toString(),10)].freeze==="Fixed"?(this.fixedColumns.push(i[parseInt(n.toString(),10)]),this.fixedCount++,this.movableColumns.push(i[parseInt(n.toString(),10)]),this.movableCount++):(i[parseInt(n.toString(),10)].visible!==!1&&this.visibleMovable++,this.movableColumns.push(i[parseInt(n.toString(),10)]),this.movableCount++);if(this.frozenLeftColumns.length){var r=this.frozenLeftColumns[this.frozenLeftColumns.length-1];this.removeBorder(this.frozenLeftColumns),this.frozenLeftBorderColumns(r instanceof Xe?this.lastVisibleLeftCol(this.frozenLeftColumns):r)}if(this.frozenRightColumns.length){var r=this.frozenRightColumns[0];this.removeBorder(this.frozenRightColumns),this.frozenRightBorderColumns(r instanceof Xe?this.firstVisibleRightCol(this.frozenRightColumns):r)}if((this.frozenLeftColumns.length||this.frozenRightColumns.length)&&this.freezeColumnRefresh){var r=this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns);this.setProperties({columns:r},!0),this.freezeColumnRefresh=!1}},e.prototype.removeBorder=function(i){for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].columns&&i[parseInt(r.toString(),10)].columns.length?((i[parseInt(r.toString(),10)].border==="Right"||i[parseInt(r.toString(),10)].border==="Left")&&(i[parseInt(r.toString(),10)].border=void 0),this.removeBorder(i[parseInt(r.toString(),10)].columns)):(i[parseInt(r.toString(),10)].border==="Right"||i[parseInt(r.toString(),10)].border==="Left")&&(i[parseInt(r.toString(),10)].border=void 0)},e.prototype.isVisibleColumns=function(i,r){if(i.columns&&i.columns.length)for(var n=0;n<i.columns.length;n++)this.isVisibleColumns(i.columns[parseInt(n.toString(),10)],r),i.columns[parseInt(n.toString(),10)].visible&&u(i.columns[parseInt(n.toString(),10)].columns)&&(!u(i.columns[parseInt(n.toString(),10)].freeze)||i.columns[parseInt(n.toString(),10)].isFrozen)&&r.push("true");else i.visible&&(!u(i.freeze)||i.isFrozen)&&r.push("true")},e.prototype.lastVisibleLeftCol=function(i){for(var r,n=i.length-1;n>=0;n--){var s=[];if(this.isVisibleColumns(i[parseInt(n.toString(),10)],s),i[parseInt(n.toString(),10)].visible&&s.indexOf("true")!==-1){r=i[parseInt(n.toString(),10)];break}}return r},e.prototype.firstVisibleRightCol=function(i){for(var r,n=0;n<i.length;n++){var s=[];if(this.isVisibleColumns(i[parseInt(n.toString(),10)],s),i[parseInt(n.toString(),10)].visible&&s.indexOf("true")!==-1){r=i[parseInt(n.toString(),10)];break}}return r},e.prototype.frozenLeftBorderColumns=function(i){if(!u(i))if(i.columns&&i.columns.length){i.border="Left";var r=i.columns[i.columns.length-1];this.frozenLeftBorderColumns(r instanceof Xe&&r.columns?this.lastVisibleLeftCol(i.columns):r)}else i.border="Left"},e.prototype.frozenRightBorderColumns=function(i){if(!u(i))if(i.columns&&i.columns.length){i.border="Right";var r=i.columns[0];this.frozenRightBorderColumns(r instanceof Xe&&r.columns?this.firstVisibleRightCol(i.columns):r)}else i.border="Right"},e.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},e.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},e.prototype.getVisibleFrozenColumnsCount=function(){for(var i=0,r=this.columnModel,n=0;n<this.frozenColumns;n++)r[parseInt(n.toString(),10)].visible&&i++;if(this.frozenLeftCount||this.leftcount||this.frozenRightCount||this.rightcount)for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible&&(r[parseInt(n.toString(),10)].freeze==="Left"||r[parseInt(n.toString(),10)].freeze==="Right")&&i++;return i},e.prototype.getVisibleFrozenCount=function(i,r){if(!this.frozenLeftCount&&!this.leftcount&&(!this.frozenRightCount||!this.rightcount))for(var n=0,s=i.length;n<s;n++)i[parseInt(n.toString(),10)].columns?r=this.getVisibleFrozenCount(i[parseInt(n.toString(),10)].columns,r):i[parseInt(n.toString(),10)].isFrozen&&i[parseInt(n.toString(),10)].visible&&r++;return r},e.prototype.getFrozenCount=function(i,r,n){for(var s=0,o=u(i)?0:i.length;s<o;s++)i[parseInt(s.toString(),10)].columns?r=this.getFrozenCount(i[parseInt(s.toString(),10)].columns,r,n):(i[parseInt(s.toString(),10)].isFrozen&&n>this.frozenColumns-1&&r++,n++);return r},e.prototype.goToPage=function(i){this.pagerModule&&this.pagerModule.goToPage(i)},e.prototype.updateExternalMessage=function(i){this.pagerModule&&!this.pagerTemplate&&this.pagerModule.updateExternalMessage(i)},e.prototype.sortColumn=function(i,r,n){this.sortModule&&this.sortModule.sortColumn(i,r,n)},e.prototype.changeDataSource=function(i,r){this.isChangeDataSourceCall=!0,this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping&&this.setProperties({groupSettings:{columns:[]}},!0),r&&r.length&&this.setProperties({columns:r},!0),i&&(u(r)&&this.setProperties({columns:[]},!0),this.setProperties({dataSource:i},!0)),this.freezeRefresh(),this.isChangeDataSourceCall=!1},e.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},e.prototype.removeSortColumn=function(i){this.sortModule&&this.sortModule.removeSortColumn(i)},e.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},e.prototype.filterByColumn=function(i,r,n,s,o,l,h,p){this.filterModule&&this.filterModule.filterByColumn(i,r,n,s,o,l,h,p)},e.prototype.clearFiltering=function(i){this.filterModule&&this.filterModule.clearFiltering(i)},e.prototype.removeFilteredColsByField=function(i,r){this.filterModule&&this.filterModule.removeFilteredColsByField(i,r)},e.prototype.selectRow=function(i,r){this.selectionModule&&this.selectionModule.selectRow(i,r)},e.prototype.selectRows=function(i){this.selectionModule&&this.selectionModule.selectRows(i)},e.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},e.prototype.selectCell=function(i,r){this.selectionModule&&this.selectionModule.selectCell(i,r)},e.prototype.selectCellsByRange=function(i,r){this.selectionModule.selectCellsByRange(i,r)},e.prototype.search=function(i){this.searchModule&&this.searchModule.search(i)},e.prototype.print=function(){this.printModule&&this.printModule.print()},e.prototype.deleteRecord=function(i,r){this.editModule&&this.editModule.deleteRecord(i,r)},e.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},e.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},e.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},e.prototype.addRecord=function(i,r){this.editModule&&this.editModule.addRecord(i,r)},e.prototype.deleteRow=function(i){this.editModule&&this.editModule.deleteRow(i)},e.prototype.editCell=function(i,r){this.editModule&&this.editModule.editCell(i,r)},e.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},e.prototype.updateCell=function(i,r,n){this.editModule&&this.editModule.updateCell(i,r,n)},e.prototype.updateRow=function(i,r){this.editModule&&this.editModule.updateRow(i,r)},e.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},e.prototype.enableToolbarItems=function(i,r){this.toolbarModule&&this.toolbarModule.enableItems(i,r)},e.prototype.copy=function(i){this.clipboardModule&&this.clipboardModule.copy(i)},e.prototype.recalcIndentWidth=function(){var i=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&!(!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")||!this.getContentTable())){var r=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,n=[].slice.call(this.getHeaderTable().querySelector(Lt).childNodes),s=[].slice.call(this.getContentTable().querySelector(Lt).childNodes),o=r/30,l=this.getFrozenMode()==="Right"?this.groupSettings.columns.length+this.getColumns().length:0,h=this.element.offsetWidth,p=function(c,d){if(go(i)){var f=(d/h*100).toFixed(1)+"%";n[parseInt(c.toString(),10)].style.width=f,s[parseInt(c.toString(),10)].style.width=f}else n[parseInt(c.toString(),10)].style.width=d+"px",s[parseInt(c.toString(),10)].style.width=d+"px";i.notify(du,{index:c,width:d})};for(o>=1&&(r=30/o),r<1&&(r=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(r=30);l<this.groupSettings.columns.length;)p(l,r),l++;this.isDetail()&&(p(l,r),l++),this.isRowDragable()&&p(l,r),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},e.prototype.resetIndentWidth=function(){if(!this.isDestroyed){if(go(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth(),this.autoFit&&this.preventAdjustColumns()),(this.width==="auto"||typeof this.width=="string"&&this.width.indexOf("%")!==-1)&&this.getColumns().filter(function(r){return(!r.width||r.width==="auto")&&r.minWidth}).length>0){var i=this.widthService.getTableWidth(this.getColumns());this.allowResizing&&i!=="auto"&&this.widthService.setMinwidthBycalculation(i)}this.isFrozenGrid()&&this.enableColumnVirtualization&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&this.textWrapSettings.wrapMode!=="Content"&&this.notify(wn,{}),this.frozenRows&&this.scrollModule&&this.scrollModule.resizeFrozenRowBorder(),this.enableStickyHeader&&this.scrollModule.makeStickyHeader()}},e.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},e.prototype.reorderColumns=function(i,r){this.reorderModule&&this.reorderModule.reorderColumns(i,r)},e.prototype.reorderColumnByIndex=function(i,r){this.reorderModule&&this.reorderModule.reorderColumnByIndex(i,r)},e.prototype.reorderColumnByTargetIndex=function(i,r){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(i,r)},e.prototype.reorderRows=function(i,r){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(i,r)},e.prototype.refreshDataSource=function(i){this.notify("refreshdataSource",i)},e.prototype.disableRowDD=function(i){var r=this.getHeaderTable(),n=this.getContentTable(),s=r.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),o=this.getRows(),l=i?"none":"";hi(r.querySelector(Lt).childNodes[0],{display:l}),hi(n.querySelector(Lt).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var p=o[parseInt(h.toString(),10)].firstElementChild;i?R([p],"e-hide"):N([p],["e-hide"])}for(var c=0;c<r.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;c++){var p=s[parseInt(c.toString(),10)];i?R([p],"e-hide"):N([p],["e-hide"])}},e.prototype.autoFitColumns=function(i,r,n){var s=this.getInjectedModules(),o=s.find(function(l){return typeof l=="function"&&!u(l.prototype)?l.prototype.getModuleName()==="resize":l.name==="Resize"});!this.resizeModule&&o&&(this.autoFitColumnsResize=!0,this.injectModules()),this.resizeModule&&this.resizeModule.autoFitColumns(i,r,n)},e.prototype.preventAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){for(var i=this.getColumns(),r=this.getHeaderTable(),n=0,s=0;s<i.length;s++)if(i[parseInt(s.toString(),10)].visible){if(this.groupSettings.columns.length&&this.groupSettings.columns.indexOf(i[parseInt(s.toString(),10)].field)>-1){var o=[].slice.call(r.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"));if(o[parseInt(s.toString(),10)].style.display==="none")continue}if(i[parseInt(s.toString(),10)].width)n+=parseFloat(i[parseInt(s.toString(),10)].width.toString());else{n=0;break}}if(n){var l=this.isPercentageWidthGrid(),h=this.widthUnit(l),p=this.getContentTable();if(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())for(var c=this.defaultIndentWidth(l),d=c.toString()+h,f=[].slice.call(r.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),g=[].slice.call(p.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),s=0;s<f.length;s++)f[parseInt(s.toString(),10)].style.setProperty("width",d),g[parseInt(s.toString(),10)].style.setProperty("width",d),n+=c;(l&&n<100||!l&&n<p.parentElement.clientWidth)&&(u(p.querySelector(".e-emptyrow"))?R([r,p],["e-tableborder"]):(R([r],["e-tableborder"]),N([p],["e-tableborder"])));var m=n.toString()+h;r.style.setProperty("width",m),p.style.setProperty("width",m)}else this.restoreAdjustColumns()}},e.prototype.restoreAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){var i=this.getHeaderTable(),r=this.getContentTable();if(N([i,r],["e-tableborder"]),i.style.removeProperty("width"),r.style.removeProperty("width"),this.groupSettings.columns.length||this.isDetail()||this.isRowDragable()){var n=this.isPercentageWidthGrid(),s=this.defaultIndentWidth(n).toString()+this.widthUnit(n),o=[].slice.call(i.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));o.forEach(function(l){l.style.setProperty("width",s)}),i.querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.recalcIndentWidth()}}},e.prototype.widthUnit=function(i){return i?"%":"px"},e.prototype.defaultIndentWidth=function(i){return i?parseFloat((30/this.element.offsetWidth*100).toFixed(1)):30},e.prototype.isPercentageWidthGrid=function(){return this.getColumns()[0].width.toString().indexOf("%")>-1},e.prototype.createColumnchooser=function(i,r,n){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(i,r,n)},e.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new Ks(this)),this.serviceLocator.register("cellRendererFactory",new ff),this.serviceLocator.register("rendererFactory",new mf),this.serviceLocator.register("localization",this.localeObj=new Xt(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new tn(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new Df(this)),this.serviceLocator.register("ariaService",this.ariaService=new zo),this.serviceLocator.register("focus",this.focusModule=new yf(this))},e.prototype.processModel=function(){var i=this.groupSettings.columns,r=this.sortSettings.columns,n,s;if(this.allowGrouping)for(var o=function(d,f){s=0;for(var g=r.length;s<g;s++)if(r[parseInt(s.toString(),10)].field===i[parseInt(d.toString(),10)]){n=!0;break}if(n?l.allowSorting?l.sortedColumns.push(r[parseInt(s.toString(),10)].field):r[parseInt(s.toString(),10)].direction="Ascending":r.push({field:i[parseInt(d.toString(),10)],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var m=l.enableColumnVirtualization?l.columns.filter(function(v){return v.field===i[parseInt(d.toString(),10)]})[0]:l.getColumnByField(i[parseInt(d.toString(),10)]);m?m.visible=!1:l.log("initial_action",{moduleName:"group",columnName:i[parseInt(d.toString(),10)]})}},l=this,h=0,p=i.length;h<p;h++)o(h,p);if(!i.length)for(var h=0;h<r.length;h++)this.sortedColumns.push(r[parseInt(h.toString(),10)].field);if(this.rowTemplateFn=tt(this.rowTemplate),this.emptyRecordTemplateFn=tt(this.emptyRecordTemplate),this.detailTemplateFn=tt(this.detailTemplate),this.editTemplateFn=tt(this.editSettings.template),this.editHeaderTemplateFn=tt(this.editSettings.headerTemplate),this.editFooterTemplateFn=tt(this.editSettings.footerTemplate),!u(this.parentDetails)){var c=u(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",c,!0)}this.initForeignColumn()},e.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(Qa,this.getForeignKeyColumns())},e.prototype.enableVerticalRendering=function(){this.rowRenderingMode==="Vertical"?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},e.prototype.gridRender=function(){var i;this.updateRTL(),this.rowRenderingMode==="Vertical"&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),T.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?(i=this.element.classList).add.apply(i,this.cssClass.split(" ")):this.element.classList.add(this.cssClass)),this.allowRowDragAndDrop&&this.rowDropSettings.targetID&&T.info.name==="mozilla"&&this.element.classList.add("e-disableuserselect"),this.editSettings.showAddNewRow&&(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.editSettings.newRowPosition="Top"),ae(this.element,["e-responsive","e-default"],[]);var r=this.serviceLocator.getService("rendererFactory");this.headerModule=r.getRenderer(Vt.Header),this.contentModule=r.getRenderer(Vt.Content),this.printModule=new Hu(this,this.scrollModule),this.clipboardModule=new Tf(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},e.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.height!=="auto"&&this.scrollModule.setPadding()},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.createGridPopUpElement=function(){var i=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),r=this.createElement("div",{className:ut,attrs:{tabIndex:"-1"}});be([r,this.createElement("div",{className:"e-uptail e-tail"})],i),r.appendChild(this.createElement("span")),be([r,this.createElement("div",{className:"e-downtail e-tail"})],i),this.element.appendChild(i)},e.prototype.updateGridLines=function(){switch(ae(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines");break}this.updateResizeLines()},e.prototype.updateResizeLines=function(){this.allowResizing&&!(this.gridLines==="Vertical"||this.gridLines==="Both")?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},e.prototype.applyTextWrap=function(){if(this.allowTextWrap){var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":zt(this.element,!1),zt(this.getContent(),!1),zt(i,!0);break;case"Content":zt(this.getContent(),!0),zt(this.element,!1),zt(i,!1);break;default:zt(this.element,!0),zt(this.getContent(),!1),zt(i,!1)}this.textWrapSettings.wrapMode!=="Content"&&this.notify(wn,{})}},e.prototype.removeTextWrap=function(){zt(this.element,!1);var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));zt(i,!1),zt(this.getContent(),!1),this.textWrapSettings.wrapMode!=="Content"&&this.notify(wn,{})},e.prototype.createTooltip=function(){this.toolTipObj=new Sp({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},e.prototype.freezeRefresh=function(){(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.pageSettings.currentPage=1),this.componentRefresh()},e.prototype.getTooltipStatus=function(i){var r=this.getHeaderTable(),n=this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"?"e-gridcontent":"e-gridheader",s=this.createTable(r,n,"header"),o=this.createTable(r,n,"content"),l=i.classList.contains("e-headercell")?s:o,h=i.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=i.className,l.querySelector(h).innerHTML=i.innerHTML;var p=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(s),document.body.removeChild(o),!!(p>i.getBoundingClientRect().width&&!i.classList.contains("e-editedbatchcell")||this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"&&p>i.getBoundingClientRect().width*.55-(this.height!=="auto"?16:0))},e.prototype.mouseMoveHandler=function(i){if(this.isEllipsisTooltip()){var r=x(i.target,"e-ellipsistooltip");(this.prevElement!==r||i.type==="mouseout")&&this.toolTipObj.close();var n=i.target.tagName,s=["A","BUTTON","INPUT"];if(r&&i.type!=="mouseout"&&!(T.isDevice&&s.indexOf(n)!==-1)&&this.getTooltipStatus(r)){var o=this.getColumns()[parseInt(r.getAttribute(_e),10)],l=o.disableHtmlEncode?"innerText":"innerHTML",h=this.createElement("div");if(r.getElementsByClassName("e-headertext").length){var p=r.getElementsByClassName("e-headertext")[0];h[""+l]=this.sanitize(p.innerText),this.toolTipObj.content=h}else h[""+l]=this.sanitize(r.innerText),this.toolTipObj.content=h;this.prevElement=r,this.enableHtmlSanitizer&&(this.toolTipObj.enableHtmlSanitizer=!0),o.disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(r)}}},e.prototype.isEllipsisTooltip=function(){var i=this.getColumns();if(this.clipMode==="EllipsisWithTooltip")return!0;for(var r=0;r<i.length;r++)if(i[parseInt(r.toString(),10)].clipMode==="EllipsisWithTooltip")return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},e.prototype.createTable=function(i,r,n){var s=this.createElement("div");s.className=this.element.className,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";var o=this.createElement("div");o.className=r;var l=this.createElement("table");l.className=i.className,l.style.cssText="table-layout: auto;width: auto";var h=n==="header"?"th":"td",p=this.createElement("tr",{attrs:{role:"row"}}),c=this.createElement(h);return p.appendChild(c),l.appendChild(p),o.appendChild(l),s.appendChild(o),document.body.appendChild(s),s},e.prototype.onKeyPressed=function(i){(i.action==="tab"||i.action==="shiftTab")&&this.toolTipObj.close()},e.prototype.wireEvents=function(){S.add(this.element,"click",this.mouseClickHandler,this),S.add(this.element,"touchend",this.mouseClickHandler,this),S.add(this.element,"focusout",this.focusOutHandler,this),S.add(this.element,"dblclick",this.dblClickHandler,this),S.add(this.element,"keydown",this.keyPressHandler,this),S.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=this.element.tabIndex===-1?0:this.element.tabIndex),this.keyboardModule=new St(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),S.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),S.add(this.element,"mouseover",this.mouseMoveHandler,this),S.add(this.element,"mouseout",this.mouseMoveHandler,this),S.add(this.getContent(),"touchstart",this.tapEvent,this),S.add(document.body,"keydown",this.keyDownHandler,this)},e.prototype.unwireEvents=function(){S.remove(this.element,"click",this.mouseClickHandler),S.remove(this.element,"touchend",this.mouseClickHandler),S.remove(this.element,"focusout",this.focusOutHandler),S.remove(this.element,"dblclick",this.dblClickHandler),S.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),S.remove(this.element,"mouseover",this.mouseMoveHandler),S.remove(this.element,"mouseout",this.mouseMoveHandler),S.remove(this.element,"keydown",this.keyPressHandler),S.remove(this.getContent(),"touchstart",this.tapEvent),S.remove(document.body,"keydown",this.keyDownHandler),S.remove(window,"resize",this.resetIndentWidth)},e.prototype.addListener=function(){this.isDestroyed||(this.on(Qr,this.dataReady,this),this.on(je,this.recalcIndentWidth,this),this.on(It,this.recalcIndentWidth,this),this.on(Os,this.refreshFrozenPosition,this),this.on(ho,this.refreshSplitFrozenColumn,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Qt,this.dataBoundFunction),this.on(at,this.onKeyPressed,this))},e.prototype.removeListener=function(){this.isDestroyed||(this.off(Qr,this.dataReady),this.off(je,this.recalcIndentWidth),this.off(It,this.recalcIndentWidth),this.on(Os,this.refreshFrozenPosition,this),this.on(ho,this.refreshSplitFrozenColumn,this),this.removeEventListener(Qt,this.dataBoundFunction),this.off(at,this.onKeyPressed))},e.prototype.getCurrentViewRecords=function(){return pi(this)?u(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},e.prototype.mouseClickHandler=function(i){if(!(this.isChildGrid(i)||x(i.target,"e-gridpopup")&&i.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(i))&&!((!this.allowRowDragAndDrop&&(x(i.target,ot)||i.target.tagName==="TD")||x(i.target,"e-headercell")&&x(i.target,"e-headercell").querySelector(".e-checkselectall")||!(this.allowGrouping||this.allowReordering)&&x(i.target,"e-gridheader"))&&i.touches)){x(i.target,"e-gridheader")&&this.allowRowDragAndDrop&&!x(i.target,"e-filterbarcell")&&i.target&&["A","BUTTON","INPUT"].indexOf(i.target.tagName)===-1&&i.preventDefault();var r=this.getRowInfo(i.target),n="cancel";r[""+n]=!1;var s=!1,o=M(i.target,"tr");if(o&&o.getAttribute("data-uid")){var l=this.getRowObjectFromUID(o.getAttribute("data-uid"));s=l?l.isDataRow:!1}s&&this.trigger(fc,r),this.notify(Ut,i)}},e.prototype.checkEdit=function(i){var r=x(i.target,ze),n=this.editSettings.mode!=="Batch"&&this.isEdit&&r&&(r.classList.contains(Ke)||r.classList.contains(Wt)&&!this.editSettings.showAddNewRow);return!x(i.target,"e-unboundcelldiv")&&(n||x(i.target,fe)&&x(i.target,fe).classList.contains("e-editedbatchcell"))},e.prototype.dblClickHandler=function(i){var r=x(i.target,"e-grid");if(!(u(r)||r.id!==this.element.id||M(i.target,".e-unboundcelldiv"))){var n=!1,s=M(i.target,"tr");if(s&&s.getAttribute("data-uid")){var o=this.getRowObjectFromUID(s.getAttribute("data-uid"));n=o?o.isDataRow:!1}var l=this.getRowInfo(i.target);l.target=i.target,n&&this.trigger(dc,l),this.notify(An,i)}},e.prototype.focusOutHandler=function(i){if(!this.isChildGrid(i)){x(i.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var r=this.element.querySelector(".e-cancel:not(.e-hide)");r&&!r.parentElement.classList.contains("e-tbar-btn")&&r.classList.add("e-hide");var n=i.relatedTarget,s=n?n.getAttribute("aria-owns"):null;(!n||!x(n,"e-grid")&&(!u(s)&&s)!==i.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!T.isDevice&&(this.editSettings.mode==="Batch"&&!((x(n,"e-ddl")||x(n,"e-ddt"))&&(x(n,"e-multi-select-list-wrapper")||x(n,"e-input-filter"))&&x(n,"e-input-group"))&&(x(n,"e-uploader")||!(n&&u(x(n,"e-input-group"))))&&(this.editModule.saveCell(),this.notify(Ls,{})),this.editSettings.mode==="Normal"&&!this.isWidgetsDestroyed&&this.editModule.editFormValidate()),this.editSettings.showAddNewRow&&(this.editModule.isShowAddedRowValidate=!1),this.keyPress=!1}},e.prototype.isChildGrid=function(i){var r=x(i.target,"e-grid");return!!(r&&r.id!==this.element.id||x(i.target,"e-unboundcelldiv")&&u(r))},e.prototype.mergePersistGridData=function(i){var r=this.getLocalData();if(!(u(r)||r==="")||!u(i)){var n=u(i)?JSON.parse(r):i;this.enableVirtualization&&n.pageSettings&&(n.pageSettings.currentPage=1);var s=Object.keys(n);this.isProtectedOnChange=!0;for(var o=0,l=s;o<l.length;o++){var h=l[o];typeof this[""+h]=="object"&&!u(this[""+h])?Array.isArray(this[""+h])&&h==="columns"?(this.setFrozenCount(),Ss(this[""+h]),this.mergeColumns(n[""+h],this[""+h]),this.mergedColumns=!0,this[""+h]=n[""+h]):P(this[""+h],n[""+h]):this[""+h]=n[""+h]}this.isProtectedOnChange=!1}},e.prototype.mergeColumns=function(i,r){for(var n=i,s=this.isFrozenGrid(),o=function(p){var c=r.filter(function(d){return s?d.index===n[parseInt(p.toString(),10)][""+xl]:d.index===n[parseInt(p.toString(),10)].index})[0];u(c)||(s&&(c=P({},c,{},!0),c.freeze=n[parseInt(p.toString(),10)].freeze),c.columns&&c.columns.length?(l.mergeColumns(n[parseInt(p.toString(),10)].columns,c.columns),n[parseInt(p.toString(),10)]=P(c,n[parseInt(p.toString(),10)],{},!0)):n[parseInt(p.toString(),10)]=P(c,n[parseInt(p.toString(),10)],{},!0))},l=this,h=0;h<n.length;h++)o(h)},e.prototype.isDetail=function(){return!u(this.detailTemplate)||!u(this.childGrid)},e.prototype.isCommandColumn=function(i){var r=this;return i.some(function(n){return n.columns?r.isCommandColumn(n.columns):!!(n.commands||n.commandsTemplate)})},e.prototype.isForeignKeyEnabled=function(i){var r=this;return i.some(function(n){return n.columns?r.isForeignKeyEnabled(n.columns):!!(n.dataSource&&n.foreignKeyValue)})},e.prototype.keyPressHandler=function(i){var r=P(i,{cancel:!1});this.trigger("keyPressed",r),r.cancel===!0&&i.stopImmediatePropagation()},e.prototype.keyDownHandler=function(i){if(i.altKey){if(i.keyCode===74&&(this.keyA?(this.notify(ml,{target:i.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(N([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),i.keyCode===87){var r=this.focusModule;if(r){if(!this.currentViewData.length)return;r.focusContent(),r.addOutline()}}i.keyCode===65&&(this.keyA=!0),i.keyCode===72&&this.keyA&&(this.notify(ml,{target:i.target,collapse:!0}),this.keyA=!1)}i.keyCode===13&&this.notify(Cs,i)},e.prototype.keyActionHandler=function(i){this.isChildGrid(i)||this.isEdit&&(!this.editSettings.showAddNewRow||this.editSettings.showAddNewRow&&this.element.querySelector(Ke))&&i.action!=="escape"&&i.action!=="enter"&&i.action!=="shiftEnter"&&i.action!=="tab"&&i.action!=="shiftTab"||(this.keyPress=!0,this.allowKeyboard&&(i.action==="ctrlPlusP"&&(i.preventDefault(),this.print()),this.notify(at,i)))},e.prototype.setInjectedModules=function(i){this.injectedModules=i},e.prototype.updateColumnObject=function(){On(this.columns,this.enableColumnVirtualization,this),Ss(this.columns),this.initForeignColumn(),this.notify(Jr,{})},e.prototype.refreshFrozenPosition=function(i){i&&i.isModeChg?(this.refreshColumns(),this.notify(lo,{})):this.refreshColumns()},e.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(i){return i.isForeignColumn()})},e.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:eg(this.element)},e.prototype.refreshColumns=function(){if(this.freezeColumnRefresh=!0,this.setFrozenCount(),this.updateFrozenColumnsWidth(),this.isFrozenGrid()&&(this.isPreventScrollEvent=!0),this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()&&this.enableColumnVirtualization){var i=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.getHeaderContent().querySelector("."+it).scrollLeft=i,this.getContent().querySelector("."+ut).scrollLeft=i}},e.prototype.excelExport=function(i,r,n,s){if(this.exportGrids&&this.exportGrids.length){var o=this.exportGrids.slice();return this.exportMultipleExcelGrids(o,i,r,n,s)}else return this.excelExportModule?this.excelExportModule.Map(this,i,r,n,!1,s):null},e.prototype.csvExport=function(i,r,n,s){return this.excelExportModule?this.excelExportModule.Map(this,i,r,n,!0,s):null},e.prototype.pdfExport=function(i,r,n,s){if(this.exportGrids&&this.exportGrids.length){var o=this.exportGrids.slice();return this.exportMultiplePdfGrids(o,i,r,n,s)}else return this.pdfExportModule?this.pdfExportModule.Map(this,i,r,n,s):null},e.prototype.exportMultiplePdfGrids=function(i,r,n,s,o){var l=this;if(i.length!==0){var h=i.shift(),p=document.getElementById(h).ej2_instances[0],c=p.pdfExportModule?p.pdfExportModule.Map(p,r,n,s,o):Promise.resolve();return c.then(function(d){return n=i.length!==1,l.exportMultiplePdfGrids(i,r,n,d,o)})}return null},e.prototype.exportMultipleExcelGrids=function(i,r,n,s,o){var l=this;if(i.length!==0){var h=i.shift(),p=document.getElementById(h).ej2_instances[0],c=p.excelExportModule?p.excelExportModule.Map(p,r,n,s,!1,o):null;return c.then(function(d){return n=i.length!==1,l.exportMultipleExcelGrids(i,r,n,d,o)})}return null},e.prototype.groupColumn=function(i){this.groupModule&&this.groupModule.groupColumn(i)},e.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},e.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},e.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},e.prototype.ungroupColumn=function(i){this.groupModule&&this.groupModule.ungroupColumn(i)},e.prototype.openColumnChooser=function(i,r){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(i,r)},e.prototype.scrollRefresh=function(){var i=this,r=function(){i.scrollModule.refresh(),i.off(je,r)};this.on(je,r,this)},e.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},e.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},e.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},e.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},e.prototype.selectCells=function(i){this.selectionModule&&this.selectionModule.selectCells(i)},e.prototype.selectRowsByRange=function(i,r){this.selectionModule&&this.selectionModule.selectRowsByRange(i,r)},e.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},e.prototype.ensureModuleInjected=function(i){return this.getInjectedModules().indexOf(i)>=0},e.prototype.destroyTemplate=function(i,r){this.clearTemplate(i,r)},e.prototype.log=function(i,r){var n=this.getInjectedModules(),s=n.find(function(o){return o.name==="Logger"});s||(t.Inject(Mf),this.enableLogger=!0,this.injectModules()),this.loggerModule&&this.loggerModule.log(i,r)},e.prototype.applyBiggerTheme=function(i){this.element.classList.contains("e-bigger")&&i.classList.add("e-bigger")},e.prototype.getPreviousRowData=function(){var i=this.getRowsObject()[this.getRows().length-1].data;return i},e.prototype.hideScroll=function(){var i=this.getContent().querySelector("."+ut);i.scrollHeight<=i.clientHeight&&(this.scrollModule.removePadding(),i.style.overflowY="auto")},e.prototype.getRowIndexByPrimaryKey=function(i){var r=this.getPrimaryKeyFieldNames()[0];i=typeof i=="object"?i[""+r]:i;for(var n=this.getRowsObject(),s=0;s<n.length;s++)if(!(n[parseInt(s.toString(),10)].isDetailRow||n[parseInt(s.toString(),10)].isCaptionRow)){var o=n[parseInt(s.toString(),10)].data[""+r];if(r.split(".").length>1&&(o=vo(r,n[parseInt(s.toString(),10)].data)),o===i)return n[parseInt(s.toString(),10)].index}return-1},e.prototype.grabColumnByFieldFromAllCols=function(i,r){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,o=0;o<s.length;o++)if(!r&&i===s[parseInt(o.toString(),10)].field||r&&s[parseInt(o.toString(),10)].isForeignColumn()&&i===s[parseInt(o.toString(),10)].foreignKeyValue){n=s[parseInt(o.toString(),10)];break}return n},e.prototype.grabColumnByUidFromAllCols=function(i){var r;this.columnModel=[],this.updateColumnModel(this.columns);for(var n=this.columnModel,s=0;s<n.length;s++)i===n[parseInt(s.toString(),10)].uid&&(r=n[parseInt(s.toString(),10)]);return r},e.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length||this.searchSettings.key.length){var i=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof q?this.renderModule.data.getData(this.dataSource,i):this.dataSource instanceof q?this.dataSource.executeLocal(i):new q(this.dataSource,i).executeLocal(i)}return[]},e.prototype.getUserAgent=function(){var i=T.userAgent.toLowerCase();return/iphone|ipod|ipad|macintosh/.test(i)},e.prototype.tapEvent=function(i){this.getUserAgent()&&(bt.timer?(clearTimeout(bt.timer),bt.timer=null,this.dblClickHandler(i),this.notify(Fo,i)):bt.timer=setTimeout(function(){bt.timer=null},300))},e.prototype.getRowUid=function(i){return""+i+this.rowUid++},e.prototype.getRowElementByUID=function(i){var r,n=[],s=[].slice.call(this.getContent().querySelector(me).children);this.frozenRows?(n=[].slice.call(this.getHeaderContent().querySelector(me).children),n=n.concat(s)):n=s;for(var o=0,l=n;o<l.length;o++){var h=l[o];if(h.getAttribute("data-uid")===i){r=h;break}}return r},e.prototype.getHiddenColumns=function(){for(var i=[],r=0,n=this.columnModel;r<n.length;r++){var s=n[r];s.visible===!1&&i.push(s)}return i},e.prototype.calculatePageSizeByParentHeight=function(i){if(this.allowPaging&&(this.allowTextWrap&&this.textWrapSettings.wrapMode==="Header"||!this.allowTextWrap)){var r=0;i.indexOf("%")!==-1&&(i=parseInt(i,10)/100*this.element.clientHeight);var n=this.getNoncontentHeight()+this.getRowHeight();if(i>n){var s=0;s=i-this.getNoncontentHeight(),r=s/this.getRowHeight()}if(r>0)return Math.floor(r)}return 0},e.prototype.getNoncontentHeight=function(){var i=0;if(u(this.getHeaderContent().clientHeight)||(i+=this.getHeaderContent().clientHeight),this.toolbar&&!u(this.element.querySelector(".e-toolbar").clientHeight)&&(i+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!u(this.element.querySelector(".e-gridpager").clientHeight)&&(i+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!u(this.element.querySelector(".e-columnheader").clientHeight)&&(i+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!u(this.element.querySelector(".e-groupdroparea").clientHeight)&&(i+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!u(this.element.querySelector(".e-summaryrow").clientHeight))for(var r=0;r<this.element.getElementsByClassName("e-summaryrow").length;r++)i+=this.element.getElementsByClassName("e-summaryrow")[parseInt(r.toString(),10)].clientHeight;return i},e.prototype.getSummaryValues=function(i,r){return A.aggregates[i.type.toLowerCase()](r,i.field)},e.prototype.serverExcelExport=function(i){this.isExcel=!0,this.exportGrid(i)},e.prototype.serverPdfExport=function(i){this.isExcel=!1,this.exportGrid(i)},e.prototype.serverCsvExport=function(i){this.isExcel=!0,this.exportGrid(i)},e.prototype.exportGrid=function(i){var r=this,n=r.getDataModule().generateQuery(!0),s=new jt().processQuery(new q({url:""}),n),o=JSON.parse(s.data),l=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"])),h=["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"];l.filterSettings.columns=o.where,l.searchSettings.fields=o.search&&o.search[0].fields||[],l.sortSettings.columns=o.sorted,l.columns=this.setHeaderText(l.columns,h);var p=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),c=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});c.value=JSON.stringify(l),p.method="POST",p.action=i,p.appendChild(c),document.body.appendChild(p),p.submit(),p.remove()},e.prototype.setHeaderText=function(i,r){for(var n=0;n<i.length;n++){var s=this.getColumnByUid(i[parseInt(n.toString(),10)].uid);i[parseInt(n.toString(),10)].headerText=s.headerText,u(s.template)||(i[parseInt(n.toString(),10)].template="true"),i[parseInt(n.toString(),10)].format&&(i[parseInt(n.toString(),10)].format=ug(this.getFormat(i[parseInt(n.toString(),10)].format),i[parseInt(n.toString(),10)].type,this.isExcel,za)),i[parseInt(n.toString(),10)].columns&&this.setHeaderText(i[parseInt(n.toString(),10)].columns,r);for(var o=Object.keys(i[parseInt(n.toString(),10)]),l=0;l<o.length;l++)r.indexOf(o[parseInt(l.toString(),10)])<0&&delete i[parseInt(n.toString(),10)][o[parseInt(l.toString(),10)]]}return i},e.prototype.getFormat=function(i){return typeof i=="object"?u(i.format)?i.skeleton:i.format:i},e.prototype.isCollapseStateEnabled=function(){var i="isExpanded";return this[""+i]===!1},e.prototype.updateRowValue=function(i,r){var n={requestType:"save",data:r};this.showSpinner(),this.notify(Tn,n),this.refresh()},e.prototype.setForeignKeyData=function(){this.dataBind();var i=this.getDataModule().getForeignKeyDataState();i.isPending?(this.getDataModule().setForeignKeyDataState({}),i.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},e.prototype.resetFilterDlgPosition=function(i){var r=this.getColumnHeaderByField(i);if(r){var n=r.querySelector(".e-filtermenudiv"),s=this.element.querySelector(".e-filter-popup");if(n&&s){var o=this.element.getBoundingClientRect(),l=n.getBoundingClientRect();s&&(s.offsetWidth+l.right>o.right?s.style.left=(l.right-s.offsetWidth-o.left).toString()+"px":s.style.left=(l.right-o.left).toString()+"px")}}},e.prototype.renderTemplates=function(i){var r=this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact;if(r&&this.portals)this.parentDetails.parentInstObj.portals=this.parentDetails.parentInstObj.portals.concat(this.portals),this.parentDetails.parentInstObj.renderTemplates(i),this.portals=void 0;else{var n="portals";this.notify("reactTemplateRender",this[""+n]),this.renderReactTemplates(i)}},e.prototype.batchUpdate=function(i){this.processRowChanges(i)},e.prototype.batchAsyncUpdate=function(i){this.processBulkRowChanges(i)},e.prototype.processBulkRowChanges=function(i){var r=this;if(!this.dataToBeUpdated)this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i),setTimeout(function(){r.processRowChanges(r.dataToBeUpdated),r.dataToBeUpdated=null},this.asyncTimeOut);else for(var n=[Zr,jd,Bo],s=this.getPrimaryKeyFieldNames()[0],o=0;o<n.length;o++)i[n[parseInt(o.toString(),10)]]&&og(this,i,n[parseInt(o.toString(),10)],s)},e.prototype.processRowChanges=function(i){var r=this,n=this.getPrimaryKeyFieldNames()[0];i=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i);var s=this.getDataModule().saveChanges(i,n,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?s.then(function(){r.setNewData()}):this.setNewData()},e.prototype.setNewData=function(){var i=this,r=JSON.parse(JSON.stringify(this.getCurrentViewRecords())),n=this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount());n.then(function(s){i.bulkRefresh(s.result,r,s.count)})},e.prototype.deleteRowElement=function(i){var r=this.getRowElementByUID(i.uid);se(r)},e.prototype.bulkRefresh=function(i,r,n){for(var s=this,o=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(v){i.filter(function(y){return y[""+l]===o[parseInt(v.toString(),10)].data[""+l]}).length||(p.deleteRowElement(o[parseInt(v.toString(),10)]),o.splice(v,1),v--),c=v},p=this,c,d=0;d<o.length;d++)h(d),d=c;for(var f=function(v){var y;r.filter(function(w){w[""+l]===i[parseInt(v.toString(),10)][""+l]&&(w!==i[parseInt(v.toString(),10)]&&s.setRowData(i[parseInt(v.toString(),10)][""+l],i[parseInt(v.toString(),10)]),y=!0)}),y||g.renderRowElement(i[parseInt(v.toString(),10)],v)},g=this,d=0;d<i.length;d++)f(d);this.currentViewData=i;var m=[].slice.call(this.getContentTable().getElementsByClassName(ze));ag(this,this.getRowsObject(),m),lg(this),this.allowPaging&&this.notify(vt,{module:"pager",properties:{totalRecordsCount:n}})},e.prototype.renderRowElement=function(i,r){var n=new Wi(this.serviceLocator,null,this),s=new rn(this),o=s.generateRows([i]),l=n.render(o[0],this.getColumns());this.addRowObject(o[0],r);var h=this.getContentTable().querySelector(me);if(h.querySelector(".e-emptyrow")){var p=h.querySelector(".e-emptyrow");p.parentNode.removeChild(p),this.frozenRows&&this.element.querySelector(".e-frozenrow-empty")&&this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty")}this.frozenRows&&r<this.frozenRows?h=this.getHeaderContent().querySelector(me):h=this.getContent().querySelector(me),h=this.getContent().querySelector(me),h.appendChild(l)},e.prototype.addRowObject=function(i,r){this.getRowsObject().splice(r,1,i)},e.prototype.updateVisibleExpandCollapseRows=function(){for(var i=this.getRowsObject(),r=0,n=i.length;r<n;r++)(i[parseInt(r.toString(),10)].isDataRow||i[parseInt(r.toString(),10)].isAggregateRow)&&this.getRowElementByUID(i[parseInt(r.toString(),10)].uid)&&this.getRowElementByUID(i[parseInt(r.toString(),10)].uid).style.display==="none"?i[parseInt(r.toString(),10)].visible=!1:i[parseInt(r.toString(),10)].visible=!0},e.prototype.sanitize=function(i){return this.enableHtmlSanitizer?$r.sanitize(i):i},e.prototype.getHeight=function(i){return!Number.isInteger(i)&&i.indexOf("%")!==-1?i=parseInt(i,10)/100*this.element.clientHeight:!Number.isInteger(i)&&this.height!=="auto"?i=parseInt(i,10):i=this.height,i},e.prototype.getFrozenRightContent=function(){return this.contentModule.getPanel()},e.prototype.getFrozenRightHeader=function(){return this.headerModule.getPanel()},e.prototype.getMovableHeaderTbody=function(){return this.getHeaderContent().querySelector(me)},e.prototype.getMovableContentTbody=function(){return this.getContent().querySelector(me)},e.prototype.getFrozenHeaderTbody=function(){return this.getHeaderContent().querySelector(me)},e.prototype.getFrozenLeftContentTbody=function(){return this.getContent().querySelector(me)},e.prototype.getFrozenRightHeaderTbody=function(){return this.getHeaderContent().querySelector(me)},e.prototype.getFrozenRightContentTbody=function(){return this.getContent().querySelector(me)},e.prototype.showResponsiveCustomFilter=function(i){this.filterModule&&this.filterModule.showCustomFilter(i||this.rowRenderingMode==="Vertical")},e.prototype.showResponsiveCustomSort=function(i){this.sortModule&&this.sortModule.showCustomSort(i||this.rowRenderingMode==="Vertical")},e.prototype.showResponsiveCustomColumnChooser=function(i){this.columnChooserModule&&this.columnChooserModule.showCustomColumnChooser(i||this.rowRenderingMode==="Vertical")},e.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},e.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},e.prototype.getCurrentVisibleColumns=function(i){for(var r=[],n=i?this.getColumns():this.columnModel,s=0,o=n;s<o.length;s++){var l=o[s];l.visible&&r.push(l)}return r},e.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)};var t;return E([C([])],e.prototype,"currentViewData",void 0),E([C()],e.prototype,"parentDetails",void 0),E([C()],e.prototype,"showHider",void 0),E([C([])],e.prototype,"columns",void 0),E([C(!0)],e.prototype,"enableAltRow",void 0),E([C(!0)],e.prototype,"enableHover",void 0),E([C(!1)],e.prototype,"enableAutoFill",void 0),E([C(!0)],e.prototype,"allowKeyboard",void 0),E([C(!1)],e.prototype,"enableStickyHeader",void 0),E([C(!1)],e.prototype,"enableHtmlSanitizer",void 0),E([C(!1)],e.prototype,"allowTextWrap",void 0),E([mt({},jf)],e.prototype,"textWrapSettings",void 0),E([mt({},Uf)],e.prototype,"resizeSettings",void 0),E([C(!1)],e.prototype,"allowPaging",void 0),E([mt({},If)],e.prototype,"pageSettings",void 0),E([mt({},Kf)],e.prototype,"loadingIndicator",void 0),E([C(!0)],e.prototype,"enableVirtualMaskRow",void 0),E([C(!1)],e.prototype,"enableVirtualization",void 0),E([C(!1)],e.prototype,"enableColumnVirtualization",void 0),E([C(!1)],e.prototype,"enableInfiniteScrolling",void 0),E([mt({},qf)],e.prototype,"searchSettings",void 0),E([C(!1)],e.prototype,"allowSorting",void 0),E([C("Ellipsis")],e.prototype,"clipMode",void 0),E([C(!0)],e.prototype,"allowMultiSorting",void 0),E([C(!1)],e.prototype,"allowExcelExport",void 0),E([C(!1)],e.prototype,"allowPdfExport",void 0),E([mt({},Pf)],e.prototype,"sortSettings",void 0),E([mt({},zf)],e.prototype,"infiniteScrollSettings",void 0),E([C(!0)],e.prototype,"allowSelection",void 0),E([C(-1)],e.prototype,"selectedRowIndex",void 0),E([mt({},Vf)],e.prototype,"selectionSettings",void 0),E([C(!1)],e.prototype,"allowFiltering",void 0),E([C("Horizontal")],e.prototype,"rowRenderingMode",void 0),E([C(!1)],e.prototype,"enableAdaptiveUI",void 0),E([C(!1)],e.prototype,"allowReordering",void 0),E([C(!1)],e.prototype,"allowResizing",void 0),E([C(!1)],e.prototype,"allowRowDragAndDrop",void 0),E([mt({},Wf)],e.prototype,"rowDropSettings",void 0),E([mt({},Hf)],e.prototype,"filterSettings",void 0),E([C(!1)],e.prototype,"allowGrouping",void 0),E([C(!1)],e.prototype,"enableImmutableMode",void 0),E([C(!1)],e.prototype,"showColumnMenu",void 0),E([C(!1)],e.prototype,"autoFit",void 0),E([mt({},Gf)],e.prototype,"groupSettings",void 0),E([mt({},_f)],e.prototype,"editSettings",void 0),E([br([],Af)],e.prototype,"aggregates",void 0),E([C(!1)],e.prototype,"showColumnChooser",void 0),E([mt({},Ef)],e.prototype,"columnChooserSettings",void 0),E([C(!1)],e.prototype,"enableHeaderFocus",void 0),E([C("auto")],e.prototype,"height",void 0),E([C("auto")],e.prototype,"width",void 0),E([C("Default")],e.prototype,"gridLines",void 0),E([C()],e.prototype,"rowTemplate",void 0),E([C()],e.prototype,"emptyRecordTemplate",void 0),E([C()],e.prototype,"detailTemplate",void 0),E([C()],e.prototype,"childGrid",void 0),E([C()],e.prototype,"queryString",void 0),E([C("AllPages")],e.prototype,"printMode",void 0),E([C("Expanded")],e.prototype,"hierarchyPrintMode",void 0),E([C([])],e.prototype,"dataSource",void 0),E([C(null)],e.prototype,"rowHeight",void 0),E([C()],e.prototype,"query",void 0),E([C("USD")],e.prototype,"currencyCode",void 0),E([C()],e.prototype,"exportGrids",void 0),E([C()],e.prototype,"toolbar",void 0),E([C()],e.prototype,"contextMenuItems",void 0),E([C()],e.prototype,"columnMenuItems",void 0),E([C()],e.prototype,"toolbarTemplate",void 0),E([C()],e.prototype,"pagerTemplate",void 0),E([C(0)],e.prototype,"frozenRows",void 0),E([C(0)],e.prototype,"frozenColumns",void 0),E([C("")],e.prototype,"cssClass",void 0),E([C("All")],e.prototype,"columnQueryMode",void 0),E([C({})],e.prototype,"currentAction",void 0),E([C("")],e.prototype,"ej2StatePersistenceVersion",void 0),E([B()],e.prototype,"created",void 0),E([B()],e.prototype,"destroyed",void 0),E([B()],e.prototype,"load",void 0),E([B()],e.prototype,"rowDataBound",void 0),E([B()],e.prototype,"queryCellInfo",void 0),E([B()],e.prototype,"headerCellInfo",void 0),E([B()],e.prototype,"actionBegin",void 0),E([B()],e.prototype,"actionComplete",void 0),E([B()],e.prototype,"actionFailure",void 0),E([B()],e.prototype,"dataBound",void 0),E([B()],e.prototype,"recordDoubleClick",void 0),E([B()],e.prototype,"recordClick",void 0),E([B()],e.prototype,"rowSelecting",void 0),E([B()],e.prototype,"rowSelected",void 0),E([B()],e.prototype,"rowDeselecting",void 0),E([B()],e.prototype,"rowDeselected",void 0),E([B()],e.prototype,"cellSelecting",void 0),E([B()],e.prototype,"cellSelected",void 0),E([B()],e.prototype,"cellDeselecting",void 0),E([B()],e.prototype,"cellDeselected",void 0),E([B()],e.prototype,"columnSelecting",void 0),E([B()],e.prototype,"columnSelected",void 0),E([B()],e.prototype,"columnDeselecting",void 0),E([B()],e.prototype,"columnDeselected",void 0),E([B()],e.prototype,"columnDragStart",void 0),E([B()],e.prototype,"columnDrag",void 0),E([B()],e.prototype,"columnDrop",void 0),E([B()],e.prototype,"printComplete",void 0),E([B()],e.prototype,"beforePrint",void 0),E([B()],e.prototype,"pdfQueryCellInfo",void 0),E([B()],e.prototype,"pdfHeaderQueryCellInfo",void 0),E([B()],e.prototype,"pdfAggregateQueryCellInfo",void 0),E([B()],e.prototype,"excelAggregateQueryCellInfo",void 0),E([B()],e.prototype,"exportDetailDataBound",void 0),E([B()],e.prototype,"exportDetailTemplate",void 0),E([B()],e.prototype,"excelQueryCellInfo",void 0),E([B()],e.prototype,"excelHeaderQueryCellInfo",void 0),E([B()],e.prototype,"beforeExcelExport",void 0),E([B()],e.prototype,"excelExportComplete",void 0),E([B()],e.prototype,"beforePdfExport",void 0),E([B()],e.prototype,"pdfExportComplete",void 0),E([B()],e.prototype,"rowDragStartHelper",void 0),E([B()],e.prototype,"detailDataBound",void 0),E([B()],e.prototype,"rowDragStart",void 0),E([B()],e.prototype,"rowDrag",void 0),E([B()],e.prototype,"rowDrop",void 0),E([B()],e.prototype,"toolbarClick",void 0),E([B()],e.prototype,"beforeOpenColumnChooser",void 0),E([B()],e.prototype,"beforeOpenAdaptiveDialog",void 0),E([B()],e.prototype,"batchAdd",void 0),E([B()],e.prototype,"batchDelete",void 0),E([B()],e.prototype,"batchCancel",void 0),E([B()],e.prototype,"beforeBatchAdd",void 0),E([B()],e.prototype,"beforeBatchDelete",void 0),E([B()],e.prototype,"beforeBatchSave",void 0),E([B()],e.prototype,"beginEdit",void 0),E([B()],e.prototype,"commandClick",void 0),E([B()],e.prototype,"cellEdit",void 0),E([B()],e.prototype,"cellSave",void 0),E([B()],e.prototype,"cellSaved",void 0),E([B()],e.prototype,"resizeStart",void 0),E([B()],e.prototype,"resizing",void 0),E([B()],e.prototype,"resizeStop",void 0),E([B()],e.prototype,"keyPressed",void 0),E([B()],e.prototype,"beforeDataBound",void 0),E([B()],e.prototype,"contextMenuOpen",void 0),E([B()],e.prototype,"contextMenuClick",void 0),E([B()],e.prototype,"columnMenuOpen",void 0),E([B()],e.prototype,"columnMenuClick",void 0),E([B()],e.prototype,"checkBoxChange",void 0),E([B()],e.prototype,"beforeCopy",void 0),E([B()],e.prototype,"beforePaste",void 0),E([B()],e.prototype,"beforeAutoFill",void 0),E([B()],e.prototype,"columnDataStateChange",void 0),E([B()],e.prototype,"dataStateChange",void 0),E([B()],e.prototype,"dataSourceChanged",void 0),E([B()],e.prototype,"exportGroupCaption",void 0),E([B()],e.prototype,"lazyLoadGroupExpand",void 0),E([B()],e.prototype,"lazyLoadGroupCollapse",void 0),e=t=E([kt],e),e}(Hi);function Yf(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"]}var Hu=function(){function a(e,t){this.isAsyncPrint=!1,this.defered=new wt,this.parent=e,!this.parent.isDestroyed&&(this.parent.on(je,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(Ae,this.actionBeginFunction),this.parent.on(Ci,this.onEmpty.bind(this)),this.parent.on(dl,this.hierarchyPrint,this),this.scrollModule=t)}return a.prototype.isContentReady=function(){var e=this;return this.isPrintGrid()&&(this.parent.hierarchyPrintMode==="None"||!this.parent.childGrid)?this.contentReady:function(){e.defered.promise.then(function(){e.contentReady()}),e.isPrintGrid()&&e.hierarchyPrint()}},a.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},a.prototype.print=function(){this.renderPrintGrid()},a.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},a.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},a.prototype.renderPrintGrid=function(){var e=this.parent,t=ge("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});t.classList.remove("e-gridhover"),document.body.appendChild(t);for(var i=new Et(Vo(e,e.hierarchyPrintMode)),r=0;r<i.columns.length;r++)i.columns[parseInt(r.toString(),10)]=P({},i.columns[parseInt(r.toString(),10)]),e.isFrozenGrid()&&!e.getFrozenColumns()&&(i.columns[parseInt(r.toString(),10)].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=e.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;var n=i.getInjectedModules(),s=e.getInjectedModules();(!n||n.length!==s.length)&&i.setInjectedModules(s),e.notify(Wc,{element:t,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,i.appendTo(t),e.isVue3||(i.trigger=e.trigger)},a.prototype.contentReady=function(){if(this.isPrintGrid()){var e=this.parent;if(this.isAsyncPrint){this.printGrid();return}var t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger(tl,t),t.cancel){ne(e.element);return}this.isAsyncPrint||this.printGrid()}},a.prototype.printGrid=function(){var e=this.parent;if(e.height!=="auto"){var t=this.scrollModule.getCssProperties(),i=e.element.querySelector("."+ut),r=e.element.querySelector("."+pt);i.style.height="auto",i.style.overflowY="auto",r.style[t.padding]="",r.firstElementChild.style[t.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(var n=0,s=[].slice.call(e.element.getElementsByClassName(ut));n<s.length;n++){var o=s[n];o.style.overflowX="hidden"}for(var l=[].slice.call(e.element.getElementsByClassName("e-spin-show")),h=0,p=[].slice.call(l);h<p.length;h++){var o=p[h];ae(o,["e-spin-hide"],["e-spin-show"])}this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj;var c={element:e.element};e.trigger(il,c),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())},a.prototype.printGridElement=function(e){ae(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&ne(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=Ap(e.element,this.printWind)},a.prototype.removeColGroup=function(e){var t=e.groupSettings.columns.length,i=e.element,r="#"+e.element.id;if(t){for(var n=ht(".e-groupcaption",i),s=n[t-1].getAttribute("colspan"),o=0;o<n.length;o++)n[parseInt(o.toString(),10)].setAttribute("colspan",s);var l=ht("colgroup"+r+"colgroup",i),h=ht(".e-content colgroup",i),p=ht(".e-summarycontent colgroup",i);this.hideColGroup(l,t),this.hideColGroup(h,t),this.hideColGroup(p,t)}},a.prototype.hideColGroup=function(e,t){for(var i=0;i<e.length;i++)for(var r=0;r<t;r++)e[parseInt(i.toString(),10)].children[parseInt(r.toString(),10)].style.display="none"},a.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},a.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(je,this.contentReady.bind(this)),this.parent.removeEventListener(Ae,this.actionBeginFunction),this.parent.off(Ci,this.onEmpty.bind(this)),this.parent.off(dl,this.hierarchyPrint))},a.prototype.getModuleName=function(){return"print"},a.printGridProp=Yf().concat([tl,il,qa]),a}();function $f(a,e){return a.prototype&&e in a.prototype}function Vu(a,e,t){return u(a)||a===""?"":A.getObject(a,e)}function qu(a,e){requestAnimationFrame(function(){try{e(null,a())}catch(t){e(t)}})}function kl(a){return!u(a)&&!u(a.columns)&&a.columns.length>0}function Qf(a,e){for(var t=a.columns,i=e.columns,r=0;r<t.length;r++)if(i.length-1>=r)if(i[parseInt(r.toString(),10)].columns)for(var n=0;n<i[parseInt(r.toString(),10)].columns.length;n++)t[parseInt(r.toString(),10)].columns[parseInt(n.toString(),10)].type=i[parseInt(r.toString(),10)].columns[parseInt(n.toString(),10)].type;else t[parseInt(r.toString(),10)].type=i[parseInt(r.toString(),10)].type}function pr(a,e){for(var t=[],i=0,r=a.length;i<r;i++){var n=e(a[parseInt(i.toString(),10)],i);u(n)||t.push(n)}return t}function bs(a){for(var e=[],t=0;t<a.length;t++)e.push(P({},Bn(a[parseInt(t.toString(),10)]),{},!0));return e}function tt(a){if(a)try{var e=a[0]!=="<";return typeof a=="function"?We(a):e&&document.querySelectorAll(a).length?We(document.querySelector(a).innerHTML.trim()):We(a)}catch{return We(a)}}function ai(a,e){var t={},i=["style","class"];P(t,e,{}),"style"in t&&(hi(a,t[i[0]]),delete t[i[0]]),"class"in t&&(R([a],t[i[1]]),delete t[i[1]]),$(a,t)}function Br(a,e,t,i){for(var r=P(a,e,t),n=Object.keys(r),s=0;s<n.length;s++)i&&i.indexOf(n[parseInt(s.toString(),10)])!==-1&&delete r[n[parseInt(s.toString(),10)]];return r}function Ss(a,e){e===void 0&&(e=0);for(var t=0,i=u(a)?0:a.length;t<i;t++)a[parseInt(t.toString(),10)].columns?(a[parseInt(t.toString(),10)].index=u(a[parseInt(t.toString(),10)].index)?e:a[parseInt(t.toString(),10)].index,e++,e=Ss(a[parseInt(t.toString(),10)].columns,e)):(a[parseInt(t.toString(),10)].index=u(a[parseInt(t.toString(),10)].index)?e:a[parseInt(t.toString(),10)].index,e++);return e}function On(a,e,t){for(var i=0,r=u(a)?0:a.length;i<r;i++){var n=void 0;typeof a[parseInt(i.toString(),10)]=="string"?n=new Xe({field:a[parseInt(i.toString(),10)]},t):!(a[parseInt(i.toString(),10)]instanceof Xe)||a[parseInt(i.toString(),10)].columns?a[parseInt(i.toString(),10)].columns?(a[parseInt(i.toString(),10)].columns=On(a[parseInt(i.toString(),10)].columns,null,t),n=new Xe(a[parseInt(i.toString(),10)],t)):n=new Xe(a[parseInt(i.toString(),10)],t):n=a[parseInt(i.toString(),10)],n.type&&n.type.toLowerCase()==="checkbox"&&(n.allowReordering=!1),n.headerText=u(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=(typeof n.valueAccessor=="string"?j(n.valueAccessor,window):n.valueAccessor)||Vu,n.width=e&&u(n.width)?200:n.width,u(n.visible)&&(n.visible=!0),a[parseInt(i.toString(),10)]=n}return a}function Wu(a,e,t){var i=a.querySelector("span"),r=a.parentElement.getBoundingClientRect(),n=e.target.getBoundingClientRect();i.className=t,a.style.display="";var s=(u(e.clientY)?e.changedTouches[0].clientY:e.clientY)>a.offsetHeight+10;a.style.top=n.top-r.top+(s?-(a.offsetHeight+10):a.offsetHeight+10)+"px",a.style.left=Jf(a,e,n,r.left)+"px",s?(a.querySelector(".e-downtail").style.display="",a.querySelector(".e-uptail").style.display="none"):(a.querySelector(".e-downtail").style.display="none",a.querySelector(".e-uptail").style.display="")}function Jf(a,e,t,i){var r=a.offsetWidth/2,n=Kr(e).x;return n-t.left<r?t.left-i:t.right-n<r?t.right-i-r*2:n-i-r}function Bn(a){return a instanceof Ye?j("properties",a):a}function x(a,e,t){for(var i=a;i&&!(t?i.id===e:i.classList.contains(e));)i=i.parentElement;return i}function ca(a,e){for(var t=-1,i=0,r=e.length;i<r;i++)if(e[parseInt(i.toString(),10)].isEqualNode(a)){t=i;break}return t}function Yn(a,e){for(var t=0,i=e.length;t<i;t++)if(e[parseInt(t.toString(),10)]===a)return t;return-1}function Ho(a){for(var e=[],t=0,i=a.length;t<i;t++)a[parseInt(t.toString(),10)].hasOwnProperty("properties")?e.push(a[parseInt(t.toString(),10)].properties):e.push(a[parseInt(t.toString(),10)]);return e}function Kr(a){var e={};return e.x=u(a.clientX)?a.changedTouches[0].clientX:a.clientX,e.y=u(a.clientY)?a.changedTouches[0].clientY:a.clientY,e}var Xf=0;function li(a){return a+Xf++}function $e(a,e){for(var t=0,i=e.length;t<i;t++)i===e.length?a.appendChild(e[parseInt(t.toString(),10)]):a.appendChild(e[0]);return a}function Zf(a,e,t,i){if(a==="Custom"){var r=t.customAggregate;return typeof r=="string"&&(r=j(r,window)),r?r.call(i,e,t):""}return t.field in e||e instanceof Array?A.aggregates[a.toLowerCase()](e,t.field):null}var da=null;function Dt(){if(da!==null)return da;var a=document.createElement("div"),e=0;return a.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(a),e=a.offsetWidth-a.clientWidth|0,document.body.removeChild(a),da=e}var $n;function eg(a){if($n!==void 0)return $n;var e=ge("table",{className:$t,styles:"visibility: hidden",attrs:{role:"grid"}});e.innerHTML='<tr><td class="e-rowcell">A<td></tr>',a.appendChild(e);var t=e.querySelector("td").getBoundingClientRect();return a.removeChild(e),$n=Math.ceil(t.height),$n}function gi(a){return a.split(".").length>1}function rt(a){return a===void 0&&(a=""),a.replace(/\./g,"___")}function Rl(a){return a===void 0&&(a=""),a.replace(/[^a-zA-Z0-9_.]/g,"\\$&")}function Al(a){return a===void 0&&(a=""),a.replace(/___/g,".")}function Hn(a,e,t){var i=x(t,ze),r=i?i&&!i.classList.contains("e-insertedrow"):!0;return e==="beginEdit"&&r?!(a.isIdentity||a.isPrimaryKey||!a.allowEditing):e==="add"&&a.isIdentity?!1:!(r&&!a.allowEditing&&!a.isIdentity&&!a.isPrimaryKey)}function qi(a){var e=ke("#"+a.element.id+"EditConfirm",a.element);return a.editSettings.mode==="Batch"&&(ht(".e-updatedtd",a.element).length||ht(".e-gridform.e-formvalidator",a.element).length)&&a.editSettings.showConfirmDialog&&(e?e.classList.contains("e-popup-close"):!0)}function zt(a,e){var t="e-wrap";a=a instanceof Array?a:[a];for(var i=0;i<a.length;i++)e?a[parseInt(i.toString(),10)].classList.add(t):a[parseInt(i.toString(),10)].classList.remove(t)}function po(a,e){var t=a.getService("valueFormatter"),i="format",r;switch((e.type==="date"||e.type==="datetime"||e.type==="dateonly")&&(r={type:e.type==="dateonly"?"date":e.type,skeleton:e.format},typeof e.format=="string"&&e.format!=="yMd"&&(r[""+i]=e.format)),e.type){case"date":e.setFormatter(t.getFormatFunction(r)),e.setParser(t.getParserFunction(r));break;case"dateonly":e.setFormatter(t.getFormatFunction(r)),e.setParser(t.getParserFunction(r));break;case"datetime":e.setFormatter(t.getFormatFunction(r)),e.setParser(t.getParserFunction(r));break;case"number":e.setFormatter(t.getFormatFunction({format:e.format})),e.setParser(t.getParserFunction({format:e.format}));break}}function Mi(a,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];for(var r=0,n=a.length;r<n;r++)e?(ae(a[parseInt(r.toString(),10)],t.slice(),[]),a[parseInt(r.toString(),10)].setAttribute("aria-selected","true")):(ae(a[parseInt(r.toString(),10)],[],t.slice()),a[parseInt(r.toString(),10)].removeAttribute("aria-selected"))}function tg(a){for(var e={},t=[],i=0;i<a.length;i++)a[parseInt(i.toString(),10)]in e||(t.push(a[parseInt(i.toString(),10)].toString()),e[a[parseInt(i.toString(),10)]]=1);return t}function ju(a,e){var t=e.element.style.display;e.element.style.display="block";var i=e.width,r=Eo(a,e.element);e.element.style.display=t,e.element.style.top=r.top+a.getBoundingClientRect().height-5+"px";var n=r.left-i+a.clientWidth;n<1?e.element.style.left=i+n-16+"px":e.element.style.left=n+-4+"px"}function Uu(a,e){a.popup.element.style.zIndex=(e.zIndex+1).toString()}function Pr(a){var e=a.querySelector(".e-frame"),t=e.previousSibling;e.classList.contains("e-check")?(t.checked=!1,ae(e,["e-uncheck"],["e-check"])):(t.checked=!0,ae(e,["e-check"],["e-uncheck"]))}function Yt(a,e){a.checked=e}function ws(a,e,t){var i=ge("div",{className:t});return i.appendChild(e),i.setAttribute("uid",a),i}function En(a,e){N([a],["e-check","e-stop","e-uncheck"]),e?a.classList.add("e-check"):a.classList.add("e-uncheck")}function zs(a,e,t){for(var i=0;i<(u(e)?0:e.length);i++)st(e[parseInt(i.toString(),10)].field,Xi(e[parseInt(i.toString(),10)],t),a.foreignKeyData);for(var r=a.cells,i=0;i<r.length;i++)r[parseInt(i.toString(),10)].isForeignKey&&st("foreignKeyData",j(r[parseInt(i.toString(),10)].column.field,a.foreignKeyData),r[parseInt(i.toString(),10)])}function Xi(a,e,t,i){var r=a.foreignKeyField,n=u(t)?Vu(a.field,e):t;n=u(n)?"":n;var s=new re,o=i||(a.dataSource instanceof q&&a.dataSource.dataSource.json.length?a.dataSource.dataSource.json:a.columnData);return n.getDay?s.where(Ji({field:r,operator:"equal",value:n,matchCase:!1})):s.where(r,"==",n,!1),new q(o).executeLocal(s)}function Pn(a,e){var t;return e.some(function(i){return t=i,i.foreignKeyValue===a})&&t}function Zi(a){return a<10?"0"+a:String(a)}function Ji(a,e,t){var i,r,n,s=P({},Bn(a)),o=P({},Bn(a));if(u(a.value)||a.value==="")return i=new pe(s.field,s.operator,s.value,!1),i;var l=new Date(a.value);if(e==="dateonly"&&!t){typeof s.value=="string"&&(s.value=new Date(s.value));var h=s.value.getFullYear()+"-"+Zi(s.value.getMonth()+1)+"-"+Zi(s.value.getDate()),p=new pe(s.field,s.operator,h,!1);i=p}else if(a.operator==="equal"||a.operator==="notequal"){e==="datetime"?(r=new Date(l.setSeconds(l.getSeconds()-1)),n=new Date(l.setSeconds(l.getSeconds()+2)),a.value=new Date(l.setSeconds(n.getSeconds()-1))):(r=new Date(l.setHours(0)-1),n=new Date(l.setHours(24))),s.value=r,o.value=n,a.operator==="equal"?(s.operator="greaterthan",o.operator="lessthan"):a.operator==="notequal"&&(s.operator="lessthanorequal",o.operator="greaterthanorequal");var c=new pe(s.field,s.operator,s.value,!1),d=new pe(o.field,o.operator,o.value,!1);i=a.operator==="equal"?c.and(d):c.or(d)}else{e==="date"&&(a.operator==="lessthanorequal"||a.operator==="greaterthan")&&(s.value=new Date(l.setHours(24)-1)),typeof s.value=="string"&&(s.value=new Date(s.value));var p=new pe(s.field,s.operator,s.value,!1);i=p}return a.setProperties?a.setProperties({ejpredicate:i},!0):a.ejpredicate=i,i}function pi(a){return a.enableVirtualization&&a.groupSettings.columns.length>0&&a.isVirtualAdaptive&&!a.groupSettings.enableLazyLoading}function Ue(a,e){if(a===void 0&&(a=""),a){for(var t=e,i=a.split("."),r=0;r<i.length&&!u(t);r++)if(t=t[i[parseInt(r.toString(),10)]],nt(t)){var n=i[parseInt(r.toString(),10)].charAt(0).toUpperCase()+i[parseInt(r.toString(),10)].slice(1);t=e[""+n]||e[(""+n).charAt(0).toLowerCase()+(""+n).slice(1)]}return t}}function Hs(a,e){var t=new Ne,i,r="format",n="type";return e==="date"?i=typeof a=="object"?t.getDatePattern({type:a[""+n]?a[""+n]:"date",format:a[""+r]},!1):t.getDatePattern({type:"dateTime",skeleton:a},!1):i=typeof a=="object"?t.getDatePattern({type:a[""+n]?a[""+n]:"dateTime",format:a[""+r]},!1):t.getDatePattern({type:"dateTime",skeleton:a},!1),i}function ig(a,e){for(var t=a.getRowsObject(),i={},r=0,n=t;r<n.length;r++){var s=n[r];if(s.isExpand&&!s.isDetailRow){var o=a.allowPaging&&a.printMode==="AllPages"?s.index+a.pageSettings.currentPage*a.pageSettings.pageSize-a.pageSettings.pageSize:s.index;u(o)||(i[parseInt(o.toString(),10)]={},i[parseInt(o.toString(),10)].isExpand=!0,a.childGrid&&(i[parseInt(o.toString(),10)].gridModel=Vo(s.childGrid,e),i[parseInt(o.toString(),10)].gridModel.query=a.childGrid.query))}}return i}function Vo(a,e){e===void 0&&(e="Expanded");var t={};if(!a)return t;for(var i=0,r=Hu.printGridProp;i<r.length;i++){var n=r[i];n==="columns"?t[""+n]=Ho(a.getColumns()):n==="allowPaging"?t[""+n]=a.printMode==="CurrentPage":t[""+n]=Bn(a[""+n])}return t.enableHover=!1,(a.childGrid||a.detailTemplate)&&e!=="None"&&(t.expandedRows=ig(a,e)),t}function Ys(a,e,t,i){for(var r=a||{},n=arguments.length,s=1;s<n;s++)if(arguments[parseInt(s.toString(),10)])for(var o=arguments[parseInt(s.toString(),10)],l=Object.keys(Object.getPrototypeOf(o)).length?Object.keys(o).concat(rg(o)):Object.keys(o),h=0;h<l.length;h++){r[l[parseInt(h.toString(),10)]];var p=o[l[parseInt(h.toString(),10)]];r[l[parseInt(h.toString(),10)]]=p}return r}function rg(a){for(var e=[];Object.getPrototypeOf(a)&&Object.keys(Object.getPrototypeOf(a)).length;)e=e.concat(Object.keys(Object.getPrototypeOf(a))),a=Object.getPrototypeOf(a);return e}function qo(a){for(var e=0,t=0;t<(u(a)?0:a.length);t++){var i=Gu(a[parseInt(t.toString(),10)],0);e<i&&(e=i)}return e+1}function Gu(a,e){var t=e,i=[];if(a.columns){e++;for(var r=0;r<a.columns.length;r++)i[parseInt(r.toString(),10)]=Gu(a.columns[parseInt(r.toString(),10)],e);for(var n=0;n<i.length;n++)t<i[parseInt(n.toString(),10)]&&(t=i[parseInt(n.toString(),10)]);e=t}return e}function ng(a,e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].uid=e[parseInt(t.toString(),10)].isForeignKey?Pn(e[parseInt(t.toString(),10)].field,a.getForeignKeyColumns()).uid:a.enableColumnVirtualization?cg(a,e[parseInt(t.toString(),10)].field).uid:a.getColumnByField(e[parseInt(t.toString(),10)].field).uid}var bt;(function(a){a.timer=null})(bt||(bt={}));function co(a){var e=document.defaultView.getComputedStyle(a,null),t=e.getPropertyValue("transform"),i=t.replace(/,/g,""),r=parseFloat(i.split(" ")[4]),n=parseFloat(i.split(" ")[5]);return{width:r,height:n}}function fo(a,e){a.classList.contains("e-bigger")&&e.classList.add("e-bigger")}function Wo(a){var e=a.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?Dt():0}function _u(a,e){var t=0,i=a.getColumns(),r=e*30;a.isRowDragable()&&(t++,r+=30),t+=a.groupSettings.columns.length-e,r+=30*(a.groupSettings.columns.length-e);for(var n=(a.width==="auto"?a.element.offsetWidth:parseInt(a.width.toString(),10))-Wo(a),s=0;s<i.length;s++)if(i[parseInt(s.toString(),10)].visible&&(r+=parseInt(i[parseInt(s.toString(),10)].width.toString(),10),t++),r>n){t--;break}return t}function Ku(a,e){for(var t=0,i=0,r=e.getVisibleFrozenLeftCount(),n=0;n<a.childNodes.length;n++){var s=a.childNodes[parseInt(n.toString(),10)];if(r===i)break;if((s.classList.contains("e-groupcaption")||s.classList.contains("e-summarycell"))&&(i+=parseInt(s.getAttribute("colspan"),10)),s.classList.add("e-leftfreeze"),s.classList.contains("e-groupcaption")&&parseInt(s.getAttribute("colspan"),10)===1&&s.classList.add("e-freezeleftborder"),Re(s,t,e.enableRtl,"Left"),(s.classList.contains("e-indentcell")||s.classList.contains("e-recordplusexpand")||s.classList.contains("e-recordpluscollapse"))&&(t+=30),s.classList.contains("e-groupcaption")){var o=parseInt(s.getAttribute("colspan"),10);e.isRowDragable()&&(o--,t+=30),o=o-(e.groupSettings.columns.length-n),t=t+30*(e.groupSettings.columns.length-n);for(var l=e.getColumns(),h=0;h<l.length;h++){if(parseInt(s.getAttribute("colspan"),10)>1&&parseInt(l[parseInt(h.toString(),10)].width.toString(),10)+t>parseInt(e.width.toString(),10)-Wo(e)){var p=_u(e,n);s.setAttribute("colspan",p.toString());break}if(l[parseInt(h.toString(),10)].visible&&(t+=parseInt(l[parseInt(h.toString(),10)].width.toString(),10),o--),o===0)break}}if(s.classList.contains("e-summarycell")){var c=s.getAttribute("e-mappinguid"),d=e.getColumnByUid(c);t+=parseInt(d.width.toString(),10)}}}function jo(a,e){var t=sg(e),i=new wt;return t.dataSource=i.resolve,t.action=a,{state:t,deffered:i}}function sg(a){var e=new jt,t=new q({url:"",adaptor:new jt}),i=e.processQuery(t,a),r=JSON.parse(i.data);return r}function go(a){for(var e=a.getVisibleColumns(),t=0,i=0,r=0;r<e.length;r++)nt(e[parseInt(r.toString(),10)].width)?i++:e[parseInt(r.toString(),10)].width.toString().indexOf("%")!==-1&&t++;return(a.width==="auto"||typeof a.width=="string"&&a.width.indexOf("%")!==-1)&&!a.groupSettings.showGroupedColumn&&a.groupSettings.columns.length&&t&&!i}function ag(a,e,t,i,r){for(var n=0,s=0;s<e.length;s++)if(e[parseInt(s.toString(),10)]&&e[parseInt(s.toString(),10)].isDataRow){e[parseInt(s.toString(),10)].index=n,e[parseInt(s.toString(),10)].isAltRow=a.enableAltRow?n%2!==0:!1,t[parseInt(s.toString(),10)].setAttribute(Se,n.toString()),t[parseInt(s.toString(),10)].setAttribute(Ln,(n+1).toString()),e[parseInt(s.toString(),10)].isAltRow?t[parseInt(s.toString(),10)].classList.add("e-altrow"):t[parseInt(s.toString(),10)].classList.remove("e-altrow");for(var o=0;o<t[parseInt(s.toString(),10)].cells.length;o++)t[parseInt(s.toString(),10)].cells[parseInt(o.toString(),10)].setAttribute("index",n.toString());n++}e.length||a.renderModule.emptyRow(!0)}function og(a,e,t,i){var r=a.dataToBeUpdated[""+t].concat(e[""+t]).reduce(function(n,s){return n[s[""+i]]=n[s[""+i]]===void 0?s:Object.assign(n[s[""+i]],s),n},{});a.dataToBeUpdated[""+t]=Object.keys(r).map(function(n){return r[""+n]})}function lg(a){a.contentModule.rowElements=[].slice.call(a.element.querySelectorAll(".e-row:not(.e-addedrow):not(.e-cloneproperties .e-row)"))}function Vs(a,e){var t=[];return t.push(a.uid),Yu(a,t),t.indexOf(e)>-1}function Yu(a,e){for(var t=0;t<a.columns.length;t++)a.columns[parseInt(t.toString(),10)].uid&&e.push(a.columns[parseInt(t.toString(),10)].uid),a.columns[parseInt(t.toString(),10)].columns&&a.columns[parseInt(t.toString(),10)].columns.length&&Yu(a.columns[parseInt(t.toString(),10)],e)}function gr(a){return a.columns[0].freeze||a.columns[0].isFrozen?a.columns[0].freeze==="Left"||a.columns[0].isFrozen?"Left":a.columns[0].freeze==="Right"?"Right":a.columns[0].freeze==="Fixed"?"Fixed":"None":a.columns[0].columns&&a.columns[0].columns.length?gr(a.columns[0]):"None"}function yr(a){if(a.querySelector(".e-fixedfreeze"))for(var e=[].slice.call(a.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)")),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].classList.contains("e-fixedfreeze")&&(!e[t-1]||e[t-1]&&!e[t-1].classList.contains("e-fixedfreeze"))&&e[parseInt(t.toString(),10)].classList.add("e-freezeleftborder"),e[parseInt(t.toString(),10)].classList.contains("e-fixedfreeze")&&(!e[t+1]||e[t+1]&&!e[t+1].classList.contains("e-fixedfreeze"))&&e[parseInt(t.toString(),10)].classList.add("e-freezerightborder")}function Re(a,e,t,i){i==="Left"&&(t?a.style.right=e+"px":a.style.left=e+"px"),i==="Right"&&(t?a.style.left=e+"px":a.style.right=e+"px")}function $u(a,e,t,i){var r=a.getColumns(),n=e.index;if(e.freeze==="Left"&&e.border!=="Left"){for(var s=n+(i-1);r[parseInt(s.toString(),10)].visible===!1;)s++;r[parseInt(s.toString(),10)].border==="Left"&&t.classList.add("e-freezeleftborder")}else if(e.freeze==="Right"||e.freeze==="Fixed"){for(var o=0,l=n+1;l<n+i&&l!==r.length;l++)r[parseInt(l.toString(),10)].visible?o+=parseInt(r[parseInt(l.toString(),10)].width.toString(),10):i++;a.enableRtl?t.style.left=parseInt(t.style.left,10)-o+"px":t.style.right=parseInt(t.style.right,10)-o+"px"}}function mo(a,e,t){for(var i=a.getRowByIndex(e),r=0;r<i.cells.length;r++)if(i.cells[parseInt(r.toString(),10)].getAttribute("data-colindex")===t.toString())return i.cells[parseInt(r.toString(),10)];return null}function Vn(a,e,t){if(e.freeze==="Left"||e.isFrozen)if(t.classList.add("e-leftfreeze"),e.border==="Left"&&t.classList.add("e-freezeleftborder"),e.index===0)Re(t,a.getIndentCount()*30,a.enableRtl,"Left"),a.enableColumnVirtualization&&(e.valueX=a.getIndentCount()*30);else{for(var i=a.getColumns(),r=a.getIndentCount()*30,n=0;n<i.length&&e.uid!==i[parseInt(n.toString(),10)].uid;n++)i[parseInt(n.toString(),10)].visible&&(r+=parseFloat(i[parseInt(n.toString(),10)].width.toString()));Re(t,r,a.enableRtl,"Left"),a.enableColumnVirtualization&&(e.valueX=r)}else if(e.freeze==="Right"){t.classList.add("e-rightfreeze");var i=a.getColumns();if(e.border==="Right"&&t.classList.add("e-freezerightborder"),e.index===i[i.length-1].index){var r=a.getFrozenMode()==="Right"&&a.isRowDragable()?30:0;Re(t,r,a.enableRtl,"Right"),a.enableColumnVirtualization&&(e.valueX=r)}else{for(var r=a.getFrozenMode()==="Right"&&a.isRowDragable()?30:0,n=i.length-1;n>=0&&e.uid!==i[parseInt(n.toString(),10)].uid;n--)i[parseInt(n.toString(),10)].visible&&(r+=parseFloat(i[parseInt(n.toString(),10)].width.toString()));Re(t,r,a.enableRtl,"Right"),a.enableColumnVirtualization&&(e.valueX=r)}}else if(e.freeze==="Fixed"){t.classList.add("e-fixedfreeze");var i=a.getColumns(),r=0;a.getVisibleFrozenLeftCount()?r=a.getIndentCount()*30:a.getFrozenMode()==="Right"&&(r=a.groupSettings.columns.length*30);for(var n=0;n<i.length&&e.uid!==i[parseInt(n.toString(),10)].uid;n++)(i[parseInt(n.toString(),10)].freeze==="Left"||i[parseInt(n.toString(),10)].isFrozen||i[parseInt(n.toString(),10)].freeze==="Fixed")&&i[parseInt(n.toString(),10)].visible&&(r+=parseFloat(i[parseInt(n.toString(),10)].width.toString()));Re(t,r-1,a.enableRtl,"Left"),r=a.getFrozenMode()==="Right"&&a.isRowDragable()?30:0;for(var n=i.length-1;n>=0&&e.uid!==i[parseInt(n.toString(),10)].uid;n--)(i[parseInt(n.toString(),10)].freeze==="Right"||i[parseInt(n.toString(),10)].freeze==="Fixed")&&i[parseInt(n.toString(),10)].visible&&(r+=parseFloat(i[parseInt(n.toString(),10)].width.toString()));Re(t,r-1,a.enableRtl,"Right")}else t.classList.add("e-unfreeze")}function Qu(a,e,t){return[].slice.call(a.getDataRows()[parseInt(t.toString(),10)].getElementsByClassName(fe))}function Ju(a,e,t,i){return Qu(a,e,t)[parseInt(i.toString(),10)]}function hg(a,e,t,i,r,n,s){a.getFreezeTableName()===Ud||!e||n===1?t[rt(a.field)]=a.validationRules:a.getFreezeTableName()==="movable"||!a.getFreezeTableName()?i[rt(a.field)]=a.validationRules:a.getFreezeTableName()===Po&&(r[rt(a.field)]=a.validationRules)}function ug(a,e,t,i){var r,n=new Ne;if(e==="number")try{r=n.getNumberPattern({format:a,currency:i,useGrouping:!0},!0)}catch{r=a}else if(e==="date"||e==="time"||e==="datetime")try{if(r=n.getDatePattern({skeleton:a,type:e},t),u(r))throw"error"}catch{try{r=n.getDatePattern({format:a,type:e},t)}catch{r=a}}else r=a;if(e!=="number"){var s=/G|H|c|'| a|yy|y|EEEE|E/g,o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};r=r.replace(s,function(l){return o[""+l]})}return r}function Xu(a){if(a.enableAdaptiveUI)for(var e=document.getElementsByClassName("e-responsive-dialog"),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].classList.add("e-bigger")}function vo(a,e){for(var t,i=a.split(".").length,r=a.split("."),n=e,s=0;s<i;s++)t=n[r[parseInt(s.toString(),10)]],n=t;return t}function pg(a,e,t,i,r,n){for(var s=Object.keys(a),o=e,l=0;l<s.length;l++){var h=a[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)];if(r&&!r.isFrozenGrid()&&!r.isRowDragable()){if(h=!u(h)&&(parseInt(h.getAttribute("data-colindex"),10)===e||x(h,"e-addedrow")&&h.parentElement.childNodes[parseInt(e.toString(),10)]===h)?h:a[parseInt(l.toString(),10)].querySelector('td[data-colindex="'+e+'"]'),u(h))continue;e=r.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand")?h.cellIndex-1:h.cellIndex}if(a[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell").length&&h){if(hi(a[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)],{display:t}),a[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)].classList.contains("e-hide")&&N([a[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)]],["e-hide"]),n&&r.isRowDragable()||r&&r.isDetail()){var p=e+1;i[s[parseInt(l.toString(),10)]].cells[parseInt(p.toString(),10)].visible=t===""}else u(i[s[parseInt(l.toString(),10)]])||(i[s[parseInt(l.toString(),10)]].cells[parseInt(e.toString(),10)].visible=t==="",i[s[parseInt(l.toString(),10)]].cells[parseInt(e.toString(),10)].visible===!1&&a[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)].classList.add("e-hide"));e=o}}}function ct(a,e,t,i){for(var r=0,n=e;r<n.length;r++){var s=n[r];t?a.on(s.event,s.handler,i):a.off(s.event,s.handler)}}function $s(a,e,t,i){var r=rt(e.field);return i=Object.assign(i,{id:a.element.id+r,name:r,"e-mappinguid":e.uid}),a.createElement("input",{className:t,attrs:i})}function cg(a,e){var t;a.columnModel||a.getColumns();for(var i=0,r=a.columnModel;i<r.length;i++){var n=r[i];if(n.field===e){t=n;break}}return t}function Tl(a,e,t,i){i.eventHandlers[""+a]={};for(var r=0;r<e.length;r++)i.eventHandlers[""+a][e[parseInt(r.toString(),10)]]=t[e[parseInt(r.toString(),10)]]}function Ml(a,e,t){for(var i=0;i<e.length&&!a.isDestroyed;i++)a.removeEventListener(e[parseInt(i.toString(),10)],t.eventHandlers[a.element.id][e[parseInt(i.toString(),10)]])}function qn(a,e){a.destroyTemplate(e),a.isReact&&a.renderTemplates()}function yo(a){return a.parentDetails&&a.parentDetails.parentInstObj?yo(a.parentDetails.parentInstObj):a}function si(a,e,t){var i=a,r=e,n=!1;if(t)for(var s=r[0];s<i.length;s++)for(var o=i[parseInt(s.toString(),10)],l=0;l<o.length;l++){if(n&&i[parseInt(s.toString(),10)][parseInt(l.toString(),10)]===1)return r=[s,l],r;!n&&r.toString()===[s,l].toString()&&(n=!0)}else for(var s=r[0];s>=0;s--)for(var o=i[parseInt(s.toString(),10)],l=o.length-1;l>=0;l--){if(n&&i[parseInt(s.toString(),10)][parseInt(l.toString(),10)]===1)return r=[s,l],r;!n&&r.toString()===[s,l].toString()&&(n=!0)}return r}var dg=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ft=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Er={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")},qs;(function(a){a[a.Message=0]="Message",a[a.Label=1]="Label"})(qs||(qs={}));var fg=function(a){dg(e,a);function e(i,r){var n=a.call(this,r,i)||this;if(n.validated=[],n.errorRules=[],n.allowSubmit=!1,n.required="required",n.infoElement=null,n.inputElement=null,n.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",n.localyMessage={},n.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},typeof n.rules>"u"&&(n.rules={}),n.l10n=new Xt("formValidator",n.defaultMessages,n.locale),n.locale&&n.localeFunc(),$o.on("notifyExternalChange",n.afterLocalization,n),i=typeof i=="string"?ke(i,document):i,n.element!=null)n.element.setAttribute("novalidate",""),n.inputElements=ht(n.selectQuery,n.element),n.createHTML5Rules(),n.wireEvents();else return;return n}t=e,e.prototype.addRules=function(i,r){i&&(this.rules.hasOwnProperty(i)?P(this.rules[""+i],r,{}):this.rules[""+i]=r)},e.prototype.removeRules=function(i,r){if(!i&&!r)this.rules={};else if(this.rules[""+i]&&!r)delete this.rules[""+i];else{if(u(this.rules[""+i]&&r))return;for(var n=0;n<r.length;n++)delete this.rules[""+i][r[parseInt(n.toString(),10)]]}},e.prototype.validate=function(i){var r=Object.keys(this.rules);if(i&&r.length)return this.validateRules(i),r.indexOf(i)!==-1&&this.errorRules.filter(function(l){return l.name===i}).length===0;this.errorRules=[];for(var n=0,s=r;n<s.length;n++){var o=s[n];this.validateRules(o)}return this.errorRules.length===0},e.prototype.reset=function(){this.element.reset(),this.clearForm()},e.prototype.getInputElement=function(i){return this.inputElement=ke('[name="'+i+'"]',this.element),this.inputElement},e.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var i=ht("."+this.errorClass+", ."+this.validClass,this.element),r=0,n=i;r<n.length;r++){var s=n[r];ne(s)}a.prototype.destroy.call(this),this.infoElement=null,$o.off("notifyExternalChange",this.afterLocalization)},e.prototype.onPropertyChanged=function(i,r){for(var n=0,s=Object.keys(i);n<s.length;n++){var o=s[n];switch(o){case"locale":this.localeFunc();break}}},e.prototype.localeFunc=function(){for(var i=0,r=Object.keys(this.defaultMessages);i<r.length;i++){var n=r[i];this.l10n.setLocale(this.locale);var s=this.l10n.getConstant(n);this.localyMessage[""+n]=s}},e.prototype.getModuleName=function(){return"formvalidator"},e.prototype.afterLocalization=function(i){this.locale=i.locale,this.localeFunc()},e.prototype.refresh=function(){this.unwireEvents(),this.inputElements=ht(this.selectQuery,this.element),this.wireEvents()},e.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var i=ht(this.selectQuery,this.element),r=0,n=i;r<n.length;r++){var s=n[r],o=s;o.removeAttribute("aria-invalid");var l=o.parentElement,h=l.parentElement;l.classList.contains("e-control-wrapper")||l.classList.contains("e-wrapper")||o.classList.contains("e-input")&&l.classList.contains("e-input-group")?l.classList.remove(this.errorClass):h!=null&&(h.classList.contains("e-control-wrapper")||h.classList.contains("e-wrapper"))?h.classList.remove(this.errorClass):o.classList.remove(this.errorClass),o.name.length>0&&(this.getInputElement(o.name),this.getErrorElement(o.name),this.hideMessage(o.name)),l.classList.contains("e-control-wrapper")||l.classList.contains("e-wrapper")||o.classList.contains("e-input")&&l.classList.contains("e-input-group")?l.classList.remove(this.validClass):h!=null&&(h.classList.contains("e-control-wrapper")||h.classList.contains("e-wrapper"))?h.classList.remove(this.validClass):o.classList.remove(this.validClass)}},e.prototype.createHTML5Rules=function(){for(var i=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],r=["hidden","email","url","date","number","tel"],n=0,s=this.inputElements;n<s.length;n++){for(var o=s[n],l={},h=0,p=i;h<p.length;h++){var c=p[h];if(o.getAttribute(c)!==null)switch(c){case"required":this.defRule(o,l,c,o.required);break;case"data-validation":c=o.getAttribute(c),this.defRule(o,l,c,!0);break;case"type":r.indexOf(o.type)!==-1&&this.defRule(o,l,o.type,!0);break;case"rangeLength":case"range":this.defRule(o,l,c,JSON.parse(o.getAttribute(c)));break;case"equalTo":{var d=o.getAttribute(c);this.defRule(o,l,c,d)}break;default:o.getAttribute("data-val")==="true"?this.annotationRule(o,l,c,o.getAttribute(c)):this.defRule(o,l,c,o.getAttribute(c))}}Object.keys(l).length!==0&&this.addRules(o.name,l)}},e.prototype.annotationRule=function(i,r,n,s){var o=n.split("-"),l=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],h=o[o.length-1],p=o[o.length-2];if(l.indexOf(h)!==-1)switch(h){case"required":this.defRule(i,r,"required",s);break;case"creditcard":this.defRule(i,r,"creditcard",s);break;case"phone":this.defRule(i,r,"tel",s);break}else if(l.indexOf(p)!==-1)switch(p){case"maxlength":this.defRule(i,r,"maxLength",s);break;case"minlength":this.defRule(i,r,"minLength",s);break;case"range":{var c=i.getAttribute("data-val-range-min"),d=i.getAttribute("data-val-range-max");this.defRule(i,r,"range",[c,d])}break;case"equalto":{var f=i.getAttribute(n).split(".");this.defRule(i,r,"equalTo",f[f.length-1])}break;case"regex":this.defRule(i,r,"regex",s);break}},e.prototype.defRule=function(i,r,n,s){var o=i.getAttribute("data-"+n+"-message"),l=i.getAttribute("data-val-"+n),h;this.rules[i.name]&&n!=="validateHidden"&&n!=="hidden"&&(this.getInputElement(i.name),h=this.getErrorMessage(this.rules[i.name][""+n],n)),o?s=[s,o]:l?s=[s,l]:h&&(s=[s,h]),r[""+n]=s},e.prototype.wireEvents=function(){for(var i=0,r=this.inputElements;i<r.length;i++){var n=r[i];t.isCheckable(n)?S.add(n,"click",this.clickHandler,this):n.tagName==="SELECT"?S.add(n,"change",this.changeHandler,this):(S.add(n,"focusout",this.focusOutHandler,this),S.add(n,"keyup",this.keyUpHandler,this))}S.add(this.element,"submit",this.submitHandler,this),S.add(this.element,"reset",this.resetHandler,this)},e.prototype.unwireEvents=function(){for(var i=0,r=this.inputElements;i<r.length;i++){var n=r[i];S.clearEvents(n)}S.remove(this.element,"submit",this.submitHandler),S.remove(this.element,"reset",this.resetHandler)},e.prototype.focusOutHandler=function(i){this.trigger("focusout",i);var r=i.target;this.rules[r.name]&&(this.rules[r.name][this.required]||r.value.length>0?this.validate(r.name):this.validated.indexOf(r.name)===-1&&this.validated.push(r.name))},e.prototype.keyUpHandler=function(i){this.trigger("keyup",i);var r=i.target,n=[16,17,18,20,35,36,37,38,39,40,45,144,225];i.which===9&&(!this.rules[r.name]||this.rules[r.name]&&!this.rules[r.name][this.required])||this.validated.indexOf(r.name)!==-1&&this.rules[r.name]&&n.indexOf(i.which)===-1&&this.validate(r.name)},e.prototype.clickHandler=function(i){this.trigger("click",i);var r=i.target;r.type!=="submit"?this.validate(r.name):r.getAttribute("formnovalidate")!==null&&(this.allowSubmit=!0)},e.prototype.changeHandler=function(i){this.trigger("change",i);var r=i.target;this.validate(r.name)},e.prototype.submitHandler=function(i){this.trigger("submit",i),!this.allowSubmit&&!this.validate()?i.preventDefault():this.allowSubmit=!1},e.prototype.resetHandler=function(){this.clearForm()},e.prototype.validateRules=function(i){if(this.rules[""+i]){var r=Object.keys(this.rules[""+i]),n=!1,s=!1,o=r.indexOf("validateHidden"),l=r.indexOf("hidden");if(this.getInputElement(i),l!==-1&&(n=!0),o!==-1&&(s=!0),!n||n&&s){o!==-1&&r.splice(o,1),l!==-1&&r.splice(l-1,1),this.getErrorElement(i);for(var h=0,p=r;h<p.length;h++){var c=p[h],d=this.getErrorMessage(this.rules[""+i][""+c],c),f={name:i,message:d},g={inputName:i,element:this.inputElement,message:d};if(!this.isValid(i,c)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(i),this.errorRules.push(f),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info");var m=this.inputElement.parentElement,v=m.parentElement;m.classList.contains("e-control-wrapper")||m.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&m.classList.contains("e-input-group")?(m.classList.add(this.errorClass),m.classList.remove(this.validClass)):v!=null&&(v.classList.contains("e-control-wrapper")||v.classList.contains("e-wrapper"))?(v.classList.add(this.errorClass),v.classList.remove(this.validClass)):(this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass)),this.infoElement?this.showMessage(f):this.createErrorElement(i,f.message,this.inputElement),g.errorElement=this.infoElement,g.status="failure",m.classList.contains("e-control-wrapper")||m.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&m.classList.contains("e-input-group")?(m.classList.add(this.errorClass),m.classList.remove(this.validClass)):v!=null&&(v.classList.contains("e-control-wrapper")||v.classList.contains("e-wrapper"))?(v.classList.add(this.errorClass),v.classList.remove(this.validClass)):(this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass)),this.optionalValidationStatus(i,g),this.trigger("validationComplete",g),c==="required"&&this.inputElement.setAttribute("aria-required","true");break}else this.hideMessage(i),g.status="success",this.trigger("validationComplete",g)}}else return}},e.prototype.optionalValidationStatus=function(i,r){!this.rules[""+i][this.required]&&!this.inputElement.value.length&&!u(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),r.status="",this.hideMessage(i))},e.prototype.isValid=function(i,r){var n=this.rules[""+i][""+r],s=n instanceof Array&&typeof n[1]=="string"?n[0]:n,o=this.rules[""+i][""+r],l=(r==="min"||r==="max")&&this.rules[""+i].date&&typeof this.rules[""+i].date=="string"?this.rules[""+i].date:null,h={value:this.inputElement.value,param:s,element:this.inputElement,formElement:this.element,format:l};if(this.trigger("validationBegin",h),!h.param&&r==="required")return!0;if(o&&typeof o[0]=="function"){var p=o[0];return p.call(this,{element:this.inputElement,value:this.inputElement.value})}else return t.isCheckable(this.inputElement)?r!=="required"?!0:ht('input[name="'+i+'"]:checked',this.element).length>0:t.checkValidator[""+r](h)},e.prototype.getErrorMessage=function(i,r){var n=this.inputElement.getAttribute("data-"+r+"-message")?this.inputElement.getAttribute("data-"+r+"-message"):i instanceof Array&&typeof i[1]=="string"?i[1]:Object.keys(this.localyMessage).length!==0?this.localyMessage[""+r]:this.defaultMessages[""+r],s=n.match(/{(\d)}/g);if(!u(s))for(var o=0;o<s.length;o++){var l=i instanceof Array?i[parseInt(o.toString(),10)]:i;n=n.replace(s[parseInt(o.toString(),10)],l)}return n},e.prototype.createErrorElement=function(i,r,n){var s=ge(this.errorElement,{className:this.errorClass,innerHTML:r,attrs:{for:i}});if(this.errorOption===qs.Message&&(s.classList.remove(this.errorClass),s.classList.add("e-message"),s=ge(this.errorContainer,{className:this.errorClass,innerHTML:s.outerHTML})),s.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+n.id+'"]'))this.element.querySelector('[data-valmsg-for="'+n.id+'"]').appendChild(s);else if(n.hasAttribute("data-msg-containerid")===!0){var o=n.getAttribute("data-msg-containerid"),l=ke("#"+o,this.element);l.appendChild(s)}else if(this.customPlacement!=null)this.customPlacement.call(this,this.inputElement,s);else{var h=this.inputElement.parentElement,p=h.parentElement;h.classList.contains("e-control-wrapper")||h.classList.contains("e-wrapper")?p.insertBefore(s,h.nextSibling):p.classList.contains("e-control-wrapper")||p.classList.contains("e-wrapper")?p.parentElement.insertBefore(s,p.nextSibling):h.insertBefore(s,this.inputElement.nextSibling)}s.style.display="block",this.getErrorElement(i),this.validated.push(i),this.checkRequired(i)},e.prototype.getErrorElement=function(i){return this.infoElement=ke(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=ke(this.errorElement+"."+this.errorClass+'[for="'+i+'"]',this.element)),this.infoElement},e.prototype.removeErrorRules=function(i){for(var r=0;r<this.errorRules.length;r++){var n=this.errorRules[parseInt(r.toString(),10)];n.name===i&&this.errorRules.splice(r,1)}},e.prototype.showMessage=function(i){this.infoElement.style.display="block",this.infoElement.innerHTML=i.message,this.checkRequired(i.name)},e.prototype.hideMessage=function(i){if(this.infoElement){this.infoElement.style.display="none",this.removeErrorRules(i);var r=this.inputElement.parentElement,n=r.parentElement;r.classList.contains("e-control-wrapper")||r.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&r.classList.contains("e-input-group")?(r.classList.add(this.validClass),r.classList.remove(this.errorClass)):n!=null&&(n.classList.contains("e-control-wrapper")||n.classList.contains("e-wrapper"))?(n.classList.add(this.validClass),n.classList.remove(this.errorClass)):(this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass)),this.inputElement.setAttribute("aria-invalid","false")}},e.prototype.checkRequired=function(i){!this.rules[""+i][this.required]&&!this.inputElement.value.length&&!u(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(i))},e.isCheckable=function(i){var r=i.getAttribute("type");return r&&(r==="checkbox"||r==="radio"||r==="submit")};var t;return e.checkValidator={required:function(i){return isNaN(Date.parse(i.value))?i.value.toString().length>0:!isNaN(new Date(i.value).getTime())},email:function(i){return Er.EMAIL.test(i.value)},url:function(i){return Er.URL.test(i.value)},dateIso:function(i){return Er.DATE_ISO.test(i.value)},tel:function(i){return Er.PHONE.test(i.value)},creditcard:function(i){return Er.CREDITCARD.test(i.value)},number:function(i){return!isNaN(Number(i.value))&&i.value.indexOf(" ")===-1},digits:function(i){return Er.DIGITS.test(i.value)},maxLength:function(i){return i.value.length<=Number(i.param)},minLength:function(i){return i.value.length>=Number(i.param)},rangeLength:function(i){var r=i.param;return i.value.length>=r[0]&&i.value.length<=r[1]},range:function(i){var r=i.param;return!isNaN(Number(i.value))&&Number(i.value)>=r[0]&&Number(i.value)<=r[1]},date:function(i){if(!u(i.param)&&typeof i.param=="string"&&i.param!==""){var r=new Ne,n={format:i.param.toString(),type:"dateTime",skeleton:"yMd"},s=r.parseDate(i.value,n);return!u(s)&&s instanceof Date&&!isNaN(+s)}else return!isNaN(new Date(i.value).getTime())},max:function(i){if(!isNaN(Number(i.value)))return+i.value<=+i.param;if(i.format&&i.format!==""){var r=new Ne,n={format:i.format.toString(),type:"dateTime",skeleton:"yMd"},s=r.parseDate(i.value,n),o=typeof i.param=="string"?r.parseDate(JSON.parse(JSON.stringify(i.param)),n):i.param;return new Date(s).getTime()<=new Date(o).getTime()}else return new Date(i.value).getTime()<=new Date(JSON.parse(JSON.stringify(i.param))).getTime()},min:function(i){if(isNaN(Number(i.value)))if(i.value.indexOf(",")!==-1){var r=i.value.replace(/,/g,"");return parseFloat(r)>=Number(i.param)}else if(i.format&&i.format!==""){var n=new Ne,s={format:i.format.toString(),type:"dateTime",skeleton:"yMd"},o=n.parseDate(i.value,s),l=typeof i.param=="string"?n.parseDate(JSON.parse(JSON.stringify(i.param)),s):i.param;return new Date(o).getTime()>=new Date(l).getTime()}else return new Date(i.value).getTime()>=new Date(JSON.parse(JSON.stringify(i.param))).getTime();else return+i.value>=+i.param},regex:function(i){return new RegExp(i.param).test(i.value)},equalTo:function(i){var r=i.formElement.querySelector("#"+i.param);return i.param=r.value,i.param===i.value}},ft([C("")],e.prototype,"locale",void 0),ft([C("e-hidden")],e.prototype,"ignore",void 0),ft([C()],e.prototype,"rules",void 0),ft([C("e-error")],e.prototype,"errorClass",void 0),ft([C("e-valid")],e.prototype,"validClass",void 0),ft([C("label")],e.prototype,"errorElement",void 0),ft([C("div")],e.prototype,"errorContainer",void 0),ft([C(qs.Label)],e.prototype,"errorOption",void 0),ft([B()],e.prototype,"focusout",void 0),ft([B()],e.prototype,"keyup",void 0),ft([B()],e.prototype,"click",void 0),ft([B()],e.prototype,"change",void 0),ft([B()],e.prototype,"submit",void 0),ft([B()],e.prototype,"validationBegin",void 0),ft([B()],e.prototype,"validationComplete",void 0),ft([B()],e.prototype,"customPlacement",void 0),e=t=ft([kt],e),e}(Tp),en=function(){function a(e){this.isExecuteLocal=!1,this.existingPredicate={},this.foreignKeyQuery=new re,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.infiniteRenderMod=!1,this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1,this.infinitePermenantLocalData=[],this.infiniteQueryExecutionPending=!1,this.infiniteSkipCnt=0,this.infiniteScrollAppendDiff=0,this.prevInfiniteScrollDirection="",this.infiniteLoadedElem=[],this.infiniteDataCount=0,this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteManualSelectMaintainPred=[],this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new tn(this.parent.locale),this.cBoxTrue=mr(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=mr(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&R([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?R([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):R([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]))}return a.prototype.destroy=function(){this.closeDialog()},a.prototype.wireEvents=function(){S.add(this.dlg,"click",this.clickHandler,this),S.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=Mp(this.searchBoxKeyUp,200);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(S.add(e,"keyup",this.searchHandler,this),S.add(e,"input",this.searchHandler,this))},a.prototype.unWireEvents=function(){S.remove(this.dlg,"click",this.clickHandler),S.remove(this.dlg,"keyup",this.keyupHandler);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(S.remove(e,"keyup",this.searchHandler),S.remove(e,"input",this.searchHandler))},a.prototype.foreignKeyFilter=function(e,t,i){var r=this,n={},s=[],o=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(o.where(i)).then(function(l){r.options.column.columnData=l.result,r.parent.notify(Gr,{predicate:n,column:r.options.column}),e.ejpredicate=n.predicate.predicates;for(var h=n.predicate.predicates,p=0;p<h.length;p++)s.push({field:h[parseInt(p.toString(),10)].field,predicate:"or",matchCase:h[parseInt(p.toString(),10)].ignoreCase,ignoreAccent:h[parseInt(p.toString(),10)].ignoreAccent,operator:h[parseInt(p.toString(),10)].operator,value:h[parseInt(p.toString(),10)].value,type:r.options.type});e.filterCollection=s.length?s:t.filter(function(c){return c.field=r.options.field}),r.options.handler(e)})},a.prototype.searchBoxClick=function(e){var t=e.target;t.classList.contains("e-searchclear")&&(this.sInput.value=t.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},a.prototype.searchBoxKeyUp=function(e){(u(e)||e.key!=="ArrowUp"&&e.key!=="ArrowDown"&&e.key!=="Tab"&&!(e.key==="Tab"&&e.shiftKey))&&(!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon())},a.prototype.updateSearchIcon=function(){this.sInput.value.length?(ae(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]),u(document.body.querySelector(".e-chkcancel-icon"))||document.body.querySelector(".e-chkcancel-icon").setAttribute("title",this.localeObj.getConstant("Clear"))):(ae(this.sIcon,["e-search-icon"],["e-chkcancel-icon"]),u(document.body.querySelector(".e-searchclear.e-search-icon"))||document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title",this.localeObj.getConstant("Search")))},a.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},a.prototype.updateDataSource=function(){var e=this.options.dataSource,t="object";if(!(e instanceof q)){for(var i=0;i<e.length;i++)if(typeof e!==t){var r={};r[this.options.field]=e[parseInt(i.toString(),10)],e[parseInt(i.toString(),10)]=r}}},a.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new re,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.options.disableHtmlEncode=e.column.disableHtmlEncode||!1,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length,this.infiniteRenderMod=!!(this.parent.filterSettings&&this.parent.filterSettings.enableInfiniteScrolling),this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]},a.prototype.getAndSetChkElem=function(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var t={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}};G.createInput(t,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},a.prototype.showDialog=function(e){var t={requestType:pu,columnName:this.options.field,columnType:this.options.type,cancel:!1},i="filterModel";if(t[""+i]=this,this.parent.notify(to,t),t.cancel){e.cancel=t.cancel;return}this.dialogObj=new Cr({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!u(x(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""});var r="isStringTemplate";this.dialogObj[""+r]=!0,this.renderResponsiveFilter(e);var n=this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"?this.getLocalizedLabel("CheckBoxFilterDialogARIA"):this.getLocalizedLabel("ExcelFilterDialogARIA");if(this.dlg.setAttribute("aria-label",n),e.isResponsiveFilter){var s=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv");s.appendChild(this.dlg)}else this.parent.element.appendChild(this.dlg);this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show();var o=this.dialogObj.element.querySelector(".e-dlg-content");if(o.appendChild(this.sBox),this.wireEvents(),!this.parent.enableAdaptiveUI)!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&!this.infiniteRenderMod&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.showMask();else{if(this.parent.enableAdaptiveUI&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"){this.getAllData();return}this.infiniteRenderMod&&(this.cBox.style.marginTop=this.getListHeight(this.cBox)+"px"),Dn({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),ur(this.spinner)}this.getAllData()},a.prototype.renderResponsiveFilter=function(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},a.prototype.dialogCreated=function(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":T.isDevice?this.dialogObj.position={X:"center",Y:"center"}:ju(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify(Lo,e)},a.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},a.prototype.closeDialog=function(){if(this.infiniteRenderMod&&this.infinitePermenantLocalData.length&&!this.options.isRemote&&(this.options.dataSource.dataSource.json=this.infinitePermenantLocalData),this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var e=this.options.columns.filter(function(i){return i.getFilterItemTemplate()}),t=this.parent.registeredTemplate;e.length&&!u(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&qn(this.parent,["filterItemTemplate"]),this.parent.notify(Bt,{field:this.options.field}),this.unWireEvents(),this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string"&&(this.options.column.filter.type==="CheckBox"||this.options.column.filter.type==="Excel")&&(this.dialogObj.element.querySelector(".e-dlg-content").innerHTML=""),this.dialogObj.destroy(),this.dlg&&this.dlg.parentElement&&se(this.dlg),this.dlg=null,this.parent.notify(_s,{})}},a.prototype.clearFilter=function(e){var t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(Fn,t),!t.cancel&&this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})},a.prototype.btnClick=function(e){if(this.filterState){if(e.target.tagName.toLowerCase()==="input"&&e.target.classList.contains("e-searchinput")||e.keyCode===13)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var t=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===t?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===t&&this.clearFilter()}this.closeDialog()}else e.target&&e.target.firstChild&&e.target.firstChild.textContent.toLowerCase()===this.getLocalizedLabel("CancelButton").toLowerCase()?this.closeDialog():e.target.tagName.toLowerCase()!=="input"&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify(ku,{}),u(this.parent.focusModule)||this.parent.focusModule.filterfocus()},a.prototype.fltrBtnHandler=function(){var e=this;this.infiniteRenderMod&&(this.cBox.innerHTML="",$e(this.cBox,this.infiniteLoadedElem.slice()));var t=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)")),i=t,r="equal",n=this.dialogObj.element.querySelector(".e-dropdownlist");n&&(this.options.operator=r=n.ej2_instances[0].value),this.isMenuNotEqual=this.options.operator==="notequal";var s;this.options.hideSearchbox||(s=this.searchBox.querySelector(".e-searchinput"));var o=this.options.allowCaseSensitive,l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:r,type:this.options.type,matchCase:o,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==t.length&&this.itemsCnt-t.length<t.length;h&&s&&s.value===""&&(r=this.isMenuNotEqual?"equal":"notequal",t=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=r);var p,c,d=[];if(t.length!==this.itemsCnt||s&&s.value&&s.value!==""||this.infiniteRenderMod){this.infiniteRenderMod?this.infiniteRenderMod&&(!this.infiniteSearchPred||this.infiniteSearchPred&&!this.infiniteSearchPred.isComplex)?this.infiniteFltrBtnHandler(d):this.infiniteSearchPred.isComplex&&(d=this.predicateIterate(t,l,h)):d=this.predicateIterate(t,l,h),(this.options.type==="date"||this.options.type==="datetime")&&i.length&&(c=i.length-1,p=this.values[x(i[parseInt(c.toString(),10)],"e-ftrchk").getAttribute("uid")],u(p)&&h&&d.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"or",value:null}));var f=this.infiniteRenderMod?this.sBox.querySelector(".e-add-current"):this.cBox.querySelector(".e-add-current");if(f&&f.classList.contains("e-check")){var g=this.existingPredicate[this.options.field];if(g)for(var m=function(w){d.some(function(b){return b.value===g[parseInt(w.toString(),10)].value})||d.push(g[parseInt(w.toString(),10)])},v=0;v<g.length;v++)m(v);else return}if(!this.infiniteRenderMod)this.initiateFilter(d);else if(d.length)this.initiateFilter(d);else if(this.sBox.querySelector(".e-selectall").classList.contains("e-check")&&!d.length){var y=this.options.filteredColumns.some(function(w){return e.options.field===w.field});y&&this.clearFilter()}}else{var y=this.options.filteredColumns.some(function(b){return e.options.field===b.field});y&&this.clearFilter()}},a.prototype.predicateIterate=function(e,t,i){for(var r,n,s=[],o=0;o<e.length;o++)r=this.values[x(e[parseInt(o.toString(),10)],"e-ftrchk").getAttribute("uid")],n=P({},{value:r},t),r&&!r.toString().length&&(n.operator=i?"notequal":"equal"),r===""||u(r)?s=s.concat(a.generateNullValuePredicates(t)):s.push(n),this.notifyFilterPrevEvent(n);return s},a.prototype.infiniteFltrBtnHandler=function(e){var t;if(this.infiniteManualSelectMaintainPred.length)for(var i=0;i<this.infiniteManualSelectMaintainPred.length;i++){var r=this.infiniteManualSelectMaintainPred[i];if(t=r.value+"",t===""||u(t)){var n={predicate:r.predicate,field:r.field,type:r.type,uid:r.uid,operator:r.operator,matchCase:r.matchCase,ignoreAccent:r.ignoreAccent};e.push.apply(e,a.generateNullValuePredicates(n))}else e.push(this.infiniteManualSelectMaintainPred[i]);this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i])}if(!this.localInfiniteSelectAllClicked&&this.sInput.value===""&&!(!this.options.parentCurrentViewDataCount&&e.length))for(var i=0;i<this.infiniteUnloadParentExistPred.length;i++)e.unshift(this.infiniteUnloadParentExistPred[i]),this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);this.sInput.value!==""&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll)&&(this.infiniteSearchPred.predicate="or",e.unshift(this.infiniteSearchPred),this.notifyFilterPrevEvent(this.infiniteSearchPred))},a.prototype.notifyFilterPrevEvent=function(e){var t={instance:this,handler:this.fltrBtnHandler,arg1:e.field,arg2:e.predicate,arg3:e.operator,arg4:e.matchCase,arg5:e.ignoreAccent,arg6:e.value,cancel:!1};this.parent.notify(Fn,t),t.cancel},a.generateNullValuePredicates=function(e){var t=[];return e.type==="string"&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t},a.prototype.initiateFilter=function(e){var t=e[0],i;if(!u(t)){i=t.ejpredicate?t.ejpredicate:new pe(t.field,t.operator,t.value,!t.matchCase,t.ignoreAccent);for(var r=1;r<e.length;r++)i=e[parseInt(r.toString(),10)].ejpredicate!==void 0?i[e[parseInt(r.toString(),10)].predicate](e[parseInt(r.toString(),10)].ejpredicate):i[e[parseInt(r.toString(),10)].predicate](e[parseInt(r.toString(),10)].field,e[parseInt(r.toString(),10)].operator,e[parseInt(r.toString(),10)].value,!e[parseInt(r.toString(),10)].matchCase,e[parseInt(r.toString(),10)].ignoreAccent);var n={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:pe.or(i)};this.options.handler(n)}},a.prototype.isForeignColumn=function(e){return e.isForeignColumn?e.isForeignColumn():!1},a.prototype.refreshCheckboxes=function(){var e=this,t=this.sInput.value,i=this.options.column,r=this.isForeignColumn(i)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),s=r.queries.filter(function(b){return b&&b.fn==="onWhere"})[0];r.queries=[],n.queries=[];var o=this.options.type!=="string"&&parseFloat(t)?parseFloat(t):t,l=this.options.isRemote?this.options.type==="string"?"contains":"equal":this.options.type?"contains":"equal",h=!0,p=this.options.ignoreAccent,c=this.isForeignColumn(i)?i.foreignKeyValue:i.field;o=o===""||o===void 0?void 0:o;var d=[],f={field:c,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:p},g,m=this.options.dataManager.adaptor.getModuleName;if(this.options.type==="boolean"&&(o!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())!==-1?o="true":o!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())!==-1&&(o="false"),o!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())!==-1&&m?o=(m(),!0):o!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())!==-1&&m&&(o=(m(),!1)),l="equal"),(this.options.type==="date"||this.options.type==="datetime"||this.options.type==="dateonly")&&this.options.format){var v=new Ne,y=typeof this.options.format=="string"?this.options.format:this.options.format.format;y?o=v.parseDate(t,{format:y})||new Date(t):o=new Date(t),this.options.type==="dateonly"&&(o=o.getFullYear()+"-"+Zi(o.getMonth()+1)+"-"+Zi(o.getDate()))}this.infiniteSearchValChange=!0,this.infiniteLoadedElem=[],this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteSkipCnt=0,this.infiniteDataCount=0,this.infiniteManualSelectMaintainPred=[],this.sInput.value===""?this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]:this.infiniteUnloadParentExistPred=[],this.addDistinct(r);var w={requestType:wc,filterModel:this,columnName:c,column:i,operator:l,matchCase:h,ignoreAccent:p,filterChoiceCount:null,query:r,value:o};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(w.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(Ae,w,function(b){if(b.operator=b.operator,g=new pe(c,b.operator,w.value,b.matchCase,b.ignoreAccent),e.options.type==="date"||e.options.type==="datetime"||e.options.type==="dateonly"){l="equal";var I={field:c,operator:l,value:o,matchCase:h,ignoreAccent:p};u(o)||(g=Ji(I,e.options.type))}if(t&&typeof t=="string"&&e.isBlanks&&e.getLocalizedLabel("Blanks").toLowerCase().indexOf(t.toLowerCase())>=0){d=d.concat(a.generateNullValuePredicates(f));var k=a.generatePredicate(d);k.predicates.push(g),g=k,r.where(k)}else t.length?(g=u(s)?g:g.and(s.e),r.where(g)):u(s)||(g=s.e,r.where(s.e));e.infiniteSearchPred=g,b.filterChoiceCount=u(b.filterChoiceCount)?1e3:b.filterChoiceCount,e.infiniteRenderMod&&e.parent.filterSettings.itemsCount!==b.filterChoiceCount&&(e.parent.filterSettings.itemsCount=w.filterChoiceCount);var D={};if(ur(e.spinner),e.renderEmpty=!1,e.isForeignColumn(i)&&t.length){var W="result"in i.dataSource?new q(i.dataSource.result):i.dataSource;W.executeQuery(r).then(function(Z){var J=e.options.column.columnData;e.options.column.columnData=Z.result,e.parent.notify(Gr,{predicate:D,column:i}),D.predicate.predicates.length?n.where(D.predicate):e.renderEmpty=!0,e.options.column.columnData=J,e.infiniteRenderMod?(e.infiniteInitialLoad=!!u(e.fullData),e.makeInfiniteScrollRequest(n),n.requiresCount()):n.take(b.filterChoiceCount),e.search(b,n)})}else e.infiniteRenderMod&&e.parent.filterSettings.itemsCount?(e.infiniteInitialLoad=!!u(e.fullData),e.makeInfiniteScrollRequest(r),r.requiresCount()):r.take(b.filterChoiceCount),e.search(b,r)})},a.prototype.search=function(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)},a.prototype.getPredicateFromCols=function(e,t){for(var i=a.getPredicate(e,t),r=[],n={},s=this.parent.getForeignKeyColumns!==void 0,o=s?this.parent.getForeignKeyColumns():[],l=0,h=Object.keys(i);l<h.length;l++){var p=h[l],c=void 0;s&&!this.parent.getColumnByField(p)&&(c=Pn(p,o)),c?(this.parent.notify(Gr,{predicate:n,column:c}),n.predicate.predicates.length&&r.push(pe.or(n.predicate.predicates))):r.push(i[""+p])}return r.length&&pe.and(r)},a.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new re},a.prototype.getAllData=function(){var e=this;this.customQuery=!1;var t=this.getQuery(),i=this.options.dataManager.adaptor.getModuleName;!u(this.parent.getDataModule)&&i&&i()==="ODataV4Adaptor"||t.requiresCount(),this.addDistinct(t);var r={requestType:nl,query:t,filterChoiceCount:null},n="filterModel";r[""+n]=this,this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(r.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(Ae,r,function(s){s.filterChoiceCount=u(s.filterChoiceCount)?1e3:s.filterChoiceCount,e.infiniteRenderMod&&e.parent.filterSettings.itemsCount!==s.filterChoiceCount&&(e.parent.filterSettings.itemsCount=s.filterChoiceCount),e.infiniteRenderMod||t.take(s.filterChoiceCount),(!s.query.distincts.length||e.infiniteRenderMod)&&(e.customQuery=!0,e.queryGenerate(t)),e.infiniteRenderMod&&(e.infiniteInitialLoad=!!u(e.fullData),e.makeInfiniteScrollRequest(t)),e.parent.dataSource&&"result"in e.parent.dataSource?e.filterEvent(s,t):e.processDataOperation(t,!0)})},a.prototype.addDistinct=function(e){var t=this,i,r=A.distinct(this.options.filteredColumns,"field");if(r.indexOf(this.options.column.field)<=-1&&(r=r.concat(this.options.column.field)),this.infiniteRenderMod||e.distinct(r),this.infiniteRenderMod&&!this.options.isRemote&&this.sInput.value==="")this.options.dataSource=this.options.dataSource instanceof q?this.options.dataSource:new q(this.options.dataSource),this.infinitePermenantLocalData=this.options.dataSource.dataSource.json.slice(),this.options.dataSource.dataSource.json=A.distinct((i=this.options.parentFilteredLocalRecords).concat.apply(i,this.infinitePermenantLocalData),this.options.column.field,!0),this.isForeignColumn(this.options.column)&&(this.options.column.dataSource=this.options.column.dataSource instanceof q?this.options.column.dataSource:new q(this.options.column.dataSource),this.options.dataSource.dataSource.json=this.options.dataSource.dataSource.json.map(function(s,o){return Object.assign({},s,t.options.column.dataSource.dataSource.json[o])}));else if(this.infiniteRenderMod&&this.options.isRemote){e.select(this.options.column.field),e.sortBy(this.options.column.field,"ascending");var n=this.options.dataManager.adaptor.getModuleName;n&&n()&&(n()==="ODataV4Adaptor"||n()==="WebApiAdaptor"||n()==="CustomDataAdaptor"||n()==="GraphQLAdaptor"||n()==="ODataAdaptor")&&e.distinct(r)}return e},a.prototype.filterEvent=function(e,t){var i=this,r=jo(e,t);this.parent.trigger(Mn,r.state);var n=r.deffered;n.promise.then(function(s){i.dataSuccess(s)})},a.prototype.infiniteScrollMouseKeyDownHandler=function(){S.remove(this.cBox,"scroll",this.infiniteScrollHandler)},a.prototype.infiniteScrollMouseKeyUpHandler=function(e){var t=this;S.add(this.cBox,"scroll",this.infiniteScrollHandler,this);var i=this.cBox;i.children.length>1&&(i.scrollTop>=i.scrollHeight-i.offsetHeight||i.scrollTop<=0)&&this.infiniteScrollHandler(),bt.timer=setTimeout(function(){t.clickHandler(e),bt.timer=null},0)},a.prototype.getListHeight=function(e){var t=ge("div",{className:"e-ftrchk",styles:"visibility: hidden"});t.innerHTML='<div class="e-checkbox-wrapper"><span class="e-frame e-icons e-check"></span><span class="e-label e-checkboxfiltertext">A</div></span>',e.appendChild(t);var i=t.getBoundingClientRect();e.removeChild(t);var r=Math.round(i.height);return r},a.prototype.getShimmerTemplate=function(){return'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},a.prototype.showMask=function(){var e=5,t,i=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxMaskList",className:"e-checkboxlist e-fields e-infinite-list e-masklist",styles:"z-index: 10;"}),r=this.cBox;if(this.removeMask(),r){var n=getComputedStyle(r),s=this.getListHeight(r),o=r.children.length?parseInt(n.height,10):Math.floor(parseInt(n.height.split("px")[0],10))-5;this.parent.enableAdaptiveUI&&this.infiniteRenderMod&&(i.style.height=o-s+"px",this.dlg.querySelector(".e-dlg-content").style.overflow="hidden");var l=this.isExcel&&!r.children.length&&!this.dlg.classList.contains("e-excelfilter")?"":getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor;i.style.cssText="width: "+n.width+"; min-height: "+n.minHeight+"; height: "+o+"px; margin: "+n.margin+"; border-style: "+n.borderStyle+"; border-width: "+n.borderWidth+"; border-color: "+n.borderColor+"; position: absolute; background-color: "+l+";",e=Math.floor(o/s),e=r.children.length>e?r.children.length:e,t=s+"px"}var h='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%; height:'+t+';"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";if(i.innerHTML="",!r.children.length){this.spinner.insertAdjacentHTML("beforebegin",h);var p=[].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.spinner.insertBefore(i,this.cBox);for(var c=0;e&&c<e;c++){i.innerHTML+=h;var p=[].slice.call(i.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.cBox&&(i.scrollTop=this.cBox.scrollTop)},a.prototype.removeMask=function(){var e=this.dialogObj.element.querySelectorAll(".e-mask-ftrchk");if(e.length)for(var t=0;t<e.length;t++)se(e[t]);var i=this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist");i&&se(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"))},a.prototype.infiniteScrollHandler=function(){var e=this.cBox;e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length<=this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3&&(!this.infiniteDataCount||this.infiniteDataCount>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)?(this.makeInfiniteScrollRequest(),this.prevInfiniteScrollDirection="down"):e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt+=this.prevInfiniteScrollDirection==="down"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,$e(this.cBox,this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.parent.filterSettings.itemsCount+this.infiniteSkipCnt)),this.prevInfiniteScrollDirection="down"):e.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.infiniteLoadedElem.length>this.parent.filterSettings.itemsCount*3&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt-=this.prevInfiniteScrollDirection==="up"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount))),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up"):e.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.cBox.children.length<this.parent.filterSettings.itemsCount*3&&(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.infiniteDataCount%this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt=(Math.floor(this.infiniteDataCount/this.parent.filterSettings.itemsCount)-3)*this.parent.filterSettings.itemsCount,this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount))),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},a.prototype.infiniteRemoveElements=function(e){for(var t=0;t<e.length;t++)se(e[t])},a.prototype.infiniteAppendElements=function(e){for(var t=0;t<e.length;t++)this.cBox.insertBefore(e[t],this.cBox.children[t])},a.prototype.makeInfiniteScrollRequest=function(e){var t=this;!this.infiniteInitialLoad&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"?setTimeout(function(){t.infiniteQueryExecutionPending&&t.showMask()},500):this.infiniteInitialLoad||(Dn({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),ur(this.spinner));var i="fn";if(this.infiniteQuery&&this.infiniteQuery.queries&&this.infiniteQuery.queries.length)for(var r=0;r<this.infiniteQuery.queries.length;r++)(this.infiniteQuery.queries[r][""+i]==="onTake"||this.infiniteQuery.queries[r][""+i]==="onSkip")&&(this.infiniteQuery.queries.splice(r,1),r--);var n=!!e;e=e||this.infiniteQuery,this.infiniteInitialLoad||this.infiniteSearchValChange?this.infiniteSkipCnt=0:this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount,e.skip(this.infiniteSkipCnt),this.infiniteInitialLoad||this.infiniteSearchValChange?(e.take(this.parent.filterSettings.itemsCount*3),this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount*2):e.take(this.parent.filterSettings.itemsCount),n||(this.processDataOperation(e),this.infiniteQueryExecutionPending=!0)},a.prototype.processDataOperation=function(e,t){var i=this;this.options.dataSource=this.options.dataSource instanceof q?this.options.dataSource:new q(this.options.dataSource);var r=[],n=[];if(this.isForeignColumn(this.options.column)&&t){var s="result"in this.options.column.dataSource?new q(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,r.push(s.executeQuery(this.foreignKeyQuery)),n.push(function(l){return i.foreignKeyData=l})}if(this.infiniteRenderMod&&(this.infiniteQuery=e.clone(),this.infiniteInitialLoad?(this.cBox.classList.add("e-checkbox-infinitescroll"),S.add(this.cBox,"scroll",this.infiniteScrollHandler,this),S.add(this.cBox,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),S.add(this.cBox,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.infiniteSearchValChange&&(this.cBox.innerHTML="")),this.infiniteRenderMod&&this.infiniteInitialLoad&&!this.options.isRemote){var o=this.isForeignColumn(this.options.column)?this.options.foreignKeyValue:this.options.column.field;this.options.dataSource.executeQuery(new re().sortBy(o,A.fnAscending)).then(function(l){i.options.dataSource.dataSource.json=l.result,i.executeQueryOperations(e,r,n)})}else this.executeQueryOperations(e,r,n)},a.prototype.executeQueryOperations=function(e,t,i){var r=this;t.push(this.options.dataSource.executeQuery(e)),i.push(this.dataSuccess.bind(this));var n=0;Promise.all(t).then(function(s){r.infiniteQueryExecutionPending=r.infiniteRenderMod?!1:r.infiniteQueryExecutionPending;for(var o=0;o<s.length;o++)r.infiniteDataCount=r.infiniteRenderMod&&!r.infiniteDataCount?s[o].count:r.infiniteDataCount,i[n++](s[parseInt(o.toString(),10)].result)}).catch(function(){r.infiniteRenderMod&&r.parent.filterSettings&&r.parent.filterSettings.loadingIndicator==="Shimmer"&&r.parent.showMaskRow(void 0,r.dialogObj.element)})},a.prototype.dataSuccess=function(e){if(!(!this.infiniteInitialLoad&&this.infiniteDataCount&&(this.infiniteSkipCnt>=this.infiniteDataCount&&!this.infiniteSearchValChange||e.length===0))){this.fullData=e;var t={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify(wd,t),t.executeQuery){var i=new re;this.customQuery||(this.isExecuteLocal=!0,this.queryGenerate(i),this.isExecuteLocal=!1);var r=new q(t.dataSource).executeLocal(i),n=this.options.column;this.filteredData=a.getDistinct(r,this.options.field,n,this.foreignKeyData,this).records||[]}var s=t.executeQuery?this.filteredData:t.dataSource;this.processDataSource(null,!0,s,t),this.sInput&&(this.infiniteRenderMod&&this.infiniteInitialLoad||!this.infiniteRenderMod)&&this.sInput.focus(),(this.infiniteInitialLoad||this.infiniteSearchValChange)&&(this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1);var o={requestType:uu,columnName:this.options.field,columnType:this.options.type},l="filterModel";o[""+l]=this,this.parent.notify(Xr,o),this.isCheckboxFilterTemplate&&kn(this.spinner)}},a.prototype.queryGenerate=function(e){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var t=this.options.dataManager.adaptor.getModuleName;if(!u(this.parent.getDataModule)&&t&&t()==="ODataV4Adaptor")this.parent.getDataModule().searchQuery(e);else{var i=this.parent.searchSettings,r=i.fields.length?i.fields:this.options.columns.map(function(h){return h.field});e.search(i.key,r,i.operator,i.ignoreCase,i.ignoreAccent)}}if(this.options.filteredColumns.length){for(var n=[],s=0;s<this.options.filteredColumns.length;s++){var o=this.options.filteredColumns[parseInt(s.toString(),10)];this.options.uid?(o.uid=o.uid||this.parent.getColumnByField(o.field).uid,o.uid!==this.options.uid&&n.push(this.options.filteredColumns[parseInt(s.toString(),10)])):o.field!==this.options.field&&n.push(this.options.filteredColumns[parseInt(s.toString(),10)])}var l=this.getPredicateFromCols(n,this.isExecuteLocal);l&&e.where(l)}},a.prototype.processDataSource=function(e,t,i,r){ur(this.spinner),this.isExecuteLocal=!0,this.updateResult(),this.isExecuteLocal=!1;var n={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify(Hd,n),this.isCheckboxFilterTemplate=n.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate?this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask():this.createFilterItems(i,t,r)},a.prototype.processSearch=function(e){this.processDataOperation(e)},a.prototype.updateResult=function(){this.result={};var e=this.infiniteRenderMod&&this.existingPredicate[this.options.field]?this.getPredicateFromCols(this.existingPredicate[this.options.field],this.isExecuteLocal):this.getPredicateFromCols(this.options.filteredColumns,this.isExecuteLocal),t=new re;e&&t.where(e),this.parent.notify(Od,{query:t});for(var i=new q(this.fullData).executeLocal(t),r=0,n=i;r<n.length;r++){var s=n[r];this.result[Ue(this.options.field,s)]=!0}},a.prototype.clickHandler=function(e){var t;u(bt.timer)||clearTimeout(bt.timer);var i=e.target;if(!(!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&x(i,"e-mask-ftrchk"))){var r=x(i,"e-checkbox-wrapper");if(x(i,"e-searchbox")&&this.searchBoxClick(e),r&&!this.isCheckboxFilterTemplate){var n=r.querySelector(".e-selectall");if(n)this.updateAllCBoxes(!n.classList.contains("e-check"));else if(Pr(r.parentElement),this.infiniteRenderMod&&!r.parentElement.querySelector(".e-add-current")){this.localInfiniteSelectionInteracted=!0;var s=this.options.allowCaseSensitive,o=r.parentElement.querySelector(".e-frame"),l=o.previousSibling,h=l.checked?"equal":"notequal",p=l.checked?"or":"and",c={field:this.options.field,predicate:p,uid:this.options.uid,operator:h,type:this.options.type,matchCase:s,ignoreAccent:this.options.ignoreAccent},d=this.values[x(l,"e-ftrchk").getAttribute("uid")];if(this.updateInfiniteManualSelectPred(c,d),this.infiniteRenderMod&&!this.options.isRemote&&this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length){var f=this.getPredicateFromCols((t=this.options.filteredColumns).concat.apply(t,this.infiniteManualSelectMaintainPred),!0),g=new re;f&&g.where(f);var m=new q(this.infinitePermenantLocalData).executeLocal(g);this.options.parentTotalDataCount!==m.length&&(this.options.parentTotalDataCount=m.length),!this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length&&(this.infiniteUnloadParentExistPred=[])}this.infiniteUnloadParentExistPred.length&&(this.options.parentTotalDataCount===this.infiniteDataCount||!this.options.parentTotalDataCount)&&(this.infiniteUnloadParentExistPred=[])}this.updateIndeterminatenBtn(),r.querySelector(".e-chk-hidden").focus()}this.setFocus(x(r,"e-ftrchk"))}},a.prototype.updateInfiniteManualSelectPred=function(e,t){for(var i=0;i<this.infiniteManualSelectMaintainPred.length;i++){var r=this.infiniteManualSelectMaintainPred[i];if(r.value+""==t+""&&(r.operator==="equal"||r.operator==="notequal")){this.infiniteManualSelectMaintainPred.splice(i,1);break}}(e.predicate==="or"&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll)||e.predicate==="and"&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll))&&(this.infiniteManualSelectMaintainPred.push(P({},{value:t},e)),e.predicate==="or"?this.options.parentTotalDataCount++:this.options.parentTotalDataCount--)},a.prototype.focusNextOrPrev=function(e,t){var i=e.key==="ArrowUp"?t.indexOf(document.activeElement)-1:t.indexOf(document.activeElement)+1,r=t[(i+t.length)%t.length];if(r){r.focus();var n=r.classList.contains("e-chk-hidden")?x(r,"e-ftrchk"):r;this.setFocus(n)}},a.prototype.keyupHandler=function(e){if((e.key==="Tab"||(e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey)&&this.setFocus(x(e.target,"e-ftrchk")),(e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey&&this.parent.filterSettings.type==="CheckBox"){e.preventDefault();var t=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'));this.focusNextOrPrev(e,t)}},a.prototype.setFocus=function(e){var t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e!==t&&e.classList.add("e-chkfocus")},a.prototype.updateAllCBoxes=function(e){this.infiniteRenderMod&&(this.localInfiniteSelectAllClicked=!0,this.infiniteLocalSelectAll=e,this.infiniteUnloadParentExistPred=[],this.infiniteManualSelectMaintainPred=[]);for(var t=this.infiniteRenderMod?this.infiniteLoadedElem.map(function(s){return s.querySelector(".e-frame")}):[].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)")),i=0,r=t;i<r.length;i++){var n=r[i];En(n,e),Yt(n.previousSibling,e)}},a.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},a.prototype.createCheckbox=function(e,t,i){var r=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);Yt(r.querySelector("input"),t);var n=r.querySelector(".e-label"),s=Ys({},i,{column:this.options.column,parent:this.parent}),o=this.options.disableHtmlEncode?"textContent":"innerHTML";n[""+o]=!u(e)&&e.toString().length?this.parent.enableHtmlSanitizer?$r.sanitize(e):e:this.getLocalizedLabel("Blanks");var l=li("cbox");if(n.setAttribute("id",l+"cboxLabel"),r.querySelector("input").setAttribute("aria-labelledby",n.id),n.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),typeof e=="boolean"&&(n.innerHTML=e===!0?this.getLocalizedLabel("FilterTrue"):this.getLocalizedLabel("FilterFalse")),R([n],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&i[this.options.column.field]!==this.getLocalizedLabel("AddCurrentSelection")){n.innerHTML="";var h=this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string",p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;h||p?(this.options.template(s,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):$e(n,this.options.template(s,this.parent,"filterItemTemplate",null,null,null,null,this.parent.root))}return r},a.prototype.updateIndeterminatenBtn=function(){var e=this.infiniteRenderMod?this.infiniteLoadedElem.length:this.cBox.children.length-1,t=[],i=!1,r=this.infiniteRenderMod?this.sBox.querySelector(".e-selectall"):this.cBox.querySelector(".e-selectall"),n=this.infiniteRenderMod?this.infiniteLoadedElem.filter(function(l){return l.querySelector(".e-check")}).length:this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)").length;this.cBox.querySelector(".e-add-current")&&(e-=1);var s;this.options.isResponsiveFilter||(s=this.dialogObj.btnObj[0],s.disabled=!1);var o=r.previousSibling;Yt(o,!1),o.indeterminate=!1,this.infiniteRenderMod&&this.sInput.value===""&&!this.options.parentCurrentViewDataCount&&!this.localInfiniteSelectionInteracted&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll&&!n)&&(e!==n||e===n)?n=0:this.infiniteRenderMod&&this.infiniteLoadedElem.length<this.infiniteDataCount&&this.infiniteUnloadParentExistPred.length&&(!n||e===n)&&this.infiniteLocalSelectAll&&(n?e+=this.infiniteUnloadParentExistPred.length:n+=this.infiniteUnloadParentExistPred.length),e===n?(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),t=["e-check"],Yt(o,!0)):n?(t=["e-stop"],o.indeterminate=!0):(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!1,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),t=["e-uncheck"],i=!0,s&&(s.disabled=!0)),s&&(this.filterState=!s.disabled,s.dataBind()),N([r],["e-check","e-stop","e-uncheck"]),R([r],t),this.parent.notify(Li,{disabled:i})},a.prototype.createFilterItems=function(e,t,i){var r,n,s,o=this.parent.createElement("div"),l,h=!1;this.options.isResponsiveFilter||(l=this.dialogObj.btnObj[0]);var p=-1,c="ejValue";i.executeQuery||(c=i.field);for(var d=0;d<e.length;d++){var f=j(c,e[parseInt(d.toString(),10)]);(f===""||u(f))&&(p=p+1)}if(this.infiniteRenderMod||(this.itemsCnt=p!==-1?e.length-p:e.length),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask(),e.length&&!this.renderEmpty){var g=this.getLocalizedLabel("SelectAll"),m=this.cBox.querySelector(".e-checkfltrnmdiv");m&&m.classList.remove("e-checkfltrnmdiv");var v=this.createCheckbox(g,!1,(r={},r[this.options.field]=g,r));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?R([v],this.parent.cssClass.split(" ")):R([v],[this.parent.cssClass])),this.infiniteInitialLoad||!this.infiniteRenderMod){var y=ws(li("cbox"),v,"e-ftrchk");y.querySelector(".e-frame").classList.add("e-selectall"),this.infiniteRenderMod?(y.classList.add("e-infinitescroll"),this.parent.enableAdaptiveUI&&(this.spinner.style.height=this.spinner.offsetHeight-this.getListHeight(this.cBox)+"px"),this.sBox.insertBefore(y,this.spinner)):o.appendChild(y)}else this.sBox.querySelector(".e-ftrchk .e-selectall")&&(this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled"));var w=new pe("field","equal",this.options.field);this.options.foreignKeyValue&&(w=w.or("field","equal",this.options.foreignKeyValue));var b=new q(this.options.filteredColumns).executeLocal(new re().where(w)).length;if(this.sInput.value){var I=this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"),!1,(n={},n[this.options.field]=this.getLocalizedLabel("AddCurrentSelection"),n));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?R([I],this.parent.cssClass.split(" ")):R([I],[this.parent.cssClass])),this.infiniteRenderMod&&!u(this.sBox.children[2])&&this.sBox.children[2].innerText!=="Add current selection to filter"||!this.infiniteRenderMod){var k=ws(li("cbox"),I,"e-ftrchk");if(k.querySelector(".e-frame").classList.add("e-add-current"),this.infiniteRenderMod){this.sBox.insertBefore(k,this.spinner);var D=this.spinner.querySelector(".e-checkboxlist"),W=Math.ceil(k.getBoundingClientRect().height);D.style.height=parseInt(getComputedStyle(D).height.split("px")[0],10)-W+"px",D.style.minHeight=D.style.height}else o.appendChild(k)}else this.sBox.querySelector(".e-ftrchk .e-add-current")&&(this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled"))}else if(this.infiniteRenderMod&&!u(this.sBox.children[2])&&this.sBox.children[2].innerText==="Add current selection to filter"){var D=this.spinner.querySelector(".e-checkboxlist"),Z=Math.ceil(this.sBox.children[2].getBoundingClientRect().height);D.style.height=parseInt(getComputedStyle(D).height.split("px")[0],10)+Z+"px",D.style.minHeight=D.style.height,se(this.sBox.children[2])}for(var J=void 0,d=0;d<e.length;d++){var X=li("cbox");this.values[""+X]=j(c,e[parseInt(d.toString(),10)]);var L=j(this.options.field,e[parseInt(d.toString(),10)]);this.options.formatFn&&(L=this.valueFormatter.toView(L,this.options.formatFn));var O={value:L,column:this.options.column,data:e[parseInt(d.toString(),10)]};if(this.parent.notify(td,O),L=O.value,L===""||u(L)){if(J)continue;J=!0}this.infiniteRenderMod&&this.updateInfiniteUnLoadedCheckboxExistPred(L,this.infiniteUnloadParentExistPred);var F=this.localInfiniteSelectAllClicked?this.createCheckbox(L,this.infiniteLocalSelectAll,j("dataObj",e[d])):this.createCheckbox(L,this.getCheckedState(b,this.values[""+X]),j("dataObj",e[d]));o.appendChild(ws(X,F,"e-ftrchk")),this.infiniteRenderMod&&(o.lastChild.style.height=this.getListHeight(this.cBox)+"px")}var V=this.cBox.scrollTop;!this.infiniteRenderMod||this.infiniteSearchValChange?this.cBox.innerHTML="":this.infiniteRenderMod&&this.cBox.children.length&&this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteRenderMod&&((s=this.infiniteLoadedElem).push.apply(s,[].slice.call(o.children)),this.itemsCnt=p!==-1?this.infiniteLoadedElem.length-p:this.infiniteLoadedElem.length),this.infiniteUnloadParentExistPred.length&&(this.infiniteLoadedElem.length>=this.infiniteDataCount||!this.options.parentCurrentViewDataCount||this.options.parentTotalDataCount===this.infiniteDataCount&&this.options.parentCurrentViewDataCount)&&(this.infiniteUnloadParentExistPred=[]),$e(this.cBox,[].slice.call(o.children)),this.infiniteRenderMod&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=Math.round(V-this.cBox.scrollTop)),this.updateIndeterminatenBtn(),this.infiniteRenderMod?l&&l.disabled?h=!0:h=!1:(l&&(l.disabled=!1),h=!1)}else{if(o.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.infiniteRenderMod){var y=this.sBox.querySelector(".e-ftrchk .e-selectall");if(y){var K=y.parentElement.parentElement;y.classList.contains("e-check")?Pr(K):y.classList.contains("e-stop")&&(Pr(K),y.classList.remove("e-stop"),Pr(K)),y.previousSibling.disabled=!0,y.parentElement.classList.add("e-checkbox-disabled")}var U=this.sBox.querySelector(".e-ftrchk .e-add-current");if(U){var H=U.parentElement.parentElement;U.classList.contains("e-check")&&Pr(H),U.previousSibling.disabled=!0,U.parentElement.classList.add("e-checkbox-disabled")}}this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),$e(this.cBox.children[0],[].slice.call(o.children)),l&&(l.disabled=!0),h=!0,this.filterState=!h}l&&e.length&&(this.filterState=!l.disabled,l.dataBind());var z={requestType:nl,dataSource:this.renderEmpty?[]:e},Y="filterModel";z[""+Y]=this,this.parent.notify(Xr,z),this.parent.notify(Li,{disabled:h}),this.infiniteRenderMod&&this.infiniteInitialLoad&&(this.cBox.style.marginTop="0px"),kn(this.spinner)},a.prototype.updateInfiniteUnLoadedCheckboxExistPred=function(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.value instanceof Date?this.valueFormatter.toView(r.value,this.options.formatFn):r.value;e===n&&(r.operator==="equal"||r.operator==="notequal")&&(this.infiniteManualSelectMaintainPred.push(t[i]),t.splice(i,1),i--)}},a.prototype.getCheckedState=function(e,t){if(!this.isFiltered||!e)return!0;var i=this.sInput.value?!0:this.result[""+t];return this.infiniteRenderMod?i:this.options.operator==="notequal"?!i:i},a.getDistinct=function(e,t,i,r,n){for(var s=e.length,o=[],l,h="ejValue",p={},c=i&&i.isForeignColumn?i.isForeignColumn():!1;s--;){if(l=e[parseInt(s.toString(),10)],i&&i.type==="dateonly"&&typeof l[""+t]=="string"&&l[""+t]){var d=l[""+t].split(/[^0-9.]/);l[""+t]=new Date(parseInt(d[0],10),parseInt(d[1],10)-1,parseInt(d[2],10))}l=Ue(t,l);var f=typeof l=="string"&&!u(n)&&!u(n.parent)&&!u(n.parent.filterSettings)&&!u(n.parent.filterSettings.enableCaseSensitivity)?l.toLowerCase():l;if(!(f in p)){var g={};if(g[""+h]=l,p[""+f]=!0,c){var m=Xi(i,{},l,r)[0];st(vu,m,e[parseInt(s.toString(),10)]),l=j(i.foreignKeyValue,m)}st(t,u(l)?null:l,g),st("dataObj",e[parseInt(s.toString(),10)],g),o.push(g)}}return A.group(A.sort(o,t,A.fnAscending),"ejValue")},a.getPredicate=function(e,t){for(var i=A.distinct(e,"field",!0)||[],r=[],n={},s=0;s<i.length;s++)r=new q(e).executeLocal(new re().where("field","equal",i[parseInt(s.toString(),10)].field)),r.length!==0&&(n[i[parseInt(s.toString(),10)].field]=a.generatePredicate(r,t));return n},a.generatePredicate=function(e,t){var i=e?e.length:0,r,n="or",s=a.updateDateFilter(e[0]);s.ignoreAccent=u(s.ignoreAccent)?!1:s.ignoreAccent,s.type==="date"||s.type==="datetime"||s.type==="dateonly"?r=Ji(s,s.type,t):r=s.ejpredicate?s.ejpredicate:new pe(s.field,s.operator,s.value,!a.getCaseValue(s),s.ignoreAccent);for(var o=1;o<i;o++)e[parseInt(o.toString(),10)]=a.updateDateFilter(e[parseInt(o.toString(),10)]),i>2&&o>1&&(e[o].predicate==="or"&&e[o-1].predicate==="or"||e[o].predicate==="and"&&e[o-1].predicate==="and")?e[o].type==="date"||e[o].type==="datetime"||e[o].type==="dateonly"?r.predicates.push(Ji(e[parseInt(o.toString(),10)],e[o].type,t)):r.predicates.push(new pe(e[o].field,e[parseInt(o.toString(),10)].operator,e[parseInt(o.toString(),10)].value,!a.getCaseValue(e[parseInt(o.toString(),10)]),e[parseInt(o.toString(),10)].ignoreAccent)):e[o].type==="date"||e[o].type==="datetime"||e[o].type==="dateonly"?e[parseInt(o.toString(),10)].predicate==="and"&&e[parseInt(o.toString(),10)].operator==="equal"?r=r[""+n](Ji(e[parseInt(o.toString(),10)],e[parseInt(o.toString(),10)].type,t),e[parseInt(o.toString(),10)].type,e[parseInt(o.toString(),10)].ignoreAccent):r=r[e[parseInt(o.toString(),10)].predicate](Ji(e[parseInt(o.toString(),10)],e[parseInt(o.toString(),10)].type,t),e[parseInt(o.toString(),10)].type,e[parseInt(o.toString(),10)].ignoreAccent):r=e[parseInt(o.toString(),10)].ejpredicate?r[e[parseInt(o.toString(),10)].predicate](e[parseInt(o.toString(),10)].ejpredicate):r[e[parseInt(o.toString(),10)].predicate](e[parseInt(o.toString(),10)].field,e[parseInt(o.toString(),10)].operator,e[parseInt(o.toString(),10)].value,!a.getCaseValue(e[parseInt(o.toString(),10)]),e[parseInt(o.toString(),10)].ignoreAccent);return r||null},a.getCaseValue=function(e){return u(e.matchCase)?!(e.type==="string"||u(e.type)&&typeof e.value=="string"):e.matchCase},a.updateDateFilter=function(e){return(e.type==="date"||e.type==="datetime"||e.type==="dateonly"||e.value instanceof Date)&&(e.type=e.type||"date"),e},a}(),Ht="",Is="",ln="",Ze=[],gg="e-active",Ws="";function hn(a,e,t,i,r,n,s,o,l){!n||Ht===""?ln!=""?(Ht=ln+String.fromCharCode(a),ln=""):Ht+=String.fromCharCode(a):Ht==Is&&(ln=String.fromCharCode(a)),o?(setTimeout(function(){ln=""},700),setTimeout(function(){Ht=""},3e3)):setTimeout(function(){Ht=""},1e3);var h;if(Ht=Ht.toLowerCase(),Ws===r&&Is===Ht&&!l){for(var p=0;p<Ze.length;p++){if(Ze[p].classList.contains(gg)){h=p;break}if(s&&Ze[p].textContent.toLowerCase()===s.toLowerCase()){h=p;break}}return h=h+1,o?Ze[h]&&Ze.length-1!=h?Ze[h]:Ze[Ze.length]:Ze[h]?Ze[h]:Ze[0]}else{var c=e,d=Ht.length,f=void 0,g=void 0;t=t?t+1:0;var p=t;Ze=[];do p===c.length&&(p=-1),p===-1?h=0:h=p,g=c[h],f=g.innerText.toLowerCase(),f.substr(0,d)===Ht&&Ze.push(c[h]),p++;while(p!==t);if(Is=Ht,Ws=r,o){for(var m=!1,v=0;v<Ze.length;v++)if(s&&Ze[v].textContent.toLowerCase()===s.toLowerCase()){h=v,m=!0;break}return s&&m&&(h=h+1),Ze[h]?Ze[h]:Ze[0]}return Ze[0]}}function Nr(a,e,t,i,r,n,s){var o=e;i=i??!0;var l={item:null,index:null};if(a&&a.length){var h=a.length,p=i?a.toLocaleLowerCase():a;p=mg(p);for(var c=function(m,v){var y=v[m],w=void 0,b;if(e&&r){var I=y,k=n.text.split(".");r.filter(function(D){Array.prototype.slice.call(k).forEach(function(W){(s==="object"&&!D.isHeader&&I.textContent.toString().indexOf(D[W])!==-1&&I.getAttribute("data-value")===D[n.value].toString()||s==="string"&&I.textContent.toString().indexOf(D)!==-1)&&(b=s==="object"?D[W]:D)})})}if(w=r&&b?(i?b.toString().toLocaleLowerCase():b).replace(/^\s+|\s+$/g,""):(i?y.textContent.toLocaleLowerCase():y.textContent).replace(/^\s+|\s+$/g,""),t==="Equal"&&w===p||t==="StartsWith"&&w.substr(0,h)===p||t==="EndsWith"&&w.substr(w.length-p.length)===p||t==="Contains"&&new RegExp(p,"g").test(w))return l.item=y,l.index=m,{value:{item:y,index:m}}},d=0,f=o;d<f.length;d++){var g=c(d,f);if(typeof g=="object")return g.value}return l}return l}function mg(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vg(a){Ws===a&&(Ws="",Is="",Ht="",Ze=[])}function Qn(a,e,t,i){var r=/<[^>]*>/g.test(a.innerText);if(r&&(a.innerText=a.innerText.replace(/[\u00A0-\u9999<>&]/g,function(o){return"&#"+o.charCodeAt(0)+";"})),e!==""){var n=t?"gim":"gm";e=/^[a-zA-Z0-9- ]*$/.test(e)?e:e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var s=i==="StartsWith"?"^("+e+")":i==="EndsWith"?"("+e+")$":"("+e+")";Zu(a,new RegExp(s,n))}}function Zu(a,e){for(var t=0;a.childNodes&&t<a.childNodes.length;t++)if(a.childNodes[t].nodeType===3&&a.childNodes[t].textContent.trim()!==""){var i=a.childNodes[t].nodeValue.trim().replace(e,'<span class="e-highlight">$1</span>');a.childNodes[t].nodeValue="",a.innerHTML=a.innerHTML.trim()+i;break}else Zu(a.childNodes[t],e)}function yg(a){for(var e=a.querySelectorAll(".e-highlight"),t=e.length-1;t>=0;t--){var i=e[t].parentNode,r=document.createTextNode(e[t].textContent);i.replaceChild(r,e[t])}}var we={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"},et;(function(a){a.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var e={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},t={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:a.defaultMappedFields,ariaAttributes:e,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function i(L,O,F,V,K){var U=P({},t,F),H=P({},e,U.ariaAttributes),z=g(O).typeof;return z==="string"||z==="number"?r(L,O,V,F,K):o(L,O,F,H.level,V,K)}a.createList=i;function r(L,O,F,V,K){var U=n(L,O,F,V,K);return J(L,U,null,V)}a.createListFromArray=r;function n(L,O,F,V,K){var U=[],H=P({},t,V);we=D(H.moduleName);for(var z=b(),Y=0;Y<O.length;Y++)if(!u(O[Y])){var le=void 0;if(H.itemCreating&&typeof H.itemCreating=="function"){var de={dataSource:O,curData:O[Y],text:O[Y],options:H};H.itemCreating(de)}if(F?le=k(L,O[Y],void 0,null,null,[],null,z,Y,V):le=Z(L,O[Y],void 0,null,null,V,K),H.itemCreated&&typeof H.itemCreated=="function"){var de={dataSource:O,curData:O[Y],text:O[Y],item:le,options:H};H.itemCreated(de)}U.push(le)}return U}a.createListItemFromArray=n;function s(L,O,F,V,K,U){var H=P({},t,F);we=D(H.moduleName);var z=U&&(U.getModuleName()==="listview"||U.getModuleName()==="multiselect")?H.fields:P({},a.defaultMappedFields,H.fields),Y=P({},e,H.ariaAttributes),le,de=[];V&&(Y.level=V);var he=[],ue,ie;O&&O.length&&!u(g(O).item)&&!Object.prototype.hasOwnProperty.call(g(O).item,z.id)&&(le=b());for(var ye=0;ye<O.length;ye++){var _=un(O[ye],z);if(!u(O[ye])){if(H.itemCreating&&typeof H.itemCreating=="function"){var Fe={dataSource:O,curData:O[ye],text:_[z.text],options:H,fields:z};H.itemCreating(Fe)}var dt=O[ye];H.itemCreating&&typeof H.itemCreating=="function"&&(_=un(O[ye],z)),Object.prototype.hasOwnProperty.call(_,z.id)&&!u(_[z.id])&&(le=_[z.id]);var xe=[];if(H.showCheckBox&&(H.itemNavigable&&(_[z.url]||_[z.urlAttributes])?de.push(L("input",{className:we.check,attrs:{type:"checkbox"}})):xe.push(L("input",{className:we.check,attrs:{type:"checkbox"}}))),K===!0)H.showIcon&&Object.prototype.hasOwnProperty.call(_,z.iconCss)&&!u(_[z.iconCss])&&xe.push(L("span",{className:we.icon+" "+_[z.iconCss]})),ue=k(L,dt,_,z,H.itemClass,xe,!!(Object.prototype.hasOwnProperty.call(dt,"isHeader")&&dt.isHeader),le,ye,F),ie=ue.querySelector("."+we.anchorWrap),H.itemNavigable&&de.length&&mi(de,ue.firstElementChild);else{if(ue=Z(L,dt,_,z,H.itemClass,F,U),ue.classList.add(we.level+"-"+Y.level),ue.setAttribute("aria-level",Y.level.toString()),(Y.groupItemRole==="presentation"||Y.itemRole==="presentation")&&ue.removeAttribute("aria-level"),ie=ue.querySelector("."+we.anchorWrap),Object.prototype.hasOwnProperty.call(_,z.tooltip)){var Rt=_[z.tooltip];if(F&&F.enableHtmlSanitizer)Rt=$r.sanitize(Rt);else{var ve=L("span",{innerHTML:Rt});Rt=ve.innerText,ve=null}ue.setAttribute("title",Rt)}if(Object.prototype.hasOwnProperty.call(_,z.htmlAttributes)&&_[z.htmlAttributes]){var Zt=_[z.htmlAttributes];"class"in Zt&&typeof Zt.class=="string"&&Zt.class.trim()===""&&delete Zt.class,m(ue,Zt)}if(Object.prototype.hasOwnProperty.call(_,z.enabled)&&_[z.enabled]===!1&&ue.classList.add(we.disabled),Object.prototype.hasOwnProperty.call(_,z.isVisible)&&_[z.isVisible]===!1&&(ue.style.display="none"),Object.prototype.hasOwnProperty.call(_,z.imageUrl)&&!u(_[z.imageUrl])&&!H.template){var At={src:_[z.imageUrl],alt:u(_.name)?"Displaying Image":"Displaying "+_.name+" Image"};zi(At,_[z.imageAttributes]);var Tt=L("img",{className:we.image,attrs:At});ie?ie.insertAdjacentElement("afterbegin",Tt):mi([Tt],ue.firstElementChild)}if(H.showIcon&&Object.prototype.hasOwnProperty.call(_,z.iconCss)&&!u(_[z.iconCss])&&!H.template){var Ii=L("div",{className:we.icon+" "+_[z.iconCss]});ie?ie.insertAdjacentElement("afterbegin",Ii):mi([Ii],ue.firstElementChild)}xe.length&&mi(xe,ue.firstElementChild),H.itemNavigable&&de.length&&mi(de,ue.firstElementChild),I(L,_,z,O,H,ue,Y.level)}if(ie&&R([ue],[we.navigable]),H.itemCreated&&typeof H.itemCreated=="function"){var Fe={dataSource:O,curData:O[ye],text:_[z.text],item:ue,options:H,fields:z};H.itemCreated(Fe)}de=[],he.push(ue)}}return he}a.createListItemFromJson=s;function o(L,O,F,V,K,U){var H=P({},t,F),z=s(L,O,F,V,K,U);return J(L,z,H.listClass,F)}a.createListFromJson=o;function l(L,O,F){if(we=D(t.moduleName),!(!L||!L.length)){var V,K,U=Array.prototype.slice.call(L);for(O?K=h(O,U):K=F===!0?U.length:-1,V=U[K+(F===!0?-1:1)];V&&(!tu(V)||V.classList.contains(we.disabled));)K=K+(F===!0?-1:1),V=U[K];return V}}a.getSiblingLI=l;function h(L,O){if(!(!O||!L)){var F=O;return F=Array.prototype.slice.call(O),F.indexOf(L)}}a.indexOf=h;function p(L,O,F){F===void 0&&(F="None");var V=P({},a.defaultMappedFields,O),K=new re().group(V.groupBy);K=c(F,"key",K);var U=d(L,K);L=[];for(var H=0;H<U.length;H++){var z=U[H].items,Y={},le="isHeader";Y[V.text]=U[H].key,Y[""+le]=!0;var de=V.text;de==="id"&&(de="text",Y[""+de]=U[H].key),Y._id="group-list-item-"+(U[H].key?U[H].key.toString().trim():"undefined"),Y.items=z,L.push(Y);for(var he=0;he<z.length;he++)L.push(z[he])}return L}a.groupDataSource=p;function c(L,O,F){if(F===void 0&&(F=new re),L==="Ascending")F.sortBy(O,"ascending",!0);else if(L==="Descending")F.sortBy(O,"descending",!0);else for(var V=0;V<F.queries.length;V++)F.queries[V].fn==="onSortBy"&&F.queries.splice(V,1);return F}a.addSorting=c;function d(L,O){return new q(L).executeLocal(O)}a.getDataSource=d;function f(L,O){var F=P({},t,O),V=P({},a.defaultMappedFields,F.fields),K=L.cloneNode(!0),U=[];K.classList.add("json-parent");var H=K.querySelectorAll(".json-parent>li");K.classList.remove("json-parent");for(var z=0;z<H.length;z++){for(var Y=H[z],le=Y.querySelector("a"),de=Y.querySelector("ul"),he={},ue=le?le.childNodes:Y.childNodes,ie=Object.keys(ue),ye=0;ye<ue.length;ye++)ue[Number(ie[ye])].hasChildNodes()||(he[V.text]=ue[Number(ie[ye])].textContent);var _=v(Y);_.id?(he[V.id]=_.id,delete _.id):he[V.id]=b(),Object.keys(_).length&&(he[V.htmlAttributes]=_),le&&(_=v(le),Object.keys(_).length&&(he[V.urlAttributes]=_)),de&&(he[V.child]=f(de,O)),U.push(he)}return U}a.createJsonFromElement=f;function g(L){for(var O={typeof:null,item:null},F=0;F<L.length;F++)if(!u(L[F]))return O={typeof:typeof L[F],item:L[F]};return O}function m(L,O){var F={};zi(F,O),F.class&&(R([L],F.class.split(" ")),delete F.class),$(L,F)}function v(L){for(var O={},F=L.attributes,V=0;V<F.length;V++)O[F[V].nodeName]=F[V].nodeValue;return O}function y(L,O,F,V,K,U){we=D(t.moduleName);for(var H=L("ul",{className:we.ul,attrs:{role:"presentation"}}),z=P({},t,K),Y=P({},a.defaultMappedFields,V),le=Jn(O),de=[],he,ue=b(),ie=0;ie<F.length;ie++){var ye=un(F[ie],Y),_=F[ie],Fe=_.isHeader;if(typeof F[ie]=="string"||typeof F[ie]=="number"?he=_:he=ye[Y.value],z.itemCreating&&typeof z.itemCreating=="function"){var dt={dataSource:F,curData:_,text:he,options:z,fields:Y};z.itemCreating(dt)}z.itemCreating&&typeof z.itemCreating=="function"&&(ye=un(F[ie],Y),typeof F[ie]=="string"||typeof F[ie]=="number"?he=_:he=ye[Y.value]);var xe=L("li",{id:ue+"-"+ie,className:Fe?we.group:we.li,attrs:{role:"presentation"}});if(Fe)typeof F[ie]=="string"||typeof F[ie]=="number"?xe.innerText=_:xe.innerText=ye[Y.text];else{var Rt=Fe?z.groupTemplateID:z.templateID;if(Fe)if(U&&U.getModuleName()!=="listview"){var ve=le(_,U,"headerTemplate",Rt,!!z.isStringTemplate,null,xe);ve&&be(ve,xe)}else be(le(_,U,"headerTemplate",Rt,!!z.isStringTemplate),xe);else if(U&&U.getModuleName()!=="listview"){var ve=le(_,U,"template",Rt,!!z.isStringTemplate,null,xe);ve&&be(ve,xe)}else be(le(_,U,"template",Rt,!!z.isStringTemplate),xe);xe.setAttribute("data-value",u(he)?"null":he),xe.setAttribute("role","option")}if(z.itemCreated&&typeof z.itemCreated=="function"){var dt={dataSource:F,curData:_,text:he,item:xe,options:z,fields:Y};z.itemCreated(dt)}de.push(xe)}return be(de,H),H}a.renderContentTemplate=y;function w(L,O,F,V,K,U){for(var H=Jn(L),z=P({},a.defaultMappedFields,F),Y=P({},t,K),le=z.groupBy,de=0,he=V;de<he.length;de++){var ue=he[de],ie={};if(ie[""+le]=ue.textContent,ue.innerHTML="",U&&U.getModuleName()!=="listview"){var ye=H(ie,U,"groupTemplate",Y.groupTemplateID,!!Y.isStringTemplate,null,ue);ye&&be(ye,ue)}else be(H(ie,U,"groupTemplate",Y.groupTemplateID,!!Y.isStringTemplate),ue)}return V}a.renderGroupTemplate=w;function b(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}a.generateId=b;function I(L,O,F,V,K,U,H){var z=O[F.child]||[],Y=O[F.hasChildren];if(z.length&&(Y=!0,U.classList.add(we.hasChild),K.processSubChild)){var le=o(L,z,K,++H);U.appendChild(le)}if(K.expandCollapse&&Y&&!K.template){U.firstElementChild.classList.add(we.iconWrapper);var de=K.expandIconPosition==="Left"?mi:be;de([L("div",{className:"e-icons "+K.expandIconClass})],U.querySelector("."+we.textContent))}}function k(L,O,F,V,K,U,H,z,Y,le){var de=P({},t,le),he=P({},e,de.ariaAttributes),ue=O,ie=O,ye;typeof O!="string"&&typeof O!="number"&&typeof O!="boolean"&&(ye=O,ue=typeof F[V.text]=="boolean"||typeof F[V.text]=="number"?F[V.text]:F[V.text]||"",ie=F[V.value]);var _;!u(ye)&&!u(F[V.id])&&F[V.id]!==""?_=z:_=z+"-"+Y;var Fe=L("li",{className:(H===!0?we.group:we.li)+" "+(u(K)?"":K),id:_,attrs:he.groupItemRole!==""&&he.itemRole!==""?{role:H===!0?he.groupItemRole:he.itemRole}:{}});return ye&&Object.prototype.hasOwnProperty.call(F,V.enabled)&&F[V.enabled].toString()==="false"&&Fe.classList.add(we.disabled),H?Fe.innerText=ue:(Fe.setAttribute("data-value",u(ie)?"null":ie),Fe.setAttribute("role","option"),ye&&Object.prototype.hasOwnProperty.call(F,V.htmlAttributes)&&F[V.htmlAttributes]&&m(Fe,F[V.htmlAttributes]),U.length&&!de.itemNavigable&&be(U,Fe),ye&&(F[V.url]||F[V.urlAttributes]&&F[V.urlAttributes].href)?Fe.appendChild(W(L,ye,V,ue,U,de.itemNavigable)):(U.length&&de.itemNavigable&&be(U,Fe),Fe.appendChild(document.createTextNode(ue)))),Fe}function D(L){return{li:"e-"+L+"-item",ul:"e-"+L+"-parent e-ul",group:"e-"+L+"-group-item",icon:"e-"+L+"-icon",text:"e-"+L+"-text",check:"e-"+L+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+L+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+L+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function W(L,O,F,V,K,U){var H=un(O,F),z={href:H[F.url]};Object.prototype.hasOwnProperty.call(H,F.urlAttributes)&&H[F.urlAttributes]&&(zi(z,H[F.urlAttributes]),z.href=H[F.url]?H[F.url]:H[F.urlAttributes].href);var Y;if(!U)Y=L("a",{className:we.text+" "+we.url,innerHTML:V});else{Y=L("a",{className:we.text+" "+we.url});var le=L("div",{className:we.anchorWrap});K&&K.length&&be(K,le),le.appendChild(document.createTextNode(V)),be([le],Y)}return m(Y,z),Y}function Z(L,O,F,V,K,U,H){var z=P({},t,U),Y=P({},e,z.ariaAttributes),le=O,de,he,ue;typeof O!="string"&&typeof O!="number"&&(ue=O,le=F[V.text]||"",de=u(F._id)?F[V.id]:F._id,he=!!(Object.prototype.hasOwnProperty.call(O,"isHeader")&&O.isHeader)),U&&U.enableHtmlSanitizer&&(le=le);var ie=L("li",{className:(he===!0?we.group:we.li)+" "+(u(K)?"":K),attrs:Y.groupItemRole!==""&&Y.itemRole!==""?{role:he===!0?Y.groupItemRole:Y.itemRole}:{}});if(u(de)?ie.setAttribute("data-uid",b()):ie.setAttribute("data-uid",de),he&&U&&U.groupTemplate){var ye=Jn(U.groupTemplate);if(H&&H.getModuleName()!=="listview"){var _=ye(O,H,"groupTemplate",z.groupTemplateID,!!z.isStringTemplate,null,ie);_&&be(_,ie)}else be(ye(O,H,"groupTemplate",z.groupTemplateID,!!z.isStringTemplate),ie)}else if(!he&&U&&U.template){var ye=Jn(U.template);if(H&&H.getModuleName()!=="listview"){var _=ye(O,H,"template",z.templateID,!!z.isStringTemplate,null,ie);_&&be(_,ie)}else be(ye(O,H,"template",z.templateID,!!z.isStringTemplate),ie)}else{var Fe=L("div",{className:we.textContent,attrs:Y.wrapperRole!==""?{role:Y.wrapperRole}:{}});if(ue&&(F[V.url]||F[V.urlAttributes]&&F[V.urlAttributes].href))Fe.appendChild(W(L,ue,V,le,null,z.itemNavigable));else{var dt=L("span",{className:we.text,attrs:Y.itemText!==""?{role:Y.itemText}:{}});U&&U.enableHtmlSanitizer?dt.innerText=$r.sanitize(le):dt.innerHTML=le,Fe.appendChild(dt)}ie.appendChild(Fe)}return ie}function J(L,O,F,V){var K=P({},t,V),U=P({},e,K.ariaAttributes);we=D(K.moduleName);var H=L("ul",{className:we.ul+" "+(u(F)?"":F),attrs:U.listRole!==""?{role:U.listRole}:{}});return be(O,H),H}a.generateUL=J;function X(L,O,F,V){var K=P({},t,V);we=D(K.moduleName);var U=K.expandIconPosition==="Left"?mi:be;return U([L("div",{className:"e-icons "+K.expandIconClass+" "+(u(F)?"":F)})],O.querySelector("."+we.textContent)),O}a.generateIcon=X})(et||(et={}));function un(a,e){var t={};if(u(a)||typeof a=="string"||typeof a=="number"||!u(a.isHeader))return a;for(var i=0,r=Object.keys(e);i<r.length;i++){var n=r[i],s=e[""+n],o=!u(s)&&typeof s=="string"?j(s,a):void 0;u(o)||(t[""+s]=o)}return t}function Jn(a){if(a)try{return typeof a!="function"&&document.querySelector(a)?We(document.querySelector(a).innerHTML.trim()):We(a)}catch{return We(a)}}var Cg=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Gi=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},fa={TEXTSHAPE:"e-skeleton-text",CIRCLESHAPE:"e-skeleton-circle",SQUARESHAPE:"e-skeleton-square",RECTANGLESHAPE:"e-skeleton-rectangle",WAVEEFFECT:"e-shimmer-wave",PULSEEFFECT:"e-shimmer-pulse",FADEEFFECT:"e-shimmer-fade",VISIBLENONE:"e-visible-none"},Fl;(function(a){a.Text="Text",a.Circle="Circle",a.Square="Square",a.Rectangle="Rectangle"})(Fl||(Fl={}));var Ll;(function(a){a.Wave="Wave",a.Fade="Fade",a.Pulse="Pulse",a.None="None"})(Ll||(Ll={}));var bg=function(a){Cg(e,a);function e(t,i){return a.call(this,t,i)||this}return e.prototype.getModuleName=function(){return"skeleton"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.preRender=function(){this.element.id||(this.element.id=oi("e-"+this.getModuleName())),this.updateCssClass(),$(this.element,{role:"alert","aria-busy":"true","aria-live":"polite","aria-label":this.label})},e.prototype.render=function(){this.initialize()},e.prototype.onPropertyChanged=function(t,i){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"width":case"height":this.updateDimension();break;case"shape":this.updateShape();break;case"shimmerEffect":this.updateEffect();break;case"visible":this.updateVisibility();break;case"label":this.element.setAttribute("aria-label",this.label);break;case"cssClass":i.cssClass&&N([this.element],i.cssClass.split(" ")),this.updateCssClass();break}}},e.prototype.destroy=function(){a.prototype.destroy.call(this);var t=["role","aria-live","aria-busy","aria-label"],i=[];this.cssClass&&(i=i.concat(this.cssClass.split(" ")));for(var r=0;r<t.length;r++)this.element.removeAttribute(t[parseInt(r.toString(),10)]);i=i.concat(this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[]),i=i.concat(this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[]),N([this.element],i)},e.prototype.initialize=function(){this.updateShape(),this.updateEffect(),this.updateVisibility()},e.prototype.updateShape=function(){if(!u(this.shape)){var t=fa[this.shape.toUpperCase()+"SHAPE"],i=this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[];this.updateDimension(),i&&N([this.element],i),R([this.element],[t])}},e.prototype.updateDimension=function(){var t=!this.width&&["Text","Rectangle"].indexOf(this.shape)>-1?"100%":Le(this.width),i=["Circle","Square"].indexOf(this.shape)>-1?t:Le(this.height);this.element.style.width=t,this.element.style.height=i},e.prototype.updateEffect=function(){var t=this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[];t&&N([this.element],t),u(this.shimmerEffect)||R([this.element],[fa[this.shimmerEffect.toUpperCase()+"EFFECT"]])},e.prototype.updateVisibility=function(){this.element.classList[this.visible?"remove":"add"](fa.VISIBLENONE)},e.prototype.updateCssClass=function(){this.cssClass&&R([this.element],this.cssClass.split(" "))},Gi([C("")],e.prototype,"width",void 0),Gi([C("")],e.prototype,"height",void 0),Gi([C(!0)],e.prototype,"visible",void 0),Gi([C("Text")],e.prototype,"shape",void 0),Gi([C("Wave")],e.prototype,"shimmerEffect",void 0),Gi([C("Loading...")],e.prototype,"label",void 0),Gi([C("")],e.prototype,"cssClass",void 0),e=Gi([kt],e),e}(Hi),ep=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pe=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},tp=function(a){ep(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return Pe([C()],e.prototype,"text",void 0),Pe([C()],e.prototype,"value",void 0),Pe([C()],e.prototype,"iconCss",void 0),Pe([C()],e.prototype,"groupBy",void 0),Pe([C()],e.prototype,"htmlAttributes",void 0),Pe([C()],e.prototype,"disabled",void 0),e}(Ye),ee={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:"e-list-item",group:"e-list-group-item",disabled:"e-disabled",grouping:"e-dd-group",virtualList:"e-list-item e-virtual-list"},Sg="ItemTemplate",wg="DisplayTemplate",Ig="SpinnerTemplate",xg="ValueTemplate",Eg="GroupTemplate",Dg="HeaderTemplate",kg="FooterTemplate",Rg="NoRecordsTemplate",Ag="ActionFailureTemplate",Tg="e-hide-group-header",Mg=function(a){ep(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.preventChange=!1,r.isPreventChange=!1,r.isDynamicDataChange=!1,r.addedNewItem=!1,r.isAddNewItemTemplate=!1,r.isRequesting=!1,r.isVirtualizationEnabled=!1,r.isCustomDataUpdated=!1,r.isAllowFiltering=!1,r.virtualizedItemsCount=0,r.isCheckBoxSelection=!1,r.totalItemCount=0,r.dataCount=0,r.remoteDataCount=-1,r.isRemoteDataUpdated=!1,r.isIncrementalRequest=!1,r.itemCount=30,r.virtualListHeight=0,r.isVirtualScrolling=!1,r.isPreventScrollAction=!1,r.scrollPreStartIndex=0,r.isScrollActionTriggered=!1,r.previousStartIndex=0,r.isMouseScrollAction=!1,r.isKeyBoardAction=!1,r.isScrollChanged=!1,r.isUpwardScrolling=!1,r.startIndex=0,r.currentPageNumber=0,r.pageCount=0,r.isPreventKeyAction=!1,r.generatedDataObject={},r.skeletonCount=32,r.isVirtualTrackHeight=!1,r.virtualSelectAll=!1,r.incrementalQueryString="",r.incrementalEndIndex=0,r.incrementalStartIndex=0,r.incrementalPreQueryString="",r.isObjectCustomValue=!1,r.appendUncheckList=!1,r.getInitialData=!1,r.preventPopupOpen=!0,r.virtualSelectAllState=!1,r.CurrentEvent=null,r.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r.selectedValueInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r}return e.prototype.getPropObject=function(t,i,r){var n=new Object,s=new Object,o=function(h){return h};n[o(t)]=i[o(t)],s[o(t)]=r[o(t)];var l=new Object;return l.newProperty=n,l.oldProperty=s,l},e.prototype.getValueByText=function(t,i,r){var n=null;return u(this.listData)||(i?n=this.checkValueCase(t,!0,r):n=this.checkValueCase(t,!1,r)),n},e.prototype.checkValueCase=function(t,i,r,n){var s=this,o=null;n&&(o=t);var l=this.listData,h=this.fields,p=this.typeOfData(l).typeof;if(p==="string"||p==="number"||p==="boolean")for(var c=0,d=l;c<d.length;c++){var f=d[c];u(f)||(r?o=this.checkingAccent(String(f),t,i):i?this.checkIgnoreCase(String(f),t)&&(o=this.getItemValue(String(f),t,i)):this.checkNonIgnoreCase(String(f),t)&&(o=this.getItemValue(String(f),t,i,n)))}else if(i)l.filter(function(m){var v=j(h.value,m);!u(v)&&s.checkIgnoreCase(j(h.text,m).toString(),t)&&(o=j(h.value,m))});else if(n){var g=null;g=o,l.filter(function(m){var v=j(h.value,m);!u(v)&&!u(o)&&v.toString()===g.toString()&&(o=j(h.text,m))})}else l.filter(function(m){s.checkNonIgnoreCase(j(h.text,m),t)&&(o=j(h.value,m))});return o},e.prototype.checkingAccent=function(t,i,r){var n=A.ignoreDiacritics(String(t)),s=A.ignoreDiacritics(i.toString()),o=null;return r?this.checkIgnoreCase(n,s)&&(o=this.getItemValue(String(t),i,r)):this.checkNonIgnoreCase(String(t),i)&&(o=this.getItemValue(String(t),i,r)),o},e.prototype.checkIgnoreCase=function(t,i){return String(t).toLowerCase()===i.toString().toLowerCase()},e.prototype.checkNonIgnoreCase=function(t,i){return String(t)===i.toString()},e.prototype.getItemValue=function(t,i,r,n){var s=null,o=this.listData,l=this.typeOfData(o).typeof;return n?s=t.toString():r?s=l==="string"?String(t):this.getFormattedValue(String(t)):s=l==="string"?i:this.getFormattedValue(i),s},e.prototype.templateCompiler=function(t){var i=!1;if(typeof t!="function"&&t)try{i=!!ht(t,document).length}catch{i=!1}return i},e.prototype.l10nUpdate=function(t){var i=this.getModuleName()==="listbox"?this.ulElement:this.list;if(!u(this.noRecordsTemplate)&&this.noRecordsTemplate!=="No records found"||this.actionFailureTemplate!=="Request failed"){var r=t?this.actionFailureTemplate:this.noRecordsTemplate,n=void 0,s=t?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="";var o=this.templateCompiler(r);typeof r!="function"&&o?n=We(ke(r,document).innerHTML.trim()):n=We(r);var l=t?"actionFailureTemplate":"noRecordsTemplate",h=void 0;if(this.isReact&&typeof r=="function"?h=n({},this,l,s,this.isStringTemplate,null):h=n({},this,l,s,this.isStringTemplate,null,i),h&&h.length>0)for(var p=0;p<h.length;p++)if(this.getModuleName()==="listbox"&&l==="noRecordsTemplate")if(h[p].nodeName==="#text"){var c=this.createElement("li");c.textContent=h[p].textContent,c.classList.add("e-list-nrt"),c.setAttribute("role","option"),i.appendChild(c)}else h[p].classList.add("e-list-nr-template"),i.appendChild(h[p]);else(h[p]instanceof HTMLElement||h[p]instanceof Text&&h[p].textContent!=="")&&i.appendChild(h[p]);this.renderReactTemplates()}else{var d={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},f=new Xt(this.getLocaleName(),{},this.locale);f.getConstant("actionFailureTemplate")!==""||f.getConstant("noRecordsTemplate")!==""?this.l10n=f:this.l10n=new Xt(this.getModuleName()==="listbox"?"listbox":this.getModuleName()==="mention"?"mention":"dropdowns",d,this.locale);var g=t?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if(this.getModuleName()==="listbox"){var c=this.createElement("li");c.textContent=g,i.appendChild(c),c.classList.add("e-list-nrt"),c.setAttribute("role","option")}else u(i)||(i.innerHTML=g)}},e.prototype.checkAndResetCache=function(){this.isVirtualizationEnabled&&(this.generatedDataObject={},this.virtualItemStartIndex=this.virtualItemEndIndex=0,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.selectedValueInfo=null)},e.prototype.updateIncrementalInfo=function(t,i){this.viewPortInfo.startIndex=t,this.viewPortInfo.endIndex=i,this.updateVirtualItemIndex(),this.isIncrementalRequest=!0,this.resetList(this.dataSource,this.fields,this.query),this.isIncrementalRequest=!1},e.prototype.updateIncrementalView=function(t,i){this.viewPortInfo.startIndex=t,this.viewPortInfo.endIndex=i,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul")},e.prototype.updateVirtualItemIndex=function(){this.virtualItemStartIndex=this.viewPortInfo.startIndex,this.virtualItemEndIndex=this.viewPortInfo.endIndex,this.virtualListInfo=this.viewPortInfo},e.prototype.getFilteringSkeletonCount=function(){var t=this.skeletonCount;this.getSkeletonCount(!0),this.skeletonCount=this.dataCount>this.itemCount*2?this.skeletonCount:0;var i=!0;if((this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")&&this.totalItemCount<this.itemCount*2&&(this.skeletonCount=0,i=!1),!this.list.classList.contains(ee.noData)){if(this.skeletonCount,t!==this.skeletonCount&&i?this.UpdateSkeleton(!0,Math.abs(t-this.skeletonCount)):this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl").length>0)this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0&&this.list.querySelector(".e-dropdownbase")){var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.list.querySelector(".e-dropdownbase").appendChild(r)}this.list.getElementsByClassName("e-virtual-ddl-content").length>0&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},e.prototype.getSkeletonCount=function(t){this.virtualListHeight=this.listContainerHeight!=null?parseInt(this.listContainerHeight,10):this.virtualListHeight;var i=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;this.skeletonCount=i*4<this.itemCount?this.itemCount:i*4,this.itemCount=t?this.itemCount:this.skeletonCount,this.virtualItemCount=this.itemCount,this.skeletonCount=Math.floor(this.skeletonCount/2)},e.prototype.GetVirtualTrackHeight=function(){var t=this.totalItemCount===this.viewPortInfo.endIndex?this.totalItemCount*this.listItemHeight-this.itemCount*this.listItemHeight:this.totalItemCount*this.listItemHeight;t=this.isVirtualTrackHeight?0:t;var i="height: "+(t-this.itemCount*this.listItemHeight)+"px;";return(this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")&&this.skeletonCount===0?"height: 0px;":i},e.prototype.getTransformValues=function(){var t=this.viewPortInfo.startIndex*this.listItemHeight;t=t-this.skeletonCount*this.listItemHeight,t=this.viewPortInfo.startIndex===0&&this.listData&&this.listData.length===0||this.skeletonCount===0?0:t;var i="transform: translate(0px, "+t+"px);";return i},e.prototype.UpdateSkeleton=function(t,i){var r=this.list.querySelector(".e-virtual-ddl-content"),n=this.list.querySelector(".e-virtual-list");if(r&&(!n||t)&&this.isVirtualizationEnabled)for(var s=t?i:this.skeletonCount,o=0;o<s;o++){var l=this.createElement("li",{className:ee.virtualList,styles:"overflow: inherit"});this.isVirtualizationEnabled&&this.itemTemplate&&(l.style.height=this.listItemHeight+"px");var h=new bg({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text"});h.appendTo(this.createElement("div")),l.appendChild(h.element),r.firstChild&&r.firstChild.insertBefore(l,r.firstChild.children[0])}},e.prototype.getLocaleName=function(){return"drop-down-base"},e.prototype.getTextByValue=function(t){var i=this.checkValueCase(t,!1,!1,!0);return i},e.prototype.getFormattedValue=function(t){if(this.listData&&this.listData.length){var i=void 0;if(this.properties.allowCustomValue&&this.properties.value&&this.properties.value instanceof Array&&this.properties.value.length>0?i=this.typeOfData(this.properties.value):i=this.typeOfData(this.listData),typeof j(this.fields.value?this.fields.value:"value",i.item)=="number"||i.typeof==="number")return parseFloat(t);if(typeof j(this.fields.value?this.fields.value:"value",i.item)=="boolean"||i.typeof==="boolean")return t==="true"||""+t=="true"}return t},e.prototype.setEnableRtl=function(){u(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?R(this.enableRtlElements,ee.rtl):N(this.enableRtlElements,ee.rtl))},e.prototype.initialize=function(t){if(this.bindEvent=!0,this.preventPopupOpen=!0,this.actionFailureTemplateId=""+this.element.id+Ag,this.element.tagName==="UL"){var i=et.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(i,this.fields)}else if(this.element.tagName==="SELECT"){var r=this.dataSource instanceof Array?this.dataSource.length>0:!u(this.dataSource);r?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query,t)},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.updateDataAttribute=function(t){for(var i=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],r={},n=0;n<this.element.attributes.length;n++)i.indexOf(this.element.attributes[n].name)===-1&&!(this.getModuleName()==="dropdownlist"&&this.element.attributes[n].name==="readonly")&&(r[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));P(r,t,r),this.setProperties({htmlAttributes:r},!0)},e.prototype.renderItemsBySelect=function(){var t=this.element,i={value:"value",text:"text"},r=[],n=t.querySelectorAll("select>optgroup"),s=t.querySelectorAll("select>option");if(this.getJSONfromOption(r,s,i),n.length){for(var o=0;o<n.length;o++){var l=n[o],h={};h[i.text]=l.label,h.isHeader=!0;var p=l.querySelectorAll("option");r.push(h),this.getJSONfromOption(r,p,i)}t.querySelectorAll("select>option")}this.updateFields(i.text,i.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss,this.fields.disabled),this.resetList(r,i)},e.prototype.updateFields=function(t,i,r,n,s,o){var l={fields:{text:t,value:i,groupBy:u(r)?this.fields&&this.fields.groupBy:r,htmlAttributes:u(n)?this.fields&&this.fields.htmlAttributes:n,iconCss:u(s)?this.fields&&this.fields.iconCss:s,disabled:u(o)?this.fields&&this.fields.disabled:o}};this.setProperties(l,!0)},e.prototype.getJSONfromOption=function(t,i,r){for(var n=0,s=i;n<s.length;n++){var o=s[n],l={};l[r.text]=o.innerText,l[r.value]=u(o.getAttribute(r.value))?o.innerText:o.getAttribute(r.value),t.push(l)}},e.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=""+this.element.id+Sg,this.displayTemplateId=""+this.element.id+wg,this.spinnerTemplateId=""+this.element.id+Ig,this.valueTemplateId=""+this.element.id+xg,this.groupTemplateId=""+this.element.id+Eg,this.headerTemplateId=""+this.element.id+Dg,this.footerTemplateId=""+this.element.id+kg,this.noRecordsTemplateId=""+this.element.id+Rg},e.prototype.setListData=function(t,i,r,n){var s=this;i=i||this.fields;var o;this.isActive=!0;var l={cancel:!1,data:t,query:r};this.isPreventChange=this.isAngular&&this.preventChange?!0:this.isPreventChange,this.isRequesting||this.trigger("actionBegin",l,function(h){if(!h.cancel)if(s.isRequesting=!0,s.showSpinner(),t instanceof q){s.isRequested=!0;var p=!1;if(s.isDataFetched){s.emptyDataRequest(i);return}h.data.executeQuery(s.getQuery(h.query)).then(function(w){s.isPreventChange=s.isAngular&&s.preventChange?!0:s.isPreventChange;var b=!0;if(!s.virtualSelectAll){for(var I=s.getQuery(h.query),k=0;k<I.queries.length;k++)I.queries[k].fn==="onWhere"&&(p=!0);if(s.isVirtualizationEnabled&&w.count!=0&&w.count<s.itemCount*2){if(I)for(var k=0;k<I.queries.length;k++)I.queries[k].fn==="onTake"&&(I.queries[k].e.nos=w.count),s.getModuleName()==="multiselect"&&(I.queries[k].e.condition=="or"||I.queries[k].e.operator=="equal")&&(b=!1)}else if(s.isVirtualTrackHeight=!1,I)for(var k=0;k<I.queries.length;k++)s.getModuleName()==="multiselect"&&(I.queries[k].e&&I.queries[k].e.condition=="or"||I.queries[k].e&&I.queries[k].e.operator=="equal")&&(b=!1)}b&&(s.dataCount=s.totalItemCount=w.count),s.trigger("actionComplete",w,function(D){if(!D.cancel){s.isRequesting=!1;var W=D.result;if(s.isIncrementalRequest){o=s.renderItems(W,i);return}if((!s.isVirtualizationEnabled&&W.length===0||s.isVirtualizationEnabled&&W.length===0&&!p)&&(s.isDataFetched=!0),p||(s.remoteDataCount=D.count),s.dataCount=s.virtualSelectAll?s.dataCount:D.count,s.totalItemCount=s.virtualSelectAll?s.totalItemCount:D.count,o=s.renderItems(W,i),s.appendUncheckList=!1,s.onActionComplete(o,W,D),s.groupTemplate&&s.renderGroupTemplate(o),s.isRequested=!1,s.bindChildItems(W,o,i,D),s.getInitialData){s.setListData(t,i,r,n),s.getInitialData=!1,s.preventPopupOpen=!1;return}s.isVirtualizationEnabled&&s.setCurrentView&&s.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),s.keyboardEvent!=null&&s.handleVirtualKeyboardActions(s.keyboardEvent,s.pageCount),s.isVirtualizationEnabled&&s.getFilteringSkeletonCount(),s.virtualSelectAll&&s.virtualSelectAllData&&(s.virtualSelectionAll(s.virtualSelectAllState,s.liCollections,s.CurrentEvent),s.virtualSelectAllState=!1,s.CurrentEvent=null,s.virtualSelectAll=!1)}})}).catch(function(w){s.isRequested=!1,s.isRequesting=!1,s.onActionFailure(w),s.hideSpinner()})}else{s.isRequesting=!1;var c=!0,d=void 0;if(s.isVirtualizationEnabled&&!s.virtualGroupDataSource&&s.fields.groupBy){var f=new q(s.dataSource).executeLocal(new re().group(s.fields.groupBy));s.virtualGroupDataSource=f.records}var g=s.isVirtualizationEnabled&&s.virtualGroupDataSource&&!s.isCustomDataUpdated?new q(s.virtualGroupDataSource):new q(h.data);if(d=s.getQuery(h.query).executeLocal(g),!s.virtualSelectAll){var m=s.getQuery(h.query);if(s.isVirtualizationEnabled&&d.count!=0&&d.count<s.itemCount*2){if(m){for(var v=0;v<m.queries.length;v++)m.queries[v].fn==="onTake"&&(m.queries[v].e.nos=d.count,d=m.executeLocal(g)),s.getModuleName()==="multiselect"&&(m.queries[v].e.condition=="or"||m.queries[v].e.operator=="equal")&&(c=!1);c&&(d=m.executeLocal(g),s.isVirtualTrackHeight=!(s.dataSource instanceof q)&&!s.isCustomDataUpdated)}}else if(s.isVirtualTrackHeight=!1,m)for(var v=0;v<m.queries.length;v++)s.getModuleName()==="multiselect"&&(m.queries[v].e&&m.queries[v].e.condition=="or"||m.queries[v].e&&m.queries[v].e.operator=="equal")&&(c=!1)}c&&!(s.dataSource instanceof q)&&!s.isCustomDataUpdated&&!s.virtualSelectAll&&(s.dataCount=s.totalItemCount=s.virtualSelectAll?d.length:d.count),d=s.isVirtualizationEnabled?d.result:d;var y={cancel:!1,result:d};s.isPreventChange=s.isAngular&&s.preventChange?!0:s.isPreventChange,s.trigger("actionComplete",y,function(w){if(s.isIncrementalRequest){o=s.renderItems(w.result,i);return}if(!w.cancel){if(o=s.renderItems(w.result,i),s.onActionComplete(o,w.result,n),s.groupTemplate&&s.renderGroupTemplate(o),s.bindChildItems(w.result,o,i),s.getInitialData){s.getInitialData=!1,s.preventPopupOpen=!1;return}setTimeout(function(){s.getModuleName()==="multiselect"&&s.itemTemplate!=null&&o.childElementCount>0&&(o.children[0].childElementCount>0||s.fields.groupBy&&o.children[1]&&o.children[1].childElementCount>0)&&s.updateDataList()})}})}})},e.prototype.handleVirtualKeyboardActions=function(t,i){},e.prototype.updatePopupState=function(){},e.prototype.virtualSelectionAll=function(t,i,r){},e.prototype.updateRemoteData=function(){this.setListData(this.dataSource,this.fields,this.query)},e.prototype.bindChildItems=function(t,i,r,n){var s=this;t.length>=100&&this.getModuleName()==="autocomplete"?setTimeout(function(){var o=s.remainingItems(s.sortedData,r);be(o,i),s.liCollections=s.list.querySelectorAll("."+ee.li),s.updateListValues(),s.raiseDataBound(t,n)},0):this.raiseDataBound(t,n)},e.prototype.isObjectInArray=function(t,i){return i.some(function(r){return Object.keys(t).every(function(n){return r.hasOwnProperty(n)&&r[n]===t[n]})})},e.prototype.updateListValues=function(){},e.prototype.findListElement=function(t,i,r,n){var s=null;if(t){for(var o=[].slice.call(t.querySelectorAll(i)),l=0;l<o.length;l++)if(o[l].getAttribute(r)===n+""){s=o[l];break}}return s},e.prototype.raiseDataBound=function(t,i){this.hideSpinner();var r={items:t,e:i};this.trigger("dataBound",r)},e.prototype.remainingItems=function(t,i){var r=new q(t).executeLocal(new re().skip(100));if(this.itemTemplate){var n=this.templateListItem(r,i);return[].slice.call(n.childNodes)}var s=this.typeOfData(r).typeof;return s==="string"||s==="number"||s==="boolean"?et.createListItemFromArray(this.createElement,r,!0,this.listOption(r,i),this):et.createListItemFromJson(this.createElement,r,this.listOption(r,i),1,!0,this)},e.prototype.emptyDataRequest=function(t){var i=[];this.onActionComplete(this.renderItems(i,t),i),this.isRequested=!1,this.isRequesting=!1,this.hideSpinner()},e.prototype.showSpinner=function(){},e.prototype.hideSpinner=function(){},e.prototype.onActionFailure=function(t){this.liCollections=[],this.trigger("actionFailure",t),this.l10nUpdate(!0),u(this.list)||R([this.list],ee.noData)},e.prototype.onActionComplete=function(t,i,r){if(this.listData=i,this.isVirtualizationEnabled&&!this.isCustomDataUpdated&&!this.virtualSelectAll&&this.notify("setGeneratedData",{module:"VirtualScroll"}),this.getModuleName()!=="listbox"&&t.setAttribute("tabindex","0"),this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.isVirtualizationEnabled||(this.fixedHeaderElement=u(this.fixedHeaderElement)?this.fixedHeaderElement:null),this.getModuleName()==="multiselect"&&this.properties.allowCustomValue&&this.fields.groupBy)for(var n=0;n<t.childElementCount;n++)t.children[n].classList.contains("e-list-group-item")&&(u(t.children[n].innerHTML)||t.children[n].innerHTML=="")&&R([t.children[n]],Tg),t.children[0].classList.contains("e-hide-group-header")&&hi(t.children[1],{zIndex:11});u(this.list)||this.isVirtualizationEnabled||(this.list.innerHTML="",this.list.appendChild(t),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent))},e.prototype.postRender=function(t,i,r){if(this.fields.disabled)for(var n=t.querySelectorAll("."+ee.li),s=0;s<n.length;s++)JSON.parse(JSON.stringify(this.listData[s]))[this.fields.disabled]&&this.disableListItem(n[s]);var o=this.fields.disabled?t.querySelector("."+ee.li+":not(.e-disabled"):t.querySelector("."+ee.li),l=t.querySelector("."+ee.selected);o&&!l&&o.classList.add(ee.focus),i.length<=0?(this.l10nUpdate(),R([t],ee.noData)):t.classList.remove(ee.noData)},e.prototype.getQuery=function(t){return t||(this.query?this.query:new re)},e.prototype.updateVirtualizationProperties=function(t,i,r){this.isVirtualizationEnabled=!0,this.virtualizedItemsCount=t,this.isAllowFiltering=i,this.isCheckBoxSelection=r},e.prototype.renderGroupTemplate=function(t){if(this.fields.groupBy!==null&&this.dataSource||this.element.querySelector("."+ee.group)){var i=this.dataSource,r={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},n=t.querySelectorAll("."+ee.group),s=this.templateCompiler(this.groupTemplate);if(typeof this.groupTemplate!="function"&&s){var o=ke(this.groupTemplate,document).innerHTML.trim(),l=et.renderGroupTemplate(o,i,this.fields.properties,n,r,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else{var l=et.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,n,r,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}this.renderReactTemplates()}},e.prototype.createListItems=function(t,i){if(t){i.groupBy||this.element.querySelector("optgroup")?(i.groupBy&&(this.sortOrder!=="None"&&(t=this.getSortedDataSource(t)),t=et.groupDataSource(t,i.properties,this.sortOrder)),R([this.list],ee.grouping)):t=this.getSortedDataSource(t);var r=this.listOption(t,i),n=t.length>100?new q(t).executeLocal(new re().take(100)):t;return this.sortedData=t,et.createList(this.createElement,this.getModuleName()==="autocomplete"?n:t,r,!0,this)}return null},e.prototype.listOption=function(t,i){var r=!u(i.iconCss),n=u(i.properties)?i:i.properties,s=i.text!==null||i.value!==null?{fields:n,showIcon:r,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return P({},s,i,!0)},e.prototype.setFloatingHeader=function(t){!u(this.list)&&!this.list.classList.contains(ee.noData)&&(u(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:ee.fixedHead}),!u(this.list)&&!this.list.querySelector("li").classList.contains(ee.group)&&(this.fixedHeaderElement.style.display="none"),!u(this.fixedHeaderElement)&&!u(this.list)&&mi([this.fixedHeaderElement],this.list),this.setFixedHeader()),!u(this.fixedHeaderElement)&&this.fixedHeaderElement.style.zIndex==="0"&&this.setFixedHeader(),this.scrollStop(t))},e.prototype.scrollStop=function(t,i){for(var r=u(t)?this.list:t.target,n=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),s=Math.round(r.scrollTop/n),o=this.list.querySelectorAll("li:not(.e-hide-listitem)"),l=this.list.querySelectorAll(".e-virtual-list").length,h=s;h>-1;h--){var p=this.isVirtualizationEnabled?h+l:h;if(this.isVirtualizationEnabled){if(this.fixedHeaderElement&&this.updateGroupHeader(p,o,r))break;i&&(!u(o[p])&&o[p].classList.contains(ee.selected)&&this.getModuleName()!=="autocomplete"||!u(o[p])&&o[p].classList.contains(ee.focus)&&this.getModuleName())}else if(this.updateGroupHeader(p,o,r))break}},e.prototype.getPageCount=function(t){if(this.list){var i=this.list.classList.contains(ee.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height"),r=Math.round(this.list.getBoundingClientRect().height/parseInt(i,10));return t?r:Math.round(r)}else return 0},e.prototype.updateGroupHeader=function(t,i,r){return!u(i[t])&&i[t].classList.contains(ee.group)?(this.updateGroupFixedHeader(i[t],r),!0):(this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none",!1)},e.prototype.updateGroupFixedHeader=function(t,i){this.fixedHeaderElement&&(u(t.innerHTML)||(this.fixedHeaderElement.innerHTML=t.innerHTML),this.fixedHeaderElement.style.position="fixed",this.fixedHeaderElement.style.top=this.list.parentElement.offsetTop+this.list.offsetTop-window.scrollY+"px",this.fixedHeaderElement.style.display="block")},e.prototype.getValidLi=function(){return this.isVirtualizationEnabled?this.liCollections[0].classList.contains("e-virtual-list")?this.liCollections[this.skeletonCount]:this.liCollections[0]:this.liCollections[0]},e.prototype.renderItems=function(t,i,r){var n;if(this.itemTemplate&&t){var s=t;s&&i.groupBy?(this.sortOrder!=="None"&&(s=this.getSortedDataSource(s)),s=et.groupDataSource(s,i.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;var o=s.length>100?new q(s).executeLocal(new re().take(100)):s;if(n=this.templateListItem(this.getModuleName()==="autocomplete"?o:s,i),this.isVirtualizationEnabled){var l=this.list.querySelector(".e-list-parent"),h=this.list.querySelector(".e-virtual-ddl-content");if(t.length>=this.virtualizedItemsCount&&l&&h||l&&h&&this.isAllowFiltering||l&&h&&this.getModuleName()==="autocomplete"){h.replaceChild(n,l);var p=this.list.querySelectorAll(".e-reorder");this.list.querySelector(".e-virtual-ddl-content")&&p&&p.length>0&&!r&&this.list.querySelector(".e-virtual-ddl-content").removeChild(p[0]),this.updateListElements(t)}else h||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(n),this.updateListElements(t))}}else{if(this.getModuleName()==="multiselect"&&this.virtualSelectAll&&(this.virtualSelectAllData=t,t=t.slice(this.virtualItemStartIndex,this.virtualItemEndIndex)),n=this.createListItems(t,i),this.isIncrementalRequest)return this.incrementalLiCollections=n.querySelectorAll("."+ee.li),this.incrementalUlElement=n,this.incrementalListData=t,n;if(this.isVirtualizationEnabled){var l=this.list.querySelector(".e-list-parent:not(.e-reorder)"),h=this.list.querySelector(".e-virtual-ddl-content"),c=!1;!l&&this.list.querySelector(".e-list-parent.e-reorder")&&(l=this.list.querySelector(".e-list-parent.e-reorder")),t.length>=this.virtualizedItemsCount&&l&&h||l&&h&&this.isAllowFiltering||l&&h&&(this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")||c?(this.appendUncheckList?h.appendChild(n):h.replaceChild(n,l),this.updateListElements(t)):(!h||!h.firstChild)&&(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(n),this.updateListElements(t))}}return n},e.prototype.createVirtualContent=function(){this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content"}))},e.prototype.updateListElements=function(t){this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul"),this.listData=t,this.postRender(this.list,t,this.bindEvent)},e.prototype.templateListItem=function(t,i){var r=this.listOption(t,i);r.templateID=this.itemTemplateId,r.isStringTemplate=this.isStringTemplate;var n=this.templateCompiler(this.itemTemplate),s;if(typeof this.itemTemplate!="function"&&n){var o=ke(this.itemTemplate,document).innerHTML.trim();return s=et.renderContentTemplate(this.createElement,o,t,i.properties,r,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),s}else return s=et.renderContentTemplate(this.createElement,this.itemTemplate,t,i.properties,r,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),s},e.prototype.typeOfData=function(t){for(var i={typeof:null,item:null},r=0;!u(t)&&r<t.length;r++)if(!u(t[r])){var n=typeof t[r]=="string"||typeof t[r]=="number"||typeof t[r]=="boolean",s=n?u(t[r]):u(j(this.fields.value?this.fields.value:"value",t[r]));if(!s)return i={typeof:typeof t[r],item:t[r]}}return i},e.prototype.setFixedHeader=function(){u(this.list)||(this.list.parentElement.style.display="block");var t=0;if(this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(t))){var i=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10),r=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10),n=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10),s=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10);t=i+r+n+s}if(!u(this.liCollections)){var o=this.getValidLi().offsetWidth-t;this.fixedHeaderElement.style.width=o.toString()+"px"}hi(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+ee.group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=l.innerHTML},e.prototype.getSortedDataSource=function(t){if(t&&this.sortOrder!=="None"){var i=this.fields.text?this.fields.text:"text";(this.typeOfData(t).typeof==="string"||this.typeOfData(t).typeof==="number"||this.typeOfData(t).typeof==="boolean")&&(i=""),t=et.getDataSource(t,et.addSorting(this.sortOrder,i))}return t},e.prototype.getIndexByValue=function(t){var i,r=[];this.fields.disabled&&this.getModuleName()==="multiselect"&&this.liCollections?r=this.liCollections:r=this.getItems();for(var n=0;n<r.length;n++)if(!u(t)&&r[n].getAttribute("data-value")===t.toString()){i=n;break}return i},e.prototype.getIndexByValueFilter=function(t,i){var r;if(!i)return null;var n=i.querySelectorAll("li:not(.e-list-group-item)");if(n){for(var s=0;s<n.length;s++)if(!u(t)&&n[s].getAttribute("data-value")===t.toString()){r=s;break}}return r},e.prototype.dispatchEvent=function(t,i){var r=document.createEvent("HTMLEvents");r.initEvent(i,!1,!0),t&&t.dispatchEvent(r)},e.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")},e.prototype.resetList=function(t,i,r,n){if(this.list){if(this.element.tagName==="SELECT"&&this.element.options.length>0||this.element.tagName==="UL"&&this.element.childNodes.length>0){var s=t instanceof Array?t.length>0:!u(t);!s&&this.selectData&&this.selectData.length>0&&(t=this.selectData)}t=this.getModuleName()==="combobox"&&this.selectData&&t instanceof Array&&t.length<this.selectData.length&&this.addedNewItem?this.selectData:t,this.addedNewItem=!1,this.setListData(t,i,r,n)}},e.prototype.updateSelectElementData=function(t){(t||this.isVirtualizationEnabled)&&u(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},e.prototype.updateSelection=function(){},e.prototype.renderList=function(){this.render()},e.prototype.updateDataSource=function(t,i){this.resetList(this.dataSource),this.totalItemCount=this.dataSource instanceof q?this.dataSource.dataSource.json.length:0},e.prototype.setUpdateInitial=function(t,i,r){this.isDataFetched=!1;for(var n={},s=0;t.length>s;s++)i[t[s]]&&t[s]==="fields"?(this.setFields(),n[t[s]]=i[t[s]]):i[t[s]]&&(n[t[s]]=i[t[s]]);Object.keys(n).length>0&&(Object.keys(n).indexOf("dataSource")===-1&&(n.dataSource=this.dataSource),this.updateDataSource(n,r))},e.prototype.onPropertyChanged=function(t,i){this.getModuleName()==="dropdownbase"&&this.setUpdateInitial(["fields","query","dataSource"],t),this.setUpdateInitial(["sortOrder","itemTemplate"],t);for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var o=this.ulElement.querySelector("."+ee.group);this.fixedHeaderElement.innerHTML=o.innerHTML}break;case"locale":this.list&&!u(this.liCollections)&&this.liCollections.length===0&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0),this.setZIndex();break}}},e.prototype.render=function(t,i){this.getModuleName()==="listbox"?this.list=this.createElement("div",{className:ee.content,attrs:{tabindex:"0"}}):this.list=this.createElement("div",{className:ee.content}),this.list.classList.add(ee.root),this.setFields();var r={duration:300,selector:"."+ee.li};this.rippleFun=Pi(this.list,r);var n=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!u(n))&&!this.isGroupChecking&&(S.add(this.list,"scroll",this.setFloatingHeader,this),S.add(document,"scroll",this.updateGroupFixedHeader,this)),this.getModuleName()==="dropdownbase"){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),N([this.element],ee.root),this.element.style.display="none";var s=this.createElement("div");this.element.parentElement.insertBefore(s,this.element),s.appendChild(this.element),s.appendChild(this.list)}this.setEnableRtl(),i||this.initialize(t)},e.prototype.removeScrollEvent=function(){this.list&&S.remove(this.list,"scroll",this.setFloatingHeader)},e.prototype.getModuleName=function(){return"dropdownbase"},e.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+ee.li)},e.prototype.addItem=function(t,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&this.getModuleName()!=="listbox")&&this.renderList(),this.sortOrder!=="None"&&u(i)){var r=[].slice.call(this.listData);r.push(t),r=this.getSortedDataSource(r),this.fields.groupBy&&(r=et.groupDataSource(r,this.fields.properties,this.sortOrder)),i=r.indexOf(t)}var n=this.getItems().length,s=n===0,o=this.list.querySelector("."+ee.selected);t=t instanceof Array?t:[t];var l;l=u(i)||i<0||i>n-1?n:i;var h=this.fields;t&&h.groupBy&&(t=et.groupDataSource(t,h.properties));for(var p=[],c=0;c<t.length;c++){var d=t[c],f=d.isHeader,g=this.createElement("li",{className:f?ee.group:ee.li,id:"option-add-"+c}),m=d instanceof Object?j(h.text,d):d;if(f&&(g.innerText=m),this.itemTemplate&&!f){var v=this.templateCompiler(this.itemTemplate),y=typeof this.itemTemplate!="function"&&v?We(ke(this.itemTemplate,document).innerHTML.trim()):We(this.itemTemplate),w=y(d,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,g);w&&be(w,g)}else f||g.appendChild(document.createTextNode(m));g.setAttribute("data-value",d instanceof Object?j(h.value,d):d),g.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:g}),p.push(g),this.getModuleName()==="listbox"?(d.disabled&&g.classList.add("e-disabled"),this.listData.splice(s?this.listData.length:l,0,d),this.listData.length!==this.sortedData.length&&(this.sortedData=this.listData)):this.listData.push(d),this.sortOrder==="None"&&u(i)&&l===0&&(l=null),this.getModuleName()==="listbox"?(this.updateActionCompleteData(g,d,s?null:l),s=!0):this.updateActionCompleteData(g,d,l),this.trigger("beforeItemRender",{element:g,item:d})}if(n===0&&u(this.list.querySelector("ul")))u(this.list)||(this.list.innerHTML="",this.list.classList.remove(ee.noData),this.isAddNewItemTemplate=!0,u(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=p,!u(p)&&!u(this.ulElement)&&be(p,this.ulElement),this.updateAddItemList(this.list,n);else{this.getModuleName()==="listbox"&&n===0&&(this.ulElement.innerHTML="");for(var b=[],c=0;c<t.length;c++){for(var I=this.ulElement.querySelectorAll(".e-list-group-item"),k=0;k<I.length;k++)b[k]=I[k].innerText;if(b.indexOf(p[c].innerText)>-1&&h.groupBy){for(var k=0;k<I.length;k++)if(b[k]===p[c].innerText){this.sortOrder==="None"?this.ulElement.insertBefore(p[c+1],I[k+1]):this.ulElement.insertBefore(p[c+1],this.ulElement.childNodes[i]),c=c+1;break}}else this.liCollections[l]&&this.liCollections[l].parentNode?this.liCollections[l].parentNode.insertBefore(p[c],this.liCollections[l]):this.ulElement.appendChild(p[c]);var D=[].slice.call(this.liCollections);D.splice(l,0,p[c]),this.liCollections=D,l+=1,this.getModuleName()==="multiselect"&&this.updateDataList()}}this.getModuleName()==="listbox"&&this.isReact&&this.renderReactTemplates(),(o||i===0)&&this.updateSelection(),this.addedNewItem=!0},e.prototype.isDisabledElement=function(t){return!!(t&&t.classList.contains("e-disabled"))},e.prototype.isDisabledItemByIndex=function(t){return this.fields.disabled&&this.liCollections?this.isDisabledElement(this.liCollections[t]):!1},e.prototype.disableListItem=function(t){t.classList.add("e-disabled"),t.setAttribute("aria-disabled","true"),t.setAttribute("aria-selected","false")},e.prototype.validationAttribute=function(t,i){var r=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");i.setAttribute("name",r),t.removeAttribute("name");for(var n=["required","aria-required","form"],s=0;s<n.length;s++)if(t.getAttribute(n[s])){var o=t.getAttribute(n[s]);i.setAttribute(n[s],o),t.removeAttribute(n[s])}},e.prototype.setZIndex=function(){},e.prototype.updateActionCompleteData=function(t,i,r){},e.prototype.updateAddItemList=function(t,i){},e.prototype.updateDataList=function(){},e.prototype.getDataByValue=function(t){if(!u(this.listData)){var i=this.typeOfData(this.listData).typeof;if(i==="string"||i==="number"||i==="boolean")for(var r=0,n=this.listData;r<n.length;r++){var s=n[r];if(!u(s)&&s===t)return s}else for(var o=0,l=this.listData;o<l.length;o++){var s=l[o];if(!u(s)&&j(this.fields.value?this.fields.value:"value",s)===t)return s}}return null},e.prototype.destroy=function(){document&&(S.remove(document,"scroll",this.updateGroupFixedHeader),document.body.contains(this.list)&&(S.remove(this.list,"scroll",this.setFloatingHeader),u(this.rippleFun)||this.rippleFun(),ne(this.list))),this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.rippleFun=null,a.prototype.destroy.call(this)},Pe([mt({text:null,value:null,iconCss:null,groupBy:null,disabled:null},tp)],e.prototype,"fields",void 0),Pe([C(null)],e.prototype,"itemTemplate",void 0),Pe([C(null)],e.prototype,"groupTemplate",void 0),Pe([C("No records found")],e.prototype,"noRecordsTemplate",void 0),Pe([C("Request failed")],e.prototype,"actionFailureTemplate",void 0),Pe([C("None")],e.prototype,"sortOrder",void 0),Pe([C([])],e.prototype,"dataSource",void 0),Pe([C(null)],e.prototype,"query",void 0),Pe([C("StartsWith")],e.prototype,"filterType",void 0),Pe([C(!0)],e.prototype,"ignoreCase",void 0),Pe([C(1e3)],e.prototype,"zIndex",void 0),Pe([C(!1)],e.prototype,"ignoreAccent",void 0),Pe([C()],e.prototype,"locale",void 0),Pe([B()],e.prototype,"actionBegin",void 0),Pe([B()],e.prototype,"actionComplete",void 0),Pe([B()],e.prototype,"actionFailure",void 0),Pe([B()],e.prototype,"select",void 0),Pe([B()],e.prototype,"dataBound",void 0),Pe([B()],e.prototype,"created",void 0),Pe([B()],e.prototype,"destroyed",void 0),e=Pe([kt],e),e}(Hi),Fg=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Te=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},te={root:"e-dropdownlist",hover:ee.hover,selected:ee.selected,rtl:ee.rtl,li:ee.li,disable:ee.disabled,base:ee.root,focus:ee.focus,content:ee.content,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden",virtualList:"e-list-item e-virtual-list"},Lg={container:null,buttons:[]},Sr=function(a){Fg(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.isListSearched=!1,r.preventChange=!1,r.isTouched=!1,r.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},r}return e.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),a.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},e.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},e.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"VirtualScroll"}),t},e.prototype.renderList=function(t,i){a.prototype.render.call(this,t,i),this.dataSource instanceof q||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.enableVirtualization&&this.isFiltering()&&this.getModuleName()==="combobox"&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul")),this.unWireListEvents(),this.wireListEvents()},e.prototype.floatLabelChange=function(){if(this.getModuleName()==="dropdownlist"&&this.floatLabelType==="Auto"){var t=this.inputWrapper.container.querySelector(".e-float-text");this.inputElement.value!==""||this.isInteracted?ae(t,["e-label-top"],["e-label-bottom"]):ae(t,["e-label-bottom"],["e-label-top"])}},e.prototype.resetHandler=function(t){t.preventDefault(),this.clearAll(t),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},e.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,this.getModuleName()!=="autocomplete"&&!u(this.ulElement)){var t=this.fields.disabled?this.ulElement.querySelector("."+te.li+":not(.e-disabled)"):this.ulElement.querySelector("."+te.li);this.enableVirtualization&&(t=this.liCollections[this.skeletonCount]),t&&t.classList.add(te.focus)}},e.prototype.clearAll=function(t,i){this.previousItemData=u(this.itemData)?null:this.itemData,(u(i)||!u(i)&&(u(i.dataSource)||!(i.dataSource instanceof q)&&i.dataSource.length===0))&&(this.isActive=!0,this.resetSelection(i));var r=this.getItemData();!this.allowObjectBinding&&this.previousValue===r.value||this.allowObjectBinding&&this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom?this.value?this.value:r:r.value?this.getDataByValue(r.value):r])||(this.onChangeEvent(t),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData())},e.prototype.resetSelection=function(t){this.list&&(!u(t)&&(u(t.dataSource)||!(t.dataSource instanceof q)&&t.dataSource.length===0)?(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(t.dataSource)):(this.allowFiltering&&this.getModuleName()!=="autocomplete"&&!u(this.actionCompleteData.ulElement)&&!u(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement())),u(this.hiddenElement)||(this.hiddenElement.innerHTML=""),u(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(ne(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},e.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var r=i[t];if(r==="class"){var n=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();n!==""&&R([this.inputWrapper.container],n.split(" "))}else if(r==="disabled"&&this.htmlAttributes[""+r]==="disabled")this.enabled=!1,this.setEnable();else if(r==="readonly"&&!u(this.htmlAttributes[""+r]))this.readonly=!0,this.dataBind();else if(r==="style")this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+r]);else if(r==="aria-label")(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+r]):this.getModuleName()==="dropdownlist"&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+r]);else{var s=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],o=["name","required"];(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&s.push("tabindex"),o.indexOf(r)>-1||r.indexOf("data")===0?this.hiddenElement.setAttribute(r,this.htmlAttributes[""+r]):s.indexOf(r)>-1?r==="placeholder"?G.setPlaceholder(this.htmlAttributes[""+r],this.inputElement):this.inputElement.setAttribute(r,this.htmlAttributes[""+r]):this.inputWrapper.container.setAttribute(r,this.htmlAttributes[""+r])}}(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&this.inputWrapper.container.removeAttribute("tabindex")},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},e.prototype.setEnableRtl=function(){G.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},e.prototype.setEnable=function(){G.setEnabled(this.enabled,this.inputElement),this.enabled?(N([this.inputWrapper.container],te.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),R([this.inputWrapper.container],te.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"drop-down-list"},e.prototype.preventTabIndex=function(t){this.getModuleName()==="dropdownlist"&&(t.tabIndex=-1)},e.prototype.targetElement=function(){return u(this.inputWrapper)?null:this.inputWrapper.container},e.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},e.prototype.getElementByText=function(t){return this.getElementByValue(this.getValueByText(t))},e.prototype.getElementByValue=function(t){for(var i,r=this.getItems(),n=0,s=r;n<s.length;n++){var o=s[n];if(this.getFormattedValue(o.getAttribute("data-value"))===t){i=o;break}}return i},e.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof q?this.initialRemoteRender=!0:this.updateValues()},e.prototype.isDisableItemValue=function(t){if(typeof t=="object"){var i=JSON.parse(JSON.stringify(t))[this.fields.value];return this.isDisabledItemByIndex(this.getIndexByValue(i))}return this.isDisabledItemByIndex(this.getIndexByValue(t))},e.prototype.updateValues=function(){if(this.fields.disabled&&(this.value!=null&&(this.value=this.isDisableItemValue(this.value)?null:this.value),this.text!=null&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),this.index!=null&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),this.selectedValueInfo=this.viewPortInfo,u(this.value))if(this.text&&u(this.value)){var i=this.getElementByText(this.text);if(u(i)){this.setProperties({text:null});return}else this.setSelection(i,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else{var t=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value;this.setSelection(this.getElementByValue(t),null)}this.setHiddenValue(),G.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onBlurHandler=function(t){if(this.enabled){var i=t.relatedTarget,r=t.target,n=this.isPreventBlur;if(this.isPreventBlur=!1,n&&!this.isDocumentClick&&this.isPopupOpen&&(!u(r)||!this.isFilterLayout()&&u(i))){this.getModuleName()==="dropdownlist"&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus();return}if(this.isDocumentClick||!u(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(te.mobileFilter)){this.beforePopupOpen||(this.isDocumentClick=!1);return}(this.getModuleName()==="dropdownlist"&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&r.classList.contains(te.inputFocus))||u(i)&&this.getModuleName()==="dropdownlist"&&this.allowFiltering&&r!==this.inputWrapper.container||this.getModuleName()!=="dropdownlist"&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(t),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)}},e.prototype.focusOutAction=function(t){this.isInteracted=!1,this.focusOut(t),this.onFocusOut(t)},e.prototype.onFocusOut=function(t){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),this.getModuleName()==="dropdownlist"&&this.element.tagName!=="INPUT"&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&R([this.inputWrapper.clearButton],te.clearIconHide),this.trigger("blur"))},e.prototype.onFocus=function(t){if(!this.isInteracted){this.isInteracted=!0;var i={isInteracted:!!t,event:t};this.trigger("focus",i)}this.updateIconState()},e.prototype.resetValueHandler=function(t){var i=M(this.inputElement,"form");if(i&&t.target===i){var r=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=r}},e.prototype.wireEvent=function(){S.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),S.add(this.inputWrapper.container,"focus",this.focusIn,this),S.add(this.inputWrapper.container,"keypress",this.onSearch,this),S.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},e.prototype.bindCommonEvent=function(){S.add(this.targetElement(),"blur",this.onBlurHandler,this);var t=M(this.inputElement,"form");t&&S.add(t,"reset",this.resetValueHandler,this),T.isDevice?this.keyboardModule=new St(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new St(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},e.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},e.prototype.bindClearEvent=function(){this.showClearButton&&S.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},e.prototype.unBindCommonEvent=function(){!u(this.inputWrapper)&&this.targetElement()&&S.remove(this.targetElement(),"blur",this.onBlurHandler);var t=this.inputElement&&M(this.inputElement,"form");t&&S.remove(t,"reset",this.resetValueHandler),T.isDevice||this.keyboardModule.destroy(),this.showClearButton&&S.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},e.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement.value!==""&&!this.readonly?N([this.inputWrapper.clearButton],te.clearIconHide):R([this.inputWrapper.clearButton],te.clearIconHide))},e.prototype.wireListEvents=function(){u(this.list)||(S.add(this.list,"click",this.onMouseClick,this),S.add(this.list,"mouseover",this.onMouseOver,this),S.add(this.list,"mouseout",this.onMouseLeave,this))},e.prototype.onSearch=function(t){t.charCode!==32&&t.charCode!==13&&(this.list===void 0&&this.renderList(),this.searchKeyEvent=t,this.onServerIncrementalSearch(t))},e.prototype.onServerIncrementalSearch=function(t){!this.isRequested&&!u(this.list)&&!u(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(t)},e.prototype.onMouseClick=function(t){var i=t.target;this.keyboardEvent=null;var r=M(i,"."+ee.li);if(!(!this.isValidLI(r)||this.isDisabledElement(r)))if(this.setSelection(r,t),T.isDevice&&this.isFilterLayout())history.back();else{var n=100;this.closePopup(n,t)}},e.prototype.onMouseOver=function(t){var i=M(t.target,"."+ee.li);this.setHover(i)},e.prototype.setHover=function(t){this.enabled&&this.isValidLI(t)&&!t.classList.contains(ee.hover)&&(this.removeHover(),R([t],ee.hover))},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.removeHover=function(){if(this.list){var t=this.list.querySelectorAll("."+ee.hover);t&&t.length&&N(t,ee.hover)}},e.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&t.getAttribute("role")==="option"},e.prototype.updateIncrementalItemIndex=function(t,i){this.incrementalStartIndex=t,this.incrementalEndIndex=i},e.prototype.incrementalSearch=function(t){if(this.liCollections.length>0)if(this.enableVirtualization){var i=!1,r=!1,n=this.ulElement.getElementsByClassName("e-active")[0],s=n?n.textContent:null;this.incrementalQueryString==""?(this.incrementalQueryString=String.fromCharCode(t.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(t.charCode).toLocaleLowerCase()==this.incrementalPreQueryString.toLocaleLowerCase()?r=!0:this.incrementalQueryString=String.fromCharCode(t.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex==0)&&(i=!0,this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex==0?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0),(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount);for(var o=hn(t.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,r,s,!0);u(o)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0,(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount),o=hn(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,r,s,!0,!0),!!u(o));)if(u(o)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}u(o)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0,(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount),o=hn(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,r,s,!0,!0));var l=o&&this.getIndexByValue(o.getAttribute("data-value"));if(l)l=l-this.skeletonCount;else for(var h=0;h<this.incrementalLiCollections.length;h++)if(!u(o)&&!u(o.getAttribute("data-value"))&&this.incrementalLiCollections[h].getAttribute("data-value")===o.getAttribute("data-value").toString()){l=h,l=this.incrementalStartIndex+l;break}if(l&&(!(this.viewPortInfo.startIndex>=l)||!(l>=this.viewPortInfo.endIndex))){var p=l-(this.itemCount/2-2)>0?l-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if(u(o))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var d=this.getIndexByValue(o.getAttribute("data-value"))-this.skeletonCount;if(d>this.itemCount/2){var p=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if(o=this.getElementByValue(o.getAttribute("data-value")),this.setSelection(o,t),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var f=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=f-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{var o=void 0;if(this.fields.disabled){var g=this.list.querySelectorAll("."+ee.li+":not(.e-disabled)");o=hn(t.charCode,g,this.activeIndex,!0,this.element.id)}else o=hn(t.charCode,this.liCollections,this.activeIndex,!0,this.element.id);u(o)||(this.setSelection(o,t),this.setScrollPosition())}},e.prototype.hideSpinner=function(){u(this.spinnerElement)||(kn(this.spinnerElement),N([this.spinnerElement],te.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.showSpinner=function(){u(this.spinnerElement)&&(this.spinnerElement=T.isDevice&&!u(this.filterInputObj)&&this.filterInputObj.buttons[1]||!u(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],R([this.spinnerElement],te.disableIcon),Dn({target:this.spinnerElement,width:T.isDevice?"16px":"14px"},this.createElement),ur(this.spinnerElement))},e.prototype.keyActionHandler=function(t){if(this.enabled){this.keyboardEvent=t,this.isPreventKeyAction&&this.enableVirtualization&&t.preventDefault();var i=t.action==="pageUp"||t.action==="pageDown",r=this.getModuleName()!=="dropdownlist"&&(t.action==="home"||t.action==="end");this.isEscapeKey=t.action==="escape",this.isTabKey=!this.isPopupOpen&&t.action==="tab";var n=t.action==="down"||t.action==="up"||t.action==="pageUp"||t.action==="pageDown"||t.action==="home"||t.action==="end";if(!((this.isEditTextBox()||i||r)&&!this.isPopupOpen)&&!this.readonly){var s=t.action==="tab"||t.action==="close";if(u(this.list)&&!this.isRequested&&!s&&t.action!=="escape"&&(this.searchKeyEvent=t,(!this.enableVirtualization||this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&t.type!=="mousedown"&&(t.keyCode===40||t.keyCode===38))&&(this.renderList(t),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul"))),u(this.list)||!u(this.liCollections)&&n&&this.liCollections.length===0||this.isRequested)return;switch((s&&this.getModuleName()!=="autocomplete"&&this.isPopupOpen||t.action==="escape")&&t.preventDefault(),this.isSelected=t.action==="escape"?!1:this.isSelected,this.isTyped=n||t.action==="escape"?!1:this.isTyped,t.action){case"down":case"up":this.updateUpDownAction(t);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),t),t.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),t),t.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(t);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t);break;case"space":this.getModuleName()==="dropdownlist"&&(this.beforePopupOpen||(this.showPopup(),t.preventDefault()));break;case"open":this.showPopup(t);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(t),this.focusDropDown(t);break;case"enter":this.selectCurrentItem(t);break;case"tab":this.selectCurrentValueOnTab(t);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t));break}}}},e.prototype.updateUpDownAction=function(t,i){if(!(this.fields.disabled&&this.list&&this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length===0)){if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var r=this.getItemData().value;u(r)&&(r="null");var n=this.getIndexByValue(r);u(n)||(this.activeIndex=n)}var s=this.list.querySelector("."+te.focus);if(this.isSelectFocusItem(s)&&!i){if(this.setSelection(s,t),this.enableVirtualization){var o=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.fields.groupBy&&(o=this.virtualListInfo&&this.virtualListInfo.startIndex==0?this.selectedLI.offsetHeight-o:o-this.selectedLI.offsetHeight),this.list.scrollTop=o-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!u(this.liCollections)){var l=this.activeIndex,h=t.action==="down"?this.activeIndex+1:this.activeIndex-1;h=i?l:h;var p=0;this.getModuleName()==="autocomplete"&&(p=t.action==="down"&&u(this.activeIndex)?0:this.liCollections.length-1,h=h<0?this.liCollections.length-1:h===this.liCollections.length?0:h);var c=void 0;if(this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&this.isPopupOpen)if(!this.enableVirtualization)c=u(this.activeIndex)?this.liCollections[p]:this.liCollections[h];else if(!i)c=u(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[h],c=!u(c)&&!c.classList.contains("e-virtual-list")?c:null;else if(this.getModuleName()==="autocomplete"){var d=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));c=this.getElementByValue(d)}else c=this.getElementByValue(this.getItemData().value);if(u(c)){if(this.enableVirtualization&&!this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&(this.viewPortInfo.endIndex!==this.totalItemCount&&t.action==="down"||this.viewPortInfo.startIndex!==0&&t.action==="up")){if(t.action==="down"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var g=this.liCollections[0].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null,m=this.getDataByValue(g);m&&(this.itemData=m)}else if(t.action==="up"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var v=this.liCollections[this.liCollections.length-1].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null,m=this.getDataByValue(v);m&&(this.itemData=m)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(t,this.pageCount)}}else{var f=this.liCollections[this.skeletonCount]&&this.liCollections[this.skeletonCount].classList.contains("e-item-focus");if(this.setSelection(c,t),f&&this.enableVirtualization&&this.getModuleName()==="autocomplete"&&!i){var o=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;o=this.virtualListInfo&&this.virtualListInfo.startIndex==0&&this.fields.groupBy?this.selectedLI.offsetHeight-o:o-this.selectedLI.offsetHeight,this.list.scrollTop=o-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}}if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var y=this.getItemData().value,n=this.getIndexByValueFilter(y,this.actionCompleteData.ulElement);u(n)||(this.activeIndex=n)}this.allowFiltering&&this.getModuleName()==="dropdownlist"&&this.filterInput&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?$(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&$(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}));for(var w,h=0;h<this.liCollections.length;h++)if(this.liCollections[h].classList.contains(te.focus)||this.liCollections[h].classList.contains(te.selected)){w=h;break}w!=null&&this.isDisabledElement(this.liCollections[w])&&(this.getModuleName()!=="autocomplete"&&(this.liCollections.length-1===w&&t.action==="down"&&(t.action="up"),w===0&&t.action==="up"&&(t.action="down")),this.updateUpDownAction(t)),t.preventDefault()}},e.prototype.updateHomeEndAction=function(t,i){if(this.getModuleName()==="dropdownlist"){var r=0;if(t.action==="home"?(r=0,this.enableVirtualization&&this.isPopupOpen?r=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),r=this.getItems().length-1),t.preventDefault(),this.activeIndex===r){i&&this.setSelection(this.liCollections[r],t);return}this.setSelection(this.liCollections[r],t)}},e.prototype.selectCurrentValueOnTab=function(t){this.getModuleName()==="autocomplete"?this.selectCurrentItem(t):this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))},e.prototype.mobileKeyActionHandler=function(t){if(this.enabled&&!(this.isEditTextBox()&&!this.isPopupOpen)&&!this.readonly){if(this.list===void 0&&!this.isRequested&&(this.searchKeyEvent=t,this.renderList()),u(this.list)||!u(this.liCollections)&&this.liCollections.length===0||this.isRequested)return;t.action==="enter"&&this.selectCurrentItem(t)}},e.prototype.handleVirtualKeyboardActions=function(t,i){switch(t.action){case"down":case"up":(this.itemData!=null||this.getModuleName()==="autocomplete")&&this.updateUpDownAction(t,!0);break;case"pageUp":this.activeIndex=this.getModuleName()==="autocomplete"?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))+this.getPageCount()-1:this.getIndexByValue(this.previousValue),this.pageUpSelection(this.activeIndex-this.getPageCount(),t,!0),t.preventDefault();break;case"pageDown":this.activeIndex=this.getModuleName()==="autocomplete"?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))-this.getPageCount():this.getIndexByValue(this.previousValue),this.pageDownSelection(u(this.activeIndex)?2*this.getPageCount():this.activeIndex+this.getPageCount(),t,!0),t.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(t,!0);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t,!0);break}this.keyboardEvent=null},e.prototype.selectCurrentItem=function(t){if(this.isPopupOpen){var i=this.list.querySelector("."+te.focus);if(this.isDisabledElement(i))return;i&&(this.setSelection(i,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.hidePopup(t),this.focusDropDown(t)}else this.showPopup()},e.prototype.isSelectFocusItem=function(t){return!u(t)},e.prototype.pageUpSelection=function(t,i,r){var n=t>=0?this.liCollections[t+1]:this.liCollections[0];this.enableVirtualization&&this.activeIndex==null&&(n=this.liCollections.length>=t&&t>=0?this.liCollections[t+this.skeletonCount+1]:this.liCollections[0]),!u(n)&&n.classList.contains("e-virtual-list")&&(n=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(n,i),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?$(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&$(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},e.prototype.PageUpDownSelection=function(t,i){this.enableVirtualization?!u(t)&&(this.getModuleName()!=="autocomplete"&&!t.classList.contains("e-active")||this.getModuleName()==="autocomplete"&&!t.classList.contains("e-item-focus"))&&this.setSelection(t,i):this.setSelection(t,i)},e.prototype.pageDownSelection=function(t,i,r){var n=this.getItems(),s=t<=n.length?this.liCollections[t-1]:this.liCollections[n.length-1];this.enableVirtualization&&this.skeletonCount>0&&(t=this.getModuleName()==="dropdownlist"&&this.allowFiltering?t+1:t,s=t<n.length?this.liCollections[t]:this.liCollections[n.length-1]),this.enableVirtualization&&this.activeIndex==null&&(s=t<=n.length?this.liCollections[t+this.skeletonCount-1]:this.liCollections[n.length-1]),this.PageUpDownSelection(s,i),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?$(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&$(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},e.prototype.unWireEvent=function(){u(this.inputWrapper)||(S.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),S.remove(this.inputWrapper.container,"keypress",this.onSearch),S.remove(this.inputWrapper.container,"focus",this.focusIn),S.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},e.prototype.unWireListEvents=function(){this.list&&(S.remove(this.list,"click",this.onMouseClick),S.remove(this.list,"mouseover",this.onMouseOver),S.remove(this.list,"mouseout",this.onMouseLeave))},e.prototype.checkSelector=function(t){return'[id="'+t.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},e.prototype.onDocumentClick=function(t){var i=t.target;if(!(!u(this.popupObj)&&M(i,this.checkSelector(this.popupObj.element.id)))&&!u(this.inputWrapper)&&!this.inputWrapper.container.contains(t.target)){if(this.inputWrapper.container.classList.contains(te.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var r=this.isRequested;this.getModuleName()==="combobox"&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(t),this.isInteracted=!1,r||(this.onFocusOut(t),this.inputWrapper.container.classList.remove(te.inputFocus))}}else i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&!(this.getModuleName()==="combobox"&&!this.allowFiltering&&T.isDevice&&i===this.inputWrapper.buttons[0])&&(this.isPreventBlur=(T.isIE||T.info.name==="edge")&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),t.preventDefault())},e.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(te.inputFocus))},e.prototype.focusDropDown=function(t){!this.initial&&this.isFilterLayout()&&this.focusIn(t)},e.prototype.dropDownClick=function(t){if(!(t.which===3||t.button===2)&&(this.keyboardEvent=null,!(this.targetElement().classList.contains(te.disable)||this.inputWrapper.clearButton===t.target))){var i=t.target;if(i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&this.getModuleName()!=="combobox"&&t.preventDefault(),this.readonly)this.focusIn(t);else{this.isPopupOpen?(this.hidePopup(t),this.isFilterLayout()&&this.focusDropDown(t)):(this.focusIn(t),this.floatLabelChange(),this.queryString=this.inputElement.value.trim()===""?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(t));var r=this,n=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){r.cloneElements(),r.isSecondClick=!0},n)}}},e.prototype.cloneElements=function(){if(this.list){var t=this.list.querySelector("ul");t&&(t=t.cloneNode?t.cloneNode(!0):t,this.actionCompleteData.ulElement=t)}},e.prototype.updateSelectedItem=function(t,i,r,n){var s=this;this.removeSelection(),t.classList.add(ee.selected),this.removeHover();var o=t.getAttribute("data-value")!==null?this.getFormattedValue(t.getAttribute("data-value")):null,l=this.getDataByValue(o);if(!this.initial&&!r&&!u(i)){var h=this.detachChanges(l);this.isSelected=!0;var p={e:i,item:t,itemData:h,isInteracted:!!i,cancel:!1};this.trigger("select",p,function(c){c.cancel?t.classList.remove(ee.selected):(s.selectEventCallback(t,i,r,l,o),n&&s.setSelectOptions(t,i))})}else this.selectEventCallback(t,i,r,l,o),n&&this.setSelectOptions(t,i)},e.prototype.selectEventCallback=function(t,i,r,n,s){this.previousItemData=u(this.itemData)?null:this.itemData,this.itemData!=n&&(this.previousValue=u(this.itemData)?null:typeof this.itemData=="object"&&!this.allowObjectBinding?this.checkFieldValue(this.itemData,this.fields.value.split(".")):this.itemData),this.item=t,this.itemData=n;var o=this.list.querySelector("."+ee.focus);if(o&&N([o],ee.focus),t.setAttribute("aria-selected","true"),u(s)&&(s="null"),this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var l=this.getIndexByValueFilter(s,this.actionCompleteData.ulElement);u(l)?this.activeIndex=this.getIndexByValue(s):this.activeIndex=l}else this.enableVirtualization&&this.activeIndex==null&&this.dataSource instanceof q&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul")),this.activeIndex=this.getIndexByValue(s)},e.prototype.activeItem=function(t){this.isValidLI(t)&&!t.classList.contains(ee.selected)&&(this.removeSelection(),t.classList.add(ee.selected),this.removeHover(),t.setAttribute("aria-selected","true"))},e.prototype.setValue=function(t){var i=this.getItemData();this.isTouched=!u(t),i.value===null?G.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):G.setValue(i.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&this.itemData!==null?this.setValueTemplate():!u(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(ne(this.valueTempElement),this.inputElement.style.display="block"),!u(i.value)&&!this.enableVirtualization&&this.allowFiltering&&(this.activeIndex=this.getIndexByValueFilter(i.value,this.actionCompleteData.ulElement));var r=te.clearIcon,n=this.isFiltering()&&this.filterInput&&this.getModuleName()==="combobox",s=n&&this.filterInput.parentElement.querySelector("."+r);return this.isFiltering()&&s&&s.style.removeProperty("visibility"),!this.allowObjectBinding&&this.previousValue===i.value||this.allowObjectBinding&&this.previousValue!=null&&this.isObjectInArray(this.previousValue,[this.allowCustom&&this.isObjectCustomValue?this.value?this.value:i:i.value?this.getDataByValue(i.value):i])?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,this.getModuleName()==="dropdownlist"&&this.updateIconState(),!1)},e.prototype.setSelection=function(t,i){if(this.isValidLI(t)&&(!t.classList.contains(ee.selected)||this.isPopupOpen&&this.isSelected&&t.classList.contains(ee.selected)))this.updateSelectedItem(t,i,!1,!0);else if(this.setSelectOptions(t,i),this.enableVirtualization&&this.value){var r=this.fields.value?this.fields.value:"",n=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof q){var s=new q(this.virtualGroupDataSource).executeLocal(new re().where(new pe(r,"equal",n)));if(s&&s.length>0){this.itemData=s[0];var o=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(o.value):o.value;(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&this.setProperties({text:o.text,value:l})}}else{var s=new q(this.dataSource).executeLocal(new re().where(new pe(r,"equal",n)));if(s&&s.length>0){this.itemData=s[0];var o=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(o.value):o.value;(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&this.setProperties({text:o.text,value:l})}}}},e.prototype.setSelectOptions=function(t,i){this.list&&this.removeHover(),this.previousSelectedLI=u(this.selectedLI)?null:this.selectedLI,this.selectedLI=t,!this.setValue(i)&&((!this.isPopupOpen&&!u(t)||this.isPopupOpen&&!u(i)&&(i.type!=="keydown"||i.type==="keydown"&&i.action==="enter"))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.isPopupOpen&&!u(this.selectedLI)&&this.itemData!==null&&(!i||i.type!=="click")&&this.setScrollPosition(i),T.info.name!=="mozilla"&&this.targetElement()&&($(this.targetElement(),{"aria-describedby":this.inputElement.id!==""?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),this.isPopupOpen&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?$(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):this.isPopupOpen&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&$(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},e.prototype.dropdownCompiler=function(t){var i=!1;if(typeof t!="function"&&t)try{i=!!document.querySelectorAll(t).length}catch{i=!1}return i},e.prototype.setValueTemplate=function(){var t;this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(ne(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:te.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var i=this.dropdownCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&i?t=We(document.querySelector(this.valueTemplate).innerHTML.trim()):t=We(this.valueTemplate);var r=t(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);r&&r.length>0&&be(r,this.valueTempElement),this.renderReactTemplates()},e.prototype.removeSelection=function(){if(this.list){var t=this.list.querySelectorAll("."+ee.selected);t.length&&(N(t,ee.selected),t[0].removeAttribute("aria-selected"))}},e.prototype.getItemData=function(){var t=this.fields,i=null;i=this.itemData;var r,n;u(i)||(r=j(t.value,i),n=j(t.text,i));var s=!u(i)&&!nt(r)?r:i,o=!u(i)&&!nt(r)?n:i;return{value:s,text:o}},e.prototype.onChangeEvent=function(t,i){var r=this,n=this.getItemData(),s=this.isSelectCustom?null:this.activeIndex;if(this.enableVirtualization){var o=this.dataSource instanceof q?this.virtualGroupDataSource:this.dataSource;if(n.value&&o&&o.length>0){var l=o.findIndex(function(p){return!u(n.value)&&j(r.fields.value,p)===n.value});l!==-1&&(s=l)}}var h=this.allowObjectBinding?i?this.value:this.getDataByValue(n.value):n.value;this.setProperties({index:s,text:n.text,value:h},!0),this.detachChangeEvent(t)},e.prototype.detachChanges=function(t){var i;return typeof t=="string"||typeof t=="boolean"||typeof t=="number"?i=Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):i=t,i},e.prototype.detachChangeEvent=function(t){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.enableVirtualization?this.getIndexByValue(this.value):this.index,this.typedString=u(this.text)?"":this.text,!this.initial){var i=this.detachChanges(this.itemData),r=void 0;typeof this.previousItemData=="string"||typeof this.previousItemData=="boolean"||typeof this.previousItemData=="number"?r=Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):r=this.previousItemData,this.setHiddenValue();var n={e:t,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:r,isInteracted:!!t,value:this.value,element:this.element,event:t};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}(u(this.value)||this.value==="")&&this.floatLabelType!=="Always"&&N([this.inputWrapper.container],"e-valid-input")},e.prototype.setHiddenValue=function(){if(u(this.value))this.hiddenElement.innerHTML="";else{var t=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value;if(this.hiddenElement.querySelector("option")){var i=this.hiddenElement.querySelector("option");i.textContent=this.text,i.setAttribute("value",t.toString())}else if(!u(this.hiddenElement)){this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>";var i=this.hiddenElement.querySelector("option");i.setAttribute("value",t.toString())}}},e.prototype.onFilterUp=function(t){if(!(t.ctrlKey&&t.keyCode===86)&&(this.isValidKey||t.keyCode===40||t.keyCode===38))switch(this.isValidKey=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,t.keyCode){case 38:case 40:this.getModuleName()==="autocomplete"&&!this.isPopupOpen&&!this.preventAltUp&&!this.isRequested?(this.preventAutoFill=!0,this.searchLists(t)):this.preventAutoFill=!1,this.preventAltUp=!1,this.getModuleName()==="autocomplete"&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])&&$(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),t.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&this.typedString!==""||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(t)):this.typedString===""&&this.queryString===""&&this.getModuleName()!=="autocomplete"?(this.preventAutoFill=!0,this.searchLists(t)):this.typedString===""&&(this.list&&this.resetFocusElement(),this.activeIndex=null,this.getModuleName()!=="dropdownlist"&&(this.preventAutoFill=!0,this.searchLists(t),this.getModuleName()==="autocomplete"&&this.hidePopup())),t.preventDefault();break;default:this.isFiltering()&&this.getModuleName()==="combobox"&&u(this.list)&&(this.getInitialData=!0,this.renderList()),this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(t),(this.enableVirtualization&&this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof q)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof q&&this.totalItemCount!=0)&&this.getFilteringSkeletonCount();break}else this.isValidKey=!1},e.prototype.onFilterDown=function(t){switch(t.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,t.preventDefault();break;case 9:this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&t.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value;break}},e.prototype.removeFillSelection=function(){if(this.isInteracted){var t=this.getSelectionPoints();this.inputElement.setSelectionRange(t.end,t.end)}},e.prototype.getQuery=function(t){var i;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){i=t?t.clone():this.query?this.query.clone():new re;var r=this.typedString===""?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof q)&&n==="string"||n==="number")i.where("",r,this.typedString,this.ignoreCase,this.ignoreAccent);else if(this.getModuleName()!=="combobox"||this.isFiltering()&&this.getModuleName()==="combobox"&&this.typedString!==""){var s=this.fields.text?this.fields.text:"";i.where(s,r,this.typedString,this.ignoreCase,this.ignoreAccent)}}else i=this.enableVirtualization&&!u(this.customFilterQuery)?this.customFilterQuery.clone():t?t.clone():this.query?this.query.clone():new re;if(this.enableVirtualization&&this.viewPortInfo.endIndex!=0){var o=this.getTakeValue(),l=!1;if(i){for(var h=0;h<i.queries.length;h++)if(i.queries[h].fn==="onSkip"){l=!0;break}}var p=0,c=0;if(i&&i.queries.length>0)for(var d=0;d<i.queries.length;d++)i.queries[d].fn==="onSkip"&&(c=i.queries[d].e.nos),i.queries[d].fn==="onTake"&&(p=o<=i.queries[d].e.nos?i.queries[d].e.nos:o);if(p<=0&&this.query&&this.query.queries.length>0)for(var f=0;f<this.query.queries.length;f++)this.query.queries[f].fn==="onTake"&&(p=o<=this.query.queries[f].e.nos?this.query.queries[f].e.nos:o);var g=!1;if(i&&i.queries.length>0)for(var m=0;m<i.queries.length;m++){if(i.queries[m].fn==="onSkip"){c=i.queries[m].e.nos,i.queries.splice(m,1),--m;continue}i.queries[m].fn==="onTake"&&(p=i.queries[m].e.nos<=p?p:i.queries[m].e.nos,i.queries.splice(m,1),--m)}!g&&(this.allowFiltering||!this.isPopupOpen||!l)&&(c>0?i.skip(c):i.skip(this.virtualItemStartIndex)),this.isIncrementalRequest?i.take(this.incrementalEndIndex):p>0?i.take(p):i.take(o),i.requiresCount()}return i},e.prototype.getSelectionPoints=function(){var t=this.inputElement;return{start:Math.abs(t.selectionStart),end:Math.abs(t.selectionEnd)}},e.prototype.searchLists=function(t){var i=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+te.clearIcon)){var r=this.filterInput.parentElement.querySelector("."+te.clearIcon);r.style.visibility=this.filterInput.value===""?"hidden":"visible"}if(this.isDataFetched=!1,this.isFiltering()){this.checkAndResetCache(),this.isRequesting=!1;var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(s,o,l){n.cancel||(i.isCustomFilter=!0,i.customFilterQuery=o&&o.clone(),i.filteringAction(s,o,l))},baseEventArgs:t,cancel:!1};this.trigger("filtering",n,function(s){!s.cancel&&!i.isCustomFilter&&!s.preventDefaultAction&&i.filteringAction(i.dataSource,null,i.fields)})}},e.prototype.filter=function(t,i,r){this.isCustomFilter=!0,this.filteringAction(t,i,r)},e.prototype.filteringAction=function(t,i,r){if(!u(this.filterInput)){this.beforePopupOpen=!(!this.isPopupOpen&&this.getModuleName()==="combobox"&&this.filterInput.value===""||this.getInitialData);var n=this.list.classList.contains(ee.noData);if(this.filterInput.value.trim()===""&&!this.itemTemplate){if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!u(this.actionCompleteData.ulElement)&&!u(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.isFiltering()&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(t,r,i),n&&!this.list.classList.contains(ee.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl")))){var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(s)}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,!u(this.itemData)&&this.getModuleName()==="dropdownlist"&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}else if(this.isNotSearchList=!1,i=this.filterInput.value.trim()===""?null:i,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(t,r,i),this.getModuleName()==="dropdownlist"&&this.list.classList.contains(ee.noData)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),$(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&n&&!this.list.classList.contains(ee.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl"))){var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(s)}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates()}},e.prototype.setSearchBox=function(t){if(this.isFiltering()){var i=t.querySelector("."+te.filterParent)?t.querySelector("."+te.filterParent):this.createElement("span",{className:te.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:te.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var r=!1;return T.isDevice&&(r=!0),this.filterInputObj=G.createInput({element:this.filterInput,buttons:r?[te.backIcon,te.filterBarClearIcon]:[te.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),u(this.cssClass)||(this.cssClass.split(" ").indexOf("e-outline")!==-1?R([this.filterInputObj.container],"e-outline"):this.cssClass.split(" ").indexOf("e-filled")!==-1&&R([this.filterInputObj.container],"e-filled")),be([this.filterInputObj.container],i),mi([i],t),$(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+te.clearIcon),!T.isDevice&&this.clearIconElement&&(S.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),T.isDevice?this.searchKeyModule=new St(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new St(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),S.add(this.filterInput,"input",this.onInput,this),S.add(this.filterInput,"keyup",this.onFilterUp,this),S.add(this.filterInput,"keydown",this.onFilterDown,this),S.add(this.filterInput,"blur",this.onBlurHandler,this),S.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}else return Lg},e.prototype.onInput=function(t){this.isValidKey=!0,this.getModuleName()==="combobox"&&this.updateIconState(),T.isDevice&&T.info.name==="mozilla"&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(t))},e.prototype.pasteHandler=function(t){var i=this;setTimeout(function(){i.typedString=i.filterInput.value,i.searchLists(t)})},e.prototype.onActionFailure=function(t){a.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},e.prototype.getTakeValue=function(){return this.allowFiltering&&this.getModuleName()==="dropdownlist"&&T.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},e.prototype.onActionComplete=function(t,i,r,n){var s=this;if(this.dataSource instanceof q&&!u(r)&&!this.virtualGroupDataSource&&(this.totalItemCount=r.count),this.isNotSearchList&&!this.enableVirtualization){this.isNotSearchList=!1;return}this.getInitialData&&this.updateActionCompleteDataValues(t,i),!this.preventPopupOpen&&this.getModuleName()==="combobox"&&(this.beforePopupOpen=!0,this.preventPopupOpen=!0);var o=this.itemCount;if(this.isActive||!u(t)){var l=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(a.prototype.onActionComplete.call(this,t,i,r),this.skeletonCount=this.totalItemCount!=0&&this.totalItemCount<this.itemCount*2?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!u(this.searchKeyEvent)&&this.searchKeyEvent.type==="keydown"&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!u(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),u(t)||$(t,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof q){var h=u(this.fields.value)?this.fields.text:this.fields.value,p=this.allowObjectBinding&&!u(this.value)?j(h,this.value):this.value,c=this.fields.value.split("."),d=i.some(function(m){return u(m[h])&&c.length>1?s.checkFieldValue(m,c)===p:m[h]===p});this.enableVirtualization&&this.virtualGroupDataSource&&(d=this.virtualGroupDataSource.some(function(m){return u(m[h])&&c.length>1?s.checkFieldValue(m,c)===p:m[h]===p})),d?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new pe(h,"equal",p))).then(function(m){m.result.length>0&&s.addItem(m.result,i.length),s.updateValues()})}else this.updateValues();this.initial=!1}else this.getModuleName()==="autocomplete"&&this.value&&this.setInputValue();if(this.getModuleName()!=="autocomplete"&&this.isFiltering()&&!this.isTyped)(!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||u(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof q||!u(this.dataSource)&&!u(this.dataSource.length)&&this.dataSource.length!==0))&&(this.itemTemplate&&this.element.tagName==="EJS-COMBOBOX"&&this.allowFiltering?setTimeout(function(){s.updateActionCompleteDataValues(t,i)},0):this.updateActionCompleteDataValues(t,i)),(this.allowCustom||this.allowFiltering&&!this.isValueInList(i,this.value)&&this.dataSource instanceof q)&&!this.enableVirtualization?this.addNewItem(i,l):(this.allowCustom||this.allowFiltering&&this.isValueInList(i,this.value))&&!this.enableVirtualization&&this.addNewItem(i,l),(!u(this.itemData)||u(this.itemData)&&this.enableVirtualization)&&(this.getSkeletonCount(),this.skeletonCount=this.totalItemCount!=0&&this.totalItemCount<this.itemCount*2?0:this.skeletonCount,this.UpdateSkeleton(),this.focusIndexItem()),this.enableVirtualization&&this.updateActionCompleteDataValues(t,i);else if(this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&!this.isFiltering()){var f=this.getItemData().value;this.activeIndex=this.getIndexByValue(f);var g=this.findListElement(this.list,"li","data-value",f);this.selectedLI=g}else this.enableVirtualization&&this.getModuleName()==="autocomplete"&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(r),this.enableVirtualization&&(this.list.querySelector(".e-virtual-list")||(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"))),this.enableVirtualization&&o!=this.itemCount&&this.resetList(this.dataSource,this.fields))}},e.prototype.isValueInList=function(t,i){if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(t[r]===i)return!0}else if(typeof t=="object"&&t!==null){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===i)return!0}return!1},e.prototype.checkFieldValue=function(t,i){var r=t;return i.forEach(function(n){r=r[n]}),r},e.prototype.updateActionCompleteDataValues=function(t,i){this.actionCompleteData={ulElement:t.cloneNode(!0),list:i,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},e.prototype.addNewItem=function(t,i){var r=this;if(!u(this.itemData)&&!u(i)){var n=this.getItemData().value,s=t.some(function(o){return(typeof o=="string"||typeof o=="number")&&o===n||j(r.fields.value,o)===n});s||this.addItem(this.itemData)}},e.prototype.updateActionCompleteData=function(t,i,r){var n=this;this.getModuleName()!=="autocomplete"&&this.actionCompleteData.ulElement&&(this.itemTemplate&&this.element.tagName==="EJS-COMBOBOX"&&this.allowFiltering?setTimeout(function(){n.actionCompleteDataUpdate(t,i,r)},0):this.actionCompleteDataUpdate(t,i,r))},e.prototype.actionCompleteDataUpdate=function(t,i,r){r!==null?this.actionCompleteData.ulElement.insertBefore(t.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[r]):this.actionCompleteData.ulElement.appendChild(t.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list.indexOf(i)<0&&this.actionCompleteData.list.push(i)},e.prototype.focusIndexItem=function(){var t=this.getItemData().value;this.activeIndex=this.enableVirtualization&&!u(t)||!this.enableVirtualization?this.getIndexByValue(t):this.activeIndex;var i=this.findListElement(this.list,"li","data-value",t);this.selectedLI=i,this.activeItem(i),this.enableVirtualization&&u(i)||this.removeFocus()},e.prototype.updateSelection=function(){var t=this.list.querySelector("."+ee.selected);t?(this.setProperties({index:this.getIndexByValue(t.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+ee.li).classList.add(te.focus))},e.prototype.updateSelectionList=function(){var t=this.list&&this.list.querySelector(".e-active");if(!t&&!u(this.value)){var i=this.allowObjectBinding?j(this.fields.value?this.fields.value:"",this.value):this.value,r=this.findListElement(this.list,"li","data-value",i);r&&r.classList.add("e-active")}},e.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+te.focus);t&&t.length&&N(t,te.focus)},e.prototype.renderPopup=function(t){var i=this;if(this.popupObj&&document.body.contains(this.popupObj.element)){this.refreshPopup();return}var r={cancel:!1};this.trigger("beforeOpen",r,function(n){if(n.cancel)i.beforePopupOpen=!1;else{var s=i.createElement("div",{id:i.element.id+"_popup",className:"e-ddl e-popup "+(i.cssClass!==null?i.cssClass:"")});s.setAttribute("aria-label",i.element.id),s.setAttribute("role","dialog");var o=i.setSearchBox(s);if(i.listContainerHeight=i.allowFiltering&&i.getModuleName()==="dropdownlist"&&T.isDevice?Le(Math.round(window.outerHeight).toString()+"px"):Le(i.popupHeight),i.headerTemplate&&i.setHeaderTemplate(s),be([i.list],s),i.footerTemplate&&i.setFooterTemplate(s),document.body.appendChild(s),s.style.top="0px",i.enableVirtualization&&i.itemTemplate){var l=s.querySelectorAll("li.e-list-item:not(.e-virtual-list)");i.listItemHeight=l.length>0?Math.ceil(l[0].getBoundingClientRect().height):0}if(i.enableVirtualization&&!i.list.classList.contains(ee.noData))if(i.getSkeletonCount(),i.skeletonCount=i.totalItemCount<i.itemCount*2?0:i.skeletonCount,i.list.querySelector(".e-virtual-ddl-content")?i.list.getElementsByClassName("e-virtual-ddl-content")[0].style=i.getTransformValues():i.list.appendChild(i.createElement("div",{className:"e-virtual-ddl-content",styles:i.getTransformValues()})).appendChild(i.list.querySelector(".e-list-parent")),i.UpdateSkeleton(),i.liCollections=i.list.querySelectorAll("."+ee.li),i.virtualItemCount=i.itemCount,i.list.querySelector(".e-virtual-ddl"))i.list.getElementsByClassName("e-virtual-ddl")[0].style=i.GetVirtualTrackHeight();else{var h=i.createElement("div",{id:i.element.id+"_popup",className:"e-virtual-ddl",styles:i.GetVirtualTrackHeight()});s.querySelector(".e-dropdownbase").appendChild(h)}if(s.style.visibility="hidden",i.popupHeight!=="auto"){if(i.searchBoxHeight=0,!u(o.container)&&i.getModuleName()!=="combobox"&&i.getModuleName()!=="autocomplete"&&(i.searchBoxHeight=o.container.parentElement.getBoundingClientRect().height,i.listContainerHeight=(parseInt(i.listContainerHeight,10)-i.searchBoxHeight).toString()+"px"),i.headerTemplate){i.header=i.header?i.header:s.querySelector(".e-ddl-header");var p=Math.round(i.header.getBoundingClientRect().height);i.listContainerHeight=(parseInt(i.listContainerHeight,10)-(p+i.searchBoxHeight)).toString()+"px"}if(i.footerTemplate){i.footer=i.footer?i.footer:s.querySelector(".e-ddl-footer");var p=Math.round(i.footer.getBoundingClientRect().height);i.listContainerHeight=(parseInt(i.listContainerHeight,10)-(p+i.searchBoxHeight)).toString()+"px"}i.list.style.maxHeight=(parseInt(i.listContainerHeight,10)-2).toString()+"px",s.style.maxHeight=Le(i.popupHeight)}else s.style.height="auto";var c=0,d=void 0;if(i.isPreventScrollAction=!0,!u(i.selectedLI)&&!u(i.activeIndex)&&i.activeIndex>=0||i.enableVirtualization?i.setScrollPosition():i.list.scrollTop=0,T.isDevice&&!i.allowFiltering&&(i.getModuleName()==="dropdownlist"||i.isDropDownClick&&i.getModuleName()==="combobox")){c=i.getOffsetValue(s);var f=i.isEmptyList()?i.list:i.liCollections[0];u(i.inputElement)||(d=-(parseInt(getComputedStyle(f).textIndent,10)-parseInt(getComputedStyle(i.inputElement).paddingLeft,10)+parseInt(getComputedStyle(i.inputElement.parentElement).borderLeftWidth,10)))}i.createPopup(s,c,d),i.popupContentElement=i.popupObj.element.querySelector(".e-content"),i.getFocusElement(),i.checkCollision(s),T.isDevice&&(parseInt(i.popupWidth.toString(),10)>window.outerWidth&&!(i.getModuleName()==="dropdownlist"&&i.allowFiltering)&&i.popupObj.element.classList.add("e-wide-popup"),i.popupObj.element.classList.add(te.device),(i.getModuleName()==="dropdownlist"||i.getModuleName()==="combobox"&&!i.allowFiltering&&i.isDropDownClick)&&(i.popupObj.collision={X:"fit",Y:"fit"}),i.isFilterLayout()&&(i.popupObj.element.classList.add(te.mobileFilter),i.popupObj.position={X:0,Y:0},i.popupObj.dataBind(),$(i.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),R([document.body,i.popupObj.element],te.popupFullScreen),i.setSearchBoxPosition(),i.backIconElement=o.container.querySelector(".e-back-icon"),i.clearIconElement=o.container.querySelector("."+te.clearIcon),S.add(i.backIconElement,"click",i.clickOnBackIcon,i),S.add(i.clearIconElement,"click",i.clearText,i))),s.style.visibility="visible",R([s],"e-popup-close");for(var g=i.popupObj.getScrollableParent(i.inputWrapper.container),m=0,v=g;m<v.length;m++){var y=v[m];S.add(y,"scroll",i.scrollHandler,i)}u(i.list)||(i.unWireListEvents(),i.wireListEvents()),i.selectedElementID=i.selectedLI?i.selectedLI.id:null,i.enableVirtualization&&(i.notify("bindScrollEvent",{module:"VirtualScroll",component:i.getModuleName(),enable:i.enableVirtualization}),setTimeout(function(){(i.value||i.list.querySelector(".e-active"))&&(i.updateSelectionList(),i.selectedValueInfo&&i.viewPortInfo&&i.viewPortInfo.offsets.top?i.list.scrollTop=i.viewPortInfo.offsets.top:i.scrollBottom(!0,!0))},5)),$(i.targetElement(),{"aria-expanded":"true","aria-owns":i.element.id+"_popup","aria-controls":i.element.id}),i.getModuleName()!=="dropdownlist"&&i.list.classList.contains("e-nodata")&&($(i.targetElement(),{"aria-activedescendant":"no-record"}),i.popupContentElement.setAttribute("role","status"),i.popupContentElement.setAttribute("id","no-record")),i.inputElement.setAttribute("aria-expanded","true"),i.inputElement.setAttribute("aria-controls",i.element.id+"_popup");var w=i.isFiltering()?i.filterInput.parentElement:i.inputWrapper.container;R([w],[te.inputFocus]);var b={name:"FadeIn",duration:100};i.beforePopupOpen=!0;var I=i.popupObj,k={popup:I,event:t,cancel:!1,animation:b};i.trigger("open",k,function(D){D.cancel?(i.beforePopupOpen=!1,i.destroyPopup()):(u(i.inputWrapper)||R([i.inputWrapper.container],[te.iconAnimation]),i.renderReactTemplates(),u(i.popupObj)||i.popupObj.show(new ui(D.animation),i.zIndex===1e3?i.element:null))})}})},e.prototype.checkCollision=function(t){if(!T.isDevice||T.isDevice&&!(this.getModuleName()==="dropdownlist"||this.isDropDownClick)){var i=Or(t);i.length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px"),this.popupObj.resolveCollision()}},e.prototype.getOffsetValue=function(t){var i=getComputedStyle(t),r=parseInt(i.borderTopWidth,10),n=parseInt(i.borderBottomWidth,10);return this.setPopupPosition(r+n)},e.prototype.createPopup=function(t,i,r){var n=this;this.popupObj=new Yr(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:r,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){n.isDocumentClick||n.focusDropDown(),n.isReact&&n.clearTemplate(["headerTemplate","footerTemplate"]),n.isNotSearchList=!1,n.isDocumentClick=!1,n.destroyPopup(),n.isFiltering()&&n.actionCompleteData.list&&n.actionCompleteData.list[0]&&(n.isActive=!0,n.enableVirtualization?n.onActionComplete(n.ulElement,n.listData,null,!0):n.onActionComplete(n.actionCompleteData.ulElement,n.actionCompleteData.list,null,!0))},open:function(){S.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0;var s=n.actionCompleteData&&n.actionCompleteData.ulElement&&n.actionCompleteData.ulElement.querySelector("li"),o=n.list.querySelector("ul li");!u(n.ulElement)&&!u(n.ulElement.getElementsByClassName("e-item-focus")[0])?$(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(n.ulElement)&&!u(n.ulElement.getElementsByClassName("e-active")[0])&&$(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-active")[0].id}),n.isFiltering()&&n.itemTemplate&&n.element.tagName===n.getNgDirective()&&s&&o&&s.textContent!==o.textContent&&n.element.tagName!=="EJS-COMBOBOX"&&n.cloneElements(),n.isFilterLayout()&&(N([n.inputWrapper.container],[te.inputFocus]),n.isFilterFocus=!0,n.filterInput.focus(),n.inputWrapper.clearButton&&R([n.inputWrapper.clearButton],te.clearIconHide)),n.activeStateChange()},targetExitViewport:function(){T.isDevice||n.hidePopup()}})},e.prototype.isEmptyList=function(){return!u(this.liCollections)&&this.liCollections.length===0},e.prototype.getFocusElement=function(){},e.prototype.isFilterLayout=function(){return this.getModuleName()==="dropdownlist"&&this.allowFiltering},e.prototype.scrollHandler=function(){T.isDevice&&(this.getModuleName()==="dropdownlist"&&!this.isFilterLayout()||this.getModuleName()==="combobox"&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},e.prototype.isElementInViewport=function(t){var i=t.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=window.innerHeight&&i.right<=window.innerWidth},e.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-t+"px",this.list.style.height=window.innerHeight-t+"px";var i=this.filterInput.parentElement.querySelector("."+te.clearIcon);ne(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},e.prototype.setPopupPosition=function(t){var i,r=t,n=this.list.querySelector("."+te.focus)||this.selectedLI,s=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=s.getBoundingClientRect().height;this.listItemHeight=l;var h=this.list.offsetHeight/2,p=u(n)?s.offsetTop:n.offsetTop,c=o.offsetTop;if(c-h<p&&!u(this.liCollections)&&this.liCollections.length>0&&!u(n)){var d=this.list.offsetHeight/l,f=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(d-(this.liCollections.length-this.activeIndex))*l-r+f,this.list.scrollTop=n.offsetTop}else p>h&&!this.enableVirtualization?(i=h-l/2,this.list.scrollTop=p-h+l/2):i=p;var g=this.inputWrapper.container.offsetHeight;return i=i+l+r-(l-g)/2,-i},e.prototype.setWidth=function(){var t=Le(this.popupWidth);if(t.indexOf("%")>-1){var i=this.inputWrapper.container.offsetWidth*parseFloat(t)/100;t=i.toString()+"px"}if(T.isDevice&&t.indexOf("px")>-1&&!this.allowFiltering&&(this.getModuleName()==="dropdownlist"||this.isDropDownClick&&this.getModuleName()==="combobox")){var r=this.isEmptyList()?this.list:this.liCollections[0];t=parseInt(t,10)+(parseInt(getComputedStyle(r).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))*2+"px"}return t},e.prototype.scrollBottom=function(t,i,r){var n=this;if(i===void 0&&(i=!1),r===void 0&&(r=null),u(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+ee.li),!u(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!u(this.selectedLI)){this.isUpwardScrolling=!1;var s=this.list.querySelectorAll(".e-virtual-list").length,o=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,l=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop,h=this.list.offsetHeight,p=l-s*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop,c=this.list.scrollTop+p-h,d=!1;c=t?c+parseInt(getComputedStyle(this.list).paddingTop,10)*2:c+parseInt(getComputedStyle(this.list).paddingTop,10);var f=l-s*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop;if(f=this.fields.groupBy&&!u(this.fixedHeaderElement)?f-this.fixedHeaderElement.offsetHeight:f,this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0,d=this.isKeyBoardAction;else if(p>h||!(f>0&&this.list.offsetHeight>f)){var g=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,m=r=="pageDown"?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||i?this.isKeyBoardAction&&this.enableVirtualization&&o&&g===o&&r!="end"&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=c:(this.enableVirtualization&&(m=r=="pageDown"?this.getPageCount()+1:m),this.list.scrollTop+=this.selectedLI.offsetHeight*m),this.isPreventKeyAction=this.IsScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&r=="end"?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(r=="pageDown"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=c):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight:0,d=this.isKeyBoardAction}this.isKeyBoardAction=d,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&r=="down"&&setTimeout(function(){n.scrollStop(null,!0)},100)}},e.prototype.scrollTop=function(t){if(t===void 0&&(t=null),!u(this.selectedLI)){var i=this.list.querySelectorAll(".e-virtual-list").length,r=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop,n=r-i*this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;n=this.fields.groupBy&&!u(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var o=r-i*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop,l=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&n<=0;if(this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(n<0||l){var h=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,p=t=="pageUp"?this.getPageCount()-2:1;this.enableVirtualization&&(p=t=="pageUp"?this.getPageCount():p),this.enableVirtualization&&this.isKeyBoardAction&&s&&h===s&&t!="home"&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=this.selectedLI.offsetHeight*p,this.isPreventKeyAction=this.list.scrollTop!=0?this.isPreventKeyAction:!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&t=="home"?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(t=="pageUp"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+n)}else o>0&&this.list.offsetHeight>o||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!u(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},e.prototype.isEditTextBox=function(){return!1},e.prototype.isFiltering=function(){return this.allowFiltering},e.prototype.isPopupButton=function(){return!0},e.prototype.setScrollPosition=function(t){if(this.isPreventScrollAction=!0,u(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,t.action);break;default:this.isKeyBoardAction=t.action=="up"||t.action=="pageUp"||t.action=="open",this.scrollTop(t.action);break}this.isKeyBoardAction=!1},e.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},e.prototype.setEleWidth=function(t){u(t)||(typeof t=="number"?this.inputWrapper.container.style.width=Le(t):typeof t=="string"&&(this.inputWrapper.container.style.width=t.match(/px|%|em/)?t:Le(t)))},e.prototype.closePopup=function(t,i){var r=this,n=!u(this.filterInput)&&!u(this.filterInput.value)&&this.filterInput.value!=="";if(this.getModuleName()==="combobox"&&this.typedString,this.isTyped=!1,this.isVirtualTrackHeight=!1,!!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen)){this.keyboardEvent=null,S.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.getModuleName()==="dropdownlist"&&G.destroy({element:this.filterInput,floatLabelType:this.floatLabelType,properties:{placeholder:this.filterBarPlaceholder},buttons:this.clearIconElement},this.clearIconElement),this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var s=this.popupObj.getScrollableParent(this.inputWrapper.container),o=0,l=s;o<l.length;o++){var h=l[o];S.remove(h,"scroll",this.scrollHandler)}T.isDevice&&this.isFilterLayout()&&N([document.body,this.popupObj.element],te.popupFullScreen),this.isFilterLayout()&&(T.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&S.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(S.remove(this.backIconElement,"click",this.clickOnBackIcon),S.remove(this.clearIconElement,"click",this.clearText)),u(this.filterInput)||(S.remove(this.filterInput,"input",this.onInput),S.remove(this.filterInput,"keyup",this.onFilterUp),S.remove(this.filterInput,"keydown",this.onFilterDown),S.remove(this.filterInput,"blur",this.onBlurHandler),S.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput.removeAttribute("aria-disabled"),this.filterInput.removeAttribute("role"),this.filterInput.removeAttribute("autocomplete"),this.filterInput.removeAttribute("autocapitalize"),this.filterInput.removeAttribute("spellcheck")),this.filterInput=null),$(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(te.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(this.value==null||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,(this.getModuleName()==="autocomplete"||this.getModuleName()==="dropdownlist"&&!u(this.typedString)&&this.typedString!=""||this.getModuleName()==="combobox"&&this.allowFiltering&&!u(this.typedString)&&this.typedString!="")&&this.checkAndResetCache()):this.getModuleName()==="autocomplete"&&this.checkAndResetCache(),(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.skeletonCount!=0&&this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var p={name:"FadeOut",duration:100,delay:t||0},c=this.popupObj,d={popup:c,cancel:!1,animation:p,event:i||null};this.trigger("close",d,function(g){if(!u(r.popupObj)&&!u(r.popupObj.element.querySelector(".e-fixed-head"))){var m=r.popupObj.element.querySelector(".e-fixed-head");m.parentNode.removeChild(m),r.fixedHeaderElement=null}g.cancel||(r.getModuleName()==="autocomplete"&&r.rippleFun(),r.isPopupOpen?r.popupObj.hide(new ui(g.animation)):r.destroyPopup())}),T.isDevice&&!d.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup");var f;this.dataSource instanceof q?f=this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:f=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.enableVirtualization&&this.isFiltering()&&n&&this.totalItemCount!==f&&(this.updateInitialData(),this.checkAndResetCache())}},e.prototype.updateInitialData=function(){var t=this.selectData,i=this.renderItems(t,this.fields);this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.getModuleName()==="combobox"&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof q?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getModuleName()!=="autocomplete"&&this.totalItemCount!=0&&this.totalItemCount>this.itemCount*2&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=t,this.updateActionCompleteDataValues(i,t),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())},e.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.inputElement.removeAttribute("aria-controls"),this.popupObj&&(this.popupObj.destroy(),ne(this.popupObj.element))},e.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},e.prototype.render=function(){this.preselectedIndex=u(this.index)?null:this.index,this.element.tagName==="INPUT"?(this.inputElement=this.element,u(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),u(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var t=this.cssClass;!u(this.cssClass)&&this.cssClass!==""&&(t=this.cssClass.replace(/\s+/g," ").trim()),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=G.createInput({element:this.inputElement,buttons:this.isPopupButton()?[te.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:this.getModuleName()==="dropdownlist"?!0:this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true","aria-label":this.getModuleName(),tabindex:"-1",class:te.hiddenElement}}),mi([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=Le(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.floatLabelType!=="Never"&&G.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var i=this.element.getAttribute("id")?this.element.getAttribute("id"):oi("ej2_dropdownlist");if(this.element.id=i,this.hiddenElement.id=i+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.setAttribute("aria-label",this.getModuleName()):this.getModuleName()==="dropdownlist"&&($(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false")),$(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),this.value!==null||this.activeIndex!==null||this.text!==null)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.index!==null&&(this.activeIndex=this.index+this.skeletonCount)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if(this.element.tagName==="SELECT"&&this.element.options[0]){var r=this.element;this.value=this.allowObjectBinding?this.getDataByValue(r.options[r.selectedIndex].value):r.options[r.selectedIndex].value,this.text=u(this.value)?null:r.options[r.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(s){s.stopImmediatePropagation()},this.inputElement.onchange=function(s){s.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),u(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var n=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!u(this.element.id)&&this.element.id!==""&&!u(n)&&(n.id="label_"+this.element.id.replace(/ /g,"_"),$(this.inputElement,{"aria-labelledby":n.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},e.prototype.getListHeight=function(){var t=this.createElement("div",{className:"e-dropdownbase"}),i=this.createElement("li",{className:"e-list-item"}),r=Le(this.popupHeight);t.style.height=parseInt(r,10).toString()+"px",t.appendChild(i),document.body.appendChild(t),this.virtualListHeight=t.getBoundingClientRect().height;var n=Math.ceil(i.getBoundingClientRect().height);return t.remove(),n},e.prototype.setFooterTemplate=function(t){var i;this.footer?this.isReact&&typeof this.footerTemplate=="function"?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),R([this.footer],te.footer));var r=this.dropdownCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&r?i=We(ke(this.footerTemplate,document).innerHTML.trim()):i=We(this.footerTemplate);var n=i({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);n&&n.length>0&&be(n,this.footer),be([this.footer],t)},e.prototype.setHeaderTemplate=function(t){var i;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),R([this.header],te.header));var r=this.dropdownCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&r?i=We(ke(this.headerTemplate,document).innerHTML.trim()):i=We(this.headerTemplate);var n=i({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);n&&n.length&&be(n,this.header);var s=t.querySelector("div.e-content");t.insertBefore(this.header,s)},e.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},e.prototype.setOldText=function(t){this.text=t},e.prototype.setOldValue=function(t){this.value=t},e.prototype.refreshPopup=function(){!u(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&!(T.isDevice&&this.isFilterLayout())||this.getModuleName()==="autocomplete")&&(N([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},e.prototype.checkData=function(t){t.dataSource&&!u(Object.keys(t.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&t.dataSource instanceof q)&&(this.list&&!this.isReact?this.list.innerHTML="":this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var i=Object.keys(t).indexOf("value")!==-1&&u(t.value),r=Object.keys(t).indexOf("text")!==-1&&u(t.text);this.getModuleName()!=="autocomplete"&&this.allowFiltering&&(i||r)&&(this.itemData=null),this.allowFiltering&&t.dataSource&&!u(Object.keys(t.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&t.query&&!u(Object.keys(t.query))&&(this.actionCompleteData=this.getModuleName()==="combobox"?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},e.prototype.updateDataSource=function(t,i){(this.inputElement.value!==""||!u(t)&&(u(t.dataSource)||!(t.dataSource instanceof q)&&t.dataSource.length===0))&&this.clearAll(null,t),this.fields.groupBy&&t.fields&&!this.isGroupChecking&&this.list&&(S.remove(this.list,"scroll",this.setFloatingHeader),S.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!u(t)&&(u(t.dataSource)||!(t.dataSource instanceof q)&&t.dataSource.length===0))||t.dataSource instanceof q||!u(t)&&Array.isArray(t.dataSource)&&!u(i)&&Array.isArray(i.dataSource)&&t.dataSource.length!==i.dataSource.length)&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},e.prototype.checkCustomValue=function(){var t=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(t);var i=this.getItemData(),r=this.allowObjectBinding?this.itemData:i.value,n=u(r)?null:this.index;u(n)&&t==r?this.setProperties({text:i.text,value:r}):this.setProperties({text:i.text,index:n,value:r})},e.prototype.updateInputFields=function(){this.getModuleName()==="dropdownlist"&&G.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onPropertyChanged=function(t,i){var r=this;!u(t.dataSource)&&!this.isTouched&&u(t.value)&&u(t.index)&&!u(this.preselectedIndex)&&!u(this.index)&&(t.index=this.index),(!u(t.value)||!u(t.index))&&(this.isTouched=!0),this.getModuleName()==="dropdownlist"&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var n=function(c){switch(c){case"query":case"dataSource":s.getSkeletonCount(),s.checkAndResetCache();break;case"htmlAttributes":s.setHTMLAttributes();break;case"width":s.setEleWidth(t.width),G.calculateWidth(s.inputElement,s.inputWrapper.container);break;case"placeholder":G.setPlaceholder(t.placeholder,s.inputElement);break;case"filterBarPlaceholder":s.filterInput&&G.setPlaceholder(t.filterBarPlaceholder,s.filterInput);break;case"readonly":s.getModuleName()!=="dropdownlist"&&G.setReadonly(t.readonly,s.inputElement),s.setReadOnly();break;case"cssClass":s.setCssClass(t.cssClass,i.cssClass),G.calculateWidth(s.inputElement,s.inputWrapper.container);break;case"enableRtl":s.setEnableRtl();break;case"enabled":s.setEnable();break;case"text":if(s.fields.disabled&&(t.text=t.text&&!s.isDisabledItemByIndex(s.getIndexByValue(s.getValueByText(t.text)))?t.text:null),t.text===null){s.clearAll();break}if(s.enableVirtualization){s.updateValues(),s.updateInputFields(),s.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(s.list||(s.dataSource instanceof q&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender){var d=s.getElementByText(t.text);if(!s.checkValidLi(d))if(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100)s.setSelectionData(t.text,i.text,"text");else if(t.text&&s.dataSource instanceof q){var f=s.getItems().length,g=u(s.fields.text)?s.fields.value:s.fields.text;s.typedString="",s.dataSource.executeQuery(s.getQuery(s.query).where(new pe(g,"equal",t.text))).then(function(k){k.result.length>0?(r.addItem(k.result,f),r.updateValues()):r.setOldText(i.text)})}else s.getModuleName()==="autocomplete"?s.setInputValue(t,i):s.setOldText(i.text);s.updateInputFields()}break;case"value":if(s.fields.disabled&&(t.value=t.value!=null&&!s.isDisableItemValue(t.value)?t.value:null),t.value===null){s.clearAll();break}if(s.allowObjectBinding&&!u(t.value)&&!u(i.value)&&s.isObjectInArray(t.value,[i.value]))return{value:void 0};if(s.enableVirtualization){s.updateValues(),s.updateInputFields(),s.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),s.preventChange=s.isAngular&&s.preventChange?!s.preventChange:s.preventChange;break}if(s.notify("beforeValueChange",{newProp:t}),s.list||(s.dataSource instanceof q&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender){var m=s.allowObjectBinding&&!u(t.value)?j(s.fields.value?s.fields.value:"",t.value):t.value,v=s.getElementByValue(m);if(!s.checkValidLi(v))if(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100)s.setSelectionData(t.value,i.value,"value");else if(t.value&&s.dataSource instanceof q){var y=s.getItems().length,g=u(s.fields.value)?s.fields.text:s.fields.value;s.typedString="";var w=s.allowObjectBinding&&!u(t.value)?j(g,t.value):t.value;s.dataSource.executeQuery(s.getQuery(s.query).where(new pe(g,"equal",w))).then(function(D){D.result.length>0?(r.addItem(D.result,y),r.updateValues()):r.setOldValue(i.value)})}else s.getModuleName()==="autocomplete"?s.setInputValue(t,i):s.setOldValue(i.value);s.updateInputFields(),s.preventChange=s.isAngular&&s.preventChange?!s.preventChange:s.preventChange}break;case"index":if(s.fields.disabled&&(t.index=t.index!=null&&!s.isDisabledItemByIndex(t.index)?t.index:null),t.index===null){s.clearAll();break}if(s.list||(s.dataSource instanceof q&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender&&s.liCollections){var b=s.liCollections[t.index];s.checkValidLi(b)||(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100?s.setSelectionData(t.index,i.index,"index"):s.index=i.index),s.updateInputFields()}break;case"footerTemplate":s.popupObj&&s.setFooterTemplate(s.popupObj.element);break;case"headerTemplate":s.popupObj&&s.setHeaderTemplate(s.popupObj.element);break;case"valueTemplate":!u(s.itemData)&&s.valueTemplate!==null&&s.setValueTemplate();break;case"allowFiltering":s.allowFiltering&&(s.actionCompleteData={ulElement:s.ulElement,list:s.listData,isUpdated:!0},s.actionData=s.actionCompleteData,s.updateSelectElementData(s.allowFiltering));break;case"floatLabelType":G.removeFloating(s.inputWrapper),G.addFloating(s.inputElement,t.floatLabelType,s.placeholder,s.createElement),!u(s.inputWrapper.buttons[0])&&s.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&s.floatLabelType!=="Never"&&s.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":s.inputWrapper.clearButton||(G.setClearButton(t.showClearButton,s.inputElement,s.inputWrapper,null,s.createElement),s.bindClearEvent());break;default:{var I=s.getPropObject(c,t,i);a.prototype.onPropertyChanged.call(s,I.newProperty,I.oldProperty)}break}},s=this,o=0,l=Object.keys(t);o<l.length;o++){var h=l[o],p=n(h);if(typeof p=="object")return p.value}},e.prototype.checkValidLi=function(t){return this.isValidLI(t)?(this.setSelection(t,null),!0):!1},e.prototype.setSelectionData=function(t,i,r){var n=this,s;this.updateListValues=function(){if(r==="text")s=n.getElementByText(t),n.checkValidLi(s)||n.setOldText(i);else if(r==="value"){var o=n.fields.value?n.fields.value:"";n.allowObjectBinding&&!u(t)&&j(o,t),s=n.getElementByValue(t),n.checkValidLi(s)||n.setOldValue(i)}else r==="index"&&(s=n.liCollections[t],n.checkValidLi(s)||(n.index=i))}},e.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},e.prototype.setReadOnly=function(){this.readonly?R([this.inputWrapper.container],["e-readonly"]):N([this.inputWrapper.container],["e-readonly"])},e.prototype.setInputValue=function(t,i){},e.prototype.setCssClass=function(t,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(t)||(t=t.replace(/\s+/g," ").trim()),G.setCssClass(t,[this.inputWrapper.container],i),this.popupObj&&G.setCssClass(t,[this.popupObj.element],i)},e.prototype.getModuleName=function(){return"dropdownlist"},e.prototype.showPopup=function(t){if(this.enabled){if(this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.isReact&&this.getModuleName()==="combobox"&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof q&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(u(this.list)||!nt(this.list)&&(this.list.classList.contains(ee.noData)||this.list.querySelectorAll("."+ee.li).length<=0))&&(this.isReact&&this.isFiltering()&&this.itemTemplate!=null&&(this.isSecondClick=!1),this.renderList(t)),this.enableVirtualization&&this.listData&&this.listData.length&&(!u(this.value)&&(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(t),this.enableVirtualization&&!this.allowFiltering&&this.selectedValueInfo!=null&&this.selectedValueInfo.startIndex>0&&this.value!=null&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0})}},e.prototype.invokeRenderPopup=function(t){if(T.isDevice&&this.isFilterLayout()){var i=this;window.onpopstate=function(){i.hidePopup()},history.pushState({},"")}!u(this.list)&&(!u(this.list.children[0])||this.list.classList.contains(ee.noData))&&this.renderPopup(t)},e.prototype.renderHightSearch=function(){},e.prototype.hidePopup=function(t){if(this.isEscapeKey&&this.getModuleName()==="dropdownlist")if(u(this.inputElement)||G.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,u(this.index))this.resetSelection();else{var i=this.allowObjectBinding?j(this.fields.value?this.fields.value:"",this.value):this.value,r=this.findListElement(this.ulElement,"li","data-value",i);this.selectedLI=this.liCollections[this.index]||r,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&this.itemData!==null&&this.setValueTemplate())}this.isVirtualTrackHeight=!1,this.customFilterQuery=null,this.closePopup(0,t);var n=this.getItemData(),s=!u(this.selectedLI);s&&this.enableVirtualization&&this.selectedLI.classList&&(s=this.selectedLI.classList.contains("e-active")),this.inputElement&&this.inputElement.value.trim()===""&&!this.isInteracted&&(this.isSelectCustom||s&&this.inputElement.value!==n.text)&&(this.isSelectCustom=!1,this.clearAll(t))},e.prototype.focusIn=function(t){if(this.enabled&&!this.targetElement().classList.contains(te.disable)){var i=!1;this.preventFocus&&T.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,i=!0),i||this.targetElement().focus(),R([this.inputWrapper.container],[te.inputFocus]),this.onFocus(t),this.floatLabelType!=="Never"&&G.calculateWidth(this.inputElement,this.inputWrapper.container)}},e.prototype.focusOut=function(t){this.enabled&&(!this.enableVirtualization&&(this.getModuleName()==="combobox"||this.getModuleName()==="autocomplete")&&(this.isTyped=!0),this.hidePopup(t),this.targetElement()&&this.targetElement().blur(),N([this.inputWrapper.container],[te.inputFocus]),this.floatLabelType!=="Never"&&G.calculateWidth(this.inputElement,this.inputWrapper.container))},e.prototype.disableItem=function(t){if(this.fields.disabled){this.list||this.renderList();var i=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if(typeof t=="string")i=this.getIndexByValue(t);else if(typeof t=="object"){if(t instanceof HTMLLIElement){for(var r=0;r<this.liCollections.length;r++)if(this.liCollections[r]===t){i=this.getIndexByValue(t.getAttribute("data-value"));break}}else for(var n=JSON.parse(JSON.stringify(t))[this.fields.value],r=0;r<this.listData.length;r++)if(JSON.parse(JSON.stringify(this.listData[r]))[this.fields.value]===n){i=this.getIndexByValue(n);break}}else i=t;var s=i<this.liCollections.length&&i>-1;if(s&&!JSON.parse(JSON.stringify(this.listData[i]))[this.fields.disabled]){var o=this.liCollections[i];if(o){this.disableListItem(o);var l=JSON.parse(JSON.stringify(this.listData[i]));l[this.fields.disabled]=!0,this.listData[i]=l,this.dataSource=this.listData,o.classList.contains(te.focus)&&this.removeFocus(),o.classList.contains(te.selected)&&this.clear()}}}}},e.prototype.destroy=function(){if(this.isActive=!1,this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),vg(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&this.popupObj.hide(),this.unWireEvent(),this.list&&this.unWireListEvents(),!(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))){if(this.inputElement){for(var t=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<t.length;i++)this.inputElement.removeAttribute(t[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),G.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container&&this.inputWrapper.container.parentElement&&(this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?ne(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),ne(this.inputWrapper.container))),delete this.hiddenElement,this.filterInput=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.clearIconElement=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!u(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.inputElement&&!u(this.inputElement.onselect)&&(this.inputElement.onselect=null),G.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties,buttons:this.inputWrapper.container.querySelectorAll(".e-input-group-icon")[0]},this.clearButton),this.clearButton=null,this.inputElement=null,this.inputWrapper=null,a.prototype.destroy.call(this)}},e.prototype.getItems=function(){return this.list||(this.dataSource instanceof q&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?a.prototype.getItems.call(this):[]},e.prototype.getDataByValue=function(t){return a.prototype.getDataByValue.call(this,t)},e.prototype.clear=function(){this.value=null},Te([C(null)],e.prototype,"cssClass",void 0),Te([C("100%")],e.prototype,"width",void 0),Te([C(!0)],e.prototype,"enabled",void 0),Te([C(!1)],e.prototype,"enablePersistence",void 0),Te([C("300px")],e.prototype,"popupHeight",void 0),Te([C("100%")],e.prototype,"popupWidth",void 0),Te([C(null)],e.prototype,"placeholder",void 0),Te([C(null)],e.prototype,"filterBarPlaceholder",void 0),Te([C({})],e.prototype,"htmlAttributes",void 0),Te([C(null)],e.prototype,"query",void 0),Te([C(null)],e.prototype,"valueTemplate",void 0),Te([C(null)],e.prototype,"headerTemplate",void 0),Te([C(null)],e.prototype,"footerTemplate",void 0),Te([C(!1)],e.prototype,"allowFiltering",void 0),Te([C(!1)],e.prototype,"readonly",void 0),Te([C(!1)],e.prototype,"enableVirtualization",void 0),Te([C(null)],e.prototype,"text",void 0),Te([C(null)],e.prototype,"value",void 0),Te([C(!1)],e.prototype,"allowObjectBinding",void 0),Te([C(null)],e.prototype,"index",void 0),Te([C("Never")],e.prototype,"floatLabelType",void 0),Te([C(!1)],e.prototype,"showClearButton",void 0),Te([B()],e.prototype,"filtering",void 0),Te([B()],e.prototype,"change",void 0),Te([B()],e.prototype,"beforeOpen",void 0),Te([B()],e.prototype,"open",void 0),Te([B()],e.prototype,"close",void 0),Te([B()],e.prototype,"blur",void 0),Te([B()],e.prototype,"focus",void 0),e=Te([kt],e),e}(Mg);function ki(a,e,t,i,r,n){var s,o,l=e.parentElement;if(i==="vscroll"?(s=e.getBoundingClientRect().height,o=t.getBoundingClientRect().height):(s=e.getBoundingClientRect().width,o=t.getBoundingClientRect().width),s<o)return Ol(a,e,t,i,r);if(l){var h=l.getBoundingClientRect().width;return h<s&&i==="hscroll"?(o=h,e.style.maxWidth=h+"px",Ol(a,e,t,i,r)):t}else return t}function Ol(a,e,t,i,r,n){var s=a("div",{className:"e-menu-"+i});e.appendChild(s),s.appendChild(t),s.style.maxHeight=e.style.maxHeight,e.style.overflow="hidden";var o;return i==="vscroll"?(o=new bn({enableRtl:r},s),o.scrollStep=ke(".e-"+i+"-bar",e).offsetHeight/2):(o=new Na({enableRtl:r},s),o.scrollStep=ke(".e-"+i+"-bar",e).offsetWidth),s}function Dr(a,e,t){if(a){var i=ke(".e-menu-parent",e);i?(a.destroy(),e.parentElement.appendChild(i),ne(e)):(a.destroy(),ne(e))}}var Qs=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),De=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Xn="enter",ga="escape",Ge="e-focused",Zn="e-menu-header",Oe="e-selected",pn="e-separator",kr="uparrow",ri="downarrow",sr="leftarrow",Ri="rightarrow",Rr="home",es="end",ts="tab",Bl="e-caret",Ar="e-menu-item",ma="e-disabled",is="e-menu-hide",Pl="e-icons",va="e-rtl",Tr="e-menu-popup",Og="Template",Bg=function(a){Qs(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return De([C("id")],e.prototype,"itemId",void 0),De([C("parentId")],e.prototype,"parentId",void 0),De([C("text")],e.prototype,"text",void 0),De([C("iconCss")],e.prototype,"iconCss",void 0),De([C("url")],e.prototype,"url",void 0),De([C("separator")],e.prototype,"separator",void 0),De([C("items")],e.prototype,"children",void 0),e}(Ye),xs=function(a){Qs(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return De([C(null)],e.prototype,"iconCss",void 0),De([C("")],e.prototype,"id",void 0),De([C(!1)],e.prototype,"separator",void 0),De([br([],e)],e.prototype,"items",void 0),De([C("")],e.prototype,"text",void 0),De([C("")],e.prototype,"url",void 0),e}(Ye),Pg=function(a){Qs(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return De([C("SlideDown")],e.prototype,"effect",void 0),De([C(400)],e.prototype,"duration",void 0),De([C("ease")],e.prototype,"easing",void 0),e}(Ye),Ng=function(a){Qs(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.navIdx=[],r.animation=new ui({}),r.isTapHold=!1,r.tempItem=[],r.showSubMenuOn="Auto",r}return e.prototype.preRender=function(){if(!this.isMenu){var t=void 0;if(this.element.tagName==="EJS-CONTEXTMENU"){t=this.createElement("ul",{id:oi(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var i=j("ej2_instances",this.element);N([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=t,st("ej2_instances",i,this.element)}else{t=this.createElement("ul",{id:oi(this.getModuleName())}),be([].slice.call(this.element.cloneNode(!0).children),t);var r=this.element.nextElementSibling;r?this.element.parentElement.insertBefore(t,r):this.element.parentElement.appendChild(t),this.clonedElement=t}this.clonedElement.style.display="none"}if(this.element.tagName==="EJS-MENU"){for(var n=this.element,s=j("ej2_instances",n),t=this.createElement("ul"),o=this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"}),l=0,h=n.attributes.length;l<h;l++)t.setAttribute(n.attributes[l].nodeName,n.attributes[l].nodeValue);n.parentNode.insertBefore(o,n),ne(n),n=t,o.appendChild(n),st("ej2_instances",s,n),this.clonedElement=o,this.element=n,this.element.id||(this.element.id=oi(this.getModuleName()))}},e.prototype.render=function(){var t=this;this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();var i=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(function(){ki(t.createElement,i,t.element,"hscroll",t.enableRtl)})},e.prototype.initialize=function(){var t=this.getWrapper();t||(t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(t,this.element):document.body.appendChild(t)),this.cssClass&&R([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&t.classList.add(va),t.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(t)),this.defaultOption=this.showItemOnClick},e.prototype.renderItems=function(){if(!this.items.length){var t=et.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:t},!0),this.element.innerHTML=""}var i=this.createItems(this.items);if(be(Array.prototype.slice.call(i.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu){if(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling){var r=this.getWrapper();this.element.classList.contains("e-vertical")?ki(this.createElement,r,this.element,"vscroll",this.enableRtl):ki(this.createElement,r,this.element,"hscroll",this.enableRtl)}}else this.element.parentElement.setAttribute("role","dialog"),this.element.parentElement.setAttribute("aria-label","context menu")},e.prototype.wireEvents=function(){var t=this.getWrapper();if(this.target){for(var i=void 0,r=ht(this.target),n=0,s=r.length;n<s;n++)i=r[n],this.isMenu?S.add(i,"click",this.menuHeaderClickHandler,this):T.isIos?new Ha(i,{tapHold:this.touchHandler.bind(this)}):S.add(i,"contextmenu",this.cmenuHandler,this);if(this.targetElement=i,!this.isMenu){S.add(this.targetElement,"scroll",this.scrollHandler,this);for(var o=0,l=_o(this.targetElement);o<l.length;o++){var h=l[o];S.add(h,"scroll",this.scrollHandler,this)}}}T.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),S.add(this.isMenu?document:t,"mouseover",this.delegateMoverHandler,this),S.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),S.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(t),this.rippleFn=Pi(t,{selector:"."+Ar})},e.prototype.wireKeyboardEvent=function(t){var i={downarrow:ri,uparrow:kr,enter:Xn,leftarrow:sr,rightarrow:Ri,escape:ga};this.isMenu&&(i.home=Rr,i.end=es,i.tab=ts),new St(t,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:i})},e.prototype.mouseDownHandler=function(t){M(t.target,".e-"+this.getModuleName()+"-wrapper")!==this.getWrapper()&&!M(t.target,".e-"+this.getModuleName()+"-popup")&&this.closeMenu(this.isMenu?null:this.navIdx.length,t)},e.prototype.keyHandler=function(t){(t.keyCode===38||t.keyCode===40)&&t.target&&(t.target.classList.contains("e-contextmenu")||t.target.classList.contains("e-menu-item"))&&t.preventDefault()},e.prototype.keyBoardHandler=function(t){var i="",r=t.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(t.preventDefault(),this.enableScrolling&&t.keyCode===13&&r.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Ge,Oe],[M(r,".e-"+this.getModuleName()+"-wrapper")]),n)switch(t.action){case Ri:i=Ri,t.action=ri;break;case sr:i=sr,t.action=kr;break;case ri:i=ri,t.action=Ri;break;case kr:i=kr,t.action="";break}else if(this.enableRtl)switch(t.action){case sr:n=!0,i=sr,t.action=Ri;break;case Ri:n=!0,i=Ri,t.action=sr;break}switch(t.action){case ri:case kr:case es:case Rr:case ts:this.upDownKeyHandler(t);break;case Ri:this.rightEnterKeyHandler(t);break;case sr:this.leftEscKeyHandler(t);break;case Xn:this.hamburgerMode&&r.tagName==="SPAN"&&r.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):this.rightEnterKeyHandler(t);break;case ga:this.leftEscKeyHandler(t);break}n&&(t.action=i)},e.prototype.upDownKeyHandler=function(t){var i=this.getUlByNavIdx(),r=t.action===ri||t.action===Rr||t.action===ts?0:i.childElementCount-1,n=r,s=this.getLIByClass(i,Ge);s&&(t.action!==es&&t.action!==Rr&&(n=this.getIdx(i,s)),s.classList.remove(Ge),t.action!==es&&t.action!==Rr&&(t.action===ri?n++:n--,n===(t.action===ri?i.childElementCount:-1)&&(n=r)));var o=i.children[n];n=this.isValidLI(o,n,t.action),i.children[n].classList.add(Ge),i.children[n].focus()},e.prototype.isValidLI=function(t,i,r){var n=this.getUlByNavIdx(),s=r===ri||r===Rr||r===ts?0:n.childElementCount-1;return(t.classList.contains(pn)||t.classList.contains(ma)||t.classList.contains(is))&&(r===ri&&i===n.childElementCount-1||r===kr&&i===0?i=s:r===ri||r===Ri||r==="tab"&&t.classList.contains(pn)?i++:i--),t=n.children[i],t&&(t.classList.contains(pn)||t.classList.contains(ma)||t.classList.contains(is))&&(i=this.isValidLI(t,i,r)),i},e.prototype.getUlByNavIdx=function(t){var i=this;if(t===void 0&&(t=this.navIdx.length),this.isMenu){var r=[this.getWrapper()].concat([].slice.call(ht("."+Tr)))[t],n=[],s=ht("."+Tr);return s.forEach(function(o){(i.element.id===o.id.split("-")[2]||o.id.split("-")[2]+"-"+o.id.split("-")[3])&&n.push(o)}),r=[this.getWrapper()].concat([].slice.call(n))[t],u(r)?null:ke(".e-menu-parent",r)}else return!document.body.contains(this.element)&&t===0?null:this.getWrapper().children[t]},e.prototype.rightEnterKeyHandler=function(t){var i,r=this.getUlByNavIdx(),n=this.getLIByClass(r,Ge);if(n){var s=this.getIdx(r,n),o=this.navIdx.concat(s),l=this.getItem(o);if(l.items.length)this.navIdx.push(s),this.keyType="right",this.action=t.action,this.openMenu(n,l,-1,-1,t);else if(t.action===Xn){this.isMenu&&this.navIdx.length===0?this.removeLIStateByClass([Oe],[this.getWrapper()]):n.classList.remove(Ge),n.classList.add(Oe),i={element:n,item:l,event:t},this.trigger("select",i);var h=n.querySelector(".e-menu-url");if(l.url&&h)switch(h.getAttribute("target")){case"_blank":window.open(l.url,"_blank");break;case"_parent":window.parent.location.href=l.url;break;default:window.location.href=l.url}this.closeMenu(null,t);var p=this.getLIByClass(this.getUlByNavIdx(),Oe);p&&(p.classList.add(Ge),p.focus())}}},e.prototype.leftEscKeyHandler=function(t){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,t)):t.action===ga&&this.closeMenu(null,t)},e.prototype.scrollHandler=function(t){this.closeMenu(null,t)},e.prototype.touchHandler=function(t){this.isTapHold=!0,this.cmenuHandler(t.originalEvent)},e.prototype.cmenuHandler=function(t){t.preventDefault(),this.currentTarget=t.target,this.isCMenu=!0,this.pageX=t.changedTouches?t.changedTouches[0].pageX+1:t.pageX+1,this.pageY=t.changedTouches?t.changedTouches[0].pageY+1:t.pageY+1,this.closeMenu(null,t),this.isCMenu&&(this.canOpen(t.target)&&this.openMenu(null,null,this.pageY,this.pageX,t),this.isCMenu=!1)},e.prototype.closeMenu=function(t,i,r){var n=this;if(t===void 0&&(t=0),i===void 0&&(i=null),this.isMenuVisible()){var s=void 0,o,l=this.getWrapper(),h=void 0,p,c=this.getPopups(),d=!1,f=this.isMenu?c.length+1:l.childElementCount,g=this.isMenu&&f!==1?ke(".e-ul",c[f-2]):ht(".e-menu-parent",l)[f-1];if(this.isMenu&&g.classList.contains("e-menu")&&(s=this.getLIByClass(g,Oe),s&&s.classList.remove(Oe),d=!0),!d){var m=i&&i.target&&this.getLI(i.target);m?this.cli=m:this.cli=g.children[0],o=this.navIdx.length?this.getItem(this.navIdx):null,p=o?o.items:this.items,h={element:g,parentItem:o,items:p,event:i,cancel:!1,isFocused:!0},this.trigger("beforeClose",h,function(v){var y,w,b="",I,k=!v.cancel;(k||n.isCMenu)&&(n.isMenu?(y=M(g,"."+Tr),n.hamburgerMode&&(y.parentElement.style.minHeight="",M(g,".e-menu-item").setAttribute("aria-expanded","false")),n.unWireKeyboardEvent(y),Dr(xi(y.children[0],bn),y.children[0]),I=xi(y,Yr),I.hide(),b=y.id,I.destroy(),ne(y)):(n.isContextMenuClosed=!1,n.toggleAnimation(g,!1)),w={element:g,parentItem:o,items:p},n.trigger("onClose",w),n.navIdx.pop(),n.navIdx.length===0&&i&&i.type==="keyup"&&(n.showSubMenu=!1),n.isMenu||(S.remove(g,"keydown",n.keyHandler),n.keyType==="right"&&(n.keyType=""))),n.updateReactTemplate();var D,W,Z,J=n.getWrapper()&&n.getUlByNavIdx();if(n.isCMenu&&(n.canOpen(i.target)&&n.openMenu(null,null,n.pageY,n.pageX,i),n.isCMenu=!1),n.isMenu&&J&&b.length){var X=RegExp;D=new X("(.*)-ej2menu-"+n.element.id+"-popup").exec(b)[1],W=J.querySelector('[id="'+D+'"]'),Z=m&&J.querySelector('[id="'+m.id+'"]')}else J&&(W=J.querySelector(".e-menu-item.e-selected"),Z=m&&J.querySelector('[id="'+m.id+'"]'));var L=m&&m.querySelectorAll(".e-menu-item");if(k&&n.hamburgerMode&&t&&!L.length)n.afterCloseMenu(i);else if(k&&!n.hamburgerMode&&W&&!Z&&n.keyType!=="left"&&(n.navIdx.length||!n.isMenu&&n.navIdx.length===0)){var O=i&&(i.target.classList.contains("e-vscroll")||i.target.classList.contains("e-scroll-nav"))?M(i.target,".e-menu-wrapper"):null;O?(O=O.querySelector(".e-menu-item"),(n.showItemOnClick||O&&n.getIndex(O.id,!0).length<=n.navIdx.length)&&n.closeMenu(n.navIdx[n.navIdx.length-1],i,!0)):i&&i.target.classList.contains("e-nav-arrow")||n.closeMenu(n.navIdx[n.navIdx.length-1],i)}else if(k&&!r&&!t&&(n.hamburgerMode&&n.navIdx.length||n.navIdx.length===1&&m&&J!==m.parentElement))n.closeMenu(null,i);else if(k&&u(t)&&n.navIdx.length)n.closeMenu(null,i);else if(k&&!n.isMenu&&!t&&n.navIdx.length===0&&!n.isMenusClosed&&!n.isCmenuHover)n.isMenusClosed=!0,n.closeMenu(0,i);else if(k&&n.isMenu&&i&&i.target&&n.navIdx.length!==0&&M(i.target,".e-menu-parent.e-control"))n.closeMenu(0,i);else if(k&&!n.isMenu&&ht(".e-menu-parent",l)[t-1]&&i.which===3)n.closeMenu(null,i);else{if(k&&(n.keyType==="right"||n.keyType==="click"))n.afterCloseMenu(i);else{var F=n.getUlByNavIdx(),V=n.getLIByClass(F,Oe);if(V&&(V.setAttribute("aria-expanded","false"),V.classList.remove(Oe),(v.isFocused&&m||n.keyType==="left")&&(V.classList.add(Ge),(!i.target||!i.target.classList.contains("e-edit-template"))&&V.focus())),!k&&n.hamburgerMode&&m&&m.getAttribute("aria-expanded")==="false"&&m.getAttribute("aria-haspopup")==="true"){M(m,".e-menu-parent.e-control")?n.navIdx=[]:n.navIdx.pop(),n.navIdx.push(n.cliIdx);var K=n.getItem(n.navIdx);m.setAttribute("aria-expanded","true"),n.openMenu(m,K,-1,-1,i)}}n.navIdx.length<1&&(n.showSubMenuOn==="Hover"||n.showSubMenuOn==="Click")&&(n.showItemOnClick=n.defaultOption,n.showSubMenuOn="Auto")}n.removeStateWrapper()})}}},e.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&this.navIdx.length===0){var t=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=t,this.renderReactTemplates()}},e.prototype.getMenuItemModel=function(t,i){if(u(t))return null;u(i)&&(i=0);var r=this.getFields(i);return{text:t[r.text],id:t[r.id],items:t[r.child],separator:t[r.separator],iconCss:t[r.iconCss],url:t[r.url]}},e.prototype.getPopups=function(){var t=this,i=[];return[].slice.call(document.querySelectorAll("."+Tr)).forEach(function(r){!u(r.querySelector("."+Ar))&&t.getIndex(r.querySelector("."+Ar).id,!0).length&&i.push(r)}),i},e.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&tu(this.element).valueOf()},e.prototype.canOpen=function(t){var i=!0;if(this.filter){i=!1;for(var r=this.filter.split(" "),n=0,s=r.length;n<s;n++)if(M(t,"."+r[n])){i=!0;break}}return i},e.prototype.openMenu=function(t,i,r,n,s,o){var l=this;r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=null),o===void 0&&(o=this.targetElement);var h=this.getWrapper();this.lItem=t;var p=this.element.id!==""?this.element.id:"menu";if(this.isMenusClosed=!1,u(r)&&(r=-1),u(n)&&(n=-1),t){if(this.uList=this.createItems(i[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&T.isDevice){h.lastChild.style.display="none";var c={text:i[this.getField("text")].toString(),iconCss:Pl+" e-previous"},d=new xs(this.items[0],"items",c,!0),f=this.createItems([d]).children[0];f.classList.add(Zn),this.uList.insertBefore(f,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+Tr,id:t.id+"-ej2menu-"+p+"-popup"}),this.hamburgerMode?(r=t.offsetHeight,t.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||this.navIdx.length!==1,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,t,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,t):(this.cssClass&&R([this.popupWrapper],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.popupObj.hide()),!this.hamburgerMode&&!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){l.triggerBeforeOpen(t,l.uList,i,s,0,0,"menu")},this.hoverDelay)):this.triggerBeforeOpen(t,this.uList,i,s,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,h.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){l.triggerBeforeOpen(t,l.uList,i,s,r,n,"none")},this.hoverDelay)):this.triggerBeforeOpen(t,this.uList,i,s,r,n,"none"))}else if(this.uList=this.element,this.uList.style.zIndex=Jh(o||this.element).toString(),u(s)){var g=document.createEvent("MouseEvents");g.initEvent("click",!0,!1);var m=this.copyObject(g,{});m.target=m.srcElement=o,m.currentTarget=o,this.triggerBeforeOpen(t,this.uList,i,m,r,n,"none")}else this.triggerBeforeOpen(t,this.uList,i,s,r,n,"none")},e.prototype.copyObject=function(t,i){for(var r in t)i[""+r]=t[""+r];return i},e.prototype.calculateIndentSize=function(t,i){var r=getComputedStyle(i),n=parseInt(r.textIndent,10);this.navIdx.length<2&&!i.classList.contains("e-blankicon")?n*=2:n+=n/4,t.style.textIndent=n+"px";var s=t.querySelectorAll(".e-blankicon");if(s&&s.length)for(var o=t.querySelector(".e-menu-icon"),l=getComputedStyle(o),h=parseInt(l.marginRight,10)+o.offsetWidth+n,p=0;p<s.length;p++)s[p].style.textIndent=h+"px"},e.prototype.generatePopup=function(t,i,r,n){var s=this,o=new Yr(t,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:r,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:i,open:function(){var l=ke(".e-menu-vscroll",o.element);l&&(l.style.height="inherit",l.style.maxHeight="");var h=ke(".e-ul",o.element);o.element.style.maxHeight="",h.focus(),s.triggerOpen(h)}});return o},e.prototype.createHeaderContainer=function(t){t=t||this.getWrapper();var i=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),r=this.enableHtmlSanitizer?$r.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:r}),s=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});i.appendChild(n),i.appendChild(s),t.insertBefore(i,this.element)},e.prototype.openHamburgerMenu=function(t){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,t,0,0,"hamburger")},e.prototype.closeHamburgerMenu=function(t){var i=this,r={element:this.element,parentItem:null,event:t,items:this.items,cancel:!1};this.trigger("beforeClose",r,function(n){n.cancel||(i.closeMenu(null,t),i.element.classList.add("e-hide-menu"),i.trigger("onClose",{element:i.element,parentItem:null,items:i.items}))})},e.prototype.callFit=function(t,i,r,n,s){return wp(t,null,{X:i,Y:r},{top:n,left:s})},e.prototype.triggerBeforeOpen=function(t,i,r,n,s,o,l){var h=this,p=t?r[this.getField("children",this.navIdx.length-1)]:this.items,c={element:i,items:p,parentItem:r,event:n,cancel:!1,top:s,left:o,showSubMenuOn:"Auto"},d=l;this.trigger("beforeOpen",c,function(f){switch(d){case"menu":h.hamburgerMode||(f.showSubMenuOn!=="Auto"&&(h.showItemOnClick=!h.defaultOption,h.showSubMenuOn=f.showSubMenuOn),h.top=f.top,h.left=f.left),h.popupWrapper.style.display="block",h.hamburgerMode||(h.popupWrapper.style.maxHeight=h.popupWrapper.getBoundingClientRect().height+"px",h.enableScrolling&&ki(h.createElement,h.popupWrapper,h.uList,"vscroll",h.enableRtl),h.checkScrollOffset(n)),!h.hamburgerMode&&!h.left&&!h.top?(h.popupObj.refreshPosition(h.lItem,!0),h.left=parseInt(h.popupWrapper.style.left,10),h.top=parseInt(h.popupWrapper.style.top,10),h.enableRtl&&(h.left=h.isNestedOrVertical?h.left-h.popupWrapper.offsetWidth-h.lItem.parentElement.offsetWidth+2:h.left-h.popupWrapper.offsetWidth+h.lItem.offsetWidth),h.template&&(h.isReact||h.isAngular)?requestAnimationFrame(function(){h.collision(),h.popupWrapper.style.display=""}):(h.collision(),h.popupWrapper.style.display="")):(h.popupObj.collision={X:"none",Y:"none"},h.popupWrapper.style.display="");break;case"none":h.top=f.top,h.left=f.left,h.isContextMenuClosed=!0;break;case"hamburger":f.cancel||(h.element.classList.remove("e-hide-menu"),h.triggerOpen(h.element));break}if(d!=="hamburger")if(f.cancel)h.isMenu?(h.popupObj.destroy(),ne(h.popupWrapper)):i.className.indexOf("e-ul")>-1&&ne(i),h.navIdx.pop();else if(h.isMenu)if(h.hamburgerMode)h.popupWrapper.style.top=h.top+"px",h.popupWrapper.style.left="0px",h.toggleAnimation(h.popupWrapper);else{h.setBlankIconStyle(h.popupWrapper),h.wireKeyboardEvent(h.popupWrapper),Pi(h.popupWrapper,{selector:"."+Ar}),h.popupWrapper.style.left=h.left+"px",h.popupWrapper.style.top=h.top+"px";var g=h.animationSettings.effect!=="None"?{name:h.animationSettings.effect,duration:h.animationSettings.duration,timingFunction:h.animationSettings.easing}:null;h.popupObj.show(g,h.lItem)}else h.setBlankIconStyle(h.uList),h.setPosition(h.lItem,h.uList,h.top,h.left),h.toggleAnimation(h.uList);if(h.keyType==="right"){var m=h.getUlByNavIdx();if(t.classList.remove(Ge),h.isMenu&&h.navIdx.length===1&&h.removeLIStateByClass([Oe],[h.getWrapper()]),t.classList.add(Oe),h.action===Xn){var v={element:t,item:r,event:n};h.trigger("select",v)}t.focus(),m=h.getUlByNavIdx();var y=h.isValidLI(m.children[0],0,h.action);m.children[y].classList.add(Ge),m.children[y].focus()}})},e.prototype.collision=function(){var t;if(t=Or(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(t.indexOf("right")>-1||t.indexOf("left")>-1)){this.popupObj.collision.X="none";var i=M(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?ia(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-i+2}t=Or(this.popupWrapper,null,this.left,this.top),(t.indexOf("left")>-1||t.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"},e.prototype.setBlankIconStyle=function(t){var i=[].slice.call(t.getElementsByClassName("e-blankicon"));if(i.length){var r=t.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)");if(r){var n=r.querySelector(".e-menu-icon");if(n){var s=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},o=getComputedStyle(n),l=parseInt(o.fontSize,10);parseInt(o.width,10)&&parseInt(o.width,10)>l&&(l=parseInt(o.width,10));var h=l+parseInt(o[s.margin],10)+parseInt(getComputedStyle(r)[s.padding],10)+"px";i.forEach(function(p){p.style[s.padding]=h})}}}},e.prototype.checkScrollOffset=function(t){var i=this.getWrapper();if(i.children[0].classList.contains("e-menu-hscroll")&&this.navIdx.length===1){var r=u(t)?this.element:M(t.target,"."+Ar),n=ke(".e-hscroll-bar",i);n.scrollLeft>r.offsetLeft&&(n.scrollLeft-=n.scrollLeft-r.offsetLeft);var s=n.scrollLeft+n.offsetWidth,o=r.offsetLeft+r.offsetWidth;s<o&&(n.scrollLeft+=o-s)}},e.prototype.setPosition=function(t,i,r,n){var s="px";if(this.toggleVisiblity(i),i===this.element||n>-1&&r>-1){var o=Or(i,null,n,r);if(o.indexOf("right")>-1&&(n=n-i.offsetWidth),o.indexOf("bottom")>-1){var l=this.callFit(i,!1,!0,r,n);if(r=l.top-20,r<0){var h=pageYOffset+document.documentElement.clientHeight-i.getBoundingClientRect().height;h>-1&&(r=h)}}if(o=Or(i,null,n,r),o.indexOf("left")>-1){var l=this.callFit(i,!0,!1,r,n);n=l.left}}else if(T.isDevice)r=Number(this.element.style.top.replace(s,"")),n=Number(this.element.style.left.replace(s,""));else{var p=this.enableRtl?"left":"right",l=ia(t,p,"top");r=l.top,n=l.left;var o=Or(i,null,this.enableRtl?n-i.offsetWidth:n,r),c=o.indexOf("left")>-1||o.indexOf("right")>-1;c&&(l=ia(t,this.enableRtl?"right":"left","top"),n=l.left),(this.enableRtl||c)&&(n=this.enableRtl&&c?n:n-i.offsetWidth),o.indexOf("bottom")>-1&&(l=this.callFit(i,!1,!0,r,n),r=l.top)}this.toggleVisiblity(i,!1),i.style.top=r+s,i.style.left=n+s},e.prototype.toggleVisiblity=function(t,i){i===void 0&&(i=!0),t.style.visibility=i?"hidden":"",t.style.display=i?"block":"none"},e.prototype.createItems=function(t){var i=this,r=this.navIdx?this.navIdx.length:0,n=this.getFields(r),s=this.hasField(t,this.getField("iconCss",r)),o={showIcon:s,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(h){h.curData[h.fields[n.id]]||(h.curData[h.fields[n.id]]=oi("menuitem")),u(h.curData.htmlAttributes)&&(h.curData.htmlAttributes={}),T.isIE?(h.curData.htmlAttributes.role="menuitem",h.curData.htmlAttributes.tabindex="-1"):Object.assign(h.curData.htmlAttributes,{role:"menuitem",tabindex:"-1"}),i.isMenu&&!h.curData[i.getField("separator",r)]&&(h.curData.htmlAttributes["aria-label"]=h.curData[h.fields.text]?h.curData[h.fields.text]:h.curData[h.fields.id]),h.curData[h.fields[n.iconCss]]===""&&(h.curData[h.fields[n.iconCss]]=null)},itemCreated:function(h){if(h.curData[i.getField("separator",r)]&&(h.item.classList.add(pn),h.item.setAttribute("role","separator")),s&&!h.curData[h.fields.iconCss]&&!h.curData[i.getField("separator",r)]&&h.item.classList.add("e-blankicon"),h.curData[h.fields.child]&&h.curData[h.fields.child].length){var p=i.createElement("span",{className:Pl+" "+Bl});h.item.appendChild(p),h.item.setAttribute("aria-haspopup","true"),h.item.setAttribute("aria-expanded","false"),h.item.classList.add("e-menu-caret-icon")}i.isMenu&&i.template&&(h.item.setAttribute("id",h.curData[h.fields.id].toString()),h.item.removeAttribute("data-uid"),h.item.classList.contains("e-level-1")&&h.item.classList.remove("e-level-1"),h.item.classList.contains("e-has-child")&&h.item.classList.remove("e-has-child"),h.item.removeAttribute("aria-level"));var c={item:h.curData,element:h.item};i.trigger("beforeItemRender",c)}};this.setProperties({items:this.items},!0),this.isMenu&&(o.templateID=this.element.id+Og);var l=et.createList(this.createElement,t,o,!this.template,this);return l.setAttribute("tabindex","0"),this.isMenu?l.setAttribute("role","menu"):l.setAttribute("role","menubar"),l},e.prototype.moverHandler=function(t){var i=t.target;this.liTrgt=i,this.isMenu||(this.isCmenuHover=!0);var r=this.getLI(i),n=r?M(r,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),s=this.getWrapper(),o=new RegExp("-ej2menu-(.*)-popup"),l,h=!1;if(n){if(n.id!==""?l=o.exec(n.id)[1]:l=n.querySelector("ul").id,l!==this.element.id)if(this.removeLIStateByClass([Ge,Oe],[this.getWrapper()]),this.navIdx.length)h=!0;else return;r&&M(r,".e-"+this.getModuleName()+"-wrapper")&&!h?(this.removeLIStateByClass([Ge],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([Ge],this.isMenu?[s].concat(this.getPopups()):[s]),r.classList.add(Ge),this.showItemOnClick||this.clickHandler(t)):this.isMenu&&this.showItemOnClick&&!h&&this.removeLIStateByClass([Ge],[n].concat(this.getPopups())),this.isMenu&&(!this.showItemOnClick&&i.parentElement!==n&&!M(i,".e-"+this.getModuleName()+"-popup")&&(!r||r&&!this.getIndex(r.id,!0).length)&&this.showSubMenuOn!=="Hover"?(this.removeLIStateByClass([Ge],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t))):h&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t)),this.isClosed||this.removeStateWrapper(),this.isClosed=!1),this.isMenu||(this.isCmenuHover=!1)}},e.prototype.removeStateWrapper=function(){if(this.liTrgt){var t=M(this.liTrgt,".e-menu-vscroll");this.liTrgt.tagName==="DIV"&&t&&this.removeLIStateByClass([Ge,Oe],[t])}},e.prototype.removeLIStateByClass=function(t,i){for(var r,n=function(o){t.forEach(function(l){r=ke("."+l,i[o]),r&&r.classList.remove(l)})},s=0;s<i.length;s++)n(s)},e.prototype.getField=function(t,i){i===void 0&&(i=0);var r=this.fields[""+t];return typeof r=="string"?r:r[i]?r[i].toString():r[r.length-1].toString()},e.prototype.getFields=function(t){return t===void 0&&(t=0),{id:this.getField("itemId",t),iconCss:this.getField("iconCss",t),text:this.getField("text",t),url:this.getField("url",t),child:this.getField("children",t),separator:this.getField("separator",t)}},e.prototype.hasField=function(t,i){for(var r=0,n=t.length;r<n;r++)if(t[r][""+i])return!0;return!1},e.prototype.menuHeaderClickHandler=function(t){var i=M(t.target,".e-menu-wrapper");i&&i.querySelector("ul.e-menu-parent").id!==this.element.id||(this.element.className.indexOf("e-hide-menu")>-1?this.openHamburgerMenu(t):this.closeHamburgerMenu(t))},e.prototype.clickHandler=function(t){this.isTapHold=this.isTapHold?!1:this.isTapHold;var i=this.getWrapper(),r=t.target,n=this.cli=this.getLI(r),s=new RegExp("-ej2menu-(.*)-popup"),o=n?M(n,".e-"+this.getModuleName()+"-wrapper"):null,l=n&&o&&(this.isMenu?this.getIndex(n.id,!0).length>0:i.firstElementChild.id===o.firstElementChild.id);if(T.isDevice&&this.isMenu&&(this.removeLIStateByClass([Ge],[i].concat(this.getPopups())),this.mouseDownHandler(t)),n&&o&&this.isMenu){var h=o.id?s.exec(o.id)[1]:o.querySelector(".e-menu-parent").id;if(this.element.id!==h)return}if(l&&t.type==="click"&&!n.classList.contains(Zn)){this.setLISelected(n);var p=this.getIndex(n.id,!0),c=this.getItem(p),d={element:n,item:c,event:t};this.trigger("select",d)}if(l&&(t.type==="mouseover"||T.isDevice||this.showItemOnClick)){var f=void 0;if(n.classList.contains(Zn)){f=i.children[this.navIdx.length-1],this.toggleAnimation(f);var g=this.getLIByClass(f,Oe);g&&g.classList.remove(Oe),ne(n.parentNode),this.navIdx.pop()}else if(!n.classList.contains(pn)){this.showSubMenu=!0;var m=n.parentNode;if(u(m))return;if(this.cliIdx=this.getIdx(m,n),this.isMenu||!T.isDevice){var v=this.isMenu?Array.prototype.indexOf.call([i].concat(this.getPopups()),M(m,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(i,m);if(this.navIdx[v]===this.cliIdx&&(this.showSubMenu=!1),v!==this.navIdx.length&&(t.type!=="mouseover"||this.showSubMenu)){var g=this.getLIByClass(m,Oe);g&&g.classList.remove(Oe),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&(this.setLISelected(n),this.isMenu||(this.isCmenuHover=!0)),this.closeMenu(v+1,t),this.showItemOnClick&&(this.setLISelected(n),this.isMenu||(this.isCmenuHover=!1))}}this.isClosed||this.afterCloseMenu(t),this.isClosed=!1}}else if(this.isMenu&&r.tagName==="DIV"&&this.navIdx.length&&M(r,".e-menu-vscroll")){var y=M(r,"."+Tr),w=Array.prototype.indexOf.call(this.getPopups(),y)+1;w<this.navIdx.length&&(this.closeMenu(w+1,t),y&&this.removeLIStateByClass([Ge,Oe],[y]))}else this.isMenu&&this.hamburgerMode&&r.tagName==="SPAN"&&r.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):(r.tagName!=="UL"||(this.isMenu?r.parentElement.classList.contains("e-menu-wrapper")&&!this.getIndex(r.querySelector("."+Ar).id,!0).length:r.parentElement!==i))&&(n||this.removeLIStateByClass([Oe],[i]),(!n||!n.querySelector("."+Bl))&&(navigator.platform.toUpperCase().indexOf("MAC")<0||navigator.platform.toUpperCase().indexOf("MAC")>=0&&!t.ctrlKey)&&this.closeMenu(null,t))},e.prototype.afterCloseMenu=function(t){if(!u(t)){var i;if(this.showSubMenu){this.showItemOnClick&&this.navIdx.length===0?i=M(t.target,".e-menu-parent.e-control"):i=M(this.element,".e-menu-parent.e-control");var r=this.navIdx.concat(this.cliIdx),n=this.getItem(r);if(n&&n[this.getField("children",r.length-1)]&&n[this.getField("children",r.length-1)].length?((t.type==="mouseover"||T.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&i||this.hamburgerMode&&this.cli.getAttribute("aria-expanded")==="false")&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,n,null,null,t))):t.type!=="mouseover"&&this.closeMenu(null,t),!i){var s=this.getUlByNavIdx(),o=this.getLIByClass(s,Oe);o&&(o.setAttribute("aria-expanded","false"),o.classList.remove(Oe))}}this.keyType=""}},e.prototype.setLISelected=function(t){var i=this.getLIByClass(t.parentElement,Oe);i&&i.classList.remove(Oe),this.isMenu||t.classList.remove(Ge),t.classList.add(Oe)},e.prototype.getLIByClass=function(t,i){if(t&&t.children){for(var r=0,n=t.children.length;r<n;r++)if(t.children[r].classList.contains(i))return t.children[r]}return null},e.prototype.getItemIndex=function(t,i){var r;typeof t=="string"?r=t:r=t.id;var n=i!==!1,s=this.getIndex(r,n);return s},e.prototype.setItem=function(t,i,r){var n;r?n=i||t.id:n=i||t.text;var s=this.getIndex(n,r),o=this.getItem(s);Object.assign(o,t)},e.prototype.getItem=function(t){t=t.slice();var i=t.pop(),r=this.getItems(t);return r[i]},e.prototype.getItems=function(t){for(var i=this.items,r=0;r<t.length;r++)i=i[t[r]][this.getField("children",r)];return i},e.prototype.setItems=function(t,i){var r=this.getItems(i);r.splice(0,r.length);for(var n=0;n<t.length;n++)r.splice(n,0,t[n])},e.prototype.getIdx=function(t,i,r){r===void 0&&(r=!0);var n=Array.prototype.indexOf.call(t.children,i);return r&&t.children[0].classList.contains(Zn)&&n--,n},e.prototype.getLI=function(t){return t.tagName==="LI"&&t.classList.contains("e-menu-item")?t:M(t,"li.e-menu-item")},e.prototype.updateItemsByNavIdx=function(){for(var t=this.items,i=0,r=0;r<this.navIdx.length&&(t=t[r].items,!!t);r++){i++;var n=this.getUlByNavIdx(i);if(!n)break;this.updateItem(n,t)}},e.prototype.removeChildElement=function(t){for(;t.firstElementChild;)t.removeChild(t.firstElementChild);return t},e.prototype.onPropertyChanged=function(t,i){for(var r=this,n=this.getWrapper(),s=function(c){switch(c){case"cssClass":i.cssClass&&N([n],i.cssClass.split(" ")),t.cssClass&&R([n],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":o.enableRtl?n.classList.add(va):n.classList.remove(va);break;case"showItemOnClick":o.unWireEvents(),o.showItemOnClick=t.showItemOnClick,o.wireEvents();break;case"enableScrolling":if(t.enableScrolling){var d;o.element.classList.contains("e-vertical")?ki(o.createElement,n,o.element,"vscroll",o.enableRtl):ki(o.createElement,n,o.element,"hscroll",o.enableRtl),o.getPopups().forEach(function(I){d=ke(".e-ul",I),ki(r.createElement,I,d,"vscroll",r.enableRtl)})}else{var f=n.children[0];o.element.classList.contains("e-vertical")?Dr(xi(f,bn),f):Dr(xi(f,Na),f),n.style.overflow="",n.appendChild(o.element),o.getPopups().forEach(function(I){f=I.children[0],Dr(xi(f,bn),f),I.style.overflow=""})}break;case"items":{var g=void 0,m=void 0,v=void 0;if(o.isReact&&o.template&&o.clearTemplate(["template"]),Object.keys(i.items).length)for(var b=Object.keys(t.items),y=0;y<b.length;y++)m=o.getChangedItemIndex(t,[],Number(b[y])),m.length<=o.getWrapper().children.length&&(g=m.pop(),v=o.getItems(m),o.insertAfter([v[g]],v[g].text),o.removeItem(v,m,g),o.setItems(v,m)),m.length=0;else{if(o.updateItem(o.element,o.items),o.enableScrolling&&o.element.parentElement.classList.contains("e-custom-scroll")&&(o.element.classList.contains("e-vertical")?ki(o.createElement,n,o.element,"vscroll",o.enableRtl):ki(o.createElement,n,o.element,"hscroll",o.enableRtl)),!o.hamburgerMode)for(var y=1,w=n.childElementCount;y<w;y++)ne(n.lastElementChild);o.navIdx=[]}break}}},o=this,l=0,h=Object.keys(t);l<h.length;l++){var p=h[l];s(p)}},e.prototype.updateItem=function(t,i){{if(this.enableScrolling){var r=this.getWrapper(),n=r.children[0];this.element.classList.contains("e-vertical")?Dr(xi(n,bn),n):Dr(xi(n,Na),n)}t.innerHTML=""}var s=[].slice.call(this.createItems(i).children);s.forEach(function(o){t.appendChild(o)})},e.prototype.getChangedItemIndex=function(t,i,r){i.push(r);var n=Object.keys(t.items[r]).pop();if(n==="items"){var s=t.items[r],o=Object.keys(s.items).pop();o&&this.getChangedItemIndex(s,i,Number(o))}else n==="isParentArray"&&i.length>1&&i.pop();return i},e.prototype.removeItem=function(t,i,r){t.splice(r,1);var n=this.getWrapper().children;i.length<n.length&&ne(n[i.length].children[r])},e.prototype.unWireEvents=function(t){t===void 0&&(t=this.target);var i=this.getWrapper();if(t){for(var r=void 0,n=void 0,s=ht(t),o=0,l=s.length;o<l;o++)r=s[o],this.isMenu?S.remove(r,"click",this.menuHeaderClickHandler):T.isIos?(n=xi(r,Ha),n&&n.destroy()):S.remove(r,"contextmenu",this.cmenuHandler);if(!this.isMenu){S.remove(this.targetElement,"scroll",this.scrollHandler);for(var h=0,p=_o(this.targetElement);h<p.length;h++){var c=p[h];S.remove(c,"scroll",this.scrollHandler)}}}T.isDevice||(S.remove(this.isMenu?document:i,"mouseover",this.delegateMoverHandler),S.remove(document,"mousedown",this.delegateMouseDownHandler)),S.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(i),this.rippleFn()},e.prototype.unWireKeyboardEvent=function(t){var i=xi(t,St);i&&i.destroy()},e.prototype.toggleAnimation=function(t,i){var r=this;i===void 0&&(i=!0);var n,s;this.animationSettings.effect==="None"||!i?this.end(t,i):this.animation.animate(t,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(o){r.hamburgerMode?(s=o.element.parentElement,o.element.style.position="absolute",n=s.offsetHeight,o.element.style.maxHeight=o.element.offsetHeight+"px",s.style.maxHeight=""):(o.element.style.display="block",o.element.style.maxHeight=o.element.getBoundingClientRect().height+"px")},progress:function(o){r.hamburgerMode&&(s.style.minHeight=n+o.element.offsetHeight+"px")},end:function(o){r.hamburgerMode?(o.element.style.position="",o.element.style.maxHeight="",s.style.minHeight="",o.element.style.top="0px",o.element.children[0].focus(),r.triggerOpen(o.element.children[0])):r.end(o.element,i)}})},e.prototype.triggerOpen=function(t){var i=this.navIdx.length?this.getItem(this.navIdx):null,r={element:t,parentItem:i,items:i?i.items:this.items};this.trigger("onOpen",r),this.isMenu||S.add(t,"keydown",this.keyHandler,this)},e.prototype.end=function(t,i){if(i&&(this.isMenu||!this.isMenu&&this.isContextMenuClosed))if((this.isMenu||!T.isDevice)&&(t.style.display="block"),t.style.maxHeight="",this.triggerOpen(t),t.querySelector("."+Ge))t.querySelector("."+Ge).focus();else{var r=this.getWrapper().children[this.getIdx(this.getWrapper(),t)-1];this.currentTarget?this.currentTarget.classList.contains("e-numerictextbox")||this.currentTarget.classList.contains("e-textbox")||this.currentTarget.tagName==="INPUT"||(r?r.querySelector("."+Oe).focus():this.element.focus()):r?r.querySelector("."+Oe).focus():this.element.focus()}else if(t===this.element){var n=this.getLIByClass(this.element,Ge);n&&n.classList.remove(Ge);var s=this.getLIByClass(this.element,Oe);s&&s.classList.remove(Oe),t.style.display="none"}else ne(t)},e.prototype.getPersistData=function(){return""},e.prototype.getWrapper=function(){return M(this.element,".e-"+this.getModuleName()+"-wrapper")},e.prototype.getIndex=function(t,i,r,n,s,o){r===void 0&&(r=this.items),n===void 0&&(n=[]),s===void 0&&(s=!1),o===void 0&&(o=0);var l;o=s?o+1:0;for(var h=0,p=r.length;h<p;h++)if(l=r[h],(i?l[this.getField("itemId",o)]:l[this.getField("text",o)])===t){n.push(h);break}else if(l[this.getField("children",o)]&&l[this.getField("children",o)].length)if(n=this.getIndex(t,i,l[this.getField("children",o)],n,!0,o),n[n.length-1]===-1)h!==p-1&&n.pop();else{n.unshift(h);break}else h===p-1&&n.push(-1);return!s&&n[0]===-1?[]:n},e.prototype.enableItems=function(t,i,r){i===void 0&&(i=!0);for(var n,s,o,l=ma,h,p=0;p<t.length;p++){if(o=this.getIndex(t[p],r),this.navIdx.length){if(o.length!==1){h=!1;for(var c=0,d=o.length-1;c<d;c++)if(o[c]!==this.navIdx[c]){h=!0;break}if(h)continue}}else if(o.length!==1)continue;s=o.pop(),n=this.getUlByNavIdx(o.length),n&&!u(s)&&(i?this.isMenu?(n.children[s].classList.remove(l),n.children[s].removeAttribute("aria-disabled")):T.isDevice&&!n.classList.contains("e-contextmenu")?n.children[s+1].classList.remove(l):n.children[s].classList.remove(l):this.isMenu?(n.children[s].classList.add(l),n.children[s].setAttribute("aria-disabled","true")):T.isDevice&&!n.classList.contains("e-contextmenu")?n.children[s+1].classList.add(l):n.children[s].classList.add(l))}},e.prototype.showItems=function(t,i){this.showHideItems(t,!1,i)},e.prototype.hideItems=function(t,i){this.showHideItems(t,!0,i)},e.prototype.showHideItems=function(t,i,r){for(var n,s,o,l,h=0;h<t.length;h++)if(o=this.getIndex(t[h],r),s=o.pop(),n=this.getUlByNavIdx(o.length),l=this.getItems(o),n){var p=r?n.children[s].id:l[s].text.toString();i&&p===t[h]?n.children[s].classList.add(is):!i&&p===t[h]&&n.children[s].classList.remove(is)}},e.prototype.removeItems=function(t,i){for(var r,n,s,o=0;o<t.length;o++)n=this.getIndex(t[o],i),r=n.pop(),s=this.getItems(n),u(r)||this.removeItem(s,n,r)},e.prototype.insertAfter=function(t,i,r){this.insertItems(t,i,r)},e.prototype.insertBefore=function(t,i,r){this.insertItems(t,i,r,!1)},e.prototype.insertItems=function(t,i,r,n){n===void 0&&(n=!0);for(var s,o,l,h,p,c=0;c<t.length;c++){l=this.getIndex(i,r),o=l.pop(),h=this.getItems(l),p=new xs(h[0],"items",t[c],!0),h.splice(n?o+1:o,0,p);var d=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(!u(o)&&l.length<d.length){o=n?o+1:o,s=this.createItems(h).children[o];var f=this.isMenu?ke(".e-menu-parent",d[l.length]):d[l.length];f.insertBefore(s,f.children[o])}}},e.prototype.removeAttributes=function(){var t=this;["top","left","display","z-index"].forEach(function(i){t.element.style.removeProperty(i)}),["role","tabindex","class","style"].forEach(function(i){i==="class"&&t.element.classList.contains("e-menu-parent")&&t.element.classList.remove("e-menu-parent"),(["class","style"].indexOf(i)===-1||!t.element.getAttribute(i))&&t.element.removeAttribute(i),t.isMenu&&i==="class"&&t.element.classList.contains("e-vertical")&&t.element.classList.remove("e-vertical")})},e.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t),this.clonedElement=null;else{if(this.clonedElement.style.display="",this.clonedElement.tagName==="EJS-CONTEXTMENU")R([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&this.clonedElement.children[0].tagName==="LI"&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==t?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),this.element.innerHTML="",be([].slice.call(this.clonedElement.children),this.element),ne(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(ne(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):ne(t),a.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}this.rippleFn=null},De([B()],e.prototype,"beforeItemRender",void 0),De([B()],e.prototype,"beforeOpen",void 0),De([B()],e.prototype,"onOpen",void 0),De([B()],e.prototype,"beforeClose",void 0),De([B()],e.prototype,"onClose",void 0),De([B()],e.prototype,"select",void 0),De([B()],e.prototype,"created",void 0),De([C("")],e.prototype,"cssClass",void 0),De([C(0)],e.prototype,"hoverDelay",void 0),De([C(!1)],e.prototype,"showItemOnClick",void 0),De([C("")],e.prototype,"target",void 0),De([C("")],e.prototype,"filter",void 0),De([C(null)],e.prototype,"template",void 0),De([C(!1)],e.prototype,"enableScrolling",void 0),De([C(!0)],e.prototype,"enableHtmlSanitizer",void 0),De([mt({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},Bg)],e.prototype,"fields",void 0),De([br([],xs)],e.prototype,"items",void 0),De([mt({duration:400,easing:"ease",effect:"SlideDown"},Pg)],e.prototype,"animationSettings",void 0),e=De([kt],e),e}(Hi),zg=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rs=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Hg=function(a){zg(e,a);function e(t,i){return a.call(this,t,i)||this}return e.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||oi("ej2-contextmenu"),a.prototype.preRender.call(this)},e.prototype.initialize=function(){a.prototype.initialize.call(this),$(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=Jh(this.element).toString()},e.prototype.open=function(t,i,r){a.prototype.openMenu.call(this,null,null,t,i,null,r)},e.prototype.close=function(){a.prototype.closeMenu.call(this)},e.prototype.onPropertyChanged=function(t,i){a.prototype.onPropertyChanged.call(this,t,i);for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents();break}}},e.prototype.getModuleName=function(){return"contextmenu"},rs([C("")],e.prototype,"target",void 0),rs([C("")],e.prototype,"filter",void 0),rs([br([],xs)],e.prototype,"items",void 0),e=rs([kt],e),e}(Ng),Vg=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),He=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Nl="e-atc-spinner-icon";te.root="e-combobox";var qg={container:null,buttons:[]},Wg=function(a){Vg(e,a);function e(t,i){return a.call(this,t,i)||this}return e.prototype.preRender=function(){a.prototype.preRender.call(this)},e.prototype.getLocaleName=function(){return"combo-box"},e.prototype.wireEvent=function(){this.getModuleName()==="combobox"&&(S.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),S.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),u(this.inputWrapper.buttons[0])||S.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),S.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(S.add(this.inputElement,"input",this.onInput,this),S.add(this.inputElement,"keyup",this.onFilterUp,this),S.add(this.inputElement,"keydown",this.onFilterDown,this),S.add(this.inputElement,"paste",this.pasteHandler,this),S.add(window,"resize",this.windowResize,this)),this.bindCommonEvent()},e.prototype.preventBlur=function(t){(!this.allowFiltering&&document.activeElement!==this.inputElement&&!document.activeElement.classList.contains(te.input)&&T.isDevice||!T.isDevice)&&t.preventDefault()},e.prototype.onBlurHandler=function(t){var i=this.inputElement&&this.inputElement.value===""?null:this.inputElement&&this.inputElement.value;!u(this.listData)&&!u(i)&&i!==this.text&&this.customValue(t),a.prototype.onBlurHandler.call(this,t)},e.prototype.targetElement=function(){return this.inputElement},e.prototype.setOldText=function(t){G.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},e.prototype.setOldValue=function(t){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},e.prototype.valueMuteChange=function(t){t=this.allowObjectBinding&&!u(t)?j(this.fields.value?this.fields.value:"",t):t;var i=u(t)?null:t.toString();G.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton);var r={};if(this.allowObjectBinding&&(t=this.getDataByValue(t),u(t))){var n=this.fields,s=!1,o=!1;if(this.allowObjectBinding){var l=Object.keys(this.value);l.forEach(function(c){if(c===n.value){o=!0;return}}),l.forEach(function(c){if(c===n.text){s=!0;return}})}r={text:o?s?j(n.text,this.value):j(n.value,this.value):null,value:o?this.value:null,index:null}}this.allowObjectBinding?this.setProperties(r,!0):this.setProperties({value:t,text:t,index:null},!0),this.activeIndex=this.index;var h=this.fields,p={};p[h.text]=u(t)?null:t.toString(),p[h.value]=u(t)?null:t.toString(),this.itemData=p,this.item=null,(!this.allowObjectBinding&&this.previousValue!==this.value||this.allowObjectBinding&&this.previousValue&&this.value&&!this.isObjectInArray(this.previousValue,[this.value]))&&this.detachChangeEvent(null)},e.prototype.updateValues=function(){if(this.fields.disabled&&(this.value!=null&&(this.value=this.isDisableItemValue(this.value)?null:this.value),this.text!=null&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),this.index!=null&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),u(this.value))if(this.text&&u(this.value)){var i=this.getElementByText(this.text);i?this.setSelection(i,null):(G.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{var t=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value,i=this.getElementByValue(t),r=!u(i);if(this.enableVirtualization&&this.value){var n=this.fields.value?this.fields.value:"",s=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof q){var o=new q(this.virtualGroupDataSource).executeLocal(new re().where(new pe(n,"equal",s)));if(o&&o.length>0){this.itemData=o[0],r=!0;var l=this.getItemData(),h=this.allowObjectBinding?this.getDataByValue(l.value):l.value;(this.value===l.value&&this.text!==l.text||this.value!==l.value&&this.text===l.text)&&this.setProperties({text:l.text,value:h})}}else{var o=new q(this.dataSource).executeLocal(new re().where(new pe(n,"equal",s)));if(o&&o.length>0){this.itemData=o[0],r=!0;var l=this.getItemData(),h=this.allowObjectBinding?this.getDataByValue(l.value):l.value;(this.value===l.value&&this.text!==l.text||this.value!==l.value&&this.text===l.text)&&this.setProperties({text:l.text,value:h})}}}i?this.setSelection(i,null):!this.enableVirtualization&&this.allowCustom||this.allowCustom&&this.enableVirtualization&&!r?this.valueMuteChange(this.value):(!this.enableVirtualization||this.enableVirtualization&&!r)&&this.valueMuteChange(null)}this.setHiddenValue(),G.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&this.inputElement.value!==""&&!this.readonly?N([this.inputWrapper.clearButton],te.clearIconHide):R([this.inputWrapper.clearButton],te.clearIconHide))},e.prototype.getAriaAttributes=function(){var t={role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocapitalize:"off",spellcheck:"false"};return t},e.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(a.prototype.searchLists.call(this,t),this.ulElement&&this.filterInput.value.trim()===""&&this.setHoverList(this.ulElement.querySelector("."+te.li))):(this.ulElement&&this.inputElement.value===""&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+te.li)),this.incrementalSearch(t))},e.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},e.prototype.setSearchBox=function(){this.filterInput=this.inputElement;var t=this.isFiltering()||this.isReact&&this.getModuleName()==="combobox"?this.inputWrapper:qg;return t},e.prototype.onActionComplete=function(t,i,r,n){var s=this;a.prototype.onActionComplete.call(this,t,i,r),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&this.getModuleName()==="combobox"&&this.isTyped&&!this.enableVirtualization&&setTimeout(function(){s.inlineSearch()})},e.prototype.getFocusElement=function(){var t=this.isSelectCustom?{text:""}:this.getItemData(),i=u(this.list)?this.list:this.list.querySelector("."+te.selected),r=t.text&&t.text.toString()===this.inputElement.value&&!u(i);if(r)return i;if((T.isDevice&&!this.isDropDownClick||!T.isDevice)&&!u(this.liCollections)&&this.liCollections.length>0){var n=this.inputElement.value,s=this.sortedData,o=this.typeOfData(s).typeof,l=Nr(n,this.liCollections,this.filterType,!0,s,this.fields,o);if(this.enableVirtualization&&n!==""&&this.getModuleName()!=="autocomplete"&&this.isTyped&&!this.allowFiltering){var h=!1;for((this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex==0)&&(h=!0,this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex==0?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),h=!0),(this.viewPortInfo.startIndex!==0||h)&&this.updateIncrementalView(0,this.itemCount),l=Nr(n,this.incrementalLiCollections,this.filterType,!0,s,this.fields,o);u(l.item)&&this.incrementalEndIndex<this.totalItemCount;){if(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),h=!0,(this.viewPortInfo.startIndex!==0||h)&&this.updateIncrementalView(0,this.itemCount),l=Nr(n,this.incrementalLiCollections,this.filterType,!0,s,this.fields,o),!u(l)){l.index=l.index+this.incrementalStartIndex;break}if(u(l)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}}if(l.index&&(!(this.viewPortInfo.startIndex>=l.index)||!(l.index>=this.viewPortInfo.endIndex))){var p=l.index-(this.itemCount/2-2)>0?l.index-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;p!=this.viewPortInfo.startIndex&&this.updateIncrementalView(p,c)}if(u(l.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var d=this.getIndexByValue(l.item.getAttribute("data-value"))-this.skeletonCount;if(d>this.itemCount/2){var p=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}l.item=this.getElementByValue(l.item.getAttribute("data-value"))}l&&l.item&&(l.item=this.getElementByValue(l.item.getAttribute("data-value")))}var f=l.item;if(u(f))this.isSelectCustom&&this.inputElement.value.trim()!==""&&(this.removeFocus(),this.enableVirtualization||(this.list.scrollTop=0));else{var g=this.getIndexByValue(f.getAttribute("data-value"))-1,m=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(m)&&this.getModuleName()!=="autocomplete"){this.removeFocus();var v=this.fields.groupBy?this.liCollections[0].offsetHeight:0;if(!this.enableVirtualization)this.list.scrollTop=g*m+v;else if(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var y=this.virtualListInfo&&this.virtualListInfo.startIndex?f.offsetTop+this.virtualListInfo.startIndex*f.offsetHeight:f.offsetTop;this.list.scrollTop=y-this.list.querySelectorAll(".e-virtual-list").length*f.offsetHeight}R([f],te.focus)}}return f}else return null},e.prototype.setValue=function(t){return(t&&t.type==="keydown"&&t.action==="enter"||t&&t.type==="click")&&this.removeFillSelection(),this.autofill&&this.getModuleName()==="combobox"&&t&&t.type==="keydown"&&t.action!=="enter"?(this.preventAutoFill=!1,this.inlineSearch(t),!1):a.prototype.setValue.call(this,t)},e.prototype.checkCustomValue=function(){var t=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(t);var i=this.getItemData(),r=this.allowObjectBinding?this.itemData:i.value;this.allowCustom&&u(i.value)&&u(i.text)||this.setProperties({value:r},!this.allowCustom)},e.prototype.showSpinner=function(){u(this.spinnerElement)&&(this.spinnerElement=this.getModuleName()==="autocomplete"?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||G.appendSpan("e-input-group-icon "+Nl,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,R([this.spinnerElement],te.disableIcon),Dn({target:this.spinnerElement,width:T.isDevice?"16px":"14px"},this.createElement),ur(this.spinnerElement))},e.prototype.hideSpinner=function(){u(this.spinnerElement)||(kn(this.spinnerElement),N([this.spinnerElement],te.disableIcon),this.spinnerElement.classList.contains(Nl)?ne(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.setAutoFill=function(t,i){if(i||this.setHoverList(t),this.autofill&&!this.preventAutoFill){var r=this.getTextByValue(t.getAttribute("data-value")).toString(),n=this.getFormattedValue(t.getAttribute("data-value"));this.getModuleName()==="combobox"&&(!this.isSelected&&!this.allowObjectBinding&&this.previousValue!==n||this.allowObjectBinding&&this.previousValue&&n&&!this.isObjectInArray(this.previousValue,[this.getDataByValue(n)])?(this.updateSelectedItem(t,null),this.isSelected=!0,this.previousValue=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(t.getAttribute("data-value"))):this.getFormattedValue(t.getAttribute("data-value"))):this.updateSelectedItem(t,null,!0)),this.isAndroidAutoFill(r)||this.setAutoFillSelection(r,i)}},e.prototype.isAndroidAutoFill=function(t){if(T.isAndroid){var i=this.getSelectionPoints(),r=this.prevSelectPoints.end,n=i.end,s=this.prevSelectPoints.start,o=i.start;return r!==0&&(r===t.length&&s===t.length||s>o&&r>n||r===n&&s===o)}else return!1},e.prototype.clearAll=function(t,i){(u(i)||!u(i)&&u(i.dataSource))&&a.prototype.clearAll.call(this,t),this.isFiltering()&&!u(t)&&t.target===this.inputWrapper.clearButton&&this.searchLists(t)},e.prototype.isSelectFocusItem=function(t){return!u(t)},e.prototype.inlineSearch=function(t){var i=t&&(t.action==="down"||t.action==="up"||t.action==="home"||t.action==="end"||t.action==="pageUp"||t.action==="pageDown"),r=i?this.liCollections[this.activeIndex]:this.getFocusElement();if(u(r))if(!u(this.inputElement)&&this.inputElement.value===""){if(this.activeIndex=null,!u(this.list)){this.enableVirtualization||(this.list.scrollTop=0);var s=this.list.querySelector("."+te.li);this.setHoverList(s)}}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!i){var n=this.getFormattedValue(r.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(n),this.activeIndex=u(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=this.inputElement.value===""?!1:this.preventAutoFill,this.setAutoFill(r,i)}},e.prototype.incrementalSearch=function(t){this.showPopup(t),u(this.listData)||(this.inlineSearch(t),t.preventDefault())},e.prototype.setAutoFillSelection=function(t,i){i===void 0&&(i=!1);var r=this.getSelectionPoints(),n=this.inputElement.value.substr(0,r.start);if(n&&n.toLowerCase()===t.substr(0,r.start).toLowerCase()){var s=n+t.substr(n.length,t.length);G.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(r.start,this.inputElement.value.length)}else i&&(G.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},e.prototype.getValueByText=function(t){return a.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},e.prototype.unWireEvent=function(){this.getModuleName()==="combobox"&&(S.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),S.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),u(this.inputWrapper.buttons[0])||S.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(S.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(S.remove(this.inputElement,"input",this.onInput),S.remove(this.inputElement,"keyup",this.onFilterUp),S.remove(this.inputElement,"keydown",this.onFilterDown),S.remove(this.inputElement,"paste",this.pasteHandler),S.remove(window,"resize",this.windowResize))),this.unBindCommonEvent()},e.prototype.setSelection=function(t,i){a.prototype.setSelection.call(this,t,i),!u(t)&&!this.autofill&&!this.isDropDownClick&&this.removeFocus()},e.prototype.selectCurrentItem=function(t){var i;if(this.isPopupOpen){if(this.isSelected?i=this.list.querySelector("."+te.selected):i=this.list.querySelector("."+te.focus),this.isDisabledElement(i))return;i&&(this.setSelection(i,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t))}t.action==="enter"&&this.inputElement.value.trim()===""?this.clearAll(t):this.isTyped&&!this.isSelected&&u(i)&&this.customValue(t),this.hidePopup(t)},e.prototype.setHoverList=function(t){this.removeSelection(),this.isValidLI(t)&&!t.classList.contains(te.selected)&&(this.removeFocus(),t.classList.add(te.focus))},e.prototype.targetFocus=function(t){T.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(t),G.calculateWidth(this.inputElement,this.inputWrapper.container)},e.prototype.dropDownClick=function(t){t.preventDefault(),T.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),a.prototype.dropDownClick.call(this,t)},e.prototype.customValue=function(t){var i=this,r=this.getValueByText(this.inputElement.value);if(!this.allowCustom&&this.inputElement.value!==""){var n=this.previousValue,s=this.value;r=this.allowObjectBinding?this.getDataByValue(r):r,this.setProperties({value:r}),u(this.value)&&G.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value,this.autofill&&(!this.allowObjectBinding&&n===this.value||this.allowObjectBinding&&n&&this.isObjectInArray(n,[this.value]))&&(!this.allowObjectBinding&&s!==this.value||this.allowObjectBinding&&s&&!this.isObjectInArray(s,[this.value]))&&this.onChangeEvent(null)}else if(this.inputElement.value.trim()!==""){var o=this.value;if(u(r)){var l=this.inputElement.value===""?null:this.inputElement.value,h={text:l,item:{}};this.isObjectCustomValue=!0,this.initial?this.updateCustomValueCallback(l,h,o):this.trigger("customValueSpecifier",h,function(p){i.updateCustomValueCallback(l,p,o,t)})}else this.isSelectCustom=!1,r=this.allowObjectBinding?this.getDataByValue(r):r,this.setProperties({value:r}),(!this.allowObjectBinding&&o!==this.value||this.allowObjectBinding&&o&&this.value&&!this.isObjectInArray(o,[this.value]))&&this.onChangeEvent(t)}else this.allowCustom&&this.isInteracted&&(this.isSelectCustom=!0)},e.prototype.updateCustomValueCallback=function(t,i,r,n){var s=this,o=this.fields,l=i.item,h={};l&&j(o.text,l)&&j(o.value,l)?h=l:(st(o.text,t,h),st(o.value,t,h)),this.itemData=h;var p={};if(this.allowObjectBinding){var c=this.listData&&this.listData.length>0?Object.keys(this.listData[0]):Object.keys(this.itemData);!(this.listData&&this.listData.length>0)&&(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox"&&this.allowFiltering)&&(c=this.firstItem?Object.keys(this.firstItem):Object.keys(this.itemData)),c.forEach(function(f){p[f]=f===o.value||f===o.text?j(o.value,s.itemData):null})}var d={text:j(o.text,this.itemData),value:this.allowObjectBinding?p:j(o.value,this.itemData),index:null};this.setProperties(d,!0),this.setSelection(null,null),this.isSelectCustom=!0,this.isObjectCustomValue=!1,(!this.allowObjectBinding&&r!==this.value||this.allowObjectBinding&&(r==null&&this.value!==null||r&&!this.isObjectInArray(r,[this.value])))&&this.onChangeEvent(n,!0)},e.prototype.onPropertyChanged=function(t,i){this.getModuleName()==="combobox"&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t,i));for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"readonly":G.setReadonly(this.readonly,this.inputElement),this.readonly?(S.remove(this.inputElement,"input",this.onInput),S.remove(this.inputElement,"keyup",this.onFilterUp),S.remove(this.inputElement,"keydown",this.onFilterDown)):(S.add(this.inputElement,"input",this.onInput,this),S.add(this.inputElement,"keyup",this.onFilterUp,this),S.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&this.getModuleName()==="combobox"&&u(this.list)&&a.prototype.renderList.call(this);break;case"allowCustom":break;default:{var o=this.getPropObject(s,t,i);a.prototype.onPropertyChanged.call(this,o.newProperty,o.oldProperty),this.isFiltering()&&s==="dataSource"&&u(this.list)&&this.itemTemplate&&this.getModuleName()==="combobox"&&a.prototype.renderList.call(this);break}}}},e.prototype.render=function(){a.prototype.render.call(this),this.setSearchBox(),this.renderComplete()},e.prototype.getModuleName=function(){return"combobox"},e.prototype.addItem=function(t,i){a.prototype.addItem.call(this,t,i)},e.prototype.filter=function(t,i,r){a.prototype.filter.call(this,t,i,r)},e.prototype.showPopup=function(t){a.prototype.showPopup.call(this,t)},e.prototype.hidePopup=function(t){var i=this.inputElement&&this.inputElement.value===""?null:this.inputElement&&this.inputElement.value;if(!u(this.listData)){var r=this.isEscapeKey;this.isEscapeKey&&(G.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var n=this.isSelectCustom?{text:""}:this.getItemData(),s=u(this.list)?null:this.list.querySelector("."+te.selected);if(this.inputElement&&n.text===this.inputElement.value&&!u(s)){this.isSelected&&(this.onChangeEvent(t),this.isSelectCustom=!1),a.prototype.hidePopup.call(this,t);return}if(this.getModuleName()==="combobox"&&this.inputElement.value.trim()!==""){var o=this.sortedData,l=this.typeOfData(o).typeof,h=Nr(this.inputElement.value,this.liCollections,"Equal",!0,o,this.fields,l);this.selectedLI=h.item,u(h.index)&&(h.index=Nr(this.inputElement.value,this.liCollections,"StartsWith",!0,o,this.fields,l).index),this.activeIndex=h.index,u(this.selectedLI)?r&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}!this.isEscapeKey&&this.isTyped&&!this.isInteracted&&this.customValue(t)}var p=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value;u(this.listData)&&this.allowCustom&&!u(i)&&i!==p&&this.customValue(),a.prototype.hidePopup.call(this,t)},e.prototype.focusIn=function(){this.enabled&&(T.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),a.prototype.focusIn.call(this))},e.prototype.clear=function(){this.value=null},e.prototype.focusOut=function(t){a.prototype.focusOut.call(this,t)},e.prototype.getItems=function(){return a.prototype.getItems.call(this)},e.prototype.getDataByValue=function(t){return a.prototype.getDataByValue.call(this,t)},e.prototype.renderHightSearch=function(){},He([C(!1)],e.prototype,"autofill",void 0),He([C(!0)],e.prototype,"allowCustom",void 0),He([C({})],e.prototype,"htmlAttributes",void 0),He([C(!1)],e.prototype,"allowFiltering",void 0),He([C(null)],e.prototype,"query",void 0),He([C(null)],e.prototype,"index",void 0),He([C(!0)],e.prototype,"showClearButton",void 0),He([C(!1)],e.prototype,"enableRtl",void 0),He([B()],e.prototype,"customValueSpecifier",void 0),He([B()],e.prototype,"filtering",void 0),He([C(null)],e.prototype,"valueTemplate",void 0),He([C("Never")],e.prototype,"floatLabelType",void 0),He([C(null)],e.prototype,"filterBarPlaceholder",void 0),He([C(null)],e.prototype,"cssClass",void 0),He([C(null)],e.prototype,"headerTemplate",void 0),He([C(null)],e.prototype,"footerTemplate",void 0),He([C(null)],e.prototype,"placeholder",void 0),He([C("100%")],e.prototype,"width",void 0),He([C("300px")],e.prototype,"popupHeight",void 0),He([C("100%")],e.prototype,"popupWidth",void 0),He([C(!1)],e.prototype,"readonly",void 0),He([C(null)],e.prototype,"text",void 0),He([C(null)],e.prototype,"value",void 0),He([C(!1)],e.prototype,"allowObjectBinding",void 0),e=He([kt],e),e}(Sr),jg=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),gt=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n};te.root="e-autocomplete";te.icon="e-input-group-icon e-ddl-icon e-search-icon";var ip=function(a){jg(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.isFiltered=!1,r.searchList=!1,r}return e.prototype.preRender=function(){a.prototype.preRender.call(this)},e.prototype.getLocaleName=function(){return"auto-complete"},e.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},e.prototype.getQuery=function(t){var i=t?t.clone():this.query?this.query.clone():new re,r=this.allowObjectBinding&&!u(this.value)?j(this.fields.value?this.fields.value:"",this.value):this.value,n=this.queryString===""&&!u(r)?"equal":this.filterType,s=this.queryString===""&&!u(r)?r:this.queryString;if(this.isFiltered){if(this.enableVirtualization&&!u(this.customFilterQuery))i=this.customFilterQuery.clone();else if(!this.enableVirtualization)return i}if(this.queryString!==null&&this.queryString!==""){var o=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof q)&&o==="string"||o==="number")i.where("",n,s,this.ignoreCase,this.ignoreAccent);else{var l=u(this.fields.value)?"":this.fields.value;i.where(l,n,s,this.ignoreCase,this.ignoreAccent)}}if(!u(this.suggestionCount)&&!this.enableVirtualization){if(this.suggestionCount!==20)for(var h=0;h<i.queries.length;h++)i.queries[h].fn==="onTake"&&i.queries.splice(h,1);i.take(this.suggestionCount)}if(this.enableVirtualization){var p=0,c=0,d=this.getTakeValue();if(i&&i.queries.length>0)for(var h=0;h<i.queries.length;h++)i.queries[h].fn==="onSkip"&&(c=i.queries[h].e.nos),i.queries[h].fn==="onTake"&&(p=d<=i.queries[h].e.nos?i.queries[h].e.nos:d);if(p<=0&&this.query&&this.query.queries.length>0)for(var h=0;h<this.query.queries.length;h++)this.query.queries[h].fn==="onTake"&&(p=d<=this.query.queries[h].e.nos?this.query.queries[h].e.nos:d);if(i&&i.queries.length>0)for(var h=0;h<i.queries.length;h++){if(i.queries[h].fn==="onSkip"){c=i.queries[h].e.nos,i.queries.splice(h,1),--h;continue}i.queries[h].fn==="onTake"&&(p=i.queries[h].e.nos<=p?p:i.queries[h].e.nos,i.queries.splice(h,1),--h)}c>0&&this.virtualItemStartIndex<=c?i.skip(c):i.skip(this.virtualItemStartIndex),p>0&&d<=p?i.take(p):i.take(d),i.requiresCount()}return i},e.prototype.searchLists=function(t){var i=this;if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.checkAndResetCache(),u(this.list)&&a.prototype.renderList.call(this,t,!0),this.queryString=this.filterInput.value,t.type!=="mousedown"&&(t.keyCode===40||t.keyCode===38)){this.queryString=this.queryString===""?null:this.queryString,this.beforePopupOpen=!0,this.resetList(this.dataSource,this.fields,null,t);return}this.isSelected=!1,this.activeIndex=null,this.isRequesting=!1;var r={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(n,s,o){r.cancel||(i.isFiltered=!0,i.customFilterQuery=s,i.filterAction(n,s,o))},cancel:!1};this.trigger("filtering",r,function(n){!n.cancel&&!i.isFiltered&&!n.preventDefaultAction&&(i.searchList=!0,i.filterAction(i.dataSource,null,i.fields,t))})},e.prototype.filter=function(t,i,r){this.isFiltered=!0,this.filterAction(t,i,r)},e.prototype.filterAction=function(t,i,r,n){this.beforePopupOpen=!0;var s=this.list.classList.contains("e-nodata");if(this.queryString!==""&&this.queryString.length>=this.minLength){if(this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(t,r,i,n),this.enableVirtualization&&s&&!this.list.classList.contains("e-nodata")&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl"))){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(o)}(this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof q)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof q&&this.totalItemCount!=0)&&this.getFilteringSkeletonCount()}else this.hidePopup(n),this.beforePopupOpen=!1;this.renderReactTemplates()},e.prototype.clearAll=function(t,i){(u(i)||!u(i)&&u(i.dataSource))&&(a.prototype.clearAll.call(this,t),this.checkAndResetCache()),this.beforePopupOpen&&this.hidePopup()},e.prototype.onActionComplete=function(t,i,r,n){this.enableVirtualization||(this.fixedHeaderElement=null),(this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof q)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof q&&this.totalItemCount!=0)&&this.getFilteringSkeletonCount(),a.prototype.onActionComplete.call(this,t,i,r);var s=this.list.querySelector("."+te.li);u(s)||N([s],te.focus),this.postBackAction()},e.prototype.postBackAction=function(){if(this.autofill&&!u(this.liCollections[0])&&this.searchList){var t=[this.liCollections[0]],i=this.listData,r=this.typeOfData(i).typeof,n=Nr(this.inputElement.value,t,"StartsWith",this.ignoreCase,i,this.fields,r);this.searchList=!1,u(n.item)||a.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},e.prototype.setSelection=function(t,i){if(!this.isValidLI(t)){this.selectedLI=t;return}if(!u(i)&&i.type==="keydown"&&i.action!=="enter"&&i.action!=="tab"&&this.isValidLI(t)){var r=this.getFormattedValue(t.getAttribute("data-value"));if(this.activeIndex=this.getIndexByValue(r),this.setHoverList(t),this.selectedLI=t,this.setScrollPosition(i),this.autofill&&this.isPopupOpen){this.preventAutoFill=!1;var n=i&&i.action==="down"||i.action==="up"||i.action==="home"||i.action==="end"||i.action==="pageUp"||i.action==="pageDown";a.prototype.setAutoFill.call(this,t,n)}}else a.prototype.setSelection.call(this,t,i)},e.prototype.listOption=function(t,i){var r=this,n=a.prototype.listOption.call(this,t,i);if(u(n.itemCreated))n.itemCreated=function(o){r.highlight&&(r.element.tagName===r.getNgDirective()&&r.itemTemplate?setTimeout(function(){Qn(o.item,r.queryString,r.ignoreCase,r.filterType)},0):Qn(o.item,r.queryString,r.ignoreCase,r.filterType))};else{var s=n.itemCreated;n.itemCreated=function(o){r.highlight&&Qn(o.item,r.queryString,r.ignoreCase,r.filterType),s.apply(r,[o])}}return n},e.prototype.isFiltering=function(){return!0},e.prototype.renderPopup=function(t){this.enableVirtualization||(this.list.scrollTop=0),a.prototype.renderPopup.call(this,t)},e.prototype.isEditTextBox=function(){return!1},e.prototype.isPopupButton=function(){return this.showPopupButton},e.prototype.isSelectFocusItem=function(t){return!1},e.prototype.setInputValue=function(t,i){var r=i&&i.text?i.text:i&&i.value,n=t&&t.text?t.text:t&&t.value?t.value:this.value;if(this.allowObjectBinding&&(r=u(r)?r:j(this.fields.value?this.fields.value:"",r),n=u(n)?n:j(this.fields.value?this.fields.value:"",n)),n&&this.typedString===""&&!this.allowCustom&&!(this.dataSource instanceof q)){var s=this.typeOfData(this.dataSource).typeof==="string"?"":this.fields.value,o=this.getItems().length,l=new re,h=this;new q(this.dataSource).executeQuery(l.where(new pe(s,"equal",n))).then(function(p){p.result.length>0?(h.value=s!==""?h.allowObjectBinding?p.result[0]:p.result[0][h.fields.value].toString():p.result[0].toString(),h.addItem(p.result,o),h.updateValues()):t&&t.text?h.setOldText(r):t&&t.value?h.setOldValue(r):h.updateValues()})}else t&&(t.text?this.setOldText(r):this.setOldValue(r))},e.prototype.showPopup=function(t){if(this.enabled){if(this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.preventAutoFill=!0,u(this.list)?this.renderList(t):this.resetList(this.dataSource,this.fields,null,t)}},e.prototype.hidePopup=function(t){a.prototype.hidePopup.call(this,t),this.activeIndex=null,this.virtualListInfo=this.viewPortInfo,this.previousStartIndex=this.viewPortInfo.startIndex,this.startIndex=this.viewPortInfo.startIndex,this.previousEndIndex=this.viewPortInfo.endIndex},e.prototype.onPropertyChanged=function(t,i){this.getModuleName()==="autocomplete"&&this.setUpdateInitial(["fields","query","dataSource"],t);for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"showPopupButton":if(this.showPopupButton){var o=G.appendSpan(te.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=o,G.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&S.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else ne(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:{var l=this.getPropObject(s,t,i);a.prototype.onPropertyChanged.call(this,l.newProperty,l.oldProperty);break}}}},e.prototype.renderHightSearch=function(){if(this.highlight)for(var t=0;t<this.liCollections.length;t++){var i=this.ulElement.querySelector(".e-active");i||(yg(this.liCollections[t]),Qn(this.liCollections[t],this.queryString,this.ignoreCase,this.filterType)),i=null}},e.prototype.getModuleName=function(){return"autocomplete"},e.prototype.render=function(){a.prototype.render.call(this)},gt([mt({value:null,iconCss:null,groupBy:null,disabled:null},tp)],e.prototype,"fields",void 0),gt([C(!0)],e.prototype,"ignoreCase",void 0),gt([C(!1)],e.prototype,"showPopupButton",void 0),gt([C(!1)],e.prototype,"highlight",void 0),gt([C(20)],e.prototype,"suggestionCount",void 0),gt([C({})],e.prototype,"htmlAttributes",void 0),gt([C(null)],e.prototype,"query",void 0),gt([C(1)],e.prototype,"minLength",void 0),gt([C("Contains")],e.prototype,"filterType",void 0),gt([B()],e.prototype,"filtering",void 0),gt([C(null)],e.prototype,"index",void 0),gt([C("Never")],e.prototype,"floatLabelType",void 0),gt([C(null)],e.prototype,"valueTemplate",void 0),gt([C(null)],e.prototype,"filterBarPlaceholder",void 0),gt([C(!1)],e.prototype,"allowFiltering",void 0),gt([C(null)],e.prototype,"text",void 0),e=gt([kt],e),e}(Wg),rp=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ve=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Kt="e-other-month",ya="e-other-year",cn="e-calendar",zl="e-device",Ug="e-header",Hl="e-rtl",Gg="e-content",dn="e-calendar-content-table",Ca="e-year",ba="e-month",Vl="e-decade",ql="e-icons",_g="e-prev",Kg="e-next",Yg="e-date-icon-prev",$g="e-date-icon-next ",Qg="e-icon-container",Be="e-disabled",_i="e-overlay",Jg="e-weekend",Sa="e-week-number",lt="e-selected",Ft="e-focused-date",ar="e-focused-cell",ns="e-month-hide",Wl="e-today",Xg="e-title",jl="e-day",Ul="e-cell",Zg="e-week-header",ss="e-zoomin",em="e-footer-container",tm="e-btn",im="e-flat",rm="e-css",nm="e-primary",Gl="e-calendar-day-header-lg",wa=864e5,sm=6e4,am=function(a){rp(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.effect="",r.isPopupClicked=!1,r.isDateSelected=!0,r.isTodayClicked=!1,r.preventChange=!1,r.previousDates=!1,r}return e.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),this.calendarMode==="Islamic"&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new Ne(this.locale),(u(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date(new Date().setHours(0,0,0,0)),this.getModuleName()==="calendar"?(this.element.classList.add(cn),this.enableRtl&&this.element.classList.add(Hl),T.isDevice&&this.element.classList.add(zl),$(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(cn),this.enableRtl&&this.calendarElement.classList.add(Hl),T.isDevice&&this.calendarElement.classList.add(zl),$(this.calendarElement,{"data-role":"calendar"})),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},e.prototype.rangeValidation=function(t,i){u(t)&&this.setProperties({min:new Date(1900,0,1)},!0),u(i)&&this.setProperties({max:new Date(2099,11,31)},!0)},e.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},e.prototype.validateDate=function(t){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date(new Date().setHours(0,0,0,0)),!u(t)&&this.min<=this.max&&t>=this.min&&t<=this.max&&(this.currentDate=new Date(this.checkValue(t)))},e.prototype.setOverlayIndex=function(t,i,r,n){if(n&&!u(i)&&!u(r)&&!u(t)){var s=parseInt(i.style.zIndex,10)?parseInt(i.style.zIndex,10):1e3;r.style.zIndex=(s-1).toString(),t.style.zIndex=s.toString()}},e.prototype.minMaxUpdate=function(t){+this.min<=+this.max?N([this.element],_i):(this.setProperties({min:this.min},!0),R([this.element],_i)),this.min=u(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=u(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&t&&+t<=+this.max&&+t>=+this.min?this.currentDate=new Date(this.checkValue(t)):+this.min<=+this.max&&!t&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},e.prototype.createHeader=function(){var t={"aria-disabled":"false","aria-label":"previous month"},i={"aria-disabled":"false","aria-label":"next month"},r={"aria-atomic":"true","aria-live":"assertive","aria-label":"title"},n={tabindex:"0"};this.headerElement=this.createElement("div",{className:Ug});var s=this.createElement("div",{className:Qg});this.previousIcon=this.createElement("button",{className:""+_g,attrs:{type:"button"}}),Pi(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),$(this.previousIcon,t),$(this.previousIcon,n),this.nextIcon=this.createElement("button",{className:""+Kg,attrs:{type:"button"}}),Pi(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),this.getModuleName()==="daterangepicker"&&($(this.previousIcon,{tabIndex:"-1"}),$(this.nextIcon,{tabIndex:"-1"})),$(this.nextIcon,i),$(this.nextIcon,n),this.headerTitleElement=this.createElement("div",{className:""+jl+" "+Xg}),$(this.headerTitleElement,r),$(this.headerTitleElement,n),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:""+Yg+" "+ql})),this.nextIcon.appendChild(this.createElement("span",{className:""+$g+" "+ql})),s.appendChild(this.previousIcon),s.appendChild(this.nextIcon),this.headerElement.appendChild(s),this.getModuleName()==="calendar"?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},e.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:Gg}),this.table=this.createElement("table",{attrs:{class:dn,tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),this.getModuleName()==="calendar"?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter(),this.getModuleName()!=="daterangepicker"&&(S.add(this.table,"focus",this.addContentFocus,this),S.add(this.table,"blur",this.removeContentFocus,this))},e.prototype.addContentFocus=function(t){var i=this.tableBodyElement.querySelector("tr td.e-focused-date"),r=this.tableBodyElement.querySelector("tr td.e-selected");u(r)?u(i)||i.classList.add(ar):r.classList.add(ar)},e.prototype.removeContentFocus=function(t){var i=u(this.tableBodyElement)?null:this.tableBodyElement.querySelector("tr td.e-focused-date"),r=u(this.tableBodyElement)?null:this.tableBodyElement.querySelector("tr td.e-selected");u(r)?u(i)||i.classList.remove(ar):r.classList.remove(ar)},e.prototype.getCultureValues=function(){var t=[],i,r="days.stand-alone."+this.dayHeaderFormat.toLowerCase();if(this.locale==="en"||this.locale==="en-US"?i=j(r,Oi()):i=this.getCultureObjects(Bi,""+this.locale),!u(i))for(var n=0,s=Object.keys(i);n<s.length;n++){var o=s[n];t.push(j(o,i))}return t},e.prototype.toCapitalize=function(t){return!u(t)&&t.length?t[0].toUpperCase()+t.slice(1):t},e.prototype.createContentHeader=function(){this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content .e-week-header")[0])||ne(this.element.querySelectorAll(".e-content .e-week-header")[0]):u(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||ne(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var t=6,i="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:Zg}),this.weekNumber&&(i+='<th class="e-week-number" aria-hidden="true"></th>',this.getModuleName()==="calendar"?R([this.element],""+Sa):R([this.calendarElement],""+Sa));var r=this.getCultureValues().length>0&&this.getCultureValues()?this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek):null;if(!u(r))for(var n=0;n<=t;n++)i+='<th  class="">'+this.toCapitalize(r[n])+"</th>";i="<tr>"+i+"</tr>",this.tableHeadElement.innerHTML=i,this.table.appendChild(this.tableHeadElement)},e.prototype.createContentBody=function(){switch(this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content tbody")[0])||ne(this.element.querySelectorAll(".e-content tbody")[0]):u(this.calendarElement.querySelectorAll(".e-content tbody")[0])||ne(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},e.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today")),this.todayElement.setAttribute("tabindex","0")},e.prototype.createContentFooter=function(){if(this.showTodayButton){var t=new Date(+this.min),i=new Date(+this.max),r={today:"Today"};this.globalize=new Ne(this.locale),this.l10=new Xt(this.getModuleName(),r,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),Pi(this.todayElement),this.updateFooter(),R([this.todayElement],[tm,Wl,im,nm,rm]),(!(+new Date(t.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(i.setHours(0,0,0,0)))||this.todayDisabled)&&R([this.todayElement],Be),this.footer=this.createElement("div",{className:em}),this.footer.appendChild(this.todayElement),this.getModuleName()==="calendar"&&this.element.appendChild(this.footer),this.getModuleName()==="datepicker"&&this.calendarElement.appendChild(this.footer),this.getModuleName()==="datetimepicker"&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(Be)||S.add(this.todayElement,"click",this.todayButtonClick,this)}},e.prototype.wireEvents=function(t,i,r,n){S.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=P(this.defaultKeyConfigs,this.keyConfigs),this.getModuleName()==="calendar"?this.keyboardModule=new St(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new St(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},e.prototype.dateWireEvents=function(t,i,r,n){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=P(this.defaultKeyConfigs,r),this.serverModuleName=n},e.prototype.todayButtonClick=function(t,i,r){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(i)),r):this.navigateTo("Month",new Date(this.checkValue(i)),r))},e.prototype.resetCalendar=function(){this.calendarElement&&ne(this.calendarElement),this.tableBodyElement&&ne(this.tableBodyElement),this.table&&ne(this.table),this.tableHeadElement&&ne(this.tableHeadElement),this.nextIcon&&ne(this.nextIcon),this.previousIcon&&ne(this.previousIcon),this.footer&&ne(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},e.prototype.keyActionHandle=function(t,i,r){if(!(this.calendarElement===null&&t.action==="escape")){var n=this.tableBodyElement.querySelector("tr td.e-focused-date"),s;r?!u(n)&&+i===parseInt(n.getAttribute("id").split("_")[0],10)?s=n:s=this.tableBodyElement.querySelector("tr td.e-selected"):s=this.tableBodyElement.querySelector("tr td.e-selected");var o=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=o===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",t.action){case"moveLeft":this.getModuleName()!=="daterangepicker"&&!u(t.target)&&t.target.classList.length>0&&t.target.classList.contains(dn)&&(this.keyboardNavigate(-1,o,t,this.max,this.min),t.preventDefault());break;case"moveRight":this.getModuleName()!=="daterangepicker"&&!u(t.target)&&t.target.classList.length>0&&t.target.classList.contains(dn)&&(this.keyboardNavigate(1,o,t,this.max,this.min),t.preventDefault());break;case"moveUp":this.getModuleName()!=="daterangepicker"&&!u(t.target)&&t.target.classList.length>0&&t.target.classList.contains(dn)&&(o===0?this.keyboardNavigate(-7,o,t,this.max,this.min):this.keyboardNavigate(-4,o,t,this.max,this.min),t.preventDefault());break;case"moveDown":this.getModuleName()!=="daterangepicker"&&!u(t.target)&&t.target.classList.length>0&&t.target.classList.contains(dn)&&(o===0?this.keyboardNavigate(7,o,t,this.max,this.min):this.keyboardNavigate(4,o,t,this.max,this.min),t.preventDefault());break;case"select":if(t.target===this.headerTitleElement)this.navigateTitle(t);else if(t.target===this.previousIcon&&!t.target.className.includes(Be))this.navigatePrevious(t);else if(t.target===this.nextIcon&&!t.target.className.includes(Be))this.navigateNext(t);else if(t.target===this.todayElement&&!t.target.className.includes(Be))this.todayButtonClick(t,i),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&this.element.focus();else{var p=u(n)?s:n;if(!u(p)&&!p.classList.contains(Be))if(h){var c=new Date(parseInt(""+p.id,0));this.selectDate(t,c,p),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&this.element.focus()}else t.target.className.includes(Be)||this.contentClick(null,--o,p,i)}break;case"controlUp":this.title(),t.preventDefault();break;case"controlDown":(!u(n)&&!h||!u(s)&&!h)&&this.contentClick(null,--o,n||s,i),t.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),ne(this.tableBodyElement),o===0?this.renderMonths(t):o===1?this.renderYears(t):this.renderDecades(t),t.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,o),ne(this.tableBodyElement),o===0?this.renderMonths(t):o===1?this.renderYears(t):this.renderDecades(t),t.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),t.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),t.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),t.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),t.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),t.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),t.preventDefault();break;case"tab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&t.target===this.todayElement&&(t.preventDefault(),this.isAngular?this.inputElement.focus():this.element.focus(),this.hide());break;case"shiftTab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&t.target===this.headerTitleElement&&(t.preventDefault(),this.element.focus(),this.hide());break;case"escape":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&(t.target===this.headerTitleElement||t.target===this.previousIcon||t.target===this.nextIcon||t.target===this.todayElement)&&this.hide();break}}},e.prototype.keyboardNavigate=function(t,i,r,n,s){var o=new Date(this.checkValue(this.currentDate));switch(i){case 2:this.addYears(this.currentDate,t),this.isMonthYearRange(this.currentDate)?(ne(this.tableBodyElement),this.renderDecades(r)):this.currentDate=o;break;case 1:this.addMonths(this.currentDate,t),this.calendarMode==="Gregorian"?this.isMonthYearRange(this.currentDate)?(ne(this.tableBodyElement),this.renderYears(r)):this.currentDate=o:this.isMonthYearRange(this.currentDate)?(ne(this.tableBodyElement),this.renderYears(r)):this.currentDate=o;break;case 0:this.addDay(this.currentDate,t,r,n,s),this.isMinMaxRange(this.currentDate)?(ne(this.tableBodyElement),this.renderMonths(r)):this.currentDate=o;break}},e.prototype.preRender=function(t){var i=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(r){i.triggerNavigate(r)}},e.prototype.minMaxDate=function(t){var i=new Date(new Date(+t).setHours(0,0,0,0)),r=new Date(new Date(+this.min).setHours(0,0,0,0)),n=new Date(new Date(+this.max).setHours(0,0,0,0));return(+i==+r||+i==+n)&&(+t<+this.min&&(t=new Date(+this.min)),+t>+this.max&&(t=new Date(+this.max))),t},e.prototype.renderMonths=function(t,i,r){var n=this.weekNumber?8:7,s;this.calendarMode==="Gregorian"?s=this.renderDays(this.currentDate,i,null,null,r,t):s=this.islamicModule.islamicRenderDays(this.currentDate,i),this.createContentHeader(),this.calendarMode==="Gregorian"?this.renderTemplate(s,n,ba,t,i):this.islamicModule.islamicRenderTemplate(s,n,ba,t,i)},e.prototype.renderDays=function(t,i,r,n,s,o){var l=[],h=42,p=s?new Date(+t):this.getDate(new Date,this.timezone),c=new Date(this.checkValue(t)),d,f=c.getMonth();this.titleUpdate(t,"days");var g=c;for(c=new Date(g.getFullYear(),g.getMonth(),0,g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds());c.getDay()!==this.firstDayOfWeek;)this.setStartDate(c,-1*wa);for(var m=0;m<h;++m){var v=this.createElement("td",{className:Ul}),y=this.createElement("span");if(m%7===0&&this.weekNumber){var w=this.weekRule==="FirstDay"?6:this.weekRule==="FirstFourDayWeek"?3:0,b=new Date(c.getFullYear(),c.getMonth(),c.getDate()+w);y.textContent=""+this.getWeek(b),v.appendChild(y),R([v],""+Sa),l.push(v)}d=new Date(+c),c=this.minMaxDate(c);var I={type:"dateTime",skeleton:"full"},k=this.globalize.parseDate(this.globalize.formatDate(c,I),I),D=this.dayCell(c),W=this.globalize.formatDate(c,{type:"date",skeleton:"full"}),Z=this.createElement("span");Z.textContent=this.globalize.formatDate(c,{format:"d",type:"date",skeleton:"yMd"});var J=this.min>c||this.max<c;J?(R([D],Be),R([D],_i)):Z.setAttribute("title",""+W),f!==c.getMonth()&&(R([D],Kt),Z.setAttribute("aria-disabled","true")),(c.getDay()===0||c.getDay()===6)&&R([D],Jg),D.appendChild(Z),this.renderDayCellArgs={date:c,isDisabled:!1,element:D,isOutOfRange:J};var X=this.renderDayCellArgs;if(this.renderDayCellEvent(X),X.isDisabled){var L=new Date(this.checkValue(i)),O=new Date(this.checkValue(X.date));if(r){if(!u(n)&&n.length>0)for(var F=0;F<n.length;F++){var V=+new Date(this.globalize.formatDate(X.date,{type:"date",skeleton:"yMd"})),K=+new Date(this.globalize.formatDate(n[F],{type:"date",skeleton:"yMd"}));V===K&&(n.splice(F,1),F=-1)}}else L&&+L==+O&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!D.classList.contains(lt)&&(R([D],Be),R([D],_i),Z.setAttribute("aria-disabled","true"),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var U=D.classList.contains(Kt),H=D.classList.contains(Be);H||S.add(D,"click",this.clickHandler,this);var z=void 0;if(!u(o)&&o.type==="click"&&(z=o.currentTarget),r&&!u(n)&&!H){for(var Y=0;Y<n.length;Y++){var le=this.calendarMode==="Gregorian"?"gregorian":"islamic",de={format:null,type:"date",skeleton:"short",calendar:le},V=this.globalize.formatDate(c,de),K=this.globalize.formatDate(n[Y],de);if((V===K&&this.getDateVal(c,n[Y])||this.getDateVal(c,i))&&R([D],lt),!u(z)&&z.innerText===D.innerText&&this.previousDates&&D.classList.contains(lt)&&z.classList.contains(lt)){N([D],lt),this.previousDates=!1;for(var he=this.copyValues(n),ue=0;ue<he.length;ue++){var ie=this.calendarMode==="Gregorian"?"gregorian":"islamic",ye={format:null,type:"date",skeleton:"short",calendar:ie},_=this.globalize.formatDate(k,ye),Fe=this.globalize.formatDate(he[ue],ye);if(_===Fe){var F=he.indexOf(he[ue]);he.splice(F,1),n.splice(F,1)}}this.setProperties({values:he},!0)}else this.updateFocus(U,H,c,D,t)}n.length<=0&&this.updateFocus(U,H,c,D,t)}else!H&&this.getDateVal(c,i)&&R([D],lt);this.updateFocus(U,H,c,D,t),!u(k)&&k.getFullYear()===p.getFullYear()&&k.getMonth()===p.getMonth()&&k.getDate()===p.getDate()&&R([D],Wl),l.push(this.renderDayCellArgs.element),c=new Date(+d),this.addDay(c,1,null,this.max,this.min)}return l},e.prototype.updateFocus=function(t,i,r,n,s){s.getDate()===r.getDate()&&!t&&!i?R([n],Ft):(s>=this.max&&parseInt(n.id,0)===+this.max&&!t&&!i&&R([n],Ft),s<=this.min&&parseInt(n.id,0)===+this.min&&!t&&!i&&R([n],Ft))},e.prototype.renderYears=function(t,i){this.removeTableHeadElement();var r=4,n=[],s=u(i),o=new Date(this.checkValue(this.currentDate)),l=o.getMonth(),h=o.getFullYear(),p=o,c=p.getFullYear(),d=new Date(this.checkValue(this.min)).getFullYear(),f=new Date(this.checkValue(this.min)).getMonth(),g=new Date(this.checkValue(this.max)).getFullYear(),m=new Date(this.checkValue(this.max)).getMonth();p.setMonth(0),this.titleUpdate(this.currentDate,"months"),p.setDate(1);for(var v=0;v<12;++v){var y=this.dayCell(p),w=this.createElement("span"),b=i&&i.getMonth()===p.getMonth(),I=i&&i.getFullYear()===h&&b,k=this.globalize.formatDate(p,{type:"date",format:"MMM y"});w.textContent=this.toCapitalize(this.globalize.formatDate(p,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(c<d||v<f&&c===d)||this.max&&(c>g||v>m&&c>=g)?R([y],Be):!s&&I?R([y],lt):p.getMonth()===l&&this.currentDate.getMonth()===l&&R([y],Ft),p.setDate(1),p.setMonth(p.getMonth()+1),y.classList.contains(Be)||(S.add(y,"click",this.clickHandler,this),w.setAttribute("title",""+k)),y.appendChild(w),n.push(y)}this.renderTemplate(n,r,Ca,t,i)},e.prototype.renderDecades=function(t,i){this.removeTableHeadElement();var r=4,n=12,s=[],o=new Date(this.checkValue(this.currentDate));o.setMonth(0),o.setDate(1);var l=o.getFullYear(),h=new Date(o.setFullYear(l-l%10)),p=new Date(o.setFullYear(l-l%10+9)),c=h.getFullYear(),d=p.getFullYear(),f=this.globalize.formatDate(h,{format:null,type:"dateTime",skeleton:"y"}),g=this.globalize.formatDate(p,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=f+" - "+g;for(var m=new Date(l-l%10-1,0,1),v=m.getFullYear(),y=0;y<n;++y){var w=v+y;o.setFullYear(w);var b=this.dayCell(o),I=this.createElement("span");I.textContent=this.globalize.formatDate(o,{format:null,type:"dateTime",skeleton:"y"}),w<c||w>d?(R([b],ya),I.setAttribute("aria-disabled","true"),!u(i)&&o.getFullYear()===i.getFullYear()&&R([b],lt),(w<new Date(this.checkValue(this.min)).getFullYear()||w>new Date(this.checkValue(this.max)).getFullYear())&&R([b],Be)):w<new Date(this.checkValue(this.min)).getFullYear()||w>new Date(this.checkValue(this.max)).getFullYear()?R([b],Be):!u(i)&&o.getFullYear()===i.getFullYear()?R([b],lt):o.getFullYear()===this.currentDate.getFullYear()&&!b.classList.contains(Be)&&R([b],Ft),b.classList.contains(Be)||(S.add(b,"click",this.clickHandler,this),I.setAttribute("title",""+I.textContent)),b.appendChild(I),s.push(b)}this.renderTemplate(s,r,"e-decade",t,i)},e.prototype.dayCell=function(t){var i=this.calendarMode==="Gregorian"?"gregorian":"islamic",r={skeleton:"full",type:"dateTime",calendar:i},n=this.globalize.parseDate(this.globalize.formatDate(t,r),r),s;u(n)||(s=n.valueOf());var o={className:Ul,attrs:{id:""+oi(""+s),"aria-selected":"false"}};return this.createElement("td",o)},e.prototype.firstDay=function(t){var i=this.currentView()!=="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+Kt):this.tableBodyElement.querySelectorAll("td:not(."+ya);if(i.length){for(var r=0;r<i.length;r++)if(!i[r].classList.contains(Be)){t=new Date(parseInt(i[r].id,0));break}}return t},e.prototype.lastDay=function(t,i){var r=new Date(t.getFullYear(),t.getMonth()+1,0);if(i!==2){var n=Math.abs(r.getTimezoneOffset()-this.firstDay(t).getTimezoneOffset());return n&&r.setHours(this.firstDay(t).getHours()+n/60),this.findLastDay(r)}else return this.findLastDay(this.firstDay(r))},e.prototype.checkDateValue=function(t){return!u(t)&&t instanceof Date&&!isNaN(+t)?t:null},e.prototype.findLastDay=function(t){var i=this.currentView()==="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+ya):this.tableBodyElement.querySelectorAll("td:not(."+Kt);if(i.length){for(var r=i.length-1;r>=0;r--)if(!i[r].classList.contains(Be)){t=new Date(parseInt(i[r].id,0));break}}return t},e.prototype.removeTableHeadElement=function(){this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content table thead")[0])||ne(this.tableHeadElement):u(this.calendarElement.querySelectorAll(".e-content table thead")[0])||ne(this.tableHeadElement)},e.prototype.renderTemplate=function(t,i,r,n,s){var o=this.getViewNumber(this.currentView()),l;this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),N([this.contentElement,this.headerElement],[ba,Vl,Ca]),R([this.contentElement,this.headerElement],[r]);for(var h=41,p=35,c=6,d=i,f=0,g=0;g<t.length/i;++g){for(l=this.createElement("tr"),f=0+f;f<d;f++)!t[f].classList.contains("e-week-number")&&!u(t[f].children[0])&&(R([t[f].children[0]],[jl]),Pi(t[f].children[0],{duration:600,isCenterRipple:!0})),l.appendChild(t[f]),this.weekNumber&&f===c+1&&t[c+1].classList.contains(Kt)&&R([l],ns),!this.weekNumber&&f===c&&t[c].classList.contains(Kt)&&R([l],ns),this.weekNumber?f===h&&t[h].classList.contains(Kt)&&R([l],ns):f===p&&t[p].classList.contains(Kt)&&R([l],ns);d=d+i,f=f+0,this.tableBodyElement.appendChild(l)}this.table.querySelector("tbody").className=this.effect,this.calendarMode==="Gregorian"?this.iconHandler():this.islamicModule.islamicIconHandler(),(o!==this.getViewNumber(this.currentView())||o===0&&o!==this.getViewNumber(this.currentView()))&&this.navigateHandler(n),this.setAriaActiveDescendant()},e.prototype.clickHandler=function(t,i){this.clickEventEmitter(t);var r=t.currentTarget,n=this.getViewNumber(this.currentView());r.classList.contains(Kt)?this.contentClick(t,0,null,i):n===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.contentClick(t,1,null,i):n===2?this.contentClick(t,1,null,i):!r.classList.contains(Kt)&&n===0?this.selectDate(t,this.getIdValue(t,null),null):this.contentClick(t,0,r,i),this.getModuleName()==="calendar"&&this.table.focus()},e.prototype.clickEventEmitter=function(t){t.preventDefault()},e.prototype.contentClick=function(t,i,r,n){var s=this.getViewNumber(this.currentView()),o=this.getIdValue(t,r);switch(i){case 0:s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(ne(this.tableBodyElement),this.currentDate=o,this.effect=ss,this.renderMonths(t)):(this.calendarMode==="Gregorian"?(this.currentDate.setMonth(o.getMonth()),o.getMonth()>0&&this.currentDate.getMonth()!==o.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(o.getFullYear())):this.currentDate=o,this.effect=ss,ne(this.tableBodyElement),this.renderMonths(t));break;case 1:if(s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(t,o,null);else{if(this.calendarMode==="Gregorian")this.currentDate.setFullYear(o.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var l=this.islamicModule.getIslamicDate(o);this.currentDate=this.islamicModule.toGregorian(l.year,l.month,1)}this.effect=ss,ne(this.tableBodyElement),this.renderYears(t)}}},e.prototype.switchView=function(t,i,r,n){switch(t){case 0:ne(this.tableBodyElement),this.renderMonths(i,null,n);break;case 1:ne(this.tableBodyElement),this.renderYears(i);break;case 2:ne(this.tableBodyElement),this.renderDecades(i)}},e.prototype.getModuleName=function(){return"calendar"},e.prototype.requiredModules=function(){var t=[];return this.calendarMode==="Islamic"&&t.push({args:[this],member:"islamic",name:"Islamic"}),t},e.prototype.getPersistData=function(){var t=["value"];return this.addOnPersist(t)},e.prototype.onPropertyChanged=function(t,i,r,n){this.effect="";for(var s=0,o=Object.keys(t);s<o.length;s++){var l=o[s];switch(l){case"enableRtl":t.enableRtl?this.getModuleName()==="calendar"?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):this.getModuleName()==="calendar"?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.getModuleName()!=="datepicker"?this.createContentHeader():this.calendarElement&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),l==="min"?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(t.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(t.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&ne(this.tableBodyElement),this.minMaxUpdate(),r&&this.validateValues(r,n),this.getModuleName()!=="datepicker"?this.createContentBody():this.calendarElement&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(ne(this.todayElement),ne(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(N([this.todayElement],Be),ne(this.todayElement),ne(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody());break;case"locale":if(this.globalize=new Ne(this.locale),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody()),this.getModuleName()==="calendar"){var h={today:"Today"};this.l10=new Xt(this.getModuleName(),h,this.locale)}this.l10.setLocale(this.locale),this.showTodayButton&&this.updateFooter();break;case"showTodayButton":t.showTodayButton?this.createContentFooter():!u(this.todayElement)&&!u(this.footer)&&(ne(this.todayElement),ne(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:t.showTodayButton},!0);break}}},e.prototype.validateValues=function(t,i){if(t&&!u(i)&&i.length>0){for(var r=this.copyValues(i),n=0;n<r.length;n++){var s=r[n],o=this.calendarMode==="Gregorian"?"gregorian":"islamic",l=void 0;this.calendarMode==="Gregorian"?l=this.globalize.formatDate(s,{type:"date",skeleton:"yMd"}):l=this.globalize.formatDate(s,{type:"dateTime",skeleton:"full",calendar:"islamic"});var h={type:"date",skeleton:"yMd",calendar:o},p=this.globalize.formatDate(this.min,h),c=p,d={type:"date",skeleton:"yMd",calendar:o},f=this.globalize.formatDate(this.max,d),g=f;(+new Date(l)<+new Date(c)||+new Date(l)>+new Date(g))&&(r.splice(n,1),n=-1)}this.setProperties({values:r},!0)}},e.prototype.setValueUpdate=function(){u(this.tableBodyElement)||(ne(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},e.prototype.copyValues=function(t){var i=[];if(!u(t)&&t.length>0)for(var r=0;r<t.length;r++)i.push(new Date(+t[r]));return i},e.prototype.titleUpdate=function(t,i){var r=new Ne(this.locale),n,s,o=this.calendarMode==="Gregorian"?"gregorian":"islamic";switch(this.calendarMode==="Gregorian"?(n=r.formatDate(t,{type:"dateTime",skeleton:"yMMMM",calendar:o}),s=r.formatDate(t,{format:null,type:"dateTime",skeleton:"y",calendar:o})):(n=r.formatDate(t,{type:"dateTime",format:"MMMM y",calendar:o}),s=r.formatDate(t,{type:"dateTime",format:"y",calendar:o})),i){case"days":this.headerTitleElement.textContent=this.toCapitalize(n);break;case"months":this.headerTitleElement.textContent=s}},e.prototype.setActiveDescendant=function(){var t,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),r=this.tableBodyElement.querySelector("tr td.e-selected"),n=this.calendarMode==="Gregorian"?"gregorian":"islamic",s,o=this.currentView();return o==="Month"?s=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"full",calendar:n}):o==="Year"?n!=="islamic"?s=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"yMMMM",calendar:n}):s=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:n}):s=this.globalize.formatDate(this.currentDate,{format:null,type:"date",skeleton:"y",calendar:n}),(r||i)&&(u(r)||r.setAttribute("aria-selected","true"),(i||r).setAttribute("aria-label",s),t=(i||r).getAttribute("id")),t},e.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},e.prototype.destroy=function(){this.getModuleName()==="calendar"&&this.element?N([this.element],[cn]):this.calendarElement&&this.element&&N([this.element],[cn]),this.getModuleName()==="calendar"&&this.element&&(u(this.headerTitleElement)||S.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&S.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),u(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),this.todayElement=null,this.tableBodyElement=null,this.todayButtonEvent=null,this.renderDayCellArgs=null,this.headerElement=null,this.nextIcon=null,this.table=null,this.tableHeadElement=null,this.previousIcon=null,this.headerTitleElement=null,this.footer=null,this.contentElement=null,a.prototype.destroy.call(this)},e.prototype.title=function(t){var i=this.getViewNumber(this.currentView());this.effect=ss,this.switchView(++i,t)},e.prototype.getViewNumber=function(t){return t==="Month"?0:t==="Year"?1:2},e.prototype.navigateTitle=function(t){t.preventDefault(),this.title(t)},e.prototype.previous=function(){this.effect="";var t=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(t);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(t);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(t);break}},e.prototype.navigatePrevious=function(t){!T.isDevice&&t.preventDefault(),this.calendarMode==="Gregorian"?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(t)},e.prototype.next=function(){this.effect="";var t=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(t);break;case"Year":this.addYears(this.currentDate,1),this.switchView(t);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(t);break}},e.prototype.navigateNext=function(t){!T.isDevice&&t.preventDefault(),this.calendarMode==="Gregorian"?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(t)},e.prototype.navigateTo=function(t,i,r){+i>=+this.min&&+i<=+this.max&&(this.currentDate=i),+i<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+i>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(t)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(t))&&(t=this.depth),this.switchView(this.getViewNumber(t),null,null,r)},e.prototype.currentView=function(){return!u(this.contentElement)&&this.contentElement.classList.contains(Ca)?"Year":!u(this.contentElement)&&this.contentElement.classList.contains(Vl)?"Decade":"Month"},e.prototype.getDateVal=function(t,i){return!u(i)&&t.getDate()===i.getDate()&&t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()},e.prototype.getCultureObjects=function(t,i){var r=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),n=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase(),s="main.";return this.calendarMode==="Gregorian"?j(s+""+this.locale+r,t):j("main."+this.locale+n,t)},e.prototype.getWeek=function(t){var i=new Date(this.checkValue(t)).valueOf(),r=new Date(t.getFullYear(),0,1).valueOf();return Math.ceil((i-r+wa)/wa/7)},e.prototype.setStartDate=function(t,i){var r=t.getTimezoneOffset(),n=new Date(t.getTime()+i),s=n.getTimezoneOffset()-r;t.setTime(n.getTime()+s*sm)},e.prototype.addMonths=function(t,i){if(this.calendarMode==="Gregorian"){var r=t.getDate();t.setDate(1),t.setMonth(t.getMonth()+i),t.setDate(Math.min(r,this.getMaxDays(t)))}else{var n=this.islamicModule.getIslamicDate(t);this.currentDate=this.islamicModule.toGregorian(n.year,n.month+i,1)}},e.prototype.addYears=function(t,i){if(this.calendarMode==="Gregorian"){var r=t.getDate();t.setDate(1),t.setFullYear(t.getFullYear()+i),t.setDate(Math.min(r,this.getMaxDays(t)))}else{var n=this.islamicModule.getIslamicDate(t);this.currentDate=this.islamicModule.toGregorian(n.year+i,n.month,1)}},e.prototype.getIdValue=function(t,i){var r;t?r=t.currentTarget:r=i;var n=this.calendarMode==="Gregorian"?"gregorian":"islamic",s={type:"dateTime",skeleton:"full",calendar:n},o=this.globalize.formatDate(new Date(parseInt(""+r.getAttribute("id"),0)),s),l=this.globalize.parseDate(o,s),h=l.valueOf()-l.valueOf()%1e3;return new Date(h)},e.prototype.adjustLongHeaderSize=function(){N([this.element],Gl),this.dayHeaderFormat==="Wide"&&R([this.getModuleName()==="calendar"?this.element:this.calendarElement],Gl)},e.prototype.selectDate=function(t,i,r,n,s){var o=r||t.currentTarget;if(this.isDateSelected=!1,this.currentView()==="Decade")this.setDateDecade(this.currentDate,i.getFullYear());else if(this.currentView()==="Year")this.setDateYear(this.currentDate,i);else{if(n&&!this.checkPresentDate(i,s)){var l=this.copyValues(s);!u(s)&&l.length>0?(l.push(new Date(this.checkValue(i))),this.setProperties({values:l},!0),this.setProperties({value:s[s.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(i))]},!0)}else this.setProperties({value:new Date(this.checkValue(i))},!0);this.currentDate=new Date(this.checkValue(i))}var h=M(o,"."+cn);if(u(h)&&(h=this.tableBodyElement),!n&&!u(h.querySelector("."+lt))&&N([h.querySelector("."+lt)],lt),!n&&!u(h.querySelector("."+Ft))&&N([h.querySelector("."+Ft)],Ft),!n&&!u(h.querySelector("."+ar))&&N([h.querySelector("."+ar)],ar),n){for(var l=this.copyValues(s),p=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),c=0;c<p.length;c++){var d=h.querySelectorAll("td."+Ft)[0],f=h.querySelectorAll("td."+lt)[0];p[c]===d&&N([p[c]],Ft),p[c]===f&&!this.checkPresentDate(new Date(parseInt(f.getAttribute("id").split("_")[0],10)),s)&&N([p[c]],lt)}if(o.classList.contains(lt)){N([o],lt);for(var g=0;g<l.length;g++){var m=this.calendarMode==="Gregorian"?"gregorian":"islamic",v={format:null,type:"date",skeleton:"short",calendar:m},y=this.globalize.formatDate(i,v),w=this.globalize.formatDate(l[g],v);if(y===w){var c=l.indexOf(l[g]);l.splice(c,1),R([o],Ft)}}this.setProperties({values:l},!0)}else R([o],lt)}else R([o],lt);this.isDateSelected=!0},e.prototype.checkPresentDate=function(t,i){var r=!1;if(!u(i))for(var n=0;n<i.length;n++){var s=this.calendarMode==="Gregorian"?"gregorian":"islamic",o=this.globalize.formatDate(t,{format:null,type:"date",skeleton:"short",calendar:s}),l=this.globalize.formatDate(i[n],{format:null,type:"date",skeleton:"short",calendar:s});o===l&&(r=!0)}return r},e.prototype.setAriaActiveDescendant=function(){$(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},e.prototype.previousIconHandler=function(t){t?u(this.previousIcon)||(S.remove(this.previousIcon,"click",this.navigatePreviousHandler),R([this.previousIcon],""+Be),R([this.previousIcon],""+_i),this.previousIcon.setAttribute("aria-disabled","true")):(S.add(this.previousIcon,"click",this.navigatePreviousHandler),N([this.previousIcon],""+Be),N([this.previousIcon],""+_i),this.previousIcon.setAttribute("aria-disabled","false"))},e.prototype.renderDayCellEvent=function(t){P(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",t)},e.prototype.navigatedEvent=function(t){P(this.navigatedArgs,{name:"navigated",event:t}),this.trigger("navigated",this.navigatedArgs)},e.prototype.triggerNavigate=function(t){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(t)},e.prototype.nextIconHandler=function(t){t?u(this.previousIcon)||(S.remove(this.nextIcon,"click",this.navigateNextHandler),R([this.nextIcon],Be),R([this.nextIcon],_i),this.nextIcon.setAttribute("aria-disabled","true")):(S.add(this.nextIcon,"click",this.navigateNextHandler),N([this.nextIcon],Be),N([this.nextIcon],_i),this.nextIcon.setAttribute("aria-disabled","false"))},e.prototype.compare=function(t,i,r){var n=i.getFullYear(),s,o;return s=n,o=0,r&&(n=n-n%r,s=n-n%r+r-1),t.getFullYear()>s?o=1:t.getFullYear()<n&&(o=-1),o},e.prototype.isMinMaxRange=function(t){return+t>=+this.min&&+t<=+this.max},e.prototype.isMonthYearRange=function(t){if(this.calendarMode==="Gregorian")return t.getMonth()>=this.min.getMonth()&&t.getFullYear()>=this.min.getFullYear()&&t.getMonth()<=this.max.getMonth()&&t.getFullYear()<=this.max.getFullYear();var i=this.islamicModule.getIslamicDate(t);return i.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&i.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&i.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&i.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},e.prototype.compareYear=function(t,i){return this.compare(t,i,0)},e.prototype.compareDecade=function(t,i){return this.compare(t,i,10)},e.prototype.shiftArray=function(t,i){return t.slice(i).concat(t.slice(0,i))},e.prototype.addDay=function(t,i,r,n,s){var o=i,l=new Date(+t);if(!u(this.tableBodyElement)&&!u(r)){for(;this.findNextTD(new Date(+t),o,n,s);)o+=i;var h=new Date(l.setDate(l.getDate()+o));o=+h>+n||+h<+s?o===i?i-i:i:o}t.setDate(t.getDate()+o)},e.prototype.findNextTD=function(t,i,r,n){var s=new Date(t.setDate(t.getDate()+i)),o=[],l=!1;if((!u(s)&&s.getMonth())===(!u(this.currentDate)&&this.currentDate.getMonth())){var h=void 0;this.calendarMode==="Gregorian"?h=this.renderDays(s):h=this.islamicModule.islamicRenderDays(this.currentDate,s),o=h.filter(function(c){return c.classList.contains(Be)})}else o=this.tableBodyElement.querySelectorAll("td."+Be);if(+s<=+r&&+s>=+n&&o.length)for(var p=0;p<o.length&&(l=+s==+new Date(parseInt(o[p].id,0)),!l);p++);return l},e.prototype.getMaxDays=function(t){var i,r=new Date(this.checkValue(t));i=28;for(var n=r.getMonth();r.getMonth()===n;)++i,r.setDate(i);return i-1},e.prototype.setDateDecade=function(t,i){t.setFullYear(i),this.setProperties({value:new Date(this.checkValue(t))},!0)},e.prototype.setDateYear=function(t,i){t.setFullYear(i.getFullYear(),i.getMonth(),t.getDate()),i.getMonth()!==t.getMonth()&&(t.setDate(0),this.currentDate=new Date(this.checkValue(i))),this.setProperties({value:new Date(this.checkValue(t))},!0)},e.prototype.compareMonth=function(t,i){var r;return t.getFullYear()>i.getFullYear()?r=1:t.getFullYear()<i.getFullYear()?r=-1:r=t.getMonth()===i.getMonth()?0:t.getMonth()>i.getMonth()?1:-1,r},e.prototype.checkValue=function(t){return t instanceof Date?t.toUTCString():""+t},e.prototype.checkView=function(){this.start!=="Decade"&&this.start!=="Year"&&this.setProperties({start:"Month"},!0),this.depth!=="Decade"&&this.depth!=="Year"&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},e.prototype.getDate=function(t,i){return i&&(t=new Date(t.toLocaleString("en-US",{timeZone:i}))),t},Ve([C(new Date(1900,0,1))],e.prototype,"min",void 0),Ve([C(!0)],e.prototype,"enabled",void 0),Ve([C(null)],e.prototype,"cssClass",void 0),Ve([C(new Date(2099,11,31))],e.prototype,"max",void 0),Ve([C(null)],e.prototype,"firstDayOfWeek",void 0),Ve([C("Gregorian")],e.prototype,"calendarMode",void 0),Ve([C("Month")],e.prototype,"start",void 0),Ve([C("Month")],e.prototype,"depth",void 0),Ve([C(!1)],e.prototype,"weekNumber",void 0),Ve([C("FirstDay")],e.prototype,"weekRule",void 0),Ve([C(!0)],e.prototype,"showTodayButton",void 0),Ve([C("Short")],e.prototype,"dayHeaderFormat",void 0),Ve([C(!1)],e.prototype,"enablePersistence",void 0),Ve([C(null)],e.prototype,"keyConfigs",void 0),Ve([C(null)],e.prototype,"serverTimezoneOffset",void 0),Ve([B()],e.prototype,"created",void 0),Ve([B()],e.prototype,"destroyed",void 0),Ve([B()],e.prototype,"navigated",void 0),Ve([B()],e.prototype,"renderDayCell",void 0),e=Ve([kt],e),e}(Hi),om=function(a){rp(e,a);function e(t,i){return a.call(this,t,i)||this}return e.prototype.render=function(){if(this.calendarMode==="Islamic"&&this.islamicModule===void 0&&Fp("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&typeof this.values=="object"&&!u(this.values)&&this.values.length>0){for(var t=[],i=[],r=0;r<this.values.length;r++)t.indexOf(+this.values[r])===-1&&(t.push(+this.values[r]),i.push(this.values[r]));this.setProperties({values:i},!0);for(var n=0;n<this.values.length;n++)if(!this.checkDateValue(this.values[n]))if(typeof this.values[n]=="string"&&this.checkDateValue(new Date(this.checkValue(this.values[n])))){var s=new Date(this.checkValue(this.values[n]));this.values.splice(n,1),this.values.splice(n,0,s)}else this.values.splice(n,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),this.getModuleName()==="calendar"&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),a.prototype.render.call(this),this.getModuleName()==="calendar"){var o=M(this.element,"form");o&&S.add(o,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},e.prototype.setEnable=function(t){t?N([this.element],Be):R([this.element],Be)},e.prototype.setClass=function(t,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(t)||(t=t.replace(/\s+/g," ").trim()),!u(i)&&i!==""&&N([this.element],i.split(" ")),u(t)||R([this.element],t.split(" "))},e.prototype.isDayLightSaving=function(){var t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(i,t)},e.prototype.setTimeZone=function(t){if(!u(this.serverTimezoneOffset)&&this.value){var i=t,r=new Date().getTimezoneOffset()/60,n=i+r;n=this.isDayLightSaving()?n--:n,this.value=new Date(this.value.getTime()+n*60*60*1e3)}},e.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},e.prototype.validateDate=function(){typeof this.value=="string"&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),a.prototype.validateDate.call(this,this.value),!u(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},e.prototype.minMaxUpdate=function(){this.getModuleName()==="calendar"&&(!u(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!u(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),this.getModuleName()!=="calendar"&&!u(this.value)?!u(this.value)&&this.value<this.min&&this.min<=this.max?a.prototype.minMaxUpdate.call(this,this.min):!u(this.value)&&this.value>this.max&&this.min<=this.max&&a.prototype.minMaxUpdate.call(this,this.max):a.prototype.minMaxUpdate.call(this,this.value)},e.prototype.generateTodayVal=function(t){var i=new Date;return u(this.timezone)||(i=a.prototype.getDate.call(this,i,this.timezone)),t&&u(this.timezone)?(i.setHours(t.getHours()),i.setMinutes(t.getMinutes()),i.setSeconds(t.getSeconds()),i.setMilliseconds(t.getMilliseconds())):i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0),i},e.prototype.todayButtonClick=function(t){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=t,this.isMultiSelection){var r=this.copyValues(this.values);a.prototype.checkPresentDate.call(this,i,this.values)||(r.push(i),this.setProperties({values:r}))}a.prototype.todayButtonClick.call(this,t,new Date(+this.value))}},e.prototype.keyActionHandle=function(t){a.prototype.keyActionHandle.call(this,t,this.value,this.isMultiSelection)},e.prototype.preRender=function(){var t=this;this.changeHandler=function(i){t.triggerChange(i)},this.checkView(),a.prototype.preRender.call(this,this.value)},e.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,a.prototype.createContent.call(this)},e.prototype.minMaxDate=function(t){return a.prototype.minMaxDate.call(this,t)},e.prototype.renderMonths=function(t,i,r){a.prototype.renderMonths.call(this,t,this.value,r)},e.prototype.renderDays=function(t,i,r,n,s,o){var l=a.prototype.renderDays.call(this,t,this.value,this.isMultiSelection,this.values,s,o);return this.isMultiSelection&&a.prototype.validateValues.call(this,this.isMultiSelection,this.values),l},e.prototype.renderYears=function(t){this.calendarMode==="Gregorian"?a.prototype.renderYears.call(this,t,this.value):this.islamicModule.islamicRenderYears(t,this.value)},e.prototype.renderDecades=function(t){this.calendarMode==="Gregorian"?a.prototype.renderDecades.call(this,t,this.value):this.islamicModule.islamicRenderDecade(t,this.value)},e.prototype.renderTemplate=function(t,i,r,n){this.calendarMode==="Gregorian"?a.prototype.renderTemplate.call(this,t,i,r,n,this.value):this.islamicModule.islamicRenderTemplate(t,i,r,n,this.value),this.changedArgs={value:this.value,values:this.values},n&&n.type==="click"&&n.currentTarget.classList.contains(Kt)?this.changeHandler(n):this.changeHandler()},e.prototype.clickHandler=function(t){var i=t.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(Kt))if(this.isMultiSelection){var r=this.copyValues(this.values);r.toString().indexOf(this.getIdValue(t,null).toString())===-1?(r.push(this.getIdValue(t,null)),this.setProperties({values:r},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(t,null)},!0);var n=this.currentView();a.prototype.clickHandler.call(this,t,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!u(this.tableBodyElement.querySelectorAll("."+Ft)[0])&&n==="Year"&&this.tableBodyElement.querySelectorAll("."+Ft)[0].classList.remove(Ft)},e.prototype.switchView=function(t,i,r,n){a.prototype.switchView.call(this,t,i,this.isMultiSelection,n)},e.prototype.getModuleName=function(){return a.prototype.getModuleName.call(this),"calendar"},e.prototype.getPersistData=function(){a.prototype.getPersistData.call(this);var t=["value","values"];return this.addOnPersist(t)},e.prototype.onPropertyChanged=function(t,i){this.effect="",this.rangeValidation(this.min,this.max);for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"value":this.isDateSelected&&(typeof t.value=="string"?this.setProperties({value:new Date(this.checkValue(t.value))},!0):t.value=new Date(this.checkValue(t.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if(typeof t.values=="string"||typeof t.values=="number")this.setProperties({values:null},!0);else{for(var o=this.copyValues(this.values),l=0;l<o.length;l++){var h=o[l];this.checkDateValue(h)&&!a.prototype.checkPresentDate.call(this,h,o)&&o.push(h)}this.setProperties({values:o},!0),this.values.length>0&&this.setProperties({value:t.values[t.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:t.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":this.getModuleName()==="calendar"&&this.setClass(t.cssClass,i.cssClass);break;default:a.prototype.onPropertyChanged.call(this,t,i,this.isMultiSelection,this.values)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},e.prototype.destroy=function(){if(a.prototype.destroy.call(this),this.getModuleName()==="calendar"){this.changedArgs=null;var t=M(this.element,"form");t&&S.remove(t,"reset",this.formResetHandler.bind(this))}},e.prototype.navigateTo=function(t,i,r){this.minMaxUpdate(),a.prototype.navigateTo.call(this,t,i,r)},e.prototype.currentView=function(){return a.prototype.currentView.call(this)},e.prototype.addDate=function(t){if(typeof t!="string"&&typeof t!="number"){var i=this.copyValues(this.values);if(typeof t=="object"&&t.length>0)for(var r=t,n=0;n<r.length;n++)this.checkDateValue(r[n])&&!a.prototype.checkPresentDate.call(this,r[n],i)&&(!u(i)&&i.length>0?i.push(r[n]):i=[new Date(+r[n])]);else this.checkDateValue(t)&&!a.prototype.checkPresentDate.call(this,t,i)&&(!u(i)&&i.length>0?i.push(t):i=[new Date(+t)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},e.prototype.removeDate=function(t){if(typeof t!="string"&&typeof t!="number"&&!u(this.values)&&this.values.length>0){var i=this.copyValues(this.values);if(typeof t=="object"&&t.length>0)for(var r=t,n=0;n<r.length;n++)for(var s=0;s<i.length;s++)+i[s]==+r[n]&&i.splice(s,1);else for(var s=0;s<i.length;s++)+i[s]==+t&&i.splice(s,1);this.setProperties({values:i},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},e.prototype.setTodayDate=function(t){var i=new Date(+t);this.setProperties({value:i},!0),a.prototype.todayButtonClick.call(this,null,i,!0)},e.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),a.prototype.setValueUpdate.call(this)},e.prototype.selectDate=function(t,i,r){a.prototype.selectDate.call(this,t,i,r,this.isMultiSelection,this.values),this.isMultiSelection&&!u(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(t)},e.prototype.changeEvent=function(t){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},e.prototype.triggerChange=function(t){!u(this.todayButtonEvent)&&this.isTodayClicked&&(t=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=t||null,this.changedArgs.isInteracted=!u(t),u(this.value)||this.setProperties({value:this.value},!0),!this.isMultiSelection&&+this.value!==Number.NaN&&(!u(this.value)&&!u(this.previousDate)||this.previousDate===null&&!isNaN(+this.value))?this.changeEvent(t):!u(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(t),this.previousValues=this.values.length)},Ve([C(null)],e.prototype,"value",void 0),Ve([C(null)],e.prototype,"values",void 0),Ve([C(!1)],e.prototype,"isMultiSelection",void 0),Ve([B()],e.prototype,"change",void 0),e=Ve([kt],e),e}(am),lm=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Me=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},hm="e-date-wrapper",as="e-datepicker",um="e-lib",pm="e-control",_l="e-popup-wrapper",cm="e-input-group-icon",dm="e-popup",fm="e-input-group",Ia="e-input-focus",gm="e-input",Kl="e-error",os="e-active",Yl="e-date-overflow",mm="e-date-icon",vm="e-icons",ym=300,Cm=4,ls="e-selected",bm="e-focused-date",xa="e-non-edit",$l=["title","class","style"],Wn=function(a){lm(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.isDateIconClicked=!1,r.isAltKeyPressed=!1,r.isInteracted=!0,r.invalidValueString=null,r.checkPreviousValue=null,r.maskedDateValue="",r.preventChange=!1,r.isIconClicked=!1,r.isDynamicValueChanged=!1,r.moduleName=r.getModuleName(),r.isFocused=!1,r.isBlur=!1,r.isKeyAction=!1,r.datepickerOptions=t,r}return e.prototype.render=function(){this.initialize(),this.bindEvents(),this.floatLabelType!=="Never"&&G.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},e.prototype.setTimeZone=function(t){if(!u(this.serverTimezoneOffset)&&this.value){var i=new Date().getTimezoneOffset()/60,r=t,n=r+i;n=this.isDayLightSaving()?n--:n,this.value=new Date(this.value.getTime()+n*60*60*1e3),this.updateInput()}},e.prototype.isDayLightSaving=function(){var t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,i)},e.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):$(this.inputElement,{readonly:""}),this.updateIconState()},e.prototype.updateIconState=function(){!this.allowEdit&&this.inputWrapper&&!this.readonly?this.inputElement.value===""?N([this.inputWrapper.container],[xa]):R([this.inputWrapper.container],[xa]):this.inputWrapper&&N([this.inputWrapper.container],[xa])},e.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)?(this.updateInput(!0),this.updateInputValue(this.maskedDateValue)):this.enableMask||this.updateInput(!0),this.previousElementValue=this.inputElement.value,this.previousDate=u(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},e.prototype.createInput=function(){var t={"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false","aria-label":this.getModuleName()};if(this.getModuleName()==="datepicker"){var i={placeholder:this.placeholder};this.globalize=new Ne(this.locale),this.l10n=new Xt("datepicker",i,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.fullScreenMode&&T.isDevice&&(this.cssClass+=" e-popup-expand");var r=this.cssClass;!u(this.cssClass)&&this.cssClass!==""&&(r=this.cssClass.replace(/\s+/g," ").trim());var n=!this.enableMask;this.inputWrapper=G.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:n,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:r,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[cm+" "+mm+" "+vm]},this.createElement),this.setWidth(this.width),this.inputElement.name!==""?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),$(this.inputElement,t),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),G.addAttributes({"aria-label":"select",role:"button"},this.inputWrapper.buttons[0]),R([this.inputWrapper.container],hm)},e.prototype.updateInput=function(t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r;if(this.value&&!this.isCalendar()&&this.disabledDates(t,i),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(a.prototype.validateDate.call(this),this.minMaxUpdates(),a.prototype.minMaxUpdate.call(this)),!u(this.value)){var n=this.value,s=void 0,o=u(this.formatString)?this.dateTimeFormat:this.formatString;if(this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?s=this.globalize.formatDate(this.value,{format:o,type:"dateTime",skeleton:"yMd"}):s=this.globalize.formatDate(this.value,{format:o,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s=this.globalize.formatDate(this.value,r)),+n<=+this.max&&+n>=+this.min)this.updateInputValue(s);else{var l=+n>=+this.max||!+this.value||!+this.value||+n<=+this.min;!this.strictMode&&l&&this.updateInputValue(s)}}u(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&u(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},e.prototype.minMaxUpdates=function(){!u(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!u(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},e.prototype.checkStringValue=function(t){var i=null,r=null,n=null;if(this.getModuleName()==="datetimepicker"){var s=new Ne(this.locale);this.calendarMode==="Gregorian"?(r={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},n={format:s.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(r={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n={format:s.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return i=this.checkDateValue(this.globalize.parseDate(t,r)),u(i)&&this.getModuleName()==="datetimepicker"&&(i=this.checkDateValue(this.globalize.parseDate(t,n))),i},e.prototype.checkInvalidValue=function(t){if(!(t instanceof Date)&&!u(t)){var i=null,r=t;if(typeof t=="number"&&(r=t.toString()),this.getModuleName()==="datetimepicker"){var n=new Ne(this.locale);this.calendarMode==="Gregorian"?(this.dateTimeFormat,n.getDatePattern({skeleton:"yMd"})):(this.dateTimeFormat,n.getDatePattern({skeleton:"yMd"}))}else this.calendarMode==="Gregorian"?this.formatString:this.formatString;var s=!1;if(typeof r!="string")r=null,s=!0;else if(typeof r=="string"&&(r=r.trim()),i=this.checkStringValue(r),!i){var o=null,l=null;o=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,l=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!o.test(r)&&!l.test(r)||/^[a-zA-Z0-9- ]*$/.test(r)||isNaN(+new Date(this.checkValue(r)))?s=!0:i=new Date(r)}s?(this.strictMode||(this.invalidValueString=r),this.setProperties({value:null},!0)):this.setProperties({value:i},!0)}},e.prototype.bindInputEvent=function(){(!u(this.formatString)||this.enableMask)&&(this.enableMask||this.formatString.indexOf("y")===-1?S.add(this.inputElement,"input",this.inputHandler,this):S.remove(this.inputElement,"input",this.inputHandler))},e.prototype.bindEvents=function(){S.add(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler,this),S.add(this.inputElement,"mouseup",this.mouseUpHandler,this),S.add(this.inputElement,"focus",this.inputFocusHandler,this),S.add(this.inputElement,"blur",this.inputBlurHandler,this),S.add(this.inputElement,"keyup",this.keyupHandler,this),this.enableMask&&S.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),S.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&S.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&S.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=P(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new St(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},e.prototype.keydownHandler=function(t){switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&(t.code!=="Delete"&&t.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:t}));break}},e.prototype.unBindEvents=function(){u(this.inputWrapper)||S.remove(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler),S.remove(this.inputElement,"mouseup",this.mouseUpHandler),S.remove(this.inputElement,"focus",this.inputFocusHandler),S.remove(this.inputElement,"blur",this.inputBlurHandler),S.remove(this.inputElement,"change",this.inputChangeHandler),S.remove(this.inputElement,"keyup",this.keyupHandler),this.enableMask&&S.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&S.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&S.remove(this.formElement,"reset",this.resetFormHandler)},e.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var t=this.inputElement.getAttribute("value");(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(t="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(t),this.errorClass())}},e.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=u(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},e.prototype.inputChangeHandler=function(t){this.enabled&&t.stopPropagation()},e.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&S.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},e.prototype.resetHandler=function(t){this.enabled&&(t.preventDefault(),this.clear(t))},e.prototype.mouseUpHandler=function(t){this.enableMask&&(t.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},e.prototype.clear=function(t){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue("");var i={event:t};if(this.trigger("cleared",i),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(t),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),M(this.element,"form")){var r=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),r.dispatchEvent(n)}},e.prototype.preventEventBubbling=function(t){t.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},e.prototype.updateInputValue=function(t){G.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.dateIconHandler=function(t){this.enabled&&(this.isIconClicked=!0,T.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),t.preventDefault(),this.readonly||(this.isCalendar()?this.hide(t):(this.isDateIconClicked=!0,this.show(null,t),this.getModuleName()==="datetimepicker"&&this.inputElement.focus(),this.inputElement.focus(),R([this.inputWrapper.container],[Ia]),R(this.inputWrapper.buttons,os))),this.isIconClicked=!1)},e.prototype.updateHtmlAttributeToWrapper=function(){if(!u(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var r=i[t];if(!u(this.htmlAttributes[""+r])&&$l.indexOf(r)>-1)if(r==="class"){var n=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();n!==""&&R([this.inputWrapper.container],n.split(" "))}else if(r==="style"){var s=this.inputWrapper.container.getAttribute(r);u(s)?s=this.htmlAttributes[""+r]:s.charAt(s.length-1)===";"?s=s+this.htmlAttributes[""+r]:s=s+";"+this.htmlAttributes[""+r],this.inputWrapper.container.setAttribute(r,s)}else this.inputWrapper.container.setAttribute(r,this.htmlAttributes[""+r])}},e.prototype.updateHtmlAttributeToElement=function(){if(!u(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var r=i[t];$l.indexOf(r)<0&&this.inputElement.setAttribute(r,this.htmlAttributes[""+r])}},e.prototype.updateCssClass=function(t,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(t)||(t=t.replace(/\s+/g," ").trim()),G.setCssClass(t,[this.inputWrapper.container],i),this.popupWrapper&&G.setCssClass(t,[this.popupWrapper],i)},e.prototype.calendarKeyActionHandle=function(t){switch(t.action){case"escape":this.isCalendar()?this.hide(t):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,t),this.getModuleName()==="datetimepicker"&&this.inputElement.focus();break}},e.prototype.inputFocusHandler=function(){if(this.isFocused=!0,!!this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length);var t={model:this};this.isDateIconClicked=!1,this.trigger("focus",t),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},e.prototype.inputHandler=function(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},e.prototype.inputBlurHandler=function(t){if(this.enabled){if(this.strictModeUpdate(),this.inputElement.value===""&&u(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.isBlur=!0,this.updateInput(!1,!0),this.isBlur=!1,this.popupUpdate(),this.changeTrigger(t),this.enableMask&&this.maskedDateValue&&this.placeholder&&this.floatLabelType!=="Always"&&this.inputElement.value===this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(t),this.getModuleName()==="datepicker"){var i={model:this};this.trigger("blur",i)}this.isCalendar()&&(this.defaultKeyConfigs=P(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new St(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}},e.prototype.documentHandler=function(t){!u(this.popupObj)&&!u(this.inputWrapper)&&(this.inputWrapper.container.contains(t.target)&&t.type!=="mousedown"||this.popupObj.element&&this.popupObj.element.contains(t.target))&&t.type!=="touchstart"&&t.preventDefault();var i=t.target;!M(i,".e-datepicker.e-popup-wrapper")&&!u(this.inputWrapper)&&M(i,"."+fm)!==this.inputWrapper.container&&!i.classList.contains("e-day")&&!i.classList.contains("e-dlg-overlay")?(this.hide(t),this.focusOut()):M(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!u(t.target.parentElement)&&t.target.parentElement.classList.contains("e-selected")&&M(i,".e-content")&&M(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())?this.hide(t):M(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+a.prototype.generateTodayVal.call(this,this.value)&&this.hide(t))},e.prototype.inputKeyActionHandle=function(t){var i=this.currentView();switch(t.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(t),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(t),this.getModuleName()==="datepicker"&&this.show(null,t);break;case"escape":this.hide(t);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(t),this.errorClass(),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(t),this.isCalendar()&&(t.preventDefault(),t.stopPropagation());break;case"tab":case"shiftTab":{var r=this.inputElement.selectionStart,n=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var s=this.inputElement.value.length;(r===0&&n===s||n!==s&&t.action==="tab"||r!==0&&t.action==="shiftTab")&&t.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:t}),r=this.inputElement.selectionStart,n=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(t),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=r,this.inputElement.selectionEnd=n),t.action==="tab"&&t.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&(t.preventDefault(),this.headerTitleElement.focus()),t.action==="shiftTab"&&t.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(t);break}default:this.defaultAction(t),t.action==="select"&&i===this.depth&&this.hide(t)}},e.prototype.defaultAction=function(t){this.previousDate=!u(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(a.prototype.keyActionHandle.call(this,t),this.isCalendar()&&$(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},e.prototype.popupUpdate=function(){if((u(this.value)&&!u(this.previousDate)||this.getModuleName()!=="datetimepicker"&&+this.value!=+this.previousDate||this.getModuleName()==="datetimepicker"&&+this.value!=+this.previousDateTime)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+ls).length>0&&N(this.popupObj.element.querySelectorAll("."+ls),[ls]),!u(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var t=new Date(this.checkValue(this.value));a.prototype.navigateTo.call(this,"Month",t)}},e.prototype.strictModeUpdate=function(){var t,i=/^y/,r=/[^a-zA-Z]/,n;if(this.getModuleName()==="datetimepicker"?t=u(this.formatString)?this.dateTimeFormat:this.formatString:(!i.test(this.formatString)||r.test(this.formatString))&&(t=u(this.formatString)?this.formatString:this.formatString.replace("dd","d")),u(t))t=this.formatString;else{var s=t.split("M").length-1;s<3&&(t=t.replace("MM","M"))}var o;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?o={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:o={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(this.calendarMode==="Gregorian"?n={format:t,type:"dateTime",skeleton:"yMd"}:n={format:t,type:"dateTime",skeleton:"yMd",calendar:"islamic"},o=n);var l;if(typeof this.inputElement.value=="string"&&(this.inputElement.value=this.inputElement.value.trim()),this.getModuleName()==="datetimepicker")if(this.checkDateValue(this.globalize.parseDate(this.inputElement.value,o))){var h=this.inputElement.value.replace(/(am|pm|Am|aM|pM|Pm)/g,function(p){return p.toLocaleUpperCase()});l=this.globalize.parseDate(h,o)}else this.calendarMode==="Gregorian"?n={format:t,type:"dateTime",skeleton:"yMd"}:n={format:t,type:"dateTime",skeleton:"yMd",calendar:"islamic"},l=this.globalize.parseDate(this.inputElement.value,n);else l=this.globalize.parseDate(this.inputElement.value,o),l=!u(l)&&isNaN(+l)?null:l,!u(this.formatString)&&this.inputElement.value!==""&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&this.formatString.indexOf("y")===-1&&l.setFullYear(this.value.getFullYear());this.getModuleName()==="datepicker"&&this.value&&!isNaN(+this.value)&&l&&l.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&l?(this.updateInputValue(this.globalize.formatDate(l,o)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:l},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:l},!0),this.strictMode&&!l&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),u(this.value)&&(this.currentDate=new Date(new Date().setHours(0,0,0,0)))},e.prototype.createCalendar=function(){var t=this;this.popupWrapper=this.createElement("div",{className:""+as+" "+_l,id:this.inputElement.id+"_options"}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),u(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),T.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=""+as+" e-date-modal",document.body.className+=" "+Yl,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new Yr(this.popupWrapper,{content:this.calendarElement,relateTo:T.isDevice?document.body:this.inputWrapper.container,position:T.isDevice?{X:"center",Y:"center"}:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},offsetY:Cm,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:T.isDevice?{X:"fit",Y:"fit"}:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},open:function(){T.isDevice&&t.fullScreenMode&&(t.iconRight=parseInt(window.getComputedStyle(t.calendarElement.querySelector(".e-header.e-month .e-prev")).marginRight,10)>16,t.touchModule=new Ha(t.calendarElement.querySelector(".e-content.e-month"),{swipe:t.CalendarSwipeHandler.bind(t)}),S.add(t.calendarElement.querySelector(".e-content.e-month"),"touchstart",t.TouchStartHandler,t)),t.getModuleName()!=="datetimepicker"&&document.activeElement!==t.inputElement&&(t.defaultKeyConfigs=P(t.defaultKeyConfigs,t.keyConfigs),t.calendarElement.children[1].firstElementChild.focus(),t.calendarKeyboardModules=new St(t.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:t.calendarKeyActionHandle.bind(t),keyConfigs:t.defaultKeyConfigs}),t.calendarKeyboardModules=new St(t.inputWrapper.container.children[t.index],{eventName:"keydown",keyAction:t.calendarKeyActionHandle.bind(t),keyConfigs:t.defaultKeyConfigs}))},close:function(){t.isDateIconClicked&&t.inputWrapper.container.children[t.index].focus(),t.value&&t.disabledDates(),t.popupObj&&t.popupObj.destroy(),t.resetCalendar(),ne(t.popupWrapper),t.popupObj=t.popupWrapper=null,t.preventArgs=null,t.calendarKeyboardModules=null,t.setAriaAttributes()},targetExitViewport:function(){T.isDevice||t.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},e.prototype.CalendarSwipeHandler=function(t){var i=0;if(this.iconRight)switch(t.swipeDirection){case"Left":i=1;break;case"Right":i=-1;break}else switch(t.swipeDirection){case"Up":i=1;break;case"Down":i=-1;break}this.touchStart&&(i===1?this.navigateNext(t):i===-1&&this.navigatePrevious(t),this.touchStart=!1)},e.prototype.TouchStartHandler=function(t){this.touchStart=!0},e.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},e.prototype.modelHeader=function(){var t,i=this.createElement("div",{className:"e-model-header"}),r=this.createElement("h1",{className:"e-model-year"}),n=this.createElement("div"),s=this.createElement("span",{className:"e-model-day"}),o=this.createElement("span",{className:"e-model-month"});if(this.calendarMode==="Gregorian"?t={format:"y",skeleton:"dateTime"}:t={format:"y",skeleton:"dateTime",calendar:"islamic"},r.textContent=""+this.globalize.formatDate(this.value||new Date,t),this.calendarMode==="Gregorian"?t={format:"E",skeleton:"dateTime"}:t={format:"E",skeleton:"dateTime",calendar:"islamic"},s.textContent=""+this.globalize.formatDate(this.value||new Date,t)+", ",this.calendarMode==="Gregorian"?t={format:"MMM d",skeleton:"dateTime"}:t={format:"MMM d",skeleton:"dateTime",calendar:"islamic"},o.textContent=""+this.globalize.formatDate(this.value||new Date,t),this.fullScreenMode){var l=this.createElement("span",{className:"e-popup-close"});S.add(l,"mousedown touchstart",this.modelCloseHandler,this);var h=this.calendarElement.querySelector("button.e-today");n.classList.add("e-day-wrapper"),h.classList.add("e-outline"),i.appendChild(l),i.appendChild(h)}this.fullScreenMode||i.appendChild(r),n.appendChild(s),n.appendChild(o),i.appendChild(n),this.calendarElement.insertBefore(i,this.calendarElement.firstElementChild)},e.prototype.modelCloseHandler=function(t){this.hide()},e.prototype.changeTrigger=function(t){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=t||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!u(t),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0),this.isKeyAction=!1},e.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},e.prototype.keyupHandler=function(t){this.isKeyAction=this.inputElement.value!==this.previousElementValue},e.prototype.changeEvent=function(t){!this.isIconClicked&&!(this.isBlur||this.isKeyAction)&&this.selectCalendar(t),(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())?(this.changedArgs.event=t||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(t),this.previousElementValue=this.inputElement.value,this.errorClass()):t&&this.hide(t),this.isKeyAction=!1},e.prototype.requiredModules=function(){var t=[];return this.calendarMode==="Islamic"&&t.push({args:[this],member:"islamic",name:"Islamic"}),this.enableMask&&t.push({args:[this],member:"MaskedDateTime"}),t},e.prototype.selectCalendar=function(t){var i,r,n;this.getModuleName()==="datetimepicker"?r=u(this.formatString)?this.dateTimeFormat:this.formatString:r=this.formatString,this.value&&(this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?n={format:r,type:"dateTime",skeleton:"yMd"}:n={format:r,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=this.globalize.formatDate(this.changedArgs.value,n)):(this.calendarMode==="Gregorian"?n={format:this.formatString,type:"dateTime",skeleton:"yMd"}:n={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},i=this.globalize.formatDate(this.changedArgs.value,n)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),u(i)||(this.updateInputValue(i),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},e.prototype.isCalendar=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+_l))},e.prototype.setWidth=function(t){typeof t=="number"?this.inputWrapper.container.style.width=Le(this.width):typeof t=="string"?this.inputWrapper.container.style.width=t.match(/px|%|em/)?this.width:Le(this.width):this.inputWrapper.container.style.width="100%"},e.prototype.show=function(t,i){var r=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var n=!0,s=void 0;!u(this.value)&&!(+this.value>=+new Date(this.checkValue(this.min))&&+this.value<=+new Date(this.checkValue(this.max)))?(s=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)):s=this.value||null,this.isCalendar()||(a.prototype.render.call(this),this.setProperties({value:s||null},!0),this.previousDate=s,this.createCalendar()),T.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){n=!1},popup:this.popupObj,event:i||null,cancel:!1,appendTo:T.isDevice?this.mobilePopupWrapper:document.body};var o=this.preventArgs;if(this.trigger("open",o,function(h){if(r.preventArgs=h,n&&!r.preventArgs.cancel){R(r.inputWrapper.buttons,os),r.preventArgs.appendTo.appendChild(r.popupWrapper),r.popupObj.refreshPosition(r.inputElement);var p={name:"FadeIn",duration:T.isDevice?0:ym};r.zIndex===1e3?r.popupObj.show(new ui(p),r.element):r.popupObj.show(new ui(p),null),a.prototype.setOverlayIndex.call(r,r.mobilePopupWrapper,r.popupObj.element,r.modal,T.isDevice),r.setAriaAttributes()}else r.popupObj.destroy(),r.popupWrapper=r.popupObj=null;!u(r.inputElement)&&r.inputElement.value===""&&!u(r.tableBodyElement)&&r.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(R([r.tableBodyElement.querySelector("td.e-selected")],bm),N(r.tableBodyElement.querySelectorAll("td.e-selected"),ls)),S.add(document,"mousedown touchstart",r.documentHandler,r)}),T.isDevice){var l=this.createElement("div",{className:"e-dlg-overlay"});l.style.zIndex=(this.zIndex-1).toString(),this.mobilePopupWrapper.appendChild(l)}}},e.prototype.hide=function(t){var i=this;if(u(this.popupWrapper))T.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var r=!0;this.preventArgs={preventDefault:function(){r=!1},popup:this.popupObj,event:t||null,cancel:!1},N(this.inputWrapper.buttons,os),N([document.body],Yl);var n=this.preventArgs;this.isCalendar()?this.trigger("close",n,function(s){i.closeEventCallback(r,s)}):this.closeEventCallback(r,n)}},e.prototype.closeEventCallback=function(t,i){this.preventArgs=i,this.isCalendar()&&t&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),N(this.inputWrapper.buttons,os)),this.setAriaAttributes(),T.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),T.isDevice&&!u(this.mobilePopupWrapper)&&t&&(u(this.preventArgs)||!this.preventArgs.cancel)&&(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null),S.remove(document,"mousedown touchstart",this.documentHandler),T.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},e.prototype.focusIn=function(t){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),R([this.inputWrapper.container],[Ia]))},e.prototype.focusOut=function(){document.activeElement===this.inputElement&&(N([this.inputWrapper.container],[Ia]),this.inputElement.blur())},e.prototype.currentView=function(){var t;return this.calendarElement&&(t=a.prototype.currentView.call(this)),t},e.prototype.navigateTo=function(t,i){this.calendarElement&&a.prototype.navigateTo.call(this,t,i)},e.prototype.destroy=function(){this.unBindEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.hide(null),a.prototype.destroy.call(this),G.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),u(this.keyboardModules)||this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains(dm)&&a.prototype.destroy.call(this);var t={"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-label":this.getModuleName()};this.inputElement&&(G.removeAttributes(t,this.inputElement),u(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),S.remove(this.inputElement,"blur",this.inputBlurHandler),S.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&ne(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),this.ngTag===null&&(this.inputElement&&(u(this.inputWrapper)||this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),N([this.inputElement],[gm])),N([this.element],[as]),u(this.inputWrapper)||ne(this.inputWrapper.container)),this.formElement&&S.remove(this.formElement,"reset",this.resetFormHandler),this.inputWrapper=null,this.keyboardModules=null},e.prototype.ensureInputAttribute=function(){for(var t=[],i=0;i<this.inputElement.attributes.length;i++)t[i]=this.inputElement.attributes[i].name;for(var i=0;i<t.length;i++)u(this.inputElementCopy.getAttribute(t[i]))?(t[i].toLowerCase()==="value"&&(this.inputElement.value=""),this.inputElement.removeAttribute(t[i])):(t[i].toLowerCase()==="value"&&(this.inputElement.value=this.inputElementCopy.getAttribute(t[i])),this.inputElement.setAttribute(t[i],this.inputElementCopy.getAttribute(t[i])))},e.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),N([this.inputElementCopy],[as,pm,um]),this.inputElement=this.element,this.formElement=M(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?this.ngTag!==null&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):this.getModuleName()==="datetimepicker"?(this.element.id=oi("ej2-datetimepicker"),this.ngTag!==null&&$(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=oi("ej2-datepicker"),this.ngTag!==null&&$(this.inputElement,{id:this.element.id+"_input"})),this.ngTag!==null&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),a.prototype.preRender.call(this)},e.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},e.prototype.validationAttribute=function(t,i){var r=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");i.setAttribute("name",r),t.removeAttribute("name");for(var n=["required","aria-required","form"],s=0;s<n.length;s++)if(!u(t.getAttribute(n[s]))){var o=t.getAttribute(n[s]);i.setAttribute(n[s],o),t.removeAttribute(n[s])}},e.prototype.checkFormat=function(){var t=new Ne(this.locale);if(this.format)if(typeof this.format=="string")this.formatString=this.format;else if(this.format.skeleton!==""&&!u(this.format.skeleton)){var i=this.format.skeleton;this.getModuleName()==="datetimepicker"?this.formatString=t.getDatePattern({skeleton:i,type:"dateTime"}):this.formatString=t.getDatePattern({skeleton:i,type:"date"})}else this.getModuleName()==="datetimepicker"?this.formatString=this.dateTimeFormat:this.formatString=null;else this.formatString=null},e.prototype.checkHtmlAttributes=function(t){this.globalize=new Ne(this.locale),this.checkFormat(),this.checkView();var i=t?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"],r;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?r={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var n=0,s=i;n<s.length;n++){var o=s[n];if(!u(this.inputElement.getAttribute(o)))switch(o){case"disabled":if(u(this.datepickerOptions)||this.datepickerOptions.enabled===void 0||t){var l=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true");this.setProperties({enabled:l},!t)}break;case"readonly":if(u(this.datepickerOptions)||this.datepickerOptions.readonly===void 0||t){var h=this.inputElement.getAttribute(o)==="readonly"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:h},!t)}break;case"placeholder":(u(this.datepickerOptions)||this.datepickerOptions.placeholder===void 0||t)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!t);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(o));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(o));break;case"value":if(u(this.datepickerOptions)||this.datepickerOptions.value===void 0||t){var p=this.inputElement.getAttribute(o);this.setProperties(st(o,this.globalize.parseDate(p,r),{}),!t)}break;case"min":if(+this.min==+new Date(1900,0,1)||t){var c=this.inputElement.getAttribute(o);this.setProperties(st(o,this.globalize.parseDate(c,r),{}),!t)}break;case"max":if(+this.max==+new Date(2099,11,31)||t){var d=this.inputElement.getAttribute(o);this.setProperties(st(o,this.globalize.parseDate(d,r),{}),!t)}break;case"type":this.inputElement.getAttribute(o)!=="text"&&this.inputElement.setAttribute("type","text");break}}},e.prototype.getModuleName=function(){return"datepicker"},e.prototype.disabledDates=function(t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r,n,s=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),o=this.previousDate;this.minMaxUpdates(),(!t||t&&!u(this.renderDayCell))&&a.prototype.render.call(this),this.previousDate=o;var l=s&&+s,h='*[id^="/id"]'.replace("/id",""+l);this.strictMode||(typeof this.value=="string"||typeof this.value=="object"&&+this.value!=+s)&&this.setProperties({value:s},!0),!u(this.calendarElement)&&!u(this.calendarElement.querySelectorAll(h)[0])&&this.calendarElement.querySelectorAll(h)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date(new Date().setHours(0,0,0,0))));var p;this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?n=this.globalize.formatDate(s,{format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}):n=this.globalize.formatDate(s,{format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),p=n):(this.calendarMode==="Gregorian"?r={format:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},p=this.globalize.formatDate(s,r)),this.popupObj||(this.updateInputValue(p),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime",isBlur:i})))},e.prototype.setAriaAttributes=function(){this.isCalendar()?(G.addAttributes({"aria-expanded":"true"},this.inputElement),$(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),$(this.inputElement,{"aria-controls":this.inputElement.id}),this.value&&$(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(G.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-controls"),this.inputElement.removeAttribute("aria-activedescendant"))},e.prototype.errorClass=function(){var t='*[id^="/id"]'.replace("/id",""+ +this.value),i=this.calendarElement&&this.calendarElement.querySelectorAll(t)[0]&&this.calendarElement.querySelectorAll(t)[0].classList.contains("e-disabled");!u(this.value)&&!u(this.min)&&!u(this.max)&&!(new Date(this.value).setMilliseconds(0)>=new Date(this.min).setMilliseconds(0)&&new Date(this.value).setMilliseconds(0)<=new Date(this.max).setMilliseconds(0))||!this.strictMode&&this.inputElement.value!==""&&this.inputElement.value!==this.maskedDateValue&&u(this.value)||i?(R([this.inputWrapper.container],Kl),$(this.inputElement,{"aria-invalid":"true"})):u(this.inputWrapper)||(N([this.inputWrapper.container],Kl),$(this.inputElement,{"aria-invalid":"false"}))},e.prototype.onPropertyChanged=function(t,i){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r],o=["blur","change","cleared","close","created","destroyed","focus","navigated","open","renderDayCell"];switch(o.indexOf(s)>0&&this.isReact&&(this.isDynamicValueChanged=!0),s){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,this.previousElementValue=this.inputElement.value,u(this.value)&&(this.enableMask?this.updateInputValue(this.maskedDateValue):this.updateInputValue(""),this.currentDate=new Date(new Date().setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":G.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":G.setReadonly(this.readonly,this.inputElement);break;case"enabled":G.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new Ne(this.locale),this.l10n.setLocale(this.locale),this.datepickerOptions&&this.datepickerOptions.placeholder==null&&(this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),G.setPlaceholder(this.placeholder,this.inputElement)),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":G.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&a.prototype.onPropertyChanged.call(this,t,i);break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0);break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"showClearButton":G.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width),G.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=t.floatLabelType,G.removeFloating(this.inputWrapper),G.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&a.prototype.onPropertyChanged.call(this,t,i);break}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},Me([C(null)],e.prototype,"width",void 0),Me([C(null)],e.prototype,"value",void 0),Me([C(null)],e.prototype,"cssClass",void 0),Me([C(!1)],e.prototype,"strictMode",void 0),Me([C(null)],e.prototype,"format",void 0),Me([C(!0)],e.prototype,"enabled",void 0),Me([C(!1)],e.prototype,"fullScreenMode",void 0),Me([C({})],e.prototype,"htmlAttributes",void 0),Me([C(null)],e.prototype,"values",void 0),Me([C(!1)],e.prototype,"isMultiSelection",void 0),Me([C(!0)],e.prototype,"showClearButton",void 0),Me([C(!0)],e.prototype,"allowEdit",void 0),Me([C(null)],e.prototype,"keyConfigs",void 0),Me([C(!1)],e.prototype,"enablePersistence",void 0),Me([C(1e3)],e.prototype,"zIndex",void 0),Me([C(!1)],e.prototype,"readonly",void 0),Me([C(null)],e.prototype,"placeholder",void 0),Me([C("Never")],e.prototype,"floatLabelType",void 0),Me([C(null)],e.prototype,"serverTimezoneOffset",void 0),Me([C(!1)],e.prototype,"openOnFocus",void 0),Me([C(!1)],e.prototype,"enableMask",void 0),Me([C({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),Me([B()],e.prototype,"open",void 0),Me([B()],e.prototype,"cleared",void 0),Me([B()],e.prototype,"close",void 0),Me([B()],e.prototype,"blur",void 0),Me([B()],e.prototype,"focus",void 0),Me([B()],e.prototype,"created",void 0),Me([B()],e.prototype,"destroyed",void 0),e=Me([kt],e),e}(om),np=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ce=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Sm="e-time-wrapper",wm="e-popup",Ql="e-error",Jl="240px",Xl=new Date().getDate(),Zl=new Date().getMonth(),eh=new Date().getFullYear(),hs="e-timepicker",Im="e-lib",xm="e-control",Em="e-content",or="e-active",Ea="e-hover",Da="e-navigation",ni="e-disabled",Dm="e-icon-anim",ka="e-input-focus",Ai="e-list-item",th=2,ih=50,rh="e-time-overflow",km=4,Ra="e-non-edit",nh=["title","class","style"],Co;(function(a){function e(t,i,r,n,s,o){this.calendarMode;var l,h=o*6e4,p=[],c=[];l=+i.setMilliseconds(0);for(var d=+r.setMilliseconds(0);d>=l;)c.push(l),p.push(n.formatDate(new Date(l),{format:s,type:"time"})),l+=h;var f=et.createList(t,p,null,!0);return{collection:c,list:f}}a.createListItems=e})(Co||(Co={}));(function(a){np(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return Ce([C("day")],e.prototype,"day",void 0),Ce([C("month")],e.prototype,"month",void 0),Ce([C("year")],e.prototype,"year",void 0),Ce([C("day of the week")],e.prototype,"dayOfTheWeek",void 0),Ce([C("hour")],e.prototype,"hour",void 0),Ce([C("minute")],e.prototype,"minute",void 0),Ce([C("second")],e.prototype,"second",void 0),e})(Ye);(function(a){np(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.liCollections=[],r.timeCollections=[],r.disableItemCollection=[],r.invalidValueString=null,r.preventChange=!1,r.maskedDateValue="",r.moduleName=r.getModuleName(),r.timeOptions=t,r}return e.prototype.preRender=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.cloneElement=this.element.cloneNode(!0),N([this.cloneElement],[hs,xm,Im]),this.inputElement=this.element,this.angularTag=null,this.formElement=M(this.element,"form"),this.element.tagName==="EJS-TIMEPICKER"&&(this.angularTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.openPopupEventArgs={appendTo:document.body}},e.prototype.render=function(){this.initialize(),this.createInputElement(),this.updateHtmlAttributeToWrapper(),this.setTimeAllowEdit(),this.setEnable(),this.validateInterval(),this.bindEvents(),this.validateDisable(),this.setTimeZone(),this.setValue(this.getFormattedValue(this.value)),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.anchor=this.inputElement,this.inputElement.setAttribute("value",this.inputElement.value),this.inputEleValue=this.getDateObject(this.inputElement.value),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},e.prototype.setTimeZone=function(){if(!u(this.serverTimezoneOffset)&&this.value){var t=new Date().getTimezoneOffset()/60,i=this.serverTimezoneOffset,r=i+t;r=this.isDayLightSaving()?r--:r,this.value=new Date(this.value.getTime()+r*60*60*1e3)}},e.prototype.isDayLightSaving=function(){var t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,i)},e.prototype.setTimeAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):$(this.inputElement,{readonly:""}),this.clearIconState()},e.prototype.clearIconState=function(){!this.allowEdit&&this.inputWrapper&&!this.readonly?this.inputElement.value===""?N([this.inputWrapper.container],[Ra]):R([this.inputWrapper.container],[Ra]):this.inputWrapper&&N([this.inputWrapper.container],[Ra])},e.prototype.validateDisable=function(){this.setMinMax(this.initMin,this.initMax),u(this.value)||(this.popupCreation(),this.popupObj.destroy(),this.popupWrapper=this.popupObj=null),!isNaN(+this.value)&&this.value!==null&&(this.valueIsDisable(this.value)||(this.strictMode&&this.resetState(),this.initValue=null,this.initMax=this.getDateObject(this.initMax),this.initMin=this.getDateObject(this.initMin),this.timeCollections=this.liCollections=[],this.setMinMax(this.initMin,this.initMax)))},e.prototype.validationAttribute=function(t,i){var r=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");i.setAttribute("name",r),t.removeAttribute("name");for(var n=["required","aria-required","form"],s=0;s<n.length;s++)if(!u(t.getAttribute(n[s]))){var o=t.getAttribute(n[s]);i.setAttribute(n[s],o),t.removeAttribute(n[s])}},e.prototype.initialize=function(){this.globalize=new Ne(this.locale),this.defaultCulture=new Ne("en"),this.checkTimeFormat(),this.checkInvalidValue(this.value),this.setProperties({value:this.checkDateValue(new Date(this.checkInValue(this.value)))},!0),this.setProperties({min:this.checkDateValue(new Date(this.checkInValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkInValue(this.max)))},!0),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(this.scrollTo)))},!0),this.angularTag!==null&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.checkAttributes(!1);var t={placeholder:this.placeholder};this.l10n=new Xt("timepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.initValue=this.checkDateValue(this.value),this.initMin=this.checkDateValue(this.min),this.initMax=this.checkDateValue(this.max),this.isNavigate=this.isPreventBlur=this.isTextSelected=!1,this.activeIndex=this.valueWithMinutes=this.prevDate=null,u(this.element.getAttribute("id"))?(this.element.id=oi("ej2_timepicker"),this.angularTag!==null&&$(this.inputElement,{id:this.element.id+"_input"})):this.angularTag!==null&&(this.inputElement.id=this.element.getAttribute("id")+"_input"),u(this.inputElement.getAttribute("name"))&&$(this.inputElement,{name:this.element.id}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})},e.prototype.checkTimeFormat=function(){if(this.format)if(typeof this.format=="string")this.formatString=this.format;else if(!u(this.format.skeleton)&&this.format.skeleton!==""){var t=this.format.skeleton;this.formatString=this.globalize.getDatePattern({type:"time",skeleton:t})}else this.formatString=this.globalize.getDatePattern({type:"time",skeleton:"short"});else this.formatString=null},e.prototype.checkDateValue=function(t){return!u(t)&&t instanceof Date&&!isNaN(+t)?t:null},e.prototype.createInputElement=function(){this.fullScreenMode&&T.isDevice&&(this.cssClass+=" e-popup-expand");var t=this.cssClass,i=!this.enableMask;!u(this.cssClass)&&this.cssClass!==""&&(t=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=G.createInput({element:this.inputElement,bindClearAction:i,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[" e-input-group-icon e-time-icon e-icons"]},this.createElement),this.inputWrapper.container.style.width=this.setWidth(this.width),$(this.inputElement,{"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"false","aria-invalid":"false"}),this.isNullOrEmpty(this.inputStyle)||G.addAttributes({style:this.inputStyle},this.inputElement),R([this.inputWrapper.container],Sm)},e.prototype.getCldrDateTimeFormat=function(){var t=new Ne(this.locale),i,r=t.getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?i=r+" "+this.cldrFormat("time"):i=this.formatString,i},e.prototype.checkInvalidValue=function(t){var i=!1;if(typeof t!="object"&&!u(t)){var r=t;typeof r=="string"&&(r=r.trim());var n=null,s=null;if(typeof t=="number"?r=t.toString():typeof t=="string"&&(/^[a-zA-Z0-9- ]*$/.test(t)||(n=this.setCurrentDate(this.getDateObject(t)),u(n)&&(n=this.checkDateValue(this.globalize.parseDate(r,{format:this.getCldrDateTimeFormat(),type:"datetime"})),u(n)&&(n=this.checkDateValue(this.globalize.parseDate(r,{format:this.formatString,type:"dateTime",skeleton:"yMd"})))))),s=this.globalize.parseDate(r,{format:this.getCldrDateTimeFormat(),type:"datetime"}),n=!u(s)&&s instanceof Date&&!isNaN(+s)?s:null,u(n)&&r.replace(/\s/g,"").length){var o=null,l=null;o=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,l=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!o.test(r)&&!l.test(r)||/^[a-zA-Z0-9- ]*$/.test(t)||isNaN(+new Date(""+r))?i=!0:n=new Date(""+r)}i?(this.strictMode||(this.invalidValueString=r),this.setProperties({value:null},!0),this.initValue=null):(this.setProperties({value:n},!0),this.initValue=this.value)}},e.prototype.requiredModules=function(){var t=[];return this.enableMask&&t.push({args:[this],member:"MaskedDateTime"}),t},e.prototype.cldrFormat=function(t){var i;return this.locale==="en"||this.locale==="en-US"?i=j("timeFormats.short",Oi()):i=this.getCultureTimeObject(Bi,""+this.locale),i},e.prototype.destroy=function(){this.hide(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.unBindEvents();var t={"aria-autocomplete":"list",tabindex:"0","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-disabled":"true","aria-invalid":"false"};this.inputElement&&(G.removeAttributes(t,this.inputElement),this.angularTag===null&&this.inputWrapper.container.parentElement.appendChild(this.inputElement),u(this.cloneElement.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),this.ensureInputAttribute(),this.enableElement([this.inputElement]),this.inputElement.classList.remove("e-input"),u(this.cloneElement.getAttribute("disabled"))&&G.setEnabled(!0,this.inputElement,this.floatLabelType)),this.inputWrapper.container&&ne(this.inputWrapper.container),this.inputWrapper=this.popupWrapper=this.cloneElement=void 0,this.liCollections=this.timeCollections=this.disableItemCollection=[],u(this.rippleFn)||this.rippleFn(),G.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),a.prototype.destroy.call(this),this.formElement&&S.remove(this.formElement,"reset",this.formResetHandler),this.rippleFn=null,this.openPopupEventArgs=null,this.selectedElement=null,this.listTag=null,this.liCollections=null},e.prototype.ensureInputAttribute=function(){for(var t=[],i=0;i<this.inputElement.attributes.length;i++)t[i]=this.inputElement.attributes[i].name;for(var i=0;i<t.length;i++)u(this.cloneElement.getAttribute(t[i]))?(this.inputElement.removeAttribute(t[i]),t[i].toLowerCase()==="value"&&(this.inputElement.value="")):(this.inputElement.setAttribute(t[i],this.cloneElement.getAttribute(t[i])),t[i].toLowerCase()==="value"&&(this.inputElement.value=this.cloneElement.getAttribute(t[i])))},e.prototype.popupCreation=function(){this.popupWrapper=this.createElement("div",{className:hs+" "+wm,attrs:{id:this.element.id+"_popup",style:"visibility:hidden"}}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),u(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),!u(this.step)&&this.step>0&&(this.generateList(),be([this.listWrapper],this.popupWrapper)),this.addSelection(),this.renderPopup(),ne(this.popupWrapper)},e.prototype.getPopupHeight=function(){var t=parseInt(Jl,10),i=this.popupWrapper.getBoundingClientRect().height;return i>t?t:i},e.prototype.generateList=function(){this.createListItems(),this.wireListEvents();var t={duration:300,selector:"."+Ai};this.rippleFn=Pi(this.listWrapper,t),this.liCollections=this.listWrapper.querySelectorAll("."+Ai)},e.prototype.renderPopup=function(){var t=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),this.popupObj=new Yr(this.popupWrapper,{width:this.setPopupWidth(this.width),zIndex:this.zIndex,targetType:"relative",position:T.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:T.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},enableRtl:this.enableRtl,relateTo:T.isDevice?document.body:this.inputWrapper.container,offsetY:km,open:function(){t.popupWrapper.style.visibility="visible",R([t.inputWrapper.buttons[0]],or)},close:function(){N([t.inputWrapper.buttons[0]],or),t.unWireListEvents(),t.inputElement.removeAttribute("aria-activedescendant"),se(t.popupObj.element),t.popupObj.destroy(),t.popupWrapper.innerHTML="",t.listWrapper=t.popupWrapper=t.listTag=void 0},targetExitViewport:function(){T.isDevice||t.hide()}}),T.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),T.isDevice&&this.fullScreenMode?(this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%"):this.popupObj.element.style.maxHeight=Jl,T.isDevice&&this.fullScreenMode){var i=this.createElement("div",{className:"e-model-header"}),r=this.createElement("span",{className:"e-model-title"});r.textContent="Select time";var n=this.createElement("span",{className:"e-popup-close"});S.add(n,"mousedown touchstart",this.timePopupCloseHandler,this),i.appendChild(n),i.appendChild(r),this.popupWrapper.insertBefore(i,this.popupWrapper.firstElementChild)}},e.prototype.timePopupCloseHandler=function(t){this.hide()},e.prototype.getFormattedValue=function(t){return u(this.checkDateValue(t))?null:this.globalize.formatDate(t,{skeleton:"medium",type:"time"})},e.prototype.getDateObject=function(t){if(!this.isNullOrEmpty(t)){var i=this.createDateObj(t),r=!this.isNullOrEmpty(this.initValue);if(this.checkDateValue(i)){var n=r?this.initValue.getDate():Xl,s=r?this.initValue.getMonth():Zl,o=r?this.initValue.getFullYear():eh;return new Date(o,s,n,i.getHours(),i.getMinutes(),i.getSeconds())}}return null},e.prototype.updateHtmlAttributeToWrapper=function(){if(!u(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var r=i[t];if(nh.indexOf(r)>-1)if(r==="class"){var n=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();n!==""&&R([this.inputWrapper.container],n.split(" "))}else if(r==="style"){var s=this.inputWrapper.container.getAttribute(r);s=u(s)?this.htmlAttributes[""+r]:s+this.htmlAttributes[""+r],this.inputWrapper.container.setAttribute(r,s)}else this.inputWrapper.container.setAttribute(r,this.htmlAttributes[""+r])}},e.prototype.updateHtmlAttributeToElement=function(){if(!u(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var r=i[t];nh.indexOf(r)<0&&this.inputElement.setAttribute(r,this.htmlAttributes[""+r])}},e.prototype.updateCssClass=function(t,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(t)||(t=t.replace(/\s+/g," ").trim()),G.setCssClass(t,[this.inputWrapper.container],i),this.popupWrapper&&G.setCssClass(t,[this.popupWrapper],i)},e.prototype.removeErrorClass=function(){N([this.inputWrapper.container],Ql),$(this.inputElement,{"aria-invalid":"false"})},e.prototype.checkErrorState=function(t){var i=this.getDateObject(t);this.validateState(i)&&!this.invalidValueString||this.enableMask&&this.inputElement.value===this.maskedDateValue?this.removeErrorClass():(R([this.inputWrapper.container],Ql),$(this.inputElement,{"aria-invalid":"true"}))},e.prototype.validateInterval=function(){!u(this.step)&&this.step>0?this.enableElement([this.inputWrapper.buttons[0]]):this.disableTimeIcon()},e.prototype.disableTimeIcon=function(){this.disableElement([this.inputWrapper.buttons[0]]),this.hide()},e.prototype.disableElement=function(t){R(t,ni)},e.prototype.enableElement=function(t){N(t,ni)},e.prototype.selectInputText=function(){this.inputElement.setSelectionRange(0,this.inputElement.value.length)},e.prototype.setCursorToEnd=function(){this.inputElement.setSelectionRange(this.inputElement.value.length,this.inputElement.value.length)},e.prototype.getMeridianText=function(){var t;if(this.locale==="en"||this.locale==="en-US")t=j("dayPeriods.format.wide",Oi());else{var i=".dates.calendars.gregorian.dayPeriods.format.abbreviated",r="main.";t=j(r+""+this.locale+i,Bi)}return t},e.prototype.getCursorSelection=function(){var t=this.inputElement,i=0,r=0;return isNaN(t.selectionStart)||(i=t.selectionStart,r=t.selectionEnd),{start:Math.abs(i),end:Math.abs(r)}},e.prototype.getActiveElement=function(){return u(this.popupWrapper)?null:this.popupWrapper.querySelectorAll("."+or)},e.prototype.isNullOrEmpty=function(t){return!!(u(t)||typeof t=="string"&&t.trim()==="")},e.prototype.setWidth=function(t){return typeof t=="number"?t=Le(t):typeof t=="string"?t=t.match(/px|%|em/)?t:Le(t):t="100%",t},e.prototype.setPopupWidth=function(t){if(t=this.setWidth(t),t.indexOf("%")>-1){var i=this.containerStyle.width*parseFloat(t)/100;t=i.toString()+"px"}return t},e.prototype.setScrollPosition=function(){var t=this.selectedElement;u(t)?this.popupWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(t)},e.prototype.findScrollTop=function(t){var i=this.getPopupHeight(),r=t.nextElementSibling,n=r?r.offsetTop:t.offsetTop,s=t.getBoundingClientRect().height;n+t.offsetTop>i?this.popupWrapper.scrollTop=r?n-(i/th+s/th):n:this.popupWrapper.scrollTop=0},e.prototype.setScrollTo=function(){var t;if(u(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var i=this.popupWrapper.querySelectorAll("."+Ai);if(i.length){var r=this.timeCollections[0],n=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();t=i[Math.round((n-r)/(this.step*6e4))]}}u(t)?this.popupWrapper.scrollTop=0:this.findScrollTop(t)},e.prototype.getText=function(){return u(this.checkDateValue(this.value))?"":this.getValue(this.value)},e.prototype.getValue=function(t){return u(this.checkDateValue(t))?null:this.globalize.formatDate(t,{format:this.cldrTimeFormat(),type:"time"})},e.prototype.cldrDateFormat=function(){var t;return this.locale==="en"||this.locale==="en-US"?t=j("dateFormats.short",Oi()):t=this.getCultureDateObject(Bi,""+this.locale),t},e.prototype.cldrTimeFormat=function(){var t;return this.isNullOrEmpty(this.formatString)?this.locale==="en"||this.locale==="en-US"?t=j("timeFormats.short",Oi()):t=this.getCultureTimeObject(Bi,""+this.locale):t=this.formatString,t},e.prototype.dateToNumeric=function(){var t;return this.locale==="en"||this.locale==="en-US"?t=j("timeFormats.medium",Oi()):t=j("main."+this.locale+".dates.calendars.gregorian.timeFormats.medium",Bi),t},e.prototype.getExactDateTime=function(t){return u(this.checkDateValue(t))?null:this.globalize.formatDate(t,{format:this.dateToNumeric(),type:"time"})},e.prototype.setValue=function(t){var i=this.checkValue(t);!this.strictMode&&!this.validateState(i)?(this.checkDateValue(this.valueWithMinutes)===null&&(this.initValue=this.valueWithMinutes=null),this.validateMinMax(this.value,this.min,this.max)):this.isNullOrEmpty(i)?(this.initValue=null,this.validateMinMax(this.value,this.min,this.max)):this.initValue=this.compareFormatChange(i),this.updateInput(!0,this.initValue)},e.prototype.compareFormatChange=function(t){return u(t)?null:t!==this.getText()?this.getDateObject(t):this.getDateObject(this.value)},e.prototype.updatePlaceHolder=function(){G.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)},e.prototype.updateInputValue=function(t){G.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.preventEventBubbling=function(t){t.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnTimeIconClick")},e.prototype.popupHandler=function(t){this.enabled&&(T.isDevice&&this.inputElement.setAttribute("readonly",""),t.preventDefault(),this.isPopupOpen()?this.closePopup(0,t):(this.inputElement.focus(),this.show(t)))},e.prototype.mouseDownHandler=function(){this.enabled&&(this.readonly||(this.inputElement.setSelectionRange(0,0),S.add(this.inputElement,"mouseup",this.mouseUpHandler,this)))},e.prototype.mouseUpHandler=function(t){if(!this.readonly)if(t.preventDefault(),this.enableMask){t.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"});return}else{S.remove(this.inputElement,"mouseup",this.mouseUpHandler);var i=this.getCursorSelection();i.start===0&&i.end===this.inputElement.value.length||(this.inputElement.value.length>0&&(this.cursorDetails=this.focusSelection()),this.inputElement.setSelectionRange(this.cursorDetails.start,this.cursorDetails.end))}},e.prototype.focusSelection=function(){var t=new RegExp("^[a-zA-Z0-9]+$"),i=this.inputElement.value.split("");i.push(" ");var r=this.getCursorSelection(),n=0,s=0,o=!1;if(this.isTextSelected)n=r.start,s=r.end,this.isTextSelected=!1;else for(var l=0;l<i.length;l++)if(t.test(i[l])||(s=l,o=!0),o)if(r.start>=n&&r.end<=s){s=s,this.isTextSelected=!0;break}else n=l+1,o=!1;return{start:n,end:s}},e.prototype.inputHandler=function(t){if(!this.readonly&&this.enabled)switch(t.action==="right"||t.action==="left"||t.action==="tab"||(t.action==="home"||t.action==="end"||t.action==="up"||t.action==="down")&&!this.isPopupOpen()&&!this.enableMask||t.preventDefault(),t.action){case"home":case"end":case"up":case"down":this.isPopupOpen()||(this.popupCreation(),this.popupObj.destroy(),this.popupObj=this.popupWrapper=null),this.enableMask&&!this.readonly&&!this.isPopupOpen()&&(t.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:t})),this.isPopupOpen()&&this.keyHandler(t);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.updateValue(this.valueWithMinutes,t)):this.updateValue(this.inputElement.value,t),this.hide(),this.isNavigate=!1,this.isPopupOpen()&&t.stopPropagation();break;case"open":this.show(t);break;case"escape":this.updateInputValue(this.objToString(this.value)),this.enableMask&&(this.value||this.updateInputValue(this.maskedDateValue),this.createMask()),this.previousState(this.value),this.hide();break;case"close":this.hide();break;case"right":case"left":case"tab":case"shiftTab":!this.isPopupOpen()&&this.enableMask&&!this.readonly&&((this.inputElement.selectionStart===0&&this.inputElement.selectionEnd===this.inputElement.value.length||this.inputElement.selectionEnd!==this.inputElement.value.length&&t.action==="tab"||this.inputElement.selectionStart!==0&&t.action==="shiftTab"||t.action==="left"||t.action==="right")&&t.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e:t}));break;default:this.isNavigate=!1;break}},e.prototype.onMouseClick=function(t){var i=t.target,r=this.selectedElement=M(i,"."+Ai);this.setSelection(r,t),r&&r.classList.contains(Ai)&&this.hide()},e.prototype.closePopup=function(t,i){var r=this;if(this.isPopupOpen()&&this.popupWrapper){var n={popup:this.popupObj,event:i||null,cancel:!1,name:"open"};N([document.body],rh),this.trigger("close",n,function(s){if(!s.cancel){var o={name:"FadeOut",duration:ih,delay:t||0};r.popupObj.hide(new ui(o)),N([r.inputWrapper.container],[Dm]),$(r.inputElement,{"aria-expanded":"false"}),r.inputElement.removeAttribute("aria-owns"),r.inputElement.removeAttribute("aria-controls"),r.inputElement.removeAttribute("aria-activedescendant"),S.remove(document,"mousedown touchstart",r.documentClickHandler)}T.isDevice&&r.modal&&(r.modal.style.display="none",r.modal.outerHTML="",r.modal=null),T.isDevice&&(u(r.mobileTimePopupWrap)||(r.mobileTimePopupWrap.remove(),r.mobileTimePopupWrap=null)),T.isDevice&&r.allowEdit&&!r.readonly&&r.inputElement.removeAttribute("readonly")})}else T.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly")},e.prototype.disposeServerPopup=function(){this.popupWrapper&&(this.popupWrapper.style.visibility="hidden",this.popupWrapper.style.top="-9999px",this.popupWrapper.style.left="-9999px",this.popupWrapper.style.width="0px",this.popupWrapper.style.height="0px")},e.prototype.checkValueChange=function(t,i){if(!this.strictMode&&!this.validateState(this.valueWithMinutes))this.checkDateValue(this.valueWithMinutes)===null&&(this.initValue=this.valueWithMinutes=null),this.setProperties({value:this.compareFormatChange(this.inputElement.value)},!0),this.initValue=this.valueWithMinutes=this.compareFormatChange(this.inputElement.value),this.prevValue=this.inputElement.value,+this.prevDate!=+this.value&&this.changeEvent(t);else if(!i)(this.prevValue!==this.inputElement.value||u(this.checkDateValue(this.value)))&&this.valueProcess(t,this.compareFormatChange(this.inputElement.value));else{var r=this.getDateObject(new Date(this.timeCollections[this.activeIndex]));+this.prevDate!=+r&&this.valueProcess(t,r)}},e.prototype.onMouseOver=function(t){var i=M(t.target,"."+Ai);this.setHover(i,Ea)},e.prototype.setHover=function(t,i){this.enabled&&this.isValidLI(t)&&!t.classList.contains(i)&&(this.removeHover(i),R([t],i),i===Da&&t.setAttribute("aria-selected","true"))},e.prototype.setSelection=function(t,i){this.isValidLI(t)&&(this.checkValue(t.getAttribute("data-value")),this.enableMask&&this.createMask(),this.selectedElement=t,this.activeIndex=Array.prototype.slice.call(this.liCollections).indexOf(t),this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),R([this.selectedElement],or),this.selectedElement.setAttribute("aria-selected","true"),this.checkValueChange(i,!0))},e.prototype.onMouseLeave=function(){this.removeHover(Ea)},e.prototype.scrollHandler=function(){this.getModuleName()==="timepicker"&&T.isDevice||this.hide()},e.prototype.setMinMax=function(t,i){u(this.checkDateValue(t))&&(this.initMin=this.getDateObject("12:00:00 AM")),u(this.checkDateValue(i))&&(this.initMax=this.getDateObject("11:59:59 PM"))},e.prototype.validateMinMax=function(t,i,r){var n=t instanceof Date?t:this.getDateObject(t);return u(this.checkDateValue(n))?+this.createDateObj(this.getFormattedValue(this.initMin))>+this.createDateObj(this.getFormattedValue(this.initMax))&&this.disableTimeIcon():t=this.strictOperation(this.initMin,this.initMax,t,n),this.strictMode&&(t=this.valueIsDisable(t)?t:null),this.checkErrorState(t),t},e.prototype.valueIsDisable=function(t){if(this.disableItemCollection.length>0){if(this.disableItemCollection.length===this.timeCollections.length)return!1;for(var i=t instanceof Date?this.objToString(t):t,r=0;r<this.disableItemCollection.length;r++)if(i===this.disableItemCollection[r])return!1}return!0},e.prototype.validateState=function(t){if(!this.strictMode)if(this.valueIsDisable(t)){var i=typeof t=="string"?this.setCurrentDate(this.getDateObject(t)):this.setCurrentDate(this.getDateObject(t)),r=this.setCurrentDate(this.getDateObject(this.initMax)),n=this.setCurrentDate(this.getDateObject(this.initMin));if(u(this.checkDateValue(i))){if(+r<+n||this.inputElement.value!=="")return!1}else if(+i>+r||+i<+n)return!1}else return!1;return!0},e.prototype.strictOperation=function(t,i,r,n){var s=this.createDateObj(this.getFormattedValue(i)),o=this.createDateObj(this.getFormattedValue(t)),l=this.createDateObj(this.getFormattedValue(n));if(this.strictMode){if(+o>+s)return this.disableTimeIcon(),this.initValue=this.getDateObject(s),this.updateInputValue(this.getValue(this.initValue)),this.enableMask&&this.createMask(),this.inputElement.value;if(+o>=+l)return this.getDateObject(o);if(+l>=+s||+o==+s)return this.getDateObject(s)}else if(+o>+s&&(this.disableTimeIcon(),!isNaN(+this.createDateObj(r))))return r;return r},e.prototype.bindEvents=function(){S.add(this.inputWrapper.buttons[0],"mousedown",this.popupHandler,this),S.add(this.inputElement,"blur",this.inputBlurHandler,this),S.add(this.inputElement,"focus",this.inputFocusHandler,this),S.add(this.inputElement,"change",this.inputChangeHandler,this),S.add(this.inputElement,"input",this.inputEventHandler,this),this.enableMask&&S.add(this.inputElement,"keydown",this.keydownHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&S.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this),this.formElement&&S.add(this.formElement,"reset",this.formResetHandler,this),T.isDevice||(this.keyConfigure=P(this.keyConfigure,this.keyConfigs),this.inputEvent=new St(this.inputWrapper.container,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.showClearButton&&this.inputElement&&S.add(this.inputElement,"mousedown",this.mouseDownHandler,this))},e.prototype.keydownHandler=function(t){switch(t.code){case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&this.notify("keyDownHandler",{module:"MaskedDateTime",e:t});break}},e.prototype.formResetHandler=function(){if(this.enabled&&!this.inputElement.disabled){var t=this.inputElement.getAttribute("value"),i=this.checkDateValue(this.inputEleValue);this.element.tagName==="EJS-TIMEPICKER"&&(i=null,t="",this.inputElement.setAttribute("value","")),this.setProperties({value:i},!0),this.prevDate=this.value,this.valueWithMinutes=this.value,this.initValue=this.value,this.inputElement&&(this.updateInputValue(t),this.enableMask&&(t||this.updateInputValue(this.maskedDateValue),this.createMask()),this.checkErrorState(t),this.prevValue=this.inputElement.value)}},e.prototype.inputChangeHandler=function(t){this.enabled&&t.stopPropagation()},e.prototype.inputEventHandler=function(){this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},e.prototype.unBindEvents=function(){this.inputWrapper&&S.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.popupHandler),S.remove(this.inputElement,"blur",this.inputBlurHandler),S.remove(this.inputElement,"focus",this.inputFocusHandler),S.remove(this.inputElement,"change",this.inputChangeHandler),S.remove(this.inputElement,"input",this.inputEventHandler),this.inputEvent&&this.inputEvent.destroy(),S.remove(this.inputElement,"mousedown touchstart",this.mouseDownHandler),this.showClearButton&&!u(this.inputWrapper)&&!u(this.inputWrapper.clearButton)&&S.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.clearHandler),this.formElement&&S.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&S.add(this.inputWrapper.clearButton,"mousedown",this.clearHandler,this)},e.prototype.raiseClearedEvent=function(t){var i={event:t};this.trigger("cleared",i)},e.prototype.clearHandler=function(t){if(this.enabled&&(t.preventDefault(),u(this.value)?(this.resetState(),this.raiseClearedEvent(t)):this.clear(t),this.popupWrapper&&(this.popupWrapper.scrollTop=0),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),M(this.element,"form"))){var i=this.element,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),i.dispatchEvent(r)}},e.prototype.clear=function(t){this.setProperties({value:null},!0),this.initValue=null,this.resetState(),this.raiseClearedEvent(t),this.changeEvent(t)},e.prototype.setZIndex=function(){this.popupObj&&(this.popupObj.zIndex=this.zIndex,this.popupObj.dataBind())},e.prototype.checkAttributes=function(t){for(var i=t?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["step","disabled","readonly","style","name","value","min","max","placeholder"],r,n=0,s=i;n<s.length;n++){var o=s[n];if(!u(this.inputElement.getAttribute(o)))switch(o){case"disabled":if(u(this.timeOptions)||this.timeOptions.enabled===void 0||t){var l=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true");this.setProperties({enabled:l},!t)}break;case"style":this.inputStyle=this.inputElement.getAttribute(o);break;case"readonly":if(u(this.timeOptions)||this.timeOptions.readonly===void 0||t){var h=this.inputElement.getAttribute(o)==="readonly"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:h},!t)}break;case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(o));break;case"step":this.step=parseInt(this.inputElement.getAttribute(o),10);break;case"placeholder":(u(this.timeOptions)||this.timeOptions.placeholder===void 0||t)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!t);break;case"min":(u(this.timeOptions)||this.timeOptions.min===void 0||t)&&(r=new Date(this.inputElement.getAttribute(o)),u(this.checkDateValue(r))||this.setProperties({min:r},!t));break;case"max":(u(this.timeOptions)||this.timeOptions.max===void 0||t)&&(r=new Date(this.inputElement.getAttribute(o)),u(this.checkDateValue(r))||this.setProperties({max:r},!t));break;case"value":(u(this.timeOptions)||this.timeOptions.value===void 0||t)&&(r=new Date(this.inputElement.getAttribute(o)),u(this.checkDateValue(r))||(this.initValue=r,this.updateInput(!1,this.initValue),this.setProperties({value:r},!t)));break}}},e.prototype.setCurrentDate=function(t){return u(this.checkDateValue(t))?null:new Date(eh,Zl,Xl,t.getHours(),t.getMinutes(),t.getSeconds())},e.prototype.getTextFormat=function(){var t=0;if(this.cldrTimeFormat().split(" ")[0]==="a"||this.cldrTimeFormat().indexOf("a")===0)t=1;else if(this.cldrTimeFormat().indexOf("a")<0){for(var i=this.cldrTimeFormat().split(" "),r=0;r<i.length;r++)if(i[r].toLowerCase().indexOf("h")>=0){t=r;break}}return t},e.prototype.updateValue=function(t,i){var r;if(this.isNullOrEmpty(t))this.resetState();else if(r=this.checkValue(t),this.strictMode){var n=r===null&&t.trim().length>0?this.previousState(this.prevDate):this.inputElement.value;this.updateInputValue(n),this.enableMask&&(n||this.updateInputValue(this.maskedDateValue),u(r)&&t!==this.maskedDateValue&&this.createMask(),u(r)&&t===this.maskedDateValue&&this.updateInputValue(this.maskedDateValue))}this.checkValueChange(i,typeof t!="string")},e.prototype.previousState=function(t){for(var i=this.getDateObject(t),r=0;r<this.timeCollections.length;r++)if(+i===this.timeCollections[r]){this.activeIndex=r,this.selectedElement=this.liCollections[r],this.valueWithMinutes=new Date(this.timeCollections[r]);break}return this.getValue(t)},e.prototype.resetState=function(){this.removeSelection(),G.setValue("",this.inputElement,this.floatLabelType,!1),this.valueWithMinutes=this.activeIndex=null,this.strictMode||this.checkErrorState(null)},e.prototype.objToString=function(t){return u(this.checkDateValue(t))?null:this.globalize.formatDate(t,{format:this.cldrTimeFormat(),type:"time"})},e.prototype.checkValue=function(t){if(!this.isNullOrEmpty(t)){var i=t instanceof Date?t:this.getDateObject(t);return this.validateValue(i,t)}return this.resetState(),this.valueWithMinutes=null},e.prototype.validateValue=function(t,i){var r,n=this.validateMinMax(i,this.min,this.max),s=this.getDateObject(n);if(this.getFormattedValue(s)!==this.getFormattedValue(this.value)?(this.valueWithMinutes=u(s)?null:s,r=this.objToString(this.valueWithMinutes)):(this.strictMode&&(t=s),this.valueWithMinutes=this.checkDateValue(t),r=this.objToString(this.valueWithMinutes)),!this.strictMode&&u(r)){var o=n.trim().length>0?n:"";this.updateInputValue(o),this.enableMask&&(o||this.updateInputValue(this.maskedDateValue))}else this.updateInputValue(r),this.enableMask&&(r===""&&this.updateInputValue(this.maskedDateValue),u(r)&&i!==this.maskedDateValue&&this.createMask(),u(r)&&i===this.maskedDateValue&&this.updateInputValue(this.maskedDateValue));return r},e.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},e.prototype.findNextElement=function(t){var i=this.inputElement.value,r=u(this.valueWithMinutes)?this.createDateObj(i):this.getDateObject(this.valueWithMinutes),n=null,s=this.liCollections.length,o=this.timeCollections;if(!u(this.checkDateValue(r))||!u(this.activeIndex)){if(t.action==="home"){var l=this.validLiElement(0);n=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l}else if(t.action==="end"){var l=this.validLiElement(o.length-1,!0);n=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l}else if(t.action==="down"){for(var h=0;h<s;h++)if(+r<this.timeCollections[h]){var l=this.validLiElement(h);n=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}else if(h===s-1){var l=this.validLiElement(0);n=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}}else for(var h=s-1;h>=0;h--)if(+r>this.timeCollections[h]){var l=this.validLiElement(h,!0);n=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}else if(h===0){var l=this.validLiElement(s-1);n=+this.createDateObj(new Date(this.timeCollections[l])),this.activeIndex=l;break}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(u(n)?null:new Date(n))}else this.selectNextItem(t)},e.prototype.selectNextItem=function(t){var i=this.validLiElement(0,t.action!=="down");this.activeIndex=i,this.selectedElement=this.liCollections[i],this.elementValue(new Date(this.timeCollections[i]))},e.prototype.elementValue=function(t){u(this.checkDateValue(t))||this.checkValue(t)},e.prototype.validLiElement=function(t,i){var r=null,n=u(this.popupWrapper)?this.liCollections:this.popupWrapper.querySelectorAll("."+Ai),s=!0;if(n.length)if(i)for(var o=t;o>=0;o--)if(n[o].classList.contains(ni))o===0&&s&&(t=o=n.length,s=!1);else{r=o;break}else for(var o=t;o<=n.length-1;o++)if(n[o].classList.contains(ni))o===n.length-1&&s&&(t=o=-1,s=!1);else{r=o;break}return r},e.prototype.keyHandler=function(t){if(!(u(this.step)||this.step<=0||!u(this.inputWrapper)&&this.inputWrapper.buttons[0].classList.contains(ni))){var i=this.timeCollections.length;if(u(this.getActiveElement())||this.getActiveElement().length===0)if(this.liCollections.length>0)if(u(this.value)&&u(this.activeIndex)){var r=this.validLiElement(0,t.action!=="down");this.activeIndex=r,this.selectedElement=this.liCollections[r],this.elementValue(new Date(this.timeCollections[r]))}else this.findNextElement(t);else this.findNextElement(t);else{var n=void 0;if(t.keyCode>=37&&t.keyCode<=40){var r=t.keyCode===40||t.keyCode===39?++this.activeIndex:--this.activeIndex;this.activeIndex=r=this.activeIndex===i?0:this.activeIndex,this.activeIndex=r=this.activeIndex<0?i-1:this.activeIndex,this.activeIndex=r=this.validLiElement(this.activeIndex,!(t.keyCode===40||t.keyCode===39)),n=u(this.timeCollections[r])?this.timeCollections[0]:this.timeCollections[r]}else if(t.action==="home"){var r=this.validLiElement(0);this.activeIndex=r,n=this.timeCollections[r]}else if(t.action==="end"){var r=this.validLiElement(i-1,!0);this.activeIndex=r,n=this.timeCollections[r]}this.selectedElement=this.liCollections[this.activeIndex],this.elementValue(new Date(n))}this.isNavigate=!0,this.setHover(this.selectedElement,Da),this.setActiveDescendant(),this.enableMask&&this.selectInputText(),this.isPopupOpen()&&this.selectedElement!==null&&(!t||t.type!=="click")&&this.setScrollPosition()}},e.prototype.getCultureTimeObject=function(t,i){return j("main."+i+".dates.calendars.gregorian.timeFormats.short",t)},e.prototype.getCultureDateObject=function(t,i){return j("main."+i+".dates.calendars.gregorian.dateFormats.short",t)},e.prototype.wireListEvents=function(){S.add(this.listWrapper,"click",this.onMouseClick,this),T.isDevice||(S.add(this.listWrapper,"mouseover",this.onMouseOver,this),S.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},e.prototype.unWireListEvents=function(){this.listWrapper&&(S.remove(this.listWrapper,"click",this.onMouseClick),T.isDevice||(S.remove(this.listWrapper,"mouseover",this.onMouseOver),S.remove(this.listWrapper,"mouseout",this.onMouseLeave)))},e.prototype.valueProcess=function(t,i){var r=u(this.checkDateValue(i))?null:i;+this.prevDate!=+r&&(this.initValue=r,this.changeEvent(t))},e.prototype.changeEvent=function(t){this.addSelection(),this.updateInput(!0,this.initValue);var i={event:t||null,value:this.value,text:this.inputElement.value,isInteracted:!u(t),element:this.element};i.value=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.prevDate=this.valueWithMinutes||this.getDateObject(this.inputElement.value),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",i),this.invalidValueString=null,this.checkErrorState(this.value)},e.prototype.updateInput=function(t,i){t&&(this.prevValue=this.getValue(this.prevDate)),this.prevDate=this.valueWithMinutes=i,(typeof i!="number"||(this.value&&+new Date(+this.value).setMilliseconds(0))!==+i)&&(this.setProperties({value:i},!0),this.enableMask&&this.value&&this.createMask()),!this.strictMode&&u(this.value)&&this.invalidValueString&&(this.checkErrorState(this.invalidValueString),this.updateInputValue(this.invalidValueString)),this.clearIconState()},e.prototype.setActiveDescendant=function(){!u(this.selectedElement)&&this.value?$(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},e.prototype.removeSelection=function(){if(this.removeHover(Ea),!u(this.popupWrapper)){var t=this.popupWrapper.querySelectorAll("."+or);t.length&&(N(t,or),t[0].removeAttribute("aria-selected"))}},e.prototype.removeHover=function(t){var i=this.getHoverItem(t);i&&i.length&&(N(i,t),t===Da&&i[0].removeAttribute("aria-selected"))},e.prototype.getHoverItem=function(t){var i;return u(this.popupWrapper)||(i=this.popupWrapper.querySelectorAll("."+t)),i},e.prototype.setActiveClass=function(){if(!u(this.popupWrapper)){var t=this.popupWrapper.querySelectorAll("."+Ai);if(t.length){for(var i=0;i<t.length;i++)if(this.timeCollections[i]===+this.getDateObject(this.valueWithMinutes)){t[i].setAttribute("aria-selected","true"),this.selectedElement=t[i],this.activeIndex=i;break}}}},e.prototype.addSelection=function(){this.selectedElement=null,this.removeSelection(),this.setActiveClass(),u(this.selectedElement)||(R([this.selectedElement],or),this.selectedElement.setAttribute("aria-selected","true"))},e.prototype.isValidLI=function(t){return t&&t.classList.contains(Ai)&&!t.classList.contains(ni)},e.prototype.createDateObj=function(t){var i=null,r=this.globalize.formatDate(new Date,{format:i,skeleton:"short",type:"date"}),n=null;return typeof t=="string"?t.toUpperCase().indexOf("AM")>-1||t.toUpperCase().indexOf("PM")>-1?(r=this.defaultCulture.formatDate(new Date,{format:i,skeleton:"short",type:"date"}),n=isNaN(+new Date(r+" "+t))?null:new Date(new Date(r+" "+t).setMilliseconds(0)),u(n)&&(n=this.timeParse(r,t))):n=this.timeParse(r,t):t instanceof Date&&(n=t),n},e.prototype.timeParse=function(t,i){var r;return r=this.globalize.parseDate(t+" "+i,{format:this.cldrDateFormat()+" "+this.cldrTimeFormat(),type:"datetime"}),r=u(r)?this.globalize.parseDate(t+" "+i,{format:this.cldrDateFormat()+" "+this.dateToNumeric(),type:"datetime"}):r,r=u(r)?r:new Date(r.setMilliseconds(0)),r},e.prototype.createListItems=function(){var t=this;this.listWrapper=this.createElement("div",{className:Em,attrs:{tabindex:"-1"}});var i,r=this.step*6e4,n=[];this.timeCollections=[],this.disableItemCollection=[],i=+this.getDateObject(this.initMin).setMilliseconds(0);for(var s=+this.getDateObject(this.initMax).setMilliseconds(0);s>=i;)this.timeCollections.push(i),n.push(this.globalize.formatDate(new Date(i),{format:this.cldrTimeFormat(),type:"time"})),i+=r;var o={itemCreated:function(l){var h={element:l.item,text:l.text,value:t.getDateObject(l.text),isDisabled:!1};t.trigger("itemRender",h,function(p){p.isDisabled&&p.element.classList.add(ni),p.element.classList.contains(ni)&&t.disableItemCollection.push(p.element.getAttribute("data-value"))})}};this.listTag=et.createList(this.createElement,n,o,!0),$(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options",tabindex:"0"}),be([this.listTag],this.listWrapper)},e.prototype.documentClickHandler=function(t){var i=t.target;!u(this.popupObj)&&!u(this.inputWrapper)&&(this.inputWrapper.container.contains(i)&&t.type!=="mousedown"||this.popupObj.element&&this.popupObj.element.contains(i))&&t.type!=="touchstart"&&t.preventDefault(),!M(i,'[id="'+this.popupObj.element.id+'"]')&&i!==this.inputElement&&i!==(this.inputWrapper&&this.inputWrapper.buttons[0])&&i!==(this.inputWrapper&&this.inputWrapper.clearButton)&&i!==(this.inputWrapper&&this.inputWrapper.container)&&!i.classList.contains("e-dlg-overlay")?this.isPopupOpen()&&(this.hide(),this.focusOut()):i!==this.inputElement&&(T.isDevice||(this.isPreventBlur=(T.isIE||T.info.name==="edge")&&document.activeElement===this.inputElement&&i===this.popupWrapper))},e.prototype.setEnableRtl=function(){G.setEnableRtl(this.enableRtl,[this.inputWrapper.container]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},e.prototype.setEnable=function(){G.setEnabled(this.enabled,this.inputElement,this.floatLabelType),this.enabled?(N([this.inputWrapper.container],ni),$(this.inputElement,{"aria-disabled":"false"}),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.hide(),R([this.inputWrapper.container],ni),$(this.inputElement,{"aria-disabled":"true"}),this.inputElement.tabIndex=-1)},e.prototype.getProperty=function(t,i){i==="min"?(this.initMin=this.checkDateValue(new Date(this.checkInValue(t.min))),this.setProperties({min:this.initMin},!0)):(this.initMax=this.checkDateValue(new Date(this.checkInValue(t.max))),this.setProperties({max:this.initMax},!0)),this.inputElement.value===""?this.validateMinMax(this.value,this.min,this.max):this.checkValue(this.inputElement.value),this.checkValueChange(null,!1)},e.prototype.inputBlurHandler=function(t){if(this.enabled){if(this.isPreventBlur&&this.isPopupOpen()){this.inputElement.focus();return}this.closePopup(0,t),this.enableMask&&this.maskedDateValue&&this.placeholder&&this.floatLabelType!=="Always"&&this.inputElement.value===this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&this.updateInputValue(""),N([this.inputWrapper.container],[ka]),this.getText()!==this.inputElement.value?this.updateValue(this.inputElement.value,t):this.inputElement.value.trim().length===0&&this.resetState(),this.cursorDetails=null,this.isNavigate=!1,this.inputElement.value===""&&(this.invalidValueString=null);var i={model:this};this.trigger("blur",i)}},e.prototype.focusOut=function(){if(document.activeElement===this.inputElement){this.inputElement.blur(),N([this.inputWrapper.container],[ka]);var t={model:this};this.trigger("blur",t)}},e.prototype.isPopupOpen=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+hs))},e.prototype.inputFocusHandler=function(){if(this.enabled){var t={model:this};!this.readonly&&!T.isDevice&&!this.enableMask&&this.selectInputText(),this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length),this.trigger("focus",t),this.clearIconState(),this.openOnFocus&&this.show()}},e.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},e.prototype.hide=function(){this.closePopup(100,null),this.clearIconState()},e.prototype.show=function(t){var i=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupWrapper)){this.popupCreation(),T.isDevice&&this.listWrapper&&(this.modal=this.createElement("div"),this.modal.className=""+hs+" e-time-modal",document.body.className+=" "+rh,document.body.appendChild(this.modal)),T.isDevice&&(this.mobileTimePopupWrap=this.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobileTimePopupWrap)),this.openPopupEventArgs={popup:this.popupObj||null,cancel:!1,event:t||null,name:"open",appendTo:T.isDevice?this.mobileTimePopupWrap:document.body};var r=this.openPopupEventArgs;if(this.trigger("open",r,function(s){if(i.openPopupEventArgs=s,!i.openPopupEventArgs.cancel&&!i.inputWrapper.buttons[0].classList.contains(ni)){i.openPopupEventArgs.appendTo.appendChild(i.popupWrapper),i.popupAlignment(i.openPopupEventArgs),i.setScrollPosition(),T.isDevice||i.inputElement.focus();var o={name:"FadeIn",duration:ih};i.popupObj.refreshPosition(i.anchor),i.zIndex===1e3?i.popupObj.show(new ui(o),i.element):i.popupObj.show(new ui(o),null),i.setActiveDescendant(),$(i.inputElement,{"aria-expanded":"true"}),$(i.inputElement,{"aria-owns":i.inputElement.id+"_options"}),$(i.inputElement,{"aria-controls":i.inputElement.id}),R([i.inputWrapper.container],ka),S.add(document,"mousedown touchstart",i.documentClickHandler,i),i.setOverlayIndex(i.mobileTimePopupWrap,i.popupObj.element,i.modal,T.isDevice)}else i.popupObj.destroy(),i.popupWrapper=i.listTag=void 0,i.liCollections=i.timeCollections=i.disableItemCollection=[],i.popupObj=null}),T.isDevice){var n=this.createElement("div",{className:"e-dlg-overlay"});n.style.zIndex=(this.zIndex-1).toString(),this.mobileTimePopupWrap.appendChild(n)}}},e.prototype.setOverlayIndex=function(t,i,r,n){if(n&&!u(i)&&!u(r)&&!u(t)){var s=parseInt(i.style.zIndex,10)?parseInt(i.style.zIndex,10):1e3;r.style.zIndex=(s-1).toString(),t.style.zIndex=s.toString()}},e.prototype.formatValues=function(t){var i;return typeof t=="number"?i=Le(t):typeof t=="string"&&(i=t.match(/px|%|em/)||isNaN(parseInt(t,10))?t:Le(t)),i},e.prototype.popupAlignment=function(t){if(t.popup.position.X=this.formatValues(t.popup.position.X),t.popup.position.Y=this.formatValues(t.popup.position.Y),(!isNaN(parseFloat(t.popup.position.X))||!isNaN(parseFloat(t.popup.position.Y)))&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.targetType="container"),isNaN(parseFloat(t.popup.position.X))||(this.popupObj.offsetX=parseFloat(t.popup.position.X)),isNaN(parseFloat(t.popup.position.Y))||(this.popupObj.offsetY=parseFloat(t.popup.position.Y)),T.isDevice)t.popup.position.X==="center"&&t.popup.position.Y==="center"&&(this.popupObj.relateTo=this.anchor=document.body,this.popupObj.offsetY=0,this.popupObj.targetType="container",this.popupObj.collision={X:"fit",Y:"fit"});else{switch(t.popup.position.X){case"left":break;case"right":t.popup.offsetX=this.containerStyle.width;break;case"center":t.popup.offsetX=-(this.containerStyle.width/2);break}switch(t.popup.position.Y){case"top":break;case"bottom":break;case"center":t.popup.offsetY=-(this.containerStyle.height/2);break}t.popup.position.X==="center"&&t.popup.position.Y==="center"&&(this.popupObj.relateTo=this.inputWrapper.container,this.anchor=this.inputElement,this.popupObj.targetType="relative")}},e.prototype.getPersistData=function(){var t=["value"];return this.addOnPersist(t)},e.prototype.getModuleName=function(){return"timepicker"},e.prototype.onPropertyChanged=function(t,i){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"placeholder":G.setPlaceholder(t.placeholder,this.inputElement);break;case"readonly":G.setReadonly(this.readonly,this.inputElement,this.floatLabelType),this.readonly&&this.hide(),this.setTimeAllowEdit();break;case"enabled":this.setProperties({enabled:t.enabled},!0),this.setEnable();break;case"allowEdit":this.setTimeAllowEdit();break;case"enableRtl":this.setProperties({enableRtl:t.enableRtl},!0),this.setEnableRtl();break;case"cssClass":this.updateCssClass(t.cssClass,i.cssClass);break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0),this.setZIndex();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"min":case"max":this.getProperty(t,s);break;case"showClearButton":G.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent();break;case"locale":this.setProperties({locale:t.locale},!0),this.globalize=new Ne(this.locale),this.l10n.setLocale(this.locale),this.timeOptions&&this.timeOptions.placeholder==null&&this.updatePlaceHolder(),this.setValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"width":hi(this.inputWrapper.container,{width:this.setWidth(t.width)}),this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),G.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"format":this.setProperties({format:t.format},!0),this.checkTimeFormat(),this.setValue(this.value),this.enableMask&&(this.createMask(),this.value||this.updateInputValue(this.maskedDateValue));break;case"value":this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,this.invalidValueString?(this.updateInputValue(this.invalidValueString),this.checkErrorState(this.invalidValueString)):(typeof t.value=="string"?(this.setProperties({value:this.checkDateValue(new Date(t.value))},!0),t.value=this.value):(t.value&&+new Date(+t.value).setMilliseconds(0))!==+this.value&&(t.value=this.checkDateValue(new Date(""+t.value))),this.initValue=t.value,t.value=this.compareFormatChange(this.checkValue(t.value))),this.enableMask&&u(t.value)&&(this.updateInputValue(this.maskedDateValue),this.checkErrorState(this.maskedDateValue)),this.checkValueChange(null,!1),this.isPopupOpen()&&this.setScrollPosition(),this.isAngular&&this.preventChange&&(this.preventChange=!1),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"floatLabelType":this.floatLabelType=t.floatLabelType,G.removeFloating(this.inputWrapper),G.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"strictMode":this.invalidValueString=null,t.strictMode&&this.checkErrorState(null),this.setProperties({strictMode:t.strictMode},!0),this.checkValue(this.inputElement.value),this.checkValueChange(null,!1);break;case"scrollTo":this.checkDateValue(new Date(this.checkInValue(t.scrollTo)))?(this.popupWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkInValue(t.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue)):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break}}},e.prototype.checkInValue=function(t){return t instanceof Date?t.toUTCString():""+t},Ce([C(null)],e.prototype,"width",void 0),Ce([C(null)],e.prototype,"cssClass",void 0),Ce([C(!1)],e.prototype,"strictMode",void 0),Ce([C(null)],e.prototype,"keyConfigs",void 0),Ce([C(null)],e.prototype,"format",void 0),Ce([C(!0)],e.prototype,"enabled",void 0),Ce([C(!1)],e.prototype,"fullScreenMode",void 0),Ce([C(!1)],e.prototype,"readonly",void 0),Ce([C({})],e.prototype,"htmlAttributes",void 0),Ce([C("Never")],e.prototype,"floatLabelType",void 0),Ce([C(null)],e.prototype,"placeholder",void 0),Ce([C(1e3)],e.prototype,"zIndex",void 0),Ce([C(!1)],e.prototype,"enablePersistence",void 0),Ce([C(!0)],e.prototype,"showClearButton",void 0),Ce([C(30)],e.prototype,"step",void 0),Ce([C(null)],e.prototype,"scrollTo",void 0),Ce([C(null)],e.prototype,"value",void 0),Ce([C(null)],e.prototype,"min",void 0),Ce([C(null)],e.prototype,"max",void 0),Ce([C(!0)],e.prototype,"allowEdit",void 0),Ce([C(!1)],e.prototype,"openOnFocus",void 0),Ce([C(!1)],e.prototype,"enableMask",void 0),Ce([C({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),Ce([C(null)],e.prototype,"serverTimezoneOffset",void 0),Ce([B()],e.prototype,"change",void 0),Ce([B()],e.prototype,"created",void 0),Ce([B()],e.prototype,"destroyed",void 0),Ce([B()],e.prototype,"open",void 0),Ce([B()],e.prototype,"itemRender",void 0),Ce([B()],e.prototype,"close",void 0),Ce([B()],e.prototype,"cleared",void 0),Ce([B()],e.prototype,"blur",void 0),Ce([B()],e.prototype,"focus",void 0),e=Ce([kt],e),e})(Hi);var Rm=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ee=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Am="e-date-wrapper",Tm="e-datepicker",Mm="e-datetime-wrapper",Fm=new Date().getDate(),Lm=new Date().getMonth(),Om=new Date().getFullYear(),Bm=new Date().getHours(),Pm=new Date().getMinutes(),Nm=new Date().getSeconds(),zm=new Date().getMilliseconds(),fn="e-datetimepicker",sh="e-datetimepopup-wrapper",Hm="e-input-group-icon",ah="e-popup",Vm="e-time-icon",gn="e-input-focus",oh="250px",lh="e-icon-anim",Aa="e-disabled",hh="e-error",qm="e-content",Wm="e-navigation",Ki="e-active",Ta="e-hover",jm="e-icons",us=2,Yi="e-list-item",uh=100,ph="e-time-overflow",Uo=function(a){Rm(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.valueWithMinutes=null,r.scrollInvoked=!1,r.moduleName=r.getModuleName(),r.formatRegex=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yyy|yy|y|'[^']*'|'[^']*'/g,r.dateFormatString="",r.dateTimeOptions=t,r}return e.prototype.focusHandler=function(){this.enabled&&R([this.inputWrapper.container],gn)},e.prototype.focusIn=function(){a.prototype.focusIn.call(this)},e.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),N([this.inputWrapper.container],[gn]))},e.prototype.blurHandler=function(t){if(this.enabled){if(this.isTimePopupOpen()&&this.isPreventBlur){this.inputElement.focus();return}N([this.inputWrapper.container],gn);var i={model:this};this.isTimePopupOpen()&&this.hide(t),this.trigger("blur",i)}},e.prototype.destroy=function(){this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.hide(null),this.popupObject&&this.popupObject.element.classList.contains(ah)&&(this.popupObject.destroy(),ne(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],u(this.rippleFn)||this.rippleFn());var t={"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"};this.inputElement&&G.removeAttributes(t,this.inputElement),this.isCalendar()&&(this.popupWrapper&&ne(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),this.liCollections=null,this.rippleFn=null,this.selectedElement=null,this.listTag=null,this.timeIcon=null,this.popupObject=null,this.preventArgs=null,this.keyboardModule=null,G.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),a.prototype.destroy.call(this)},e.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,typeof this.min=="string"&&(this.min=this.checkDateValue(new Date(this.min))),typeof this.max=="string"&&(this.max=this.checkDateValue(new Date(this.max))),!u(M(this.element,"fieldset"))&&M(this.element,"fieldset").disabled&&(this.enabled=!1),a.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1);var t={placeholder:this.placeholder};this.l10n=new Xt("datetimepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),a.prototype.render.call(this),this.createInputElement(),a.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(!0),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)&&G.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),this.element.tagName==="EJS-DATETIMEPICKER"&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),this.floatLabelType!=="Never"&&G.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},e.prototype.setValue=function(t){if(t===void 0&&(t=!1),this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var i=this.validateMinMaxRange(this.initValue);G.setValue(this.getFormattedValue(i),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:i},!0)}else u(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,a.prototype.updateInput.call(this,t)},e.prototype.validateMinMaxRange=function(t){var i=t;return this.isDateObject(t)?i=this.validateValue(t):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(i),i},e.prototype.checkValidState=function(t){this.isValidState=!0,this.strictMode||(+t>+this.max||+t<+this.min)&&(this.isValidState=!1),this.checkErrorState()},e.prototype.checkErrorState=function(){this.isValidState?N([this.inputWrapper.container],hh):R([this.inputWrapper.container],hh),$(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},e.prototype.validateValue=function(t){var i=t;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),i=this.max):+t<+this.min?i=this.min:+t>+this.max&&(i=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),i=t),i},e.prototype.disablePopupButton=function(t){t?(R([this.inputWrapper.buttons[0],this.timeIcon],Aa),this.hide()):N([this.inputWrapper.buttons[0],this.timeIcon],Aa)},e.prototype.getFormattedValue=function(t){var i;return u(t)?null:(this.calendarMode==="Gregorian"?i={format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:i={format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(t,i))},e.prototype.isDateObject=function(t){return!u(t)&&!isNaN(+t)},e.prototype.createInputElement=function(){N([this.inputElement],Tm),N([this.inputWrapper.container],Am),R([this.inputWrapper.container],Mm),R([this.inputElement],fn),this.renderTimeIcon()},e.prototype.renderTimeIcon=function(){this.timeIcon=G.appendSpan(Hm+" "+Vm+" "+jm,this.inputWrapper.container)},e.prototype.bindInputEvents=function(){S.add(this.timeIcon,"mousedown",this.timeHandler,this),S.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),S.add(this.inputElement,"blur",this.blurHandler,this),S.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=P(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new St(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},e.prototype.unBindInputEvents=function(){S.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),S.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(S.remove(this.inputElement,"blur",this.blurHandler),S.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},e.prototype.cldrTimeFormat=function(){var t;return this.isNullOrEmpty(this.timeFormat)?this.locale==="en"||this.locale==="en-US"?t=j("timeFormats.short",Oi()):t=this.getCultureTimeObject(Bi,""+this.locale):t=this.timeFormat,t},e.prototype.cldrDateTimeFormat=function(){var t,i=new Ne(this.locale),r=i.getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?t=r+" "+this.getCldrFormat("time"):t=this.formatString,t},e.prototype.getCldrFormat=function(t){var i;return this.locale==="en"||this.locale==="en-US"?i=j("timeFormats.short",Oi()):i=this.getCultureTimeObject(Bi,""+this.locale),i},e.prototype.isNullOrEmpty=function(t){return!!(u(t)||typeof t=="string"&&t.trim()==="")},e.prototype.getCultureTimeObject=function(t,i){return this.calendarMode==="Gregorian"?j("main."+this.locale+".dates.calendars.gregorian.timeFormats.short",t):j("main."+this.locale+".dates.calendars.islamic.timeFormats.short",t)},e.prototype.timeHandler=function(t){this.enabled&&(this.isIconClicked=!0,T.isDevice&&this.inputElement.setAttribute("readonly",""),t.currentTarget===this.timeIcon&&t.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&a.prototype.hide.call(this,t),this.isTimePopupOpen()?this.closePopup(t):(this.inputElement.focus(),this.popupCreation("time",t),R([this.inputWrapper.container],[gn]))),this.isIconClicked=!1)},e.prototype.dateHandler=function(t){this.enabled&&(t.currentTarget===this.inputWrapper.buttons[0]&&t.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(t),u(this.popupWrapper)||this.popupCreation("date",t)))},e.prototype.show=function(t,i){this.enabled&&this.readonly||!this.enabled||(t==="time"&&!this.dateTimeWrapper?(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)):this.popupObj||(this.isTimePopupOpen()&&this.hide(i),a.prototype.show.call(this),this.popupCreation("date",i)))},e.prototype.toggle=function(t){this.isDatePopupOpen()?(a.prototype.hide.call(this,t),this.show("time",null)):this.isTimePopupOpen()?(this.hide(t),a.prototype.show.call(this,null,t),this.popupCreation("date",null)):this.show(null,t)},e.prototype.listCreation=function(){var t;this.calendarMode==="Gregorian"?(this.cldrDateTimeFormat().replace(this.formatRegex,this.TimePopupFormat()),this.dateFormatString===""&&(this.dateFormatString=this.cldrDateTimeFormat()),t=this.globalize.parseDate(this.inputElement.value,{format:this.dateFormatString,type:"datetime"})):t=this.globalize.parseDate(this.inputElement.value,{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var i=u(this.value)?this.inputElement.value!==""?t:new Date:this.value;this.valueWithMinutes=i,this.listWrapper=ge("div",{className:qm,attrs:{tabindex:"0"}});var r=this.startTime(i),n=this.endTime(i),s=Co.createListItems(this.createElement,r,n,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=s.collection,this.listTag=s.list,$(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),be([s.list],this.listWrapper),this.wireTimeListEvents();var o={duration:300,selector:"."+Yi};this.rippleFn=Pi(this.listWrapper,o),this.liCollections=this.listWrapper.querySelectorAll("."+Yi)},e.prototype.popupCreation=function(t,i){T.isDevice&&this.element.setAttribute("readonly","readonly"),t==="date"?!this.readonly&&this.popupWrapper&&(R([this.popupWrapper],sh),$(this.popupWrapper,{id:this.element.id+"_options"})):this.readonly||(this.dateTimeWrapper=ge("div",{className:fn+" "+ah,attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),u(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!u(this.step)&&this.step>0&&(this.listCreation(),be([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(i),(!T.isDevice||T.isDevice&&!this.fullScreenMode)&&this.popupObject.refreshPosition(this.inputElement),T.isDevice&&this.fullScreenMode&&(this.dateTimeWrapper.style.left="0px"))},e.prototype.openPopup=function(t){var i=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:t||null};var r=this.preventArgs;this.trigger("open",r,function(n){if(i.preventArgs=n,!i.preventArgs.cancel&&!i.readonly){var s={name:"FadeIn",duration:uh};i.zIndex===1e3?i.popupObject.show(new ui(s),i.element):i.popupObject.show(new ui(s),null),R([i.inputWrapper.container],[lh]),$(i.inputElement,{"aria-expanded":"true"}),$(i.inputElement,{"aria-owns":i.inputElement.id+"_options"}),$(i.inputElement,{"aria-controls":i.inputElement.id}),S.add(document,"mousedown touchstart",i.documentClickHandler,i)}})},e.prototype.documentClickHandler=function(t){var i=t.target;!u(this.popupObject)&&(this.inputWrapper.container.contains(i)&&t.type!=="mousedown"||this.popupObject.element&&this.popupObject.element.contains(i))&&t.type!=="touchstart"&&t.preventDefault(),!M(i,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))&&i!==this.inputElement&&i!==this.timeIcon&&!u(this.inputWrapper)&&i!==this.inputWrapper.container&&!i.classList.contains("e-dlg-overlay")?this.isTimePopupOpen()&&(this.hide(t),this.focusOut()):i!==this.inputElement&&(T.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(T.isIE||T.info.name==="edge")&&i===this.popupObject.element))},e.prototype.isTimePopupOpen=function(){return!!(this.dateTimeWrapper&&this.dateTimeWrapper.classList.contains(""+fn))},e.prototype.isDatePopupOpen=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+sh))},e.prototype.renderPopup=function(){var t=this;if(this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),T.isDevice&&(this.timeModal=ge("div"),this.timeModal.className=""+fn+" e-time-modal",document.body.className+=" "+ph,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),T.isDevice){this.modelWrapper=ge("div",{className:"e-datetime-mob-popup-wrap"}),this.modelWrapper.appendChild(this.dateTimeWrapper);var i=ge("div",{className:"e-dlg-overlay"});i.style.zIndex=(this.zIndex-1).toString(),this.modelWrapper.appendChild(i),document.body.appendChild(this.modelWrapper)}var r=4;if(this.popupObject=new Yr(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:T.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:T.isDevice?document.body:this.inputWrapper.container,position:T.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:r,open:function(){t.dateTimeWrapper.style.visibility="visible",R([t.timeIcon],Ki),T.isDevice||(t.timekeyConfigure=P(t.timekeyConfigure,t.keyConfigs),t.inputEvent=new St(t.inputWrapper.container,{keyAction:t.timeKeyActionHandle.bind(t),keyConfigs:t.timekeyConfigure,eventName:"keydown"}))},close:function(){N([t.timeIcon],Ki),t.unWireTimeListEvents(),t.inputElement.removeAttribute("aria-activedescendant"),se(t.popupObject.element),t.popupObject.destroy(),t.dateTimeWrapper.innerHTML="",t.modelWrapper&&se(t.modelWrapper),t.listWrapper=t.dateTimeWrapper=void 0,t.inputEvent&&t.inputEvent.destroy()},targetExitViewport:function(){T.isDevice||t.hide()}}),T.isDevice&&this.fullScreenMode?(this.popupObject.element.style.maxHeight="100%",this.popupObject.element.style.width="100%"):this.popupObject.element.style.maxHeight=oh,T.isDevice&&this.fullScreenMode){var n=this.createElement("div",{className:"e-model-header"}),s=this.createElement("span",{className:"e-model-title"});s.textContent="Select time";var o=this.createElement("span",{className:"e-popup-close"});S.add(o,"mousedown touchstart",this.dateTimeCloseHandler,this),n.appendChild(o),n.appendChild(s),this.dateTimeWrapper.insertBefore(n,this.dateTimeWrapper.firstElementChild)}},e.prototype.dateTimeCloseHandler=function(t){this.hide()},e.prototype.setDimension=function(t){return typeof t=="number"?t=Le(t):typeof t=="string"?t=t:t="100%",t},e.prototype.setPopupWidth=function(){var t=this.setDimension(this.width);if(t.indexOf("%")>-1){var i=this.containerStyle.width*parseFloat(t)/100;t=i.toString()+"px"}return t},e.prototype.wireTimeListEvents=function(){S.add(this.listWrapper,"click",this.onMouseClick,this),T.isDevice||(S.add(this.listWrapper,"mouseover",this.onMouseOver,this),S.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},e.prototype.unWireTimeListEvents=function(){this.listWrapper&&(S.remove(this.listWrapper,"click",this.onMouseClick),S.remove(document,"mousedown touchstart",this.documentClickHandler),T.isDevice||(S.add(this.listWrapper,"mouseover",this.onMouseOver,this),S.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},e.prototype.onMouseOver=function(t){var i=M(t.target,"."+Yi);this.setTimeHover(i,Ta)},e.prototype.onMouseLeave=function(){this.removeTimeHover(Ta)},e.prototype.setTimeHover=function(t,i){this.enabled&&this.isValidLI(t)&&!t.classList.contains(i)&&(this.removeTimeHover(i),R([t],i))},e.prototype.getPopupHeight=function(){var t=parseInt(oh,10),i=this.dateTimeWrapper.getBoundingClientRect().height;return T.isDevice&&this.fullScreenMode?i:i>t?t:i},e.prototype.changeEvent=function(t){a.prototype.changeEvent.call(this,t),(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},e.prototype.updateValue=function(t){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:t||null,isInteracted:!u(t),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},e.prototype.setTimeScrollPosition=function(){var t=this.selectedElement;u(t)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(t)},e.prototype.findScrollTop=function(t){var i=this.getPopupHeight(),r=t.nextElementSibling,n=r?r.offsetTop:t.offsetTop,s=t.getBoundingClientRect().height;if(n+t.offsetTop>i)if(T.isDevice&&this.fullScreenMode){var o=this.dateTimeWrapper.querySelector(".e-content");o.scrollTop=r?n-(i/us+s/us):n}else this.dateTimeWrapper.scrollTop=r?n-(i/us+s/us):n;else this.dateTimeWrapper.scrollTop=0},e.prototype.setScrollTo=function(){var t,i=this.dateTimeWrapper.querySelectorAll("."+Yi);if(i.length>=0){this.scrollInvoked=!0;var r=this.timeCollections[0],n=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();t=i[Math.round((n-r)/(this.step*6e4))]}else this.dateTimeWrapper.scrollTop=0;u(t)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(t)},e.prototype.setInputValue=function(t){if(t==="date")this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var i=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));G.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},e.prototype.getFullDateTime=function(){var t=null;return this.isDateObject(this.valueWithMinutes)?t=this.combineDateTime(this.valueWithMinutes):t=this.previousDate,this.validateMinMaxRange(t)},e.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},e.prototype.combineDateTime=function(t){if(this.isDateObject(t)){var i=this.previousDate.getDate(),r=this.previousDate.getMonth(),n=this.previousDate.getFullYear(),s=t.getHours(),o=t.getMinutes(),l=t.getSeconds();return new Date(n,r,i,s,o,l)}else return this.previousDate},e.prototype.onMouseClick=function(t){var i=t.target,r=this.selectedElement=M(i,"."+Yi);r&&r.classList.contains(Yi)&&(this.timeValue=r.getAttribute("data-value"),this.hide(t)),this.setSelection(r,t)},e.prototype.setSelection=function(t,i){if(this.isValidLI(t)&&!t.classList.contains(Ki)){this.selectedElement=t;var r=Array.prototype.slice.call(this.liCollections).indexOf(t);this.activeIndex=r,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),R([this.selectedElement],Ki),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(i)}},e.prototype.setTimeActiveClass=function(){var t=u(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!u(t)){var i=t.querySelectorAll("."+Yi);if(i.length){for(var r=0;r<i.length;r++)if(this.timeCollections[r]===+this.valueWithMinutes){i[r].setAttribute("aria-selected","true"),this.selectedElement=i[r],this.activeIndex=r,this.setTimeActiveDescendant();break}}}},e.prototype.setTimeActiveDescendant=function(){!u(this.selectedElement)&&this.value?$(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},e.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),u(this.selectedElement)||(R([this.selectedElement],Ki),this.selectedElement.setAttribute("aria-selected","true"))},e.prototype.removeTimeSelection=function(){if(this.removeTimeHover(Ta),!u(this.dateTimeWrapper)){var t=this.dateTimeWrapper.querySelectorAll("."+Ki);t.length&&(N(t,Ki),t[0].removeAttribute("aria-selected"))}},e.prototype.removeTimeHover=function(t){var i=this.getTimeHoverItem(t);i&&i.length&&N(i,t)},e.prototype.getTimeHoverItem=function(t){var i=u(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper,r;return u(i)||(r=i.querySelectorAll("."+t)),r},e.prototype.isValidLI=function(t){return t&&t.classList.contains(Yi)&&!t.classList.contains(Aa)},e.prototype.calculateStartEnd=function(t,i,r){var n=t.getDate(),s=t.getMonth(),o=t.getFullYear(),l=t.getHours(),h=t.getMinutes(),p=t.getSeconds(),c=t.getMilliseconds();return i?r==="starttime"?new Date(o,s,n,0,0,0):new Date(o,s,n,23,59,59):new Date(o,s,n,l,h,p,c)},e.prototype.startTime=function(t){var i,r,n=this.min,s=t===null?new Date:t;return+s.getDate()==+n.getDate()&&+s.getMonth()==+n.getMonth()&&+s.getFullYear()==+n.getFullYear()||+new Date(s.getFullYear(),s.getMonth(),s.getDate())<=+new Date(n.getFullYear(),n.getMonth(),n.getDate())?(r=!1,i=this.min):+s<+this.max&&+s>+this.min?(r=!0,i=s):+s>=+this.max&&(r=!0,i=this.max),this.calculateStartEnd(i,r,"starttime")},e.prototype.TimePopupFormat=function(){var t="",i=0,r=this;function n(s){switch(s){case"d":case"dd":case"ddd":case"dddd":case"M":case"MM":case"MMM":case"MMMM":case"y":case"yy":case"yyy":case"yyyy":t===""?t=t+s:t=t+"/"+s,i=i+1;break}return i>2&&(r.dateFormatString=t),t}return n},e.prototype.endTime=function(t){var i,r,n=this.max,s=t===null?new Date:t;return+s.getDate()==+n.getDate()&&+s.getMonth()==+n.getMonth()&&+s.getFullYear()==+n.getFullYear()||+new Date(s.getUTCFullYear(),s.getMonth(),s.getDate())>=+new Date(n.getFullYear(),n.getMonth(),n.getDate())?(r=!1,i=this.max):+s<+this.max&&+s>+this.min?(r=!0,i=s):+s<=+this.min&&(r=!0,i=this.min),this.calculateStartEnd(i,r,"endtime")},e.prototype.hide=function(t){var i=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:t||null};var r=this.preventArgs;u(this.popupObj)?this.trigger("close",r,function(n){i.dateTimeCloseEventCallback(t,n)}):this.dateTimeCloseEventCallback(t,r)}else T.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},e.prototype.dateTimeCloseEventCallback=function(t,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?a.prototype.hide.call(this,t):this.isTimePopupOpen()&&(this.closePopup(t),N([document.body],ph),T.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),T.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},e.prototype.closePopup=function(t){if(this.isTimePopupOpen()&&this.popupObject){var i={name:"FadeOut",duration:uh,delay:0};this.popupObject.hide(new ui(i)),this.inputWrapper.container.classList.remove(lh),$(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-controls"),S.remove(document,"mousedown touchstart",this.documentClickHandler)}},e.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),a.prototype.preRender.call(this),N([this.inputElementCopy],[fn])},e.prototype.getProperty=function(t,i){i==="min"?this.setProperties({min:this.validateValue(t.min)},!0):this.setProperties({max:this.validateValue(t.max)},!0)},e.prototype.checkAttributes=function(t){for(var i=t?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"],r,n=0,s=i;n<s.length;n++){var o=s[n];if(!u(this.inputElement.getAttribute(o)))switch(o){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(o));break;case"step":this.step=parseInt(this.inputElement.getAttribute(o),10);break;case"readonly":if(u(this.dateTimeOptions)||this.dateTimeOptions.readonly===void 0||t){var l=this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)===""||this.inputElement.getAttribute(o)==="true";this.setProperties({readonly:l},!t)}break;case"placeholder":(u(this.dateTimeOptions)||this.dateTimeOptions.placeholder===void 0||t)&&this.setProperties({placeholder:this.inputElement.getAttribute(o)},!t);break;case"min":(u(this.dateTimeOptions)||this.dateTimeOptions.min===void 0||t)&&(r=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(r)&&!isNaN(+r)&&this.setProperties({min:r},!t));break;case"disabled":if(u(this.dateTimeOptions)||this.dateTimeOptions.enabled===void 0||t){var h=!(this.inputElement.getAttribute(o)==="disabled"||this.inputElement.getAttribute(o)==="true"||this.inputElement.getAttribute(o)==="");this.setProperties({enabled:h},!t)}break;case"value":(u(this.dateTimeOptions)||this.dateTimeOptions.value===void 0||t)&&(r=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(r)&&!isNaN(+r)&&this.setProperties({value:r},!t));break;case"max":(u(this.dateTimeOptions)||this.dateTimeOptions.max===void 0||t)&&(r=new Date(this.inputElement.getAttribute(o)),!this.isNullOrEmpty(r)&&!isNaN(+r)&&this.setProperties({max:r},!t));break}}},e.prototype.requiredModules=function(){var t=[];return this.calendarMode==="Islamic"&&t.push({args:[this],member:"islamic",name:"Islamic"}),this.enableMask&&t.push(this.maskedDateModule()),t},e.prototype.maskedDateModule=function(){var t={args:[this],member:"MaskedDateTime"};return t},e.prototype.getTimeActiveElement=function(){return u(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+Ki)},e.prototype.createDateObj=function(t){return t instanceof Date?t:null},e.prototype.getDateObject=function(t){if(!this.isNullOrEmpty(t)){var i=this.createDateObj(t),r=this.valueWithMinutes,n=!u(r);if(this.checkDateValue(i)){var s=n?r.getDate():Fm,o=n?r.getMonth():Lm,l=n?r.getFullYear():Om,h=n?r.getHours():Bm,p=n?r.getMinutes():Pm,c=n?r.getSeconds():Nm,d=n?r.getMilliseconds():zm;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(l,o,s,i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(l,o,s,h,p,c,d)}}return null},e.prototype.findNextTimeElement=function(t){var i=this.inputElement.value,r=u(this.valueWithMinutes)?this.createDateObj(i):this.getDateObject(this.valueWithMinutes),n=null,s=this.liCollections.length;if(!u(this.activeIndex)||!u(this.checkDateValue(r))){if(t.action==="home")n=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if(t.action==="end")n=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if(t.action==="down"){for(var o=0;o<s;o++)if(+r<this.timeCollections[o]){n=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}}else for(var o=s-1;o>=0;o--)if(+r>this.timeCollections[o]){n=+this.createDateObj(new Date(this.timeCollections[o])),this.activeIndex=o;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(u(n)?null:new Date(n))}},e.prototype.setTimeValue=function(t,i){var r,n,s=this.validateMinMaxRange(i),o=this.createDateObj(s);return this.getFormattedValue(o)!==(u(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=u(o)?null:o,n=new Date(+this.valueWithMinutes)):(this.strictMode&&(t=o),this.valueWithMinutes=this.checkDateValue(t),n=new Date(+this.valueWithMinutes)),this.calendarMode==="Gregorian"?r=this.globalize.formatDate(n,{format:u(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}):r=this.globalize.formatDate(n,{format:u(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&u(n)?G.setValue(r,this.inputElement,this.floatLabelType,this.showClearButton):G.setValue(r,this.inputElement,this.floatLabelType,this.showClearButton),n},e.prototype.timeElementValue=function(t){if(!u(this.checkDateValue(t))&&!this.isNullOrEmpty(t)){var i=t instanceof Date?t:this.getDateObject(t);return this.setTimeValue(i,t)}return null},e.prototype.timeKeyHandler=function(t){if(!(u(this.step)||this.step<=0)){var i=this.timeCollections.length;if(u(this.getTimeActiveElement())||this.getTimeActiveElement().length===0)this.liCollections.length>0&&(u(this.value)&&u(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(t));else{var r=void 0;if(t.keyCode>=37&&t.keyCode<=40){var n=t.keyCode===40||t.keyCode===39?++this.activeIndex:--this.activeIndex;this.activeIndex=n=this.activeIndex===i?0:this.activeIndex,this.activeIndex=n=this.activeIndex<0?i-1:this.activeIndex,r=u(this.timeCollections[n])?this.timeCollections[0]:this.timeCollections[n]}else t.action==="home"?(this.activeIndex=0,r=this.timeCollections[0]):t.action==="end"&&(this.activeIndex=i-1,r=this.timeCollections[i-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(r))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,Wm),this.setTimeActiveDescendant(),this.isTimePopupOpen()&&this.selectedElement!==null&&(!t||t.type!=="click")&&this.setTimeScrollPosition()}},e.prototype.timeKeyActionHandle=function(t){if(this.enabled)switch(t.action!=="right"&&t.action!=="left"&&t.action!=="tab"&&t.preventDefault(),t.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(t);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(t),this.hide(t),R([this.inputWrapper.container],gn),this.isNavigate=!1,t.stopPropagation();break;case"escape":this.hide(t);break;default:this.isNavigate=!1;break}},e.prototype.inputKeyAction=function(t){switch(t.action){case"altDownArrow":this.strictModeUpdate(),this.updateInput(),this.toggle(t);break}},e.prototype.onPropertyChanged=function(t,i){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r],o=["blur","change","cleared","close","created","destroyed","focus","navigated","open","renderDayCell"];switch(o.indexOf(s)>0&&this.isReact&&(this.isDynamicValueChanged=!0),s){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(t.value),t.value=this.value,t.value=this.validateValue(t.value),this.enableMask?G.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton):G.setValue(this.getFormattedValue(t.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=t.value,this.setProperties({value:t.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(t,s),this.updateInput();break;case"enableRtl":G.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":u(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),u(t.cssClass)||(t.cssClass=t.cssClass.replace(/\s+/g," ").trim()),G.setCssClass(t.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&G.setCssClass(t.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new Ne(this.locale),this.l10n.setLocale(this.locale),this.dateTimeOptions&&this.dateTimeOptions.placeholder==null&&(this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),G.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement)),this.dateTimeFormat=this.cldrDateTimeFormat(),a.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:t.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||G.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":G.setPlaceholder(t.placeholder,this.inputElement);break;case"enabled":G.setEnabled(this.enabled,this.inputElement),this.enabled?this.inputElement.setAttribute("tabindex",this.tabIndex):this.inputElement.tabIndex=-1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(t.width),G.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":G.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,G.removeFloating(this.inputWrapper),G.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(t.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(t.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),G.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",G.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:a.prototype.onPropertyChanged.call(this,t,i);break}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},e.prototype.getModuleName=function(){return"datetimepicker"},e.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=u(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},Ee([C(null)],e.prototype,"timeFormat",void 0),Ee([C(30)],e.prototype,"step",void 0),Ee([C(null)],e.prototype,"scrollTo",void 0),Ee([C(1e3)],e.prototype,"zIndex",void 0),Ee([C(null)],e.prototype,"value",void 0),Ee([C(null)],e.prototype,"keyConfigs",void 0),Ee([C({})],e.prototype,"htmlAttributes",void 0),Ee([C(!1)],e.prototype,"enablePersistence",void 0),Ee([C(!0)],e.prototype,"allowEdit",void 0),Ee([C(!1)],e.prototype,"isMultiSelection",void 0),Ee([C(null)],e.prototype,"values",void 0),Ee([C(!0)],e.prototype,"showClearButton",void 0),Ee([C(null)],e.prototype,"placeholder",void 0),Ee([C(!1)],e.prototype,"strictMode",void 0),Ee([C(!1)],e.prototype,"fullScreenMode",void 0),Ee([C(null)],e.prototype,"serverTimezoneOffset",void 0),Ee([C(new Date(1900,0,1))],e.prototype,"min",void 0),Ee([C(new Date(2099,11,31))],e.prototype,"max",void 0),Ee([C(null)],e.prototype,"firstDayOfWeek",void 0),Ee([C("Gregorian")],e.prototype,"calendarMode",void 0),Ee([C("Month")],e.prototype,"start",void 0),Ee([C("Month")],e.prototype,"depth",void 0),Ee([C(!1)],e.prototype,"weekNumber",void 0),Ee([C(!0)],e.prototype,"showTodayButton",void 0),Ee([C("Short")],e.prototype,"dayHeaderFormat",void 0),Ee([C(!1)],e.prototype,"openOnFocus",void 0),Ee([C(!1)],e.prototype,"enableMask",void 0),Ee([C({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],e.prototype,"maskPlaceholder",void 0),Ee([B()],e.prototype,"open",void 0),Ee([B()],e.prototype,"close",void 0),Ee([B()],e.prototype,"cleared",void 0),Ee([B()],e.prototype,"blur",void 0),Ee([B()],e.prototype,"focus",void 0),Ee([B()],e.prototype,"created",void 0),Ee([B()],e.prototype,"destroyed",void 0),e=Ee([kt],e),e}(Wn),ch="ArrowLeft",Um="ArrowRight",Gm="ArrowUp",dh="ArrowDown",fh="Tab",mn="shiftTab",ps="End",gh="Home",_m=function(){function a(e){this.mask="",this.defaultConstant={day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"},this.hiddenMask="",this.validCharacters="dMyhmHfasz",this.isDayPart=!1,this.isMonthPart=!1,this.isYearPart=!1,this.isHourPart=!1,this.isMinutePart=!1,this.isSecondsPart=!1,this.isMilliSecondsPart=!1,this.monthCharacter="",this.periodCharacter="",this.isHiddenMask=!1,this.isComplete=!1,this.isNavigate=!1,this.navigated=!1,this.isBlur=!1,this.formatRegex=/EEEEE|EEEE|EEE|EE|E|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yyy|yy|y|HH|H|hh|h|mm|m|fff|ff|f|aa|a|ss|s|zzzz|zzz|zz|z|'[^']*'|'[^']*'/g,this.isDeletion=!1,this.isShortYear=!1,this.isDeleteKey=!1,this.isDateZero=!1,this.isMonthZero=!1,this.isYearZero=!1,this.isLeadingZero=!1,this.dayTypeCount=0,this.monthTypeCount=0,this.hourTypeCount=0,this.minuteTypeCount=0,this.secondTypeCount=0,this.parent=e,this.dateformat=this.getCulturedFormat(),this.maskDateValue=this.parent.value!=null?new Date(+this.parent.value):new Date,this.maskDateValue.setMonth(0),this.maskDateValue.setHours(0),this.maskDateValue.setMinutes(0),this.maskDateValue.setSeconds(0),this.previousDate=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds()),this.removeEventListener(),this.addEventListener()}return a.prototype.getModuleName=function(){return"MaskedDateTime"},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("createMask",this.createMask,this),this.parent.on("setMaskSelection",this.validCharacterCheck,this),this.parent.on("inputHandler",this.maskInputHandler,this),this.parent.on("keyDownHandler",this.maskKeydownHandler,this),this.parent.on("clearHandler",this.clearHandler,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("createMask",this.createMask),this.parent.off("setMaskSelection",this.validCharacterCheck),this.parent.off("inputHandler",this.maskInputHandler),this.parent.off("keyDownHandler",this.maskKeydownHandler),this.parent.off("clearHandler",this.clearHandler))},a.prototype.createMask=function(e){this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.dateformat=this.getCulturedFormat(),this.parent.maskPlaceholder.day&&(this.defaultConstant.day=this.parent.maskPlaceholder.day),this.parent.maskPlaceholder.month&&(this.defaultConstant.month=this.parent.maskPlaceholder.month),this.parent.maskPlaceholder.year&&(this.defaultConstant.year=this.parent.maskPlaceholder.year),this.parent.maskPlaceholder.hour&&(this.defaultConstant.hour=this.parent.maskPlaceholder.hour),this.parent.maskPlaceholder.minute&&(this.defaultConstant.minute=this.parent.maskPlaceholder.minute),this.parent.maskPlaceholder.second&&(this.defaultConstant.second=this.parent.maskPlaceholder.second),this.parent.maskPlaceholder.dayOfTheWeek&&(this.defaultConstant.dayOfTheWeek=this.parent.maskPlaceholder.dayOfTheWeek.toString()),this.getCUltureMaskFormat();var t=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.mask=this.previousValue=t,this.parent.maskedDateValue=this.mask,this.parent.value&&(this.navigated=!0,this.isBlur=e.isBlur,this.setDynamicValue())},a.prototype.getCUltureMaskFormat=function(){this.l10n=new Xt(this.parent.moduleName,this.defaultConstant,this.parent.locale),this.objectString=Object.keys(this.defaultConstant);for(var e=0;e<this.objectString.length;e++)this.defaultConstant[this.objectString[e].toString()]=this.l10n.getConstant(this.objectString[e].toString())},a.prototype.validCharacterCheck=function(){var e=this.parent.inputElement.selectionStart;this.parent.moduleName!=="timepicker"&&e===this.hiddenMask.length&&this.mask===this.parent.inputElement.value&&(e=0);for(var t=e,i=e-1;t<this.hiddenMask.length||i>=0;t++,i--){if(t<this.hiddenMask.length&&this.validCharacters.indexOf(this.hiddenMask[t])!==-1){this.setSelection(this.hiddenMask[t]);return}if(i>=0&&this.validCharacters.indexOf(this.hiddenMask[i])!==-1){this.setSelection(this.hiddenMask[i]);return}}},a.prototype.setDynamicValue=function(){this.maskDateValue=new Date(+this.parent.value),this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!0,this.updateValue(),this.isBlur||this.validCharacterCheck()},a.prototype.setSelection=function(e){for(var t=-1,i=0,r=0;r<this.hiddenMask.length;r++)this.hiddenMask[r]===e&&(i=r+1,t===-1&&(t=r));t<0&&(t=0),this.parent.inputElement.setSelectionRange(t,i)},a.prototype.maskKeydownHandler=function(e){if(this.dayTypeCount=this.monthTypeCount=this.hourTypeCount=this.minuteTypeCount=this.secondTypeCount=0,e.e.key==="Delete"){this.isDeleteKey=!0;return}if(!e.e.altKey&&!e.e.ctrlKey&&(e.e.key===ch||e.e.key===Um||e.e.key===mn||e.e.key===fh||e.e.action===mn||e.e.key===ps||e.e.key===gh)){var t=this.parent.inputElement.selectionStart,i=this.parent.inputElement.selectionEnd,r=this.parent.inputElement.value.length;if(t===0&&i===r&&(e.e.key===fh||e.e.action===mn)){var n=e.e.action===mn?i:0;this.parent.inputElement.selectionStart=this.parent.inputElement.selectionEnd=n}if(e.e.key===ps||e.e.key===gh){var s=e.e.key===ps?r:0;this.parent.inputElement.selectionStart=this.parent.inputElement.selectionEnd=s}this.navigateSelection(e.e.key===ch||e.e.action===mn||e.e.key===ps)}if(!e.e.altKey&&!e.e.ctrlKey&&(e.e.key===Gm||e.e.key===dh)){var t=this.parent.inputElement.selectionStart,o="";this.validCharacters.indexOf(this.hiddenMask[t])!==-1&&(o=this.hiddenMask[t]),this.dateAlteration(e.e.key===dh);var l=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=l,this.parent.inputElement.value=l;for(var h=0;h<this.hiddenMask.length;h++)if(o===this.hiddenMask[h]){t=h;break}this.parent.inputElement.selectionStart=t,this.validCharacterCheck()}},a.prototype.isPersist=function(){var e=this.parent.isFocused||this.navigated;return e},a.prototype.differenceCheck=function(){var e=this.parent.inputElement.selectionStart,t=this.parent.inputElement.value,i=this.previousValue.substring(0,e+this.previousValue.length-t.length),r=t.substring(0,e),n=new Date(+this.maskDateValue),s=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();if(i.indexOf(r)===0&&(r.length===0||this.previousHiddenMask[r.length-1]!==this.previousHiddenMask[r.length])){for(var o=r.length;o<i.length;o++)this.previousHiddenMask[o]!==""&&this.validCharacters.indexOf(this.previousHiddenMask[o])>=0&&(this.isDeletion=this.handleDeletion(this.previousHiddenMask[o],!1));if(this.isDeletion)return}switch(this.previousHiddenMask[e-1]){case"d":{var l=(this.isDayPart&&n.getDate().toString().length<2&&!this.isPersist()?n.getDate()*10:0)+parseInt(r[e-1],10);if(this.isDateZero=r[e-1]==="0",this.parent.isFocused=this.parent.isFocused?!1:this.parent.isFocused,this.navigated=this.navigated?!1:this.navigated,isNaN(l))return;for(var o=0;l>s;o++)l=parseInt(l.toString().slice(1),10);if(l>=1){if(n.setDate(l),this.isNavigate=l.toString().length===2,this.previousDate=new Date(n.getFullYear(),n.getMonth(),n.getDate()),n.getMonth()!==this.maskDateValue.getMonth())return;this.isDayPart=!0,this.dayTypeCount=this.dayTypeCount+1}else this.isDayPart=!1,this.dayTypeCount=this.isDateZero?this.dayTypeCount+1:this.dayTypeCount;break}case"M":{var h=void 0;if(n.getMonth().toString().length<2&&!this.isPersist()?h=(this.isMonthPart?(n.getMonth()+1)*10:0)+parseInt(r[e-1],10):h=parseInt(r[e-1],10),this.parent.isFocused=this.parent.isFocused?!1:this.parent.isFocused,this.navigated=this.navigated?!1:this.navigated,this.isMonthZero=r[e-1]==="0",isNaN(h)){var d=this.getCulturedValue("months[stand-alone].wide"),f=Object.keys(d);for(this.monthCharacter+=r[e-1].toLowerCase();this.monthCharacter.length>0;){for(var o=1,g=0,m=f;g<m.length;g++){if(m[g],d[o].toLowerCase().indexOf(this.monthCharacter)===0){n.setMonth(o-1),this.isMonthPart=!0,this.maskDateValue=n;return}o++}this.monthCharacter=this.monthCharacter.substring(1,this.monthCharacter.length)}}else{for(;h>12;)h=parseInt(h.toString().slice(1),10);if(h>=1){if(n.setMonth(h-1),h>=10||h===1?this.isLeadingZero&&h===1?(this.isNavigate=h.toString().length===1,this.isLeadingZero=!1):this.isNavigate=h.toString().length===2:this.isNavigate=h.toString().length===1,n.getMonth()!==h-1&&(n.setDate(1),n.setMonth(h-1)),this.isDayPart){var p=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),c=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();this.previousDate.getDate()===p&&c<=p&&n.setDate(c)}this.previousDate=new Date(n.getFullYear(),n.getMonth(),n.getDate()),this.isMonthPart=!0,this.monthTypeCount=this.monthTypeCount+1,this.isLeadingZero=!1}else n.setMonth(0),this.isLeadingZero=!0,this.isMonthPart=!1,this.monthTypeCount=this.isMonthZero?this.monthTypeCount+1:this.monthTypeCount}break}case"y":{var v=(this.isYearPart&&n.getFullYear().toString().length<4&&!this.isShortYear?n.getFullYear()*10:0)+parseInt(r[e-1],10),y=(this.dateformat.match(/y/g)||[]).length;if(y=y!==2?4:y,this.isShortYear=!1,this.isYearZero=r[e-1]==="0",isNaN(v))return;for(;v>9999;)v=parseInt(v.toString().slice(1),10);v<1?this.isYearPart=!1:(n.setFullYear(v),v.toString().length===y&&(this.isNavigate=!0),this.previousDate=new Date(n.getFullYear(),n.getMonth(),n.getDate()),this.isYearPart=!0);break}case"h":if(this.hour=(this.isHourPart&&(n.getHours()%12||12).toString().length<2&&!this.isPersist()?(n.getHours()%12||12)*10:0)+parseInt(r[e-1],10),this.parent.isFocused=this.parent.isFocused?!1:this.parent.isFocused,this.navigated=this.navigated?!1:this.navigated,isNaN(this.hour))return;for(;this.hour>12;)this.hour=parseInt(this.hour.toString().slice(1),10);n.setHours(Math.floor(n.getHours()/12)*12+this.hour%12),this.isNavigate=this.hour.toString().length===2,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"H":if(this.hour=(this.isHourPart&&n.getHours().toString().length<2&&!this.isPersist()?n.getHours()*10:0)+parseInt(r[e-1],10),this.parent.isFocused=this.parent.isFocused?!1:this.parent.isFocused,this.navigated=this.navigated?!1:this.navigated,isNaN(this.hour))return;for(var o=0;this.hour>23;o++)this.hour=parseInt(this.hour.toString().slice(1),10);n.setHours(this.hour),this.isNavigate=this.hour.toString().length===2,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"m":{var w=(this.isMinutePart&&n.getMinutes().toString().length<2&&!this.isPersist()?n.getMinutes()*10:0)+parseInt(r[e-1],10);if(this.parent.isFocused=this.parent.isFocused?!1:this.parent.isFocused,this.navigated=this.navigated?!1:this.navigated,isNaN(w))return;for(var o=0;w>59;o++)w=parseInt(w.toString().slice(1),10);n.setMinutes(w),this.isNavigate=w.toString().length===2,this.isMinutePart=!0,this.minuteTypeCount=this.minuteTypeCount+1;break}case"s":{var b=(this.isSecondsPart&&n.getSeconds().toString().length<2&&!this.isPersist()?n.getSeconds()*10:0)+parseInt(r[e-1],10);if(this.parent.isFocused=this.parent.isFocused?!1:this.parent.isFocused,this.navigated=this.navigated?!1:this.navigated,isNaN(b))return;for(var o=0;b>59;o++)b=parseInt(b.toString().slice(1),10);n.setSeconds(b),this.isNavigate=b.toString().length===2,this.isSecondsPart=!0,this.secondTypeCount=this.secondTypeCount+1;break}case"a":{this.periodCharacter+=r[e-1].toLowerCase();for(var I=this.getCulturedValue("dayPeriods.format.wide"),k=Object.keys(I),o=0;this.periodCharacter.length>0;o++)(I[k[0]].toLowerCase().indexOf(this.periodCharacter)===0&&n.getHours()>=12||I[k[1]].toLowerCase().indexOf(this.periodCharacter)===0&&n.getHours()<12)&&(n.setHours((n.getHours()+12)%24),this.maskDateValue=n),this.periodCharacter=this.periodCharacter.substring(1,this.periodCharacter.length);break}}this.maskDateValue=n},a.prototype.formatCheck=function(){var e=this;function t(i){var r,n=e.getCulturedValue("days[stand-alone].abbreviated"),s=Object.keys(n),o=e.getCulturedValue("days[stand-alone].wide"),l=Object.keys(o),h=e.getCulturedValue("days[stand-alone].narrow"),p=Object.keys(h),c=e.getCulturedValue("months[stand-alone].abbreviated"),d=e.getCulturedValue("months[stand-alone].wide"),f=e.getCulturedValue("dayPeriods.format.wide"),g,m;switch(i){case"ddd":case"dddd":case"d":r=e.isDayPart?e.maskDateValue.getDate().toString():e.defaultConstant.day.toString(),r=e.zeroCheck(e.isDateZero,e.isDayPart,r),e.dayTypeCount===2&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"dd":r=e.isDayPart?e.roundOff(e.maskDateValue.getDate(),2):e.defaultConstant.day.toString(),r=e.zeroCheck(e.isDateZero,e.isDayPart,r),e.dayTypeCount===2&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"E":case"EE":case"EEE":r=e.isDayPart&&e.isMonthPart&&e.isYearPart?n[s[e.maskDateValue.getDay()]].toString():e.defaultConstant.dayOfTheWeek.toString();break;case"EEEE":r=e.isDayPart&&e.isMonthPart&&e.isYearPart?o[l[e.maskDateValue.getDay()]].toString():e.defaultConstant.dayOfTheWeek.toString();break;case"EEEEE":r=e.isDayPart&&e.isMonthPart&&e.isYearPart?h[p[e.maskDateValue.getDay()]].toString():e.defaultConstant.dayOfTheWeek.toString();break;case"M":r=e.isMonthPart?(e.maskDateValue.getMonth()+1).toString():e.defaultConstant.month.toString(),r=e.zeroCheck(e.isMonthZero,e.isMonthPart,r),e.monthTypeCount===2&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MM":r=e.isMonthPart?e.roundOff(e.maskDateValue.getMonth()+1,2):e.defaultConstant.month.toString(),r=e.zeroCheck(e.isMonthZero,e.isMonthPart,r),e.monthTypeCount===2&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MMM":r=e.isMonthPart?c[e.maskDateValue.getMonth()+1]:e.defaultConstant.month.toString();break;case"MMMM":r=e.isMonthPart?d[e.maskDateValue.getMonth()+1]:e.defaultConstant.month.toString();break;case"yy":r=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear()%100,2):e.defaultConstant.year.toString(),r=e.zeroCheck(e.isYearZero,e.isYearPart,r);break;case"y":case"yyy":case"yyyy":r=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear(),4):e.defaultConstant.year.toString(),r=e.zeroCheck(e.isYearZero,e.isYearPart,r);break;case"h":r=e.isHourPart?(e.maskDateValue.getHours()%12||12).toString():e.defaultConstant.hour.toString(),e.hourTypeCount===2&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"hh":r=e.isHourPart?e.roundOff(e.maskDateValue.getHours()%12||12,2):e.defaultConstant.hour.toString(),e.hourTypeCount===2&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"H":r=e.isHourPart?e.maskDateValue.getHours().toString():e.defaultConstant.hour.toString(),e.hourTypeCount===2&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"HH":r=e.isHourPart?e.roundOff(e.maskDateValue.getHours(),2):e.defaultConstant.hour.toString(),e.hourTypeCount===2&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"m":r=e.isMinutePart?e.maskDateValue.getMinutes().toString():e.defaultConstant.minute.toString(),e.minuteTypeCount===2&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"mm":r=e.isMinutePart?e.roundOff(e.maskDateValue.getMinutes(),2):e.defaultConstant.minute.toString(),e.minuteTypeCount===2&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"s":r=e.isSecondsPart?e.maskDateValue.getSeconds().toString():e.defaultConstant.second.toString(),e.secondTypeCount===2&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"ss":r=e.isSecondsPart?e.roundOff(e.maskDateValue.getSeconds(),2):e.defaultConstant.second.toString(),e.secondTypeCount===2&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"f":r=Math.floor(e.maskDateValue.getMilliseconds()/100).toString();break;case"ff":g=e.maskDateValue.getMilliseconds(),e.maskDateValue.getMilliseconds()>99&&(g=Math.floor(e.maskDateValue.getMilliseconds()/10)),r=e.roundOff(g,2);break;case"fff":r=e.roundOff(e.maskDateValue.getMilliseconds(),3);break;case"a":case"aa":r=e.maskDateValue.getHours()<12?f.am:f.pm;break;case"z":case"zz":case"zzz":case"zzzz":m={format:i,type:"dateTime",skeleton:"yMd",calendar:e.parent.calendarMode},r=e.parent.globalize.formatDate(e.maskDateValue,m);break}if(r=r!==void 0?r:i.slice(1,i.length-1),e.isHiddenMask){for(var v="",y=0;y<r.length;y++)v+=i[0];return v}else return r}return t},a.prototype.maskInputHandler=function(){var e=this.parent.inputElement.selectionStart,t="";this.validCharacters.indexOf(this.hiddenMask[e])!==-1&&(t=this.hiddenMask[e]),this.differenceCheck();var i=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isDateZero=this.isMonthZero=this.isYearZero=!1,this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=i,this.parent.inputElement.value=i,this.parent.inputElement.value=i;for(var r=0;r<this.hiddenMask.length;r++)if(t===this.hiddenMask[r]){e=r;break}if(this.parent.inputElement.selectionStart=e,this.validCharacterCheck(),(this.isNavigate||this.isDeletion)&&!this.isDeleteKey){var n=!this.isNavigate;this.isNavigate=this.isDeletion=!1,this.navigateSelection(n)}this.isDeleteKey&&(this.isDeletion=!1),this.isDeleteKey=!1},a.prototype.navigateSelection=function(e){var t=this.parent.inputElement.selectionStart,i=this.parent.inputElement.selectionEnd,r=e?t-1:i;for(this.navigated=!0;r<this.hiddenMask.length&&r>=0;){if(this.validCharacters.indexOf(this.hiddenMask[r])>=0){this.setSelection(this.hiddenMask[r]);break}r=r+(e?-1:1)}},a.prototype.roundOff=function(e,t){for(var i=e.toString(),r=t-i.length,n="",s=0;s<r;s++)n+="0";return n+i},a.prototype.zeroCheck=function(e,t,i){var r=i;return e&&!t&&(r="0"),r},a.prototype.handleDeletion=function(e,t){switch(e){case"d":this.isDayPart=t;break;case"M":this.isMonthPart=t,t||(this.maskDateValue.setMonth(0),this.monthCharacter="");break;case"y":this.isYearPart=t;break;case"H":case"h":this.isHourPart=t,t||(this.periodCharacter="");break;case"m":this.isMinutePart=t;break;case"s":this.isSecondsPart=t;break;default:return!1}return!0},a.prototype.dateAlteration=function(e){var t=this.parent.inputElement.selectionStart,i="";if(this.validCharacters.indexOf(this.hiddenMask[t])!==-1)i=this.hiddenMask[t];else return;var r=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());this.previousDate=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());var n=e?-1:1;switch(i){case"d":r.setDate(r.getDate()+n);break;case"M":{var s=r.getMonth()+n;if(r.setDate(1),r.setMonth(s),this.isDayPart){var o=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),l=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();this.previousDate.getDate()===o&&l<=o?r.setDate(l):r.setDate(this.previousDate.getDate())}else r.setDate(this.previousDate.getDate());this.previousDate=new Date(r.getFullYear(),r.getMonth(),r.getDate());break}case"y":r.setFullYear(r.getFullYear()+n);break;case"H":case"h":r.setHours(r.getHours()+n);break;case"m":r.setMinutes(r.getMinutes()+n);break;case"s":r.setSeconds(r.getSeconds()+n);break;case"a":r.setHours((r.getHours()+12)%24);break}this.maskDateValue=r.getFullYear()>0?r:this.maskDateValue,this.validCharacters.indexOf(this.hiddenMask[t])!==-1&&this.handleDeletion(this.hiddenMask[t],!0)},a.prototype.getCulturedValue=function(e){var t=this.parent.locale,i;return t==="en"||t==="en-US"?i=j(e,Oi()):i=j("main."+t+(".dates.calendars.gregorian."+e),Bi),i},a.prototype.getCulturedFormat=function(){var e=this.getCulturedValue("dateTimeFormats[availableFormats].yMd").toString();return this.parent.moduleName==="datepicker"&&(e=this.getCulturedValue("dateTimeFormats[availableFormats].yMd").toString(),this.parent.format&&this.parent.formatString&&(e=this.parent.formatString)),this.parent.moduleName==="datetimepicker"&&(e=this.getCulturedValue("dateTimeFormats[availableFormats].yMd").toString(),this.parent.dateTimeFormat&&(e=this.parent.dateTimeFormat)),this.parent.moduleName==="timepicker"&&(e=this.parent.cldrTimeFormat()),e},a.prototype.clearHandler=function(){this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.updateValue()},a.prototype.updateValue=function(){this.monthCharacter=this.periodCharacter="";var e=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e,this.parent.updateInputValue(e)},a.prototype.destroy=function(){this.removeEventListener()},a}(),Km=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ym=function(a){Km(e,a);function e(t,i){var r=a.call(this,t)||this;return r.childRefs=[],r.eventHandlers={},r.isDevice=!1,r.focusedMenuItem=null,r.customFilterOperators=i,r.isExcel=!0,r}return e.prototype.getCMenuDS=function(t,i){var r={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","NotContains","","CustomFilter"]};r.date=r.number,r.datetime=r.number,r.dateonly=r.number;for(var n=[],s=0;s<r[""+t].length;s++)r[""+t][parseInt(s.toString(),10)].length?i?n.push({text:this.getLocalizedLabel(r[""+t][parseInt(s.toString(),10)])+"...",iconCss:"e-icons e-icon-check "+(i===r[""+t][parseInt(s.toString(),10)].toLowerCase()?"":"e-emptyicon")}):n.push({text:this.getLocalizedLabel(r[""+t][parseInt(s.toString(),10)])+"..."}):n.push({separator:!0});return n},e.prototype.destroy=function(){if(this.dlg&&(this.unwireExEvents(),a.prototype.closeDialog.call(this)),!this.isDevice&&this.menuObj){var t=this.menuObj.element.querySelector("li.e-focused");t&&x(t,"e-excel-menu")||this.destroyCMenu()}this.dlgObj&&!this.dlgObj.isDestroyed&&this.removeDialog()},e.prototype.createMenu=function(t,i,r,n){var s={string:"TextFilter",date:"DateFilter",dateonly:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"};this.menu=this.parent.createElement("div",{className:"e-contextmenu-wrapper"}),this.parent.enableRtl?this.menu.classList.add("e-rtl"):this.menu.classList.remove("e-rtl"),this.parent.cssClass&&this.menu.classList.add(this.parent.cssClass);var o=this.parent.createElement("ul"),l=i?"e-excl-filter-icon e-filtered":"e-excl-filter-icon";if(this.parent.allowSorting&&this.parent.getModuleName()==="grid"&&!this.options.isResponsiveFilter){var h=this.parent.getColumnHeaderByUid(n.uid).getAttribute("aria-sort"),p=this.parent.getColumnByField(n.field).allowSorting,c=!p||h==="ascending"?"e-disabled e-excel-ascending":"e-excel-ascending",d=!p||h==="descending"?"e-disabled e-excel-descending":"e-excel-descending",f=t==="string"?this.getLocalizedLabel("SortAtoZ"):t==="datetime"||t==="date"?this.getLocalizedLabel("SortByOldest"):this.getLocalizedLabel("SortSmallestToLargest"),g=t==="string"?this.getLocalizedLabel("SortZtoA"):t==="datetime"||t==="date"?this.getLocalizedLabel("SortByNewest"):this.getLocalizedLabel("SortLargestToSmallest");o.appendChild(this.createMenuElem(f,c,"e-sortascending")),o.appendChild(this.createMenuElem(g,d,"e-sortdescending"));var m=this.parent.createElement("li",{className:"e-separator e-menu-item e-excel-separator"});o.appendChild(m)}this.options.isResponsiveFilter||o.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),i?"":"e-disabled",l)),t!=="boolean"&&o.appendChild(this.createMenuElem(this.getLocalizedLabel(s[""+t]),"e-submenu",r&&this.ensureTextFilter()?"e-icon-check":l+" e-emptyicon",!0)),this.menu.appendChild(o),this.parent.notify(Zc,{element:this.menu}),this.parent.notify(Su,{isFiltered:i})},e.prototype.createMenuElem=function(t,i,r,n){var s=this.parent.createElement("li",{className:i+" e-menu-item"});return s.innerHTML=t,s.tabIndex=s.classList.contains("e-disabled")?-1:0,s.insertBefore(this.parent.createElement("span",{className:"e-menu-icon e-icons "+r,attrs:{"aria-hidden":"true"}}),s.firstChild),n&&s.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),s},e.prototype.wireExEvents=function(){T.isDevice||S.add(this.dlg,"mouseover",this.hoverHandler,this),S.add(this.dlg,"click",this.clickExHandler,this),S.add(this.dlg,"keyup",this.keyUp,this),S.add(this.dlg,"keydown",this.keyDown,this)},e.prototype.unwireExEvents=function(){T.isDevice||S.remove(this.dlg,"mouseover",this.hoverHandler),S.remove(this.dlg,"click",this.clickExHandler),S.remove(this.dlg,"keyup",this.keyUp),S.remove(this.dlg,"keydown",this.keyDown)},e.prototype.clickExHandler=function(t){var i={string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"},r=x(t.target,"e-menu-item");r&&(this.getLocalizedLabel("ClearFilter")===r.innerText.trim()?(this.clearFilter(),this.closeDialog()):(this.options.isResponsiveFilter||T.isDevice)&&this.getLocalizedLabel(i[this.options.type])===r.innerText.trim()&&this.hoverHandler(t))},e.prototype.focusNextOrPrevElement=function(t,i,r){var n=t.key==="ArrowUp"||t.key==="Tab"&&t.shiftKey?i.indexOf(document.activeElement)-1:i.indexOf(document.activeElement)+1,s=i[(n+i.length)%i.length];if(s){s.focus();var o=s.classList.contains("e-chk-hidden")?"e-chkfocus":r,l=s.classList.contains("e-chk-hidden")?x(s,"e-ftrchk"):x(s,"e-menu-item");this.excelSetFocus(l,o)}},e.prototype.keyUp=function(t){if(t.key==="Tab"&&t.shiftKey||t.key==="Tab"){var i=t.target.classList.contains("e-chk-hidden")?"e-chkfocus":"e-menufocus",r=t.target.classList.contains("e-menu-item")?x(t.target,"e-menu-item"):x(t.target,"e-ftrchk");this.excelSetFocus(r,i)}else if((t.key==="ArrowUp"||t.key==="ArrowDown")&&!t.altKey){t.preventDefault();var n=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"]), .e-menu-item:not(.e-disabled):not(.e-separator)'));this.focusNextOrPrevElement(t,n,"e-menufocus")}else(t.key==="Enter"||t.code==="ArrowRight")&&t.target.classList.contains("e-menu-item")&&(t.preventDefault(),t.target.click(),t.target.classList.contains("e-submenu")&&(this.hoverHandler(t),this.menuObj.element.querySelector(".e-menu-item").focus(),this.excelSetFocus(x(this.menuObj.element.querySelector(".e-menu-item"),"e-menu-item"),"e-focused"),this.focusedMenuItem=this.menuObj.element.querySelector(".e-menu-item")))},e.prototype.keyDown=function(t){(t.key==="ArrowUp"||t.key==="ArrowDown")&&t.preventDefault()},e.prototype.excelSetFocus=function(t,i){var r=this.cmenu.querySelector("."+i);r&&r.classList.remove(i),t&&t.classList.add(i)},e.prototype.destroyCMenu=function(){this.isCMenuOpen=!1,this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),S.remove(this.menuObj.element,"keydown",this.contextKeyDownHandler),se(this.cmenu),this.parent.notify(ao,{target:null,header:"",isOpen:!1,col:this.options.column}))},e.prototype.hoverHandler=function(t){if(!(this.options.isResponsiveFilter&&t.type==="mouseover")){var i=t.target.querySelector(".e-contextmenu"),r=x(t.target,"e-menu-item"),n=this.menu.querySelector(".e-focused"),s;if(n&&n.classList.remove("e-focused"),r&&(r.classList.add("e-focused"),s=r.classList.contains("e-submenu")),!i){if(!s){var o=this.menu.querySelector(".e-submenu");u(o)||o.classList.remove("e-selected"),this.destroyCMenu()}var l=this.ensureTextFilter();if(!this.isCMenuOpen&&s){r.classList.add("e-selected"),this.isCMenuOpen=!0;var h={items:this.getCMenuDS(this.options.type,l?l.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this),enableRtl:this.parent.enableRtl,animationSettings:{effect:"None"},beforeClose:this.preventClose.bind(this),cssClass:this.options.isResponsiveFilter&&this.parent.cssClass?"e-res-contextmenu-wrapper "+this.parent.cssClass:this.options.isResponsiveFilter?"e-res-contextmenu-wrapper":this.parent.cssClass?this.parent.cssClass:""};this.parent.element.appendChild(this.cmenu),this.menuObj=new Hg(h,this.cmenu),S.add(this.menuObj.element,"keydown",this.contextKeyDownHandler,this);var p=this.menu.querySelector(".e-submenu").getBoundingClientRect(),c={top:0,left:0};if(this.options.isResponsiveFilter){var d={string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"},f=document.querySelector(".e-responsive-dialog > .e-dlg-header-content"),g=f.offsetHeight+4;this.menuObj.element.style.height="calc(100% - "+g+"px)",this.menuObj.open(g,0,document.body);var m=this.getLocalizedLabel(d[this.options.type]);this.parent.notify(ao,{target:this.menuObj.element.parentElement,header:m,isOpen:!0})}else{if(T.isDevice){this.isDevice=!0;var v=this.getContextBounds();c.top=(window.innerHeight-v.height)/2,c.left=(window.innerWidth-v.width)/2,this.closeDialog(),this.isDevice=!1}else c.top=T.isIE?window.pageYOffset+p.top:window.scrollY+p.top,c.left=this.getCMenuYPosition(this.dlg);this.menuObj.open(c.top,c.left,t.target)}fo(this.parent.element,this.menuObj.element.parentElement)}}}},e.prototype.contextKeyDownHandler=function(t){if(t.key==="Tab"&&t.shiftKey||t.key==="Tab"){t.preventDefault();var i=Array.from(this.menuObj.element.querySelectorAll('[tabindex]:not([tabindex="-1"]), .e-menu-item:not(.e-disabled):not(.e-separator)'));this.focusNextOrPrevElement(t,i,"e-focused")}else(t.key==="ArrowLeft"||t.key==="Escape")&&(t.preventDefault(),this.menuObj.close(),this.focusedMenuItem=null,document.querySelector(".e-submenu.e-menu-item").classList.remove("e-selected"),document.querySelector(".e-submenu.e-menu-item").focus())},e.prototype.ensureTextFilter=function(){var t,i=this.existingPredicate[this.options.field];return i&&i.length===2?i[0].operator==="greaterthanorequal"&&i[1].operator==="lessthanorequal"?t="between":t="customfilter":i&&i.length===1&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],t=i[0].operator),t},e.prototype.preventClose=function(t){if(this.options&&this.options.isResponsiveFilter&&t.event){var i=t.event.target,r=i.classList.contains("e-resfilterback")||i.classList.contains("e-res-back-btn")||i.classList.contains("e-menu-item");t.cancel=!r}else t.event instanceof MouseEvent&&t.event.target.classList.contains("e-submenu")&&(t.cancel=!0)},e.prototype.getContextBounds=function(){return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()},e.prototype.getCMenuYPosition=function(t){var i=this.getContextBounds().width,r=t.getBoundingClientRect(),n=r.right+i-this.parent.element.clientWidth,s=t.offsetWidth-t.clientWidth;return s=s?s+1:0,n<1?r.right+1-s:r.left-i-1+s},e.prototype.openDialog=function(t){var i=this;if(this.updateModel(t),this.getAndSetChkElem(t),this.showDialog(t),!t.cancel){this.dialogObj.dataBind();var r=this.existingPredicate[t.field]&&this.existingPredicate[t.field].length||this.options.filteredColumns.filter(function(s){return i.options.field===s.field}).length;this.createMenu(t.type,r>0,r===1||r===2,t),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.parent.enableRtl&&this.dlg.classList.add("e-rtl"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=this.parent.createElement("ul",{className:"e-excel-menu"});var n=this.dlg.querySelectorAll(".e-menu-item");n.forEach(function(s){s.scrollWidth>s.clientWidth&&s.setAttribute("title",s.textContent)}),t.column.showColumnMenu&&this.parent.notify(Lo,{}),this.wireExEvents()}},e.prototype.closeDialog=function(){this.destroy()},e.prototype.selectHandler=function(t){t.item&&(this.parent.notify(wu,{}),this.menuItem=t.item,this.closeDialog(),this.renderDialogue(t))},e.prototype.renderDialogue=function(t){var i=this,r=t?t.element:void 0,n=this.options.field,s=!u(n)&&gi(n),o=!u(n)&&rt(n),l=this.parent.createElement("div",{className:"e-xlfl-maindiv",id:s?o+"-xlflmenu":n+"-xlflmenu"});if(this.dlgDiv=this.parent.createElement("div",{className:"e-xlflmenu",id:s?o+"-xlfldlg":n+"-xlfldlg"}),this.options.isResponsiveFilter){var h=document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv");h.appendChild(this.dlgDiv)}else this.parent.element.appendChild(this.dlgDiv);this.dlgObj=new Cr({header:this.getLocalizedLabel("CustomFilter"),isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,locale:this.parent.locale,closeOnEscape:!0,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,open:function(){for(var c=[].slice.call(i.dlgObj.element.querySelectorAll("table.e-xlfl-table tr.e-xlfl-fields")),d=0;d<c.length;d++){var f=c[d].children[1].querySelector(".e-control"),g=c[d].querySelector(".e-dropdownlist.e-control").ej2_instances[0];g.value==="isempty"||g.value==="isnotempty"||g.value==="isnull"||g.value==="isnotnull"?f.ej2_instances[0].enabled=!1:f&&!u(f.getAttribute("disabled"))&&(f.ej2_instances[0].enabled=!0)}var m=i.dlgObj.element.querySelector("table.e-xlfl-table>tr");if(i.options.column.filterTemplate){var v=gi(i.options.column.field)?rt(i.options.column.field):i.options.column.field,y=i.parent.isReact&&typeof i.options.column.filterTemplate!="string",w=i.parent.parentDetails&&i.parent.parentDetails.parentInstObj&&i.parent.parentDetails.parentInstObj.isReact;y||w?i.parent.renderTemplates(function(){m.querySelector("#"+v+"-xlfl-frstvalue").focus()}):m.querySelector("#"+v+"-xlfl-frstvalue").focus()}},close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,r,n),buttons:[{click:this.filterBtnClick.bind(this,n),buttonModel:{content:this.getLocalizedLabel("OKButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-xlfl-okbtn "+this.parent.cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("CancelButton"),cssClass:this.parent.cssClass?"e-xlfl-cancelbtn "+this.parent.cssClass:"e-xlfl-cancelbtn"}}],content:l,width:430,animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""});var p="isStringTemplate";this.dlgObj[""+p]=!0,this.renderResponsiveDialog(),this.dlgDiv.setAttribute("aria-label",this.getLocalizedLabel("CustomFilterDialogARIA")),this.childRefs.unshift(this.dlgObj),this.dlgObj.appendTo(this.dlgDiv)},e.prototype.renderResponsiveDialog=function(){if(this.options.isResponsiveFilter){var t=document.querySelector(".e-row-responsive-filter");t&&t.classList.remove("e-row-responsive-filter"),this.dlgObj.buttons=[{}],this.dlgObj.header=void 0,this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.showCloseIcon=!1}},e.prototype.removeDialog=function(){this.parent.notify(Iu,{}),(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&qn(this.parent,["filterTemplate"]),this.removeObjects(this.childRefs),se(this.dlgDiv),this.parent.notify(_s,{})},e.prototype.createdDialog=function(t,i){if(this.renderCustomFilter(t,i),this.dlgObj.element.style.left="0px",!this.options.isResponsiveFilter)this.dlgObj.element.style.top="0px";else{var r=document.querySelector(".e-responsive-dialog > .e-dlg-header-content"),n=r.offsetHeight+4;this.dlgObj.element.style.top=n+"px"}!this.options.isResponsiveFilter&&T.isDevice&&window.innerWidth<440&&(this.dlgObj.element.style.width="90%"),this.parent.notify(Jc,{column:i,dialog:this.dialogObj}),this.dlgObj.show(),fo(this.parent.element,this.dlgObj.element.parentElement)},e.prototype.renderCustomFilter=function(t,i){var r=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),n=this.parent.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"});r.appendChild(n);var s=this.parent.createElement("div",{innerHTML:this.options.displayName,className:"e-xlfl-fieldset"});r.appendChild(s),this.renderFilterUI(i,r)},e.prototype.filterBtnClick=function(t){var i=!u(t)&&gi(t),r=!u(t)&&rt(t),n=i?r:t,s=this.dlgDiv.querySelector("#"+n+"-xlfl-frstvalue").ej2_instances[0],o=this.dlgDiv.querySelector("#"+n+"-xlfl-frstoptr").ej2_instances[0],l=this.dlgDiv.querySelector("#"+n+"-xlfl-secndvalue").ej2_instances[0],h=this.dlgDiv.querySelector("#"+n+"-xlfl-secndoptr").ej2_instances[0],p;if(this.options.type==="string"){var c=this.dlgDiv.querySelector("#"+n+"-xlflmtcase").ej2_instances[0];p=c.checked}var d=this.dlgDiv.querySelector("#"+n+"e-xlfl-frstpredicate").ej2_instances[0],f=d.checked?"and":"or";l.value===null&&(f="or"),this.filterByColumn(this.options.field,o.value,s.value,f,p,this.options.ignoreAccent,h.value,l.value),this.removeDialog()},e.prototype.filterByColumn=function(t,i,r,n,s,o,l,h){var p=this.parent.getColumnByField?this.parent.getColumnByField(t):this.options.column,c=this.isForeignColumn(p)?p.foreignKeyValue:t,d=[],f,g={instance:this,handler:this.filterByColumn,arg1:t,arg2:i,arg3:r,arg4:n,arg5:s,arg6:o,arg7:l,arg8:h,cancel:!1};if(this.parent.notify(Fn,g),!g.cancel){d.push({field:c,predicate:n,matchCase:s,ignoreAccent:o,operator:i,value:g.arg3,type:this.options.type}),f=new pe(c,i.toLowerCase(),g.arg3,!s,o),!u(h)&&!u(l)&&(d.push({field:c,predicate:n,matchCase:s,ignoreAccent:o,operator:l,value:g.arg8,type:this.options.type}),f=f[""+n](c,l.toLowerCase(),h,!s,o));var m={action:"filtering",filterCollection:d,field:this.options.field,ejpredicate:f,actualPredicate:d};this.isForeignColumn(p)?this.foreignKeyFilter(m,d,f):this.options.handler(m)}},e.prototype.renderOperatorUI=function(t,i,r,n,s){var o=this.parent.createElement("tr",{className:"e-xlfl-fields",attrs:{role:"row"}});i.appendChild(o);var l=this.parent.createElement("td",{className:"e-xlfl-optr"});o.appendChild(l);var h=this.parent.createElement("div",{className:"e-xlfl-optrdiv"}),p=!u(t)&&gi(t),c=!u(t)&&rt(t),d=this.parent.createElement("input",{id:p?c+r:t+r});h.appendChild(d),l.appendChild(h);var f=this.options.type+"Operator",g=this.customFilterOperators[""+f];this.optrData=g;var m=this.dropSelectedVal(this.options.column,n,s),v="";this.menuItem&&(v=this.menuItem.text.slice(0,-3),v!==this.getLocalizedLabel("CustomFilter")&&(m=s?v:void 0),v===this.getLocalizedLabel("Between")&&(m=this.getLocalizedLabel(s?"GreaterThanOrEqual":"LessThanOrEqual")));var y=this.options.column,w=new Sr(Br({dataSource:g,fields:{text:"text",value:"value"},text:m,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:null},y.filter.params));this.childRefs.unshift(w);var b={open:this.dropDownOpen.bind(this),change:this.dropDownValueChange.bind(this)};Tl(d.id,[Ot,Vr],b,this),w.addEventListener(Ot,this.eventHandlers[d.id][Ot]),w.addEventListener(Vr,this.eventHandlers[d.id][Vr]),w.appendTo(d);var I=this.getSelectedValue(m);return{fieldElement:o,operator:I}},e.prototype.removeHandlersFromComponent=function(t){t.element.classList.contains("e-dropdownlist")?Ml(t,[Ot,Vr],this):t.element.classList.contains("e-autocomplete")&&Ml(t,[ce,qr],this)},e.prototype.dropDownOpen=function(t){t.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},e.prototype.dropDownValueChange=function(t){t.element.id.includes("-xlfl-frstoptr")?this.firstOperator=t.value.toString():this.secondOperator=t.value.toString();var i=t.element.closest(".e-xlfl-fields").children[1].querySelector(".e-control"),r=t.element.ej2_instances[0];r.value==="isempty"||r.value==="isnotempty"||r.value==="isnull"||r.value==="isnotnull"?i.ej2_instances[0].enabled=!1:u(i.getAttribute("disabled"))||(i.ej2_instances[0].enabled=!0)},e.prototype.getFilterUIInfo=function(){return{firstOperator:this.firstOperator,secondOperator:this.secondOperator,field:this.options.field}},e.prototype.getSelectedValue=function(t){var i=new q(this.optrData).executeLocal(new re().where("text","equal",t));return u(i[0])?"":i[0].value},e.prototype.dropSelectedVal=function(t,i,r){var n;return i&&i.length>0?n=i.length===2?r?i[0].operator:i[1].operator:r?i[0].operator:void 0:r&&t.type==="string"&&!t.filter.operator?n="startswith":n=r?t.filter.operator||"equal":void 0,this.getSelectedText(n)},e.prototype.getSelectedText=function(t){var i=new q(this.optrData).executeLocal(new re().where("value","equal",t));return u(i[0])?"":i[0].text},e.prototype.renderFilterUI=function(t,i){var r=this.existingPredicate[""+t],n=this.parent.createElement("table",{className:"e-xlfl-table",attrs:{role:"grid"}});i.appendChild(n);var s=this.parent.createElement(Lt);s.innerHTML='<col style="width: 50%"></col><col style="width: 50%"></col>',n.appendChild(s);var o=this.renderOperatorUI(t,n,"-xlfl-frstoptr",r,!0);this.firstOperator=o.operator,this.renderFlValueUI(t,o,"-xlfl-frstvalue",r,!0);var l=this.parent.createElement("tr",{className:"e-xlfl-predicate",attrs:{role:"row"}});n.appendChild(l),this.renderRadioButton(t,l,r),o=this.renderOperatorUI(t,n,"-xlfl-secndoptr",r,!1),this.secondOperator=o.operator,this.renderFlValueUI(t,o,"-xlfl-secndvalue",r,!1)},e.prototype.renderRadioButton=function(t,i,r){var n=this.parent.createElement("td",{className:"e-xlfl-radio",attrs:{colSpan:"2"}});i.appendChild(n);var s=this.parent.createElement("div",{className:"e-xlfl-radiodiv",attrs:{style:"display: inline-block"}}),o=!u(t)&&gi(t),l=!u(t)&&rt(t),h=this.parent.createElement("input",{id:o?l+"e-xlfl-frstpredicate":t+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),p=this.parent.createElement("input",{id:o?l+"e-xlfl-secndpredicate":t+"e-xlfl-secndpredicate",attrs:{type:"radio"}});s.appendChild(h),s.appendChild(p),n.appendChild(s),this.options.type==="string"&&this.renderMatchCase(t,i,n,"-xlflmtcase",r);var c=new Ko({label:this.getLocalizedLabel("AND"),name:"default",checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(c);var d=new Ko({label:this.getLocalizedLabel("OR"),name:"default",enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(d);var f=r&&r.length===2?r[1].predicate:"and";f==="and"?(c.checked=!0,d.checked=!1):(d.checked=!0,c.checked=!1),c.appendTo(h),d.appendTo(p),c.element.nextElementSibling.classList.add("e-xlfl-radio-and"),d.element.nextElementSibling.classList.add("e-xlfl-radio-or")},e.prototype.removeObjects=function(t){for(var i=0,r=t;i<r.length;i++){var n=r[i];n&&!n.isDestroyed&&(this.removeHandlersFromComponent(n),n.destroy())}},e.prototype.renderFlValueUI=function(t,i,r,n,s){var o=this.parent.createElement("td",{className:"e-xlfl-value"});i.fieldElement.appendChild(o);var l=!u(t)&&gi(t),h=!u(t)&&rt(t),p=this.parent.createElement("div",{className:"e-xlfl-valuediv"}),c=this.options.filteredColumns.some(function(W){return t===W.field}),d=this.options.filteredColumns.filter(function(W){return W.field===t});if(this.options.column.filterTemplate){var f={},g=this.options.column;c&&r&&(f=this.getExcelFilterData(r,f,g,n,d));var m=this.parent.isReact&&typeof this.options.column.filterTemplate!="string",v=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,y=this.parent.element.id+g.uid+"filterTemplate";if(m||v)this.options.column.getFilterTemplate()(f,this.parent,"filterTemplate",y,null,null,p);else{var w=this.options.column.getFilterTemplate()(f,this.parent,"filterTemplate",y,null,null,null,this.parent.root);$e(p,w)}m||v?this.parent.renderTemplates(function(){p.querySelector("input").id=l?h+r:t+r,o.appendChild(p)}):((this.parent.isAngular?p.children[0]:p.querySelector("input")).id=l?h+r:t+r,o.appendChild(p))}else{var b=this.parent.createElement("input",{id:l?h+r:t+r});p.appendChild(b),o.appendChild(p);var I=void 0,k=void 0;n&&n.length>0&&(k=n.length===2?s?n[0]:n[1]:s?n[0]:void 0,I=k&&k.operator===i.operator?k.value:void 0,u(I)&&(I=void 0));var D={string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),dateonly:this.renderDate.bind(this),datetime:this.renderDateTime.bind(this)};D[this.options.type](this.options,t,b,I,this.parent.enableRtl)}},e.prototype.getExcelFilterData=function(t,i,r,n,s){var o=t==="-xlfl-frstvalue"?0:1;if(t==="-xlfl-frstvalue"||s.length>1){i={column:n instanceof Array?n[parseInt(o.toString(),10)]:n};var l=this.options.column.columnData&&s.length>1?this.options.column.columnData.length===1?0:1:o;i[this.options.field]=r.foreignKeyValue?this.options.column.columnData[parseInt(l.toString(),10)][r.foreignKeyValue]:s[parseInt(l.toString(),10)].value,this.options.foreignKeyValue&&(i[this.options.foreignKeyValue]=this.options.column.columnData[parseInt(l.toString(),10)][r.foreignKeyValue])}return i},e.prototype.renderMatchCase=function(t,i,r,n,s){var o=this.parent.createElement("div",{className:"e-xlfl-matchcasediv",attrs:{style:"display: inline-block"}}),l=!u(t)&&gi(t),h=!u(t)&&rt(t),p=this.parent.createElement("input",{id:l?h+n:t+n,attrs:{type:"checkbox"}});o.appendChild(p),r.appendChild(o);var c=s&&s.length>0?s&&s.length===2?s[1].matchCase:s[0].matchCase:!1,d=new Xh({label:this.getLocalizedLabel("MatchCase"),enableRtl:this.parent.enableRtl,checked:c,cssClass:this.parent.cssClass?this.parent.cssClass:""});this.childRefs.unshift(d),d.appendTo(p)},e.prototype.renderDate=function(t,i,r,n,s){var o=Hs(t.format,t.type)||t.format,l=new Wn(Br({format:o,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:s,value:new Date(n),locale:this.parent.locale},t.column.filter.params));this.childRefs.unshift(l),l.appendTo(r)},e.prototype.renderDateTime=function(t,i,r,n,s){var o=Hs(t.format,t.type),l=new Uo(Br({format:o,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:s,value:new Date(n),locale:this.parent.locale},t.column.filter.params));this.childRefs.unshift(l),l.appendTo(r)},e.prototype.completeAction=function(t){t.result=tg(t.result)},e.prototype.renderNumericTextBox=function(t,i,r,n,s){var o=new Do(Br({format:t.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:s,value:n,locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},t.column.filter.params));this.childRefs.unshift(o),o.appendTo(r)},e.prototype.renderAutoComplete=function(t,i,r,n,s){var o=this.options.column,l=this.isForeignColumn(o),h=l?o.dataSource:t.dataSource,p={value:l?o.foreignKeyValue:i},c=new ip(Br({dataSource:h instanceof q?h:new q(h),fields:p,query:this.getQuery(),sortOrder:"Ascending",locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:s,text:n},o.filter.params));if(h&&"result"in h){var d=jo({requestType:"stringfilterrequest"},this.getQuery());this.parent.trigger(Mn,d.state);var f=d.deffered;f.promise.then(function(m){c.dataSource=new q(m)})}this.childRefs.unshift(c);var g={actionComplete:this.acActionComplete(c,i),focus:this.acFocus(c,i,t,r)};Tl(r.id,[ce,qr],g,this),c.addEventListener(qr,this.eventHandlers[r.id][qr]),c.addEventListener(ce,this.eventHandlers[r.id][ce]),c.appendTo(r)},e.prototype.acActionComplete=function(t,i){return function(r){var n=!u(i)&&gi(i);r.result=r.result.filter(function(s,o,l){return l.map(function(h){return n?vo(t.fields.value,h):h[t.fields.value]}).indexOf(n?vo(t.fields.value,s):s[t.fields.value])===o})}},e.prototype.acFocus=function(t,i,r,n){var s=this;return function(){var o=!u(i)&&gi(i),l=!u(i)&&rt(i),h=o?l:i;t.filterType=s.dlgDiv.querySelector("#"+h+(n.id===h+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value,t.ignoreCase=r.type==="string"?!s.dlgDiv.querySelector("#"+h+"-xlflmtcase").ej2_instances[0].checked:!0,t.filterType=u(t.filterType)?"equal":t.filterType}},e}(en),$m=function(){function a(e,t,i,r){this.contentRefresh=!0,this.isModelChanged=!0,this.aria=new zo,this.currentTarget=null,this.parent=e,this.sortSettings=t,this.sortedColumns=i,this.serviceLocator=r,this.focus=r.getService("focus"),this.addEventListener(),this.setFullScreenDialog()}return a.prototype.updateModel=function(){var e={field:this.columnName,direction:this.direction},t,i=this.parent.groupSettings.columns,r=!1;if(this.isMultiSort)t=this.getSortedColsIndexByField(this.columnName),t>-1&&this.sortSettings.columns.splice(t,1),this.sortSettings.columns.push(e),this.sortSettings.columns=this.sortSettings.columns;else if(!i.length)this.sortSettings.columns=[e];else{for(var n=[],s=0,o=i.length;s<o;s++)if(t=this.getSortedColsIndexByField(i[parseInt(s.toString(),10)],n),this.columnName===i[parseInt(s.toString(),10)])r=!0,n.push(e);else{var l=this.getSortColumnFromField(i[parseInt(s.toString(),10)]);n.push({field:l.field,direction:l.direction,isFromGroup:l.isFromGroup})}r||n.push(e),this.sortSettings.columns=n}this.parent.dataBind(),this.lastSortedCol=this.columnName},a.prototype.onActionComplete=function(e){var t=this.isRemove?{requestType:"sorting",type:ce}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:ce};this.isRemove=!1,this.parent.trigger(ce,P(e,t))},a.prototype.sortColumn=function(e,t,i){var r=this.parent;if(this.parent.getColumnByField(e).allowSorting===!1||this.parent.isContextMenuOpen()){this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:e});return}if(r.allowMultiSorting||(i=r.allowMultiSorting),this.isActionPrevent()){r.notify(Jt,{instance:this,handler:this.sortColumn,arg1:e,arg2:t,arg3:i});return}this.backupSettings(),this.columnName=e,this.direction=t,this.isMultiSort=i,this.removeSortIcons(),this.updateSortedCols(e,i),this.updateModel()},a.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,oe.isSort)},a.prototype.backupSettings=function(){this.lastSortedCols=bs(this.sortSettings.columns),this.lastCols=this.sortedColumns},a.prototype.restoreSettings=function(){this.isModelChanged=!1,this.isMultiSort=!0,this.parent.setProperties({sortSettings:{columns:this.lastSortedCols}},!0),this.sortedColumns=this.lastCols,this.isModelChanged=!0},a.prototype.updateSortedCols=function(e,t){if(!t)if(this.parent.allowGrouping)for(var i=0,r=this.sortedColumns.length;i<r;i++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[parseInt(i.toString(),10)])<0&&(this.sortedColumns.splice(i,1),r--,i--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(e)<0&&this.sortedColumns.push(e)},a.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){if(this.contentRefresh){var t=this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:Ae,target:this.currentTarget,cancel:!1}:{requestType:"sorting",type:Ae,cancel:!1,target:this.currentTarget};this.parent.notify(qt,t)}this.refreshSortSettings(),this.removeSortIcons(),this.addSortIcons()}},a.prototype.refreshSortSettings=function(){this.sortedColumns.length=0;for(var e=this.sortSettings.columns,t=0;t<e.length;t++)e[parseInt(t.toString(),10)].isFromGroup||this.sortedColumns.push(e[parseInt(t.toString(),10)].field)},a.prototype.clearSorting=function(){var e=Ho(this.sortSettings.columns);if(this.isActionPrevent()){this.parent.notify(Jt,{instance:this,handler:this.clearSorting});return}for(var t=0,i=e.length;t<i;t++)this.removeSortColumn(e[parseInt(t.toString(),10)].field)},a.prototype.isActionPrevent=function(){return qi(this.parent)},a.prototype.removeSortColumn=function(e){var t=this.parent,i=this.sortSettings.columns;if(!(i.length===0&&this.sortedColumns.indexOf(e)<0)){if(this.isActionPrevent()){this.parent.notify(Jt,{instance:this,handler:this.removeSortColumn,arg1:e});return}this.backupSettings(),this.removeSortIcons();for(var r={requestType:"sorting",type:Ae,target:this.currentTarget},n=0,s=i.length;n<s;n++)if(i[parseInt(n.toString(),10)].field===e){if(t.allowGrouping&&t.groupSettings.columns.indexOf(i[parseInt(n.toString(),10)].field)>-1)continue;this.sortedColumns.splice(this.sortedColumns.indexOf(i[parseInt(n.toString(),10)].field),1),i.splice(n,1),this.isRemove=!0,this.isModelChanged&&this.parent.notify(qt,r);break}r.cancel||this.addSortIcons()}},a.prototype.getSortedColsIndexByField=function(e,t){for(var i=t||this.sortSettings.columns,r=0,n=i.length;r<n;r++)if(i[parseInt(r.toString(),10)].field===e)return r;return-1},a.prototype.getModuleName=function(){return"sort"},a.prototype.initialEnd=function(){if(this.parent.off(je,this.initialEnd),this.parent.getColumns().length&&this.sortSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.isMultiSort=this.sortSettings.columns.length>1;for(var t=0,i=e.sortSettings.columns.slice();t<i.length;t++){var r=i[t];this.sortedColumns.indexOf(r.field)>-1&&this.sortColumn(r.field,r.direction,!0)}this.isMultiSort=!1,this.contentRefresh=!0}},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:fr,handler:this.setFullScreenDialog},{event:Ni,handler:this.renderResponsiveChangeAction},{event:je,handler:this.initialEnd},{event:Dc,handler:this.onActionComplete},{event:vt,handler:this.onPropertyChanged},{event:Ut,handler:this.clickHandler},{event:It,handler:this.refreshSortIcons},{event:at,handler:this.keyPressed},{event:Fs,handler:this.cancelBeginEvent},{event:Ie,handler:this.destroy}],ct(this.parent,this.evtHandlers,!0,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||ct(this.parent,this.evtHandlers,!1)},a.prototype.destroy=function(){this.isModelChanged=!1;var e=this.parent.element;!e||!e.querySelector("."+pt)&&!e.querySelector("."+ot)||(this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),!this.parent.refreshing&&(this.parent.isDestroyed||!this.parent.allowSorting)&&this.clearSorting(),this.isModelChanged=!0,this.removeEventListener())},a.prototype.cancelBeginEvent=function(e){e.requestType==="sorting"&&(this.restoreSettings(),this.refreshSortIcons(),this.isMultiSort=!0)},a.prototype.clickHandler=function(e){var t=this.parent;this.currentTarget=null,this.popUpClickHandler(e);var i=M(e.target,".e-headercell");if(i&&!e.target.classList.contains("e-grptogglebtn")&&!i.classList.contains("e-resized")&&!e.target.classList.contains("e-rhandler")&&!e.target.classList.contains("e-columnmenu")&&!e.target.classList.contains("e-filtermenudiv")&&!x(e.target,"e-stackedheadercell")&&!(t.allowSelection&&t.selectionSettings.allowColumnSelection&&e.target.classList.contains("e-headercell"))){var r=this.parent,n=r.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));n.type!=="checkbox"&&(this.initiateSort(i,e,n),T.isDevice&&this.showPopUp(e))}if(i&&i.classList.remove("e-resized"),x(e.target,"e-excel-ascending")||x(e.target,"e-excel-descending")){var s=M(e.target,".e-filter-popup").getAttribute("uid"),o=u(x(e.target,"e-excel-descending"))?"Ascending":"Descending";this.sortColumn(t.getColumnByUid(s).field,o,!1)}},a.prototype.keyPressed=function(e){var t=e.target;if(!this.parent.isEdit&&(e.action==="enter"||e.action==="ctrlEnter"||e.action==="shiftEnter")&&M(t,".e-headercell")){var i=this.focus.getFocusedElement();if(u(i)||!i.classList.contains("e-headercell")||!i.querySelector(".e-headercelldiv"))return;var r=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));this.initiateSort(i,e,r)}},a.prototype.initiateSort=function(e,t,i){var r=this.parent,n=i.field;this.currentTarget=t.target;var s=e.getElementsByClassName("e-ascending").length?"Descending":"Ascending";this.isMultiSort=t.ctrlKey||this.enableSortMultiTouch||navigator.userAgent.indexOf("Mac OS")!==-1&&t.metaKey,t.shiftKey||this.sortSettings.allowUnsort&&e.getElementsByClassName("e-descending").length&&!(r.groupSettings.columns.indexOf(n)>-1)?this.removeSortColumn(n):this.sortColumn(n,s,this.isMultiSort)},a.prototype.showPopUp=function(e){var t=M(e.target,".e-headercell");this.parent.allowMultiSorting&&(!u(t)||this.parent.isContextMenuOpen())&&Wu(this.parent.element.querySelector(".e-gridpopup"),e,"e-sortdirect e-icons e-icon-sortdirect"+(this.sortedColumns.length>1?" e-spanclicked":""))},a.prototype.popUpClickHandler=function(e){var t=e.target;M(t,".e-headercell")||e.target.classList.contains(fe)||M(t,".e-gridpopup")?t.classList.contains("e-sortdirect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},a.prototype.addSortIcons=function(){for(var e=this.parent,t,i,r=this.sortSettings.columns,n=this.parent.getColumns().map(function(l){return l.field}),s=0,o=r.length;s<o;s++)t=e.getColumnHeaderByField(r[parseInt(s.toString(),10)].field),!(n.indexOf(r[parseInt(s.toString(),10)].field)===-1||u(t))&&(this.aria.setSort(t,r[parseInt(s.toString(),10)].direction.toLowerCase()),r.length>1&&t.querySelector(".e-headercelldiv").insertBefore(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(s+1).toString()}),t.querySelector(".e-headertext")),i=t.querySelector(".e-sortfilterdiv"),r[parseInt(s.toString(),10)].direction==="Ascending"?ae(i,["e-ascending","e-icon-ascending"],[]):ae(i,["e-descending","e-icon-descending"],[]))},a.prototype.removeSortIcons=function(e){for(var t=this.parent,i,r=this.sortSettings.columns,n=this.parent.getColumns().map(function(l){return l.field}),s=e||0,o=u(e)?r.length:e+1;s<o;s++)i=t.getColumnHeaderByField(r[parseInt(s.toString(),10)].field),!(u(i)||t.allowGrouping&&t.groupSettings.columns.indexOf(r[parseInt(s.toString(),10)].field)>-1&&!i.querySelector(".e-sortfilterdiv"))&&n.indexOf(r[parseInt(s.toString(),10)].field)!==-1&&(this.aria.setSort(i,"none"),ae(i.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),i.querySelector(".e-sortnumber")&&i.querySelector(".e-headercelldiv").removeChild(i.querySelector(".e-sortnumber")))},a.prototype.getSortColumnFromField=function(e){for(var t=0,i=this.sortSettings.columns.length;t<i;t++)if(this.sortSettings.columns[parseInt(t.toString(),10)].field===e)return this.sortSettings.columns[parseInt(t.toString(),10)];return!1},a.prototype.updateAriaAttr=function(){for(var e=this.parent.getColumns().map(function(s){return s.field}),t=0,i=this.sortedColumns;t<i.length;t++){var r=i[t];if(e.indexOf(r)!==-1){var n=this.parent.getColumnHeaderByField(r);this.aria.setSort(n,this.getSortColumnFromField(r).direction)}}},a.prototype.refreshSortIcons=function(){this.removeSortIcons(),this.isMultiSort=!0,this.removeSortIcons(),this.addSortIcons(),this.isMultiSort=!1,this.updateAriaAttr()},a.prototype.renderResponsiveChangeAction=function(e){this.responsiveDialogRenderer.action=e.action},a.prototype.showCustomSort=function(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog()},a}(),Qm=function(){function a(e){this.pagerModule=e}return a.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},a.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.refreshAriaAttrLabel(),this.updateStyles()},a.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),r=document.createDocumentFragment();i.innerHTML="";for(var n=1;n<=t.pageCount;n++)e=ge("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{tabindex:"-1","aria-label":t.getLocalizedLabel("Page")+n+t.getLocalizedLabel("Of")+t.totalPages+t.getLocalizedLabel("Pages"),href:"#"}}),t.currentPage===n&&(ae(e,["e-currentitem","e-active"],["e-pager-default"]),e.setAttribute("aria-current","page")),r.appendChild(e);i.appendChild(r),this.links=[].slice.call(i.childNodes)},a.prototype.wireEvents=function(){S.add(this.pagerElement,"click",this.clickHandler,this),S.add(this.pagerElement,"auxclick",this.auxiliaryClickHandler,this)},a.prototype.unwireEvents=function(){S.remove(this.pagerModule.element,"click",this.clickHandler),S.remove(this.pagerModule.element,"auxclick",this.auxiliaryClickHandler)},a.prototype.destroy=function(){this.unwireEvents()},a.prototype.refreshAriaAttrLabel=function(){for(var e=this.pagerModule,t=e.element.querySelector(".e-numericcontainer"),i=t.querySelectorAll("a"),r=0;r<i.length;r++)i[parseInt(r.toString(),10)].hasAttribute("aria-label")&&i[parseInt(r.toString(),10)].hasAttribute("index")&&i[parseInt(r.toString(),10)].setAttribute("aria-label",e.getLocalizedLabel("Page")+i[parseInt(r.toString(),10)].getAttribute("index")+e.getLocalizedLabel("Of")+e.totalPages+e.getLocalizedLabel("Pages"))},a.prototype.renderNumericContainer=function(){this.element=ge("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(ge("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},a.prototype.renderFirstNPrev=function(e){this.first=ge("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1",role:"button"}}),this.prev=ge("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1",role:"button"}}),be([this.first,this.prev],e)},a.prototype.renderPrevPagerSet=function(e){var t=ge("div");this.PP=ge("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",href:"#"}}),t.appendChild(this.PP),e.appendChild(t)},a.prototype.renderNextPagerSet=function(e){var t=ge("div");this.NP=ge("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",href:"#"}}),t.appendChild(this.NP),e.appendChild(t)},a.prototype.renderNextNLast=function(e){this.next=ge("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1",role:"button"}}),this.last=ge("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1",role:"button"}}),be([this.next,this.last],e)},a.prototype.clickHandler=function(e){var t=this.pagerModule;return this.target=e.target,this.target.classList.contains("e-numericitem")&&e.preventDefault(),t.previousPageNo=t.currentPage,!this.target.classList.contains("e-disable")&&!u(this.target.getAttribute("index"))&&(t.currentPage=parseInt(this.target.getAttribute("index"),10),this.pagerModule.isInteracted=!0,t.dataBind()),!1},a.prototype.auxiliaryClickHandler=function(e){this.target=e.target,this.target.classList.contains("e-numericitem")&&e.button===1&&e.preventDefault()},a.prototype.updateLinksHtml=function(){var e=this.pagerModule,t,i,r,n=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');e.currentPage=e.totalPages===1?1:e.currentPage,e.currentPage>e.totalPages&&e.totalPages&&(e.currentPage=e.totalPages),t=parseInt((e.currentPage/e.pageCount).toString(),10),e.currentPage%e.pageCount===0&&t>0&&(t=t-1);for(var s=0;s<e.pageCount;s++){if(e.isPagerResized){var o=this.pagerElement.querySelector(".e-focus"),l=this.target?this.target:o||null,h=!1,p=!1,c=!1,d=!1,f=!1,g=!1,m=!1;if(l){var v=l.classList;if(v.contains("e-icons"))switch(!0){case v.contains("e-prev"):h=!0;break;case v.contains("e-next"):p=!0;break;case v.contains("e-first"):c=!0;break;case v.contains("e-last"):d=!0;break}else if(v.contains("e-numericitem"))switch(!0){case v.contains("e-np"):g=!0;break;case v.contains("e-pp"):m=!0;break;default:f=v.contains("e-numericitem");break}}i=d||this.pagerModule.keyAction==="End",n=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');var y=Array.from(n).some(function(I){return parseInt(I.getAttribute("index"),10)===e.currentPage});c||this.pagerModule.keyAction==="Home"?r=1+s:d||this.pagerModule.keyAction==="End"?r=t*e.pageCount+1+s:p||this.pagerModule.keyAction==="ArrowRight"||h||this.pagerModule.keyAction==="ArrowLeft"?y?r=parseInt(n[0].getAttribute("index"),10)+s:h||this.pagerModule.keyAction==="ArrowLeft"?r=parseInt(this.PP.getAttribute("index"),10)+s:r=e.currentPage+s:g||m?r=e.currentPage+s:f?r=parseInt(n[0].getAttribute("index"),10)+s:r=t*e.pageCount+1+s}else r=t*e.pageCount+1+s;r<=e.totalPages?(this.links[parseInt(s.toString(),10)].classList.remove("e-hide"),this.links[parseInt(s.toString(),10)].style.display="",this.links[parseInt(s.toString(),10)].setAttribute("index",r.toString()),this.links[parseInt(s.toString(),10)].innerHTML=e.customText?e.customText+r:r.toString(),e.currentPage!==r?this.links[parseInt(s.toString(),10)].classList.add("e-pager-default"):this.links[parseInt(s.toString(),10)].classList.remove("e-pager-default")):(this.links[parseInt(s.toString(),10)].innerHTML=e.customText?e.customText+r:r.toString(),this.links[parseInt(s.toString(),10)].style.display="none"),ae(this.links[parseInt(s.toString(),10)],[],["e-currentitem","e-active"]),this.links[parseInt(s.toString(),10)].removeAttribute("aria-current")}$(this.first,{index:"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),$(this.pagerElement.querySelector(".e-mfirst"),{index:"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),$(this.last,{index:e.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),$(this.pagerElement.querySelector(".e-mlast"),{index:e.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),$(this.prev,{index:(e.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),$(this.pagerElement.querySelector(".e-mprev"),{index:(e.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),$(this.next,{index:(e.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")}),$(this.pagerElement.querySelector(".e-mnext"),{index:(e.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")});var w=this.pagerModule.isPagerResized&&n.length?i?parseInt(n[0].getAttribute("index"),10)-e.avgNumItems:parseInt(n[0].getAttribute("index"),10)-n.length:parseInt(this.links[0].getAttribute("index"),10)-e.pageCount;$(this.PP,{index:w<1?"1":w.toString(),title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip")});var b=this.pagerModule.isPagerResized&&n.length?parseInt(n[n.length-1].getAttribute("index"),10):parseInt(this.links[this.links.length-1].getAttribute("index"),10);$(this.NP,{index:(b+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip")}),this.target=void 0},a.prototype.updateStyles=function(){var e=this;if(this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length){var t=this.links.findIndex(function(r){return r.getAttribute("index")===e.pagerModule.currentPage.toString()}),i=this.pagerModule.isPagerResized&&t!==-1?t:(this.pagerModule.currentPage-1)%this.pagerModule.pageCount;ae(this.links[parseInt(i.toString(),10)],["e-currentitem","e-active"],[]),this.links[parseInt(i.toString(),10)].setAttribute("aria-current","page")}},a.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],r=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(ae(this.prev,i,r),ae(this.first,e,t),ae(this.pagerElement.querySelector(".e-mfirst"),e,t),ae(this.pagerElement.querySelector(".e-mprev"),i,r)):(ae(this.prev,r,i),ae(this.first,t,e),ae(this.pagerElement.querySelector(".e-mprev"),r,i),ae(this.pagerElement.querySelector(".e-mfirst"),t,e))},a.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount||this.pagerModule.isPagerResized&&this.links.findIndex(function(e){return parseInt(e.getAttribute("index"),10)===1})?ae(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):ae(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},a.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,""),i=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages||e.isPagerResized&&Array.from(i).some(function(r){return parseInt(r.getAttribute("index"),10)===e.totalPages})?ae(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):ae(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},a.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],r=["e-nextpagedisabled","e-disable"],n=this.pagerModule;n.currentPage===n.totalPages||n.totalRecordsCount===0?(ae(this.last,t,e),ae(this.next,r,i),ae(this.pagerElement.querySelector(".e-mlast"),t,e),ae(this.pagerElement.querySelector(".e-mnext"),r,i)):(ae(this.last,e,t),ae(this.next,i,r),ae(this.pagerElement.querySelector(".e-mlast"),e,t),ae(this.pagerElement.querySelector(".e-mnext"),i,r))},a}(),Jm=function(){function a(e){this.pagerModule=e}return a.prototype.render=function(){var e=ge("div",{className:"e-parentmsgbar"});this.pageNoMsgElem=ge("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=ge("span",{className:"e-pagecountmsg",styles:"textalign:right"}),be([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},a.prototype.refresh=function(){var e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[e.totalRecordsCount===0?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage]),this.pageNoMsgElem.parentElement.classList.remove("e-hide")},a.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},a.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},a.prototype.destroy=function(){},a.prototype.format=function(e,t){for(var i,r=RegExp,n=0;n<t.length;n++)i=new r("\\{"+n+"\\}","gm"),e=e.replace(i,t[parseInt(n.toString(),10)].toLocaleString(this.pagerModule.locale));return e},a}(),Xm=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yt=function(a,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(a,e,t,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},mh=function(a){Xm(e,a);function e(t,i,r){var n=a.call(this,t,i)||this;return n.hasParent=!1,n.checkAll=!0,n.pageRefresh="pager-refresh",n.firstPagerFocus=!1,n.isCancel=!1,n.isInteracted=!1,n.parent=r,n}return e.prototype.requiredModules=function(){var t=[];return this.enableExternalMessage&&t.push({member:"externalMessage",args:[this],name:"ExternalMessage"}),this.checkpagesizes()&&t.push({member:"pagerdropdown",args:[this],name:"PagerDropDown"}),t},e.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager items",previousPagerTooltip:"Go to previous pager items",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager items",PreviousPagerTooltip:"Go to previous pager items",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All",Container:"Pager Container",Information:"Pager Information",ExternalMsg:"Pager external message",Page:"Page ",Of:" of ",Pages:" Pages"},this.containerModule=new Qm(this),this.pagerMessageModule=new Jm(this)},e.prototype.render=function(){if(this.element.setAttribute("data-role","pager"),this.element.setAttribute("tabindex","-1"),this.initLocalization(),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?R([this.element],this.cssClass.split(" ")):R([this.element],[this.cssClass])),this.hasParent||this.element.setAttribute("tabindex","0"),this.enableQueryString){var t=new URL(window.location.href).searchParams.get("page");if(!u(t)&&window.location.href.indexOf("?page=")>0){var i=parseInt(t,10);this.hasParent&&this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.currentPage=i}}this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount})),this.wireEvents(),this.addListener()},e.prototype.getPersistData=function(){var t=["currentPage","pageSize"];return this.addOnPersist(t)},e.prototype.destroy=function(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["pagerTemplate"])),this.removeListener(),this.unwireEvents(),a.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML=""))},e.prototype.destroyTemplate=function(t,i){this.clearTemplate(t,i)},e.prototype.getModuleName=function(){return"pager"},e.prototype.onPropertyChanged=function(t,i){if(!this.isDestroyed){if(t.pageSize===this.getLocalizedLabel("All")&&i.pageSize===this.totalRecordsCount){this.pageSize=this.totalRecordsCount;return}t.pageCount!==i.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"currentPage":this.checkGoToPage(t.currentPage,i.currentPage)&&this.currentPageChanged(t,i);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(i.pageSize!==t.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),t.pageSize!==i.pageSize?(this.pageSize=t.pageSize,this.currentPageChanged(t,i),this.isCancel&&this.hasParent&&this.parent.setProperties({pageSettings:{pageSize:i.pageSize}},!0)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage();break}}this.resizePager()}},e.prototype.wireEvents=function(){this.hasParent||(S.add(this.element,"keydown",this.keyPressHandler,this),S.add(document.body,"keydown",this.keyDownHandler,this)),S.add(this.element,"focusin",this.onFocusIn,this),S.add(this.element,"focusout",this.onFocusOut,this),S.add(window,"resize",this.resizePager,this),S.add(window,"load",this.resizePager,this)},e.prototype.unwireEvents=function(){this.hasParent||(S.remove(this.element,"keydown",this.keyPressHandler),S.remove(document.body,"keydown",this.keyDownHandler)),S.remove(this.element,"focusin",this.onFocusIn),S.remove(this.element,"focusout",this.onFocusOut),S.remove(window,"resize",this.resizePager),S.remove(window,"load",this.resizePager)},e.prototype.onFocusIn=function(t){var i=this.getFocusedTabindexElement();if(u(i)){var r=t.target,n=this.getDropDownPage();if(this.hasParent||(this.element.tabIndex=-1),r===this.element&&!this.hasParent){var s=this.getFocusablePagerElements(this.element,[]);this.addFocus(s[0],!0);return}if(r===this.element){this.element.tabIndex=0;return}r!==n&&!r.classList.contains("e-disable")&&this.addFocus(r,!0)}},e.prototype.onFocusOut=function(t){var i=this.getFocusedElement(),r=this.getDropDownPage();u(i)||this.removeFocus(i,!0),this.pageSizes&&r&&r.classList.contains("e-input-focus")&&this.removeFocus(r,!0),this.setTabIndexForFocusLastElement(),this.hasParent||(this.element.tabIndex=0),this.hasParent&&(this.element.tabIndex=-1)},e.prototype.keyDownHandler=function(t){if(t.altKey&&t.keyCode===74){var i=this.getFocusablePagerElements(this.element,[]);i.length>0&&i[0].focus()}},e.prototype.keyPressHandler=function(t){var i=P(t,{cancel:!1});this.notify(at,i),i.cancel===!0&&t.stopImmediatePropagation()},e.prototype.addListener=function(){this.isDestroyed||this.hasParent||this.on(at,this.onKeyPress,this)},e.prototype.removeListener=function(){this.isDestroyed||this.hasParent||this.off(at,this.onKeyPress)},e.prototype.onKeyPress=function(t){this.hasParent||(this.checkPagerHasFocus()?this.changePagerFocus(t):(t.preventDefault(),this.setPagerFocus()))},e.prototype.checkPagerHasFocus=function(){return!!this.getFocusedTabindexElement()},e.prototype.setPagerContainerFocus=function(){this.element.focus()},e.prototype.setPagerFocus=function(){var t=this.getFocusablePagerElements(this.element,[]);t.length>0&&t[0].focus()},e.prototype.setPagerFocusForActiveElement=function(){var t=this.getActiveElement();t&&t.focus()},e.prototype.setTabIndexForFocusLastElement=function(){var t=this.getFocusablePagerElements(this.element,[]),i=this.getDropDownPage();this.pageSizes&&i&&!u(i.offsetParent)?i.tabIndex=0:t.length>0&&(t[t.length-1].tabIndex=0)},e.prototype.changePagerFocus=function(t){this.keyAction=t.key,t.shiftKey&&t.keyCode===9?this.changeFocusByShiftTab(t):t.keyCode===9?this.changeFocusByTab(t):t.keyCode===13||t.keyCode===32?this.navigateToPageByEnterOrSpace(t):(t.keyCode===37||t.keyCode===39||t.keyCode===35||t.keyCode===36)&&this.navigateToPageByKey(t),this.keyAction=""},e.prototype.getFocusedTabindexElement=function(){for(var t,i=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])'),r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)];if(n&&(n.classList.contains("e-focused")||n.classList.contains("e-input-focus"))){t=n;break}}return t},e.prototype.changeFocusByTab=function(t){var i=this.getFocusedTabindexElement(),r=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(r.length>0){if(this.pageSizes&&n&&i===r[r.length-1])n.tabIndex=0;else for(var s=0;s<r.length;s++)if(i===r[parseInt(s.toString(),10)]){var o=s+1;o<r.length&&(t.preventDefault(),r[parseInt(o.toString(),10)].focus());break}}},e.prototype.changeFocusByShiftTab=function(t){var i=this.getFocusedTabindexElement(),r=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(this.pageSizes&&n&&n.classList.contains("e-input-focus"))n.tabIndex=-1,this.addFocus(r[r.length-1],!0);else if(r.length>0){for(var s=0;s<r.length;s++)if(i===r[parseInt(s.toString(),10)]){var o=s-1;if(o>=0)t.preventDefault(),r[parseInt(o.toString(),10)].focus();else if(this.hasParent){var l=this.parent.getRows(),h=l[l.length-1],p=h.lastChild;t.preventDefault(),p.focus(),this.firstPagerFocus=!0}break}}},e.prototype.checkFirstPagerFocus=function(){return this.firstPagerFocus?(this.firstPagerFocus=!1,!0):!1},e.prototype.navigateToPageByEnterOrSpace=function(t){var i=this.getFocusedElement();if(i){this.goToPage(parseInt(i.getAttribute("index"),10));var r=this.getActiveElement(),n=this.getClass(i),s=this.getElementByClass(n);(n==="e-first"||n==="e-prev"||n==="e-next"||n==="e-last"||n==="e-pp"||n==="e-np")&&s&&!s.classList.contains("e-disable")?s.focus():this.checkFocusInAdaptiveMode(i)?this.changeFocusInAdaptiveMode(i):r&&r.focus()}},e.prototype.navigateToPageByKey=function(t){var i=t.keyCode===37?".e-prev":t.keyCode===39?".e-next":t.keyCode===35?".e-last":t.keyCode===36?".e-first":"",r=this.element.querySelector(i),n=this.getFocusedElement();if(!u(r)&&r.hasAttribute("index")&&!isNaN(parseInt(r.getAttribute("index"),10))){this.goToPage(parseInt(r.getAttribute("index"),10));var s=this.getActiveElement();this.checkFocusInAdaptiveMode(n)?this.changeFocusInAdaptiveMode(n):s&&s.focus()}},e.prototype.checkFocusInAdaptiveMode=function(t){var i=this.getClass(t);return i==="e-mfirst"||i==="e-mprev"||i==="e-mnext"||i==="e-mlast"},e.prototype.changeFocusInAdaptiveMode=function(t){var i=this.getClass(t),r=this.getElementByClass(i);if(r&&r.classList.contains("e-disable"))if(i==="e-mnext"||i==="e-mlast"){var n=this.element.querySelector(".e-mprev");n.focus()}else this.setPagerFocus()},e.prototype.removeTabindexLastElements=function(){var t=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');if(t.length>1)for(var i=1;i<t.length;i++){var r=t[parseInt(i.toString(),10)];r&&(r.tabIndex=-1)}},e.prototype.getActiveElement=function(){return this.element.querySelector(".e-active")},e.prototype.getDropDownPage=function(){var t=this.element.querySelector(".e-pagerdropdown"),i;return t&&(i=t.children[0]),i},e.prototype.getFocusedElement=function(){return this.element.querySelector(".e-focused")},e.prototype.getClass=function(t){for(var i,r=["e-mfirst","e-mprev","e-first","e-prev","e-pp","e-np","e-next","e-last","e-mnext","e-mlast"],n=0;n<r.length;n++)if(t&&t.classList.contains(r[parseInt(n.toString(),10)]))return i=r[parseInt(n.toString(),10)],i;return i},e.prototype.getElementByClass=function(t){return this.element.querySelector("."+t)},e.prototype.getFocusablePagerElements=function(t,i){for(var r=t,n=r.children,s=i,o=0;o<n.length;o++){var l=n[parseInt(o.toString(),10)];if(l.children.length>0&&!l.classList.contains("e-pagesizes"))s=this.getFocusablePagerElements(l,s);else{var h=n[parseInt(o.toString(),10)];h.hasAttribute("tabindex")&&!l.classList.contains("e-disable")&&l.style.display!=="none"&&!u(l.offsetParent)&&s.push(h)}}return s},e.prototype.addFocus=function(t,i){u(t)||(i&&R([t],["e-focused","e-focus"]),t.tabIndex=0)},e.prototype.removeFocus=function(t,i){i&&N([t],["e-focused","e-focus"]),t.tabIndex=-1},e.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},e.prototype.goToPage=function(t){this.checkGoToPage(t)&&(this.currentPage=t,this.isInteracted=!1,this.dataBind())},e.prototype.setPageSize=function(t){this.pageSize=t,this.dataBind()},e.prototype.checkpagesizes=function(){return!!(this.pageSizes===!0||this.pageSizes.length)},e.prototype.checkGoToPage=function(t,i){return t!==this.currentPage&&(this.previousPageNo=this.currentPage),u(i)||(this.previousPageNo=i),this.previousPageNo!==t&&t>=1&&t<=this.totalPages},e.prototype.currentPageChanged=function(t,i){if(this.enableQueryString&&this.updateQueryString(this.currentPage),t.currentPage!==i.currentPage||t.pageSize!==i.pageSize){var r={currentPage:this.currentPage,newProp:t,oldProp:i,cancel:!1,isInteracted:this.isInteracted};this.trigger("click",r),r.cancel?(this.isCancel=!0,i&&i.pageSize&&(this.setProperties({pageSize:i.pageSize},!0),this.pagerdropdownModule&&(this.pagerdropdownModule.setDropDownValue("value",i.pageSize),this.pagerdropdownModule.dropDownListObject.text=i.pageSize+""))):(this.isCancel=!1,this.refresh())}},e.prototype.pagerTemplate=function(){if(!(this.isReactTemplate()&&this.hasParent)){var t;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var i={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},r=this.element.parentElement.id+"_template";this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(i,this,"pagerTemplate",r,null,null,this.element),this.renderReactTemplates()):(t=this.isVue?this.getPagerTemplate()(i,this,"pagerTemplate",null,null,null,null,this.root):this.getPagerTemplate()(i),$e(this.element,t))}},e.prototype.updateTotalPages=function(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize===0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},e.prototype.getPagerTemplate=function(){return this.templateFn},e.prototype.compile=function(t){if(t)try{typeof t=="function"?this.templateFn=We(t):document.querySelectorAll(t).length?this.templateFn=We(document.querySelector(t).innerHTML.trim()):this.templateFn=We(t)}catch{this.templateFn=We(t)}},e.prototype.refresh=function(){if(this.template)this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate());else{this.updateRTL();var t=this.getFocusedTabindexElement();this.containerModule.refresh(),this.removeTabindexLastElements(),t&&t.classList.contains("e-disable")&&(this.checkFocusInAdaptiveMode(t)?this.changeFocusInAdaptiveMode(t):this.setPagerFocusForActiveElement()),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh(),this.setTabIndexForFocusLastElement(),this.resizePager()}},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.initLocalization=function(){this.localeObj=new Xt(this.getModuleName(),this.defaultConstants,this.locale)},e.prototype.updateQueryString=function(t){var i=this.getUpdatedURL(window.location.href,"page",t.toString());window.history.pushState({path:i},"",i)},e.prototype.getUpdatedURL=function(t,i,r){var n=RegExp,s=new n("([?|&])"+i+"=.*?(&|#|$)","i");if(t.match(s))return t.replace(s,"$1"+i+"="+r+"$2");var o="";return t.indexOf("#")!==-1&&(o=t.replace(/.*#/,"#"),t=t.replace(/#.*/,"")),t+(t.indexOf("?")!==-1?"&":"?")+i+"="+r+o},e.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(ge("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(ge("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},e.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(ge("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(ge("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},e.prototype.addAriaLabel=function(){var t=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!T.isDevice)for(var i=0;i<t.length;i++){var r=this.element.querySelector(t[parseInt(i.toString(),10)]);r.setAttribute("aria-label",r.getAttribute("title"))}},e.prototype.isReactTemplate=function(){return(this.isReact||this.isVue)&&this.template&&typeof this.template!="string"},e.prototype.calculateActualWidth=function(){for(var t=this.element.querySelectorAll(".e-mfirst, .e-mprev, .e-icon-first, .e-icon-prev, .e-pp:not(.e-disable), .e-numericitem:not(.e-hide), .e-numericitem.e-active.e-hide, .e-np:not(.e-disable), .e-icon-next, .e-icon-last, .e-parentmsgbar, .e-mnext, .e-mlast, .e-pagerdropdown, .e-pagerconstant"),i=0,r=0;r<t.length;r++)getComputedStyle(t[parseInt(r.toString(),10)]).display!=="none"&&(i+=t[parseInt(r.toString(),10)].offsetWidth+parseFloat(getComputedStyle(t[parseInt(r.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(t[parseInt(r.toString(),10)]).marginRight));var n=this.element.querySelector(".e-pagercontainer");return i+=parseFloat(getComputedStyle(n).marginLeft)+parseFloat(getComputedStyle(n).marginRight),i},e.prototype.resizePager=function(){var t=this,i=this.element.classList.contains("e-pager")?getComputedStyle(this.element).getPropertyValue("border-style").includes("solid"):null;if(!this.template&&i){var r=this.element.querySelector(".e-pagercontainer"),n=this.calculateActualWidth(),s=this.element.clientWidth-parseFloat(getComputedStyle(this.element).paddingLeft)-parseFloat(getComputedStyle(this.element).paddingRight)-parseFloat(getComputedStyle(this.element).marginLeft)-parseFloat(getComputedStyle(this.element).marginRight),o=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),l=r.querySelectorAll('.e-numericitem.e-hide:not([style*="display: none"])'),h=o.length,p=1,c=u(x(this.element,"e-bigger"))?5:10,d=r.querySelector(".e-np"),f=r.querySelector(".e-pp"),g=this.element.querySelectorAll('.e-parentmsgbar:not(.e-hide):not([style*="display: none"]), .e-pagesizes:not(.e-hide):not([style*="display: none"])'),m=0;g.length&&(g.forEach(function(U){m+=U.offsetWidth}),this.averageDetailWidth=m/g.length);for(var v=0,y=0;y<o.length;y++)v+=o[parseInt(y.toString(),10)].offsetWidth+parseFloat(getComputedStyle(o[parseInt(y.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(o[parseInt(y.toString(),10)]).marginRight);var w=v/o.length;if(s>0&&n>=s-(w||0)){this.isPagerResized=!0,this.currentPage!==this.totalPages&&ae(d,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]),n=this.calculateActualWidth();var b=Math.abs(n-s),I=Math.ceil(b/w);I=I===0?1:I>o.length?o.length-1:I;for(var y=1;y<=I;y++){var k=h-parseInt(y.toString(),10);o=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),this.currentPage!==1&&(parseInt(o[Math.abs(k)].getAttribute("index"),10)===this.currentPage||parseInt(o[o.length-1].getAttribute("index"),10)===this.currentPage)&&(k=0,ae(f,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])),o[Math.abs(k)]&&!o[Math.abs(k)].classList.contains("e-currentitem")&&o[Math.abs(k)].classList.add("e-hide")}if(o=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),o.length<=1&&g.length&&window.innerWidth>=768){var D=this.calculateActualWidth();if(D>s-c){var W=Math.floor((s-(D-m))/this.averageDetailWidth);W=g.length-W;for(var y=0;y<(W>g.length?g.length:W);y++)g[parseInt(y.toString(),10)].classList.add("e-hide")}}}else if(n<s&&l.length){var b=Math.abs(s-n),Z=this.element.querySelectorAll(".e-parentmsgbar.e-hide, .e-pagesizes.e-hide");if(Z.length&&b>this.averageDetailWidth+this.averageDetailWidth/4&&Z[Z.length-1].classList.remove("e-hide"),b>w*2&&!Z.length&&window.innerWidth>=768){var J=Math.floor(b/(w+c));J=J>l.length?l.length:J-1;for(var X=Array.from(l).filter(function(H){return parseInt(H.getAttribute("index"),10)<t.currentPage}).sort(function(H,z){return parseInt(z.getAttribute("index"),10)-parseInt(H.getAttribute("index"),10)}),L=Array.from(l).filter(function(H){return parseInt(H.getAttribute("index"),10)>t.currentPage}),O=X.length&&X||L.length&&L,y=1;y<=J;y++){var F=O&&O[Math.abs(p-y)];F&&(F.classList.remove("e-hide"),F===O[O.length-1]&&(O=null))}}}if(o=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),o.length){parseInt(o[o.length-1].getAttribute("index"),10)===this.totalPages&&ae(d,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]),parseInt(o[0].getAttribute("index"),10)===1&&ae(f,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]);var V=Array.from(o).some(function(U){return parseInt(U.getAttribute("index"),10)===t.totalPages}),K=parseInt(o[0].getAttribute("index"),10)-(V?this.avgNumItems:o.length);f.setAttribute("index",K<1?"1":K.toString()),d.setAttribute("index",(parseInt(o[o.length-1].getAttribute("index"),10)+1).toString()),this.avgNumItems=V?this.avgNumItems:o.length}this.element.offsetWidth<769&&window.getComputedStyle(this.element.querySelector(".e-mfirst")).getPropertyValue("display")!=="none"&&this.pageSizes?(this.element.querySelector(".e-pagesizes").classList.remove("e-hide"),this.element.querySelector(".e-parentmsgbar").classList.remove("e-hide"),this.element.classList.add("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.element.offsetWidth<481?this.currentPage+" / "+this.totalPages:this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[this.totalRecordsCount===0?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" "):(this.element.classList.remove("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[this.totalRecordsCount===0?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" ")}},yt([C(!1)],e.prototype,"enableQueryString",void 0),yt([C(!1)],e.prototype,"enableExternalMessage",void 0),yt([C(!0)],e.prototype,"enablePagerMessage",void 0),yt([C(12)],e.prototype,"pageSize",void 0),yt([C(10)],e.prototype,"pageCount",void 0),yt([C(1)],e.prototype,"currentPage",void 0),yt([C()],e.prototype,"totalRecordsCount",void 0),yt([C()],e.prototype,"externalMessage",void 0),yt([C(!1)],e.prototype,"pageSizes",void 0),yt([C()],e.prototype,"template",void 0),yt([C("")],e.prototype,"customText",void 0),yt([B()],e.prototype,"click",void 0),yt([C("")],e.prototype,"cssClass",void 0),yt([B()],e.prototype,"dropDownChanged",void 0),yt([B()],e.prototype,"created",void 0),e=yt([kt],e),e}(Hi),Zm=function(){function a(e){this.pagerModule=e}return a.prototype.getModuleName=function(){return"pagerdropdown"},a.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=ge("div",{className:"e-pagesizes"});var t=ge("div",{className:"e-pagerdropdown"}),i=ge("div",{className:"e-pagerconstant"}),r=ge("input",{attrs:{type:"text",tabindex:"-1"}});this.pagerCons=ge("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(r),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var n=this.pagerModule.pageSizes,s=n.length?this.convertValue(n):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],o=this.pagerModule.pageSize;this.dropDownListObject=new Sr({dataSource:s,value:o.toString(),change:this.onChange.bind(this),placeholder:this.pagerModule.getLocalizedLabel("pagerDropDown"),cssClass:this.pagerModule.cssClass?"e-alldrop "+this.pagerModule.cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(r),n.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=o,e.dataBind(),e.trigger("dropDownChanged",{pageSize:o}),this.addEventListener()},a.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerModule.isAllPage=!0,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerModule.isAllPage=!1,this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.isCancel||this.pagerModule.trigger("dropDownChanged",{pageSize:this.pagerModule.isAllPage||this.pagerModule.isAllPage===void 0&&this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?this.pagerModule.totalRecordsCount:parseInt(this.dropDownListObject.value,10)})},a.prototype.refresh=function(){this.pagerCons&&(this.isPageSizeAll(this.pagerModule.pageSize)?(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerAllDropDown"),this.pagerCons.parentElement.classList.add("e-page-all")):(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerDropDown"),this.pagerCons.parentElement.classList.remove("e-page-all")),this.pagerDropDownDiv.classList.remove("e-hide"))},a.prototype.beforeValueChange=function(e){if(typeof e.newProp.value=="number"){var t=e.newProp.value.toString();e.newProp.value=t}},a.prototype.convertValue=function(e){for(var t=e,i=0;i<t.length;i++)t[parseInt(i.toString(),10)]=parseInt(t[parseInt(i.toString(),10)],10)?t[parseInt(i.toString(),10)].toString():this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)])!==""?this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)]):t[parseInt(i.toString(),10)];return t},a.prototype.isPageSizeAll=function(e){var t=typeof e=="string"&&e!==this.pagerModule.getLocalizedLabel("All")?parseInt(e,10):e;return t===this.pagerModule.totalRecordsCount||e===this.pagerModule.getLocalizedLabel("All")},a.prototype.setDropDownValue=function(e,t){if(this.dropDownListObject){var i=this.pagerModule.isAllPage;this.pagerModule.isAllPage=this.isPageSizeAll(t),this.pagerModule.checkAll=!!(i&&this.pagerModule.isAllPage),this.dropDownListObject[""+e]=this.pagerModule.isAllPage?this.pagerModule.getLocalizedLabel("All"):t}},a.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},a.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},a.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),se(this.pagerDropDownDiv))},a}(),ev=function(){function a(e){this.pagerModule=e}return a.prototype.getModuleName=function(){return"externalMessage"},a.prototype.render=function(){this.element=ge("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":this.pagerModule.getLocalizedLabel("ExternalMsg")}}),this.pagerModule.element.appendChild(this.element),this.refresh()},a.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},a.prototype.hideMessage=function(){u(this.element)||(this.element.style.display="none")},a.prototype.showMessage=function(){this.element.style.display=""},a.prototype.destroy=function(){this.element&&this.element.parentElement&&se(this.element)},a}(),tv=function(){function a(e,t){this.isInitialRender=!0,this.isCancel=!1,mh.Inject(ev,Zm),this.parent=e,this.pageSettings=t,this.addEventListener()}return a.prototype.getModuleName=function(){return"pager"},a.prototype.render=function(){var e=this.parent;this.pagerDestroy(),u(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"});var t=Br({},P({},Bn(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:e.enableRtl,locale:e.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]);t.cssClass=this.parent.cssClass?this.parent.cssClass:"",this.pagerObj=new mh(t,void 0,this.parent),this.pagerObj.root=e.root?e.root:e,this.pagerObj.hasParent=!0,this.pagerObj.on(vl,this.renderReactPagerTemplate,this),this.pagerObj.allowServerDataBinding=!1},a.prototype.onSelect=function(e){this.pageSettings.pageSize=e.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)},a.prototype.addAriaAttr=function(){if(!this.pageSettings.template){for(var e=this.parent.createElement("div",{className:"e-numericcontainer"}),t=this.element.querySelector(".e-pagercontainer"),i=document.createDocumentFragment(),r=this.element.querySelector(".e-numericcontainer"),n=r.querySelectorAll("a"),s=0;s<n.length;s++){this.parent.getContentTable()?n[parseInt(s.toString(),10)].setAttribute("aria-owns",this.parent.getContentTable().id+" "+(s+1)):n[parseInt(s.toString(),10)].setAttribute("aria-owns",this.parent.element.getAttribute("id")+"_content_table "+(s+1));var o=this.parent.createElement("div");o.appendChild(n[parseInt(s.toString(),10)]),i.appendChild(o)}e.appendChild(i),t.replaceChild(e,r);for(var l=[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"],h=0;h<l.length;h++){var p=this.element.querySelector(l[parseInt(h.toString(),10)]);this.parent.getContentTable()&&p.setAttribute("aria-owns",this.parent.getContentTable().id+l[parseInt(h.toString(),10)].replace(".e-"," "))}}},a.prototype.dataReady=function(e){this.updateModel(e)},a.prototype.refresh=function(){this.pagerObj.refresh()},a.prototype.goToPage=function(e){this.pagerObj.goToPage(e)},a.prototype.setPageSize=function(e){this.pagerObj.setPageSize(e)},a.prototype.updateModel=function(e){this.parent.pageSettings.totalRecordsCount=e.count;var t=e.action==="add"&&e.requestType==="save"||e.requestType==="batchsave";this.pagerObj.isAllPage&&!t&&(this.parent.pageSettings.pageSize=this.parent.pageSettings.totalRecordsCount),t&&this.pagerObj.isAllPage&&e.count===this.pageSettings.pageSize&&this.pagerObj.setProperties({pageSize:e.count},!0),this.parent.dataBind()},a.prototype.onActionComplete=function(e){this.parent.trigger(ce,P(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:ce}))},a.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){for(var t=e.properties,i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];this.pagerObj[""+n]=t[""+n]}this.pagerObj.dataBind()}},a.prototype.clickHandler=function(e){var t=this.parent;if(this.isForceCancel||qi(t)&&!t.prevPageMoving&&!this.isCancel){this.isForceCancel?this.isForceCancel=!1:(!u(e.newProp)&&!u(e.newProp.pageSize)?(t.notify(Jt,{instance:this,handler:this.setPageSize,arg1:e.newProp.pageSize}),this.pagerObj.setProperties({pageSize:e.oldProp.pageSize},!0),this.parent.setProperties({pageSettings:{pageSize:e.oldProp.pageSize}},!0),this.pagerObj.setProperties({currentPage:t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage},!0)):e.currentPage&&(t.notify(Jt,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.pagerObj.currentPage=t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage),this.isForceCancel=!0,this.pagerObj.dataBind()),e.cancel=!0;return}t.pageSettings.pageSize=this.pagerObj.pageSize,t.prevPageMoving=!1;var i=this.pageSettings.currentPage,r={cancel:!1,requestType:"paging",previousPage:i,currentPage:e.currentPage,pageSize:t.pageSettings.pageSize,type:Ae};if(this.isCancel||(this.pageSettings.currentPage=e.currentPage,this.parent.notify(qt,r),t.pageRequireRefresh=!1),r.cancel){e.cancel=!0,this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.pagerObj.setProperties({currentPage:i},!0),this.isCancel=!0;return}this.isCancel=!1,this.parent.requestTypeAction="paging"},a.prototype.keyPressHandler=function(e){e.action in vh&&(e.preventDefault(),this.element.querySelector(vh[e.action]).click())},a.prototype.updateExternalMessage=function(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()},a.prototype.appendToElement=function(){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.isReact=this.parent.isReact,this.pagerObj.isVue=this.parent.isVue||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isVue,this.pagerObj.appendTo(this.element),this.isInitialLoad=!1},a.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement(),this.isReactTemplate()&&(this.pagerObj.updateTotalPages(),this.created()))},a.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created},!this.parent.isDestroyed&&((this.parent.isReact||this.parent.isVue)&&this.parent.addEventListener(Ps,this.handlers.created.bind(this)),this.evtHandlers=[{event:To,handler:this.handlers.load},{event:ci,handler:this.handlers.end},{event:Qr,handler:this.handlers.ready},{event:Ec,handler:this.handlers.complete},{event:qe,handler:this.handlers.updateLayout},{event:vt,handler:this.handlers.inboundChange},{event:at,handler:this.handlers.keyPress},{event:Ie,handler:this.destroy}],ct(this.parent,this.evtHandlers,!0,this))},a.prototype.created=function(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())},a.prototype.isReactTemplate=function(){return(this.parent.isReact||this.parent.isVue)&&this.pagerObj.template&&typeof this.pagerObj.template!="string"},a.prototype.renderReactPagerTemplate=function(){if(!this.isInitialRender&&this.isReactTemplate()){var e=void 0;this.parent.destroyTemplate(["pagerTemplate"]),this.element.classList.add("e-pagertemplate"),this.pagerObj.compile(this.pagerObj.template);var t=this.parent.pageSettings,i={currentPage:t.currentPage,pageSize:t.pageSize,pageCount:t.pageCount,totalRecordsCount:t.totalRecordsCount,totalPages:this.pagerObj.totalPages},r=this.parent.id+"_pagertemplate";this.parent.isReact?(this.pagerObj.templateFn(i,this.parent,"pagerTemplate",r,null,null,this.pagerObj.element),this.parent.renderTemplates()):(e=this.pagerObj.templateFn(i,this.parent,"pagerTemplate"),$e(this.pagerObj.element,e))}},a.prototype.removeEventListener=function(){this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.removeEventListener(Ps,this.handlers.created),this.parent.off(vl,this.renderReactPagerTemplate),ct(this.parent,this.evtHandlers,!1))},a.prototype.destroy=function(){this.removeEventListener(),this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]),this.pagerObj.destroy()},a.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),se(this.element))},a}(),vh={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},iv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rv=function(a){iv(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-filterbarcell",attrs:{role:"columnheader"}}),t}return e.prototype.getGui=function(){return this.parent.createElement("div")},e.prototype.render=function(t,i){var r=this.parent.element.querySelector(".e-filterbar"),n=this.element.cloneNode(),s=this.getGui(),o,l=t.column;if(r.appendChild(n),n.setAttribute("e-mappinguid",l.uid),l.filterTemplate){var h={};i&&(h[l.field]=i[l.field]);var p="column";if(h[""+p]=l,l.visible){var c=this.parent.isReact&&typeof l.filterTemplate!="string",d=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,f=this.parent.element.id+l.uid+"filterTemplate";if(c||d)l.getFilterTemplate()(h,this.parent,"filterTemplate",f,null,null,n),this.parent.renderTemplates();else{var g=l.getFilterTemplate()(h,this.parent,"filterTemplate",f,null,null,null,this.parent.root);$e(n,g)}}else n.classList.add("e-hide")}else if(l.type!=="checkbox"){if((u(l.allowFiltering)||l.allowFiltering)&&!u(l.filterBarTemplate))if(n.classList.add("e-fltrtemp"),$(s,{class:"e-fltrtempdiv"}),u(l.filterBarTemplate.create))o=this.parent.createElement("input",{id:l.field+"_filterBarcell",className:"e-filterUi_input e-filtertext e-fltrTemp",attrs:{type:"search",title:l.headerText}}),s.appendChild(o);else{var m={column:l,node:Element},v=l.filterBarTemplate.create;if(typeof v=="string"&&(v=j(v,window)),o=v(m),typeof o=="string"){var y=this.parent.createElement("div");y.innerHTML=o,o=y.firstChild}$(s,{class:"e-filterUi_input e-filtertext e-fltrTemp",title:l.headerText,id:l.field+"_filterBarcell"}),s.appendChild(o)}else{$(s,{class:"e-filterdiv e-fltrinputdiv"}),o=this.parent.createElement("input",{id:l.field+"_filterBarcell",className:"e-filtertext",attrs:{type:"search",title:l.headerText+t.attributes.title,value:i[t.column.field]?i[t.column.field]:""}}),s.appendChild(o);var m={element:o,floatLabelType:"Never",properties:{enableRtl:this.parent.enableRtl,showClearButton:!0,cssClass:this.parent.cssClass}};G.createInput(m,this.parent.createElement)}(l.allowFiltering===!1||l.field===""||u(l.field))&&(o.setAttribute("disabled","true"),o.classList.add("e-disable"));var w=s.querySelector(".e-clear-icon");if(w&&w.setAttribute("title",this.parent.localeObj.getConstant("ClearButton")),l.visible||n.classList.add("e-hide"),this.appendHtml(n,s),this.parent.filterSettings.showFilterBarOperator&&this.parent.filterSettings.type==="FilterBar"&&!this.parent.isPrinting&&u(l.filterTemplate)&&u(l.filterBarTemplate)&&this.operatorIconRender(s,l,t),(u(l.allowFiltering)||l.allowFiltering)&&!u(l.filterBarTemplate)){var b=l.filterBarTemplate.write,m={element:o,column:l};typeof b=="string"&&(b=j(b,window)),b.call(this,m)}}else l.visible||n.classList.add("e-hide");return this.parent.isFrozenGrid()&&Vn(this.parent,l,n),n},e.prototype.appendHtml=function(t,i){return t.appendChild(i),t},e.prototype.operatorIconRender=function(t,i,r){var n=this.parent,s,o=this.parent.createElement("input",{className:" e-filterbaroperator e-icons e-icon-filter",id:r.column.uid});if(t.querySelector("span").appendChild(o),i.filter&&i.filter.operator)s=i.filter.operator;else if(n.filterSettings.columns.length)for(var l=0,h=n.filterSettings.columns;l<h.length;l++){var p=h[parseInt(l.toString(),10)];if(p.field===i.field){s=p.operator;break}else s="equal"}else s="equal";u(n.filterModule.operators[i.field])||(s=n.filterModule.operators[i.field]),this.dropOptr=new Sr({fields:{text:"text",value:"value"},popupHeight:"auto",value:s,width:"0px",enabled:i.allowFiltering,popupWidth:"auto",enableRtl:this.parent.enableRtl,change:this.internalEvent.bind(this),beforeOpen:function(){var d=n.filterModule.customOperators;this.dataSource=d[n.getColumnByUid(this.element.id).type+"Operator"];for(var f=0;f<this.dataSource.length;f++)i.filter&&i.filter.operator&&u(n.filterModule.operators[i.field])&&this.dataSource[parseInt(f.toString(),10)].value===i.filter.operator&&(this.value=i.filter.operator)},cssClass:this.parent.cssClass?"e-popup-flbar "+this.parent.cssClass:"e-popup-flbar"}),this.dropOptr.appendTo(o);var c=M(this.dropOptr.element,"span");c.classList.add("e-filterbardropdown"),c.removeAttribute("tabindex")},e.prototype.internalEvent=function(t){var i=this.parent,r=i.getColumnByUid(t.element.getAttribute("id"));t.column=r,i.filterModule.operators[r.field]=t.value,i.notify(yd,t)},e}(xt),nv=function(){function a(e,t,i,r){this.ddOpen=this.dropDownOpen.bind(this),this.parent=e,this.serviceLocator=i,this.filterSettings=r,this.customFilterOperators=t,this.parent&&(this.parent.on(Bt,this.destroyDropDownList,this),this.parent.on(Ie,this.destroyDropDownList,this))}return a.prototype.renderOperatorUI=function(e,t,i,r,n){this.dialogObj=r;var s=i.type+"Operator";this.optrData=this.customOptr=u(n)?!u(this.parent.filterSettings.operators)&&!u(this.parent.filterSettings.operators[""+s])?this.parent.filterSettings.operators[""+s]:this.customFilterOperators[""+s]:n;var o=this.customOptr,l=this.dropSelectedVal(i,s),h=this.parent.createElement("div",{className:"e-flm_optrdiv"});e.appendChild(h);var p=this.parent.createElement("input",{id:i.uid+"-floptr"});h.appendChild(p),this.dropOptr=new Sr({dataSource:o,fields:{text:"text",value:"value"},cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",enableRtl:this.parent.enableRtl,text:l,change:function(){var c=document.querySelector(".e-flmenu-valuediv").querySelector("input");this.value==="isempty"||this.value==="isnotempty"||this.value==="isnotnull"||this.value==="isnull"?u(c.ej2_instances)?c.setAttribute("disabled","true"):c.ej2_instances[0].enabled=!1:u(c.getAttribute("disabled"))||(u(c.ej2_instances)?c.removeAttribute("disabled"):c.ej2_instances[0].enabled=!0)}}),this.dropOptr.addEventListener(Ot,this.ddOpen),this.dropOptr.appendTo("#"+i.uid+"-floptr")},a.prototype.renderResponsiveDropDownList=function(e){e.popup.element.style.width="100%"},a.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString(),this.parent.enableAdaptiveUI&&this.renderResponsiveDropDownList(e)},a.prototype.dropSelectedVal=function(e,t){for(var i="",r=this.parent.filterSettings.columns,n=0,s=r;n<s.length;n++){var o=s[n];if(e.field===o.field||e.isForeignColumn()&&e.foreignKeyValue===o.field){var l=new q(this.optrData).executeLocal(new re().where("value","equal",o.operator));i=u(l[0])?"":l[0].text}}if(i==="")if(e.filter.operator)for(var h=Object.keys(this.optrData).length,p=0;p<h;p++)this.optrData[parseInt(p.toString(),10)].value===e.filter.operator&&(i=this.optrData[parseInt(p.toString(),10)].text);else i=this.optrData[0].text;return i},a.prototype.getFlOperator=function(){return this.dropOptr.value},a.prototype.destroyDropDownList=function(){this.dropOptr.isDestroyed||(this.dropOptr.removeEventListener(Ot,this.ddOpen),this.dropOptr.destroy(),this.parent.off(Bt,this.destroyDropDownList),this.parent.off(Ie,this.destroyDropDownList))},a}(),sv=function(){function a(e,t,i){this.parent=e,this.serLocator=t,this.filterSettings=i,this.parent&&(this.parent.on(Bt,this.destroy,this),this.parent.on(Ie,this.destroy,this))}return a.prototype.create=function(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"strui-"+e.column.uid}),e.target.appendChild(this.instance),this.dialogObj=e.dialogObj,this.processDataOperation(e)},a.prototype.processDataOperation=function(e){var t=this;if(e.column.isForeignColumn()){this.parent.getDataModule().dataManager.executeQuery(this.parent.getDataModule().generateQuery(!0)).then(function(i){t.getAutoCompleteOptions(e,i)});return}this.getAutoCompleteOptions(e)},a.prototype.getAutoCompleteOptions=function(e,t){var i=e.column.isForeignColumn(),r;if(i){for(var n=en.getDistinct(t.result,e.column.field).records||[],s=void 0,o=0;o<n.length;o++)s?s=s.or(e.column.field,"contains",n[parseInt(o.toString(),10)][e.column.field],this.parent.filterSettings.enableCaseSensitivity,this.parent.filterSettings.ignoreAccent):s=new pe(e.column.field,"contains",n[parseInt(o.toString(),10)][e.column.field],this.parent.filterSettings.enableCaseSensitivity,this.parent.filterSettings.ignoreAccent);r=new re().where(s),r.params=this.parent.query.params}var l=i?e.column.dataSource:this.parent.dataSource,h={value:i?e.column.foreignKeyValue:e.column.field},p=new ip(P({dataSource:l instanceof q?l:new q(l),fields:h,locale:this.parent.locale,enableRtl:this.parent.enableRtl,query:i?r:this.parent.getDataModule().generateQuery(!0,!0),sortOrder:"Ascending",cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:e.localizeText.getConstant("EnterValue"),actionBegin:function(){if(this.query.queries.length&&this.query.queries[0].fn==="onWhere"&&this.query.queries[0].e&&this.query.queries[0].e.predicates){for(var g=0;g<this.query.queries[0].e.predicates.length;g++)this.properties.fields.value===this.query.queries[0].e.predicates[""+g].field&&(this.query.queries[0].e.predicates.splice(g,1),g=g-1);this.query.queries[0].e.predicates.length||this.query.queries.splice(0,1)}}},e.column.filter.params));if(this.acFocus=this.focus(p,e),this.acComplete=this.actionComplete(p),this.acOpen=this.openPopup.bind(this),p.addEventListener(qr,this.acFocus),p.addEventListener(Ot,this.acOpen),p.addEventListener(ce,this.acComplete),l&&"result"in l){var c=this.parent.getQuery?this.parent.getQuery().clone():new re,d=jo({requestType:"stringfilterrequest"},c);this.parent.trigger(Mn,d.state);var f=d.deffered;f.promise.then(function(g){p.dataSource=new q(g)})}this.actObj=p,this.actObj.appendTo(this.instance),i&&this.parent.filterModule.filterModule.afterRenderFilterUI()},a.prototype.write=function(e){if(e.filteredValue!==""&&!u(e.filteredValue)){var t=document.querySelector("#strui-"+e.column.uid).ej2_instances[0];t.value=e.filteredValue}},a.prototype.read=function(e,t,i,r){var n=document.querySelector("#strui-"+t.uid).ej2_instances[0];T.isDevice&&(n.hidePopup(),n.focusOut());var s=n.value;(u(s)||s==="")&&(s=null),r.filterByColumn(t.field,i,s,"and",this.parent.filterSettings.enableCaseSensitivity)},a.prototype.openPopup=function(e){Uu(e,this.dialogObj)},a.prototype.focus=function(e,t){return function(){e.filterType=t.getOptrInstance.getFlOperator()}},a.prototype.actionComplete=function(e){return function(t){t.result=t.result.filter(function(i,r,n){return n.map(function(s){return j(e.fields.value,s)}).indexOf(j(e.fields.value,i))===r})}},a.prototype.destroy=function(){!this.actObj||this.actObj.isDestroyed||(this.actObj.removeEventListener(qr,this.acFocus),this.actObj.removeEventListener(Ot,this.acOpen),this.actObj.removeEventListener(ce,this.acComplete),this.actObj.destroy(),this.parent.off(Bt,this.destroy),this.parent.off(Ie,this.destroy))},a}(),av=function(){function a(e,t,i){this.filterSettings=i,this.parent=e,this.serviceLocator=t,this.parent&&(this.parent.on(Bt,this.destroy,this),this.parent.on(Ie,this.destroy,this))}return a.prototype.keyEventHandler=function(e){if(e.keyCode===13||e.keyCode===9){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),this.dispatchEvent(t)}},a.prototype.create=function(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"numberui-"+e.column.uid}),e.target.appendChild(this.instance),this.numericTxtObj=new Do(P({format:typeof e.column.format=="string"||nt(e.column.format)?e.column.format:e.column.format.format,locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("EnterValue"),enableRtl:this.parent.enableRtl},e.column.filter.params)),this.numericTxtObj.appendTo(this.instance)},a.prototype.write=function(e){var t=document.querySelector("#numberui-"+e.column.uid).ej2_instances[0];t.element.addEventListener("keydown",this.keyEventHandler),t.value=e.filteredValue},a.prototype.read=function(e,t,i,r){var n=document.querySelector("#numberui-"+t.uid).ej2_instances[0],s=n.value;r.filterByColumn(t.field,i,s,"and",!0)},a.prototype.destroy=function(){!this.numericTxtObj||this.numericTxtObj.isDestroyed||(this.numericTxtObj.destroy(),this.parent.off(Bt,this.destroy),this.parent.off(Ie,this.destroy))},a}(),ov=function(){function a(e,t,i){this.parent=e,this.serviceLocator=t,this.filterSettings=i,this.parent&&(this.parent.on(Bt,this.destroy,this),this.parent.on(Ie,this.destroy,this))}return a.prototype.create=function(e){var t=e.column.isForeignColumn(),i=t?e.column.dataSource:this.parent.dataSource,r=t?e.column.foreignKeyValue:e.column.field;this.elem=this.parent.createElement("input",{className:"e-flmenu-input",id:"bool-ui-"+e.column.uid}),e.target.appendChild(this.elem),this.dialogObj=e.dialogObj,this.dropInstance=new Sr(P({dataSource:i instanceof q?i:new q(i),query:new re().select(r),fields:{text:r,value:r},placeholder:e.localizeText.getConstant("SelectValue"),cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params)),this.ddOpen=this.openPopup.bind(this),this.ddComplete=this.actionComplete(r),this.dropInstance.addEventListener(Ot,this.ddOpen),this.dropInstance.addEventListener(ce,this.ddComplete),this.dropInstance.appendTo(this.elem)},a.prototype.write=function(e){var t=document.querySelector("#bool-ui-"+e.column.uid).ej2_instances[0];u(e.filteredValue)||(t.value=e.filteredValue)},a.prototype.read=function(e,t,i,r){var n=document.querySelector("#bool-ui-"+t.uid).ej2_instances[0],s=n.value;r.filterByColumn(t.field,i,s,"and",!1)},a.prototype.openPopup=function(e){Uu(e,this.dialogObj)},a.prototype.actionComplete=function(e){return function(t){t.result=A.distinct(t.result,e,!0)}},a.prototype.destroy=function(){!this.dropInstance||this.dropInstance.isDestroyed||(this.dropInstance.removeEventListener(Ot,this.ddOpen),this.dropInstance.removeEventListener(ce,this.ddComplete),this.dropInstance.destroy(),this.parent.off(Bt,this.destroy),this.parent.off(Ie,this.destroy))},a}(),Ma=function(){function a(e,t,i){this.dpOpen=this.openPopup.bind(this),this.parent=e,this.locator=t,this.fltrSettings=i,this.parent&&(this.parent.on(Bt,this.destroy,this),this.parent.on(Ie,this.destroy,this))}return a.prototype.create=function(e){var t=Hs(e.column.format,e.column.type);this.dialogObj=e.dialogObj,this.inputElem=this.parent.createElement("input",{className:"e-flmenu-input",id:"dateui-"+e.column.uid}),e.target.appendChild(this.inputElem),e.column.type==="date"||e.column.type==="dateonly"?this.datePickerObj=new Wn(P({format:t,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params)):e.column.type==="datetime"&&(this.datePickerObj=new Uo(P({format:t,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params))),this.datePickerObj.addEventListener(Ot,this.dpOpen),this.datePickerObj.appendTo(this.inputElem)},a.prototype.write=function(e){var t=document.querySelector("#dateui-"+e.column.uid).ej2_instances[0];t.value=u(e.filteredValue)?null:new Date(e.filteredValue)},a.prototype.read=function(e,t,i,r){var n=document.querySelector("#dateui-"+t.uid).ej2_instances[0],s=n.value;s=u(s)?null:s,r.filterByColumn(t.field,i,s,"and",!0)},a.prototype.openPopup=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},a.prototype.destroy=function(){this.parent.off(Bt,this.destroy),this.parent.off(Ie,this.destroy),!(u(this.datePickerObj)||this.datePickerObj.isDestroyed)&&(this.datePickerObj.removeEventListener(Ot,this.dpOpen),this.datePickerObj.destroy())},a}(),lv=function(){function a(e,t,i,r,n){this.isDialogOpen=!1,this.maxHeight="350px",this.isMenuCheck=!1,this.colTypes={string:sv,number:av,date:Ma,dateonly:Ma,boolean:ov,datetime:Ma},this.parent=e,this.filterSettings=t,this.serviceLocator=i,this.customFilterOperators=r,this.filterObj=n,this.flMuiObj=new nv(this.parent,this.customFilterOperators,this.serviceLocator),this.l10n=this.serviceLocator.getService("localization"),this.menuFilterBase=new en(e)}return a.prototype.clearCustomFilter=function(e){this.clearBtnClick(e)},a.prototype.applyCustomFilter=function(e){this.filterBtnClick(e.col)},a.prototype.openDialog=function(e){this.options=e,this.col=this.parent.getColumnByField(e.field),(u(this.col.filter)||u(this.col.filter.type)||this.col.filter.type==="Menu")&&this.renderDlgContent(e.target,this.col)},a.prototype.closeDialog=function(e){var t=this;if(this.dlgObj){var i=document.getElementById(this.dlgObj.element.id);if(this.dlgObj&&!this.dlgObj.isDestroyed&&i){var r={cancel:!1,column:this.col,target:e,element:i};if(this.parent.notify(Bt,r),r.cancel)return;this.isDialogOpen=!1,this.isMenuCheck&&(this.menuFilterBase.unWireEvents(),this.parent.off(Xr,this.actionComplete),this.isMenuCheck=!1),(this.parent.isReact||this.parent.isVue)&&this.col.filterTemplate&&this.col.filterTemplate instanceof Function?this.parent.clearTemplate(["filterTemplate"],void 0,function(){t.dlgObj.destroy()}):(this.dlgObj.destroy(),se(i))}this.parent.notify(_s,{})}},a.prototype.renderDlgContent=function(e,t){var i={requestType:pu,columnName:t.field,columnType:t.type},r="filterModel";i[""+r]=this,this.parent.trigger(Ae,i);var n=this.parent.createElement("div",{className:"e-flmenu-maindiv",id:t.uid+"-flmenu"});if(this.dlgDiv=this.parent.createElement("div",{className:"e-flmenu",id:t.uid+"-flmdlg"}),this.dlgDiv.setAttribute("aria-label",this.l10n.getConstant("FilterMenuDialogARIA")),this.parent.enableAdaptiveUI){var s=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv");s.appendChild(this.dlgDiv)}else this.parent.element.appendChild(this.dlgDiv);this.dlgObj=new Cr({showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,created:this.dialogCreated.bind(this,e,t),position:this.parent.element.classList.contains("e-device")?{X:"center",Y:"center"}:{X:"",Y:""},target:this.parent.element.classList.contains("e-device")?document.body:this.parent.element,buttons:[{click:this.filterBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("FilterButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-flmenu-okbtn "+this.parent.cssClass:"e-flmenu-okbtn"}},{click:this.clearBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("ClearButton"),cssClass:this.parent.cssClass?"e-flmenu-cancelbtn "+this.parent.cssClass:"e-flmenu-cancelbtn"}}],content:n,width:!u(x(e,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,animationSettings:{effect:"None"},cssClass:this.parent.cssClass?"e-filter-popup "+this.parent.cssClass:"e-filter-popup"});var o="isStringTemplate";this.dlgObj[""+o]=!0,this.renderResponsiveDialog(),this.dlgObj.appendTo(this.dlgDiv)},a.prototype.renderResponsiveDialog=function(){var e=this.parent;e.enableAdaptiveUI&&(this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.buttons=[{}])},a.prototype.dialogCreated=function(e,t){!T.isDevice&&e&&ju(e,this.dlgObj),this.currentDialogCreatedColumn=t,this.renderFilterUI(e,t),t.isForeignColumn()&&!(!u(t.filter)&&!u(t.filter.ui)&&!u(t.filter.ui.create))||this.afterRenderFilterUI();var i=this.parent.isReact&&typeof t.filterTemplate!="string",r=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;!u(t.filterTemplate)&&!(i||r)?(this.dlgDiv.querySelector(".e-flmenu-valuediv").firstElementChild.focus(),this.dlgDiv.querySelector(".e-flmenu-valuediv").firstElementChild.classList.add("e-input-focus")):u(this.dlgDiv.querySelector(".e-flmenu-input"))||(this.dlgDiv.querySelector(".e-flmenu-input").focus(),this.dlgDiv.querySelector(".e-flmenu-input").parentElement.classList.add("e-input-focus"))},a.prototype.afterRenderFilterUI=function(){var e=this.currentDialogCreatedColumn;e.showColumnMenu&&this.parent.notify(Lo,{}),this.parent.enableAdaptiveUI?(this.dlgObj.element.style.left="0px",this.dlgObj.element.style.maxHeight="none"):this.dlgObj.element.style.maxHeight=this.maxHeight,this.dlgObj.show();var t=this.dlgObj.element.querySelector(".e-flm_optrdiv").querySelector("input"),i=this.dlgObj.element.querySelector(".e-flmenu-valuediv").querySelector("input");t.value==="Empty"||t.value==="Not Empty"||t.value==="Null"||t.value==="Not Null"?u(i.ej2_instances)?i.setAttribute("disabled","true"):i.ej2_instances[0].enabled=!1:u(i&&i.getAttribute("disabled"))||(u(i.ej2_instances)?i.removeAttribute("disabled"):i.ej2_instances[0].enabled=!0),e.filterTemplate||this.writeMethod(e,this.dlgObj.element.querySelector("#"+e.uid+"-flmenu"));var r={requestType:uu,columnName:e.field,columnType:e.type},n="filterModel";r[""+n]=this,this.isDialogOpen=!0,this.isMenuCheck||this.parent.trigger(ce,r)},a.prototype.renderFilterUI=function(e,t){var i=this.dlgObj.element.querySelector(".e-flmenu-maindiv");this.parent.log("column_type_missing",{column:t}),this.renderOperatorUI(i,e,t),this.renderFlValueUI(i,e,t)},a.prototype.renderOperatorUI=function(e,t,i){this.flMuiObj.renderOperatorUI(e,t,i,this.dlgObj,this.filterObj.menuOperator)},a.prototype.renderFlValueUI=function(e,t,i){var r=this.parent.createElement("div",{className:"e-flmenu-valuediv"}),n=this.filterObj;e.appendChild(r);var s=new this.colTypes[i.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(i.filterTemplate){var o={},l="value";o[i.field]=o[""+l]=n.values[i.field],i.foreignKeyValue&&(o[i.foreignKeyValue]=n.values[i.field],o[i.field]=void 0);var h="column";o[""+h]=i;var p=this.parent.isReact&&typeof i.filterTemplate!="string",c=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,d=this.parent.element.id+i.uid+"filterTemplate";if(p||c)i.getFilterTemplate()(o,this.parent,"filterTemplate",d,null,null,r),this.parent.renderTemplates();else{var f=i.getFilterTemplate()(o,this.parent,"filterTemplate",d,null,null,null,this.parent.root);$e(r,f)}this.isMenuCheck&&(this.menuFilterBase.cBox=this.dlgObj.element.querySelector(".e-checkboxlist.e-fields"),this.menuFilterBase.wireEvents(),this.parent.on(Xr,this.actionComplete,this),this.menuFilterBase.getAllData())}else if(!u(i.filter)&&!u(i.filter.ui)&&!u(i.filter.ui.create)){var g=i.filter.ui.create;typeof g=="string"&&(g=j(g,window)),g({column:i,target:r,getOptrInstance:this.flMuiObj,dialogObj:this.dlgObj})}else s.create({column:i,target:r,getOptrInstance:this.flMuiObj,localizeText:this.l10n,dialogObj:this.dlgObj})},a.prototype.writeMethod=function(e,t){for(var i,r=t.querySelector(".e-flmenu-valinput"),n=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings),s=this.filterSettings.columns,o=0,l=s;o<l.length;o++){var h=l[o];e.uid===h.uid&&(i=h.value)}if(!u(e.filter)&&!u(e.filter.ui)&&!u(e.filter.ui.write)){var p=e.filter.ui.write;typeof p=="string"&&(p=j(p,window)),p({column:e,target:r,parent:this.parent,filteredValue:i})}else n.write({column:e,target:r,parent:this.parent,filteredValue:i})},a.prototype.filterBtnClick=function(e){var t=this.dlgObj.element.querySelector(".e-flmenu-valuediv input"),i=this.flMuiObj.getFlOperator(),r=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(e.filterTemplate){var n=this.dlgDiv.querySelector(".e-flmenu-valuediv"),s=void 0;if(n.children[0].value)s=n.children[0].value;else if(!u(n.children[0].ej2_instances))s=(this.parent.isAngular?n.children[0]:n.querySelector("input")).ej2_instances[0].value;else{var o=n.querySelector(".e-control");u(o)||(s=e.type==="boolean"?o.checked:u(o.ej2_instances)?o.value:o.ej2_instances[0].value)}this.filterObj.filterByColumn(e.field,i,s)}else if(!u(e.filter)&&!u(e.filter.ui)&&!u(e.filter.ui.read)){var l=e.filter.ui.read;typeof l=="string"&&(l=j(l,window)),l({element:t,column:e,operator:i,fltrObj:this.filterObj})}else r.read(t,e,i,this.filterObj);this.closeDialog(),this.parent.showColumnMenu&&this.parent.notify(ku,{})},a.prototype.closeResponsiveDialog=function(){this.closeDialog()},a.prototype.clearBtnClick=function(e){this.filterObj.removeFilteredColsByField(e.field),this.closeDialog()},a.prototype.destroy=function(){this.closeDialog()},a.prototype.getFilterUIInfo=function(){return{field:this.col.field,operator:this.flMuiObj.getFlOperator()}},a.prototype.renderCheckBoxMenu=function(){return this.isMenuCheck=!0,this.menuFilterBase.updateModel(this.options),this.menuFilterBase.getAndSetChkElem(this.options),this.dlgObj.buttons=[{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{content:this.menuFilterBase.getLocalizedLabel("FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{cssClass:"e-flat",content:this.menuFilterBase.getLocalizedLabel("ClearButton")}}],this.menuFilterBase.dialogObj=this.dlgObj,this.menuFilterBase.dlg=this.dlgObj.element,this.menuFilterBase.dlg.classList.add("e-menucheckbox"),this.menuFilterBase.dlg.classList.remove("e-checkboxfilter"),this.maxHeight="800px",this.menuFilterBase.sBox.innerHTML},a.prototype.actionComplete=function(e){this.isMenuCheck&&this.parent.trigger(ce,e)},a}(),sp=function(){function a(e,t,i){this.parent=e,this.isresetFocus=!0,this.checkBoxBase=new en(e),this.addEventListener()}return a.prototype.destroy=function(){this.removeEventListener(),this.checkBoxBase.closeDialog()},a.prototype.openDialog=function(e){this.checkBoxBase.openDialog(e),this.parent.log("column_type_missing",{column:e.column})},a.prototype.closeDialog=function(){this.destroy(),this.isresetFocus&&this.parent.notify(zn,{})},a.prototype.closeResponsiveDialog=function(){this.checkBoxBase.closeDialog()},a.prototype.getModuleName=function(){return"checkboxFilter"},a.prototype.actionBegin=function(e){this.parent.trigger(Ae,e)},a.prototype.actionComplete=function(e){this.parent.trigger(ce,e)},a.prototype.actionPrevent=function(e){qi(this.parent)&&(this.parent.notify(Jt,e),e.cancel=!0)},a.prototype.clearCustomFilter=function(e){this.checkBoxBase.clearFilter(e)},a.prototype.applyCustomFilter=function(){this.checkBoxBase.fltrBtnHandler(),this.checkBoxBase.closeDialog()},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(to,this.actionBegin,this),this.parent.on(Xr,this.actionComplete,this),this.parent.on(Fn,this.actionPrevent,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(to,this.actionBegin),this.parent.off(Xr,this.actionComplete),this.parent.off(Fn,this.actionPrevent))},a}(),hv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),uv=function(a){hv(e,a);function e(t,i,r,n){var s=a.call(this,t,i,r)||this;return s.parent=t,s.isresetFocus=!0,s.excelFilterBase=new Ym(t,n),s}return e.prototype.destroy=function(){this.excelFilterBase.closeDialog()},e.prototype.openDialog=function(t){this.excelFilterBase.openDialog(t)},e.prototype.closeDialog=function(){this.excelFilterBase.closeDialog(),this.isresetFocus&&this.parent.notify(zn,{})},e.prototype.clearCustomFilter=function(t){this.excelFilterBase.clearFilter(t)},e.prototype.closeResponsiveDialog=function(t){t?this.excelFilterBase.removeDialog():this.closeDialog()},e.prototype.applyCustomFilter=function(t){t.isCustomFilter?this.excelFilterBase.filterBtnClick(t.col.field):(this.excelFilterBase.fltrBtnHandler(),this.excelFilterBase.closeDialog())},e.prototype.filterByColumn=function(t,i,r,n,s,o,l,h){this.excelFilterBase.filterByColumn(t,i,r,n,s,o,l,h)},e.prototype.getFilterUIInfo=function(){return this.excelFilterBase.getFilterUIInfo()},e.prototype.getModuleName=function(){return"excelFilter"},e}(sp),pv=function(){function a(e,t,i){this.predicate="and",this.contentRefresh=!0,this.filterByMethod=!0,this.refresh=!0,this.values={},this.operators={},this.cellText={},this.nextFlMenuOpen="",this.type={Menu:lv,CheckBox:sp,Excel:uv},this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.fltrDlgDetails={field:"",isOpen:!1},this.skipNumberInput=["="," ","!"],this.skipStringInput=[">","<","="],this.actualPredicate={},this.parent=e,this.filterSettings=t,this.serviceLocator=i,this.addEventListener(),this.setFullScreenDialog()}return a.prototype.render=function(e){if(!A.getObject("args.isFrozen",e)){var t=this.parent;if(this.l10n=this.serviceLocator.getService("localization"),this.getLocalizedCustomOperators(),this.parent.filterSettings.type==="FilterBar"&&t.columns.length){var i=this.parent.element.querySelector(".e-filterbar");i&&se(i);var r=new Wi(this.serviceLocator,Q.Filter,t),n=this.serviceLocator.getService("cellRendererFactory");n.addCellRenderer(Q.Filter,new rv(this.parent,this.serviceLocator)),this.valueFormatter=this.serviceLocator.getService("valueFormatter"),r.element=this.parent.createElement("tr",{className:"e-filterbar",attrs:{role:"row"}});var s=this.generateRow();s.data=this.values,this.parent.getHeaderContent().querySelector("thead:not(.e-masked-thead)").appendChild(r.element);var o=this.parent.element.querySelector(".e-rowdragheader");if(this.element=r.render(s,t.getColumns(),null,null,r.element),this.element.querySelectorAll(".e-leftfreeze").length&&(this.element.querySelectorAll(".e-indentcell").length||this.element.querySelectorAll(".e-grouptopleftcell").length))for(var l=this.element.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),h=0;h<l.length;h++)l[parseInt(h.toString(),10)].classList.add("e-leftfreeze"),Re(l[parseInt(h.toString(),10)],h*30,this.parent.enableRtl,"Left");yr(this.element);var p=this.element.querySelector(".e-detailheadercell");p&&(p.className="e-filterbarcell e-mastercell"),o&&(o.classList.contains("e-leftfreeze")?o.className="e-dragheadercell e-mastercell e-leftfreeze":o.className="e-filterbarcell e-mastercell");var c=[].slice.call(this.element.getElementsByClassName("e-grouptopleftcell"));c.length&&c[c.length-1].classList.add("e-lastgrouptopleftcell"),this.wireEvents(),this.parent.notify(dr,{case:"filter"})}}},a.prototype.showCustomFilter=function(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog(this.column)},a.prototype.renderResponsiveChangeAction=function(e){this.responsiveDialogRenderer.action=e.action},a.prototype.setFilterModel=function(e){var t=e.filter.type||this.parent.filterSettings.type;this.filterModule=new this.type[""+t](this.parent,this.parent.filterSettings,this.serviceLocator,this.customOperators,this)},a.prototype.destroy=function(){var e=this.parent.element;if(!(!e||!e.querySelector("."+pt)&&!e.querySelector("."+ot))){if(this.filterModule&&this.filterModule.destroy(),!this.parent.refreshing&&(this.parent.isDestroyed||!this.parent.allowFiltering)&&(this.filterSettings.columns=[]),this.updateFilterMsg(),this.removeEventListener(),this.unWireEvents(),this.filterSettings.type==="FilterBar"&&!this.parent.isDestroyed){if(this.filterSettings.showFilterBarOperator)for(var t=[].slice.call(this.element.getElementsByClassName("e-filterbaroperator")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].ej2_instances[0]&&t[parseInt(i.toString(),10)].ej2_instances[0].destroy();this.parent.getColumns().map(function(n){if(n.filterBarTemplate&&!u(n.filterBarTemplate.destroy)){var s=n.filterBarTemplate.destroy;typeof s=="string"&&(s=j(s,window)),s()}})}if(this.element){this.element.parentElement&&se(this.element);var r=this.parent.getHeaderContent().querySelector(".e-filterbar");r&&se(r)}}},a.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,oe.isFilter)},a.prototype.generateRow=function(){var e={},t=new bi(e);return t.cells=this.generateCells(),t},a.prototype.generateCells=function(){var e=[];if(this.parent.allowGrouping)for(var t=0,i=this.parent.groupSettings.columns.length;t<i;t++)e.push(this.generateCell({},Q.HeaderIndent));(this.parent.detailTemplate||this.parent.childGrid)&&e.push(this.generateCell({},Q.DetailHeader)),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&e.push(this.generateCell({},Q.RowDragHIcon));for(var r=0,n=this.parent.getColumns();r<n.length;r++){var s=n[r];e.push(this.generateCell(s))}return this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&e.push(this.generateCell({},Q.RowDragHIcon)),e},a.prototype.generateCell=function(e,t){var i={visible:e.visible,isDataCell:!1,rowId:"",column:e,cellType:t||Q.Filter,attributes:{title:this.l10n.getConstant("FilterbarTitle")}};return new Si(i)},a.prototype.updateModel=function(){var e=this.column.isForeignColumn()?this.parent.getColumnByUid(this.column.uid):this.parent.getColumnByField(this.fieldName);this.filterObjIndex=this.getFilteredColsIndexByField(e),this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex];for(var t=Array.isArray(this.value)?this.value:[this.value],i=this.parent.dataSource.adaptor&&this.parent.dataSource.adaptor.getModuleName?this.parent.dataSource.adaptor.getModuleName():void 0,r=0,n=t.length;r<n;r++){var s=e.isForeignColumn()?e.foreignKeyValue:this.fieldName,o=this.operator==="notequal";this.currentFilterObject={field:s,uid:e.uid,isForeignKey:e.isForeignColumn(),operator:this.operator,value:t[parseInt(r.toString(),10)],predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}};var l=this.getFilteredColsIndexByField(e);if(l>-1&&!Array.isArray(this.value)?this.filterSettings.columns[parseInt(l.toString(),10)]=this.currentFilterObject:this.filterSettings.columns.push(this.currentFilterObject),!this.column.isForeignColumn()&&u(this.value)&&(this.operator==="equal"||this.operator==="notequal")&&i!=="ODataAdaptor"&&i!=="ODataV4Adaptor"){for(var h=0;h<this.filterSettings.columns.length;h++)this.filterSettings.columns[""+h].field===s&&(this.filterSettings.columns[""+h].operator==="equal"||this.filterSettings.columns[""+h].operator==="notequal")&&u(this.filterSettings.columns[""+h].value)&&(this.filterSettings.columns.splice(h,1),h=h-1);e.type==="string"&&this.filterSettings.columns.push({field:s,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:""}),this.filterSettings.columns.push({field:s,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:void 0}),this.filterSettings.columns.push({field:s,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:null})}}this.filterSettings.columns=this.filterSettings.columns,this.parent.dataBind()},a.prototype.getFilteredColsIndexByField=function(e){for(var t=this.filterSettings.columns,i=0,r=t.length;i<r;i++)if(t[parseInt(i.toString(),10)].uid===e.uid||e.isForeignColumn()&&this.parent.getColumnByUid(e.uid).field===e.foreignKeyValue)return i;return-1},a.prototype.onActionComplete=function(e){var t=this.isRemove?{requestType:"filtering",type:ce}:{currentFilterObject:this.currentFilterObject,currentFilteringColumn:u(this.column)?void 0:this.column.field,columns:this.filterSettings.columns,requestType:"filtering",type:ce};this.parent.trigger(ce,P(e,t)),this.isRemove=!1},a.prototype.wireEvents=function(){S.add(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate,this)},a.prototype.unWireEvents=function(){S.remove(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate)},a.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.parent.getHeaderTable().classList.add("e-sortfilter"),this.render())},a.prototype.refreshFilterValue=function(){u(this.parent.modelObserver.boundedEvents)||this.parent.removeEventListener(Ds,this.refreshFilterValueFn),this.filterSettings.type==="FilterBar"&&this.filterSettings.columns.length&&!this.parent.getCurrentViewRecords().length&&this.initialEnd()},a.prototype.initialEnd=function(){if(this.parent.off(je,this.initialEnd),this.parent.getColumns().length&&this.filterSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.initialLoad=!0;for(var t=0,i=e.filterSettings.columns;t<i.length;t++){var r=i[t];this.filterByColumn(r.field,r.operator,r.value,r.predicate,r.matchCase,r.ignoreAccent,r.actualFilterValue,r.actualOperator,r.isForeignKey)}this.initialLoad=!1,this.updateFilterMsg(),this.contentRefresh=!0}},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(fr,this.setFullScreenDialog,this),this.parent.on(qe,this.enableAfterRender,this),this.parent.on(sl,this.onActionComplete,this),this.parent.on(vt,this.onPropertyChanged,this),this.parent.on(at,this.keyUpHandler,this),this.parent.on(Rn,this.columnPositionChanged,this),this.parent.on(It,this.render,this),this.parent.on(je,this.initialEnd,this),this.parent.on(Bt,this.filterMenuClose,this),this.parent.on(Ni,this.renderResponsiveChangeAction,this),this.docClickHandler=this.clickHandler.bind(this),S.add(document,"click",this.docClickHandler,this),S.add(this.parent.element,"mousedown",this.refreshClearIcon,this),this.parent.on(pl,this.columnMenuFilter,this),this.parent.on(Ut,this.filterIconClickHandler,this),this.parent.on("persist-data-changed",this.initialEnd,this),this.parent.on(ro,this.clickHandler,this),this.parent.on(Ie,this.destroy,this),this.refreshFilterValueFn=this.refreshFilterValue.bind(this),this.parent.addEventListener(Ds,this.refreshFilterValueFn))},a.prototype.removeEventListener=function(){S.remove(document,"click",this.docClickHandler),S.remove(this.parent.element,"mousedown",this.refreshClearIcon),!this.parent.isDestroyed&&(this.parent.off(fr,this.setFullScreenDialog),this.parent.off(qe,this.enableAfterRender),this.parent.off(sl,this.onActionComplete),this.parent.off(vt,this.onPropertyChanged),this.parent.off(at,this.keyUpHandler),this.parent.off(Rn,this.columnPositionChanged),this.parent.off(It,this.render),this.parent.off(pl,this.columnMenuFilter),this.parent.off(Bt,this.filterMenuClose),this.parent.off(Ni,this.renderResponsiveChangeAction),this.parent.off(Ut,this.filterIconClickHandler),this.parent.off(ro,this.clickHandler),this.parent.off(Ie,this.destroy))},a.prototype.refreshClearIcon=function(e){if(this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"&&e.target.closest("th")&&e.target.closest("th").classList.contains("e-filterbarcell")&&e.target.classList.contains("e-clear-icon")){var t=e.target.previousElementSibling;G.setValue(null,t,"Never",!0),this.filterSettings.mode==="Immediate"&&this.removeFilteredColsByField(t.id.slice(0,-14))}},a.prototype.filterMenuClose=function(){this.fltrDlgDetails.isOpen=!1},a.prototype.filterByColumn=function(e,t,i,r,n,s,o,l,h){var p=this,c=this.parent,d;if(typeof i=="string"&&(i=$r.sanitize(i)),this.column=c.grabColumnByFieldFromAllCols(e,h),this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator&&u(this.column.filterBarTemplate)&&u(this.column.filterTemplate)&&(t=this.getOperatorName(e)),t==="like"&&i&&i.indexOf("%")===-1&&(i="%"+i+"%"),!!this.column){if(this.filterSettings.type==="FilterBar"&&(d=c.getHeaderContent().querySelector("[id='"+this.column.field+"_filterBarcell']")),!u(this.column.allowFiltering)&&!this.column.allowFiltering){this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:this.column.headerText});return}if(qi(c)){c.notify(Jt,{instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:i,arg4:r,arg5:n,arg6:s,arg7:o,arg8:l});return}if(this.predicate=r||(Array.isArray(i)?"or":"and"),this.value=i,this.matchCase=n||!1,this.ignoreAccent=this.ignoreAccent=u(s)?this.parent.filterSettings.ignoreAccent:s,this.fieldName=e,this.operator=t,i=u(i)?i:i.toString(),i===""&&(i=null),(this.column.type==="number"||this.column.type==="date")&&(this.matchCase=!0),d&&this.filterSettings.type==="FilterBar"){if(i&&i.length<1||!this.filterByMethod&&this.checkForSkipInput(this.column,i)){this.filterStatusMsg=i&&i.length<1?"":this.l10n.getConstant("InvalidFilterMessage"),this.updateFilterMsg();return}d.value!==i&&(d.value=i)}u(this.column.format)?this.values[this.column.field]=i:(this.applyColumnFormat(i),this.initialLoad&&this.filterSettings.type==="FilterBar"&&(d.value=this.values[this.column.field]));var f={field:this.fieldName,predicate:r,matchCase:n,ignoreAccent:s,operator:this.operator,value:this.value,type:this.column.type},g=this.parent.filterSettings.columns.filter(function(m){return m.field===p.fieldName});g.length>1&&!u(this.actualPredicate[this.fieldName])?this.actualPredicate[this.fieldName].push(f):this.actualPredicate[this.fieldName]=[f],!this.checkAlreadyColFiltered(this.column.field)&&this.updateModel()}},a.prototype.applyColumnFormat=function(e){var t=this,i=this.column.type==="date"||this.column.type==="datetime"||this.column.type==="dateonly"?new Date(e):parseFloat(e);(this.column.type==="date"||this.column.type==="datetime"||this.column.type==="dateonly")&&e&&Array.isArray(this.value)&&e.split(",").length>1?this.values[this.column.field]=e.split(",").map(function(r){return r===""&&(r=null),t.setFormatForFlColumn(new Date(r),t.column)}):this.values[this.column.field]=this.setFormatForFlColumn(i,this.column)},a.prototype.skipUid=function(e){for(var t=!0,i=Object.keys(e),r=0;r<i.length;r++){var n=Object.keys(e[i[parseInt(r.toString(),10)]]);n.length===1&&n[0]==="uid"&&(t=!1)}return t},a.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,i=Object.keys(e.properties);t<i.length;t++){var r=i[t];switch(r){case"columns":var n="columns",s={currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column?this.column.field:void 0,action:"filter",columns:this.filterSettings.columns,requestType:"filtering",type:Ae,cancel:!1};if(this.contentRefresh&&this.skipUid(e.properties[""+n])){if(this.parent.notify(qt,s),s.cancel){if(this.filterSettings.type==="CheckBox"||this.filterSettings.type==="Excel"){this.filterSettings.columns=this.actualData.length<=1?this.checkboxPrevFilterObject:this.checkboxFilterObject,this.actualPredicate[this.column.field]=this.filterSettings.columns;var o=this.parent.getColumnByField(this.column.field),l=this.parent.showColumnMenu&&o.showColumnMenu?".e-columnmenu":".e-icon-filter",h=this.parent.getColumnHeaderByField(this.column.field).querySelector(l);this.checkboxPrevFilterObject.length===0?h.classList.remove("e-filtered"):h.classList.add("e-filtered")}else u(this.prevFilterObject)?this.filterSettings.columns.splice(this.filterSettings.columns.length-1,1):this.filterSettings.columns[this.filterObjIndex]=this.prevFilterObject;return}this.updateFilterIcon(),this.refreshFilterSettings(),this.updateFilterMsg(),this.updateFilter()}break;case"showFilterBarStatus":e.properties[""+r]?this.updateFilterMsg():this.parent.allowPaging&&this.parent.updateExternalMessage("");break;case"showFilterBarOperator":case"type":this.parent.refreshHeader(),this.refreshFilterSettings(),this.parent.height==="100%"&&this.parent.scrollModule.refresh();break}}},a.prototype.refreshFilterSettings=function(){if(this.filterSettings.type==="FilterBar"){for(var e=0;e<this.filterSettings.columns.length;e++){this.column=this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[parseInt(e.toString(),10)].uid);var t=this.filterSettings.columns[parseInt(e.toString(),10)].value;if(t=!u(t)&&t.toString(),!u(this.column.format))this.applyColumnFormat(t);else{var i=this.filterSettings.columns[parseInt(e.toString(),10)].field;this.values[""+i]=this.filterSettings.columns[parseInt(e.toString(),10)].value}var r=this.getFilterBarElement(this.column.field);r&&(this.cellText[this.filterSettings.columns[parseInt(e.toString(),10)].field]!==""&&!u(this.cellText[this.filterSettings.columns[parseInt(e.toString(),10)].field])?r.value=this.cellText[this.column.field]:r.value=this.filterSettings.columns[parseInt(e.toString(),10)].value)}if(this.filterSettings.columns.length===0)for(var n=this.parent.getColumns(),e=0;e<n.length;e++){var r=this.getFilterBarElement(n[parseInt(e.toString(),10)].field);r&&r.value!==""&&(r.value="",delete this.values[n[parseInt(e.toString(),10)].field])}}},a.prototype.updateFilterIcon=function(){if(this.filterSettings.columns.length===0&&this.parent.element.querySelector(".e-filtered"))for(var e=[].slice.call(this.parent.element.getElementsByClassName("e-filtered")),t=0,i=e.length;t<i;t++)e[parseInt(t.toString(),10)].classList.remove("e-filtered")},a.prototype.getFilterBarElement=function(e){var t="[id='"+e+"_filterBarcell']",i;return t&&!u(this.element)&&(i=this.element.querySelector(t)),i},a.prototype.refreshFilter=function(){this.refreshFilterSettings(),this.updateFilterMsg()},a.prototype.clearFiltering=function(e){var t=this,i=Ho(this.filterSettings.columns);if(!u(e)){this.refresh=!1,e.forEach(function(h){t.removeFilteredColsByField(h,!1)}),this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.parent.renderModule.refresh(),this.refresh=!0;return}if(qi(this.parent)){this.parent.notify(Jt,{instance:this,handler:this.clearFiltering});return}for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].uid=i[parseInt(r.toString(),10)].uid||this.parent.getColumnByField(i[parseInt(r.toString(),10)].field).uid;var n=i.map(function(h){return h.uid}),s=n.filter(function(h,p){return n.indexOf(h)===p});this.refresh=!1;for(var r=0,o=s.length;r<o;r++)this.removeFilteredColsByField(this.parent.getColumnByUid(s[parseInt(r.toString(),10)]).field,!1);if(this.refresh=!0,s.length&&this.parent.renderModule.refresh(),this.parent.filterSettings.columns.length===0&&this.parent.element.querySelector(".e-filtered"))for(var l=[].slice.call(this.parent.element.getElementsByClassName("e-filtered")),r=0,o=l.length;r<o;r++)l[0].classList.remove("e-filtered");this.isRemove=!0,this.filterStatusMsg="",this.updateFilterMsg()},a.prototype.checkAlreadyColFiltered=function(e){for(var t=this.filterSettings.columns,i=0,r=t;i<r.length;i++){var n=r[i];if(n.field===e&&this.parent.filterSettings.type==="Menu"&&(n.type==="date"||n.type==="datetime"))return this.checkDateColumnValue(n.value,this.value)&&n.operator===this.operator&&n.predicate===this.predicate;if(n.field===e&&n.value===this.value&&n.operator===this.operator&&n.predicate===this.predicate)return!0}return!1},a.prototype.checkDateColumnValue=function(e,t){return u(e)&&u(t)?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!1},a.prototype.columnMenuFilter=function(e){this.column=e.col;var t=M(e.target,"#"+e.id);e.isClose&&!t?this.filterModule.closeDialog():t&&this.filterDialogOpen(this.column,e.target)},a.prototype.filterDialogOpen=function(e,t,i,r){this.filterModule&&(this.filterModule.isresetFocus=!1,this.filterModule.closeDialog()),this.setFilterModel(e),this.filterModule.openDialog(this.createOptions(e,t,i,r))},a.prototype.createOptions=function(e,t,i,r){var n=this.parent,s=e.filter.dataSource||n.dataSource&&"result"in n.dataSource?n.dataSource:n.getDataModule().dataManager,o=e.filter.type||this.parent.filterSettings.type,l={type:e.type,field:e.field,displayName:e.headerText,dataSource:s,format:e.format,height:800,columns:n.getColumns(),filteredColumns:n.filterSettings.columns,target:t,dataManager:n.getDataModule().dataManager,formatFn:e.getFormatter(),ignoreAccent:n.filterSettings.ignoreAccent,parserFn:e.getParser(),query:n.query,template:e.getFilterItemTemplate(),hideSearchbox:u(e.filter.hideSearchbox)?!1:e.filter.hideSearchbox,handler:this.filterHandler.bind(this),localizedStrings:n.getLocaleConstants(),position:{X:i,Y:r},column:e,foreignKeyValue:e.foreignKeyValue,actualPredicate:this.actualPredicate,localeObj:n.localeObj,isRemote:n.getDataModule().isRemote(),allowCaseSensitive:this.filterSettings.enableCaseSensitivity,isResponsiveFilter:this.parent.enableAdaptiveUI,operator:this.actualPredicate[e.field]&&o==="Menu"?this.actualPredicate[e.field][0].operator:"equal",parentTotalDataCount:n.getDataModule().isRemote()&&n.allowPaging?n.pagerModule.pagerObj.totalRecordsCount:n.getDataModule().isRemote()?n.totalDataRecordsCount:n.getFilteredRecords().length,parentCurrentViewDataCount:n.currentViewData.length,parentFilteredLocalRecords:n.getDataModule().isRemote()?[]:n.getFilteredRecords()};return l},a.prototype.removeFilteredColsByField=function(e,t){var i,r=this.filterSettings.columns;if(qi(this.parent)){var n={instance:this,handler:this.removeFilteredColsByField,arg1:e,arg2:t};this.parent.notify(Jt,n);return}var s=r.map(function(g){return g.uid}),o=s.filter(function(g,m){return s.indexOf(g)===m});if(!u(this.column)){var l=this.column.isForeignColumn()?this.parent.getColumnByUid(this.column.uid):this.parent.getColumnByField(e);this.filterObjIndex=this.getFilteredColsIndexByField(l),this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex]}for(var h=function(g,m){r[parseInt(g.toString(),10)].uid=r[parseInt(g.toString(),10)].uid||p.parent.getColumnByField(r[parseInt(g.toString(),10)].field).uid;var v=r.length,y=p.parent.grabColumnByUidFromAllCols(o[parseInt(g.toString(),10)]);if(y.field===e||y.field===y.foreignKeyValue&&y.isForeignColumn()){var w=p.filterSettings.columns.filter(function(D){return D.uid===y.uid})[0];if(p.filterSettings.type==="FilterBar"&&!t){var b="[id='"+y.field+"_filterBarcell']";i=p.parent.getHeaderContent().querySelector(b),i&&(i.value="",delete p.values[""+e])}for(;v--;)r[parseInt(v.toString(),10)].uid===y.uid&&r.splice(v,1);var I=p.parent.getColumnHeaderByField(y.field);if(p.filterSettings.type!=="FilterBar"||p.parent.showColumnMenu){var k=p.parent.showColumnMenu&&y.showColumnMenu?".e-columnmenu":".e-icon-filter";I.querySelector(k).classList.remove("e-filtered")}return p.isRemove=!0,p.actualPredicate[""+e]&&delete p.actualPredicate[""+e],p.values[""+e]&&delete p.values[""+e],p.refresh&&p.parent.notify(qt,{requestType:"filtering",type:Ae,currentFilterObject:w,currentFilterColumn:y,action:"clearFilter"}),"break"}},p=this,c=0,d=o.length;c<d;c++){var f=h(c);if(f==="break")break}this.updateFilterMsg()},a.prototype.getModuleName=function(){return"filter"},a.prototype.keyUpHandlerImmediate=function(e){e.keyCode!==13&&this.keyUpHandler(e)},a.prototype.keyUpHandler=function(e){var t=this.parent,i=e.target;if(i&&Lp(i,".e-filterbar input")){var r=M(i,"th.e-filterbarcell");if(this.column=t.getColumnByUid(r.getAttribute("e-mappinguid")),!this.column)return;if(e.action==="altDownArrow"&&this.parent.filterSettings.showFilterBarOperator){var n=M(i,"span").querySelector(".e-filterbaroperator");n.ej2_instances[0].showPopup(),n.focus()}(this.filterSettings.mode==="Immediate"||e.keyCode===13&&!e.target.classList.contains("e-filterbaroperator"))&&e.keyCode!==9&&!this.column.filterTemplate&&(this.value=i.value.trim(),this.processFilter(e))}if(e.action==="altDownArrow"&&this.filterSettings.type!=="FilterBar"&&!x(e.target,"e-toolbar")&&u(this.parent.element.querySelector(".e-filter-popup"))){var s=t.focusModule.currentInfo.element;if(s&&s.classList.contains("e-headercell")){var o=t.getColumnByUid(s.firstElementChild.getAttribute("e-mappinguid"));this.openMenuByField(o.field),this.parent.focusModule.clearIndicator()}}e.action==="escape"&&this.filterSettings.type==="Menu"&&this.filterModule&&(this.filterModule.closeDialog(),t.notify(zn,{}))},a.prototype.updateCrossIcon=function(e){e.value.length&&e.nextElementSibling.classList.remove("e-hide")},a.prototype.updateFilterMsg=function(){if(this.filterSettings.type==="FilterBar"){var e=this.parent,t=void 0,i=this.filterSettings.columns,r=void 0;if(!this.filterSettings.showFilterBarStatus)return;if(i.length>0&&this.filterStatusMsg!==this.l10n.getConstant("InvalidFilterMessage")){this.filterStatusMsg="";for(var n=0;n<i.length;n++)if(r=e.grabColumnByUidFromAllCols(i[parseInt(n.toString(),10)].uid)||e.grabColumnByFieldFromAllCols(i[parseInt(n.toString(),10)].field,i[parseInt(n.toString(),10)].isForeignKey),n&&(this.filterStatusMsg+=" && "),u(r.format))this.filterStatusMsg+=r.headerText+": "+this.values[r.field];else{var s=r.type==="date"||r.type==="datetime"||r.type==="dateonly"?this.valueFormatter.fromView(this.values[r.field],r.getParser(),r.type==="dateonly"?"date":r.type):this.values[r.field];if(r.type==="date"||r.type==="datetime"||r.type==="dateonly")t=this.setFormatForFlColumn(s,r);else{var o=this.serviceLocator.getService("valueFormatter");t=o.toView(s,r.getParser()).toString()}this.filterStatusMsg+=r.headerText+": "+t}}e.allowPaging&&(e.updateExternalMessage(this.filterStatusMsg),this.parent.height==="100%"&&this.parent.scrollModule.refresh()),this.filterStatusMsg=""}},a.prototype.setFormatForFlColumn=function(e,t){var i=this.serviceLocator.getService("valueFormatter");return i.toView(e,t.getFormatter()).toString()},a.prototype.checkForSkipInput=function(e,t){var i;if(e.type==="number")(A.operatorSymbols[""+t]||this.skipNumberInput.indexOf(t)>-1)&&(i=!0);else if(e.type==="string")for(var r=0,n=t;r<n.length;r++){var s=n[r];this.skipStringInput.indexOf(s)>-1&&(i=!0)}return i},a.prototype.processFilter=function(e){this.stopTimer(),this.startTimer(e)},a.prototype.startTimer=function(e){var t=this;this.timer=window.setInterval(function(){t.onTimerTick()},e.keyCode===13?0:this.filterSettings.immediateModeDelay)},a.prototype.stopTimer=function(){window.clearInterval(this.timer)},a.prototype.onTimerTick=function(){var e="[id='"+this.column.field+"_filterBarcell']",t=this.element.querySelector(e);t||(t=this.parent.getHeaderContent().querySelector(e));var i;if(this.cellText[this.column.field]=t.value,this.stopTimer(),u(this.column.filterBarTemplate))i=JSON.parse(JSON.stringify(t.value));else{var r=this.column.filterBarTemplate.read;typeof r=="string"&&(r=j(r,window)),u(r)||(this.value=r.call(this,t))}if(u(this.value)||this.value===""){this.removeFilteredColsByField(this.column.field);return}this.validateFilterValue(this.value),this.filterByMethod=!1,this.filterByColumn(this.column.field,this.operator,this.value,this.predicate,this.filterSettings.enableCaseSensitivity,this.ignoreAccent,this.column.isForeignColumn()),this.filterByMethod=!0,t.value=i,this.updateFilterMsg()},a.prototype.validateFilterValue=function(e){var t,i;switch(this.matchCase=this.filterSettings.enableCaseSensitivity,this.column.type){case"number":this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal,t=[">","<","=","!"];for(var r=0;r<e.length;r++)if(t.indexOf(e[parseInt(r.toString(),10)])>-1){i=r;break}this.getOperator(e.substring(i)),i!==0&&(this.value=e.substring(0,i)),this.value!==""&&e.length>=1&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type)),isNaN(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));break;case"date":case"datetime":this.operator=this.filterOperators.equal,this.value!==""&&!(this.value instanceof Date)&&(this.getOperator(e),this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type),u(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")));break;case"string":this.matchCase=!1,this.column.filter.operator?this.operator=this.column.filter.operator:e.indexOf("*")!==-1||e.indexOf("?")!==-1||e.indexOf("%3f")!==-1?this.operator=this.filterOperators.wildCard:e.indexOf("%")!==-1?this.operator=this.filterOperators.like:this.operator=this.filterOperators.startsWith;break;case"boolean":e.toLowerCase()==="true"||e==="1"?this.value=!0:e.toLowerCase()==="false"||e==="0"?this.value=!1:e.length&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")),this.operator=this.filterOperators.equal;break;default:this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal}},a.prototype.getOperator=function(e){var t=e.charAt(0),i=e.slice(0,2),r=P({"=":this.filterOperators.equal,"!":this.filterOperators.notEqual},A.operatorSymbols);(r.hasOwnProperty(t)||r.hasOwnProperty(i))&&(this.operator=r[""+t],this.value=e.substring(1),this.operator||(this.operator=r[""+i],this.value=e.substring(2))),(this.operator===this.filterOperators.lessThan||this.operator===this.filterOperators.greaterThan)&&this.value.charAt(0)==="="&&(this.operator=this.operator+"orequal",this.value=this.value.substring(1))},a.prototype.columnPositionChanged=function(){this.parent.filterSettings.type},a.prototype.getLocalizedCustomOperators=function(){var e=[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}];this.customOperators={stringOperator:[{value:"startswith",text:this.l10n.getConstant("StartsWith")},{value:"endswith",text:this.l10n.getConstant("EndsWith")},{value:"contains",text:this.l10n.getConstant("Contains")},{value:"equal",text:this.l10n.getConstant("Equal")},{value:"isempty",text:this.l10n.getConstant("IsEmpty")},{value:"doesnotstartwith",text:this.l10n.getConstant("NotStartsWith")},{value:"doesnotendwith",text:this.l10n.getConstant("NotEndsWith")},{value:"doesnotcontain",text:this.l10n.getConstant("NotContains")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnotempty",text:this.l10n.getConstant("IsNotEmpty")},{value:"like",text:this.l10n.getConstant("Like")}],numberOperator:e,dateOperator:e,datetimeOperator:e,dateonlyOperator:e,booleanOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}]}},a.prototype.openMenuByField=function(e){var t=this.parent;if(t.enableAdaptiveUI){this.showCustomFilter(!1);return}var i=t.getColumnByField(e),r=t.getColumnHeaderByField(e),n=r.querySelector(".e-filtermenudiv");if(n){var s=t.element.getBoundingClientRect(),o=n.getBoundingClientRect();this.filterDialogOpen(i,n,o.right-s.left,o.bottom-s.top)}},a.prototype.filterIconClickHandler=function(e){var t=e.target;if(t.classList.contains("e-filtermenudiv")&&(this.parent.filterSettings.type==="Menu"||this.parent.filterSettings.type==="CheckBox"||this.parent.filterSettings.type==="Excel")){var i=this.parent,r=i.getColumnByUid(x(t,"e-headercell").firstElementChild.getAttribute("e-mappinguid"));if(this.column=r,this.fltrDlgDetails.field===r.field&&this.fltrDlgDetails.isOpen)return;this.filterModule&&this.filterModule.closeDialog(),this.fltrDlgDetails={field:r.field,isOpen:!0},this.openMenuByField(r.field)}},a.prototype.clickHandler=function(e){if(this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator){if(x(e.target,"e-filterbarcell")&&e.target.classList.contains("e-input-group-icon")){var t=M(e.target,"div").querySelector(".e-filterbaroperator");t?t.focus():e.target.focus()}if(e.target.classList.contains("e-list-item")){var i=document.querySelector(".e-popup-open").getAttribute("id").replace("_popup","");i.indexOf("grid-column")!==-1&&M(document.getElementById(i),"div").querySelector(".e-filtertext").focus()}}if(this.filterSettings.mode==="Immediate"||this.parent.filterSettings.type==="Menu"||this.parent.filterSettings.type==="CheckBox"||this.parent.filterSettings.type==="Excel"){var r=e.target,n=r.classList.contains("e-day"),s=x(this.parent.element,"e-dialog"),o=!1,l=x(r,"e-popup"),h=this.parent.element.classList.contains("e-device")?document.querySelector(".e-filter-popup"):this.parent.element.querySelector(".e-filter-popup");if(s&&l&&(o=s.id===l.id),this.filterModule&&h&&(x(r,"e-excel-ascending")||x(r,"e-excel-descending"))&&this.filterModule.closeDialog(r),x(r,"e-filter-popup")||r.classList.contains("e-filtermenudiv"))return;this.filterModule&&!x(r,"e-date-overflow")&&!x(r,"e-popup-wrapper")&&!M(r,".e-filter-item.e-menu-item")&&!n&&!(x(r,"e-search-wrapper")&&!h)&&(o&&!x(r,"e-filter-popup")&&!x(r,"e-popup-flmenu")||!l&&h)&&(this.filterModule.isresetFocus=x(r,"e-grid")&&x(r,"e-grid").id===this.parent.element.id&&!(x(r,"e-search-wrapper")&&h),this.filterModule.closeDialog(r))}},a.prototype.filterHandler=function(e){this.actualPredicate[e.field]=e.actualPredicate,this.actualData=Object.keys(this.actualPredicate);var t=new q(this.filterSettings.columns),i=new re().where("field",this.filterOperators.equal,e.field);this.checkboxFilterObject=t.dataSource.json,this.checkboxPrevFilterObject=t.executeLocal(i);for(var r=0;r<this.checkboxPrevFilterObject.length;r++){for(var n=-1,s=0;s<this.filterSettings.columns.length;s++)if(this.checkboxPrevFilterObject[parseInt(r.toString(),10)].field===this.filterSettings.columns[parseInt(s.toString(),10)].field){n=s;break}n!==-1&&this.filterSettings.columns.splice(n,1)}this.values[e.field]&&delete this.values[e.field];var o=this.parent.getColumnByField(e.field),l=this.parent.showColumnMenu&&o.showColumnMenu?".e-columnmenu":".e-icon-filter",h=this.parent.getColumnHeaderByField(e.field).querySelector(l);e.action==="filtering"?(this.filterSettings.columns=this.filterSettings.columns.concat(e.filterCollection),this.filterSettings.columns.length&&h&&h.classList.add("e-filtered")):(h&&h.classList.remove("e-filtered"),e.requestType="filtering",this.parent.renderModule.refresh(e)),this.parent.dataBind()},a.prototype.updateFilter=function(){var e=this.filterSettings.columns;this.actualPredicate={};for(var t=0;t<e.length;t++){this.column=this.parent.getColumnByField(e[parseInt(t.toString(),10)].field)||Pn(e[parseInt(t.toString(),10)].field,this.parent.getForeignKeyColumns());var i=e[parseInt(t.toString(),10)].field;this.parent.getColumnByField(e[parseInt(t.toString(),10)].field)||(i=Pn(e[parseInt(t.toString(),10)].field,this.parent.getForeignKeyColumns()).field),this.refreshFilterIcon(i,e[parseInt(t.toString(),10)].operator,e[parseInt(t.toString(),10)].value,e[parseInt(t.toString(),10)].type,e[parseInt(t.toString(),10)].predicate,e[parseInt(t.toString(),10)].matchCase,e[parseInt(t.toString(),10)].ignoreAccent,e[parseInt(t.toString(),10)].uid)}},a.prototype.refreshFilterIcon=function(e,t,i,r,n,s,o,l){var h={field:e,predicate:n,matchCase:s,ignoreAccent:o,operator:t,value:i,type:r};this.actualPredicate[""+e]?this.actualPredicate[""+e].push(h):this.actualPredicate[""+e]=[h];var p=l?this.parent.grabColumnByUidFromAllCols(l).field:e;this.addFilteredClass(p)},a.prototype.addFilteredClass=function(e){var t,i=this.parent.getColumnByField(e);this.parent.showColumnMenu&&i.showColumnMenu?t=this.parent.getColumnHeaderByField(e).querySelector(".e-columnmenu"):i&&(t=this.parent.getColumnHeaderByField(e).querySelector(".e-icon-filter")),t&&t.classList.add("e-filtered")},a.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},a.prototype.getOperatorName=function(e){return document.getElementById(this.parent.getColumnByField(e).uid).ej2_instances[0].value},a.prototype.renderCheckboxOnFilterMenu=function(){return this.filterModule.renderCheckBoxMenu()},a}(),_t={root:"e-rhandler",suppress:"e-rsuppress",icon:"e-ricon",helper:"e-rhelper",header:"th.e-headercell",cursor:"e-rcursor"},cv=function(){function a(e){this.tapped=!1,this.isDblClk=!0,this.resizeProcess=!1,this.isCancelAutoFit=!1,this.parent=e,!this.parent.isDestroyed&&(this.widthService=new Ks(e),this.addEventListener())}return a.prototype.autoFitColumns=function(e,t,i){var r=this,n=e==null||e.length<=0?this.parent.getColumns().map(function(s){return s.autoFit=!0,s.field}):typeof e=="string"?[e]:e;this.parent.isAutoFitColumns=!0,!u(e)&&typeof e=="object"&&e.length!==0?e.forEach(function(s){r.parent.getColumnByField(s)&&(r.parent.getColumnByField(s).autoFit=!0)}):typeof e=="string"&&e.trim()!==""&&(this.parent.getColumnByField(e).autoFit=!0),this.parent.enableAdaptiveUI&&this.parent.element.classList.add("e-grid-autofit"),this.findColumn(n,t,i)},a.prototype.autoFit=function(){var e=this.parent.getColumns(),t=0,i=e.filter(function(r){return u(r.maxWidth)||t++,r.autoFit===!0}).map(function(r){return r.field||r.headerText});i.length>0&&this.autoFitColumns(i),this.parent.allowResizing&&t&&(this.parent.resizeSettings.mode==="Auto"||this.parent.resizeSettings.mode==="Normal"&&!this.parent.autoFit&&i.length===0)?this.widthService.setWidthToTable(t!==e.length):this.parent.autoFit&&this.parent.resizeSettings.mode==="Auto"&&this.widthService.setWidthToTable()},a.prototype.getCellElementsByColumnIndex=function(e){return this.parent.frozenRows?[].slice.call(this.parent.getHeaderTable().querySelectorAll("td.e-rowcell:nth-child("+(e+1)+"):not(.e-groupcaption):not(.e-detailcell)")).concat([].slice.call(this.parent.getContentTable().querySelectorAll("td.e-rowcell:nth-child("+(e+1)+"):not(.e-groupcaption):not(.e-detailcell)"))):[].slice.call(this.parent.getContentTable().querySelectorAll("td.e-rowcell:nth-child("+(e+1)+"):not(.e-groupcaption):not(.e-detailcell)"))},a.prototype.resizeColumn=function(e,t,i,r,n){var s=this.parent,o=0,l=s.getHeaderTable(),h=s.getContentTable(),p,c="e-gridheader",d=ot,f=xn,g=0,m=i||this.parent.getUidByColumnField(e),v=this.parent.getNormalizedColumnIndex(m),y=l.querySelector('[e-mappinguid="'+m+'"]').parentElement.cloneNode(!0),w=this.getCellElementsByColumnIndex(v),b,I=this.parent.getColumnIndexByField(e);u(s.getFooterContent())||(p=s.getFooterContentTable()),p&&(b=p.querySelectorAll("td:nth-child("+(v+1)+"):not(.e-groupcaption)"));var k=[].slice.call(l.querySelector("tr").getElementsByClassName("e-grouptopleftcell"));if(k.length>0)for(var D=0;D<k.length;D++)g+=k[parseInt(D.toString(),10)].offsetWidth;var W=h.querySelector(".e-detailrowcollapse")||h.querySelector(".e-detailrowexpand");(this.parent.detailTemplate||this.parent.childGrid)&&W&&(g+=W.offsetWidth);var Z=[y],J=[],X=[];if(p)for(var D=0;D<b.length;D++)X[parseInt(D.toString(),10)]=b[parseInt(D.toString(),10)].cloneNode(!0);for(var D=0;D<w.length;D++)J[parseInt(D.toString(),10)]=w[parseInt(D.toString(),10)].cloneNode(!0);var L=this.createTable(l,Z,c),O=null,F=null;s.getCurrentViewRecords().length&&(F=this.createTable(h,J,d,r,n)),X.length&&(O=this.createTable(p,X,f));var V=s.getColumns()[parseInt(I.toString(),10)],K=V.width=Le(Math.max(L,F,O)),U=V.maxWidth&&parseFloat(V.maxWidth.toString());parseInt(K,10)>U&&(V.width=U),this.widthService.setColumnWidth(s.getColumns()[parseInt(I.toString(),10)]);var H=s.getColumns().some(function(he){return(he.visible||s.groupSettings.columns.length)&&(he.width===null||he.width===void 0||he.width.length<=0)});if(H===!1)for(var z=s.getColumns(),D=0;D<z.length;D++)z[parseInt(D.toString(),10)].visible&&(o=o+parseFloat(z[parseInt(D.toString(),10)].width));var Y=o+g;o>0&&((this.parent.detailTemplate||this.parent.childGrid)&&this.widthService.setColumnWidth(new Xe({width:"30px"})),this.parent.resizeSettings.mode==="Auto"&&(Y="100%"),l.style.width=Le(Y),h.style.width=Le(Y),u(p)||(p.style.width=Le(Y))),s.isFrozenGrid()&&s.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar();var le=l.offsetWidth,de=h.parentElement.scrollWidth;de>le?(u(h.querySelector(".e-emptyrow"))?R([l,h],["e-tableborder"]):(R([l],["e-tableborder"]),N([h],["e-tableborder"])),N([s.element],["e-left-shadow","e-right-shadow"])):(N([l,h],["e-tableborder"]),s.getVisibleFrozenRightCount()&&R([s.element],["e-right-shadow"])),u(p)||p.classList.add("e-tableborder")},a.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+pt)&&!e.querySelector("."+ot)||(this.widthService=null,this.unwireEvents(),this.removeEventListener())},a.prototype.getModuleName=function(){return"resize"},a.prototype.findColumn=function(e,t,i){for(var r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)],s=this.parent.getColumnIndexByField(n),o=this.parent.getColumns()[parseInt(s.toString(),10)];s>-1&&!u(o)&&o.visible===!0&&this.resizeColumn(n,s,null,t,i)}this.parent.allowTextWrap&&this.parent.notify(dr,{case:"refreshHeight",isModeChg:!0}),this.parent.isFrozenGrid()&&this.refreshResizefrzCols(!0,!0)},a.prototype.createTable=function(e,t,i,r,n){r===void 0&&(r=1),n===void 0&&(n=t.length),r>n&&(r^=n,n^=r,r^=n);var s=this.parent.createElement("div"),o=this.parent.enableAdaptiveUI?" e-bigger":"";s.className=this.parent.element.className+o,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";var l=this.parent.createElement("div");l.className=i;var h=this.parent.createElement("table",{attrs:{role:"grid"}});h.className=e.className,h.classList.add("e-resizetable"),h.style.cssText="table-layout: auto;width: auto";for(var p=this.parent.createElement("tr"),c=r<=0?1:r;c<=(n>t.length?t.length:n);c++){var d=p.cloneNode();d.className=e.querySelector("tr").className,d.appendChild(t[parseInt((c-1).toString(),10)]),h.appendChild(d)}l.appendChild(h),s.appendChild(l),document.body.appendChild(s);var f=h.getBoundingClientRect().width;return document.body.removeChild(s),Math.ceil(f)},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(It,this.refreshHeight,this),this.parent.on(lo,this.refreshResizePosition,this),this.parent.on(ci,this.wireEvents,this),this.parent.on(je,this.autoFit,this),this.parent.on(wn,this.refreshHeight,this),this.parent.on(Ie,this.destroy,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(It,this.refreshHeight),this.parent.off(lo,this.refreshResizePosition),this.parent.off(ci,this.wireEvents),this.parent.off(wn,this.refreshHeight),this.parent.off(Ie,this.destroy))},a.prototype.render=function(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()},a.prototype.refreshHeight=function(){if(this.parent.getHeaderTable()){for(var e=this.getResizeHandlers(),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].parentElement.offsetHeight>0&&(e[parseInt(t.toString(),10)].style.height=e[parseInt(t.toString(),10)].parentElement.offsetHeight+"px");this.setHandlerHeight()}},a.prototype.wireEvents=function(){S.add(this.parent.getHeaderContent(),T.touchStartEvent,this.touchResizeStart,this),S.add(this.parent.getHeaderContent(),An,this.callAutoFit,this)},a.prototype.unwireEvents=function(){S.remove(this.parent.getHeaderContent(),T.touchStartEvent,this.touchResizeStart),S.remove(this.parent.getHeaderContent(),An,this.callAutoFit)},a.prototype.getResizeHandlers=function(){return[].slice.call(this.parent.getHeaderTable().getElementsByClassName(_t.root))},a.prototype.setHandlerHeight=function(){for(var e=[].slice.call(this.parent.getHeaderTable().getElementsByClassName(_t.suppress)),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].style.height=e[parseInt(t.toString(),10)].parentElement.offsetHeight+"px"},a.prototype.callAutoFit=function(e){if(e.target.classList.contains("e-rhandler")&&!this.isCancelAutoFit){var t=this.getTargetColumn(e);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),this.parent.isFrozenGrid()&&this.refreshResizefrzCols(!0,!0);var i=M(e.target,_t.header);i.classList.add("e-resized")}},a.prototype.touchResizeStart=function(e){if(bt.timer)clearTimeout(bt.timer),bt.timer=null,this.callAutoFit(e);else return bt.timer=setTimeout(function(){bt.timer=null},300),this.resizeStart(e)},a.prototype.resizeStart=function(e){var t=this;if(e.target.classList.contains("e-rhandler")){this.isCancelAutoFit=!1;var i={e,column:this.getTargetColumn(e)};if(this.parent.trigger(mc,i,function(l){if(l.cancel||t.parent.isEdit){t.cancelResizeAction(),t.isCancelAutoFit=!0;return}}),!this.isCancelAutoFit){if(!this.helper){if(this.getScrollBarWidth()===0){if(this.resizeProcess=!0,this.parent.allowGrouping)for(var r=0;r<this.parent.groupSettings.columns.length;r++)this.widthService.setColumnWidth(new Xe({width:"30px"}),r);for(var n=0,s=this.refreshColumnWidth();n<s.length;n++){var o=s[n];this.widthService.setColumnWidth(o)}this.widthService.setWidthToTable(),this.resizeProcess=!1}this.refreshStackedColumnWidth(),this.element=e.target,this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),this.column.getFreezeTableName()===Po?this.parent.enableRtl?this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(u(this.column.width)?"":this.column.width.toString()):this.minMove=parseFloat(u(this.column.width)?"":this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.parent.enableRtl?this.minMove=parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(u(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}T.isDevice&&!this.helper.classList.contains(_t.icon)?(this.helper.classList.add(_t.icon),S.add(document,T.touchStartEvent,this.removeHelper,this),S.add(this.helper,T.touchStartEvent,this.resizeStart,this)):(S.add(document,T.touchEndEvent,this.resizeEnd,this),S.add(this.parent.element,T.touchMoveEvent,this.resizing,this),this.updateCursor("add"))}}},a.prototype.cancelResizeAction=function(e){e&&(S.remove(this.parent.element,T.touchMoveEvent,this.resizing),S.remove(document,T.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),T.isDevice&&!u(this.helper)&&(S.remove(document,T.touchStartEvent,this.removeHelper),S.remove(this.helper,T.touchStartEvent,this.resizeStart)),u(this.helper)||ne(this.helper),this.refresh()},a.prototype.getWidth=function(e,t,i){return t&&e<t?t:i&&e>i?i:e},a.prototype.updateResizeEleHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().getElementsByClassName("e-rhandler")),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].style.height=this.element.parentElement.offsetHeight+"px"},a.prototype.getColData=function(e,t){return{width:parseFloat(u(this.widthService.getWidth(e))||this.widthService.getWidth(e)==="auto"?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}},a.prototype.refreshResizeFixedCols=function(e){for(var t=this.parent.getColumns(),i=this.parent.enableColumnVirtualization?this.parent.translateX:0,r=[].slice.call(this.parent.getHeaderContent().querySelector("tbody").querySelectorAll(".e-fixedfreeze")).concat([].slice.call(this.parent.getContent().querySelectorAll(".e-fixedfreeze"))),n=0;n<r.length;n++){var s=r[parseInt(n.toString(),10)],o=void 0;if(s.classList.contains("e-summarycell")){var l=s.getAttribute("e-mappinguid");o=this.parent.getColumnByUid(l)}else{var h=parseInt(s.getAttribute("data-colindex"),10);o=t[parseInt(h.toString(),10)]}var p=0;if(e==="Left"){this.parent.getVisibleFrozenLeftCount()?p=this.parent.getIndentCount()*30:this.parent.getFrozenMode()==="Right"&&(p=this.parent.groupSettings.columns.length*30);for(var c=0;c<t.length;c++)if(o.index>t[parseInt(c.toString(),10)].index){if(o.uid===t[parseInt(c.toString(),10)].uid)break;(t[parseInt(c.toString(),10)].freeze==="Left"||t[parseInt(c.toString(),10)].isFrozen||t[parseInt(c.toString(),10)].freeze==="Fixed")&&t[parseInt(c.toString(),10)].visible&&(p+=parseFloat(t[parseInt(c.toString(),10)].width.toString()))}Re(s,(p===0?p:p-1)-i,this.parent.enableRtl,"Left")}if(e==="Right"){p=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0;for(var c=t.length-1;c>=0&&o.uid!==t[parseInt(c.toString(),10)].uid;c--)(t[parseInt(c.toString(),10)].freeze==="Right"||t[parseInt(c.toString(),10)].freeze==="Fixed")&&t[parseInt(c.toString(),10)].visible&&(p+=parseFloat(t[parseInt(c.toString(),10)].width.toString()));var d=0;s.colSpan>1&&(d=this.calculateColspanWidth(t,s,o.index)),Re(s,p-d+i,this.parent.enableRtl,"Right")}}},a.prototype.calculateColspanWidth=function(e,t,i){for(var r=0,n=i+1;n<i+t.colSpan;n++)r+=parseInt(e[parseInt(n.toString(),10)].width.toString(),10);return r},a.prototype.refreshResizePosition=function(){this.refreshResizefrzCols(!0)},a.prototype.refreshResizefrzCols=function(e,t){var i=this,r=this.parent.enableColumnVirtualization?this.parent.translateX:0;if(e||this.column.freeze==="Left"||this.column.isFrozen||this.column.columns&&gr(this.column)==="Left"){var n=this.parent.getIndentCount()*30,s=this.parent.getColumns().filter(function(g){return g.freeze==="Left"||g.isFrozen});(!e||t)&&this.frzHdrRefresh("Left");for(var o=0;o<s.length;o++){if(e||s[parseInt(o.toString(),10)].index>this.column.index){var l=[];this.parent.frozenRows?l=[].slice.call(this.parent.getHeaderContent().querySelectorAll('td[data-colindex="'+o+'"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex="'+o+'"]'))):l=[].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex="'+o+'"]')),l.filter(function(g){Re(g,n-r,i.parent.enableRtl,"Left")}),this.parent.enableColumnVirtualization&&(s[parseInt(o.toString(),10)].valueX=n)}s[parseInt(o.toString(),10)].visible&&(n+=parseFloat(s[parseInt(o.toString(),10)].width.toString()))}this.refreshResizeFixedCols("Left")}if(e||this.column.freeze==="Right"||this.column.columns&&gr(this.column)==="Right"){var h=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0,p=this.parent.getColumns();(!e||t)&&this.frzHdrRefresh("Right");for(var c=p.filter(function(g){return g.freeze==="Right"}),d=function(g){var m=[];f.parent.frozenRows?m=[].slice.call(f.parent.getHeaderContent().querySelectorAll('td[data-colindex="'+g+'"]')).concat([].slice.call(f.parent.getContent().querySelectorAll('td[data-colindex="'+g+'"]'))):m=[].slice.call(f.parent.getContent().querySelectorAll('td[data-colindex="'+g+'"]')),m.filter(function(v){var y=0;v.colSpan>1&&(y=i.calculateColspanWidth(p,v,p[parseInt(g.toString(),10)].index)),Re(v,h-y+r,i.parent.enableRtl,"Right")}),f.parent.enableColumnVirtualization&&(p[parseInt(g.toString(),10)].valueX=h),p[parseInt(g.toString(),10)].visible&&(h=h+parseFloat(p[parseInt(g.toString(),10)].width.toString()))},f=this,o=p.length-1;o>=p.length-c.length;o--)d(o);this.refreshResizeFixedCols("Right")}this.column&&(this.column.freeze==="Fixed"||this.column.columns&&gr(this.column)==="Fixed")&&(this.refreshResizeFixedCols("Left"),this.refreshResizeFixedCols("Right"),this.frzHdrRefresh("Left"),this.frzHdrRefresh("Right")),this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&this.parent.getContent().querySelector(".e-groupcaptionrow")&&this.refreshGroupCaptionRow()},a.prototype.refreshGroupCaptionRow=function(){for(var e=[].slice.call(this.parent.getContent().querySelectorAll(".e-groupcaptionrow")),t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)];i.querySelector(".e-summarycell")&&Ku(i,this.parent)}},a.prototype.frzHdrRefresh=function(e){var t=this,i=this.parent.enableColumnVirtualization?this.parent.translateX:0;if(e==="Left")for(var r=[].slice.call(this.parent.getHeaderContent().querySelector("thead").querySelectorAll("tr")),n=0;n<r.length;n++)for(var s=[].slice.call(r[parseInt(n.toString(),10)].querySelectorAll(".e-leftfreeze,.e-fixedfreeze")),o=function(d){var f=s[parseInt(d.toString(),10)];if(f.classList.contains("e-rowdragheader")||f.classList.contains("e-dragheadercell")||f.classList.contains("e-grouptopleftcell"))return"continue";var g=l.getParticularCol(f),m=l.parent.getColumns(),v=0,y=[];if(l.parent.aggregates.length&&l.parent.getFooterContent()){if(l.parent.getContent().querySelectorAll(".e-summaryrow").length){var w=[].slice.call(l.parent.getContent().querySelectorAll(".e-summaryrow"));w.filter(function(k){y.push(k.querySelector('[e-mappinguid="'+g.uid+'"]'))})}y=y.concat([].slice.call(l.parent.getFooterContent().querySelectorAll('[e-mappinguid="'+g.uid+'"]')))}if(f.classList.contains("e-fixedfreeze")){l.parent.getVisibleFrozenLeftCount()?v=l.parent.getIndentCount()*30:l.parent.getFrozenMode()==="Right"&&(v=l.parent.groupSettings.columns.length*30);for(var b=0;b<m.length;b++)if(g.index>m[parseInt(b.toString(),10)].index){if(g.uid===m[parseInt(b.toString(),10)].uid)break;(m[parseInt(b.toString(),10)].freeze==="Left"||m[parseInt(b.toString(),10)].isFrozen||m[parseInt(b.toString(),10)].freeze==="Fixed")&&m[parseInt(b.toString(),10)].visible&&(v+=parseInt(m[parseInt(b.toString(),10)].width.toString(),10))}y&&y.length&&y.filter(function(k){Re(k,v-i,t.parent.enableRtl,"Left")}),Re(f,(v===0?v:v-1)-i,l.parent.enableRtl,"Left")}else if(v=l.parent.getIndentCount()*30,g.index===0)y&&y.length&&y.filter(function(k){Re(k,v-i,t.parent.enableRtl,"Left")}),Re(f,v-i,l.parent.enableRtl,"Left"),l.parent.enableColumnVirtualization&&(g.valueX=v);else{for(var I=0;I<m.length&&!(g.index<m[parseInt(I.toString(),10)].index||g.uid===m[parseInt(I.toString(),10)].uid);I++)m[parseInt(I.toString(),10)].visible&&(v+=parseInt(m[parseInt(I.toString(),10)].width.toString(),10));y&&y.length&&y.filter(function(k){Re(k,v-i,t.parent.enableRtl,"Left")}),Re(f,v-i,l.parent.enableRtl,"Left"),l.parent.enableColumnVirtualization&&(g.valueX=v)}},l=this,h=0;h<s.length;h++)o(h);if(e==="Right")for(var r=[].slice.call(this.parent.getHeaderContent().querySelector("thead").querySelectorAll("tr")),n=0;n<r.length;n++)for(var s=[].slice.call(r[parseInt(n.toString(),10)].querySelectorAll(".e-rightfreeze, .e-fixedfreeze")),p=function(m){var v=s[parseInt(m.toString(),10)],y=c.getParticularCol(v),w=c.parent.getColumns(),b=0,I=[];if(c.parent.aggregates.length&&c.parent.getFooterContent()){if(c.parent.getContent().querySelectorAll(".e-summaryrow").length){var k=[].slice.call(c.parent.getContent().querySelectorAll(".e-summaryrow"));k.filter(function(Z){I.push(Z.querySelector('[e-mappinguid="'+y.uid+'"]'))})}I=I.concat([].slice.call(c.parent.getFooterContent().querySelectorAll('[e-mappinguid="'+y.uid+'"]')))}if(v.classList.contains("e-fixedfreeze")){b=c.parent.getFrozenMode()==="Right"&&c.parent.isRowDragable()?30:0;for(var D=w.length-1;D>=0;D--)if(y.index<w[parseInt(D.toString(),10)].index){if(y.columns&&Vs(y,w[parseInt(D.toString(),10)].uid)||y.index>w[parseInt(D.toString(),10)].index)break;(w[parseInt(D.toString(),10)].freeze==="Right"||w[parseInt(D.toString(),10)].freeze==="Fixed")&&w[parseInt(D.toString(),10)].visible&&(b+=parseFloat(w[parseInt(D.toString(),10)].width.toString()))}I.length&&I.filter(function(Z){Re(Z,b+i,t.parent.enableRtl,"Right")}),Re(v,b+i,c.parent.enableRtl,"Right")}else{b=c.parent.getFrozenMode()==="Right"&&c.parent.isRowDragable()?30:0;for(var W=w.length-1;W>=0&&!(y.columns&&Vs(y,w[parseInt(W.toString(),10)].uid)||y.index>w[parseInt(W.toString(),10)].index||y.uid===w[parseInt(W.toString(),10)].uid);W--)w[parseInt(W.toString(),10)].visible&&(b+=parseInt(w[parseInt(W.toString(),10)].width.toString(),10));I.length&&I.filter(function(Z){Re(Z,b+i,t.parent.enableRtl,"Right")}),Re(v,b+i,c.parent.enableRtl,"Right"),c.parent.enableColumnVirtualization&&(y.valueX=b)}},c=this,h=s.length-1;h>=0;h--)p(h)},a.prototype.getParticularCol=function(e){var t=e.classList.contains("e-filterbarcell")?e.getAttribute("e-mappinguid"):e.querySelector("[e-mappinguid]").getAttribute("e-mappinguid");return this.parent.getColumnByUid(t)},a.prototype.resizing=function(e){if(!u(this.column)){this.parent.isFrozenGrid()&&this.refreshResizefrzCols();var t=0;u(this.column)&&(t=x(this.element,"th").offsetWidth),this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight());var i=this.getPointX(e),r=this.parent.enableRtl?-(i-this.pageX):i-this.pageX,n=this.getColData(this.column,r);n.width||(n.width=M(this.element,"th").offsetWidth);var s=this.getWidth(n.width,n.minWidth,n.maxWidth);if(this.parent.log("resize_min_max",{column:this.column,width:s}),(!this.parent.enableRtl&&this.minMove>=i||this.parent.enableRtl&&this.minMove<=i)&&(s=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=i=this.minMove),s!==parseFloat(u(this.column.width)||this.column.width==="auto"?t.toString():this.column.width.toString())){this.pageX=i,this.column.width=Le(s);var o={e,column:this.column};if(this.parent.trigger(vc,o),o.cancel){this.cancelResizeAction(!0);return}var l=[this.column],h=[this.column];this.column.columns&&(l=this.getSubColumns(this.column,[]),l=this.calulateColumnsWidth(l,!1,r),h=this.calulateColumnsWidth(l,!0,r)),this.resizeProcess=!0;for(var p=0,c=h;p<c.length;p++){var d=c[p];this.widthService.setColumnWidth(d,null,"resize")}this.resizeProcess=!1,this.updateHelper()}this.isDblClk=!1}},a.prototype.calulateColumnsWidth=function(e,t,i){for(var r=[],n=0,s=e;n<s.length;n++){for(var o=s[n],l=0,h=0;h<e.length;h++)l+=parseFloat(e[parseInt(h.toString(),10)].width.toString());var p=this.getColData(o,parseFloat(o.width)*i/l),c=this.getWidth(p.width,p.minWidth,p.maxWidth);c!==parseFloat(o.width.toString())&&(t&&(o.width=Le(c<1?1:c)),r.push(o))}return r},a.prototype.getSubColumns=function(e,t){for(var i=0,r=e.columns;i<r.length;i++){var n=r[i];n.visible!==!1&&n.allowResizing&&(n.columns?this.getSubColumns(n,t):t.push(n))}return t},a.prototype.resizeEnd=function(e){if(!(!this.helper||this.parent.isDestroyed)){var t=this.parent;S.remove(this.parent.element,T.touchMoveEvent,this.resizing),S.remove(document,T.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),ne(this.helper);var i={e,column:this.column},r=this.parent.getContent().querySelector("."+ut),n=r;n.scrollHeight>n.clientHeight&&(this.parent.scrollModule.setPadding(),n.style.overflowY="scroll"),this.parent.trigger(Ga,i),M(this.element,".e-headercell").classList.add("e-resized"),this.isFrozenColResized=!1,this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.parent.notify(Xa,{case:"textwrap"}));var s=t.getHeaderTable(),o=t.getContentTable(),l;u(t.getFooterContent())||(l=t.getFooterContentTable());var h=s.offsetWidth,p=t.getContent().scrollWidth;p>h?(u(o.querySelector(".e-emptyrow"))?R([s,o],["e-tableborder"]):(R([s],["e-tableborder"]),N([o],["e-tableborder"])),N([t.element],["e-left-shadow","e-right-shadow"])):(N([s,o],["e-tableborder"]),t.getVisibleFrozenRightCount()&&R([t.element],["e-right-shadow"])),u(l)||l.classList.add("e-tableborder"),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}},a.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},a.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,i=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));t<i.length;t++)for(var r=i[t],n=0,s=e;n<s.length;n++){var o=s[n];if(r.querySelector("[e-mappinguid]")&&r.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===o.uid&&o.visible){o.width=r.getBoundingClientRect().width;break}}return e},a.prototype.refreshStackedColumnWidth=function(){for(var e=0,t=this.parent.getStackedColumns(this.parent.columns);e<t.length;e++){var i=t[e];i.width=this.getStackedWidth(i,0)}},a.prototype.getStackedWidth=function(e,t){for(var i=0,r=e.columns;i<r.length;i++){var n=r[i];n.visible!==!1&&(n.columns?t=this.getStackedWidth(n,t):t+=parseFloat(n.width.toString()))}return t},a.prototype.getTargetColumn=function(e){var t=M(e.target,_t.header);t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv");var i=t.getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)},a.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var i=0,r=t;i<r.length;i++){var n=r[i];n.classList[""+e](_t.cursor)}},a.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},a.prototype.appendHelper=function(){this.helper=this.parent.createElement("div",{className:_t.helper}),this.parent.element.appendChild(this.helper),this.setHelperHeight()},a.prototype.setHelperHeight=function(){for(var e=this.parent.getContent().offsetHeight-this.getScrollBarWidth(),t=M(this.element,_t.header),i=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),r=i.indexOf(t.parentElement);r<i.length&&r>-1;r++)e+=i[parseInt(r.toString(),10)].offsetHeight;var n=this.calcPos(t);n.left+=this.parent.enableRtl?-1:t.offsetWidth-2,this.helper.style.cssText="height: "+e+"px; top: "+n.top+"px; left:"+Math.floor(n.left)+"px;",this.parent.enableVirtualization&&this.helper.classList.add("e-virtual-rhandler")},a.prototype.getScrollBarWidth=function(e){var t=this.parent.getContent().firstChild;return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?Dt():0},a.prototype.removeHelper=function(e){var t=e.target.classList;!(t.contains(_t.root)||t.contains(_t.icon))&&this.helper&&(S.remove(document,T.touchStartEvent,this.removeHelper),S.remove(this.helper,T.touchStartEvent,this.resizeStart),ne(this.helper),this.refresh())},a.prototype.updateHelper=function(){var e=M(this.element,_t.header),t;t=Math.floor(this.calcPos(e).left+(this.parent.enableRtl?-1:e.offsetWidth-2));var i=2;t>this.parentElementWidth&&(t=this.parentElementWidth-i),this.helper.style.left=t+"px"},a.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),r=e.ownerDocument,n=x(e,"e-grid")||r.documentElement;n&&(n===r.body||n===r.documentElement)&&n.style.position==="static";)n=n.parentNode;return n&&n!==e&&n.nodeType===1&&(t=n.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},a.prototype.doubleTapEvent=function(e){var t=this;this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(function(){t.tapped=null},300))},a.prototype.getUserAgent=function(){var e=T.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},a.prototype.timeoutHandler=function(){this.tapped=null},a}(),dv=function(){function a(e){this.idx=0,this.parent=e,!this.parent.isDestroyed&&(this.parent.on(ys,this.headerDrop,this),this.parent.on(qe,this.enableAfterRender,this),this.parent.on(ol,this.onActionComplete,this),this.parent.on(vs,this.drag,this),this.parent.on(ms,this.dragStart,this),this.parent.on(Ya,this.dragStop,this),this.parent.on(ys,this.headerDrop,this),this.parent.on(It,this.createReorderElement,this),this.parent.on(at,this.keyPressHandler,this),this.parent.on(Ie,this.destroy,this))}return a.prototype.chkDropPosition=function(e,t){var i=this.parent.getColumnByUid(t.firstElementChild.getAttribute("e-mappinguid")),r=i?!i.lockColumn:!0;return(e.parentElement.isEqualNode(t.parentElement)||this.parent.enableColumnVirtualization||this.parent.isFrozenGrid()&&Array.prototype.indexOf.call(M(e,"thead").children,e.parentElement)===Array.prototype.indexOf.call(M(t,"thead").children,t.parentElement))&&this.targetParentContainerIndex(e,t)>-1&&r},a.prototype.chkDropAllCols=function(e,t){for(var i,r=this.getHeaderCells(),n;!i&&r.length>0;)n=r.pop(),i=e!==n&&this.targetParentContainerIndex(e,t)>-1;return i},a.prototype.findColParent=function(e,t,i){i=i;for(var r=0,n=t.length;r<n;r++){if(e===t[parseInt(r.toString(),10)])return!0;if(t[parseInt(r.toString(),10)].columns){var s=i.length;if(i.push(t[parseInt(r.toString(),10)]),!this.findColParent(e,t[parseInt(r.toString(),10)].columns,i))i.splice(s,i.length-s);else return!0}}return!1},a.prototype.getColumnsModel=function(e,t){for(var i=[],r=[],n=0,s=e.length;n<s;n++)u(e[parseInt(n.toString(),10)])||((e[parseInt(n.toString(),10)].visible||t)&&i.push(e[parseInt(n.toString(),10)]),e[parseInt(n.toString(),10)].columns&&(r=r.concat(e[parseInt(n.toString(),10)].columns)));return r.length&&(i=i.concat(this.getColumnsModel(r))),i},a.prototype.headerDrop=function(e){var t=this.parent,i=this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv"),r=i.getAttribute("e-mappinguid"),n=t.getColumnByUid(r);if(!M(e.target,"th")||!u(n)&&(!n.allowReordering||n.lockColumn)){this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:n});return}var s=M(e.target,".e-headercell"),o=s.querySelector(".e-headercelldiv")||s.querySelector(".e-stackedheadercelldiv"),l=o.getAttribute("e-mappinguid");if(!u(l)){var h=t.getColumnByUid(l);if(u(h)||!h.allowReordering||h.lockColumn){this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:n,destColumn:h});return}}if(s&&!(!this.chkDropPosition(this.element,s)||!this.chkDropAllCols(this.element,s)))if(this.parent.enableColumnVirtualization){var p=this.parent.columns,c=this.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),d=this.parent.columns.filter(function(I){return I.uid===c}),f=null,g=d[0],m=s.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");p.some(function(I,k){return I.uid===m?(f=k,I.uid===m):!1}),u(f)||this.moveColumns(f,g)}else{var v=this.targetParentContainerIndex(this.element,s),y=this.element.firstElementChild.getAttribute("e-mappinguid");if(this.destElement=s,this.parent.notify(xd,{ele:s}),y)this.moveColumns(v,this.parent.getColumnByUid(y));else{var w=this.getHeaderCells(),b=ca(this.element,w),p=this.getColumnsModel(this.parent.columns);this.moveColumns(v,p[parseInt(b.toString(),10)])}}},a.prototype.isActionPrevent=function(e){return qi(e)},a.prototype.moveColumns=function(e,t,i,r){var n=this.parent;if(this.isActionPrevent(n)){n.notify(Jt,{instance:this,handler:this.moveColumns,arg1:e,arg2:t});return}var s=this.getColParent(t,this.parent.columns),o=s?s.columns:this.parent.columns,l=Yn(t,o);if((s||this.parent.lockcolPositionCount)&&!i&&!this.parent.enableColumnVirtualization){for(var h=0;h<o.length;h++)if(o[parseInt(h.toString(),10)].field===t.field){l=h;break}var p=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("e-mappinguid"));if(p){for(var h=0;h<o.length;h++)if(o[parseInt(h.toString(),10)].field===p.field){e=h;break}}else for(var h=0;h<o.length;h++)o[parseInt(h.toString(),10)].headerText===this.destElement.innerText.trim()&&(e=h)}if(!(!n.allowReordering||l===e||l===-1||e===-1)){o.splice(e,0,o.splice(l,1)[0]);var c={column:t,destIndex:e,columns:o,parent:s,cancel:!1};if(n.notify(Id,c),!c.cancel){if(this.parent.isFrozenGrid())if(this.parent.frozenColumns)for(var h=0;h<o.length;h++)o[parseInt(h.toString(),10)].freeze==="Left"&&(o[parseInt(h.toString(),10)].freeze=void 0);else this.parent.getFrozenLeftCount()>e?t.freeze="Left":o.length-this.parent.getFrozenRightColumnsCount()<=e?t.freeze="Right":t.freeze=t.freeze==="Fixed"?"Fixed":void 0;if(n.getColumns(!0),n.notify(Rn,{fromIndex:e,toIndex:l}),r!==!1&&n.notify(qt,{type:Ae,requestType:"reorder",fromIndex:e,toIndex:l,toColumnUid:t.uid}),this.parent.isFrozenGrid()){var d=this.parent.columns;this.idx=0,this.refreshColumnIndex(d),this.parent.notify(Os,{})}}}},a.prototype.refreshColumnIndex=function(e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].index=this.idx,this.idx++,e[parseInt(t.toString(),10)].columns&&e[parseInt(t.toString(),10)].columns.length&&this.refreshColumnIndex(e[parseInt(t.toString(),10)].columns)},a.prototype.targetParentContainerIndex=function(e,t){var i=this.parent.columns,r=this.getHeaderCells(),n=this.parent.getStackedColumns(i),s=[];n.length&&(s=this.getAllStackedheaderParentColumns(r));var o=n.length&&s.length?this.getColumnsModel(s):this.getColumnsModel(i,!0),l=this.getColParent(o[ca(e,r)],i);return i=l?l.columns:i,Yn(o[ca(t,r)],i)},a.prototype.getAllStackedheaderParentColumns=function(e){for(var t=[],i=0;i<e.length;i++)e[parseInt(i.toString(),10)].classList.contains("e-hide")?(e.splice(i,1),i--):e[parseInt(i.toString(),10)].closest("thead").firstChild===e[parseInt(i.toString(),10)].parentElement&&t.push(this.parent.getColumnByUid(e[parseInt(i.toString(),10)].firstElementChild.getAttribute("e-mappinguid")));return t},a.prototype.getHeaderCells=function(){return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},a.prototype.getColParent=function(e,t){var i=[];return this.findColParent(e,t,i),i[i.length-1]},a.prototype.reorderSingleColumn=function(e,t){var i=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(h){return h.field===e})[0]:this.parent.getColumnByField(e),r=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(h){return h.field===t})[0]:this.parent.getColumnByField(t);if(!u(i)&&(!i.allowReordering||i.lockColumn)||!u(r)&&(!r.allowReordering||r.lockColumn)){this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:i,destColumn:r});return}var n=r,s=this.getColParent(n,this.parent.columns),o=s?s.columns:this.parent.columns,l=Yn(n,o);l>-1&&this.moveColumns(l,i,!0)},a.prototype.reorderMultipleColumns=function(e,t){var i=this.parent.getColumnIndexByField(t),r=this.parent.getColumnByField(t);if(!(i<0||!u(r)&&(!r.allowReordering||r.lockColumn))){for(var n=0;n<e.length;n++){var s=this.parent.getColumnByField(e[parseInt(n.toString(),10)]);if(!u(s)&&(!s.allowReordering||s.lockColumn))return}for(var n=0;n<e.length;n++){var s=this.parent.getColumnByIndex(i),o=this.getColParent(s,this.parent.columns),l=o?o.columns:this.parent.columns,h=Yn(s,l);h>-1&&this.moveColumns(h,this.parent.getColumnByField(e[parseInt(n.toString(),10)]),!0,!0),this.parent.getColumnIndexByField(e[n+1])>=h&&i++}}},a.prototype.moveTargetColumn=function(e,t){t>-1&&this.moveColumns(t,e,!0)},a.prototype.reorderSingleColumnByTarget=function(e,t){this.moveTargetColumn(this.parent.getColumnByField(e),t)},a.prototype.reorderMultipleColumnByTarget=function(e,t){for(var i=0;i<e.length;i++)this.reorderSingleColumnByTarget(e[parseInt(i.toString(),10)],t)},a.prototype.reorderColumns=function(e,t){typeof e=="string"?(this.reorderSingleColumn(e,t),this.fromCol=e):(this.reorderMultipleColumns(e,t),this.fromCol=e[0])},a.prototype.reorderColumnByIndex=function(e,t){this.moveTargetColumn(this.parent.getColumnByIndex(e),t)},a.prototype.reorderColumnByTargetIndex=function(e,t){typeof e=="string"?this.reorderSingleColumnByTarget(e,t):this.reorderMultipleColumnByTarget(e,t)},a.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.createReorderElement()},a.prototype.createReorderElement=function(e){e&&e.args&&e.args.isXaxis&&this.setDisplay("none");var t=this.parent.element.querySelector("."+it);this.upArrow=t.appendChild(this.parent.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}})),this.downArrow=t.appendChild(this.parent.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}}))},a.prototype.onActionComplete=function(e){this.parent.trigger(ce,P(e,{type:ce}));var t=this.fromCol&&this.parent.getColumnHeaderByField(this.fromCol);t&&this.parent.focusModule.onClick({target:t},!0)},a.prototype.destroy=function(){var e=this.parent.element;this.parent.isDestroyed||!e||!e.querySelector("."+pt)&&!e.querySelector("."+ot)||(this.upArrow.parentNode&&se(this.upArrow),this.downArrow.parentNode&&se(this.downArrow),this.parent.off(ys,this.headerDrop),this.parent.off(qe,this.enableAfterRender),this.parent.off(ol,this.onActionComplete),this.parent.off(vs,this.drag),this.parent.off(ms,this.dragStart),this.parent.off(Ya,this.dragStop),this.parent.off(It,this.createReorderElement),this.parent.off(at,this.keyPressHandler),this.parent.off(Ie,this.destroy))},a.prototype.keyPressHandler=function(e){var t=this.parent,i=/(Mac)/i.test(navigator.platform);switch(i&&e.metaKey&&(e.action==="leftArrow"?e.action="ctrlLeftArrow":e.action==="rightArrow"&&(e.action="ctrlRightArrow")),e.action){case"ctrlLeftArrow":case"ctrlRightArrow":var r=t.focusModule.currentInfo.element;if(r&&r.classList.contains("e-headercell")){var n=t.getColumnByUid(r.firstElementChild.getAttribute("e-mappinguid")),s=t.getVisibleColumns(),o=s.indexOf(n),l=e.action==="ctrlLeftArrow"?s[o-1]:s[o+1];l&&l.field&&n.field&&this.reorderColumns(n.field,l.field)}break}},a.prototype.drag=function(e){var t=this.parent,i=e.target,r=M(i,".e-headercell:not(.e-stackedHeaderCell)"),n=t.element.querySelector(".e-cloneproperties"),s=t.getContent().firstElementChild,o=this.x>Kr(e.event).x+s.scrollLeft;if(N([].slice.call(t.getHeaderTable().getElementsByClassName("e-reorderindicate")),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),ae(n,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(e.event),r&&!r.isEqualNode(this.element)){i=r;var l=i.querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("e-mappinguid");!(!this.chkDropPosition(this.element,i)||!this.chkDropAllCols(this.element,i))&&t.getColumnByUid(l).allowReordering&&e.column.allowReordering?(this.updateArrowPosition(i,o),ae(i,["e-allowDrop","e-reorderindicate"],[])):t.allowGrouping&&x(e.target,"e-groupdroparea")||ae(n,["e-notallowedcur"],["e-defaultcur"])}else r&&r.isEqualNode(this.element)&&!(t.allowGrouping&&e.column.allowGrouping||e.column.allowReordering)?ae(n,["e-notallowedcur"],["e-defaultcur"]):!r&&!(t.allowGrouping&&x(e.target,"e-groupdroparea"))&&ae(n,["e-notallowedcur"],["e-defaultcur"]);!e.column.allowReordering||e.column.lockColumn||t.trigger(vs,{target:i,draggableType:"headercell",column:e.column})},a.prototype.updateScrollPostion=function(e){var t=this,i=Kr(e).x,r=this.parent.element.getBoundingClientRect(),n=r.right,s=r.left,o=this.parent.getContent().firstElementChild;i>s&&i<s+35?this.timer=window.setInterval(function(){t.setScrollLeft(o,!0)},50):i<n&&i>n-35&&(this.timer=window.setInterval(function(){t.setScrollLeft(o,!1)},50))},a.prototype.setScrollLeft=function(e,t){var i=e.scrollLeft;e.scrollLeft=e.scrollLeft+(t?-5:5),i!==e.scrollLeft&&this.setDisplay("none")},a.prototype.stopTimer=function(){window.clearInterval(this.timer)},a.prototype.updateArrowPosition=function(e,t){var i=e.getBoundingClientRect(),r=this.parent.element.getBoundingClientRect();if(!(t&&i.left<r.left||!t&&i.right>r.right)){var n=this.parent.getHeaderContent().classList.contains("e-sticky");this.upArrow.style.top=n?i.top+i.height+"px":i.top+i.height-r.top+"px",this.downArrow.style.top=n?i.top-7+"px":i.top-r.top-7+"px",this.upArrow.style.left=this.downArrow.style.left=n?(t?i.left:i.right)-4+"px":(t?i.left:i.right)-r.left-4+"px",this.setDisplay("")}},a.prototype.dragStart=function(e){var t=this.parent,i=e.target;if(this.element=i.classList.contains("e-headercell")?i:x(i,"e-headercell"),!(!e.column.allowReordering||e.column.lockColumn)){var r=t.getContent().firstElementChild;this.x=Kr(e.event).x+r.scrollLeft,t.trigger(ms,{target:i,draggableType:"headercell",column:e.column})}},a.prototype.dragStop=function(e){var t=this.parent;this.setDisplay("none"),this.stopTimer(),e.cancel||t.trigger(hu,{target:e.target,draggableType:"headercell",column:e.column}),N([].slice.call(t.getHeaderTable().getElementsByClassName("e-reorderindicate")),["e-reorderindicate"])},a.prototype.setDisplay=function(e){this.upArrow.style.display=e,this.downArrow.style.display=e},a.prototype.getModuleName=function(){return"reorder"},a}(),yh=function(){function a(e){this.parent=e}return a.prototype.addNew=function(e,t){this.isEdit=!1;var i;if((this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&this.parent.editSettings.newRowPosition==="Top"?i=this.parent.getHeaderTable().querySelector(me):i=this.parent.getContentTable().querySelector(me),t.row=this.parent.createElement("tr",{className:"e-row e-addedrow"}),this.parent.getContentTable().querySelector(".e-emptyrow")&&!this.parent.editSettings.showAddNewRow){var r=this.parent.getContentTable().querySelector(".e-emptyrow");r.parentNode.removeChild(r),this.parent.frozenRows&&this.parent.element.querySelector(".e-frozenrow-empty")&&this.parent.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty")}this.parent.editSettings.newRowPosition==="Top"?i.insertBefore(t.row,i.firstChild):i.appendChild(t.row),t.row.appendChild(this.getEditElement(e,!1,void 0,t,!0)),this.parent.editModule.checkLastRow(t.row,t)},a.prototype.update=function(e,t){this.isEdit=!0;var i=[].slice.call(t.row.querySelectorAll("td.e-rowcell"));t.row.innerHTML="",t.row.appendChild(this.getEditElement(e,!0,i,t,!0)),t.row.classList.add(Ke),this.parent.editModule.checkLastRow(t.row,t)},a.prototype.getEditElement=function(e,t,i,r,n){var s=this.parent,o=0,l=!u(s.detailTemplate)||!u(s.childGrid)?1:0;s.allowGrouping&&(o=s.groupSettings.columns.length);var h=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(s.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length+this.parent.getIndentCount()).toString()}}),p=r.form=this.parent.createElement("form",{id:s.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)return this.appendChildren(p,r.rowData,n),h.appendChild(p),h;var c=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25",role:"grid"}});c.appendChild(s.getContentTable().querySelector(Lt).cloneNode(!0));var d=this.parent.createElement(me,{attrs:{role:"rowgroup"}}),f=this.parent.createElement("tr"),g=0;for(l&&f.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),f.firstChild),s.isRowDragable()&&f.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));g<o;)f.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),g++;var m=0;g=0;for(var v,y=r.isCustomFormValidation?this.parent.columnModel:s.getColumns();t&&m<i.length&&g<y.length||g<y.length;){var w=t&&i[parseInt(m.toString(),10)]?i[parseInt(m.toString(),10)].getAttribute("colspan"):null,b=y[parseInt(g.toString(),10)];v=e[b.uid].value;var I=this.parent.createElement("td",{className:fe,attrs:{style:"text-align:"+(b.textAlign?b.textAlign:""),colspan:w||""}});if(b.visible?(I.appendChild(e[b.uid]),this.parent.rowRenderingMode==="Vertical"&&(ai(I,{"data-cell":b.headerText}),g===0&&I.classList.add("e-responsive-editcell")),b.editType==="booleanedit"?I.classList.add("e-boolcell"):(b.commands||b.commandsTemplate)&&R([I],"e-unboundcell")):I.classList.add("e-hide"),this.parent.isFrozenGrid()){if(Vn(this.parent,b,I),this.parent.isSpan){var k=I.getAttribute("colspan")?parseInt(I.getAttribute("colspan"),10):1;$u(this.parent,b,I,k)}this.parent.enableColumnVirtualization&&(b.freeze==="Left"&&!u(b.valueX)?I.style.left=b.valueX-this.parent.translateX+"px":b.freeze==="Right"&&!u(b.valueX)?I.style.right=b.valueX+this.parent.translateX+"px":b.freeze==="Fixed"&&(I.style.left=this.parent.leftrightColumnWidth("left")-this.parent.translateX+"px",I.style.right=this.parent.leftrightColumnWidth("right")+this.parent.translateX+"px"))}I.setAttribute("aria-label",v+this.parent.localeObj.getConstant("ColumnHeader")+b.headerText),f.appendChild(I),g=w?g+parseInt(w,10):g+1,m++}return yr(f),d.appendChild(f),c.appendChild(d),p.appendChild(c),h.appendChild(p),h},a.prototype.removeEventListener=function(){},a.prototype.appendChildren=function(e,t,i){var r=P({},t,{isAdd:!this.isEdit,isFrozen:i},!0),n=this.parent.element.id+"editSettingsTemplate";this.parent.isReact&&typeof this.parent.editSettings.template!="string"?(this.parent.getEditTemplate()(r,this.parent,"editSettingsTemplate",n,null,null,e),this.parent.renderTemplates()):$e(e,this.parent.getEditTemplate()(r,this.parent,"editSettingsTemplate",n,null,null,null,this.parent.root))},a}(),fv=function(){function a(e){this.parent=e}return a.prototype.update=function(e,t){if(this.parent.isReact&&t.columnObject&&t.columnObject.template){var i=t.cell.parentElement,r=t.cell.cloneNode(!0);i.insertBefore(r,t.cell),r.focus(),t.cell.remove(),t.cell=r}t.cell.setAttribute("aria-label",t.cell.innerHTML+this.parent.localeObj.getConstant("ColumnHeader")+t.columnObject.field),t.cell.innerHTML="",t.cell.appendChild(this.getEditElement(e,t)),t.cell.classList.add("e-editedbatchcell"),ae(t.row,[Ke,"e-batchrow"],[])},a.prototype.getEditElement=function(e,t){var i=this.parent,r=this.parent.createElement("form",{id:i.element.id+"EditForm",className:"e-gridform"});return r.appendChild(e[t.columnObject.uid]),t.columnObject.editType==="booleanedit"&&t.cell.classList.add("e-boolcell"),t.columnObject.editType||t.cell.classList.add("e-inputbox"),r},a}(),gv=function(){function a(e,t){this.parent=e,this.serviceLocator=t,!this.parent.isDestroyed&&(this.parent.on(Ts,this.destroy,this),this.parent.on(Ie,this.destroy,this))}return a.prototype.setLocaleObj=function(){this.l10n=this.serviceLocator.getService("localization")},a.prototype.addNew=function(e,t){this.isEdit=!1,this.createDialog(e,t)},a.prototype.update=function(e,t){this.isEdit=!0,this.createDialog(e,t)},a.prototype.createDialogHeader=function(e){var t=this,i=this.parent,r;if(this.parent.enableAdaptiveUI){var n=new Ou(this.parent,this.serviceLocator);return n.action=this.isEdit?oe.isEdit:oe.isAdd,n.renderResponsiveHeader(void 0,e)}else i.editSettings.headerTemplate?r=Qo(function(){return t.getDialogEditTemplateElement("HeaderTemplate",e).outerHTML}):this.isEdit?r=this.l10n.getConstant("EditFormTitle")+e.primaryKeyValue[0]:r=this.l10n.getConstant("AddFormTitle");return r},a.prototype.createDialog=function(e,t){var i=this,r=this.parent;this.dialog=this.parent.createElement("div",{id:r.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),r.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog"),r.element.appendChild(this.dialog),this.setLocaleObj(),this.dialog.setAttribute("aria-label",this.l10n.getConstant("DialogEdit")),this.dialogObj=new Cr(P({header:this.createDialogHeader(t),isModal:!0,visible:!0,cssClass:this.parent.cssClass?"e-edit-dialog "+this.parent.cssClass:"e-edit-dialog",content:this.getEditElement(e,t),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:r.editSettings.template?"auto":"330px",target:t.target?t.target:document.body,animationSettings:{effect:"None"},footerTemplate:r.editSettings.footerTemplate?Qo(function(){return i.getDialogEditTemplateElement("FooterTemplate",t).outerHTML}):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},r.editSettings.dialog?r.editSettings.dialog.params||{}:{})),t.dialog=this.dialogObj;var n="isStringTemplate";this.dialogObj[""+n]=!0,this.renderResponsiveDialog(),this.dialogObj.appendTo(this.dialog),fo(this.parent.element,this.dialogObj.element.parentElement),r.enableAdaptiveUI&&this.dialogObj.show(!0)},a.prototype.dialogCreated=function(){Xu(this.parent)},a.prototype.renderResponsiveDialog=function(){var e=this;this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=function(){e.dialogObj.element.style.maxHeight="100%"})},a.prototype.btnClick=function(e){this.l10n.getConstant("CancelButton").toLowerCase()===e.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()},a.prototype.dialogClose=function(){this.parent.closeEdit()},a.prototype.destroy=function(e){for(var t=["template","headerTemplate","footerTemplate"],i=0;i<t.length;i++)if(this.parent.editSettings[t[parseInt(i.toString(),10)]]){var r=t[parseInt(i.toString(),10)].charAt(0).toUpperCase()+t[parseInt(i.toString(),10)].slice(1),n=this.parent.element.id+"editSettings"+r;cr(n,r,this.parent.editSettings)}this.parent.notify(Mo,{}),this.parent.isEdit=!1,this.parent.notify(Qi,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),se(this.dialog))},a.prototype.getDialogEditTemplateElement=function(e,t){var i=this.parent.createElement("div",{className:"e-dialog"+e}),r=P({},t.rowData,{isAdd:!this.isEdit},!0),n=this.parent.element.id+"editSettings"+e;return $e(i,(e==="HeaderTemplate"?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(r,this.parent,"editSettings"+e,n)),cr(n,e,this.parent.editSettings),i},a.prototype.getEditElement=function(e,t){var i=this.parent,r=this.parent.createElement("div",{className:this.isEdit?Ke:"e-insertedrow"}),n=t.form=this.parent.createElement("form",{id:i.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template){var s=this.parent.element.id+"editSettingsTemplate",o=P({},t.rowData,{isAdd:!this.isEdit},!0),l=this.parent.isReact&&typeof this.parent.editSettings.template!="string",h=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;return l||h?(this.parent.getEditTemplate()(o,this.parent,"editSettingsTemplate",s,null,null,n),this.parent.renderTemplates()):$e(n,this.parent.getEditTemplate()(o,this.parent,"editSettingsTemplate",s,null,null,null,i.root)),cr(s,"Template",this.parent.editSettings),r.appendChild(n),r}for(var p=this.parent.createElement("table",{className:$t,attrs:{cellspacing:"6px",role:"grid"}}),c=this.parent.createElement(me,{attrs:{role:"rowgroup"}}),d=i.getColumns(),f=0;f<d.length;f++)if(!(this.parent.editModule.checkColumnIsGrouped(d[parseInt(f.toString(),10)])||d[parseInt(f.toString(),10)].commands||d[parseInt(f.toString(),10)].commandsTemplate||d[parseInt(f.toString(),10)].type==="checkbox")){var g=this.parent.createElement("tr",{attrs:{role:"row"}}),m=this.parent.createElement("td",{className:fe,attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}});e[d[parseInt(f.toString(),10)].uid].classList.remove("e-input"),m.appendChild(e[d[parseInt(f.toString(),10)].uid]),g.appendChild(m),c.appendChild(g)}return p.appendChild(c),n.appendChild(p),r.appendChild(n),r},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ts,this.destroy),this.parent.off(Ie,this.destroy))},a}(),mv=function(){function a(e,t){this.editType={Inline:yh,Normal:yh,Batch:fv,Dialog:gv},this.parent=e,this.serviceLocator=t,this.renderer=new this.editType[this.parent.editSettings.mode](e,t),this.focus=t.getService("focus")}return a.prototype.addNew=function(e){this.renderer.addNew(this.getEditElements(e),e),this.convertWidget(e)},a.prototype.update=function(e){this.renderer.update(this.getEditElements(e),e);var t=e.isCustomFormValidation;t||(this.parent.notify(Yc,e),this.convertWidget(e))},a.prototype.convertWidget=function(e){for(var t=this.parent,i,r,n=t.editSettings.mode==="Dialog"?ke("#"+t.element.id+"_dialogEdit_wrapper .e-gridform",document):t.editSettings.showAddNewRow&&t.element.querySelector(".e-editedrow")?t.element.querySelector(".e-editedrow").getElementsByClassName("e-gridform")[0]:t.element.getElementsByClassName("e-gridform")[0],s=t.editSettings.mode!=="Batch"?t.getColumns():[t.getColumnByField(e.columnName)],o=0,l=s;o<l.length;o++){var h=l[o];if(this.parent.editSettings.template&&!u(h.field)){var p=P({},e);p.element=n.querySelector("[name="+rt(h.field)+"]"),typeof h.edit.write=="string"?Ue(h.edit.write,window)(p):h.edit.write(p);continue}if(!(this.parent.editModule.checkColumnIsGrouped(h)||h.commands)){h.valueAccessor(h.field,e.rowData,h),r=n.querySelector("[e-mappinguid="+h.uid+"]");var c=h.edit.write;u(r)||(typeof c=="string"?(c=Ue(c,window),c({rowData:e.rowData,element:r,column:h,requestType:e.requestType,row:e.row,foreignKeyData:h.isForeignColumn()&&Ue(h.field,e.foreignKeyData)})):h.edit.write({rowData:e.rowData,element:r,column:h,requestType:e.requestType,row:e.row,foreignKeyData:h.isForeignColumn()&&Ue(h.field,e.foreignKeyData)}),!i&&u(r.getAttribute("disabled"))&&!x(r,"e-checkbox-disabled")&&(this.focusElement(r,e.type),i=!0))}}},a.prototype.focusElement=function(e,t){var i=this.parent.element.querySelector(".e-edit-checkselect");if(!u(i)&&i.nextElementSibling&&i.nextElementSibling.classList.add("e-focus"),this.parent.editSettings.mode==="Batch")this.focus.onClick({target:M(e,"td")},!0);else{var r=!((this.parent.enableVirtualization||this.parent.enableColumnVirtualization)&&this.parent.editSettings.mode==="Normal"),n=e.classList.contains("e-dropdownlist")?e.parentElement:e;(r||(this.parent.enableVirtualization||this.parent.enableColumnVirtualization)&&this.parent.editSettings.newRowPosition==="Bottom"&&x(e,Wt))&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!x(e,Wt)||this.parent.addNewRowFocus)?n.focus():n.focus({preventScroll:!0})}e.classList.contains("e-defaultcell")&&e.setSelectionRange(e.value.length,e.value.length)},a.prototype.getEditElements=function(e){var t=this.parent,i={},r=t.editSettings.mode!=="Batch"?t.getColumns():[t.getColumnByField(e.columnName)];if(e.isCustomFormValidation&&(r=this.parent.columnModel),this.parent.editSettings.template)return{};for(var n=0,s=r.length;n<s;n++){var o=r[parseInt(n.toString(),10)];if(o.commands||o.commandsTemplate){var l=this.serviceLocator.getService("cellRendererFactory"),h=new rn(this.parent),p=l.getCellRenderer(Q.CommandColumn),c=h.generateRows(e.rowData)[0].cells,d=c.filter(function(L){return L.rowID}),f=p.render(d[parseInt(n.toString(),10)],e.rowData,{index:e.row?e.row.getAttribute(Se):0},this.parent.enableVirtualization),g=f.firstElementChild;g.setAttribute("textAlign",f.getAttribute("textAlign")),i[o.uid]=g;continue}if(o.type==="dateonly"&&e.rowData[o.field]instanceof Date){var m=e.rowData[o.field];e.rowData[o.field]=m.getFullYear()+"-"+Zi(m.getMonth()+1)+"-"+Zi(m.getDate())}var v=o.valueAccessor(o.field,e.rowData,o),y={column:o,value:v,type:e.requestType,data:e.rowData},w=o.edit.create,b=void 0;if(o.editTemplate){b=this.parent.createElement("span",{attrs:{"e-mappinguid":o.uid}});var I=this.parent.element.id+o.uid+"editTemplate",k=Ys({},e.rowData,{column:o}),D=this.parent.isReact&&typeof o.editTemplate!="string",W=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(D||W)o.getEditTemplate()(P({index:e.rowIndex},k),this.parent,"editTemplate",I,null,null,b),this.parent.renderTemplates();else{var Z=o.getEditTemplate()(P({index:e.rowIndex},k),this.parent,"editTemplate",I,null,null,null,t.root);$e(b,Z)}}else{if(typeof w=="string"?(w=Ue(w,window),b=w(y)):b=o.edit.create(y),typeof b=="string"){var g=this.parent.createElement("div");g.innerHTML=b,b=g.firstChild}var J=b.tagName!=="input"&&b.querySelectorAll("input").length,X=rt(o.field);$(J?b.querySelector("input"):b,{name:X,"e-mappinguid":o.uid,id:t.element.id+X}),ae(b,["e-input","e-field"],[]),o.textAlign==="Right"&&b.classList.add("e-ralign"),((o.isPrimaryKey||o.isIdentity)&&e.requestType==="beginEdit"||o.isIdentity&&e.requestType==="add")&&b.setAttribute("disabled","")}i[o.uid]=b}return i},a.prototype.destroy=function(){this.renderer.removeEventListener()},a}(),Js=function(){function a(e){this.parent=e}return a.prototype.create=function(e){return $s(this.parent,e.column,"e-field",{type:"text"})},a.prototype.read=function(e){return e.ej2_instances[0].value},a.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy())},a}(),vv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yv=function(a){vv(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.activeClasses=["e-selectionbackground","e-active"],t}return e.prototype.create=function(t){var i=t.column,r="e-field e-boolcell";return i.type==="checkbox"&&(r="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,$s(this.parent,t.column,r,{type:"checkbox",value:t.value})},e.prototype.read=function(t){return t.checked},e.prototype.write=function(t){var i,r;if(u(t.row)||(i=t.row.querySelector(".e-edit-checkselect")),Ue(t.column.field,t.rowData)&&(r=JSON.parse(Ue(t.column.field,t.rowData).toString().toLowerCase())),!u(i)&&t.column.type==="checkbox"){if(this.editType=this.parent.editSettings.mode,this.editRow=t.row,t.requestType!=="add"){var n=this.parent.getRowObjectFromUID(t.row.getAttribute("data-uid"));r=n?n.isSelected:!1}Mi.apply(void 0,[[].slice.call(t.row.getElementsByClassName(fe)),r].concat(this.activeClasses))}this.obj=new Xh(P({label:this.parent.editSettings.mode!=="Dialog"?" ":t.column.headerText,checked:r,disabled:!Hn(t.column,t.requestType,t.element),enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""},t.column.edit.params)),this.addEventListener(),this.obj.appendTo(t.element)},e.prototype.addEventListener=function(){this.cbChange=this.checkBoxChange.bind(this),this.obj.addEventListener(Vr,this.cbChange)},e.prototype.removeEventListener=function(){this.obj.isDestroyed||this.obj.removeEventListener(Vr,this.cbChange)},e.prototype.checkBoxChange=function(t){if(this.editRow&&this.editType!=="Dialog"){var i=!1;t.checked?(i=!0,this.editRow.setAttribute("aria-selected",i.toString())):this.editRow.removeAttribute("aria-selected"),Mi.apply(void 0,[[].slice.call(this.editRow.getElementsByClassName(fe)),i].concat(this.activeClasses))}},e}(Js),Cv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bv=function(a){Cv(e,a);function e(t){var i=a.call(this)||this;return i.parent=t,i.flag=!1,i.removeEventHandler=i.removeEventListener,i}return e.prototype.write=function(t){var i=this.parent.editSettings.mode!=="Dialog";this.column=t.column;var r=new pe(t.column.field,"notequal",null,!0,!1),n={};if(t.column.edit.params)for(var s=Object.keys(t.column.edit.params),o=0;o<s.length;o++)n[s[parseInt(o.toString(),10)]]=s[parseInt(o.toString(),10)]==="query"?t.column.edit.params[s[parseInt(o.toString(),10)]].clone():t.column.edit.params[s[parseInt(o.toString(),10)]];this.obj=new Sr(P({dataSource:this.parent.dataSource instanceof q?this.parent.dataSource:new q(this.parent.dataSource),query:new re().where(r).select(t.column.field),enabled:Hn(t.column,t.requestType,t.element),fields:{value:t.column.field},value:Ue(t.column.field,t.rowData),enableRtl:this.parent.enableRtl,placeholder:i?"":t.column.headerText,popupHeight:"200px",floatLabelType:i?"Never":"Always",sortOrder:"Ascending",cssClass:this.parent.cssClass?this.parent.cssClass:null,close:this.dropDownClose.bind(this)},n)),this.parent.enableVirtualization&&(n.dataSource?this.obj.dataSource=n.dataSource:this.obj.dataSource=t.column.isForeignColumn()?[t.foreignKeyData[0]]:[t.rowData]),this.addEventListener(),this.obj.query.params=this.parent.query.params,this.obj.appendTo(t.element),t.element.setAttribute("name",rt(t.column.field))},e.prototype.dropDownClose=function(t){t.event&&t.event.action==="escape"&&(this.parent.editModule.editCellDialogClose=!0)},e.prototype.addEventListener=function(){this.ddCreated=this.dropdownCreated.bind(this),this.ddOpen=this.dropDownOpen.bind(this),this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this),this.ddComplete=this.ddActionComplete.bind(this),this.obj.addEventListener(Ps,this.ddCreated),this.obj.addEventListener(Ot,this.ddOpen),this.obj.addEventListener(Il,this.ddBeforeOpen),this.obj.addEventListener(ce,this.ddComplete)},e.prototype.removeEventListener=function(){this.obj.isDestroyed||(this.obj.removeEventListener(Ps,this.ddCreated),this.obj.removeEventListener(Ot,this.ddOpen),this.obj.removeEventListener(Il,this.ddBeforeOpen),this.obj.removeEventListener(ce,this.ddComplete))},e.prototype.dropdownCreated=function(t){this.flag=!0},e.prototype.dropdownBeforeOpen=function(){this.parent.enableVirtualization&&(this.column.edit.params&&this.column.edit.params.dataSource?this.obj.dataSource=this.column.edit.params.dataSource:this.obj.dataSource=this.column.isForeignColumn()?this.column.dataSource instanceof q?this.column.dataSource:new q(this.column.dataSource):this.parent.dataSource instanceof q?this.parent.dataSource:new q(this.parent.dataSource))},e.prototype.ddActionComplete=function(t){t.result=A.distinct(t.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&!(this.column.edit.params&&this.column.edit.params.ddEditedData)&&("result"in this.column.dataSource?this.column.dataSource.result=t.result:this.column.dataSource instanceof q&&(this.column.dataSource.dataSource.json=t.result)),this.flag=!1},e.prototype.dropDownOpen=function(t){var i=x(this.obj.element,"e-dialog");if(this.parent.editSettings.mode==="Dialog"&&!u(i)){var r=ke("#"+i.id,document).ej2_instances[0];t.popup.element.style.zIndex=(r.zIndex+1).toString()}},e}(Js),Sv=function(){function a(e){this.parent=e}return a.prototype.keyEventHandler=function(e){if(e.keyCode===13||e.keyCode===9){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),this.dispatchEvent(t)}},a.prototype.create=function(e){return this.instances=new Ne(this.parent.locale),$s(this.parent,e.column,"e-field",{})},a.prototype.read=function(e){return this.obj.value},a.prototype.write=function(e){var t=e.column,i=this.parent.editSettings.mode!=="Dialog";this.obj=new Do(P({value:parseFloat(Ue(e.column.field,e.rowData)),enableRtl:this.parent.enableRtl,placeholder:i?"":e.column.headerText,enabled:Hn(e.column,e.requestType,e.element),floatLabelType:this.parent.editSettings.mode!=="Dialog"?"Never":"Always",locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},t.edit.params)),e.element.setAttribute("name",rt(e.column.field)),this.obj.appendTo(e.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)},a.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())},a}(),wv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Iv=function(a){wv(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.create=function(t){var i={type:"text",value:u(t.value)?"":t.value,style:"text-align:"+t.column.textAlign};return $s(this.parent,t.column,"e-field e-input e-defaultcell",i)},e.prototype.read=function(t){return t.type==="hidden"&&!u(t.ej2_instances[0])&&!u(t.ej2_instances[0].textarea)?t.ej2_instances[0].value:t.value},e.prototype.write=function(t){var i=t.column,r=this.parent.editSettings.mode!=="Dialog",n={element:t.element,floatLabelType:this.parent.editSettings.mode!=="Dialog"?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:Hn(t.column,t.requestType,t.element),placeholder:r?"":t.column.headerText,cssClass:this.parent.cssClass?this.parent.cssClass:""};if(!u(i.edit)&&!u(i.edit.params)&&i.edit.params.multiline){var s=i.valueAccessor(i.field,t.rowData,i);n.value=s}this.obj=new Ip(P(n,i.edit.params)),this.obj.appendTo(t.element),this.parent.editSettings.mode==="Batch"&&this.obj.element.addEventListener("keydown",this.keyEventHandler)},e.prototype.keyEventHandler=function(t){if(t.key==="Enter"||t.key==="Tab"){var i=new Event("change",{bubbles:!1,cancelable:!0});this.dispatchEvent(i)}},e.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())},e}(Js),ap=function(){function a(e,t,i){this.args={},this.currentVirtualData={},this.parent=e,this.renderer=i,this.serviceLocator=t,this.addEventListener()}return a.prototype.clickHandler=function(e){var t=e.target,i=this.parent;i.editSettings.showAddNewRow&&u(i.element.querySelector("."+Ke))||(x(t,ot)&&x(x(t,ot),"e-grid").id===i.element.id||i.frozenRows&&x(t,it)&&!x(t,"e-columnheader"))&&!x(t,"e-unboundcelldiv")&&(this.rowIndex=x(t,fe)?parseInt(t.parentElement.getAttribute(Se),10):-1,i.isEdit&&i.editModule.endEdit())},a.prototype.dblClickHandler=function(e){x(e.target,fe)&&this.parent.editSettings.allowEditOnDblClick&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!x(e.target,"e-addedrow"))&&this.parent.editModule.startEdit(x(e.target,ze))},a.prototype.editComplete=function(e){this.parent.isEdit=!!this.parent.editSettings.showAddNewRow;var t="action";switch(e.requestType){case"save":(!(this.parent.isCheckBoxSelection||this.parent.selectionSettings.type==="Multiple")||!this.parent.isPersistSelection)&&e[""+t]!=="edit"&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&e[""+t]!=="add")&&this.parent.selectRow(e.index),this.parent.trigger(ce,P(e,{requestType:"save",type:ce}));break;case"delete":this.parent.trigger(ce,P(e,{requestType:"delete",type:ce})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex);break}},a.prototype.getEditArgs=function(e,t,i){for(var r=this.parent.getPrimaryKeyFieldNames(),n=[],s=0;s<r.length;s++)n.push(Ue(r[parseInt(s.toString(),10)],e));var o={primaryKey:r,primaryKeyValue:n,requestType:"beginEdit",rowData:e,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:t&&t.foreignKeyData,target:void 0,isScroll:i};return o},a.prototype.startEdit=function(e){var t=this,i=this.parent;if(this.rowIndex=this.editRowIndex=parseInt(e.getAttribute(Se),10),i.enableVirtualization||i.enableColumnVirtualization||i.enableInfiniteScrolling){var r='.e-row[data-rowindex="'+this.rowIndex+'"]',n=this.parent.element.querySelector(r);if(!n)return}var s={data:void 0,index:this.rowIndex,isScroll:!1};if(this.parent.notify(rd,s),pi(i)){var o=i.getRowObjectFromUID(e.getAttribute("data-uid"));this.previousData=o.data}else this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.enableInfiniteScrolling&&!this.previousData?this.previousData=s.data:this.parent.enableVirtualization||(this.previousData=P({},{},this.parent.getForeignKeyColumns().length?this.parent.getRowObjectFromUID(e.getAttribute("data-uid")).data:i.getCurrentViewRecords()[this.rowIndex],!0));var l=P({},{},s.data||this.previousData,!0);this.uid=e.getAttribute("data-uid");var h=i.getRowObjectFromUID(this.uid),p=this.getEditArgs(l,h,s.isScroll);p.row=e,p.isScroll?this.inlineEditHandler(p,e):(this.parent.notify(yl,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),i.trigger(uc,p,function(c){c.type="actionBegin",i.trigger(Ae,c,function(d){d.cancel||t.inlineEditHandler(d,e)})}))},a.prototype.disabledShowAddRow=function(e,t){var i=this.parent.element.querySelector(".e-addedrow"),r=[].slice.call(i?i.querySelectorAll(".e-input"):[]);if(i&&i.querySelector(".e-unboundcell"))for(var n=[].slice.call(i.querySelector(".e-unboundcell").querySelectorAll(".e-btn")),s=0;s<n.length;s++)e?(n[parseInt(s.toString(),10)].classList.remove("e-disabled"),n[parseInt(s.toString(),10)].removeAttribute("disabled")):(n[parseInt(s.toString(),10)].classList.add("e-disabled"),n[parseInt(s.toString(),10)].setAttribute("disabled","disabled"));if(r.length)for(var s=0;s<r.length;s++){var o=r[parseInt(s.toString(),10)],l=o.getAttribute("e-mappinguid"),h=this.parent.getColumnByUid(l),p=x(o,"e-rowcell").querySelector(".e-error");p&&p.classList.remove("e-error"),o.ej2_instances?(t&&u(h.defaultValue)&&(o.ej2_instances[0].value=null,o.value=null),u(e)||(o.ej2_instances[0].enabled=!!(e&&h.allowEditing))):(t&&o.value&&o.value.length&&u(h.defaultValue)&&(o.value=null),u(e)||(e?h.allowEditing&&(o.classList.remove("e-disabled"),o.removeAttribute("disabled")):(o.classList.add("e-disabled"),o.setAttribute("disabled","disabled"))))}},a.prototype.inlineEditHandler=function(e,t){var i=this.parent;i.isEdit=!0,e.row=e.row?e.row:t,i.editSettings.mode!=="Dialog"&&i.clearSelection(),i.editSettings.mode==="Dialog"&&i.selectionModule&&(i.selectionModule.preventFocus=!0,e.row.classList.add("e-dlgeditrow")),this.renderer.update(e),this.uid=t.getAttribute("data-uid"),i.editModule.applyFormValidation(),i.editSettings.showAddNewRow&&!t.classList.contains("e-addedrow")&&this.disabledShowAddRow(!1,!0),e.type="actionComplete",i.trigger(ce,e),i.editSettings.template&&i.editModule.applyFormValidation(void 0,e.form.ej2_instances[0].rules),this.args=e,this.parent.allowTextWrap&&this.parent.notify(dr,{case:"textwrap"})},a.prototype.updateRow=function(e,t){var i=this,r=this.parent;this.editRowIndex=e;var n={requestType:"save",action:"edit",type:Ae,data:t,cancel:!1,previousData:r.getCurrentViewRecords()[parseInt(e.toString(),10)],row:r.getRowByIndex(e)};if(r.showSpinner(),r.enableInfiniteScrolling){this.uid=n.row.getAttribute("data-uid");var s=parseInt(n.row.getAttribute("data-rowindex"),10);this.parent.notify(zd,{index:s})}r.notify(Tn,n),n.promise?n.promise.then(function(){return r.refresh()}).catch(function(o){return i.edFail(o)}):r.enableInfiniteScrolling||r.refresh()},a.prototype.editFormValidate=function(){var e=this.parent,t=e.editModule.editFormValidate(),i={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return e.notify(Bd,i),t&&i.isValid},a.prototype.endEdit=function(){var e=this,t=this.parent;if(!(!this.parent.isEdit||!this.editFormValidate())){var i=P({},{},this.previousData,!0),r=P(this.args,{requestType:"save",type:Ae,data:i,cancel:!1,previousData:this.previousData,selectedRow:t.selectedRowIndex,foreignKeyData:{}}),n=t.editSettings.mode==="Dialog",s=ke("#"+t.element.id+"_dialogEdit_wrapper",document),o=n?s.querySelector(".e-gridform"):t.editSettings.showAddNewRow&&t.element.querySelector("."+Ke)?t.element.querySelector("."+Ke).getElementsByClassName("e-gridform")[0]:t.element.getElementsByClassName("e-gridform")[0],l={virtualData:P({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0};this.parent.notify(io,l),(this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.mode==="Normal"&&Object.keys(l.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=i=r.data=l.virtualData):i=t.editModule.getCurrentEditedData(o,i);var h=[].slice.call(t.element.getElementsByClassName(Ke)).length;if(!l.isAdd&&Object.keys(this.currentVirtualData).length&&!h&&(h=1),n?s.getElementsByClassName(Ke).length:h)r.action="edit",t.trigger(Ae,r,function(p){p.cancel||(e.parent.loadingIndicator.indicatorType==="Spinner"&&t.showSpinner(),e.parent.loadingIndicator.indicatorType==="Shimmer"&&e.parent.showMaskRow(),t.editSettings.showAddNewRow&&e.disabledShowAddRow(!0),t.notify(Tn,p))});else{if(r.action="add",r.selectedRow=0,r.index=this.addedRowIndex,t.notify(fl,{}),t.notify(qt,r),this.addedRowIndex=null,r.cancel)return;this.parent.editSettings.showAddNewRow&&(this.parent.notify(Vi,{}),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.disabledShowAddRow(!0,!0))}}},a.prototype.destroyElements=function(){var e=this.parent;(!e.editSettings.showAddNewRow||e.editSettings.showAddNewRow&&e.element.querySelector(".e-editedrow"))&&(e.editModule.destroyWidgets(),e.editModule.destroyForm()),this.parent.notify(Ts,{})},a.prototype.editHandler=function(e){var t=this;e.promise?e.promise.then(function(i){return t.edSucc(i,e)}).catch(function(i){return t.edFail(i)}):this.editSuccess(e.data,e),this.parent.editSettings.showAddNewRow&&this.parent.editModule.applyFormValidation()},a.prototype.edSucc=function(e,t){this.editSuccess(e,t)},a.prototype.edFail=function(e){this.editFailure(e)},a.prototype.updateCurrentViewData=function(e){!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&(this.parent.getCurrentViewRecords()[this.editRowIndex]=e)},a.prototype.requestSuccess=function(e){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),this.parent.editSettings.mode==="Dialog"&&e.action!=="add"&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))},a.prototype.editSuccess=function(e,t){if(!u(e)&&!(e instanceof Array)){var i="rowData";t.data=P({},P({},t[""+i],t.data),e)}if(this.requestSuccess(t),this.parent.trigger(Ds,t),t.type=ce,this.parent.isEdit=!!this.parent.editSettings.showAddNewRow,this.refreshRow(t.data),this.parent.notify(fl,t),this.parent.editModule.checkLastRow(t.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(t.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.groupSettings.showGroupedColumn){for(var r=t.row,n=this.parent.getRowsObject(),s=r.getAttribute("data-uid"),o=this.parent.getRowObjectFromUID(s),l=function(d){var f=h;n=n.filter(function(g){var m=g.isDataRow&&g!==o;if(m){for(var v=f.parent.groupSettings.columns[parseInt(d.toString(),10)].split("."),y=g.data[v[0]],w=t.data[v[0]],b=1;b<v.length;b++)y=y[v[b]],w=w[v[b]];return m&&y===w}else return m})},h=this,p=0;p<this.parent.groupSettings.columns.length;p++)l(p);var c=n[0];!u(o)&&!u(c)&&o.parentUid!==c.parentUid?this.parent.groupModule.groupedRowReorder(o,c):this.parent.aggregates.length&&this.parent.aggregateModule.refresh(t.data,this.parent.groupSettings.enableLazyLoading?t.row:void 0)}else this.parent.aggregates.length&&this.parent.aggregateModule.refresh(t.data,this.parent.groupSettings.enableLazyLoading?t.row:void 0);this.parent.trigger(ce,t),(!(this.parent.isCheckBoxSelection||this.parent.selectionSettings.type==="Multiple")||!this.parent.isPersistSelection&&!this.parent.selectionSettings.checkboxOnly)&&this.parent.editSettings.mode!=="Dialog"&&this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex),!(this.parent.aggregates.length&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(this.parent.groupModule.getGroupAggregateTemplates(!0).length||this.parent.groupModule.getGroupAggregateTemplates(!1).length))&&(this.parent.removeMaskRow(),this.parent.hideSpinner())},a.prototype.closeForm=function(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen&&this.frozen.classList.remove("e-hiddenrow"))},a.prototype.blazorTemplate=function(){var e=this.parent.getColumns();this.parent.editSettings.template&&this.parent.editSettings.mode==="Normal"&&cr(this.parent.element.id+"editSettingsTemplate","Template",this.parent.editSettings);for(var t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)];i.template&&cr(this.parent.element.id+i.uid),i.editTemplate&&cr(this.parent.element.id+i.uid+"editTemplate")}},a.prototype.editFailure=function(e){this.parent.removeMaskRow(),this.parent.trigger(Ao,{error:e}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:e})},a.prototype.needRefresh=function(){var e=!0,t=this.parent.element.querySelector(".e-gridform");return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&this.parent.editSettings.mode==="Normal"&&!t&&(e=!1),e},a.prototype.refreshRow=function(e){var t=new Wi(this.serviceLocator,null,this.parent),i=this.parent.getRowObjectFromUID(this.uid);if(i){i.changes=e,this.parent.notify(ad,{data:e}),zs(i,this.parent.getForeignKeyColumns(),i.changes),this.needRefresh()&&t.refresh(i,this.parent.getColumns(),!0);for(var r=[].slice.call(this.parent.element.querySelectorAll('[data-rowindex="'+i.index+'"]')),n=0;n<r.length;n++)if(yr(r[parseInt(n.toString(),10)]),this.parent.enableColumnVirtualization&&r[parseInt(n.toString(),10)].querySelectorAll(".e-leftfreeze,.e-rightfreeze,.e-fixedfreeze").length)for(var s=this.parent.getColumns(),o=[].slice.call(r[parseInt(n.toString(),10)].querySelectorAll(".e-leftfreeze,.e-rightfreeze.e-fixedfreeze")),l=0;l<o.length;l++)if(o[parseInt(l.toString(),10)].classList.contains("e-leftfreeze"))o[parseInt(l.toString(),10)].style.left=s[parseInt(l.toString(),10)].valueX-this.parent.translateX+"px";else if(o[parseInt(l.toString(),10)].classList.contains("e-rightfreeze")){var h=parseInt(o[parseInt(l.toString(),10)].getAttribute("data-colindex"),10);o[parseInt(l.toString(),10)].style.right=s[parseInt(h.toString(),10)].valueX+this.parent.translateX+"px"}else o[parseInt(l.toString(),10)].style.left=this.parent.leftrightColumnWidth("left")-this.parent.translateX+"px",o[parseInt(l.toString(),10)].style.right=this.parent.leftrightColumnWidth("right")+this.parent.translateX+"px"}},a.prototype.closeEdit=function(){var e=this;if(!this.parent.isEdit||this.parent.editSettings.showAddNewRow&&this.parent.element.querySelector(".e-addedrow")&&u(this.parent.element.querySelector("."+Ke))){this.parent.editSettings.showAddNewRow&&(this.disabledShowAddRow(!0,!0),this.parent.notify(Vi,{}));return}var t=this.parent,i=P(this.args,{requestType:"cancel",type:Ae,cancel:!1,data:this.previousData,selectedRow:t.selectedRowIndex});t.notify(nd,i),this.blazorTemplate(),t.trigger(Ae,i,function(r){if(!r.cancel){e.parent.editSettings.mode==="Dialog"&&e.parent.notify(Ts,{}),r.type=ce,e.parent.editSettings.showAddNewRow||(t.isEdit=!1),t.editSettings.mode!=="Dialog"&&e.refreshRow(r.data),e.stopEditStatus(),t.isEdit=!1,t.editSettings.showAddNewRow&&(e.disabledShowAddRow(!0),t.editModule.applyFormValidation(),t.isEdit=!0);var n=t.groupSettings.enableLazyLoading&&t.groupSettings.columns.length&&!t.getContentTable().querySelector("tr.e-emptyrow");!t.getContentTable().querySelector("tr.e-emptyrow")&&!t.getContentTable().querySelector("tr.e-row")&&!n&&t.renderModule.emptyRow(),t.editSettings.mode!=="Dialog"&&t.selectRow(e.rowIndex),t.trigger(ce,r)}})},a.prototype.addRecord=function(e,t){var i=this,r=this.parent;if(this.addedRowIndex=t=u(t)?0:t,e){r.notify(qt,{requestType:"save",type:Ae,data:e,selectedRow:0,action:"add",index:t});return}if(!r.isEdit){this.previousData={},this.uid="";var n=r.getColumns(),s={virtualData:{},isScroll:!1};r.editSettings.showAddNewRow||this.parent.notify(io,s);for(var o=0;o<n.length;o++)s.isScroll||n[parseInt(o.toString(),10)].field&&(n[parseInt(o.toString(),10)].type==="string"&&(n[parseInt(o.toString(),10)].defaultValue=this.parent.sanitize(n[parseInt(o.toString(),10)].defaultValue)),A.setValue(n[parseInt(o.toString(),10)].field,n[parseInt(o.toString(),10)].defaultValue,this.previousData));var l={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:Ae,index:t,rowData:this.previousData,target:void 0,isScroll:s.isScroll};(this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(s.virtualData).length&&(l.data=l.rowData=s.virtualData),l.isScroll?this.inlineAddHandler(l):(this.parent.notify(yl,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),r.editSettings.showAddNewRow?this.inlineAddHandler(l):r.trigger(Ae,l,function(h){h.cancel||i.inlineAddHandler(h)}))}},a.prototype.inlineAddHandler=function(e){var t=this.parent;t.isEdit=!0,t.editSettings.mode!=="Dialog"&&t.clearSelection(),this.renderer.addNew(e),t.editModule.applyFormValidation(),e.type=ce,e.row=t.element.querySelector("."+Wt),t.editSettings.showAddNewRow||t.trigger(ce,e),t.editSettings.template&&t.editModule.applyFormValidation(void 0,e.form.ej2_instances[0].rules),this.args=e},a.prototype.deleteRecord=function(e,t){if(this.editRowIndex=this.parent.selectedRowIndex,t){t=t instanceof Array?t:[t];var i=this.parent,r=Object.keys(t).length;e=e||this.parent.getPrimaryKeyFieldNames()[0];for(var n=function(l){var h,p,c=i.currentViewData.some(function(d){return p=d,t[parseInt(l.toString(),10)]===Ue(e,d)||t[parseInt(l.toString(),10)]===d});t[parseInt(l.toString(),10)]=c?p:t[parseInt(l.toString(),10)][""+e]?t[parseInt(l.toString(),10)]:(h={},h[e]=t[parseInt(l.toString(),10)],h)},s=0;s<r;s++)n(s)}var o={requestType:"delete",type:Ae,foreignKeyData:{},data:t||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};u(this.parent.commandDelIndex)||(o.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.notify(qt,o)},a.prototype.stopEditStatus=function(){for(var e=this.parent,t=[].slice.call(e.editSettings.showAddNewRow?[]:e.element.getElementsByClassName(Wt)),i=[].slice.call(e.element.getElementsByClassName(Ke)),r=0;r<t.length;r++)se(t[parseInt(r.toString(),10)]);for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].classList.remove(Ke)},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:gu,handler:this.editHandler},{event:Fo,handler:this.dblClickHandler},{event:Ut,handler:this.clickHandler},{event:Za,handler:this.requestSuccess},{event:An,handler:this.dblClickHandler},{event:Lc,handler:this.editComplete},{event:Fc,handler:this.editComplete},{event:Eu,handler:this.closeEdit},{event:Fd,handler:this.closeForm}],ct(this.parent,this.evtHandlers,!0,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||ct(this.parent,this.evtHandlers,!1)},a.prototype.destroy=function(){this.removeEventListener(),this.renderer.destroy()},a}(),xv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ch=function(a){xv(e,a);function e(t,i,r){var n=a.call(this,t,i)||this;return n.parent=t,n.serviceLocator=i,n.renderer=r,n}return e.prototype.closeEdit=function(){a.prototype.closeEdit.call(this)},e.prototype.addRecord=function(t,i){a.prototype.addRecord.call(this,t,i)},e.prototype.endEdit=function(){a.prototype.endEdit.call(this)},e.prototype.updateRow=function(t,i){a.prototype.updateRow.call(this,t,i)},e.prototype.deleteRecord=function(t,i){a.prototype.deleteRecord.call(this,t,i)},e.prototype.startEdit=function(t){a.prototype.startEdit.call(this,t)},e}(ap),Ev=function(){function a(e,t,i){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.initialRender=!0,this.validationColObj=[],this.addBatchRow=!1,this.prevEditedBatchCell=!1,this.parent=e,this.serviceLocator=t,this.renderer=i,this.focus=t.getService("focus"),this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Ut,handler:this.clickHandler},{event:An,handler:this.dblClickHandler},{event:ks,handler:this.onBeforeCellFocused},{event:Rs,handler:this.onCellFocused},{event:Fo,handler:this.dblClickHandler},{event:at,handler:this.keyDownHandler},{event:Ls,handler:this.editNextValCell},{event:Ie,handler:this.destroy}],ct(this.parent,this.evtHandlers,!0,this),S.add(this.parent.element,"mousedown",this.mouseDownHandler,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(Qt,this.dataBoundFunction),this.parent.addEventListener(Hr,this.batchCancelFunction))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(ct(this.parent,this.evtHandlers,!1),S.remove(this.parent.element,"mousedown",this.mouseDownHandler),this.parent.removeEventListener(Qt,this.dataBoundFunction),this.parent.removeEventListener(Hr,this.batchCancelFunction))},a.prototype.batchCancel=function(){this.parent.focusModule.restoreFocus()},a.prototype.dataBound=function(){this.parent.notify(Qi,{})},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.mouseDownHandler=function(e){u(this.parent.element.querySelector(".e-gridform"))?this.mouseDownElement=void 0:this.mouseDownElement=e.target},a.prototype.clickHandler=function(e){x(e.target,this.parent.element.id+"_add",!0)||((this.parent.isEdit&&M(this.form,"td")!==M(e.target,"td")&&u(this.mouseDownElement)||this.mouseDownElement===e.target)&&(this.saveCell(),this.editNextValCell()),x(e.target,fe)&&!this.parent.isEdit&&this.setCellIdx(e.target))},a.prototype.dblClickHandler=function(e){var t=x(e.target,fe),i=x(e.target,ze),r=i&&parseInt(i.getAttribute(Se),10),n=t&&parseInt(t.getAttribute(_e),10);!u(t)&&!u(r)&&!isNaN(n)&&!t.parentElement.classList.contains(Ke)&&this.parent.getColumns()[parseInt(n.toString(),10)].allowEditing&&this.editCell(r,this.parent.getColumns()[parseInt(n.toString(),10)].field,this.isAddRow(r))},a.prototype.onBeforeCellFocused=function(e){this.parent.isEdit&&this.validateFormObj()&&(e.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(e.keyArgs.action)>-1)&&(e.cancel=!0,e.byClick?e.clickArgs.preventDefault():e.keyArgs.preventDefault())},a.prototype.onCellFocused=function(e){var t=(!e.container.isContent||!e.container.isDataCell)&&!(this.parent.frozenRows&&e.container.isHeader);if(this.parent.focusModule.active&&(this.prevEditedBatchCell=this.parent.focusModule.active.matrix.current.toString()===this.prevEditedBatchCellMatrix().toString(),this.crtRowIndex=[].slice.call(this.parent.focusModule.active.getTable().rows).indexOf(M(e.element,"tr"))),!e.byKey||t){this.parent.isEdit&&t&&this.saveCell();return}var i=e.container.indexes,r=i[0],n=i[1],s=e.element.getAttribute("data-colindex")?parseInt(e.element.getAttribute("data-colindex"),10):n;s!==n&&(n=s),this.parent.frozenRows&&e.container.isContent&&(r+=(this.parent.getContent().querySelector(".e-hiddenrow")?0:this.parent.frozenRows)+this.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length);var o=this.parent.isEdit;if(!this.parent.element.getElementsByClassName("e-popup-open").length)switch(o=o&&!this.validateFormObj(),e.keyArgs.action){case"tab":case"shiftTab":var l=this.parent.isRowDragable()&&this.parent.isDetail()?2:this.parent.isRowDragable()||this.parent.isDetail()?1:0,h=this.parent.getColumns()[n-l];h&&!this.parent.isEdit&&this.editCell(r,h.field),(o||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(r,n);break;case"enter":case"shiftEnter":e.keyArgs.preventDefault();var p={cancel:!1,keyArgs:e.keyArgs};this.parent.notify("beforeFocusCellEdit",p),!p.cancel&&o&&this.editCell(r,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(r,n),this.focus.focus();break}},a.prototype.isAddRow=function(e){return this.parent.getDataRows()[parseInt(e.toString(),10)].classList.contains("e-insertedrow")},a.prototype.editCellFromIndex=function(e,t){this.cellDetails.rowIndex=e,this.cellDetails.cellIndex=t,this.editCell(e,this.parent.getColumns()[parseInt(t.toString(),10)].field,this.isAddRow(e))},a.prototype.closeEdit=function(){var e=this.parent,t=this.parent.getRowsObject(),i={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify($c,i),!i.cancel){e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();for(var r=0;r<t.length;r++){var n=!1,s=t[parseInt(r.toString(),10)].isDirty;n=this.removeBatchElementChanges(t[parseInt(r.toString(),10)],s),n&&t.splice(r,1),n&&r--}e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();var o={requestType:"batchCancel",rows:this.parent.getRowsObject()};e.notify(Hr,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new bi({isDataRow:!0,cells:[new Si({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(Qi,{}),this.parent.notify(vr,{}),o={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger(Hr,o)}},a.prototype.removeBatchElementChanges=function(e,t){var i=this.parent,r=new Wi(this.serviceLocator,null,this.parent),n=!1;if(t){e.isDirty=t;var s=i.getRowElementByUID(e.uid);if(s&&(s.classList.contains("e-insertedrow")?(se(s),n=!0):(zs(e,this.parent.getForeignKeyColumns(),e.data),delete e.changes,delete e.edit,e.isDirty=!1,ae(s,[],["e-hiddenrow","e-updatedtd"]),r.refresh(e,i.getColumns(),!1)),this.parent.aggregates.length>0)){var o="type",l=[];l[""+o]="cancel",this.parent.notify(Fi,l),this.parent.groupSettings.columns.length>0&&this.parent.notify(Sn,l)}}return n},a.prototype.deleteRecord=function(e,t){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(e,t),this.parent.aggregates.length>0&&(this.parent.isReact||this.parent.isVue||this.parent.notify(Fi,{}),this.parent.groupSettings.columns.length>0&&this.parent.notify(Sn,{}),(this.parent.isReact||this.parent.isVue)&&this.parent.notify(Fi,{}))},a.prototype.addRecord=function(e){this.bulkAddRow(e)},a.prototype.endEdit=function(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},a.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},a.prototype.batchSave=function(){var e=this.parent,t="deletedRecords";if(e.isCheckBoxSelection){var i=e.element.querySelector(".e-checkselectall").parentElement;i.classList.contains("e-checkbox-disabled")&&e.pageSettings.totalRecordsCount>e.currentViewData.length&&N([i],["e-checkbox-disabled"])}if(this.saveCell(),!(e.isEdit||this.editNextValCell()||e.isEdit)){var r=this.getBatchChanges();this.parent.selectionSettings.type==="Multiple"&&r[""+t].length&&this.parent.selectionSettings.persistSelection&&(r[""+t]=this.removeSelectedData,this.removeSelectedData=[]);var n={changedRecords:this.parent.getRowsObject().filter(function(o){return o.isDirty&&["add","delete"].indexOf(o.edit)===-1}).map(function(o){return o.data})},s={batchChanges:r,cancel:!1};e.trigger(hc,s,function(o){o.cancel||(e.showSpinner(),e.notify(fu,{changes:r,original:n}))})}},a.prototype.getBatchChanges=function(){for(var e={addedRecords:[],deletedRecords:[],changedRecords:[]},t=this.parent.getRowsObject(),i=0,r=t;i<r.length;i++){var n=r[i];if(n.isDirty)switch(n.edit){case"add":e.addedRecords.push(n.changes);break;case"delete":e.deletedRecords.push(n.data);break;default:e.changedRecords.push(n.changes)}}return e},a.prototype.removeRowObjectFromUID=function(e){for(var t=this.parent.getRowsObject(),i=0,r=t.length;i<r&&t[parseInt(i.toString(),10)].uid!==e;i++);t.splice(i,1)},a.prototype.addRowObject=function(e){var t=this.parent,i=t.editSettings.newRowPosition==="Top",r=e.clone();i?t.getRowsObject().unshift(r):t.getRowsObject().push(r)},a.prototype.bulkDelete=function(e,t){var i=this;this.removeSelectedData=[];var r=this.parent,n=r.selectedRowIndex,s=r.getSelectedRows(),o={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:n,rowData:t||r.getSelectedRecords()[0],cancel:!1};t?o.row=r.editModule.deleteRowUid?r.getRowElementByUID(r.editModule.deleteRowUid):r.getRows()[r.getCurrentViewRecords().indexOf(t)]:o.row=s[0],o.row&&r.trigger(lc,o,function(l){if(!l.cancel){if(i.removeSelectedData=r.getSelectedRecords(),r.clearSelection(),l.row=l.row?l.row:t?r.getRows()[parseInt(n.toString(),10)]:s[0],s.length===1||t){var h=l.row.getAttribute("data-uid");if(h=t&&i.parent.editModule.deleteRowUid?h=i.parent.editModule.deleteRowUid:h,l.row.classList.contains("e-insertedrow"))i.removeRowObjectFromUID(h),se(l.row);else{var p=r.getRowObjectFromUID(h);p.isDirty=!0,p.edit="delete",ae(l.row,["e-hiddenrow","e-updatedtd"],[]),r.frozenRows&&n<r.frozenRows&&r.getDataRows().length>=r.frozenRows&&r.getHeaderTable().querySelector(me).appendChild(r.getRowByIndex(r.frozenRows-1))}delete l.row}else{t&&(n=parseInt(l.row.getAttribute(Se),10));for(var c=0;c<s.length;c++){var d=s[parseInt(c.toString(),10)].getAttribute("data-uid");if(s[parseInt(c.toString(),10)].classList.contains("e-insertedrow"))i.removeRowObjectFromUID(d),se(s[parseInt(c.toString(),10)]);else{ae(s[parseInt(c.toString(),10)],["e-hiddenrow","e-updatedtd"],[]);var f=r.getRowObjectFromUID(d);f.isDirty=!0,f.edit="delete",delete s[parseInt(c.toString(),10)],r.frozenRows&&n<r.frozenRows&&r.getDataRows().length>=r.frozenRows&&r.getHeaderTable().querySelector(me).appendChild(r.getRowByIndex(r.frozenRows-1))}}}i.refreshRowIdx(),t&&(r.editModule.deleteRowUid=void 0),r.isCheckBoxSelection||r.selectRow(n),r.trigger(Ua,l),r.notify(Ua,{rows:i.parent.getRowsObject()}),r.notify(Qi,{})}})},a.prototype.refreshRowIdx=function(){for(var e=this.parent,t=e.getAllDataRows(!0),i=e.getRowsObject().filter(function(o){return!o.isDetailRow}),r=0,n=0,s=t.length;r<s;r++)t[parseInt(r.toString(),10)].classList.contains(ze)&&!t[parseInt(r.toString(),10)].classList.contains("e-hiddenrow")?(t[parseInt(r.toString(),10)].setAttribute(Se,n.toString()),t[parseInt(r.toString(),10)].setAttribute(Ln,(n+1).toString()),i[parseInt(r.toString(),10)].index=n,n++):(t[parseInt(r.toString(),10)].removeAttribute(Se),t[parseInt(r.toString(),10)].removeAttribute(Ln),i[parseInt(r.toString(),10)].index=-1)},a.prototype.bulkAddRow=function(e){var t=this,i=this.parent;if(!i.editSettings.allowAdding){i.isEdit&&this.saveCell();return}if(i.isEdit&&(this.saveCell(),this.parent.notify(Ls,{})),!this.validateFormObj()){if(this.initialRender){for(var r=i.getVisibleColumns(),n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].validationRules&&r[parseInt(n.toString(),10)].validationRules.required){var s={field:r[parseInt(n.toString(),10)].field.slice(),cellIdx:n};this.validationColObj.push(s)}this.initialRender=!1}this.parent.element.classList.add("e-editing");var o=e||this.getDefaultData(),l={defaultData:o,primaryKey:i.getPrimaryKeyFieldNames(),cancel:!1};i.trigger(oc,l,function(h){if(!h.cancel){t.isAdded=!0,i.clearSelection();var p=new Wi(t.serviceLocator,null,t.parent),c=new rn(t.parent),d=c.generateRows([h.defaultData]),f=p.render(d[0],i.getColumns());yr(f);for(var g,m,v=0;v<t.parent.groupSettings.columns.length;v++)f.insertBefore(t.parent.createElement("td",{className:"e-indentcell"}),f.firstChild),d[0].cells.unshift(new Si({cellType:Q.Indent}));var y=i.getContentTable().querySelector(me);if(f.classList.add("e-insertedrow"),y.querySelector(".e-emptyrow")){var w=y.querySelector(".e-emptyrow");w.parentNode.removeChild(w),i.frozenRows&&i.element.querySelector(".e-frozenrow-empty")&&i.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty")}i.frozenRows&&i.editSettings.newRowPosition==="Top"?y=i.getHeaderTable().querySelector(me):y=i.getContentTable().querySelector(me),t.parent.editSettings.newRowPosition==="Top"?y.insertBefore(f,y.firstChild):y.appendChild(f),R([].slice.call(f.getElementsByClassName(fe)),["e-updatedtd"]),d[0].isDirty=!0,d[0].changes=P({},{},d[0].data,!0),d[0].edit="add",t.addRowObject(d[0]),t.refreshRowIdx(),t.focus.forgetPrevious(),i.notify(ja,{rows:t.parent.getRowsObject()});var b=t.getBatchChanges(),I=t.getBottomIndex();t.parent.editSettings.newRowPosition==="Top"?i.selectRow(0):i.selectRow(I),e||(m=t.findNextEditableCell(0,!0),g=i.getColumns()[parseInt(m.toString(),10)],t.parent.editSettings.newRowPosition==="Top"?t.editCell(0,g.field,!0):t.editCell(I,g.field,!0)),t.parent.aggregates.length>0&&(e||b[Zr].length)&&t.parent.notify(Fi,{});var k={defaultData:h.defaultData,row:f,columnObject:g,columnIndex:m,primaryKey:h.primaryKey,cell:u(m)?void 0:f.cells[parseInt(m.toString(),10)]};i.trigger(ja,k)}})}},a.prototype.findNextEditableCell=function(e,t,i){for(var r=this.parent.getColumns(),n=r.length,s,o=e;o<n;o++)if(s=i?u(r[parseInt(o.toString(),10)].validationRules):!1,t&&(!r[parseInt(o.toString(),10)].template||r[parseInt(o.toString(),10)].field)&&r[parseInt(o.toString(),10)].allowEditing&&r[parseInt(o.toString(),10)].visible&&!(r[parseInt(o.toString(),10)].isIdentity&&r[parseInt(o.toString(),10)].isPrimaryKey)&&!s)return o;return-1},a.prototype.getDefaultData=function(){for(var e=this.parent,t={},i={number:0,string:null,boolean:!1,date:null,datetime:null},r=0,n=e.columnModel;r<n.length;r++){var s=n[r];s.field&&st(s.field,Object.keys(s).indexOf("defaultValue")>=0?s.defaultValue:i[s.type],t)}return t},a.prototype.setCellIdx=function(e){var t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=e.cellIndex-t,this.cellDetails.rowIndex=parseInt(e.getAttribute("index"),10)},a.prototype.editCell=function(e,t,i){var r=this.parent,n=r.getColumnByField(t);this.index=e,this.field=t,this.isAdd=i;var s=r.isEdit&&!(this.cellDetails.column.field===t&&this.cellDetails.rowIndex===e&&this.parent.getDataRows().length-1!==e&&this.prevEditedBatchCell);r.editSettings.allowEditing&&(!s&&(n.allowEditing||!n.allowEditing&&r.focusModule.active&&r.focusModule.active.getTable().rows[this.crtRowIndex]&&r.focusModule.active.getTable().rows[this.crtRowIndex].classList.contains("e-insertedrow"))?this.editCellExtend(e,t,i):s&&(this.editNext=!0,this.saveCell()))},a.prototype.editCellExtend=function(e,t,i){var r=this,n=this.parent,s=n.getColumnByField(t),o=n.getPrimaryKeyFieldNames();if(!n.isEdit){var l=P({},{},this.getDataByIndex(e),!0),h=n.getDataRows()[parseInt(e.toString(),10)];if(l=P({},{},this.getDataByIndex(e),!0),o[0]===s.field&&!h.classList.contains("e-insertedrow")||s.columns||s.isPrimaryKey&&s.isIdentity||s.commands){this.parent.isLastCellPrimaryKey=!0;return}this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing");var p=n.getRowObjectFromUID(h.getAttribute("data-uid")),c=[].slice.apply(h.cells),d={columnName:s.field,isForeignKey:!u(s.foreignKeyValue),primaryKey:o,rowData:l,validationRules:P({},s.validationRules?s.validationRules:{}),value:Ue(s.field,l),type:i?"add":"edit",cancel:!1,foreignKeyData:p&&p.foreignKeyData};d.cell=c[this.getColIndex(c,this.getCellIdx(s.uid))],d.row=h,d.columnObject=s,d.cell&&n.trigger(pc,d,function(f){f.cancel||(f.cell=f.cell?f.cell:c[r.getColIndex(c,r.getCellIdx(s.uid))],f.row=f.row?f.row:h,f.columnObject=f.columnObject?f.columnObject:s,r.cellDetails={rowData:l,column:s,value:f.value,isForeignKey:f.isForeignKey,rowIndex:e,cellIndex:parseInt(f.cell.getAttribute(_e),10),foreignKeyData:f.foreignKeyData},f.cell.classList.contains("e-updatedtd")&&(r.isColored=!0,f.cell.classList.remove("e-updatedtd")),n.isEdit=!0,n.clearSelection(),(!n.isCheckBoxSelection||!n.isPersistSelection)&&n.selectRow(r.cellDetails.rowIndex,!0),r.renderer.update(f),r.parent.notify(Qc,f),r.form=ke("#"+n.element.id+"EditForm",n.element),n.editModule.applyFormValidation([s]),r.parent.element.querySelector(".e-gridpopup").style.display="none")})}},a.prototype.updateCell=function(e,t,i){var r=this.parent,n=r.getColumnByField(t),s=r.getColumnIndexByField(t);if(n&&!n.isPrimaryKey&&n.allowEditing){var o=this.parent.isSpan?mo(r,e,s):Ju(this.parent,n,e,s);if(this.parent.isSpan&&!o)return;var l=r.getRowObjectFromUID(o.parentElement.getAttribute("data-uid"));if(r.isEdit||!l.changes&&(!(i instanceof Date)&&l.data[""+t]!==i||i instanceof Date&&new Date(l.data[""+t]).toString()!==new Date(i).toString())||l.changes&&(!(i instanceof Date)&&l.changes[""+t]!==i||i instanceof Date&&new Date(l.changes[""+t]).toString()!==new Date(i).toString())){this.refreshTD(o,n,l,i);var h=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if((this.parent.isReact&&this.parent.requireTemplateRef||h&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&n.template){var p=this,c=this.newReactTd;p.parent.renderTemplates(function(){p.parent.trigger(Ur,{cell:c||o,column:n,data:l.changes})})}else(this.parent.isReact||h)&&n.template?(this.parent.renderTemplates(),this.parent.trigger(Ur,{cell:this.newReactTd||o,column:n,data:l.changes})):this.parent.trigger(Ur,{cell:this.newReactTd||o,column:n,data:l.changes})}}},a.prototype.setChanges=function(e,t,i){if(e.changes||(e.changes=P({},{},e.data,!0)),u(t)||(typeof i=="string"&&(i=this.parent.sanitize(i)),A.setValue(t,i,e.changes)),e.data[""+t]!==i){var r=this.parent.getColumnByField(t).type;r==="date"||r==="datetime"?new Date(e.data[""+t]).toString()!==new Date(i).toString()&&(e.isDirty=!0):e.isDirty=!0}},a.prototype.updateRow=function(e,t){for(var i=Object.keys(t),r=0,n=i;r<n.length;r++){var s=n[r];this.updateCell(e,s,t[""+s])}},a.prototype.getCellIdx=function(e){var t=this.parent.getColumnIndexByUid(e)+this.parent.groupSettings.columns.length;return(!u(this.parent.detailTemplate)||!u(this.parent.childGrid))&&t++,this.parent.isRowDragable()&&t++,t},a.prototype.refreshTD=function(e,t,i,r){var n=new xt(this.parent,this.serviceLocator);r=t.type==="number"&&!u(r)?parseFloat(r):r,i&&(this.setChanges(i,t.field,r),zs(i,this.parent.getForeignKeyColumns(),i.changes));var s=i?i.cells:void 0,o,l;this.parent.isReact&&(o=e.parentElement,l=e.cellIndex);var h=0;i&&n.refreshTD(e,s[this.getCellIdx(t.uid)-h],i.changes,{index:this.getCellIdx(t.uid)}),this.parent.isReact?(this.newReactTd=o.cells[parseInt(l.toString(),10)],o.cells[parseInt(l.toString(),10)].classList.add("e-updatedtd")):e.classList.add("e-updatedtd"),e.classList.add("e-updatedtd"),this.parent.notify(Qi,{})},a.prototype.getColIndex=function(e,t){var i=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(i=this.parent.groupSettings.columns.length),(!u(this.parent.detailTemplate)||!u(this.parent.childGrid))&&i++,this.parent.isRowDragable()&&i++;for(var r=0;r<e.length;r++){var n=parseInt(e[parseInt(r.toString(),10)].getAttribute(_e),10);if(n===t-i)return r}return-1},a.prototype.editNextValCell=function(){var e=this.parent,t=e.element.querySelectorAll(".e-insertedrow"),i=t.length===1;if(i&&this.isAdded&&!e.isEdit){for(var r=this.getBottomIndex(),n=this.cellDetails.cellIndex;n<e.getColumns().length;n++){if(e.isEdit)return;var s=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),o=e.getColumns()[parseInt(s.toString(),10)];if(o){if(this.parent.editSettings.newRowPosition==="Bottom")this.editCell(r,o.field,!0);else{var l={index:0,column:o};this.parent.notify(Ad,l),this.editCell(l.index,o.field,!0)}this.saveCell()}}e.isEdit||(this.isAdded=!1)}else if(!i&&this.isAdded&&!e.isEdit){for(var n=0;n<t.length&&!e.isEdit;n++)for(var h=0;h<this.validationColObj.length&&!e.isEdit;h++)t[parseInt(n.toString(),10)].querySelectorAll("td:not(.e-hide)")[this.validationColObj[parseInt(h.toString(),10)].cellIdx].innerHTML===""&&(this.editCell(parseInt(t[parseInt(n.toString(),10)].getAttribute("data-rowindex"),10),this.validationColObj[parseInt(h.toString(),10)].field),this.validateFormObj()&&this.saveCell());e.isEdit||(this.isAdded=!1)}},a.prototype.escapeCellEdit=function(){var e=this.generateCellArgs();e.value=e.previousValue,(e.value||!this.cellDetails.column.validationRules)&&this.successCallBack(e,e.cell.parentElement,e.column,!0)(e)},a.prototype.generateCellArgs=function(){var e=this.parent;this.parent.element.classList.remove("e-editing");var t=this.cellDetails.column,i={};i[t.field]=Ue(t.field,this.cellDetails.rowData);var r=e.editModule.getCurrentEditedData(this.form,i),n=P({},r);r=P({},r,this.cellDetails.rowData);var s=Ue(t.field,n);!u(t.field)&&!nt(s)&&st(t.field,s,r);var o={columnName:t.field,value:Ue(t.field,r),rowData:this.cellDetails.rowData,column:t,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return o.cell=this.form.parentElement,o.columnObject=t,o},a.prototype.saveCell=function(e){if(!(this.preventSaveCell||!this.form)){var t=this.parent;if(!(!e&&(!t.isEdit||this.validateFormObj()))){this.preventSaveCell=!0;var i=this.generateCellArgs(),r=i.cell.parentElement,n=i.column;i.cell.removeAttribute("aria-label"),e?this.successCallBack(i,r,n)(i):(t.trigger(cc,i,this.successCallBack(i,r,n)),t.notify(Kc,{formObj:this.form}))}}},a.prototype.successCallBack=function(e,t,i,r){var n=this;return function(s){var o=n.parent;if(s.cell=s.cell?s.cell:n.form.parentElement,s.columnObject=s.columnObject?s.columnObject:i,s.cancel){if(n.preventSaveCell=!1,n.editNext){if(n.editNext=!1,n.cellDetails.rowIndex===n.index&&n.cellDetails.column.field===n.field)return;n.editCellExtend(n.index,n.field,n.isAdd)}return}o.editModule.destroyWidgets([i]),o.isEdit=!1,o.editModule.destroyForm(),n.parent.notify(vr,{});var l=o.getRowObjectFromUID(t.getAttribute("data-uid"));if(n.refreshTD(s.cell,i,l,s.value),n.parent.isReact&&(s.cell=n.newReactTd),N([t],[Ke,"e-batchrow"]),N([s.cell],["e-editedbatchcell","e-boolcell"]),(!u(s.value)&&s.value.toString()===(u(n.cellDetails.value)?"":n.cellDetails.value).toString()&&!n.isColored||u(s.value)&&u(l.data[i.field])&&u(n.cellDetails.value)&&!s.cell.parentElement.classList.contains("e-insertedrow"))&&s.cell.classList.remove("e-updatedtd"),u(r)){var h=o.isReact&&i.template&&typeof i.template!="string",p=o.parentDetails&&o.parentDetails.parentInstObj&&o.parentDetails.parentInstObj.isReact;h||p?o.requireTemplateRef?o.renderTemplates(function(){o.trigger(pa,s)}):(o.renderTemplates(),o.trigger(pa,s)):o.trigger(pa,s)}if(o.notify(Qi,{}),n.isColored=!1,n.parent.aggregates.length>0&&(n.parent.isReact||n.parent.isVue||n.parent.notify(Fi,{}),n.parent.groupSettings.columns.length>0&&!n.isAddRow(n.cellDetails.rowIndex)&&n.parent.notify(Sn,{}),(n.parent.isReact||n.parent.isVue)&&n.parent.notify(Fi,{})),n.preventSaveCell=!1,n.editNext){if(n.editNext=!1,n.cellDetails.rowIndex===n.index&&n.cellDetails.column.field===n.field&&n.prevEditedBatchCell)return;var c=o.getColumnByField(n.field);c&&(c.allowEditing||!c.allowEditing&&o.focusModule.active&&o.focusModule.active.getTable().rows[n.crtRowIndex]&&o.focusModule.active.getTable().rows[n.crtRowIndex].classList.contains("e-insertedrow"))&&n.editCellExtend(n.index,n.field,n.isAdd)}r&&o.notify(zn,{})}},a.prototype.prevEditedBatchCellMatrix=function(){var e=[],t=this.parent,i=t.focusModule.active.getTable().querySelector(".e-editedbatchcell");if(i){var r=i.parentElement,n=[].slice.call(this.parent.focusModule.active.getTable().rows).indexOf(r),s=[].slice.call(r.cells).indexOf(i);e=[n,s]}return e},a.prototype.getDataByIndex=function(e){var t=this.parent.getRowObjectFromUID(this.parent.getDataRows()[parseInt(e.toString(),10)].getAttribute("data-uid"));return t.changes?t.changes:t.data},a.prototype.keyDownHandler=function(e){if(this.addBatchRow||(e.action==="tab"||e.action==="shiftTab")&&this.parent.isEdit){var t=this.parent,i=this.getBottomIndex(),r=x(e.target,fe);if(this.addBatchRow||r&&!this.parent.isReact){var n=void 0;if(r&&(n=r.querySelector(".e-field")),this.addBatchRow||n){var s=this.parent.getVisibleColumns(),o=e.action==="tab"?s.length-1:0;(this.addBatchRow||s[parseInt(o.toString(),10)].field===n.getAttribute("id").slice(this.parent.element.id.length))&&(this.cellDetails.rowIndex===i&&e.action==="tab"?(t.editSettings.newRowPosition==="Top"?(t.editSettings.newRowPosition="Bottom",this.addRecord(),t.editSettings.newRowPosition="Top"):this.addRecord(),this.addBatchRow=!1):this.saveCell())}}}},a.prototype.addCancelWhilePaging=function(){this.validateFormObj()&&(this.parent.notify(Mo,{}),this.parent.isEdit=!1,this.editNext=!1,this.mouseDownElement=void 0,this.isColored=!1)},a.prototype.getBottomIndex=function(){var e=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+e[Zr].length-e[Bo].length-1},a}(),Dv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kv=function(a){Dv(e,a);function e(t,i,r){var n=a.call(this,t,i)||this;return n.parent=t,n.serviceLocator=i,n.renderer=r,n}return e.prototype.closeEdit=function(){a.prototype.closeEdit.call(this)},e.prototype.addRecord=function(t,i){a.prototype.addRecord.call(this,t,i)},e.prototype.endEdit=function(){a.prototype.endEdit.call(this)},e.prototype.updateRow=function(t,i){a.prototype.updateRow.call(this,t,i)},e.prototype.deleteRecord=function(t,i){a.prototype.deleteRecord.call(this,t,i)},e.prototype.startEdit=function(t){a.prototype.startEdit.call(this,t)},e}(ap),Rv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Wn.Inject(_m);var bh=function(a){Rv(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.prototype.write=function(t){this.edit=this.parent.editModule,t.column.editType==="datepickeredit"?this.obj=new Wn(P(Sh(t,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),t.column.edit.params)):t.column.editType==="datetimepickeredit"&&(this.obj=new Uo(P(Sh(t,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),t.column.edit.params))),this.obj.appendTo(t.element)},e}(Js);function Sh(a,e,t,i,r){var n=e!=="Dialog",s=Hs(a.column.format,a.column.type),o=Ue(a.column.field,a.rowData);return o=o?new Date(o):null,{floatLabelType:n?"Never":"Always",value:o,format:s,placeholder:n?"":a.column.headerText,enableRtl:t,enabled:Hn(a.column,a.requestType,a.element),cssClass:i||null,close:Av.bind(r)}}function Av(a){a.event&&a.event.action==="escape"&&(this.edit.editCellDialogClose=!0)}var Tv=function(){function a(e){this.parent=e}return a.prototype.read=function(e,t){return t},a.prototype.write=function(){},a.prototype.destroy=function(){},a}(),Mv=function(){function a(e,t){this.isShowAddedRowValidate=!1,this.editType={Inline:Ch,Normal:Ch,Batch:Ev,Dialog:kv},this.fieldname="",this.data={},this.editCellDialogClose=!1,this.parent=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}return a.prototype.updateColTypeObj=function(){for(var e=this.parent.columnModel,t=0;t<e.length;t++)if(this.parent.editSettings.template||e[parseInt(t.toString(),10)].editTemplate){var i="templateedit";e[parseInt(t.toString(),10)].edit=P(new a.editCellType[""+i](this.parent),e[parseInt(t.toString(),10)].edit||{})}else e[parseInt(t.toString(),10)].edit=P(new a.editCellType[e[parseInt(t.toString(),10)].editType&&a.editCellType[e[parseInt(t.toString(),10)].editType]?e[parseInt(t.toString(),10)].editType:"defaultedit"](this.parent,this.serviceLocator),e[parseInt(t.toString(),10)].edit||{});this.parent.log("primary_column_missing")},a.prototype.getModuleName=function(){return"edit"},a.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=this.parent,i=0,r=Object.keys(e.properties);i<r.length;i++){var n=r[i];switch(n){case"allowAdding":case"allowDeleting":case"allowEditing":(t.editSettings.allowAdding||t.editSettings.allowEditing||t.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),t.isEdit=!!t.editSettings.showAddNewRow,t.refresh();break}}},a.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy(),this.renderer=new mv(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},a.prototype.initialEnd=function(){this.updateColTypeObj()},a.prototype.startEdit=function(e){var t=this.parent;if(!(!t.editSettings.allowEditing||t.isEdit&&(!t.editSettings.showAddNewRow||t.editSettings.showAddNewRow&&!u(t.element.querySelector("."+Ke)))||t.editSettings.mode==="Batch")){if(this.parent.element.classList.add("e-editing"),!t.getSelectedRows().length||u(this.parent.getRowByIndex(parseInt(this.parent.getSelectedRows()[0].getAttribute("data-rowindex"),10)))){if(!e){this.showDialog("EditOperationAlert",this.alertDObj);return}}else e||(e=t.getSelectedRows()[0]);if(this.parent.enableVirtualization&&this.parent.editSettings.mode==="Normal"){var i=parseInt(e.getAttribute("data-rowindex"),10);e=this.parent.getRowByIndex(i)}var r=t.getContent().querySelector("tr:last-child"),n=t.getHeaderContent().querySelector("tbody");t.frozenRows&&u(r)&&n&&n.querySelector("tr:last-child")?this.isLastRow=e.rowIndex===parseInt(t.getHeaderContent().querySelector("tbody").querySelector("tr:last-child").getAttribute("data-rowindex"),10):r&&(this.isLastRow=e.rowIndex===r.rowIndex),e.style.display!=="none"&&(this.editModule.startEdit(e),this.refreshToolbar(),t.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}),t.editSettings.showAddNewRow&&this.destroyToolTip())}},a.prototype.checkLastRow=function(e,t){var i=this.isLastRow;this.parent.height!=="auto"&&this.parent.editSettings.newRowPosition==="Bottom"&&t&&t.requestType==="add"&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?R([].slice.call(e.getElementsByClassName(fe)),"e-lastrowadded"):i&&e&&e.classList&&R([].slice.call(e.getElementsByClassName(fe)),"e-lastrowcell")},a.prototype.closeEdit=function(){if(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length){this.showDialog("CancelEdit",this.dialogObj);return}this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(Du,{}),this.parent.editSettings.showAddNewRow&&this.destroyToolTip()},a.prototype.refreshToolbar=function(){this.parent.notify(Qi,{})},a.prototype.addRecord=function(e,t){if(this.parent.editSettings.allowAdding){var i={startEdit:!0};e||this.parent.notify(ld,i),i.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(e,t),this.refreshToolbar(),this.parent.notify("start-add",{}))}},a.prototype.deleteRecord=function(e,t){var i=this.parent;if(i.editSettings.allowDeleting){if(!t&&!i.getSelectedRecords().length&&u(i.commandDelIndex)){this.showDialog("DeleteOperationAlert",this.alertDObj);return}if(i.editSettings.showDeleteConfirmDialog){this.fieldname=e,this.data=t,this.showDialog("ConfirmDelete",this.dialogObj);return}this.editModule.deleteRecord(e,t)}},a.prototype.deleteRow=function(e){this.deleteRowUid=e.getAttribute("data-uid");var t=this.parent.getRowObjectFromUID(this.deleteRowUid);u(t)||this.deleteRecord(null,t.data)},a.prototype.endEdit=function(){if(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.showConfirmDialog&&(u(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(Ls,{}),u(this.formObj)||this.formObj.validate())){this.showDialog("BatchSaveConfirm",this.dialogObj);return}this.endEditing()},a.prototype.updateCell=function(e,t,i){this.editModule.updateCell(e,t,i)},a.prototype.updateRow=function(e,t){this.editModule.updateRow(e,t)},a.prototype.batchCancel=function(){this.closeEdit()},a.prototype.batchSave=function(){this.endEdit()},a.prototype.editCell=function(e,t){this.editModule.editCell(e,t)},a.prototype.editFormValidate=function(){var e=this.formObj?this.formObj.validate():!0,t=this.mFormObj?this.mFormObj.validate():!0,i=this.frFormObj?this.frFormObj.validate():!0;return e&&t&&i},a.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},a.prototype.getCurrentEditCellData=function(){var e=this.getCurrentEditedData(this.formObj.element,{});return e[Object.keys(e)[0]]},a.prototype.saveCell=function(){this.editModule.saveCell()},a.prototype.endEditing=function(){this.parent.editSettings.showAddNewRow||this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.isShowAddedRowValidate=!1,this.refreshToolbar()},a.prototype.showDialog=function(e,t){t.content="<div>"+this.l10n.getConstant(e)+"</div>",t.dataBind(),t.show(),this.parent.enableRtl&&t.refresh()},a.prototype.getValueFromType=function(e,t){var i=t;switch(e.type){case"number":i=isNaN(parseFloat(t))?null:parseFloat(t);break;case"boolean":e.editType!=="booleanedit"&&(i=t===this.l10n.getConstant("True")||t===!0);break;case"date":case"datetime":e.editType!=="datepickeredit"&&e.editType!=="datetimepickeredit"&&t&&t.length?i=new Date(t):t===""&&(i=null);break;case"dateonly":i=t&&(t=new Date(t))?t.getFullYear()+"-"+Zi(t.getMonth()+1)+"-"+Zi(t.getDate()):null;break}return i},a.prototype.destroyToolTip=function(){for(var e=[].slice.call(this.parent.element.getElementsByClassName("e-griderror")),t=0,i=e;t<i.length;t++){var r=i[t];se(r)}this.parent.getContent().firstElementChild.style.position="relative",this.parent.isFrozenGrid()&&(this.parent.element.querySelector(".e-gridheader")&&(this.parent.element.querySelector(".e-gridheader").style.position=""),this.parent.element.querySelector(".e-gridcontent").style.position="")},a.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},a.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},a.prototype.alertClick=function(){this.alertDObj.hide()},a.prototype.dlgWidget=function(e,t){var i=this.parent.createElement("div",{id:this.parent.element.id+t});this.parent.element.appendChild(i);var r={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""};r.buttons=e;var n=new Cr(r),s="isStringTemplate";return n[""+s]=!0,n.appendTo(i),n},a.prototype.dlgCancel=function(){this.parent.pagerModule&&(this.parent.pagerModule.isForceCancel=!1),this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide(),this.parent.notify("cancelcnfrmDlg",{})},a.prototype.dlgOk=function(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord(this.fieldname,this.data);break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):this.parent.editSettings.mode==="Batch"&&this.editModule.addCancelWhilePaging(),this.parent.pagerModule&&(this.parent.pagerModule.isForceCancel=!1),this.executeAction();break}this.dlgCancel()},a.prototype.destroyEditComponents=function(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm()),this.destroy()},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.eventDetails=[{event:vt,handler:this.onPropertyChanged},{event:ci,handler:this.initialEnd},{event:at,handler:this.keyPressHandler},{event:Jr,handler:this.updateColTypeObj},{event:vr,handler:this.destroyToolTip},{event:Jt,handler:this.preventBatch},{event:Mo,handler:this.destroyForm},{event:Ie,handler:this.destroyEditComponents}],ct(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(Ae,this.actionBeginFunction),this.parent.addEventListener(ce,this.actionCompleteFunction))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(ct(this.parent,this.eventDetails,!1),this.parent.removeEventListener(ce,this.actionCompleteFunction),this.parent.removeEventListener(Ae,this.actionBeginFunction))},a.prototype.actionComplete=function(e){var t=["add","beginEdit","save","delete","cancel","filterAfterOpen","filterchoicerequest"];t.indexOf(e.requestType)<0&&(this.parent.isEdit=!!this.parent.editSettings.showAddNewRow),e.requestType==="batchsave"&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()},a.prototype.getCurrentEditedData=function(e,t){var i=this.parent;if(i.editSettings.template){for(var r=[].slice.call(e.elements),n=0;n<r.length;n++)if((r[parseInt(n.toString(),10)].hasAttribute("name")&&r[parseInt(n.toString(),10)].className!=="e-multi-hidden"||r[parseInt(n.toString(),10)].classList.contains("e-multiselect"))&&!(r[parseInt(n.toString(),10)].type==="hidden"&&(x(r[parseInt(n.toString(),10)],"e-switch-wrapper")||x(r[parseInt(n.toString(),10)],"e-checkbox-wrapper")))){var s=r[parseInt(n.toString(),10)].hasAttribute("name")?Al(r[parseInt(n.toString(),10)].getAttribute("name")):Al(r[parseInt(n.toString(),10)].getAttribute("id")),o=i.getColumnByField(s)||{field:s,type:r[parseInt(n.toString(),10)].getAttribute("type")},l=void 0;o.type==="checkbox"||o.type==="boolean"?l=r[parseInt(n.toString(),10)].checked:r[parseInt(n.toString(),10)].value?(l=r[parseInt(n.toString(),10)].value,r[parseInt(n.toString(),10)].ej2_instances&&r[parseInt(n.toString(),10)].ej2_instances.length&&!u(r[parseInt(n.toString(),10)].ej2_instances[0].value)&&(r[parseInt(n.toString(),10)].blur(),l=r[parseInt(n.toString(),10)].ej2_instances[0].value)):r[parseInt(n.toString(),10)].ej2_instances&&(l=r[parseInt(n.toString(),10)].ej2_instances[0].value),o.edit&&typeof o.edit.read=="string"?l=j(o.edit.read,window)(r[parseInt(n.toString(),10)],l):o.edit&&o.edit.read&&(l=o.edit.read(r[parseInt(n.toString(),10)],l)),l=i.editModule.getValueFromType(o,l),r[parseInt(n.toString(),10)].type==="radio"?r[parseInt(n.toString(),10)].checked&&A.setValue(o.field,l,t):(typeof l=="string"&&this.parent.sanitize(l),A.setValue(o.field,l,t))}return t}for(var h=i.columnModel.filter(function(y){return y.editTemplate}),p=0;p<h.length;p++)if(e[rt(h[parseInt(p.toString(),10)].field)]){var c=[].slice.call(e[rt(h[parseInt(p.toString(),10)].field)]).filter(function(y){return y.tagName.toLowerCase()==="input"});c=c.length?c:[e[rt(h[parseInt(p.toString(),10)].field)]];var d=c.filter(function(y){return!u(y.ej2_instances)});d.length===0&&(d=c.filter(function(y){return y.hasAttribute("name")}));for(var n=0;n<d.length;n++){var l=this.getValue(h[parseInt(p.toString(),10)],d[parseInt(n.toString(),10)],t);h[parseInt(p.toString(),10)].type==="string"&&(l=this.parent.sanitize(l)),A.setValue(h[parseInt(p.toString(),10)].field,l,t)}}for(var f=[].slice.call(e.getElementsByClassName("e-field")),g=0,m=f.length;g<m;g++){var v=i.getColumnByUid(f[parseInt(g.toString(),10)].getAttribute("e-mappinguid"));if(v&&v.field){var l=this.getValue(v,f[parseInt(g.toString(),10)],t);v.type==="string"&&!(v.isForeignColumn()&&typeof l!="string")&&(l=this.parent.sanitize(l)),A.setValue(v.field,l,t)}}return t},a.prototype.getValue=function(e,t,i){var r=t.ej2_instances?t.ej2_instances[0].value:t.value,n=this.parent,s=e.edit.read;return(e.type==="checkbox"||e.type==="boolean")&&(r=t.checked),typeof s=="string"?(s=j(s,window),r=n.editModule.getValueFromType(e,s(t,r))):r=n.editModule.getValueFromType(e,e.edit.read(t,r)),u(i[e.field])&&r===""&&(r=i[e.field]),r},a.prototype.onActionBegin=function(e){if((e.requestType==="columnstate"||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&e.requestType==="sorting")&&this.parent.isEdit&&this.parent.editSettings.mode!=="Batch")this.closeEdit();else{var t=this.parent.element.querySelector("."+Ke),i=this.parent.element.querySelector("."+Wt);if(t&&this.parent.frozenRows&&e.requestType==="virtualscroll"&&parseInt(x(t,ze).getAttribute(Se),10)<this.parent.frozenRows)return;var r=["filterAfterOpen","filterBeforeOpen","filterchoicerequest","filterSearchBegin","save","infiniteScroll","virtualscroll"],n=r.indexOf(e.requestType)===-1,s=!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!u(this.parent.element.querySelector(".e-editedrow")),o=(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.formObj&&s&&!this.formObj.isDestroyed&&(t||i||e.requestType==="cancel")&&n;(!this.parent.enableVirtualization&&s&&this.parent.editSettings.mode!=="Batch"&&this.formObj&&!this.formObj.isDestroyed&&n&&!e.cancel||o)&&(this.destroyWidgets(),this.destroyForm())}},a.prototype.destroyWidgets=function(e){var t=this.parent;if(t.isWidgetsDestroyed=!0,t.editSettings.template){var i=yo(this.parent);i=i.isReact?i:this.parent,i.destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()}e=e||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization),e.some(function(c){return!u(c.editTemplate)})&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates());for(var r=0,n=e;r<n.length;r++){var s=n[r],o=s.edit.destroy;s.edit.destroy&&(typeof o=="string"?(o=j(o,window),o()):s.edit.destroy())}for(var l=[].slice.call(this.formObj.element.elements),h=0;h<l.length;h++)if(l[parseInt(h.toString(),10)].hasAttribute("name")){var p=l[parseInt(h.toString(),10)].parentElement.classList.contains("e-ddl")?l[parseInt(h.toString(),10)].parentElement.querySelector("input"):l[parseInt(h.toString(),10)];p.ej2_instances&&p.ej2_instances.length&&!p.ej2_instances[0].isDestroyed&&p.ej2_instances[0].destroy()}},a.prototype.destroyForm=function(){this.destroyToolTip();for(var e=[this.formObj,this.mFormObj,this.frFormObj,this.virtualFormObj],t=this.parent.columnModel.filter(function(n){return n.editTemplate}),i=0;i<e.length;i++)if(e[parseInt(i.toString(),10)]&&e[parseInt(i.toString(),10)].element&&!e[parseInt(i.toString(),10)].isDestroyed){e[parseInt(i.toString(),10)].destroy();var r=yo(this.parent);r.isReact&&this.parent.editSettings.mode==="Dialog"&&(!u(this.parent.editSettings.template)||t.length)&&e[parseInt(i.toString(),10)].element.remove()}this.destroyToolTip()},a.prototype.destroy=function(){var e=this.parent.element;if(e){var t=!!(e.querySelector("."+pt)&&e.querySelector("."+ot));t&&this.destroyForm(),this.removeEventListener();var i=this.dialogObj.element;i.childElementCount>0&&(this.dialogObj.destroy(),se(i)),i=this.alertDObj.element,i.childElementCount>0&&(this.alertDObj.destroy(),se(i)),t&&this.editModule&&this.editModule.destroy()}},a.prototype.keyPressHandler=function(e){var t=/(Mac)/i.test(navigator.platform);switch(t&&e.metaKey&&e.action==="ctrlEnter"&&(e.action="insert"),e.action){case"insert":this.addRecord();break;case"delete":(e.target.tagName!=="INPUT"||e.target.classList.contains("e-checkselect"))&&!document.querySelector(".e-popup-open.e-edit-dialog")&&this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":!x(e.target,"e-unboundcelldiv")&&this.parent.editSettings.mode!=="Batch"&&(x(e.target,ot)||(this.parent.frozenRows||this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))&&x(e.target,it))&&!document.getElementsByClassName("e-popup-open").length&&(e.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&!this.editCellDialogClose&&(this.parent.editSettings.mode==="Batch"?this.editModule.escapeCellEdit():this.curretRowFocus(e)),this.editCellDialogClose&&(this.editCellDialogClose=!1);break;case"tab":case"shiftTab":this.curretRowFocus(e);break}},a.prototype.curretRowFocus=function(e){if(this.parent.isEdit&&this.parent.editSettings.mode!=="Batch"){this.parent.isWidgetsDestroyed=!1;var t=x(e.target,"e-editedrow")||x(e.target,"e-addedrow");if(t){var i=[].slice.call(t.querySelectorAll(".e-input:not(.e-disabled)")),r=[].slice.call(t.querySelectorAll(".e-unboundcell"));if(r)for(var n=0;n<r.length;n++)i=i.concat([].slice.call(r[parseInt(n.toString(),10)].querySelectorAll(".e-btn:not(.e-hide)")));var s=x(e.target,"e-rowcell");s=s&&s.classList.contains("e-unboundcell")?e.target:s;var o=x(i[i.length-1],"e-rowcell");if(o=o&&o.classList.contains("e-unboundcell")?i[i.length-1]:o,s===o&&e.action==="tab"||e.action==="escape"||s===x(i[0],"e-rowcell")&&e.action==="shiftTab"&&!this.parent.editSettings.showAddNewRow){var l=t.getAttribute("data-uid"),h=this.parent.getRows(),p=h.map(function(g){return g.getAttribute("data-uid")}).indexOf(l);if(this.parent.frozenRows&&x(t,"e-content")&&(p=p-this.parent.frozenRows),t.classList.contains("e-addedrow")&&(p=0),e.action==="escape"?this.closeEdit():(this.isShowAddedRowValidate=!0,this.parent.selectionModule.preventFocus=!1,this.endEdit(),this.isShowAddedRowValidate=!1),this.parent.focusModule.active&&(!this.parent.editSettings.showAddNewRow||t.classList.contains("e-editedrow")||this.parent.editSettings.showAddNewRow&&t.classList.contains("e-addedrow")&&u(this.parent.element.querySelector('.e-griderror:not([style*="display: none"])')))){var c=0,d=this.parent.focusModule.active.matrix;if(d&&d.matrix.length&&d.matrix[parseInt(p.toString(),10)]){for(var f=d.matrix[parseInt(p.toString(),10)],n=0;n<f.length;n++)if(d[parseInt(n.toString(),10)]>0){c=n;break}}this.parent.focusModule.active.matrix.current=[p,c]}}this.parent.editSettings.showAddNewRow&&e.action==="tab"&&x(e.target,"e-addedrow")&&(this.isShowAddedRowValidate=!0)}}},a.prototype.preventBatch=function(e){this.preventObj=e,this.showDialog("BatchSaveLostChanges",this.dialogObj)},a.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)},a.prototype.applyFormValidation=function(e,t){var i=this.parent,r=0,n=this.parent.editSettings.mode!=="Dialog"?i.editSettings.showAddNewRow&&i.element.querySelector("."+Ke)?i.element.querySelector("."+Ke).getElementsByClassName("e-gridform")[parseInt(r.toString(),10)]:i.element.getElementsByClassName("e-gridform")[parseInt(r.toString(),10)]:ke("#"+i.element.id+"_dialogEdit_wrapper .e-gridform",document),s=1,o={},l={},h={};e=e||i.getColumns();for(var p=0;p<e.length;p++)!e[parseInt(p.toString(),10)].visible&&(i.editSettings.mode!=="Dialog"||i.groupSettings.columns.indexOf(e[parseInt(p.toString(),10)].field)===-1&&i.editSettings.mode==="Dialog")||e[parseInt(p.toString(),10)].validationRules&&u(t)&&hg(e[parseInt(p.toString(),10)],s,o,l,h,e.length);o=P(o,l,h),this.parent.editModule.formObj=this.createFormObj(n,t||o)},a.prototype.createFormObj=function(e,t){var i=this;return new fg(e,{rules:t,locale:this.parent.locale,validationComplete:function(r){i.validationComplete(r)},customPlacement:function(r,n){var s=r.getAttribute("e-mappinguid"),o={column:i.parent.getColumnByUid(s),error:n,inputElement:r,value:r.value};(!(event&&event.relatedTarget&&event.relatedTarget.classList.contains("e-cancelbutton"))&&!i.parent.editSettings.showAddNewRow||i.parent.editSettings.showAddNewRow&&event&&event.target&&(x(event.target,i.parent.element.id+"_update",!0)||x(event.target,"e-grid-menu")&&(event.target.classList.contains("e-save")||event.target.querySelector(".e-save"))||i.isShowAddedRowValidate||x(event.target,"e-unboundcell")&&x(event.target,"e-update")||event.action==="enter"&&(x(event.target,"e-content")||x(event.target,"e-addedrow")))||i.parent.editSettings.showAddNewRow&&!u(i.parent.element.querySelector("."+Ke)))&&i.valErrorPlacement(r,n),i.isShowAddedRowValidate=!1,i.parent.notify(ed,o)}})},a.prototype.valErrorPlacement=function(e,t){if(this.parent.isEdit){var i=t.getAttribute("for"),r=this.getElemTable(e).querySelector("#"+Rl(i)+"_Error");r?r.querySelector(".e-tip-content").innerHTML=t.outerHTML:this.createTooltip(e,t,i,"")}},a.prototype.getElemTable=function(e){var t,i=this.parent,r;return i.editSettings.mode!=="Dialog"?(t=i.frozenRows&&M(e,"."+ze)&&i.frozenRows>(parseInt(M(e,"."+ze).getAttribute(Se),10)||0),r=this.parent.isFrozenGrid()?i.element:t||i.editSettings.showAddNewRow&&(i.enableVirtualization||i.enableInfiniteScrolling)?i.getHeaderTable():i.getContentTable()):r=ke("#"+i.element.id+"_dialogEdit_wrapper",document),r},a.prototype.resetElemPosition=function(e,t){var i=x(t.element,fe);if(i){var r=i.getBoundingClientRect().right,n=e.getBoundingClientRect().right;if(n>r){var s=n-r;e.style.left=e.offsetLeft-s+"px"}}},a.prototype.validationComplete=function(e){if(this.parent.isEdit){var t=this.getElemTable(e.element).querySelector("#"+Rl(e.inputName)+"_Error");if(this.parent.editSettings.showAddNewRow&&!t&&e.element){var i=x(e.element,"e-rowcell").querySelector(".e-error");i&&i.classList.remove("e-error")}t&&(e.status==="failure"?(t.style.display="",this.resetElemPosition(t,e)):t.style.display="none")}},a.prototype.createTooltip=function(e,t,i,r){var n=this.formObj.element,s=x(e,"e-virtual-validation");s&&(n=this.virtualFormObj.element);var o=this.parent.getContent().firstElementChild,l=o.scrollHeight>o.clientHeight||o.scrollWidth>o.clientWidth,h=this.parent.editSettings.mode!=="Dialog",p=M(e,"."+fe),c=M(e,"."+ze),d,f=!1,g,m=!1,v=this.parent.editSettings.showAddNewRow&&!u(x(e,Wt))&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling),y=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,w=[].slice.call(this.parent.getContent().getElementsByClassName(ze));if(this.parent.editSettings.mode==="Batch"&&(w=[].slice.call(this.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)")),y>=1&&w.length>=y&&w[w.length-1].getAttribute(Se)===c.getAttribute(Se)&&(m=!0)),h){if(this.parent.frozenRows||v){var b=this.parent.editSettings.showAddNewRow?".e-row:not(.e-hiddenrow.e-addedrow)":".e-row:not(.e-hiddenrow)",I=[].slice.call(this.parent.getHeaderTable().querySelector(me).querySelectorAll(b));d=I.length>(parseInt(c.getAttribute(Se),10)||0),f=d&&parseInt(c.getAttribute(Se),10)===I.length-1;var k=[].slice.call(this.parent.getHeaderTable().querySelector(me).querySelectorAll(".e-row:not(.e-hiddenrow)"));k.length===1&&(k[0].classList.contains("e-addedrow")||k[0].classList.contains("e-insertedrow"))&&(f=!0)}(f||y>=1&&w.length>=y&&(this.parent.editSettings.newRowPosition==="Bottom"&&this.editModule.args&&this.editModule.args.requestType==="add"||p.classList.contains("e-lastrowcell")&&!c.classList.contains(Wt))||m)&&(g=!0)}var D=h?d?this.parent.getHeaderTable():this.parent.getContentTable():ke("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document),W=D.getBoundingClientRect(),Z=h?this.parent.element.getBoundingClientRect().left:W.left,J=M(e,"td"),X=J?J.getBoundingClientRect():e.parentElement.getBoundingClientRect(),L=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:i+"_Error",styles:"display:"+r+";top:"+((d?X.top+X.height:X.bottom-W.top)+D.scrollTop+9)+"px;left:"+(X.left-Z+D.scrollLeft+X.width/2)+"px;max-width:"+X.width+"px;text-align:center;"});this.parent.cssClass&&L.classList.add(this.parent.cssClass),h&&W.left<Z&&(L.style.left=parseInt(L.style.left,10)-W.left+Z+"px");var O=this.parent.createElement("div",{className:"e-tip-content"});O.appendChild(t);var F;if(g?(F=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"}),F.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),F.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):(F=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"}),F.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),F.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),L.appendChild(O),L.appendChild(F),!s&&(this.parent.frozenRows||v)&&this.parent.editSettings.mode!=="Dialog"){var V=this.parent.editSettings.mode==="Normal"?M(e,".e-editcell"):M(e,"."+$t);if(V.style.position="relative",L.style.position="absolute",this.parent.editSettings.mode==="Batch"||M(e,"."+qd)||M(e,"."+Wd)||this.parent.frozenRows||v)if(this.parent.isFrozenGrid())if(p.classList.contains("e-unfreeze"))R([L],"e-unfreeze"),n.appendChild(L);else{var K=M(p,".e-gridheader")?this.parent.element.querySelector(".e-gridheader"):w.length===1?this.parent.element.querySelector(".e-gridcontent").querySelector(".e-content"):this.parent.element.querySelector(".e-gridcontent");K.appendChild(L),K.style.position="relative"}else n.appendChild(L);else this.mFormObj.element.appendChild(L)}else if(s)this.virtualFormObj.element.appendChild(L);else if(this.parent.editSettings.mode!=="Dialog"&&this.parent.isFrozenGrid())if(p.classList.contains("e-unfreeze"))R([L],"e-unfreeze"),this.formObj.element.appendChild(L);else{var K=M(p,".e-gridheader")?this.parent.element.querySelector(".e-gridheader"):w.length===1?this.parent.element.querySelector(".e-gridcontent").querySelector(".e-content"):this.parent.element.querySelector(".e-gridcontent");K.appendChild(L),K.style.position="relative"}else this.formObj.element.appendChild(L);if(u(p)||(p.classList.contains("e-fixedfreeze")?L.classList.add("e-fixederror"):(p.classList.contains("e-leftfreeze")||p.classList.contains("e-rightfreeze"))&&L.classList.add("e-freezeerror")),!g&&h&&o.getBoundingClientRect().bottom<X.bottom+X.height){var U=this.parent.getContent().querySelector(".e-content");this.parent.currentViewData.length===0&&U.scrollTop===0?U.scrollTop=L.offsetHeight+F.scrollHeight:o.scrollTop=o.scrollTop+L.offsetHeight+F.scrollHeight}var H=parseInt(document.defaultView.getComputedStyle(L,null).getPropertyValue("font-size"),10);if(L.getBoundingClientRect().width<X.width&&L.querySelector("label").getBoundingClientRect().height/(H*1.2)>=2&&(L.style.width=L.style.maxWidth),(this.parent.frozenRows||v)&&this.parent.editSettings.mode!=="Dialog"?L.style.left=J.offsetLeft+(J.offsetWidth/2-L.offsetWidth/2)+"px":L.style.left=parseInt(L.style.left,10)-L.offsetWidth/2+"px",h&&!l&&!this.parent.allowPaging||this.parent.frozenRows||v){var z=Eo(J,L);L.style.top=z.top+X.height+9+"px"}if(g){if(l&&this.parent.height!=="auto"&&(!this.parent.frozenRows||!v)&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&!(L.classList.contains("e-freezeerror")&&L.classList.contains("e-fixederror"))){var Y=o.scrollWidth>o.offsetWidth?Dt():0,le=this.parent.height.toString().indexOf("%")===-1?parseInt(this.parent.height,10):o.offsetHeight;L.style.bottom=le-o.querySelector("table").offsetHeight-Y+X.height+9+"px"}else L.style.bottom=X.height+9+"px";if(w.length<y&&this.parent.editSettings.newRowPosition==="Bottom"&&this.editModule.args&&this.editModule.args.requestType==="add"){var de=this.parent.frozenRows?(v?this.parent.frozenRows+1:this.parent.frozenRows)+(w.length-1):w.length-1,he=de*this.parent.getRowHeight(),ue=this.parent.getContent().clientHeight-he;L.style.bottom=ue+9+"px"}L.style.top=null}},a.prototype.checkColumnIsGrouped=function(e){return!e.visible&&!(this.parent.groupSettings.columns.indexOf(e.field)>-1)},a.AddEditors=function(e){a.editCellType=P(a.editCellType,e)},a.editCellType={dropdownedit:bv,numericedit:Sv,datepickeredit:bh,datetimepickeredit:bh,booleanedit:yv,defaultedit:Iv,templateedit:Tv},a}(),Fv=function(){function a(e,t){this.filterColumns=[],this.showColumn=[],this.hideColumn=[],this.changedColumns=[],this.unchangedColumns=[],this.isDlgOpen=!1,this.isColumnChooserOpen=!1,this.initialOpenDlg=!0,this.stateChangeColumns=[],this.changedStateColumns=[],this.isInitialOpen=!1,this.isCustomizeOpenCC=!1,this.searchOperator="startswith",this.prevShowedCols=[],this.hideDialogFunction=this.hideDialog.bind(this),this.parent=e,this.serviceLocator=t,this.addEventListener(),this.cBoxTrue=mr(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=mr(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&R([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?R([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):R([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass])),this.parent.enableAdaptiveUI&&this.setFullScreenDialog()}return a.prototype.destroy=function(){var e=this.parent.element;!e.querySelector("."+ot)&&!e.querySelector("."+pt)||!e||(this.removeEventListener(),this.unWireEvents(),!u(this.dlgObj)&&this.dlgObj.element&&!this.dlgObj.isDestroyed&&this.dlgObj.destroy())},a.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,oe.isColumnChooser)},a.prototype.rtlUpdate=function(){u(this.innerDiv)||(this.parent.enableRtl?R([].slice.call(this.innerDiv.getElementsByClassName("e-checkbox-wrapper")),["e-rtl"]):N([].slice.call(this.innerDiv.getElementsByClassName("e-checkbox-wrapper")),["e-rtl"]))},a.prototype.addEventListener=function(){this.parent.isDestroyed||(S.add(document,"click",this.clickHandler,this),this.parent.on(qe,this.enableAfterRenderEle,this),this.parent.on(ci,this.render,this),this.parent.addEventListener(Qt,this.hideDialogFunction),this.parent.on(Ie,this.destroy,this),this.parent.on(Ja,this.rtlUpdate,this),this.parent.on(no,this.onResetColumns,this),this.parent.enableAdaptiveUI&&(this.parent.on(fr,this.setFullScreenDialog,this),this.parent.on(In,this.renderResponsiveColumnChooserDiv,this),this.parent.on(Ni,this.renderResponsiveChangeAction,this)))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(S.remove(document,"click",this.clickHandler),this.parent.off(ci,this.render),this.parent.off(Ie,this.destroy),this.parent.off(qe,this.enableAfterRenderEle),this.parent.off(Ja,this.rtlUpdate),this.parent.off(no,this.onResetColumns),this.parent.removeEventListener(Qt,this.hideDialogFunction),this.parent.off(fr,this.setFullScreenDialog),this.parent.enableAdaptiveUI&&(this.parent.off(fr,this.setFullScreenDialog),this.parent.off(In,this.renderResponsiveColumnChooserDiv),this.parent.off(Ni,this.renderResponsiveChangeAction)))},a.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.enableAdaptiveUI||this.renderDlgContent(),this.getShowHideService=this.serviceLocator.getService("showHideService")},a.prototype.clickHandler=function(e){var t=e.target;if(!this.isCustomizeOpenCC){if(!u(M(t,".e-cc-toolbar"))||!u(M(t,".e-cc")))if(t.classList.contains("e-columnchooser-btn")||t.classList.contains("e-cc-toolbar")){if(this.initialOpenDlg&&this.dlgObj.visible||!this.isDlgOpen){this.isDlgOpen=!0;return}}else t.classList.contains("e-cc-cancel")&&(t.parentElement.querySelector(".e-ccsearch").value="",this.columnChooserSearch(""),this.removeCancelIcon(),this.refreshCheckboxButton());else!u(this.dlgObj)&&this.dlgObj.visible&&!t.classList.contains("e-toolbar-items")&&(this.dlgObj.hide(),this.clearActions(),this.refreshCheckboxState(),this.isDlgOpen=!1);(this.parent.detailTemplate||this.parent.childGrid)&&(this.targetdlg=e.target)}this.isCustomizeOpenCC&&e.target.classList.contains("e-cc-cancel")&&this.refreshCheckboxState(),this.parent.enableAdaptiveUI?this.parent.enableRtl&&R([this.cBoxTrue,this.cBoxFalse],["e-rtl"]):this.rtlUpdate()},a.prototype.hideDialog=function(){!u(this.dlgObj)&&this.dlgObj.visible&&(this.dlgObj.hide(),this.isDlgOpen=!1)},a.prototype.renderColumnChooser=function(e,t,i){if(!this.dlgObj.visible&&(this.parent.detailTemplate||this.parent.childGrid)&&this.hideOpenedDialog(),this.dlgObj.visible)this.hideDialog(),this.addcancelIcon(),this.clearActions(),this.refreshCheckboxState();else{var r=this.beforeOpenColumnChooserEvent();if(r.cancel)return;i&&(this.targetdlg=i),this.refreshCheckboxState(),this.dlgObj.dataBind(),this.dlgObj.element.style.maxHeight="430px";var n=this.dlgObj.element.style.display;this.dlgObj.element.style.display="block";var s=this.parent.getHeaderContent().classList.contains("e-sticky"),o=M(i,".e-toolbar-item"),l=void 0;s?(l=o.getBoundingClientRect(),this.dlgObj.element.classList.add("e-sticky")):(this.dlgObj.element.classList.remove("e-sticky"),l=Eo(o,this.dlgObj.element)),this.dlgObj.element.style.display=n,this.dlgObj.element.style.top=l.top+M(i,".e-cc-toolbar").getBoundingClientRect().height+"px";var h=250;u(M(i,".e-bigger"))||(this.dlgObj.width=258),T.isDevice?(this.dlgObj.target=document.body,this.dlgObj.position={X:"center",Y:"center"},this.dlgObj.refreshPosition(),this.dlgObj.open=this.mOpenDlg.bind(this)):this.parent.enableRtl?this.dlgObj.element.style.left=i.offsetLeft+"px":this.dlgObj.element.style.left=l.left-h+M(i,".e-cc-toolbar").clientWidth+2+"px",this.removeCancelIcon(),this.dlgObj.show(),this.parent.notify(_c,{dialog:this.dlgObj})}this.rtlUpdate()},a.prototype.openColumnChooser=function(e,t){if(this.isCustomizeOpenCC=!0,this.parent.enableAdaptiveUI&&(this.isColumnChooserOpen||this.parent.showResponsiveCustomColumnChooser(),this.isColumnChooserOpen=!1,this.renderDlgContent()),this.dlgObj.visible){this.hideDialog();return}var i=this.beforeOpenColumnChooserEvent();i.cancel||(this.isInitialOpen?this.refreshCheckboxState():(this.dlgObj.content=this.renderChooserList(),this.updateIntermediateBtn()),this.dlgObj.dataBind(),this.dlgObj.position={X:"center",Y:"center"},u(e)?(this.parent.enableAdaptiveUI&&(this.dlgObj.position={X:"",Y:""}),this.dlgObj.refreshPosition()):(this.dlgObj.element.style.top="",this.dlgObj.element.style.left="",this.dlgObj.element.style.top=t+"px",this.dlgObj.element.style.left=e+"px"),this.dlgObj.beforeOpen=this.customDialogOpen.bind(this),this.dlgObj.show(),this.isInitialOpen=!0,this.dlgObj.beforeClose=this.customDialogClose.bind(this))},a.prototype.enableAfterRenderEle=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},a.prototype.keyUpHandler=function(e){e.key==="Escape"&&this.resetColumnState(),this.setFocus(x(e.target,"e-cclist"))},a.prototype.setFocus=function(e){var t=this.dlgDiv.querySelector(".e-colfocus");t&&t.classList.remove("e-colfocus"),e&&e.classList.add("e-colfocus")},a.prototype.customDialogOpen=function(){var e=this.dlgObj.content.querySelector("input.e-ccsearch");S.add(e,"keyup",this.columnChooserManualSearch,this)},a.prototype.customDialogClose=function(){var e=this.dlgObj.content.querySelector("input.e-ccsearch");S.remove(e,"keyup",this.columnChooserManualSearch)},a.prototype.getColumns=function(){var e=this.parent.getColumns().filter(function(t){return t.type!=="checkbox"&&t.showInColumnChooser===!0||t.type==="checkbox"&&t.field!==void 0});return e},a.prototype.renderDlgContent=function(){var e=this.parent.enableAdaptiveUI;this.dlgDiv=this.parent.createElement("div",{className:"e-ccdlg e-cc",id:this.parent.element.id+"_ccdlg"}),e||this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new Cr({header:this.parent.enableAdaptiveUI?null:this.l10n.getConstant("ChooseColumns"),showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,target:document.getElementById(this.parent.element.id),content:this.renderChooserList(),width:250,cssClass:this.parent.cssClass?"e-cc "+this.parent.cssClass:"e-cc",animationSettings:{effect:"None"}}),e||(this.dlgObj.buttons=[{click:this.confirmDlgBtnClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-cc e-cc_okbtn "+this.parent.cssClass:"e-cc e-cc_okbtn"}},{click:this.clearBtnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat e-cc e-cc-cnbtn "+this.parent.cssClass:"e-flat e-cc e-cc-cnbtn",content:this.l10n.getConstant("CancelButton")}}]);var t="isStringTemplate";if(this.dlgObj[""+t]=!0,this.dlgObj.appendTo(this.dlgDiv),e){var i=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv");i&&i.appendChild(this.dlgDiv),this.dlgObj.open=this.mOpenDlg.bind(this),this.dlgObj.target=document.querySelector(".e-rescolumnchooser > .e-dlg-content > .e-mainfilterdiv")}this.wireEvents()},a.prototype.renderChooserList=function(){this.mainDiv=this.parent.createElement("div",{className:"e-main-div e-cc"});var e=this.parent.createElement("div",{className:"e-cc-searchdiv e-cc e-input-group"}),t=this.parent.createElement("input",{className:"e-ccsearch e-cc e-input",attrs:{placeholder:this.l10n.getConstant("Search"),cssClass:this.parent.cssClass}}),i=this.parent.createElement("span",{className:"e-ccsearch-icon e-icons e-cc e-input-group-icon",attrs:{title:this.l10n.getConstant("Search")}}),r=this.parent.createElement("div",{className:"e-cc-contentdiv"});this.innerDiv=this.parent.createElement("div",{className:"e-innerdiv e-cc"}),e.appendChild(t),e.appendChild(i),this.searchBoxObj=new Sf(t,this.serviceLocator);var n=this.refreshCheckboxList(this.parent.getColumns());if(this.innerDiv.appendChild(n),r.appendChild(this.innerDiv),this.parent.enableAdaptiveUI){var s=this.parent.createElement("div",{className:"e-cc-searchBox"});s.appendChild(e),this.mainDiv.appendChild(s)}else this.mainDiv.appendChild(e);return this.mainDiv.appendChild(r),this.mainDiv},a.prototype.confirmDlgBtnClick=function(e){this.stateChangeColumns=[],this.changedStateColumns=[],this.changedColumns=this.changedColumns.length>0?this.changedColumns:this.unchangedColumns,this.changedColumnState(this.changedColumns);var t=this.ulElement.querySelector(".e-uncheck")&&this.ulElement.querySelectorAll(".e-uncheck:not(.e-selectall)").length;if(!u(e)){if(t<this.parent.getColumns().length&&(this.hideColumn.length&&this.columnStateChange(this.hideColumn,!1),this.showColumn.length&&this.columnStateChange(this.showColumn,!0),this.getShowHideService.setVisible(this.stateChangeColumns,this.changedStateColumns),this.clearActions(),this.parent.notify(vr,{module:"edit"}),this.parent.getCurrentViewRecords().length===0)){var i=this.parent.element.querySelector(".e-emptyrow").querySelector("td");i.setAttribute("colSpan",this.parent.getVisibleColumns().length.toString())}this.parent.enableAdaptiveUI&&this.parent.scrollModule&&this.parent.scrollModule.refresh(),this.parent.editSettings.showAddNewRow&&this.parent.notify(Vi,{})}},a.prototype.onResetColumns=function(e){if(e.requestType==="columnstate"){this.resetColumnState();return}},a.prototype.renderResponsiveColumnChooserDiv=function(e){e.action==="open"?(this.isColumnChooserOpen=!0,this.openColumnChooser()):e.action==="clear"?this.clearBtnClick():e.action==="confirm"&&this.confirmDlgBtnClick(!0)},a.prototype.resetColumnState=function(){this.showColumn=[],this.hideColumn=[],this.changedColumns=[],this.filterColumns=[],this.searchValue="",this.hideDialog()},a.prototype.changedColumnState=function(e){for(var t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)],r=this.parent.getColumnByUid(i);this.changedStateColumns.push(r)}},a.prototype.columnStateChange=function(e,t){for(var i=0;i<e.length;i++){var r=e[parseInt(i.toString(),10)],n=this.parent.getColumnByUid(r);n.type!=="checkbox"&&(n.visible=t),this.stateChangeColumns.push(n)}},a.prototype.clearActions=function(){this.resetColumnState(),this.addcancelIcon()},a.prototype.clearBtnClick=function(){this.clearActions(),this.parent.notify(vd,{dialog:this.dlgObj})},a.prototype.checkstatecolumn=function(e,t,i){i===void 0&&(i=!1);var r=this.parent.getColumnByUid(t);e?(this.hideColumn.indexOf(t)!==-1&&this.hideColumn.splice(this.hideColumn.indexOf(t),1),this.showColumn.indexOf(t)===-1&&!(r&&r.visible)&&this.showColumn.push(t)):(this.showColumn.indexOf(t)!==-1&&this.showColumn.splice(this.showColumn.indexOf(t),1),this.hideColumn.indexOf(t)===-1&&r&&r.visible&&this.hideColumn.push(t)),i?e?this.unchangedColumns.push(t):this.changedColumns.push(t):this.changedColumns.indexOf(t)!==-1?this.changedColumns.splice(this.changedColumns.indexOf(t),1):this.changedColumns.push(t)},a.prototype.columnChooserSearch=function(e){var t=!1,i,r=this.dlgDiv.querySelector(".e-footer-content"),n=this.ulElement.querySelector(".e-check")&&this.ulElement.querySelectorAll(".e-check:not(.e-selectall)").length;if(this.isInitialOpen=!0,r&&(i=r.querySelector(".e-btn").ej2_instances[0]),e===""?(this.removeCancelIcon(),this.filterColumns=this.getColumns(),t=!0):this.filterColumns=new q(this.getColumns()).executeLocal(new re().where("headerText",this.searchOperator,e,!0,this.parent.columnChooserSettings.ignoreAccent)),this.filterColumns.length)this.innerDiv.innerHTML=" ",this.innerDiv.classList.remove("e-ccnmdiv"),this.innerDiv.appendChild(this.refreshCheckboxList(this.filterColumns)),t?(i&&n&&(i.disabled=!1),n&&this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Li,{disabled:!1})):(this.addcancelIcon(),this.refreshCheckboxButton());else{var s=this.parent.createElement("span",{className:"e-cc e-nmatch"});s.innerHTML=this.l10n.getConstant("Matchs"),this.innerDiv.innerHTML=" ",this.innerDiv.appendChild(s),this.innerDiv.classList.add("e-ccnmdiv"),i&&(i.disabled=!0),this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Li,{disabled:!0})}this.flag=!0,this.stopTimer()},a.prototype.wireEvents=function(){S.add(this.dlgObj.element,"click",this.checkBoxClickHandler,this),S.add(this.searchBoxObj.searchBox,"keyup",this.columnChooserManualSearch,this),S.add(this.dlgObj.element,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent()},a.prototype.unWireEvents=function(){this.parent.isDestroyed||(this.dlgObj&&this.dlgObj.element&&(S.remove(this.dlgObj.element,"click",this.checkBoxClickHandler),S.remove(this.dlgObj.element,"keyup",this.keyUpHandler)),this.searchBoxObj&&(S.remove(this.searchBoxObj.searchBox,"keyup",this.columnChooserManualSearch),this.searchBoxObj.unWireEvent()))},a.prototype.checkBoxClickHandler=function(e){var t,i=x(e.target,"e-checkbox-wrapper");if(i){var r=i.querySelector(".e-selectall");r?this.updateSelectAll(!i.querySelector(".e-check")):Pr(i.parentElement),i.querySelector(".e-chk-hidden").focus(),i.querySelector(".e-check")?t=!0:i.querySelector(".e-uncheck")&&(t=!1),this.updateIntermediateBtn();var n=x(i,"e-ccheck").getAttribute("uid"),s=this.searchValue&&this.searchValue.length?this.filterColumns:this.parent.getColumns();if(n===this.parent.element.id+"-selectAll"){this.changedColumns=[],this.unchangedColumns=[];for(var o=0;o<s.length;o++)s[parseInt(o.toString(),10)].showInColumnChooser&&this.checkstatecolumn(t,s[parseInt(o.toString(),10)].uid,!0)}else this.checkstatecolumn(t,n);this.refreshCheckboxButton(),this.setFocus(x(e.target,"e-cclist"))}},a.prototype.updateIntermediateBtn=function(){var e=this.ulElement.children.length-1,t=[],i=this.ulElement.children[0].querySelector(".e-frame"),r=this.ulElement.querySelectorAll(".e-check:not(.e-selectall)").length,n;this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Li,{disabled:!1}):(n=this.dlgObj.btnObj[0],n.disabled=!1);var s=i.parentElement.querySelector("input");e===r?(t=["e-check"],Yt(s,!0)):r?(t=["e-stop"],s.indeterminate=!0):(t=["e-uncheck"],Yt(s,!1),this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Li,{disabled:!0}):n.disabled=!0),this.parent.enableAdaptiveUI||n.dataBind(),N([i],["e-check","e-stop","e-uncheck"]),R([i],t)},a.prototype.updateSelectAll=function(e){for(var t=[].slice.call(this.ulElement.getElementsByClassName("e-frame")),i=0,r=t;i<r.length;i++){var n=r[i];En(n,e);var s=n.parentElement.querySelector("input");n.classList.contains("e-check")?Yt(s,!0):n.classList.contains("e-uncheck")&&Yt(s,!1)}},a.prototype.refreshCheckboxButton=function(){for(var e=this.parent.getVisibleColumns(),t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)].uid;this.prevShowedCols.indexOf(i)===-1&&e[parseInt(t.toString(),10)].type!=="checkbox"&&this.prevShowedCols.push(i)}for(var t=0;t<this.hideColumn.length;t++){var r=this.prevShowedCols.indexOf(this.hideColumn[parseInt(t.toString(),10)]);r!==-1&&this.prevShowedCols.splice(r,1)}var n=this.showColumn.length!==0?1:this.prevShowedCols.length,s;this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Li,{disabled:!1}):(s=this.dlgDiv.querySelector(".e-footer-content").querySelector(".e-btn").ej2_instances[0],s.disabled=!1);for(var o=[],l=[].slice.call(this.parent.element.getElementsByClassName("e-cc-chbox")),t=0,h=l.length;t<h;t++){var p=l[parseInt(t.toString(),10)],i=x(p,"e-ccheck").getAttribute("uid");o.push(i)}var c=this.showColumn.filter(function(d){return o.indexOf(d)!==-1});n===0&&c.length===0&&(this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Li,{disabled:!0}):s.disabled=!0),this.parent.enableAdaptiveUI||s.dataBind()},a.prototype.refreshCheckboxList=function(e){this.ulElement=this.parent.createElement("ul",{className:"e-ccul-ele e-cc"});var t=this.l10n.getConstant("SelectAll"),i=this.parent.createElement("li",{className:"e-cclist e-cc e-cc-selectall"}),r=this.createCheckBox(t,!1,this.parent.element.id+"-selectAll");e.length&&(r.querySelector(".e-checkbox-wrapper").firstElementChild.classList.add("e-selectall"),r.querySelector(".e-frame").classList.add("e-selectall"),this.checkState(r.querySelector(".e-icons"),!0),i.appendChild(r),this.ulElement.appendChild(i)),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?R([r],this.parent.cssClass.split(" ")):R([r],[this.parent.cssClass]));for(var n=0;n<e.length;n++){var s=e[parseInt(n.toString(),10)];this.renderCheckbox(s)}return this.ulElement},a.prototype.refreshCheckboxState=function(){this.dlgObj.element.querySelector(".e-cc.e-input").value="",this.columnChooserSearch("");for(var e=this.parent,t=this.dlgObj.element.querySelectorAll(".e-cc-chbox:not(.e-selectall)"),i=0,r=t.length;i<r;i++){var n=t[parseInt(i.toString(),10)],s=void 0;this.parent.childGrid||this.parent.detailTemplate?s=x(this.dlgObj.element.querySelectorAll(".e-cc-chbox:not(.e-selectall)")[parseInt(i.toString(),10)],"e-ccheck").getAttribute("uid"):s=x(n,"e-ccheck").getAttribute("uid");var o=e.getColumnByUid(s),l=[].slice.call(n.parentElement.getElementsByClassName("e-uncheck"));o.visible&&!l.length?(n.checked=!0,this.checkState(n.parentElement.querySelector(".e-icons"),!0)):(n.checked=!1,this.checkState(n.parentElement.querySelector(".e-icons"),!1))}},a.prototype.checkState=function(e,t){t?ae(e,["e-check"],["e-uncheck"]):ae(e,["e-uncheck"],["e-check"])},a.prototype.createCheckBox=function(e,t,i){var r=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);!this.parent.enableAdaptiveUI&&this.parent.enableRtl&&!r.classList.contains("e-rtl")&&r.classList.add("e-rtl");var n=r.querySelector(".e-label"),s=r.querySelector("input");return Yt(s,t),n.setAttribute("id",i+"label"),n.innerHTML=e,s.setAttribute("aria-labelledby",n.id),ws(i,r,"e-ccheck")},a.prototype.renderCheckbox=function(e){var t,i,r;if(e.showInColumnChooser){t=this.parent.createElement("li",{className:"e-cclist e-cc",styles:"list-style:None",id:"e-ccli_"+e.uid}),i=this.hideColumn.indexOf(e.uid)!==-1,r=this.showColumn.indexOf(e.uid)!==-1;var n=this.createCheckBox(e.headerText,e.visible&&!i||r,e.uid);t.appendChild(n),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?R([n],this.parent.cssClass.split(" ")):R([n],[this.parent.cssClass])),this.ulElement.appendChild(t)}this.isInitialOpen&&this.updateIntermediateBtn()},a.prototype.columnChooserManualSearch=function(e){this.addcancelIcon(),this.searchValue=e.target.value,this.stopTimer(),this.startTimer(e)},a.prototype.startTimer=function(e){var t=this,i=!t.flag&&e.keyCode!==13?500:0;this.timer=window.setInterval(function(){t.columnChooserSearch(t.searchValue)},i)},a.prototype.stopTimer=function(){window.clearInterval(this.timer)},a.prototype.addcancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.add("e-cc-cancel"),this.dlgDiv.querySelector(".e-cc-cancel").setAttribute("title",this.l10n.getConstant("Clear"))},a.prototype.removeCancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.remove("e-cc-cancel"),this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").setAttribute("title",this.l10n.getConstant("Search"))},a.prototype.mOpenDlg=function(){T.isDevice&&(this.dlgObj.element.querySelector(".e-cc-searchdiv").classList.remove("e-input-focus"),this.dlgObj.element.querySelectorAll(".e-cc-chbox")[0].focus()),this.parent.enableAdaptiveUI&&this.dlgObj.element.querySelector(".e-cc-searchdiv").classList.add("e-input-focus")},a.prototype.getModuleName=function(){return"columnChooser"},a.prototype.hideOpenedDialog=function(){for(var e=[].slice.call(document.getElementsByClassName("e-ccdlg")).filter(function(r){return r.classList.contains("e-popup-open")}),t=0,i=e.length;t<i;t++)(this.parent.element.id+"_ccdlg"!==e[parseInt(t.toString(),10)].id||e[parseInt(t.toString(),10)].classList.contains("e-dialog"))&&e[parseInt(t.toString(),10)].ej2_instances[0].hide()},a.prototype.beforeOpenColumnChooserEvent=function(){var e={requestType:"beforeOpenColumnChooser",element:this.parent.element,columns:this.getColumns(),cancel:!1,searchOperator:this.parent.columnChooserSettings.operator};return this.parent.trigger(gc,e),this.searchOperator=e.searchOperator,e},a.prototype.renderResponsiveChangeAction=function(e){this.responsiveDialogRenderer.action=e.action},a.prototype.showCustomColumnChooser=function(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog()},a}(),$i=function(){function a(){this.numFmtId=0,this.backColor="none",this.fontName="Calibri",this.fontSize=10.5,this.fontColor="#000000",this.italic=!1,this.bold=!1,this.underline=!1,this.strikeThrough=!1,this.wrapText=!1,this.hAlign="general",this.vAlign="bottom",this.indent=0,this.rotation=0,this.numberFormat="GENERAL",this.type="datetime",this.borders=new op,this.isGlobalStyle=!1}return a}(),wh=function(){function a(){this.sz=10.5,this.name="Calibri",this.u=!1,this.b=!1,this.i=!1,this.color="FF000000",this.strike=!1}return a}(),Lv=function(){function a(){}return a}(),Ov=function(){function a(){}return a}(),Bv=function(){function a(){}return a}(),Ih=function(){function a(){this.name="Normal",this.xfId=0}return a}(),xh=function(){function a(e,t){this.numFmtId=e,this.formatCode=t}return a}(),vn=function(){function a(e,t){this.lineStyle=e,this.color=t}return a}(),op=function(){function a(){this.left=new vn("none","#FFFFFF"),this.right=new vn("none","#FFFFFF"),this.top=new vn("none","#FFFFFF"),this.bottom=new vn("none","#FFFFFF"),this.all=new vn("none","#FFFFFF")}return a}(),Pv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Eh=function(){function a(){}return a}(),Dh=function(a){Pv(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.add=function(i){for(var r=!1,n=0,s=0,o=t;s<o.length;s++){var l=o[s];l.index===i.index&&(t[n]=i,r=!0),n++}r||t.push(i)},t}return e}(Array),Nv=function(){function a(){}return a}(),zv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kh=function(){function a(){}return a}(),Hv=function(a){zv(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.add=function(i){t.push(i)},t}return e}(Array),Vv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qv=function(a){Vv(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e}(Array),Wv=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jv=function(){function a(){this.isSummaryRowBelow=!0,this.showGridLines=!0,this.enableRtl=!1}return a}(),Rh=function(){function a(){}return a}(),Uv=function(){function a(){}return a}(),Gv=function(){function a(){}return a}(),lp=function(){function a(){}return a}(),_v=function(a){Wv(e,a);function e(){var t=a!==null&&a.apply(this,arguments)||this;return t.add=function(i){for(var r=!1,n=0,s=0,o=t;s<o.length;s++){var l=o[s];if(e.isIntersecting(l,i)){var h=new lp;h.x=Math.min(l.x,i.x),h.y=Math.min(l.Y,i.y),h.width=Math.max(l.Width+l.X,i.width+i.x),h.height=Math.max(l.Height+l.Y,i.height+i.y),h.ref=t[n].ref.split(":")[0]+":"+i.ref.split(":")[1],t[n]=h,i=h,r=!0}n++}return r||t.push(i),i},t}return e.isIntersecting=function(t,i){return t.x<=i.x+i.width&&i.x<=t.x+t.width&&t.y<=i.y+i.height&&i.y<=t.y+t.height},e}(Array),Kv=function(){function a(){}return a}(),Ah=function(){function a(){}return a.save=function(e,t){if(e==null||e==="")throw new Error("ArgumentException: fileName cannot be undefined, null or empty");var i=e.substring(e.lastIndexOf(".")+1,e.length),r=this.getMimeType(i);if(r!==""&&(t=new Blob([t],{type:r})),this.isMicrosoftBrowser)navigator.msSaveBlob(t,e);else{var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");this.saveInternal(e,i,t,n,"download"in n)}},a.saveInternal=function(e,t,i,r,n){if(n){r.download=e;var s=window.URL.createObjectURL(i);r.href=s;var o=document.createEvent("MouseEvent");o.initEvent("click",!0,!0),r.dispatchEvent(o),setTimeout(function(){window.URL.revokeObjectURL(s),s=void 0})}else if(t!=="docx"&&t!=="xlsx"){var l=window.URL.createObjectURL(i),h=window.open(l,"_blank");h||(window.location.href=l)}else{var p=new FileReader;p.onloadend=function(){var c=window.open(p.result,"_blank");c||(window.location.href=p.result)},p.readAsDataURL(i)}},a.getMimeType=function(e){var t="";switch(e){case"html":t="text/html";break;case"pdf":t="application/pdf";break;case"docx":t="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case"xlsx":t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case"txt":t="text/plain";break}return t},a}(),hp=function(){function a(e){this.emitBOM=!0,this.encodingType="Ansi",this.initBOM(e)}return Object.defineProperty(a.prototype,"includeBom",{get:function(){return this.emitBOM},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"type",{get:function(){return this.encodingType},set:function(e){this.encodingType=e},enumerable:!0,configurable:!0}),a.prototype.initBOM=function(e){e==null?this.emitBOM=!0:this.emitBOM=e},a.prototype.getByteCount=function(e){if(lr(e,"string"),e===""){var t=this.utf8Len(e.charCodeAt(0));return t}return(this.type===null||this.type===void 0)&&(this.type="Ansi"),this.getByteCountInternal(e,0,e.length)},a.prototype.utf8Len=function(e){var t=e<=127?1:e<=2047?2:e<=65535?3:e<=2097151?4:0;return t},a.prototype.isHighSurrogate=function(e){return e>=55296&&e<=56319},a.prototype.toCodepoint=function(e,t){e=(1023&e)<<10;var i=e|1023&t;return i+65536},a.prototype.getByteCountInternal=function(e,t,i){var r=0;if(this.encodingType==="Utf8"||this.encodingType==="Unicode"){for(var n=this.encodingType==="Utf8",s=0;s<i;s++){var o=e.charCodeAt(n?t:t++);if(this.isHighSurrogate(o))if(n){var l=o,h=e.charCodeAt(++t);r+=this.utf8Len(this.toCodepoint(l,h))}else r+=4,++s;else n?r+=this.utf8Len(o):r+=2;n&&t++}return r}else return r=i,r},a.prototype.getBytes=function(e,t,i){if(lr(e,"string"),lr(t,"charIndex"),lr(i,"charCount"),t<0||i<0)throw new RangeError("Argument Out Of Range Exception: charIndex or charCount is less than zero");if(e.length-t<i)throw new RangeError("Argument Out Of Range Exception: charIndex and charCount do not denote a valid range in string");var r;if(e==="")return r=new ArrayBuffer(0),r;(this.type===null||this.type===void 0)&&(this.type="Ansi");var n=this.getByteCountInternal(e,t,i);switch(this.type){case"Utf8":return r=this.getBytesOfUtf8Encoding(n,e,t,i),r;case"Unicode":return r=this.getBytesOfUnicodeEncoding(n,e,t,i),r;default:return r=this.getBytesOfAnsiEncoding(n,e,t,i),r}},a.prototype.getString=function(e,t,i){if(lr(e,"bytes"),lr(t,"index"),lr(i,"count"),t<0||i<0)throw new RangeError("Argument Out Of Range Exception: index or count is less than zero");if(e.byteLength-t<i)throw new RangeError("Argument Out Of Range Exception: index and count do not denote a valid range in bytes");if(e.byteLength===0||i===0)return"";(this.type===null||this.type===void 0)&&(this.type="Ansi");var r="",n=new Uint8Array(e);switch(this.type){case"Utf8":var s=this.getStringOfUtf8Encoding(n,t,i);return s;case"Unicode":var o=new Uint16Array(e);return r=this.getStringofUnicodeEncoding(o,t,i),r;default:for(var l=t,h=0;h<i;h++){var p=n[l];r+=String.fromCharCode(p),l++}return r}},a.prototype.getBytesOfAnsiEncoding=function(e,t,i,r){for(var n=new ArrayBuffer(e),s=new Uint8Array(n),o=0,l=0;l<r;l++){var h=t.charCodeAt(i++);h<2048?s[o]=h:s[o]=63,o++}return n},a.prototype.getBytesOfUtf8Encoding=function(e,t,i,r){for(var n=new ArrayBuffer(e),s=new Uint8Array(n),o=i,l=0,h=0;h<r;h++){var p=t.charCodeAt(o);p<=127?s[l]=p:p<2048?(s[l]=192|p>>6,s[++l]=128|p&63):p<55296||p>=57344?(s[l]=224|p>>12,s[++l]=128|p>>6&63,s[++l]=128|p&63):(s[l]=239,s[++l]=191,s[++l]=189),++l,++o}return n},a.prototype.getBytesOfUnicodeEncoding=function(e,t,i,r){for(var n=new ArrayBuffer(e),s=new Uint16Array(n),o=0;o<r;o++){var l=t.charCodeAt(o);s[o]=l}return n},a.prototype.getStringOfUtf8Encoding=function(e,t,i){var r=0,n=t,s="";for(r;r<i;r++){for(var o=e[n++];n>e.length;)return s;o>127&&(o>191&&o<224&&n<i?o=(o&31)<<6|e[n]&63:o>223&&o<240&&n<e.byteLength?o=(o&15)<<12|(e[n]&63)<<6|e[++n]&63:o>239&&o<248&&n<e.byteLength&&(o=(o&7)<<18|(e[n]&63)<<12|(e[++n]&63)<<6|e[++n]&63),++n),s+=String.fromCharCode(o)}return s},a.prototype.getStringofUnicodeEncoding=function(e,t,i){if(i>e.length)throw new RangeError("ArgumentOutOfRange_Count");for(var r=new Uint16Array(i),n="",s=0;s<i&&s<e.length;s++)r[s]=e[t++];return n=String.fromCharCode.apply(null,r),n},a.prototype.destroy=function(){this.emitBOM=void 0,this.encodingType=void 0},a}();function lr(a,e){if(a==null)throw new Error("ArgumentException: "+e+" cannot be null or undefined")}var Je=function(){function a(){}return a.bitReverse=function(e){return a.reverseBits[e&15]<<12|a.reverseBits[e>>4&15]<<8|a.reverseBits[e>>8&15]<<4|a.reverseBits[e>>12]},a.bitConverterToInt32=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},a.bitConverterToInt16=function(e,t){return e[t]|e[t+1]<<8},a.bitConverterToUInt32=function(e){var t=new Uint32Array(1);return t[0]=e,t[0]},a.bitConverterToUInt16=function(e,t){var i=new Uint16Array(1);return i[0]=e[t]|e[t+1]<<8,i[0]},a.bitConverterUintToInt32=function(e){var t=new Int32Array(1);return t[0]=e,t[0]},a.bitConverterInt32ToUint=function(e){var t=new Uint32Array(1);return t[0]=e,t[0]},a.bitConverterInt32ToInt16=function(e){var t=new Int16Array(1);return t[0]=e,t[0]},a.byteToString=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},a.byteIntToString=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},a.arrayCopy=function(e,t,i,r,n){var s=new Uint8Array(e.buffer,t),o=s.subarray(0,n);i.set(o,r)},a.mergeArray=function(e,t){var i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i},a.encodedString=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,r,n,s,o,l,h,p=0,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var d=e.length*3/4;if(e.charAt(e.length-1)===t.charAt(64)&&d--,e.charAt(e.length-2)===t.charAt(64)&&d--,d%1!==0)throw new Error("Invalid base64 input, bad content length.");for(var f=new Uint8Array(d|0);p<e.length;)s=t.indexOf(e.charAt(p++)),o=t.indexOf(e.charAt(p++)),l=t.indexOf(e.charAt(p++)),h=t.indexOf(e.charAt(p++)),i=s<<2|o>>4,r=(o&15)<<4|l>>2,n=(l&3)<<6|h,f[c++]=i,l!==64&&(f[c++]=r),h!==64&&(f[c++]=n);return f},a.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],a.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],a}(),cs=[],yn=4,Mr=2,Yv=101010256,$v=12,Qv=33639248,ds=4096,Ct=function(){function a(){cs.length===0&&a.initCrc32Table(),this.files=[],this.level="Normal",Ah.isMicrosoftBrowser=!!navigator.msSaveBlob}return Object.defineProperty(a.prototype,"items",{get:function(){return this.files},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"compressionLevel",{get:function(){return this.level},set:function(e){this.level=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this.files===void 0?0:this.files.length},enumerable:!0,configurable:!0}),a.prototype.addItem=function(e){if(e==null)throw new Error("ArgumentException: item cannot be null or undefined");for(var t=0;t<this.files.length;t++){var i=this.files[t];if(i instanceof Wr&&i.name===e.name)throw new Error("item with same name already exist")}this.files.push(e)},a.prototype.addDirectory=function(e){if(e==null)throw new Error("ArgumentException: string cannot be null or undefined");if(e.length===0)throw new Error("ArgumentException: string cannot be empty");if(e.slice(-1)!=="/"&&(e+="/"),this.files.indexOf(e)!==-1)throw new Error("item with same name already exist");this.files.push(e)},a.prototype.getItem=function(e){if(e>=0&&e<this.files.length)return this.files[e]},a.prototype.contains=function(e){return this.files.indexOf(e)!==-1},a.prototype.open=function(e){var t=Je.encodedString(e);if(t.length==0)throw new DOMException("stream");var i=new js(t),r=a.findValueFromEnd(i,Yv,65557);if(r<0)throw new DOMException("Can't locate end of central directory record. Possible wrong file format or archive is corrupt.");i.position=r+$v;var n=a.ReadInt32(i),s=r-n;i.position=s,this.readCentralDirectoryDataAndExtractItems(i)},a.prototype.readCentralDirectoryDataAndExtractItems=function(e){if(e==null)throw new DOMException("stream");for(var t;a.ReadInt32(e)==Qv;)t=new Jv,t.readCentralDirectoryData(e);t.readData(e,t.checkCrc),t.decompressData(),this.files.push(new Wr(t.unCompressedStream.buffer,t.name))},a.prototype.save=function(e){if(e==null||e.length===0)throw new Error("ArgumentException: fileName cannot be null or undefined");if(this.files.length===0)throw new Error("InvalidOperation");var t=this;return new Promise(function(i,r){t.saveInternal(e,!1).then(function(){i(t)})})},a.prototype.saveAsBlob=function(){var e=this;return new Promise(function(t,i){e.saveInternal("",!0).then(function(r){t(r)})})},a.prototype.saveInternal=function(e,t){var i=this,r=this;return new Promise(function(n,s){for(var o=[],l=0,h=0;h<r.files.length;h++){var p=i.getCompressedData(i.files[h]);p.then(function(c){if(l=r.constructZippedObject(o,c,l,c.isDirectory),o.length===r.files.length){var d=r.writeZippedContent(e,o,l,t);n(d)}})}})},a.prototype.destroy=function(){if(this.files!==void 0&&this.files.length>0){for(var e=0;e<this.files.length;e++){var t=this.files[e];t instanceof Wr&&t.destroy(),t=void 0}this.files=[]}this.files=void 0,this.level=void 0},a.prototype.getCompressedData=function(e){var t=this,i=new Promise(function(r,n){if(e instanceof Wr){var s=new FileReader;s.onload=function(){var l=new Uint8Array(s.result),h={fileName:e.name,crc32Value:0,compressedData:[],compressedSize:void 0,uncompressedDataSize:l.length,compressionType:void 0,isDirectory:!1};if(t.level==="Normal"){t.compressData(l,h,cs);for(var p=0,c=0;c<h.compressedData.length;c++)p+=h.compressedData[c].length;h.compressedSize=p,h.compressionType="\b\0"}else h.compressedSize=l.length,h.crc32Value=t.calculateCrc32Value(0,l,cs),h.compressionType="\0\0",h.compressedData.push(l);r(h)},s.readAsArrayBuffer(e.data)}else{var o={fileName:e,crc32Value:0,compressedData:"",compressedSize:0,uncompressedDataSize:0,compressionType:"\0\0",isDirectory:!0};r(o)}});return i},a.prototype.compressData=function(e,t,i){var r=new Xv(!0),n=0,s=0;do{if(n>=e.length){r.close();break}s=Math.min(e.length,n+16384);var o=e.subarray(n,s);t.crc32Value=this.calculateCrc32Value(t.crc32Value,o,i),r.write(o,0,s-n),n=s}while(n<=e.length);t.compressedData=r.compressedData,r.destroy()},a.prototype.constructZippedObject=function(e,t,i,r){var n=0,s=new Date;r&&(n=n|16),n=n|0;var o=this.writeHeader(t,s),l="PK"+o+t.fileName,h=this.writeCentralDirectory(t,o,i,n);return e.push({localHeader:l,centralDir:h,compressedData:t}),i+l.length+t.compressedSize},a.prototype.writeHeader=function(e,t){var i="";return i+=`
\0\0\0`,i+=e.compressionType,i+=this.getBytes(this.getModifiedTime(t),2),i+=this.getBytes(this.getModifiedDate(t),2),i+=this.getBytes(e.crc32Value,4),i+=this.getBytes(e.compressedSize,4),i+=this.getBytes(e.uncompressedDataSize,4),i+=this.getBytes(e.fileName.length,2),i+=this.getBytes(0,2),i},a.prototype.writeZippedContent=function(e,t,i,r){for(var n=0,s=[],o=0;o<t.length;o++){var l=t[o];for(n+=l.centralDir.length,s.push(this.getArrayBuffer(l.localHeader));l.compressedData.compressedData.length;)s.push(l.compressedData.compressedData.shift().buffer)}for(var o=0;o<t.length;o++)s.push(this.getArrayBuffer(t[o].centralDir));s.push(this.getArrayBuffer(this.writeFooter(t,n,i)));var h=new Blob(s,{type:"application/zip"});return r||Ah.save(e,h),h},a.prototype.writeCentralDirectory=function(e,t,i,r){var n="PK"+this.getBytes(20,2)+t+this.getBytes(0,2)+"\0\0\0\0"+this.getBytes(r,4)+this.getBytes(i,4)+e.fileName;return n},a.prototype.writeFooter=function(e,t,i){var r="PK\0\0\0\0"+this.getBytes(e.length,2)+this.getBytes(e.length,2)+this.getBytes(t,4)+this.getBytes(i,4)+this.getBytes(0,2);return r},a.prototype.getArrayBuffer=function(e){for(var t=new Uint8Array(e.length),i=0;i<e.length;++i)t[i]=e.charCodeAt(i)&255;return t.buffer},a.prototype.getBytes=function(e,t){for(var i="",r=0;r<t;r++)i+=String.fromCharCode(e&255),e=e>>>8;return i},a.prototype.getModifiedTime=function(e){var t=e.getHours();return t=t<<6,t=t|e.getMinutes(),t=t<<5,t=t|e.getSeconds()/2},a.prototype.getModifiedDate=function(e){var t=e.getFullYear()-1980;return t=t<<4,t=t|e.getMonth()+1,t=t<<5,t=t|e.getDate()},a.prototype.calculateCrc32Value=function(e,t,i){e^=-1;for(var r=0;r<t.length;r++)e=e>>>8^i[(e^t[r])&255];return e^-1},a.initCrc32Table=function(){for(var e,t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;cs[t]=e}},a.findValueFromEnd=function(e,t,i){if(e==null)throw new DOMException("stream");var r=e.inputStream.buffer.byteLength;if(r<4)return-1;var n=new Uint8Array(4),s=Math.max(0,r-i),o=r-1-yn;e.position=o,e.read(n,0,yn);var l=n[0],h=l==t;if(!h){for(;o>s;)if(l<<=8,o--,e.position=o,l+=e.readByte(),l==t){h=!0;break}}return h?o:-1},a.ReadInt32=function(e){var t=new Uint8Array(yn);if(e.read(t,0,yn)!=yn)throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return Je.bitConverterToInt32(t,0)},a.ReadInt16=function(e){var t=new Uint8Array(Mr);if(e.read(t,0,Mr)!=Mr)throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return Je.bitConverterToInt16(t,0)},a.ReadUInt16=function(e){{var t=new Uint8Array(Mr);if(e.read(t,0,Mr)!=Mr)throw new DOMException("Unable to read value at the specified position - end of stream was reached.");return Je.bitConverterToInt16(t,0)}},a}(),Jv=function(){function a(){this.headerSignature=67324752,this.checkCrc=!0,this.crc32=0}return a.prototype.readCentralDirectoryData=function(e){e.position+=4,this.options=Ct.ReadInt16(e),this.compressionMethod=Ct.ReadInt16(e),this.checkCrc=this.compressionMethod!=99,Ct.ReadInt32(e),this.crc32=Je.bitConverterToUInt32(Ct.ReadInt32(e)),this.compressedSize=Ct.ReadInt32(e),this.originalSize=Ct.ReadInt32(e);var t=Ct.ReadInt16(e),i=Ct.ReadInt16(e),r=Ct.ReadInt16(e);e.position+=4,this.externalAttributes=Ct.ReadInt32(e),this.localHeaderOffset=Ct.ReadInt32(e);var n=new Uint8Array(t);e.read(n,0,t);var s=Je.byteToString(n);s=s.replace("\\","/"),this.name=s,e.position+=i+r,this.options!=0&&(this.options=0)},a.prototype.readData=function(e,t){if(e.length==0)throw new DOMException("stream");e.position=this.localHeaderOffset,this.checkCrc=t,this.readLocalHeader(e),this.readCompressedData(e)},a.prototype.decompressData=function(){this.compressionMethod==8&&this.originalSize>0&&this.decompressDataOld()},a.prototype.decompressDataOld=function(){var e=new ty(this.compressedStream,!0),t;this.originalSize>0&&(t=new js(new Uint8Array(this.originalSize)));for(var i=new Uint8Array(ds),r;(r=e.read(i,0,ds))>0;)t.write(i.subarray(0,r),0,r);this.unCompressedStream=t.toByteArray(),this.checkCrc},a.prototype.readLocalHeader=function(e){if(e.length==0)throw new DOMException("stream");if(Ct.ReadInt32(e)!=this.headerSignature)throw new DOMException("Can't find local header signature - wrong file format or file is corrupt.");e.position+=22;var t=Ct.ReadInt16(e),i=Ct.ReadUInt16(e);if(this.compressionMethod!=99)if(i>2){e.position+=t;var r=Ct.ReadInt16(e);if(r==23)throw new DOMException("UnSupported");e.position+=i-2}else e.position+=t+i},a.prototype.readCompressedData=function(e){var t;if(this.compressedSize>0){var i=this.compressedSize;t=new js(new Uint8Array(i));for(var r=new Uint8Array(ds);i>0;){var n=Math.min(i,ds);if(e.read(r,0,n)!=n)throw new DOMException("End of file reached - wrong file format or file is corrupt.");t.write(r.subarray(0,n),0,n),i-=n}this.compressedStream=new Uint8Array(t.inputStream)}else this.compressedSize<0||this.compressedSize==0},a}(),Wr=function(){function a(e,t){if(e==null)throw new Error("ArgumentException: data cannot be null or undefined");if(t==null)throw new Error("ArgumentException: string cannot be null or undefined");if(t.length===0)throw new Error("string cannot be empty");this.data=e,this.name=t}return Object.defineProperty(a.prototype,"dataStream",{get:function(){return this.decompressedStream},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this.fileName},set:function(e){this.fileName=e},enumerable:!0,configurable:!0}),a.prototype.destroy=function(){this.fileName=void 0,this.data=void 0},a}(),Cn=new Int16Array(286),Fr=new Uint8Array(286),Th=new Int16Array(30),Fa=new Uint8Array(30),Xv=function(){function a(e){this.pendingBuffer=new Uint8Array(65536),this.pendingBufLength=0,this.pendingBufCache=0,this.pendingBufBitsInCache=0,this.bufferPosition=0,this.extraBits=0,this.currentHash=0,this.matchStart=0,this.matchLength=0,this.matchPrevAvail=!1,this.blockStart=0,this.stringStart=0,this.lookAhead=0,this.totalBytesIn=0,this.inputOffset=0,this.inputEnd=0,this.windowSize=32768,this.windowMask=this.windowSize-1,this.hashSize=32768,this.hashMask=this.hashSize-1,this.hashShift=Math.floor(17/3),this.maxDist=this.windowSize-262,this.checkSum=1,this.noWrap=!1,a.isHuffmanTreeInitiated||(a.initHuffmanTree(),a.isHuffmanTreeInitiated=!0),this.treeLiteral=new fi(this,286,257,15),this.treeDistances=new fi(this,30,1,15),this.treeCodeLengths=new fi(this,19,4,7),this.arrDistances=new Uint16Array(16384),this.arrLiterals=new Uint8Array(16384),this.stream=[],this.dataWindow=new Uint8Array(2*this.windowSize),this.hashHead=new Int16Array(this.hashSize),this.hashPrevious=new Int16Array(this.windowSize),this.blockStart=this.stringStart=1,this.noWrap=e,e||this.writeZLibHeader()}return Object.defineProperty(a.prototype,"compressedData",{get:function(){return this.stream},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"getCompressedString",{get:function(){var e="";if(this.stream!==void 0)for(var t=0;t<this.stream.length;t++)e+=String.fromCharCode.apply(null,this.stream[t]);return e},enumerable:!0,configurable:!0}),a.prototype.write=function(e,t,i){if(e==null)throw new Error("ArgumentException: data cannot null or undefined");var r=t+i;if(0>t||t>r||r>e.length)throw new Error("ArgumentOutOfRangeException: Offset or length is incorrect");if(typeof e=="string"){var n=new hp(!1);n.type="Utf8",e=new Uint8Array(n.getBytes(e,0,e.length)),r=t+e.length}for(this.inputBuffer=e,this.inputOffset=t,this.inputEnd=r,this.noWrap||(this.checkSum=Zv.checksumUpdate(this.checkSum,this.inputBuffer,this.inputOffset,r));this.inputEnd!==this.inputOffset||this.pendingBufLength!==0;)this.pendingBufferFlush(),this.compressData(!1)},a.prototype.writeZLibHeader=function(){var e=30720;e|=64,e+=31-e%31,this.pendingBufferWriteShortBytes(e)},a.prototype.pendingBufferWriteShortBytes=function(e){this.pendingBuffer[this.pendingBufLength++]=e>>8,this.pendingBuffer[this.pendingBufLength++]=e},a.prototype.compressData=function(e){var t;do{this.fillWindow();var i=e&&this.inputEnd===this.inputOffset;t=this.compressSlow(i,e)}while(this.pendingBufLength===0&&t);return t},a.prototype.compressSlow=function(e,t){if(this.lookAhead<262&&!e)return!1;for(;this.lookAhead>=262||e;){if(this.lookAhead===0)return this.lookAheadCompleted(t);this.stringStart>=2*this.windowSize-262&&this.slideWindow();var i=this.matchStart,r=this.matchLength;if(this.lookAhead>=3&&this.discardMatch(),r>=3&&this.matchLength<=r?r=this.matchPreviousBest(i,r):this.matchPreviousAvailable(),this.bufferPosition>=16384)return this.huffmanIsFull(t)}return!0},a.prototype.discardMatch=function(){var e=this.insertString();e!==0&&this.stringStart-e<=this.maxDist&&this.findLongestMatch(e)&&this.matchLength<=5&&this.matchLength===3&&this.stringStart-this.matchStart>4096&&(this.matchLength=2)},a.prototype.matchPreviousAvailable=function(){this.matchPrevAvail&&this.huffmanTallyLit(this.dataWindow[this.stringStart-1]&255),this.matchPrevAvail=!0,this.stringStart++,this.lookAhead--},a.prototype.matchPreviousBest=function(e,t){this.huffmanTallyDist(this.stringStart-1-e,t),t-=2;do this.stringStart++,this.lookAhead--,this.lookAhead>=3&&this.insertString();while(--t>0);return this.stringStart++,this.lookAhead--,this.matchPrevAvail=!1,this.matchLength=2,t},a.prototype.lookAheadCompleted=function(e){return this.matchPrevAvail&&this.huffmanTallyLit(this.dataWindow[this.stringStart-1]&255),this.matchPrevAvail=!1,this.huffmanFlushBlock(this.dataWindow,this.blockStart,this.stringStart-this.blockStart,e),this.blockStart=this.stringStart,!1},a.prototype.huffmanIsFull=function(e){var t=this.stringStart-this.blockStart;this.matchPrevAvail&&t--;var i=e&&this.lookAhead===0&&!this.matchPrevAvail;return this.huffmanFlushBlock(this.dataWindow,this.blockStart,t,i),this.blockStart+=t,!i},a.prototype.fillWindow=function(){for(this.stringStart>=this.windowSize+this.maxDist&&this.slideWindow();this.lookAhead<262&&this.inputOffset<this.inputEnd;){var e=2*this.windowSize-this.lookAhead-this.stringStart;e>this.inputEnd-this.inputOffset&&(e=this.inputEnd-this.inputOffset),this.dataWindow.set(this.inputBuffer.subarray(this.inputOffset,this.inputOffset+e),this.stringStart+this.lookAhead),this.inputOffset+=e,this.totalBytesIn+=e,this.lookAhead+=e}this.lookAhead>=3&&this.updateHash()},a.prototype.slideWindow=function(){this.dataWindow.set(this.dataWindow.subarray(this.windowSize,this.windowSize+this.windowSize),0),this.matchStart-=this.windowSize,this.stringStart-=this.windowSize,this.blockStart-=this.windowSize;for(var e=0;e<this.hashSize;++e){var t=this.hashHead[e]&65535;this.hashHead[e]=t>=this.windowSize?t-this.windowSize:0}for(var e=0;e<this.windowSize;e++){var t=this.hashPrevious[e]&65535;this.hashPrevious[e]=t>=this.windowSize?t-this.windowSize:0}},a.prototype.insertString=function(){var e,t=(this.currentHash<<this.hashShift^this.dataWindow[this.stringStart+2])&this.hashMask;return this.hashPrevious[this.stringStart&this.windowMask]=e=this.hashHead[t],this.hashHead[t]=this.stringStart,this.currentHash=t,e&65535},a.prototype.findLongestMatch=function(e){var t=4096,i=258,r=this.stringStart,n,s=this.stringStart+this.matchLength,o=Math.max(this.matchLength,2),l=Math.max(this.stringStart-this.maxDist,0),h=this.stringStart+258-1,p=this.dataWindow[s-1],c=this.dataWindow[s],d=this.dataWindow;o>=32&&(t>>=2),i>this.lookAhead&&(i=this.lookAhead);do if(!(d[e+o]!==c||d[e+o-1]!==p||d[e]!==d[r]||d[e+1]!==d[r+1])){for(n=e+2,r+=2;d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&r<h;);if(r>s){if(this.matchStart=e,s=r,o=r-this.stringStart,o>=i)break;p=d[s-1],c=d[s]}r=this.stringStart}while((e=this.hashPrevious[e&this.windowMask]&65535)>l&&--t!==0);return this.matchLength=Math.min(o,this.lookAhead),this.matchLength>=3},a.prototype.updateHash=function(){this.currentHash=this.dataWindow[this.stringStart]<<this.hashShift^this.dataWindow[this.stringStart+1]},a.prototype.huffmanTallyLit=function(e){return this.arrDistances[this.bufferPosition]=0,this.arrLiterals[this.bufferPosition++]=e,this.treeLiteral.codeFrequencies[e]++,this.bufferPosition>=16384},a.prototype.huffmanTallyDist=function(e,t){this.arrDistances[this.bufferPosition]=e,this.arrLiterals[this.bufferPosition++]=t-3;var i=this.huffmanLengthCode(t-3);this.treeLiteral.codeFrequencies[i]++,i>=265&&i<285&&(this.extraBits+=Math.floor((i-261)/4));var r=this.huffmanDistanceCode(e-1);return this.treeDistances.codeFrequencies[r]++,r>=4&&(this.extraBits+=Math.floor(r/2-1)),this.bufferPosition>=16384},a.prototype.huffmanFlushBlock=function(e,t,i,r){this.treeLiteral.codeFrequencies[256]++,this.treeLiteral.buildTree(),this.treeDistances.buildTree(),this.treeLiteral.calculateBLFreq(this.treeCodeLengths),this.treeDistances.calculateBLFreq(this.treeCodeLengths),this.treeCodeLengths.buildTree();for(var n=4,s=18;s>n;s--)this.treeCodeLengths.codeLengths[fi.huffCodeLengthOrders[s]]>0&&(n=s+1);for(var o=14+n*3+this.treeCodeLengths.getEncodedLength()+this.treeLiteral.getEncodedLength()+this.treeDistances.getEncodedLength()+this.extraBits,l=this.extraBits,s=0;s<286;s++)l+=this.treeLiteral.codeFrequencies[s]*Fr[s];for(var s=0;s<30;s++)l+=this.treeDistances.codeFrequencies[s]*Fa[s];o>=l&&(o=l),t>=0&&i+4<o>>3?this.huffmanFlushStoredBlock(e,t,i,r):o==l?(this.pendingBufferWriteBits(2+(r?1:0),3),this.treeLiteral.setStaticCodes(Cn,Fr),this.treeDistances.setStaticCodes(Th,Fa),this.huffmanCompressBlock(),this.huffmanReset()):(this.pendingBufferWriteBits(4+(r?1:0),3),this.huffmanSendAllTrees(n),this.huffmanCompressBlock(),this.huffmanReset())},a.prototype.huffmanFlushStoredBlock=function(e,t,i,r){this.pendingBufferWriteBits(0+(r?1:0),3),this.pendingBufferAlignToByte(),this.pendingBufferWriteShort(i),this.pendingBufferWriteShort(~i),this.pendingBufferWriteByteBlock(e,t,i),this.huffmanReset()},a.prototype.huffmanLengthCode=function(e){if(e===255)return 285;for(var t=257;e>=8;)t+=4,e>>=1;return t+e},a.prototype.huffmanDistanceCode=function(e){for(var t=0;e>=4;)t+=2,e>>=1;return t+e},a.prototype.huffmanSendAllTrees=function(e){this.treeCodeLengths.buildCodes(),this.treeLiteral.buildCodes(),this.treeDistances.buildCodes(),this.pendingBufferWriteBits(this.treeLiteral.treeLength-257,5),this.pendingBufferWriteBits(this.treeDistances.treeLength-1,5),this.pendingBufferWriteBits(e-4,4);for(var t=0;t<e;t++)this.pendingBufferWriteBits(this.treeCodeLengths.codeLengths[fi.huffCodeLengthOrders[t]],3);this.treeLiteral.writeTree(this.treeCodeLengths),this.treeDistances.writeTree(this.treeCodeLengths)},a.prototype.huffmanReset=function(){this.bufferPosition=0,this.extraBits=0,this.treeLiteral.reset(),this.treeDistances.reset(),this.treeCodeLengths.reset()},a.prototype.huffmanCompressBlock=function(){for(var e=0;e<this.bufferPosition;e++){var t=this.arrLiterals[e]&255,i=this.arrDistances[e];if(i--!==0){var r=this.huffmanLengthCode(t);this.treeLiteral.writeCodeToStream(r);var n=Math.floor((r-261)/4);n>0&&n<=5&&this.pendingBufferWriteBits(t&(1<<n)-1,n);var s=this.huffmanDistanceCode(i);this.treeDistances.writeCodeToStream(s),n=Math.floor(s/2-1),n>0&&this.pendingBufferWriteBits(i&(1<<n)-1,n)}else this.treeLiteral.writeCodeToStream(t)}this.treeLiteral.writeCodeToStream(256)},a.prototype.pendingBufferWriteBits=function(e,t){var i=new Uint32Array(1);i[0]=this.pendingBufCache|e<<this.pendingBufBitsInCache,this.pendingBufCache=i[0],this.pendingBufBitsInCache+=t,this.pendingBufferFlushBits()},a.prototype.pendingBufferFlush=function(e){if(this.pendingBufferFlushBits(),this.pendingBufLength>0){var t=new Uint8Array(this.pendingBufLength);t.set(this.pendingBuffer.subarray(0,this.pendingBufLength),0),this.stream.push(t)}this.pendingBufLength=0},a.prototype.pendingBufferFlushBits=function(){for(var e=0;this.pendingBufBitsInCache>=8&&this.pendingBufLength<65536;)this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache,this.pendingBufCache>>=8,this.pendingBufBitsInCache-=8,e++;return e},a.prototype.pendingBufferWriteByteBlock=function(e,t,i){var r=e.subarray(t,t+i);this.pendingBuffer.set(r,this.pendingBufLength),this.pendingBufLength+=i},a.prototype.pendingBufferWriteShort=function(e){this.pendingBuffer[this.pendingBufLength++]=e,this.pendingBuffer[this.pendingBufLength++]=e>>8},a.prototype.pendingBufferAlignToByte=function(){this.pendingBufBitsInCache>0&&(this.pendingBuffer[this.pendingBufLength++]=this.pendingBufCache),this.pendingBufCache=0,this.pendingBufBitsInCache=0},a.initHuffmanTree=function(){for(var e=0;e<144;)Cn[e]=fi.bitReverse(48+e<<8),Fr[e++]=8;for(;e<256;)Cn[e]=fi.bitReverse(256+e<<7),Fr[e++]=9;for(;e<280;)Cn[e]=fi.bitReverse(-256+e<<9),Fr[e++]=7;for(;e<286;)Cn[e]=fi.bitReverse(-88+e<<8),Fr[e++]=8;for(e=0;e<30;e++)Th[e]=fi.bitReverse(e<<11),Fa[e]=5},a.prototype.close=function(){do this.pendingBufferFlush(!0),this.compressData(!0)||(this.pendingBufferFlush(!0),this.pendingBufferAlignToByte(),this.noWrap||(this.pendingBufferWriteShortBytes(this.checkSum>>16),this.pendingBufferWriteShortBytes(this.checkSum&65535)),this.pendingBufferFlush(!0));while(this.inputEnd!==this.inputOffset||this.pendingBufLength!==0)},a.prototype.destroy=function(){this.stream=[],this.stream=void 0,this.pendingBuffer=void 0,this.treeLiteral=void 0,this.treeDistances=void 0,this.treeCodeLengths=void 0,this.arrLiterals=void 0,this.arrDistances=void 0,this.hashHead=void 0,this.hashPrevious=void 0,this.dataWindow=void 0,this.inputBuffer=void 0,this.pendingBufLength=void 0,this.pendingBufCache=void 0,this.pendingBufBitsInCache=void 0,this.bufferPosition=void 0,this.extraBits=void 0,this.currentHash=void 0,this.matchStart=void 0,this.matchLength=void 0,this.matchPrevAvail=void 0,this.blockStart=void 0,this.stringStart=void 0,this.lookAhead=void 0,this.totalBytesIn=void 0,this.inputOffset=void 0,this.inputEnd=void 0,this.windowSize=void 0,this.windowMask=void 0,this.hashSize=void 0,this.hashMask=void 0,this.hashShift=void 0,this.maxDist=void 0,this.checkSum=void 0,this.noWrap=void 0},a.isHuffmanTreeInitiated=!1,a}(),fi=function(){function a(e,t,i,r){this.writer=e,this.codeMinCount=i,this.maxLength=r,this.codeFrequency=new Uint16Array(t),this.lengthCount=new Int32Array(r)}return Object.defineProperty(a.prototype,"treeLength",{get:function(){return this.codeCount},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"codeLengths",{get:function(){return this.codeLength},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"codeFrequencies",{get:function(){return this.codeFrequency},enumerable:!0,configurable:!0}),a.prototype.setStaticCodes=function(e,t){var i=new Int16Array(e.length);i.set(e,0),this.codes=i;var r=new Uint8Array(t.length);r.set(t,0),this.codeLength=r},a.prototype.reset=function(){for(var e=0;e<this.codeFrequency.length;e++)this.codeFrequency[e]=0;this.codes=void 0,this.codeLength=void 0},a.prototype.writeCodeToStream=function(e){this.writer.pendingBufferWriteBits(this.codes[e]&65535,this.codeLength[e])},a.prototype.buildCodes=function(){var e=new Int32Array(this.maxLength);this.codes=new Int16Array(this.codeCount);for(var t=0,i=0;i<this.maxLength;i++)e[i]=t,t+=this.lengthCount[i]<<15-i;for(var r=0;r<this.codeCount;r++){var n=this.codeLength[r];n>0&&(this.codes[r]=a.bitReverse(e[n-1]),e[n-1]+=1<<16-n)}},a.bitReverse=function(e){return a.reverseBits[e&15]<<12|a.reverseBits[e>>4&15]<<8|a.reverseBits[e>>8&15]<<4|a.reverseBits[e>>12]},a.prototype.getEncodedLength=function(){for(var e=0,t=0;t<this.codeFrequency.length;t++)e+=this.codeFrequency[t]*this.codeLength[t];return e},a.prototype.calculateBLFreq=function(e){for(var t,i,r,n=-1,s=0;s<this.codeCount;){r=1;var o=this.codeLength[s];for(o===0?(t=138,i=3):(t=6,i=3,n!==o&&(e.codeFrequency[o]++,r=0)),n=o,s++;s<this.codeCount&&n===this.codeLength[s]&&(s++,!(++r>=t)););r<i?e.codeFrequency[n]+=r:n!==0?e.codeFrequency[16]++:r<=10?e.codeFrequency[17]++:e.codeFrequency[18]++}},a.prototype.writeTree=function(e){for(var t,i,r,n=-1,s=0;s<this.codeCount;){r=1;var o=this.codeLength[s];for(o===0?(t=138,i=3):(t=6,i=3,n!==o&&(e.writeCodeToStream(o),r=0)),n=o,s++;s<this.codeCount&&n===this.codeLength[s]&&(s++,!(++r>=t)););if(r<i)for(;r-- >0;)e.writeCodeToStream(n);else n!==0?(e.writeCodeToStream(16),this.writer.pendingBufferWriteBits(r-3,2)):r<=10?(e.writeCodeToStream(17),this.writer.pendingBufferWriteBits(r-3,3)):(e.writeCodeToStream(18),this.writer.pendingBufferWriteBits(r-11,7))}},a.prototype.buildTree=function(){for(var e=this.codeFrequency.length,t=new Int32Array(e),i=0,r=0,n=0;n<e;n++){var s=this.codeFrequency[n];if(s!==0){for(var o=i++,l=0;o>0&&this.codeFrequency[t[l=Math.floor((o-1)/2)]]>s;)t[o]=t[l],o=l;t[o]=n,r=n}}for(;i<2;)t[i++]=r<2?++r:0;this.codeCount=Math.max(r+1,this.codeMinCount);for(var h=i,p=h,c=new Int32Array(4*i-2),d=new Int32Array(2*i-1),f=0;f<i;f++){var g=t[f],m=2*f;c[m]=g,c[m+1]=-1,d[f]=this.codeFrequency[g]<<8,t[f]=f}this.constructHuffmanTree(t,i,d,p,c),this.buildLength(c)},a.prototype.constructHuffmanTree=function(e,t,i,r,n){do{for(var s=e[0],o=e[--t],l=i[o],h=0,p=1;p<t;)p+1<t&&i[e[p]]>i[e[p+1]]&&p++,e[h]=e[p],h=p,p=h*2+1;for(;(p=h)>0&&i[e[h=Math.floor((p-1)/2)]]>l;)e[p]=e[h];e[p]=o;var c=e[0];o=r++,n[2*o]=s,n[2*o+1]=c;var d=Math.min(i[s]&255,i[c]&255);for(i[o]=l=i[s]+i[c]-d+1,h=0,p=1;p<t;)p+1<t&&i[e[p]]>i[e[p+1]]&&p++,e[h]=e[p],h=p,p=h*2+1;for(;(p=h)>0&&i[e[h=Math.floor((p-1)/2)]]>l;)e[p]=e[h];e[p]=o}while(t>1)},a.prototype.buildLength=function(e){this.codeLength=new Uint8Array(this.codeFrequency.length);for(var t=Math.floor(e.length/2),i=Math.floor((t+1)/2),r=0,n=0;n<this.maxLength;n++)this.lengthCount[n]=0;if(r=this.calculateOptimalCodeLength(e,r,t),r!==0){var s=this.maxLength-1;do{for(;this.lengthCount[--s]===0;);do this.lengthCount[s]--,this.lengthCount[++s]++,r-=1<<this.maxLength-1-s;while(r>0&&s<this.maxLength-1)}while(r>0);this.recreateTree(e,r,i)}},a.prototype.recreateTree=function(e,t,i){this.lengthCount[this.maxLength-1]+=t,this.lengthCount[this.maxLength-2]-=t;for(var r=2*i,n=this.maxLength;n!==0;n--)for(var s=this.lengthCount[n-1];s>0;){var o=2*e[r++];e[o+1]===-1&&(this.codeLength[e[o]]=n,s--)}},a.prototype.calculateOptimalCodeLength=function(e,t,i){var r=new Int32Array(i);r[i-1]=0;for(var n=i-1;n>=0;n--){var s=2*n+1;if(e[s]!==-1){var o=r[n]+1;o>this.maxLength&&(o=this.maxLength,t++),r[e[s-1]]=r[e[s]]=o}else{var o=r[n];this.lengthCount[o-1]++,this.codeLength[e[s-1]]=r[n]}}return t},a.reverseBits=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],a.huffCodeLengthOrders=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],a}(),Zv=function(){function a(){}return a.checksumUpdate=function(e,t,i,r){var n=new Uint32Array(1);n[0]=e;for(var s=n[0],o=n[0]=s&65535,l=n[0]=s>>a.checkSumBitOffset;r>0;){var h=Math.min(r,a.checksumIterationCount);for(r-=h;--h>=0;)o=o+(n[0]=t[i++]&255),l=l+o;o%=a.checksumBase,l%=a.checksumBase}return s=l<<a.checkSumBitOffset|o,s},a.checkSumBitOffset=16,a.checksumBase=65521,a.checksumIterationCount=3800,a}(),Lr=function(){function a(e){this.buildTree(e)}return a.init=function(){var e,t;for(e=new Uint8Array(288),t=0;t<144;)e[t++]=8;for(;t<256;)e[t++]=9;for(;t<280;)e[t++]=7;for(;t<288;)e[t++]=8;for(a.m_LengthTree=new a(e),e=new Uint8Array(32),t=0;t<32;)e[t++]=5;a.m_DistanceTree=new a(e)},a.prototype.prepareData=function(e,t,i){for(var r=0,n=512,s=0;s<i.length;s++){var o=i[s];o>0&&e[o]++}for(var l=1;l<=a.MAX_BITLEN;l++)if(t[l]=r,r+=e[l]<<16-l,l>=10){var h=t[l]&130944,p=r&130944;n+=p-h>>16-l}return{code:r,treeSize:n}},a.prototype.treeFromData=function(e,t,i,r,n){for(var s=new Int16Array(n),o=512,l=128,h=a.MAX_BITLEN;h>=10;h--){var p=r&130944;r-=e[h]<<16-h;for(var c=r&130944,d=c;d<p;d+=l)s[Je.bitReverse(d)]=Je.bitConverterInt32ToInt16(-o<<4|h),o+=1<<h-9}for(var d=0;d<i.length;d++){var h=i[d];if(h!=0){r=t[h];var f=Je.bitReverse(r);if(h<=9)do s[f]=Je.bitConverterInt32ToInt16(d<<4|h),f+=1<<h;while(f<512);else{var g=s[f&511],m=1<<(g&15);g=-(g>>4);do s[g|f>>9]=Je.bitConverterInt32ToInt16(d<<4|h),f+=1<<h;while(f<m)}t[h]=r+(1<<16-h)}}return s},a.prototype.buildTree=function(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=this.prepareData(t,i,e);this.m_Tree=this.treeFromData(t,i,e,r.code,r.treeSize)},a.prototype.unpackSymbol=function(e){var t,i;if((t=e.peekBits(9))>=0){if((i=this.m_Tree[t])>=0)return e.skipBits(i&15),i>>4;var r=-(i>>4),n=i&15;if((t=e.peekBits(n))>=0)return i=this.m_Tree[r|t>>9],e.skipBits(i&15),i>>4;var s=e.availableBits;return t=e.peekBits(s),i=this.m_Tree[r|t>>9],(i&15)<=s?(e.skipBits(i&15),i>>4):-1}else{var s=e.availableBits;return t=e.peekBits(s),i=this.m_Tree[t],i>=0&&(i&15)<=s?(e.skipBits(i&15),i>>4):-1}},Object.defineProperty(a,"lengthTree",{get:function(){return this.m_LengthTree},enumerable:!0,configurable:!0}),Object.defineProperty(a,"distanceTree",{get:function(){return this.m_DistanceTree},enumerable:!0,configurable:!0}),a.MAX_BITLEN=15,a}(),ey=function(){function a(){}return a.ChecksumUpdate=function(e,t,i,r){for(var n=e,s=n&65535,o=n>>this.DEF_CHECKSUM_BIT_OFFSET;r>0;){var l=Math.min(r,this.DEF_CHECKSUM_ITERATIONSCOUNT);for(r-=l;--l>=0;)s=s+(t[i++]&255),o=o+s;s%=this.DEF_CHECKSUM_BASE,o%=this.DEF_CHECKSUM_BASE}n=o<<this.DEF_CHECKSUM_BIT_OFFSET|s,e=n},a.ChecksumGenerate=function(e,t,i){var r=1;return a.ChecksumUpdate(r,e,t,i),r},a.DEF_CHECKSUM_BIT_OFFSET=16,a.DEF_CHECKSUM_BASE=65521,a.DEF_CHECKSUM_ITERATIONSCOUNT=3800,a}(),ty=function(){function a(e,t){if(this.defaultHuffmanDynamicTree=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],this.DEF_HEADER_METHOD_MASK=3840,this.DEF_HEADER_INFO_MASK=61440,this.DEF_HEADER_FLAGS_FCHECK=31,this.DEF_HEADER_FLAGS_FDICT=32,this.DEF_HEADER_FLAGS_FLEVEL=192,this.DEF_MAX_WINDOW_SIZE=65535,this.DEF_HUFFMAN_REPEATE_MAX=258,this.DEF_HUFFMAN_END_BLOCK=256,this.DEF_HUFFMAN_LENGTH_MINIMUMCODE=257,this.DEF_HUFFMAN_LENGTH_MAXIMUMCODE=285,this.DEF_HUFFMAN_DISTANCE_MAXIMUMCODE=29,this.mCheckSum=1,this.tBuffer=0,this.mBufferedBits=0,this.mTempBuffer=new Uint8Array(4),this.mBlockBuffer=new Uint8Array(this.DEF_MAX_WINDOW_SIZE),this.mbNoWrap=!1,this.mWindowSize=0,this.mCurrentPosition=0,this.mDataLength=0,this.mbCanReadNextBlock=!0,this.mbCanReadMoreData=!0,this.mbCheckSumRead=!1,e==null)throw new DOMException("stream");if(e.length===0)throw new DOMException("stream - string can not be empty");Lr.init(),this.mInputStream=new js(e),this.mbNoWrap=t,this.mbNoWrap||this.readZLibHeader(),this.decodeBlockHeader()}return Object.defineProperty(a.prototype,"mBuffer",{get:function(){return this.tBuffer},set:function(e){this.tBuffer=e},enumerable:!0,configurable:!0}),a.prototype.peekBits=function(e){if(e<0)throw new DOMException("count","Bits count can not be less than zero.");if(e>32)throw new DOMException("count","Count of bits is too large.");if(this.mBufferedBits<e&&this.fillBuffer(),this.mBufferedBits<e)return-1;var t=~(4294967295<<e),i=Je.bitConverterUintToInt32(this.mBuffer&t);return i},a.prototype.fillBuffer=function(){var e=4-(this.mBufferedBits>>3)-(this.mBufferedBits&7?1:0);if(e!==0)for(var t=this.mInputStream.read(this.mTempBuffer,0,e),i=0;i<t;i++)this.mBuffer=Je.bitConverterInt32ToUint(this.mBuffer|Je.bitConverterInt32ToUint(this.mTempBuffer[i]<<this.mBufferedBits)),this.mBufferedBits+=8},a.prototype.skipBits=function(e){if(e<0)throw new DOMException("count","Bits count can not be less than zero.");e!==0&&(e>=this.mBufferedBits?(e-=this.mBufferedBits,this.mBufferedBits=0,this.mBuffer=0,e>0&&(this.mInputStream.position+=e>>3,e&=7,e>0&&(this.fillBuffer(),this.mBufferedBits-=e,this.mBuffer=Je.bitConverterInt32ToUint(this.mBuffer>>>e)))):(this.mBufferedBits-=e,this.mBuffer=Je.bitConverterInt32ToUint(this.mBuffer>>>e)))},Object.defineProperty(a.prototype,"availableBits",{get:function(){return this.mBufferedBits},enumerable:!0,configurable:!0}),a.prototype.readZLibHeader=function(){var e=this.readInt16();if(e===-1)throw new DOMException("Header of the stream can not be read.");if(e%31!==0)throw new DOMException("Header checksum illegal");if((e&this.DEF_HEADER_METHOD_MASK)!==2048)throw new DOMException("Unsupported compression method.");if(this.mWindowSize=Math.pow(2,((e&this.DEF_HEADER_INFO_MASK)>>12)+8),this.mWindowSize>65535)throw new DOMException("Unsupported window size for deflate compression method.");if((e&this.DEF_HEADER_FLAGS_FDICT)>>5===1)throw new DOMException("Custom dictionary is not supported at the moment.")},a.prototype.readInt16=function(){var e=this.readBits(8)<<8;return e|=this.readBits(8),e},a.prototype.readBits=function(e){var t=this.peekBits(e);return t===-1?-1:(this.mBufferedBits-=e,this.mBuffer=Je.bitConverterInt32ToUint(this.mBuffer>>>e),t)},a.prototype.decodeBlockHeader=function(){if(!this.mbCanReadNextBlock)return!1;var e=this.readBits(1);if(e===-1)return!1;var t=this.readBits(2);if(t===-1)return!1;switch(this.mbCanReadNextBlock=e===0,t){case 0:this.mbReadingUncompressed=!0,this.skipToBoundary();var i=this.readInt16Inverted(),r=this.readInt16Inverted();if(i!==(r^65535))throw new DOMException("Wrong block length.");if(i>65535)throw new DOMException("Uncompressed block length can not be more than 65535.");this.mUncompressedDataLength=i,this.mCurrentLengthTree=null,this.mCurrentDistanceTree=null;break;case 1:this.mbReadingUncompressed=!1,this.mUncompressedDataLength=-1,this.mCurrentLengthTree=Lr.lengthTree,this.mCurrentDistanceTree=Lr.distanceTree;break;case 2:this.mbReadingUncompressed=!1,this.mUncompressedDataLength=-1;var n=this.decodeDynamicHeader(this.mCurrentLengthTree,this.mCurrentDistanceTree);this.mCurrentLengthTree=n.lengthTree,this.mCurrentDistanceTree=n.distanceTree;break;default:throw new DOMException("Wrong block type.")}return!0},a.prototype.skipToBoundary=function(){this.mBuffer=Je.bitConverterInt32ToUint(this.mBuffer>>>(this.mBufferedBits&7)),this.mBufferedBits&=-8},a.prototype.readInt16Inverted=function(){var e=this.readBits(8);return e|=this.readBits(8)<<8,e},a.prototype.decodeDynamicHeader=function(e,t){var i=0,r=this.readBits(5),n=this.readBits(5),s=this.readBits(4);if(r<0||n<0||s<0)throw new DOMException("Wrong dynamic huffman codes.");r+=257,n+=1;var o=r+n,l=new Uint8Array(o),h=new Uint8Array(19);s+=4;for(var p=0;p<s;){var c=this.readBits(3);if(c<0)throw new DOMException("Wrong dynamic huffman codes.");h[this.defaultHuffmanDynamicTree[p++]]=c}var d=new Lr(h);for(p=0;;){var f=void 0,g=!1;for(f=d.unpackSymbol(this);!(f&-16);){if(l[p++]=i=f,p===o){g=!0;break}f=d.unpackSymbol(this)}if(g)break;if(f<0)throw new DOMException("Wrong dynamic huffman codes.");if(f>=17)i=0;else if(p===0)throw new DOMException("Wrong dynamic huffman codes.");var m=f-16,v=a.DEF_HUFFMAN_DYNTREE_REPEAT_BITS[m],y=this.readBits(v);if(y<0)throw new DOMException("Wrong dynamic huffman codes.");if(y+=a.DEF_HUFFMAN_DYNTREE_REPEAT_MINIMUMS[m],p+y>o)throw new DOMException("Wrong dynamic huffman codes.");for(;y-- >0;)l[p++]=i;if(p===o)break}var w=new Uint8Array(r);return w.set(l.subarray(0,r),0),e=new Lr(w),w=l.slice(r,r+n),t=new Lr(w),{lengthTree:e,distanceTree:t}},a.prototype.readHuffman=function(){for(var e=this.DEF_MAX_WINDOW_SIZE-(this.mDataLength-this.mCurrentPosition),t=!1,i={};e>=this.DEF_HUFFMAN_REPEATE_MAX;){var r=void 0;for(r=this.mCurrentLengthTree.unpackSymbol(this);!(r&-256);){if(i[(this.mDataLength+1)%this.DEF_MAX_WINDOW_SIZE]=r,this.mBlockBuffer[this.mDataLength++%this.DEF_MAX_WINDOW_SIZE]=r,t=!0,--e<this.DEF_HUFFMAN_REPEATE_MAX)return!0;r=this.mCurrentLengthTree.unpackSymbol(this)}if(r<this.DEF_HUFFMAN_LENGTH_MINIMUMCODE){if(r<this.DEF_HUFFMAN_END_BLOCK)throw new DOMException("Illegal code.");var n=t?1:0;this.mbCanReadMoreData=this.decodeBlockHeader();var s=this.mbCanReadMoreData?1:0;return!!(n|s)}if(r>this.DEF_HUFFMAN_LENGTH_MAXIMUMCODE)throw new DOMException("Illegal repeat code length.");var o=a.DEF_HUFFMAN_REPEAT_LENGTH_BASE[r-this.DEF_HUFFMAN_LENGTH_MINIMUMCODE],l=a.DEF_HUFFMAN_REPEAT_LENGTH_EXTENSION[r-this.DEF_HUFFMAN_LENGTH_MINIMUMCODE];if(l>0){var h=this.readBits(l);if(h<0)throw new DOMException("Wrong data.");o+=h}if(r=this.mCurrentDistanceTree.unpackSymbol(this),r<0||r>a.DEF_HUFFMAN_REPEAT_DISTANCE_BASE.length)throw new DOMException("Wrong distance code.");var p=a.DEF_HUFFMAN_REPEAT_DISTANCE_BASE[r];if(l=a.DEF_HUFFMAN_REPEAT_DISTANCE_EXTENSION[r],l>0){var h=this.readBits(l);if(h<0)throw new DOMException("Wrong data.");p+=h}for(var c=0;c<o;c++)this.mBlockBuffer[this.mDataLength%this.DEF_MAX_WINDOW_SIZE]=this.mBlockBuffer[(this.mDataLength-p)%this.DEF_MAX_WINDOW_SIZE],this.mDataLength++,e--;t=!0}return t},a.prototype.read=function(e,t,i){if(e==null)throw new DOMException("buffer");if(t<0||t>e.length-1)throw new DOMException("offset","Offset does not belong to specified buffer.");if(i<0||i>e.length-t)throw new DOMException("length","Length is illegal.");for(var r=i;i>0;)if(this.mCurrentPosition<this.mDataLength){var n=this.mCurrentPosition%this.DEF_MAX_WINDOW_SIZE,s=Math.min(this.DEF_MAX_WINDOW_SIZE-n,this.mDataLength-this.mCurrentPosition);s=Math.min(s,i),Je.arrayCopy(this.mBlockBuffer,n,e,t,s),this.mCurrentPosition+=s,t+=s,i-=s}else{if(!this.mbCanReadMoreData)break;var o=this.mDataLength;if(this.mbReadingUncompressed)if(this.mUncompressedDataLength===0){if(this.mbCanReadMoreData=this.decodeBlockHeader(),!this.mbCanReadMoreData)break}else{var n=this.mDataLength%this.DEF_MAX_WINDOW_SIZE,l=Math.min(this.mUncompressedDataLength,this.DEF_MAX_WINDOW_SIZE-n),h=this.readPackedBytes(this.mBlockBuffer,n,l);if(l!==h)throw new DOMException("Not enough data in stream.");this.mUncompressedDataLength-=h,this.mDataLength+=h}else if(!this.readHuffman())break;if(o<this.mDataLength){var p=o%this.DEF_MAX_WINDOW_SIZE,c=this.mDataLength%this.DEF_MAX_WINDOW_SIZE;p<c?this.checksumUpdate(this.mBlockBuffer,p,c-p):(this.checksumUpdate(this.mBlockBuffer,p,this.DEF_MAX_WINDOW_SIZE-p),c>0&&this.checksumUpdate(this.mBlockBuffer,0,c))}}if(!this.mbCanReadMoreData&&!this.mbCheckSumRead&&!this.mbNoWrap){this.skipToBoundary();var d=this.readInt32();if(d!==this.mCheckSum)throw new DOMException("Checksum check failed.");this.mbCheckSumRead=!0}return r-i},a.prototype.readPackedBytes=function(e,t,i){if(e==null)throw new DOMException("buffer");if(t<0||t>e.length-1)throw new DOMException('offset", "Offset can not be less than zero or greater than buffer length - 1.');if(i<0)throw new DOMException('length", "Length can not be less than zero.');if(i>e.length-t)throw new DOMException('length", "Length is too large.');if(this.mBufferedBits&7)throw new DOMException("Reading of unalligned data is not supported.");if(i===0)return 0;for(var r=0;this.mBufferedBits>0&&i>0;)e[t++]=this.mBuffer,this.mBufferedBits-=8,this.mBuffer=Je.bitConverterInt32ToUint(this.mBuffer>>>8),i--,r++;return i>0&&(r+=this.mInputStream.read(e,t,i)),r},a.prototype.readInt32=function(){var e=this.readBits(8)<<24;return e|=this.readBits(8)<<16,e|=this.readBits(8)<<8,e|=this.readBits(8),e},a.prototype.checksumUpdate=function(e,t,i){ey.ChecksumUpdate(this.mCheckSum,e,t,i)},a.DEF_REVERSE_BITS=new Uint8Array([0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]),a.DEF_HUFFMAN_DYNTREE_REPEAT_MINIMUMS=[3,3,11],a.DEF_HUFFMAN_DYNTREE_REPEAT_BITS=[2,3,7],a.DEF_HUFFMAN_REPEAT_LENGTH_BASE=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],a.DEF_HUFFMAN_REPEAT_LENGTH_EXTENSION=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a.DEF_HUFFMAN_REPEAT_DISTANCE_BASE=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],a.DEF_HUFFMAN_REPEAT_DISTANCE_EXTENSION=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a}(),js=function(){function a(e){this.position=0,this.inputStream=new Uint8Array(e.buffer)}return Object.defineProperty(a.prototype,"length",{get:function(){return this.inputStream.buffer.byteLength},enumerable:!0,configurable:!0}),a.prototype.read=function(e,t,i){var r=new Uint8Array(this.inputStream.buffer,this.position+t),n=r.subarray(0,i);return e.set(n,0),this.position+=n.byteLength,n.byteLength},a.prototype.readByte=function(){return this.inputStream[this.position++]},a.prototype.write=function(e,t,i){Je.arrayCopy(e,0,this.inputStream,this.position+t,i),this.position+=i},a.prototype.toByteArray=function(){return new Uint8Array(this.inputStream.buffer)},a}(),iy=function(){function a(e){this.intl=new Ne}return a.prototype.getFormatFunction=function(e,t){return e.type?(t&&(e.isServerRendered=!0),this.intl.getDateFormat(e)):this.intl.getNumberFormat(e)},a.prototype.toView=function(e,t){var i=e;return!u(t)&&!u(e)&&(i=t(e)),i},a.prototype.displayText=function(e,t,i){return this.toView(e,this.getFormatFunction(t,i))},a}(),ry=function(){function a(e,t){if(this.csvStr="",t==null?this.separator=",":this.separator=t,this.formatter=new iy,this.isMicrosoftBrowser=!!navigator.msSaveBlob,e.isServerRendered!==null&&e.isServerRendered!==void 0&&(this.isServerRendered=e.isServerRendered),e.styles!==null&&e.styles!==void 0){this.globalStyles=new Map;for(var i=0;i<e.styles.length;i++)e.styles[i].name!==void 0&&e.styles[i].numberFormat!==void 0&&this.globalStyles.set(e.styles[i].name,e.styles[i].numberFormat)}e.worksheets!==null&&e.worksheets!==void 0&&this.parseWorksheet(e.worksheets[0])}return a.prototype.parseWorksheet=function(e){e.rows!==null&&e.rows!==void 0&&this.parseRows(e.rows)},a.prototype.parseRows=function(e){for(var t=1,i=0,r=e;i<r.length;i++){var n=r[i];if(n.index!==null&&n.index!==void 0){for(;t<n.index;)this.csvStr+=`\r
`,t++;this.parseRow(n)}else throw Error("Row index is missing.")}this.csvStr+=`\r
`},a.prototype.parseRow=function(e){if(e.cells!==null&&e.cells!==void 0)for(var t=1,i=0,r=e.cells;i<r.length;i++){var n=r[i];if(n.index!==null&&n.index!==void 0){for(;t<n.index;)this.csvStr+=this.separator,t++;this.parseCell(n)}else throw Error("Cell index is missing.")}},a.prototype.parseCell=function(e){var t=this.csvStr;if(e.value!==void 0)if(e.value instanceof Date)if(e.style!==void 0&&e.style.numberFormat!==void 0)try{t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",skeleton:e.style.numberFormat},this.isServerRendered))}catch{t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",format:e.style.numberFormat},this.isServerRendered))}else if(e.style!==void 0&&e.style.name!==void 0&&this.globalStyles.has(e.style.name))try{t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",skeleton:this.globalStyles.get(e.style.name)},this.isServerRendered))}catch{t+=this.parseCellValue(this.formatter.displayText(e.value,{type:"dateTime",format:this.globalStyles.get(e.style.name)},this.isServerRendered))}else t+=e.value;else typeof e.value=="boolean"?t+=e.value?"TRUE":"FALSE":typeof e.value=="number"?e.style!==void 0&&e.style.numberFormat!==void 0?t+=this.parseCellValue(this.formatter.displayText(e.value,{format:e.style.numberFormat,ignoreCurrency:!0},this.isServerRendered)):e.style!==void 0&&e.style.name!==void 0&&this.globalStyles.has(e.style.name)?t+=this.parseCellValue(this.formatter.displayText(e.value,{format:this.globalStyles.get(e.style.name),ignoreCurrency:!0},this.isServerRendered)):t+=e.value:t+=this.parseCellValue(e.value);this.csvStr=t},a.prototype.parseCellValue=function(e){for(var t="",i=e.length,r=0;r<i;r++)e[r]==='"'?t+=e[r].replace('"','""'):t+=e[r];return e=t,e.indexOf(this.separator)!==-1||e.indexOf(`
`)!==-1||e.indexOf('"')!==-1?e='"'+e+'"':e},a.prototype.save=function(e){if(this.buffer=new Blob(["\uFEFF"+this.csvStr],{type:"text/csv;charset=UTF-8"}),this.isMicrosoftBrowser)navigator.msSaveBlob(this.buffer,e);else{var t=window.URL.createObjectURL(this.buffer),i=document.createElementNS("http://www.w3.org/1999/xhtml","a");i.download=e,i.href=t;var r=document.createEvent("MouseEvent");r.initEvent("click",!0,!0),i.dispatchEvent(r),setTimeout(function(){window.URL.revokeObjectURL(t)})}},a.prototype.saveAsBlob=function(e){if(e!=null){var t=new hp,i="UTF-8";e.toUpperCase()=="ANSI"?(t.type="Ansi",i="ANSI"):e.toUpperCase()=="UNICODE"?(t.type="Unicode",i="UNICODE"):(t.type="Utf8",i="UTF-8");var r=t.getBytes(this.csvStr,0,this.csvStr.length);return new Blob([r],{type:"text/csv;charset="+i})}else return new Blob(["\uFEFF"+this.csvStr],{type:"text/csv;charset=UTF-8"})},a}(),Mh=function(){function a(){this.parts=[]}return a.prototype.append=function(e){this.parts.push(e),this.blob=void 0},a.prototype.getBlob=function(){return new Blob(this.parts,{type:"text/plain"})},a}(),ny=function(){function a(){}return a}(),Fh=function(){function a(e,t,i,r,n){if(this.sharedStringCount=0,this.unitsProportions=[96/75,96/300,96,96/25.4,96/2.54,1,96/72,96/72/12700],this.hyperlinkStyle={fontColor:"#0000FF",underline:!0},i!==void 0?this.culture=i:this.culture="en-US",r!==void 0?this.currency=r:this.currency="USD",this.intl=new Ne(this.culture),this.mSaveType=t,t==="xlsx"){if(this.mArchive=new Ct,this.sharedString=[],this.mFonts=[],this.mBorders=[],this.mStyles=[],this.printTitles=new Map,this.cellStyles=new Map,this.mNumFmt=new Map,this.mFills=new Map,this.mStyles.push(new $i),this.mFonts.push(new wh),this.cellStyles.set("Normal",new Ih),this.mCellXfs=[],this.mCellStyleXfs=[],this.drawingCount=0,this.imageCount=0,e.styles!==null&&e.styles!==void 0){this.globalStyles=new Map;for(var s=0;s<e.styles.length;s++)if(e.styles[s].name!==void 0){if(this.cellStyles.has(e.styles[s].name))throw Error("Style name "+e.styles[s].name+" is already existed");var o=new $i;o.isGlobalStyle=!0,this.parserCellStyle(e.styles[s],o,"none");var l=new Ih;l.name=o.name,l.xfId=o.index-1,this.cellStyles.set(l.name,l);var h={};e.styles[s].numberFormat!==void 0&&(h.format=e.styles[s].numberFormat),e.styles[s].type!==void 0?h.type=e.styles[s].type:h.type="datetime",h.format!==void 0&&this.globalStyles.set(e.styles[s].name,h)}}if(e.worksheets!==null&&e.worksheets!==void 0)this.parserWorksheets(e.worksheets);else throw Error("Worksheet is expected.");e.builtInProperties!==null&&e.builtInProperties!==void 0&&(this.builtInProperties=new sy,this.parserBuiltInProperties(e.builtInProperties,this.builtInProperties))}else this.csvHelper=new ry(e,n)}return a.prototype.parserBuiltInProperties=function(e,t){e.author!==null&&e.author!==void 0&&(t.author=e.author),e.comments!==null&&e.comments!==void 0&&(t.comments=e.comments),e.category!==null&&e.category!==void 0&&(t.category=e.category),e.company!==null&&e.company!==void 0&&(t.company=e.company),e.manager!==null&&e.manager!==void 0&&(t.manager=e.manager),e.subject!==null&&e.subject!==void 0&&(t.subject=e.subject),e.title!==null&&e.title!==void 0&&(t.title=e.title),e.createdDate!==null&&e.createdDate!==void 0&&(t.createdDate=e.createdDate),e.modifiedDate!==null&&e.modifiedDate!==void 0&&(t.modifiedDate=e.modifiedDate),e.tags!==null&&e.tags!==void 0&&(t.tags=e.tags),e.status!==null&&e.status!==void 0&&(t.status=e.status)},a.prototype.parserWorksheets=function(e){this.worksheets=new qv;for(var t=e.length,i=0;i<t;i++){var r=e[i],n=new jv;this.mergeCells=new _v,this.mergedCellsStyle=new Map,this.mHyperLinks=[],r.name!==null&&r.name!==void 0?n.name=r.name:n.name="Sheet"+(i+1).toString(),r.enableRtl!==null&&r.enableRtl!==void 0&&(n.enableRtl=r.enableRtl),n.index=i+1,r.columns!==null&&r.columns!==void 0&&this.parserColumns(r.columns,n),r.rows!==null&&r.rows!==void 0&&this.parserRows(r.rows,n),r.showGridLines!==null&&r.showGridLines!==void 0&&(n.showGridLines=r.showGridLines),r.freeze!==null&&r.freeze!==void 0&&this.parserFreezePanes(r.freeze,n),r.printTitle!==null&&r.printTitle!==void 0&&this.parserPrintTitle(r.printTitle,n),r.pageSetup!==void 0&&r.pageSetup.isSummaryRowBelow!==void 0&&(n.isSummaryRowBelow=r.pageSetup.isSummaryRowBelow),r.images!==void 0&&this.parserImages(r.images,n),r.autoFilters!==null&&r.autoFilters!==void 0&&this.parseFilters(r.autoFilters,n),n.index=i+1,n.mergeCells=this.mergeCells,n.hyperLinks=this.mHyperLinks,this.worksheets.push(n)}},a.prototype.mergeOptions=function(e,t){var i={};return this.applyProperties(e,i),this.applyProperties(t,i),i},a.prototype.applyProperties=function(e,t){for(var i=Object.keys(e),r=0;r<i.length;r++)i[r]!=="name"&&(t[i[r]]=e[i[r]])},a.prototype.getCellName=function(e,t){return this.getColumnName(t)+e.toString()},a.prototype.getColumnName=function(e){e--;var t="";do{var i=e%26;e=e/26-1,t=String.fromCharCode(65+i)+t}while(e>=0);return t},a.prototype.parserPrintTitle=function(e,t){var i="",r;if(e.fromRow!==null&&e.fromRow!==void 0){var n=e.fromRow,s=void 0;e.toRow!==null&&e.toRow!==void 0?s=e.toRow:s=e.fromRow,r="$"+n+":$"+s}var o;if(e.fromColumn!==null&&e.fromColumn!==void 0){var l=e.fromColumn,h=void 0;e.toColumn!==null&&e.toColumn!==void 0?h=e.toColumn:h=e.fromColumn,o="$"+this.getColumnName(l)+":$"+this.getColumnName(h)}r!==void 0&&(i+=t.name+"!"+r),o!==void 0&&r!==void 0?i+=","+(t.name+"!"+o):o!==void 0&&(i+=t.name+"!"+o),i!==""&&this.printTitles.set(t.index-1,i)},a.prototype.parserFreezePanes=function(e,t){t.freezePanes=new Gv,e.row!==null&&e.row!==void 0?t.freezePanes.row=e.row:t.freezePanes.row=0,e.column!==null&&e.column!==void 0?t.freezePanes.column=e.column:t.freezePanes.column=0,t.freezePanes.leftCell=this.getCellName(t.freezePanes.row+1,t.freezePanes.column+1)},a.prototype.parserColumns=function(e,t){var i=e.length;t.columns=[];for(var r=0;r<i;r++){var n=new Nv;if(e[r].index!==null&&e[r].index!==void 0)n.index=e[r].index;else throw Error("Column index is missing.");e[r].width!==null&&e[r].width!==void 0&&(n.width=e[r].width),t.columns.push(n)}},a.prototype.parserRows=function(e,t){var i=e.length;t.rows=new Hv;for(var r=0,n=0;n<i;n++){var s=this.parserRow(e[n],r);r=s.index,t.rows.add(s)}this.insertMergedCellsStyle(t)},a.prototype.insertMergedCellsStyle=function(e){var t=this;this.mergeCells.length>0&&this.mergedCellsStyle.forEach(function(i,r){var n=e.rows.filter(function(c){return c.index===i.y})[0];if(u(n)){var h=e.rows.filter(function(d){return d.index<=i.y}),p=new kh;p.index=i.y,p.cells=new Dh,p.cells.add(t.createCell(i,r));var l=0;h.length>0&&(l=e.rows.indexOf(h[h.length-1])+1),e.rows.splice(l,0,p)}else{var s=n.cells.filter(function(c){return c.index===i.x})[0];if(!u(s))s.styleIndex=i.styleIndex;else{var o=n.cells.filter(function(c){return c.index<=i.x}),l=0;o.length>0&&(l=n.cells.indexOf(o[o.length-1])+1),n.cells.splice(l,0,t.createCell(i,r))}}})},a.prototype.createCell=function(e,t){var i=new Eh;return i.refName=t,i.index=e.x,i.cellStyle=new $i,i.styleIndex=e.styleIndex,i},a.prototype.parserRow=function(e,t){var i=new kh;if(e.height!==null&&e.height!==void 0&&(i.height=e.height),e.index!==null&&e.index!==void 0)i.index=e.index;else throw Error("Row index is missing.");return e.grouping!==null&&e.grouping!==void 0&&this.parseGrouping(e.grouping,i),this.parseCells(e.cells,i),i},a.prototype.parseGrouping=function(e,t){t.grouping=new Uv,e.outlineLevel!==void 0&&(t.grouping.outlineLevel=e.outlineLevel),e.isCollapsed!==void 0&&(t.grouping.isCollapsed=e.isCollapsed),e.isHidden!==void 0&&(t.grouping.isHidden=e.isHidden)},a.prototype.parseCells=function(e,t){t.cells=new Dh;for(var i=e!==void 0?e.length:0,r=1,n=1,s=0;s<i;s++){var o=e[s],l=new Eh;if(o.index!==null&&o.index!==void 0)l.index=o.index;else throw Error("Cell index is missing.");if(l.index<r?r=l.index:l.index>n&&(n=l.index),l.refName=this.getCellName(t.index,l.index),o.rowSpan!==null&&o.rowSpan!==void 0?l.rowSpan=o.rowSpan-1:l.rowSpan=0,o.colSpan!==null&&o.colSpan!==void 0?l.colSpan=o.colSpan-1:l.colSpan=0,o.hyperlink!==null&&o.hyperlink!==void 0){var h=new Rh;o.hyperlink.target!==void 0&&(h.target=o.hyperlink.target,o.hyperlink.displayText!==void 0?l.value=o.hyperlink.displayText:l.value=o.hyperlink.target,l.type=this.getCellValueType(l.value),h.ref=l.refName,h.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(h),l.cellStyle=new $i,this.parserCellStyle(o.style!==void 0?this.mergeOptions(o.style,this.hyperlinkStyle):this.hyperlinkStyle,l.cellStyle,"string"),l.styleIndex=l.cellStyle.index)}o.formula!==null&&o.formula!==void 0&&(l.formula=o.formula,l.type="formula"),o.value!==null&&o.value!==void 0&&(l.formula!==void 0?l.value=0:(l.value=o.value,l.type=this.getCellValueType(l.value))),o.style!==null&&o.style!==void 0&&l.styleIndex===void 0?(l.cellStyle=new $i,l.value instanceof Date?this.parserCellStyle(o.style,l.cellStyle,l.type,14):this.parserCellStyle(o.style,l.cellStyle,l.type),l.styleIndex=l.cellStyle.index):l.value instanceof Date&&(l.cellStyle=new $i,this.parserCellStyle({},l.cellStyle,l.type,14),l.styleIndex=l.cellStyle.index),this.parseCellType(l),this.mergeCells=this.processMergeCells(l,t.index,this.mergeCells),t.cells.add(l),l.index+1}t.spans=r+":"+n},a.prototype.GetColors=function(){var e;return e=new Map,e.set("WHITE","FFFFFFFF"),e.set("SILVER","FFC0C0C0"),e.set("GRAY","FF808080"),e.set("BLACK","FF000000"),e.set("RED","FFFF0000"),e.set("MAROON","FF800000"),e.set("YELLOW","FFFFFF00"),e.set("OLIVE","FF808000"),e.set("LIME","FF00FF00"),e.set("GREEN","FF008000"),e.set("AQUA","FF00FFFF"),e.set("TEAL","FF008080"),e.set("BLUE","FF0000FF"),e.set("NAVY","FF000080"),e.set("FUCHSIA","FFFF00FF"),e.set("PURPLE","FF800080"),e},a.prototype.processColor=function(e){return e.indexOf("#")===0?e.replace("#","FF"):(e=e.toUpperCase(),this.rgbColors=this.GetColors(),this.rgbColors.has(e)?e=this.rgbColors.get(e):e="FF000000",e)},a.prototype.processCellValue=function(e,t){var i=e;if(e.indexOf("<font")!==-1||e.indexOf("<a")!==-1||e.indexOf("<b>")!==-1||e.indexOf("<i>")!==-1||e.indexOf("<u>")!==-1){var r="",n=e.indexOf("<",0),s=e.indexOf(">",n+1);if(n>=0&&s>=0){for(n!==0&&(r+='<r><t xml:space="preserve">'+this.processString(e.substring(0,n))+"</t></r>");n>=0&&s>=0;)if(s=e.indexOf(">",n+1),s>=0){var o=e.substring(n+1,s);n=e.indexOf("<",s+1),n<0&&(n=i.length);var l=i.substring(s+1,n);if(l.length!==0){var h=o.split(" ");if(h.length>0&&(r+="<r><rPr>"),h.length>1)for(var p=0,c=h;p<c.length;p++){var d=c[p],f=d.trim().substring(0,5);switch(f){case"size=":r+='<sz val="'+d.substring(6,d.length-1)+'"/>';break;case"face=":r+='<rFont val="'+d.substring(6,d.length-1)+'"/>';break;case"color":r+='<color rgb="'+this.processColor(d.substring(7,d.length-1))+'"/>';break;case"href=":var g=new Rh;g.target=d.substring(6,d.length-1).trim(),g.ref=t.refName,g.rId=this.mHyperLinks.length+1,this.mHyperLinks.push(g),r+='<color rgb="FF0000FF"/><u/><b/>';break}}else if(h.length===1){var m=h[0].trim();switch(m){case"b":r+="<b/>";break;case"i":r+="<i/>";break;case"u":r+="<u/>";break}}r+='</rPr><t xml:space="preserve">'+this.processString(l)+"</t></r>"}}return r===""?i:r}else return i}else return i},a.prototype.applyGlobalStyle=function(e,t){this.cellStyles.has(e.name)&&(t.index=this.mStyles.filter(function(i){return i.name===e.name})[0].index,t.name=e.name)},a.prototype.parserCellStyle=function(e,t,i,r){if(e.name!==null&&e.name!==void 0)if(t.isGlobalStyle)t.name=e.name;else{this.applyGlobalStyle(e,t);return}e.backColor!==null&&e.backColor!==void 0&&(t.backColor=e.backColor),t.borders=new op,e.borders!==null&&e.borders!==void 0&&this.parserBorder(e.borders,t.borders.all),e.leftBorder!==null&&e.leftBorder!==void 0&&this.parserBorder(e.leftBorder,t.borders.left),e.rightBorder!==null&&e.rightBorder!==void 0&&this.parserBorder(e.rightBorder,t.borders.right),e.topBorder!==null&&e.topBorder!==void 0&&this.parserBorder(e.topBorder,t.borders.top),e.bottomBorder!==null&&e.bottomBorder!==void 0&&this.parserBorder(e.bottomBorder,t.borders.bottom),e.fontName!==null&&e.fontName!==void 0&&(t.fontName=e.fontName),e.fontSize!==null&&e.fontSize!==void 0&&(t.fontSize=e.fontSize),e.fontColor!==null&&e.fontColor!==void 0&&(t.fontColor=e.fontColor),e.italic!==null&&e.italic!==void 0&&(t.italic=e.italic),e.bold!==null&&e.bold!==void 0&&(t.bold=e.bold),e.hAlign!==null&&e.hAlign!==void 0&&(t.hAlign=e.hAlign.toLowerCase()),e.indent!==null&&e.indent!==void 0&&(t.indent=e.indent,t.hAlign==="left"||t.hAlign==="right"||(t.hAlign="left")),e.rotation!==null&&e.rotation!==void 0&&(t.rotation=e.rotation),e.vAlign!==null&&e.vAlign!==void 0&&(t.vAlign=e.vAlign.toLowerCase()),e.underline!==null&&e.underline!==void 0&&(t.underline=e.underline),e.strikeThrough!==null&&e.strikeThrough!==void 0&&(t.strikeThrough=e.strikeThrough),e.wrapText!==null&&e.wrapText!==void 0&&(t.wrapText=e.wrapText),e.numberFormat!==null&&e.numberFormat!==void 0?e.type!==null&&e.type!==void 0?t.numberFormat=this.getNumberFormat(e.numberFormat,e.type):t.numberFormat=this.getNumberFormat(e.numberFormat,i):(r!==void 0&&(t.numFmtId=14),t.numberFormat="GENERAL"),t.index=this.processCellStyle(t)},a.prototype.switchNumberFormat=function(e,t){var i=this.getNumberFormat(e,t);if(i!==e){var r=this.mNumFmt.get(e);if(r!==void 0&&(r.formatCode=i,this.mNumFmt.has(i))){for(var n=0,s=this.mCellStyleXfs;n<s.length;n++){var o=s[n];o.numFmtId===r.numFmtId&&(o.numFmtId=this.mNumFmt.get(i).numFmtId)}for(var l=0,h=this.mCellXfs;l<h.length;l++){var p=h[l];p.numFmtId===r.numFmtId&&(p.numFmtId=this.mNumFmt.get(i).numFmtId)}}}},a.prototype.changeNumberFormats=function(e){if(typeof e=="string"){var t=new RegExp(this.currency,"g");e=e.replace(t,"[$"+this.currency+"]")}else if(typeof e=="object")for(var i=0;i<e.length;i++)e[i]=e[i].replace(this.currency,"[$"+this.currency+"]");return e},a.prototype.getNumberFormat=function(e,t){var i;switch(t){case"number":try{i=this.intl.getNumberPattern({format:e,currency:this.currency,useGrouping:!0},!0),this.currency.length>1&&(i=this.changeNumberFormats(i))}catch{i=e}break;case"datetime":try{i=this.intl.getDatePattern({skeleton:e,type:"dateTime"},!0)}catch{try{i=this.intl.getDatePattern({format:e,type:"dateTime"},!0)}catch{i=e}}break;case"date":try{i=this.intl.getDatePattern({skeleton:e,type:"date"},!0)}catch{try{i=this.intl.getDatePattern({format:e,type:"date"},!0)}catch{i=e}}break;case"time":try{i=this.intl.getDatePattern({skeleton:e,type:"time"},!0)}catch{try{i=this.intl.getDatePattern({format:e,type:"time"},!0)}catch{i=e}}break;default:i=e;break}return i},a.prototype.parserBorder=function(e,t){e.color!==null&&e.color!==void 0?t.color=e.color:t.color="#000000",e.lineStyle!==null&&e.lineStyle!==void 0?t.lineStyle=e.lineStyle:t.lineStyle="thin"},a.prototype.processCellStyle=function(e){if(e.isGlobalStyle)return this.processNumFormatId(e),this.mStyles.push(e),this.mStyles.length;var t=this.compareStyle(e);return t.result?t.index:(this.processNumFormatId(e),this.mStyles.push(e),this.mStyles.length)},a.prototype.processNumFormatId=function(e){if(e.numberFormat!=="GENERAL"&&!this.mNumFmt.has(e.numberFormat)){var t=this.mNumFmt.size+164;this.mNumFmt.set(e.numberFormat,new xh(t,e.numberFormat))}},a.prototype.isNewFont=function(e){for(var t=!1,i=0,r=0,n=this.mFonts;r<n.length;r++){var s=n[r];i++;var o=void 0;if(e.fontColor!==void 0&&(o="FF"+e.fontColor.replace("#","")),t=s.color===o&&s.b===e.bold&&s.i===e.italic&&s.u===e.underline&&s.strike===e.strikeThrough&&s.name===e.fontName&&s.sz===e.fontSize,t)break}return i=i-1,{index:i,result:t}},a.prototype.isNewBorder=function(e){var t=new $i;return this.isAllBorder(e.borders)?t.borders.all.color===e.borders.all.color&&t.borders.all.lineStyle===e.borders.all.lineStyle:t.borders.left.color===e.borders.left.color&&t.borders.left.lineStyle===e.borders.left.lineStyle&&t.borders.right.color===e.borders.right.color&&t.borders.right.lineStyle===e.borders.right.lineStyle&&t.borders.top.color===e.borders.top.color&&t.borders.top.lineStyle===e.borders.top.lineStyle&&t.borders.bottom.color===e.borders.bottom.color&&t.borders.bottom.lineStyle===e.borders.bottom.lineStyle},a.prototype.isAllBorder=function(e){var t=new $i;return t.borders.all.color!==e.all.color&&t.borders.all.lineStyle!==e.all.lineStyle},a.prototype.compareStyle=function(e){for(var t=!0,i=0,r=0,n=this.mStyles;r<n.length;r++){var s=n[r];if(t=s.isGlobalStyle?!1:s.backColor===e.backColor&&s.bold===e.bold&&s.numFmtId===e.numFmtId&&s.numberFormat===e.numberFormat&&s.type===e.type&&s.fontColor===e.fontColor&&s.fontName===e.fontName&&s.fontSize===e.fontSize&&s.hAlign===e.hAlign&&s.italic===e.italic&&s.underline===e.underline&&s.strikeThrough===e.strikeThrough&&s.vAlign===e.vAlign&&s.indent===e.indent&&s.rotation===e.rotation&&s.wrapText===e.wrapText&&s.borders.all.color===e.borders.all.color&&s.borders.all.lineStyle===e.borders.all.lineStyle&&s.borders.left.color===e.borders.left.color&&s.borders.left.lineStyle===e.borders.left.lineStyle&&s.borders.right.color===e.borders.right.color&&s.borders.right.lineStyle===e.borders.right.lineStyle&&s.borders.top.color===e.borders.top.color&&s.borders.top.lineStyle===e.borders.top.lineStyle&&s.borders.bottom.color===e.borders.bottom.color&&s.borders.bottom.lineStyle===e.borders.bottom.lineStyle,t){i=s.index;break}}return{index:i,result:t}},a.prototype.contains=function(e,t){var i=e.indexOf(t);return i>-1&&i<e.length},a.prototype.getCellValueType=function(e){return e instanceof Date?"datetime":typeof e=="boolean"?"boolean":typeof e=="number"?"number":"string"},a.prototype.parseCellType=function(e){var t=e.type,i,r=e.value;switch(t){case"datetime":if(r=this.toOADate(r),e.cellStyle!==void 0&&e.cellStyle.name!==void 0&&this.globalStyles.has(e.cellStyle.name)){var n=this.globalStyles.get(e.cellStyle.name);this.switchNumberFormat(n.format,n.type)}i="n";break;case"boolean":r=r?1:0,i="b";break;case"number":i="n",e.cellStyle!==void 0&&e.cellStyle.name!==void 0&&this.globalStyles.has(e.cellStyle.name)&&this.switchNumberFormat(this.globalStyles.get(e.cellStyle.name).format,"number");break;case"string":this.sharedStringCount++,i="s";var s=this.processCellValue(r,e);this.contains(this.sharedString,s)||this.sharedString.push(s),r=this.sharedString.indexOf(s);break}e.saveType=i,e.value=r},a.prototype.parserImages=function(e,t){var i=e.length;t.images=[];for(var r=0;r<i;r++){var n=this.parserImage(e[r]);t.images.push(n)}},a.prototype.parseFilters=function(e,t){if(t.autoFilters=new ny,e.row!==null&&e.row!==void 0)t.autoFilters.row=e.row;else throw new Error("Argument Null Exception: row null or empty");if(e.lastRow!==null&&e.lastRow!==void 0)t.autoFilters.lastRow=e.lastRow;else throw new Error("Argument Null Exception: lastRow cannot be null or empty");if(e.column!==null&&e.column!==void 0)t.autoFilters.column=e.column;else throw new Error("Argument Null Exception: column cannot be null or empty");if(e.lastColumn!==null&&e.row!==void 0)t.autoFilters.lastColumn=e.lastColumn;else throw new Error("Argument Null Exception: lastColumn cannot be null or empty")},a.prototype.parserImage=function(e){var t=new Kv;return e.image!==null&&e.image!==void 0&&(t.image=e.image),e.row!==null&&e.row!==void 0&&(t.row=e.row),e.column!==null&&e.column!==void 0&&(t.column=e.column),e.lastRow!==null&&e.lastRow!==void 0&&(t.lastRow=e.lastRow),e.lastColumn!==null&&e.lastColumn!==void 0&&(t.lastColumn=e.lastColumn),e.width!==null&&e.width!==void 0&&(t.width=e.width),e.height!==null&&e.height!==void 0&&(t.height=e.height),e.horizontalFlip!==null&&e.horizontalFlip!==void 0&&(t.horizontalFlip=e.horizontalFlip),e.verticalFlip!==null&&e.verticalFlip!==void 0&&(t.verticalFlip=e.verticalFlip),e.rotation!==null&&e.rotation!==void 0&&(t.rotation=e.rotation),t},a.prototype.saveAsBlob=function(e,t){var i=this;switch(e){case"text/csv":return new Promise(function(r,n){var s={};s.blobData=i.csvHelper.saveAsBlob(t),r(s)});default:return new Promise(function(r,n){i.saveInternal(),i.mArchive.saveAsBlob().then(function(s){var o={};o.blobData=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r(o)})})}},a.prototype.save=function(e,t){var i=this;if(e==null||e==="")throw new Error("Argument Null Exception: fileName cannot be null or empty");var r=e.match(".xlsx$"),n=e.match(".csv$");if(r!==null&&r[0]==="."+this.mSaveType)this.saveInternal(),this.mArchive.save(e).then(function(){i.mArchive.destroy()});else if(n!==null&&n[0]==="."+this.mSaveType)this.csvHelper.save(e);else throw Error("Save type and file extension is different.")},a.prototype.saveInternal=function(){this.saveWorkbook(),this.saveWorksheets(),this.saveSharedString(),this.saveStyles(),this.saveApp(this.builtInProperties),this.saveCore(this.builtInProperties),this.saveContentType(),this.saveTopLevelRelation(),this.saveWorkbookRelation()},a.prototype.saveWorkbook=function(){for(var e='<?xml version="1.0" encoding="utf-8"?><workbook xmlns:r = "http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns= "http://schemas.openxmlformats.org/spreadsheetml/2006/main"><workbookPr codeName="ThisWorkbook" defaultThemeVersion= "153222"/><bookViews><workbookView activeTab="0"/></bookViews>',t="<sheets>",i=this.worksheets.length,r=0;r<i;r++){var n=this.worksheets[r].name;n=n.replace("&","&amp;"),n=n.replace("<","&lt;"),n=n.replace(">","&gt;"),n=n.replace('"',"&quot;"),t+='<sheet name="'+n+'" sheetId="'+(r+1).toString()+'" r:id ="rId'+(r+1).toString()+'" />'}if(t+="</sheets>",e+=t,this.printTitles.size>0){var s="<definedNames>";this.printTitles.forEach(function(o,l){s+='<definedName name="_xlnm.Print_Titles" localSheetId="'+l+'">'+o+"</definedName>"}),s+="</definedNames>",e+=s}this.addToArchive(e+"</workbook>","xl/workbook.xml")},a.prototype.saveWorksheets=function(){for(var e=this.worksheets.length,t=0;t<e;t++)this.saveWorksheet(this.worksheets[t],t)},a.prototype.saveWorksheet=function(e,t){var i=new Mh,r='<?xml version="1.0" encoding="utf-8" standalone="yes"?><worksheet xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';if(e.isSummaryRowBelow?r+="<sheetPr />":r+='<sheetPr><outlinePr summaryBelow="0" ></outlinePr></sheetPr>',r+=this.saveSheetView(e),e.columns!==void 0){for(var n="<cols>",s=0,o=e.columns;s<o.length;s++){var l=o[s];l.width!==void 0?n+='<col min="'+l.index+'" max="'+l.index+'" width="'+this.pixelsToColumnWidth(l.width)+'" customWidth="1" />':n+='<col min="'+l.index+'" max="'+l.index+'" width="8.43" customWidth="1" />'}r+=n+"</cols>"}if(r+="<sheetData>",i.append(r),r="",e.rows!==void 0)for(var h=0,p=e.rows;h<p.length;h++){var c=p[h],d='<row r="'+c.index+'" ';u(c.spans)||(d+='spans="'+c.spans+'" '),c.height!==void 0&&(d+='ht="'+this.pixelsToRowHeight(c.height)+'" customHeight="1" '),c.grouping!==void 0&&(c.grouping.isHidden&&(d+='hidden="1" '),c.grouping.outlineLevel!==void 0&&(d+='outlineLevel="'+c.grouping.outlineLevel+'" '),c.grouping.isCollapsed&&(d+='collapsed="1" ')),d+=">";for(var f=0,g=c.cells;f<g.length;f++){var m=g[f];m!==void 0&&(m.value!==void 0||m.cellStyle!==void 0)&&(d+='<c r="'+m.refName+'" ',m.saveType!==void 0&&(d+='t="'+m.saveType+'" '),m.styleIndex!==void 0&&(d+='s="'+m.styleIndex+'" '),d+=" >",m.formula!==void 0&&(d+="<f>"+m.formula+"</f>"),m.value!==void 0?d+="<v>"+m.value+"</v></c>":d+="</c>")}d+="</row>",i.append(d)}if(r+="</sheetData>",e.autoFilters!==null&&e.autoFilters!==void 0&&(r+='<autoFilter ref="'+this.getCellName(e.autoFilters.row,e.autoFilters.column)+":"+this.getCellName(e.autoFilters.lastRow,e.autoFilters.lastColumn)+'"/>'),e.mergeCells.length>0){r+='<mergeCells count="'+e.mergeCells.length+'">';for(var v=0,y=e.mergeCells;v<y.length;v++){var w=y[v];r+='<mergeCell ref="'+w.ref+'" />'}r+="</mergeCells>"}if(e.hyperLinks.length>0){r+="<hyperlinks>";for(var b=0,I=e.hyperLinks;b<I.length;b++){var k=I[b];r+='<hyperlink ref="'+k.ref+'" r:id="rId'+k.rId+'" />'}r+="</hyperlinks>"}r+='<pageMargins left="0.75" right="0.75" top="1" bottom="1" header="0.5" footer="0.5" /><headerFooter scaleWithDoc="1" alignWithMargins="0" differentFirst="0" differentOddEven="0" />',e.images!=null&&e.images.length>0&&(this.drawingCount++,this.saveDrawings(e,e.index),r+='<drawing r:id="rId'+(e.hyperLinks.length+1)+'"/>'),this.addToArchive(this.saveSheetRelations(e),"xl/worksheets/_rels/sheet"+e.index+".xml.rels"),i.append(r+"</worksheet>"),this.addToArchive(i.getBlob(),"xl/worksheets/sheet"+(t+1)+".xml")},a.prototype.saveDrawings=function(e,t){var i=new Mh,r='<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">';if(e.images!==void 0){for(var n=0,s=0,o=e.images;s<o.length;s++){var l=o[s];l.height!==void 0&&l.width!==void 0?(this.updatelastRowOffset(e,l),this.updatelastColumnOffSet(e,l),l.lastRow-=1,l.lastColumn-=1):l.lastRow!==void 0&&l.lastColumn!==void 0&&(l.lastRowOffset=0,l.lastColOffset=0),n++,r+='<xdr:twoCellAnchor editAs="oneCell">',r+="<xdr:from><xdr:col>",r+=l.column-1,r+="</xdr:col><xdr:colOff>",r+=0,r+="</xdr:colOff><xdr:row>",r+=l.row-1,r+="</xdr:row><xdr:rowOff>",r+=0,r+="</xdr:rowOff></xdr:from>",r+="<xdr:to><xdr:col>",r+=l.lastColumn,r+="</xdr:col><xdr:colOff>",r+=l.lastColOffset,r+="</xdr:colOff><xdr:row>",r+=l.lastRow,r+="</xdr:row><xdr:rowOff>",r+=l.lastRowOffset,r+="</xdr:rowOff></xdr:to>",r+="<xdr:pic>",r+="<xdr:nvPicPr>",r+='<xdr:cNvPr id="'+n+'" name="Picture '+n+'"> </xdr:cNvPr>',r+='<xdr:cNvPicPr><a:picLocks noChangeAspect="1"/></xdr:cNvPicPr> </xdr:nvPicPr>',r+="<xdr:blipFill>",r+='<a:blip xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" r:embed="rId'+n+'" cstate="print">',r+="</a:blip><a:stretch><a:fillRect /></a:stretch></xdr:blipFill>",r+="<xdr:spPr>",r+="<a:xfrm",l.rotation!=null&&l.rotation<=3600&&l.rotation>=-3600&&(r+=' rot="'+l.rotation*6e4+'"'),l.verticalFlip!=null&&l.verticalFlip!=!1&&(r+=' flipV="1"'),l.horizontalFlip!=null&&l.horizontalFlip!=!1&&(r+=' flipH="1"'),r+="/>",r+='<a:prstGeom prst="rect"><a:avLst /></a:prstGeom></xdr:spPr>',r+="</xdr:pic><xdr:clientData /></xdr:twoCellAnchor>";var h=this.convertBase64toImage(l.image);this.imageCount+=1,this.addToArchive(h,"xl/media/image"+this.imageCount+".png")}i.append(r),i.append("</xdr:wsDr>"),this.saveDrawingRelations(e),this.addToArchive(i.getBlob(),"xl/drawings/drawing"+this.drawingCount+".xml")}},a.prototype.updatelastRowOffset=function(e,t){for(var i=t.height,r=t.row,n=0;i>=0;){var s=0;e.rows!==void 0&&e.rows[r-1]!==void 0?s=this.convertToPixels(e.rows[r-1].height===void 0?15:e.rows[r-1].height):s=this.convertToPixels(15);var o=s-n*s/256;if(o>i){t.lastRow=r,t.lastRowOffset=n+i*256/s;var l=0;e.rows!==void 0&&e.rows[r-1]!==void 0?l=this.convertToPixels(e.rows[r-1].height===void 0?15:e.rows[r-1].height):l=this.convertToPixels(15),t.lastRowOffset=l*t.lastRowOffset/256,t.lastRowOffset=Math.round(t.lastRowOffset/this.unitsProportions[7]);break}else i-=o,r++,n=0}},a.prototype.updatelastColumnOffSet=function(e,t){for(var i=t.width,r=t.column,n=0;i>=0;){var s=0;e.columns!==void 0&&e.columns[r-1]!==void 0?s=this.ColumnWidthToPixels(e.columns[r-1].width===void 0?8.43:e.columns[r-1].width):s=this.ColumnWidthToPixels(8.43);var o=s-n*s/1024;if(o>i){t.lastColumn=r,t.lastColOffset=n+i*1024/s;var l=0;e.columns!==void 0&&e.columns[r-1]!==void 0?l=this.ColumnWidthToPixels(e.columns[r-1].width===void 0?8.43:e.columns[r-1].width):l=this.ColumnWidthToPixels(8.43),t.lastColOffset=l*t.lastColOffset/1024,t.lastColOffset=Math.round(t.lastColOffset/this.unitsProportions[7]);break}else i-=o,r++,n=0}},a.prototype.convertToPixels=function(e){return e*this.unitsProportions[6]},a.prototype.convertBase64toImage=function(e){for(var t=window.atob(e),i=new ArrayBuffer(t.length),r=new Uint8Array(i),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);var s=new Blob([r],{type:"image/png"});return s},a.prototype.saveDrawingRelations=function(e){for(var t='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',i=e.images.length,r=this.imageCount-e.images.length,n=1;n<=i;n++)r++,t+='<Relationship Id="rId'+n+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" Target="../media/image'+r+'.png" />';this.addToArchive(t+"</Relationships>","xl/drawings/_rels/drawing"+this.drawingCount+".xml.rels")},a.prototype.pixelsToColumnWidth=function(e){var t=7,i=e>t+5?this.trunc((e-5)/t*100+.5)/100:e/(t+5);return i>1?(i*t+5)/t*256/256:i*(t+5)/t*256/256},a.prototype.ColumnWidthToPixels=function(e){var t=7,i=e>1?(e*t+5)/t*256/256:e*(t+5)/t*256/256;return this.trunc((256*i+this.trunc(128/t))/256*t)},a.prototype.trunc=function(e){var t=e-e%1;return t===0&&(e<0||e===0&&1/e!==1/0)?-0:t},a.prototype.pixelsToRowHeight=function(e){return e*this.unitsProportions[5]/this.unitsProportions[6]},a.prototype.saveSheetRelations=function(e){for(var t='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',i=0,r=e.hyperLinks;i<r.length;i++){var n=r[i];t+='<Relationship Id="rId'+n.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="'+this.processString(n.target)+'" TargetMode="External" />'}return e.images!=null&&e.images.length>0&&(t+='<Relationship Id="rId'+(e.hyperLinks.length+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing" Target="../drawings/drawing'+this.drawingCount+'.xml" />'),t+="</Relationships>",t},a.prototype.saveSheetView=function(e){var t='<sheetViews><sheetView workbookViewId="0" ';return e.enableRtl===!0&&(t+='rightToLeft="1"'),e.showGridLines===!1?t+='showGridLines="0" >':t+=">",e.freezePanes!==void 0&&(t+='<pane state="frozen" topLeftCell="'+e.freezePanes.leftCell+'" ',e.freezePanes.row!==0&&(t+='ySplit="'+e.freezePanes.row+'" '),e.freezePanes.column!==0&&(t+='xSplit="'+e.freezePanes.column+'" '),t+="/>"),t+="</sheetView></sheetViews > ",t},a.prototype.saveSharedString=function(){var e=this.sharedString.length;if(e>0){for(var t='<?xml version="1.0" encoding="utf-8"?><sst uniqueCount="'+e+'" count="'+this.sharedStringCount+'" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">',i="",r=0;r<e;r++)this.sharedString[r].indexOf("<r>")!==0?(i+="<si><t>",i+=this.processString(this.sharedString[r]),i+="</t></si>"):(i+="<si>",i+=this.sharedString[r],i+="</si>");i+="</sst>",this.addToArchive(t+i,"xl/sharedStrings.xml")}},a.prototype.processString=function(e){if(typeof e=="string")e.indexOf("&")!==-1&&(e=e.replace(/&/g,"&amp;")),e.indexOf("<")!==-1&&(e=e.replace(/</g,"&lt;")),e.indexOf(">")!==-1&&(e=e.replace(/>/g,"&gt;")),e.indexOf("\v")!==-1&&(e=e.replace(/\v/g,"_x000B_"));else if(typeof e=="object")for(var t=0;t<e.length;t++)e[t].indexOf("&")!==-1&&(e[t]=e[t].replace(/&/g,"&amp;")),e[t].indexOf("<")!==-1&&(e[t]=e[t].replace(/</g,"&lt;")),e[t].indexOf(">")!==-1&&(e[t]=e[t].replace(/>/g,"&gt;")),e[t].indexOf("\v")!==-1&&(e[t]=e[t].replace(/\v/g,"_x000B_"));return e},a.prototype.saveStyles=function(){this.updateCellXfsStyleXfs();var e='<?xml version="1.0" encoding="utf-8"?><styleSheet xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';e+=this.saveNumberFormats(),e+=this.saveFonts(),e+=this.saveFills(),e+=this.saveBorders(),e+=this.saveCellStyleXfs(),e+=this.saveCellXfs(),e+=this.saveCellStyles(),this.addToArchive(e+"</styleSheet>","xl/styles.xml")},a.prototype.updateCellXfsStyleXfs=function(){for(var e=0,t=this.mStyles;e<t.length;e++){var i=t[e],r=void 0;i.isGlobalStyle?(r=new Bv,r.xfId=i.index-1):(r=new Lv,r.xfId=0);var n=this.isNewFont(i);if(n.result)r.fontId=n.index;else{var s=new wh;s.b=i.bold,s.i=i.italic,s.name=i.fontName,s.sz=i.fontSize,s.u=i.underline,s.strike=i.strikeThrough,s.color="FF"+i.fontColor.replace("#",""),this.mFonts.push(s),r.fontId=this.mFonts.length-1}if(i.backColor!=="none"){var o="FF"+i.backColor.replace("#","");if(this.mFills.has(o)){var l=this.mFills.get(o);r.fillId=l}else{var l=this.mFills.size+2;this.mFills.set(o,l),r.fillId=l}}else r.fillId=0;if(this.isNewBorder(i)?r.borderId=0:(this.mBorders.push(i.borders),r.borderId=this.mBorders.length),i.numberFormat!=="GENERAL")if(this.mNumFmt.has(i.numberFormat)){var h=this.mNumFmt.get(i.numberFormat);r.numFmtId=h.numFmtId}else{var p=this.mNumFmt.size+164;this.mNumFmt.set(i.numberFormat,new xh(p,i.numberFormat)),r.numFmtId=p}else i.numberFormat==="GENERAL"&&i.numFmtId===14?r.numFmtId=14:r.numFmtId=0;i.isGlobalStyle||(r.applyAlignment=1),r.alignment=new Ov,r.alignment.indent=i.indent,r.alignment.horizontal=i.hAlign,r.alignment.vertical=i.vAlign,r.alignment.wrapText=i.wrapText?1:0,r.alignment.rotation=i.rotation,i.isGlobalStyle?(this.mCellStyleXfs.push(r),this.mCellXfs.push(r)):this.mCellXfs.push(r)}},a.prototype.saveNumberFormats=function(){if(this.mNumFmt.size>=1){var e='<numFmts count="'+this.mNumFmt.size+'">';return this.mNumFmt.forEach(function(t,i){e+='<numFmt numFmtId="'+t.numFmtId+'" formatCode="'+t.formatCode.replace(/"/g,"&quot;")+'" />'}),e+="</numFmts>"}else return""},a.prototype.saveFonts=function(){var e='<fonts count="'+this.mFonts.length+'">';if(this.mFonts.length>=1)for(var t=0,i=this.mFonts;t<i.length;t++){var r=i[t];e+="<font>",r.b&&(e+="<b />"),r.i&&(e+="<i />"),r.u&&(e+="<u />"),r.strike&&(e+="<strike />"),e+='<sz val="'+r.sz+'" />',e+='<color rgb="'+r.color+'" />',e+='<name val="'+r.name+'" /></font>'}return e+"</fonts>"},a.prototype.saveFills=function(){var e='<fills count="'+(this.mFills.size+2)+'"><fill><patternFill patternType="none"></patternFill></fill><fill><patternFill patternType="gray125"></patternFill></fill>';return this.mFills.size>=1&&this.mFills.forEach(function(t,i){e+='<fill><patternFill patternType="solid"><fgColor rgb="'+i+'" /><bgColor rgb="FFFFFFFF" /></patternFill></fill>'}),e+"</fills>"},a.prototype.saveBorders=function(){var e='<borders count="'+(this.mBorders.length+1)+'"><border><left /><right /><top /><bottom /><diagonal /></border>';if(this.mBorders.length>=1)for(var t=0,i=this.mBorders;t<i.length;t++){var r=i[t];if(this.isAllBorder(r)){var n=r.all.color.replace("#",""),s=r.all.lineStyle;e+='<border><left style="'+s+'"><color rgb="FF'+n+'" /></left><right style="'+s+'"><color rgb="FF'+n+'" /></right><top style="'+s+'"><color rgb="FF'+n+'" /></top><bottom style="'+s+'"><color rgb="FF'+n+'" /></bottom></border>'}else e+='<border><left style="'+r.left.lineStyle+'"><color rgb="FF'+r.left.color.replace("#","")+'" /></left><right style="'+r.right.lineStyle+'"><color rgb="FF'+r.right.color.replace("#","")+'" /></right><top style="'+r.top.lineStyle+'"><color rgb="FF'+r.top.color.replace("#","")+'" /></top><bottom style="'+r.bottom.lineStyle+'"><color rgb="FF'+r.bottom.color.replace("#","")+'" /></bottom></border>'}return e+"</borders>"},a.prototype.saveCellStyles=function(){var e=this,t='<cellStyles  count="'+this.cellStyles.size+'">';return this.cellStyles.forEach(function(i,r){t+='<cellStyle name="'+r+'" xfId="'+e.cellStyles.get(r).xfId+'"',r==="Normal"&&(t+=' builtinId="0"'),t+=" />"}),t+="</cellStyles>"},a.prototype.saveCellStyleXfs=function(){var e='<cellStyleXfs count="'+(this.mCellStyleXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" />';if(this.mCellStyleXfs.length>=1)for(var t=0,i=this.mCellStyleXfs;t<i.length;t++){var r=i[t];e+='<xf numFmtId="'+r.numFmtId+'" fontId="'+r.fontId+'" fillId="'+r.fillId+'" borderId="'+r.borderId+'" ',r.alignment!==void 0?e+=">"+this.saveAlignment(r)+"</xf>":e+=" />"}return e+"</cellStyleXfs>"},a.prototype.saveCellXfs=function(){var e='<cellXfs count="'+(this.mCellXfs.length+1)+'"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0" />';if(this.mCellXfs.length>=1)for(var t=0,i=this.mCellXfs;t<i.length;t++){var r=i[t];e+='<xf numFmtId="'+r.numFmtId+'" fontId="'+r.fontId+'" fillId="'+r.fillId+'" borderId="'+r.borderId+'" xfId="'+r.xfId+'" ',r.applyAlignment===1&&(e+='applyAlignment="1"'),e+=">"+this.saveAlignment(r)+"</xf>"}return e+"</cellXfs>"},a.prototype.saveAlignment=function(e){var t="<alignment ";return e.alignment.horizontal!==void 0&&(t+='horizontal="'+e.alignment.horizontal+'" '),e.alignment.indent!==void 0&&e.alignment.indent!==0?t+='indent="'+e.alignment.indent+'" ':e.alignment.rotation!==void 0&&e.alignment.rotation!==0&&(t+='textRotation="'+e.alignment.rotation+'" '),e.alignment.vertical!==void 0&&(t+='vertical="'+e.alignment.vertical+'" '),t+='wrapText="'+e.alignment.wrapText+'" />',t},a.prototype.saveApp=function(e){var t='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>Essential XlsIO</Application>';e!==void 0&&(e.manager!==void 0&&(t+="<Manager>"+e.manager+"</Manager>"),e.company!==void 0&&(t+="<Company>"+e.company+"</Company>")),this.addToArchive(t+"</Properties>","docProps/app.xml")},a.prototype.saveCore=function(e){var t=new Date,i='<?xml version="1.0" encoding="utf-8" standalone="yes"?><cp:coreProperties xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties">';this.builtInProperties!==void 0?(e.author!==void 0&&(i+="<dc:creator>"+e.author+"</dc:creator>"),e.subject!==void 0&&(i+="<dc:subject>"+e.subject+"</dc:subject>"),e.category!==void 0&&(i+="<cp:category>"+e.category+"</cp:category>"),e.comments!==void 0&&(i+="<dc:description>"+e.comments+"</dc:description>"),e.title!==void 0&&(i+="<dc:title>"+e.title+"</dc:title>"),e.tags!==void 0&&(i+="<cp:keywords>"+e.tags+"</cp:keywords>"),e.status!==void 0&&(i+="<cp:contentStatus>"+e.status+"</cp:contentStatus>"),e.createdDate!==void 0?i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+e.createdDate.toISOString()+"</dcterms:created>":i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:created>",e.modifiedDate!==void 0?i+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+e.modifiedDate.toISOString()+"</dcterms:modified>":i+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:modified>"):(i+='<dcterms:created xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:created>",i+='<dcterms:modified xsi:type="dcterms:W3CDTF">'+t.toISOString()+"</dcterms:modified>"),i+="</cp:coreProperties>",this.addToArchive(i,"docProps/core.xml")},a.prototype.saveTopLevelRelation=function(){var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml" /><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml" /><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml" /></Relationships>';this.addToArchive(e,"_rels/.rels")},a.prototype.saveWorkbookRelation=function(){for(var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">',t=this.worksheets.length,i=0,r=0;r<t;r++,i++)e+='<Relationship Id="rId'+(r+1).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+(r+1).toString()+'.xml" />';e+='<Relationship Id="rId'+(++i).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" />',this.sharedStringCount>0&&(e+='<Relationship Id="rId'+(++i).toString()+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" />'),this.addToArchive(e+"</Relationships>","xl/_rels/workbook.xml.rels")},a.prototype.saveContentType=function(){for(var e='<?xml version="1.0" encoding="utf-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" />',t="",i=this.worksheets.length,r=0,n=0;n<i;n++)t+='<Override PartName="/xl/worksheets/sheet'+(n+1).toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" />',this.worksheets[n].images!=null&&this.worksheets[n].images.length>0&&(r++,t+='<Override PartName="/xl/drawings/drawing'+r.toString()+'.xml" ContentType="application/vnd.openxmlformats-officedocument.drawing+xml" />');this.imageCount>0&&(t+='<Default Extension="png" ContentType="image/png" />'),this.sharedStringCount>0&&(e+='<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" />'),this.addToArchive(e+t+"</Types>","[Content_Types].xml")},a.prototype.addToArchive=function(e,t){if(typeof e=="string"){var i=new Blob([e],{type:"text/plain"}),r=new Wr(i,t);this.mArchive.addItem(r)}else{var r=new Wr(e,t);this.mArchive.addItem(r)}},a.prototype.processMergeCells=function(e,t,i){if(e.rowSpan!==0||e.colSpan!==0){var r=new lp;r.x=e.index,r.width=e.colSpan,r.y=t,r.height=e.rowSpan;var n=this.getCellName(r.y,r.x),s=this.getCellName(t+r.height,e.index+r.width);r.ref=n+":"+s,i.add(r);var o={x:r.x,y:r.y},l={x:e.index+r.width,y:t+r.height};this.updatedMergedCellStyles(o,l,e)}return i},a.prototype.updatedMergedCellStyles=function(e,t,i){for(var r=e.x;r<=t.x;r++)for(var n=e.y;n<=t.y;n++)this.mergedCellsStyle.set(this.getCellName(n,r),{x:r,y:n,styleIndex:i.styleIndex})},a.prototype.dateToTicks=function(e,t,i){var r=864e9,n=[0,31,59,90,120,151,181,212,243,273,304,334,365],s=[0,31,60,91,121,152,182,213,244,274,305,335,366];if(e>=1&&e<=9999&&t>=1&&t<=12){var o=this.isLeapYear(e)?s:n,l=e-1,h=l*365+(l/4|0)-(l/100|0)+(l/400|0)+o[t-1]+i-1;return h*r}throw new Error("Not a valid date")},a.prototype.timeToTicks=function(e,t,i){if(e>=0&&e<24&&t>=0&&t<60&&i>=0&&i<60){var r=e*3600+t*60+i;return r*1e4*1e3}throw new Error("Not valid time")},a.prototype.isLeapYear=function(e){return e%4===0&&(e%100!==0||e%400===0)},a.prototype.toOADate=function(e){var t=0;if(t=this.dateToTicks(e.getFullYear(),e.getMonth()+1,e.getDate())+this.timeToTicks(e.getHours(),e.getMinutes(),e.getSeconds()),t===0)return 0;var i=1e4*1e3*60*60*24,r=(((365*4+1)*25-1)*4+1)*4+((365*4+1)*25-1)*3-367,n=r*i,s=((365*4+1)*25-1-365)*i;if(t<s)throw new Error("Arg_OleAutDateInvalid");var o=1e3*60*60*24;return(t-n)/1e4/o},a}(),sy=function(){function a(){}return a}(),La=function(){function a(e,t){this.hideColumnInclude=!1,this.foreignKeyData={},this.parent=e,!e.parentDetails&&t&&(this.foreignKeyData=t)}return a.getQuery=function(e,t){var i=t.generateQuery(!0).requiresCount();return t.isRemote()&&(e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length?i.lazyLoad=[]:i.take(e.pageSettings.totalRecordsCount)),i},a.prototype.getFData=function(e,t){var i=Xi(t,{},e,this.foreignKeyData[t.field])[0];return i},a.prototype.getGridRowModel=function(e,t,i,r){r===void 0&&(r=0);var n=[],s=t.length;if(s){for(var o=0;o<s;o++,r++){var l={isExpand:!1};l.data=t[parseInt(o.toString(),10)],l.index=r,(i.childGrid||i.detailTemplate)&&(i.hierarchyPrintMode==="All"?l.isExpand=!0:i.hierarchyPrintMode==="Expanded"&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(r.toString(),10)]&&(l.isExpand=i.expandedRows[parseInt(r.toString(),10)].isExpand));var h=new bi(l);h.cells=this.generateCells(e,i),n.push(h)}this.processColumns(n)}return n},a.prototype.generateCells=function(e,t){var i=[];if(t.childGridLevel)for(var r=t.childGridLevel,n=0;r>n;n++)i.push(this.generateCell({},Q.Indent));for(var s=0,o=e;s<o.length;s++){var l=o[s];i.push(this.generateCell(l,Q.Data))}return i},a.prototype.getColumnData=function(e){var t=this,i=[],r,n=e.getForeignKeyColumns();if(n.length){for(var s=0;s<n.length;s++){var o="result"in n[parseInt(s.toString(),10)].dataSource?new q(n[parseInt(s.toString(),10)].dataSource.result):n[parseInt(s.toString(),10)].dataSource;i.push(o.executeQuery(new re))}r=Promise.all(i).then(function(l){for(var h=0;h<n.length;h++)t.foreignKeyData[n[parseInt(h.toString(),10)].field]=l[parseInt(h.toString(),10)].result})}return r},a.prototype.getHeaders=function(e,t){t?this.hideColumnInclude=!0:this.hideColumnInclude=!1,this.colDepth=qo(e);for(var i=[],r=0;r<this.colDepth;r++)i[parseInt(r.toString(),10)]=new bi({}),i[parseInt(r.toString(),10)].cells=[];return i=this.processColumns(i),i=this.processHeaderCells(i,e),{rows:i,columns:this.generateActualColumns(e)}},a.prototype.getConvertedWidth=function(e){var t=parseFloat(e);return e.indexOf("%")!==-1?this.parent.element.getBoundingClientRect().width*t/100:t},a.prototype.generateActualColumns=function(e,t){t===void 0&&(t=[]);for(var i=0,r=e;i<r.length;i++){var n=r[i];if(!n.commands){if(!n.columns)(n.visible||this.hideColumnInclude)&&t.push(n);else if(n.visible||this.hideColumnInclude){var s=this.getCellCount(n,0);s!==0&&this.generateActualColumns(n.columns,t)}}}return t},a.prototype.processHeaderCells=function(e,t){for(var i=t,r=0;r<i.length;r++)i[parseInt(r.toString(),10)].commands||(e=this.appendGridCells(i[parseInt(r.toString(),10)],e,0));return e},a.prototype.appendGridCells=function(e,t,i){if(!e.columns&&(e.visible!==!1||this.hideColumnInclude)&&!e.commands)t[parseInt(i.toString(),10)].cells.push(this.generateCell(e,Q.Header,this.colDepth-i,i));else if(e.columns){var r=this.getCellCount(e,0);r&&t[parseInt(i.toString(),10)].cells.push(new Si({cellType:Q.StackedHeader,column:e,colSpan:r}));for(var n=void 0,s=0,o=e.columns.length;s<o;s++)e.columns[parseInt(s.toString(),10)].visible&&!n&&(n=!0),t=this.appendGridCells(e.columns[parseInt(s.toString(),10)],t,i+1)}return t},a.prototype.generateCell=function(e,t,i,r){var n={visible:e.visible,isDataCell:t===Q.Data,column:e,cellType:t,rowSpan:i,index:r};return(!n.rowSpan||n.rowSpan<2)&&delete n.rowSpan,new Si(n)},a.prototype.processColumns=function(e){var t=this.parent,i=[];t.enableColumnVirtualization&&(i=t.getColumnIndexesInView());for(var r=0,n=e.length;r<n;r++)if(t.allowGrouping)for(var s=0,o=t.groupSettings.columns.length-1;s<o;s++)t.enableColumnVirtualization&&i.indexOf(s)===-1||e[parseInt(r.toString(),10)].cells.splice(0,0,this.generateCell({},Q.HeaderIndent));return e},a.prototype.getCellCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getCellCount(e.columns[parseInt(i.toString(),10)],t);else(e.visible||this.hideColumnInclude)&&t++;return t},a.prototype.checkAndExport=function(e,t){var i=Object.keys(e).some(function(r){return!e[""+r]});i||t()},a.prototype.failureHandler=function(e,t,i){var r=this;return function(){e[t.id]=!0,r.checkAndExport(e,i)}},a.prototype.createChildGrid=function(e,t,i,r){var n=new Et(this.parent.detailRowModule.getGridModel(e,t,i));e.isPrinting=!1;var s="parentDetails";n[""+s]={parentID:e.element.id,parentPrimaryKeys:e.getPrimaryKeyFieldNames(),parentKeyField:e.childGrid.queryString,parentKeyFieldValue:j(n.queryString,t.data),parentRowData:t.data};var o=li("child-grid"),l=ge("div",{id:o,styles:"display: none"});return document.body.appendChild(l),n.id=o,r[""+o]=!1,n.isExportGrid=!0,{childGrid:n,element:l}},a.prototype.getGridExportColumns=function(e){for(var t=[],i=0,r=e;i<r.length;i++)r[parseInt(i.toString(),10)].type!=="checkbox"&&t.push(r[parseInt(i.toString(),10)]);return t},a.prototype.getForeignKeyData=function(){return this.foreignKeyData},a}(),ay=function(){function a(e){this.valueFormatter=new tn(e),this.internationalization=new Ne(e)}return a.prototype.returnFormattedValue=function(e,t){return!u(e.value)&&e.value?this.valueFormatter.getFormatFunction(t)(e.value):""},a.prototype.formatCellValue=function(e){if(e.isForeignKey&&(e.value=j(e.column.foreignKeyValue,Xi(e.column,{},e.value)[0])),e.column.type==="number"&&e.column.format!==void 0&&e.column.format!=="")return typeof e.column.format=="string"&&(e.column.format={format:e.column.format}),e.value||e.value===0?this.internationalization.getNumberFormat(e.column.format)(e.value):"";if(e.column.type==="boolean"&&e.value!=="")return e.value?"true":"false";if((e.column.type==="date"||e.column.type==="dateonly"||e.column.type==="datetime"||e.column.type==="time")&&e.column.format!==void 0)if(typeof e.value=="string"&&(e.value=new Date(e.value)),typeof e.column.format=="string"){var t=void 0,i=e.column.format;return e.column.type==="date"||e.column.type==="dateonly"?t={type:"date",skeleton:i}:e.column.type==="time"?t={type:"time",skeleton:i}:t={type:"dateTime",skeleton:i},this.returnFormattedValue(e,t)}else{if(e.column.format instanceof Object&&e.column.format.type===void 0)return e.value.toString();var r=void 0;return e.column.type==="date"||e.column.type==="dateonly"?r={type:e.column.format.type,format:e.column.format.format,skeleton:e.column.format.skeleton}:e.column.type==="time"?r={type:"time",format:e.column.format.format,skeleton:e.column.format.skeleton}:r={type:"dateTime",format:e.column.format.format,skeleton:e.column.format.skeleton},this.returnFormattedValue(e,r)}else return!u(e.column.type)&&!u(e.value)||!u(e.value)?e.value.toString():""},a}(),oy=function(){function a(e,t){this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.isCsvExport=!1,this.isChild=!1,this.isElementIdChanged=!1,this.gridPool={},this.sheet={},this.grpFooterTemplates=[],this.footerTemplates=[],this.aggIndex=0,this.totalAggregates=0,this.parent=e,this.helper=new La(e),this.locator=t,this.l10n=this.locator.getService("localization")}return a.prototype.getModuleName=function(){return"ExcelExport"},a.prototype.init=function(e){e.element!==null&&e.element.id===""&&(e.element.id=new Date().toISOString(),this.isElementIdChanged=!0),this.parent=e,!this.parent.isDestroyed&&(this.isExporting=void 0,this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.footer=void 0,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.exportValueFormatter=new ay(e.locale),e.id=li("main-grid"),this.gridPool[e.id]=!1)},a.prototype.Map=function(e,t,i,r,n,s){var o=e,l="cancel",h="isBlob",p="isChild",c="isCsv",d="workbook",f="isMultipleExport";this.gridPool={},(e.childGrid||e.detailTemplate)&&!(!u(t)&&t.hierarchyExportMode==="None")&&(e.expandedRows=Vo(e).expandedRows);var g={requestType:"beforeExcelExport",gridObject:o,cancel:!1,isMultipleExport:i,workbook:r,isCsv:n,isBlob:s,isChild:this.isChild,grpFooterTemplates:this.grpFooterTemplates};return o.trigger(Oc,g),g[""+l]?new Promise(function(m){return m()}):(this.parent.log("exporting_begin",this.getModuleName()),this.data=new Oo(o),this.isExporting=!0,this.isBlob=g[""+h],this.isChild=g[""+p],this.grpFooterTemplates=g.grpFooterTemplates,g[""+c]?this.isCsvExport=g[""+c]:this.isCsvExport=!1,kl(t)&&Qf(t,o),this.processRecords(o,t,g[""+f],g[""+d]))},a.prototype.exportingSuccess=function(e){this.isExporting=!1,this.parent.trigger(Bc,this.isBlob?{promise:this.blobPromise}:{gridInstance:this.parent}),this.parent.log("exporting_complete",this.getModuleName()),e(this.book)},a.prototype.processRecords=function(e,t,i,r){var n=this;if(!u(t)&&!u(t.dataSource)){t.dataSource=t.dataSource instanceof q?t.dataSource:new q(t.dataSource);var s=t.query?t.query:new re;return(u(s.isCountRequired)||e.aggregates)&&(s.isCountRequired=!0),new Promise(function(h){var p=t.dataSource.executeQuery(s);p.then(function(c){n.init(e),n.processInnerRecords(e,t,i,r,c).then(function(){n.exportingSuccess(h)})})})}else{if(!u(t)&&t.exportType==="CurrentPage"&&!(this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()))return new Promise(function(h){n.init(e),n.processInnerRecords(e,t,i,r,n.parent.getCurrentViewRecords()),n.exportingSuccess(h)});var o=[],l=La.getQuery(e,this.data);return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()&&(u(t)&&(t={hierarchyExportMode:"All"}),t.hierarchyExportMode=t.hierarchyExportMode==="None"?"None":"All",t.hierarchyExportMode==="All"&&(l.lazyLoad=[])),o.push(this.data.getData({},l)),o.push(this.helper.getColumnData(e)),new Promise(function(h,p){Promise.all(o).then(function(c){n.init(e),n.processInnerRecords(e,t,i,r,c[0]).then(function(){n.exportingSuccess(h)})}).catch(function(c){p(n.book),n.parent.trigger(Ao,c)})})}},a.prototype.processInnerRecords=function(e,t,i,r,n){var s=this;this.groupedColLength=e.groupSettings.columns.length;var o=5,l,h=[],p=qo(e.columns),c=!u(t);return c&&!u(t.multipleExport)&&(this.expType=u(t.multipleExport.type)?"AppendToSheet":t.multipleExport.type,u(t.multipleExport.blankRows)||(o=t.multipleExport.blankRows)),u(r)?(this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.sheet.images=[]):this.expType==="NewSheet"?(this.workSheet=r.worksheets,this.rows=[],this.columns=[],this.sheet.images=[],this.styles=r.styles):(this.workSheet=[],this.rows=r.worksheets[0].rows,this.columns=r.worksheets[0].columns,this.styles=r.styles,this.sheet.images=r.worksheets[0].images,this.rowLength=this.rows[this.rows.length-1].index+o,this.rowLength++),c&&(u(i)?(u(t.header)||this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),u(t.footer)||(this.footer=JSON.parse(JSON.stringify(t.footer)))):(!u(t.header)&&(i||this.expType==="NewSheet")&&this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),u(t.footer)||(this.expType==="AppendToSheet"?i||(this.footer=JSON.parse(JSON.stringify(t.footer))):this.footer=JSON.parse(JSON.stringify(t.footer))))),this.includeHiddenColumn=c?t.includeHiddenColumn:!1,new Promise(function(d,f){e.childGridLevel=0,h=s.processGridExport(e,t,n),s.globalResolve=d,s.gridPool[e.id]=!0,s.helper.checkAndExport(s.gridPool,s.globalResolve)}).then(function(){var d=[];if(s.organiseRows(h,h[0].index,d),s.rows=s.rows.concat(d),u(s.footer)||(s.expType==="AppendToSheet"&&!i||s.expType==="NewSheet")&&s.processExcelFooter(s.footer),s.columns.length>0&&(s.sheet.columns=s.columns),s.sheet.rows=s.rows,s.sheet.enableRtl=s.parent.enableRtl,s.parent.allowFiltering&&e.getVisibleColumns().length&&c&&t.enableFilter){var f=t.header?t.header.headerRows||t.header.rows.length:0,g={row:p+f,column:s.groupedColLength?s.groupedColLength+1:s.sheet.columns[0].index,lastRow:s.sheet.rows.length,lastColumn:s.sheet.columns.length};s.sheet.autoFilters=g}if(s.workSheet.push(s.sheet),s.book.worksheets=s.workSheet,s.book.styles=s.styles,e.notify("finalPageSetup",s.book),!i){if(s.isCsvExport){c&&!u(t.separator)&&t.separator!==","&&(l=t.separator);var m=new Fh(s.book,"csv",e.locale,za,l);s.isBlob?s.blobPromise=m.saveAsBlob("text/csv"):c&&t.fileName?m.save(t.fileName):m.save("Export.csv")}else{var m=new Fh(s.book,"xlsx",e.locale,za);s.isBlob?s.blobPromise=m.saveAsBlob("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"):c&&t.fileName?m.save(t.fileName):m.save("Export.xlsx")}s.isElementIdChanged&&(e.element.id=""),delete e.expandedRows}return r})},a.prototype.organiseRows=function(e,t,i){if(!e.length)return t;for(var r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)],s=n.childRows;s?(n.index=t++,delete n.childRows,i.push(n),t=this.organiseRows(s,t,i)):(n.index=t++,i.push(n))}return t},a.prototype.processGridExport=function(e,t,i){var r=[];!u(t)&&!u(t.theme)&&(this.theme=t.theme),(e.childGrid||e.detailTemplate)&&!u(t)&&(e.hierarchyPrintMode=t.hierarchyExportMode||"Expanded");var n=new La(e,this.helper.getForeignKeyData()),s=kl(t)?On(t.columns,e.enableColumnVirtualization):n.getGridExportColumns(e.columns),o=n.getHeaders(s,this.includeHiddenColumn),l=e.groupSettings.columns.length?e.groupSettings.columns.length-1:0;return r=this.processHeaderContent(e,o,l,r),!u(t)&&Object.keys(t).length&&u(t.dataSource)?t.exportType==="CurrentPage"&&(!e.groupSettings.enableLazyLoading||e.getDataModule().isRemote())?r=this.processRecordContent(e,i,o,t,e.currentViewData,r,n):r=this.processRecordContent(e,i,o,t,void 0,r,n):r=this.processRecordContent(e,i,o,t,void 0,r,n),e.notify(Uc,{excelRows:r,type:"excel"}),this.capTemplate=void 0,this.footerTemplates=[],this.grpFooterTemplates=[],this.aggIndex=0,this.totalAggregates=0,r},a.prototype.processRecordContent=function(e,t,i,r,n,s,o){var l;if(!u(n)&&n.length?l=n:l=t.result,u(l.level)?this.processRecordRows(e,l,i,0,0,r,s,o):this.processGroupedRows(e,l,i,l.level,0,r,s,o),!u(t.aggregates))if(!u(n)&&!this.parent.groupSettings.enableLazyLoading)this.processAggregates(e,t.result,s,n);else{var h=t.result.GroupGuid?t.result.records:t.result;this.processAggregates(e,h,s)}return s},a.prototype.processGroupedRows=function(e,t,i,r,n,s,o,l){for(var h=0,p=t;h<p.length;h++){var c=p[h],d=[],f=1,g={};g.index=f+r-1;var m=e.getColumnByField(c.field),v={value:c.key,column:m,style:void 0,isForeignKey:m.isForeignColumn()},y=e.getColumnByField(c.field).headerText+": "+(m.enableGroupByFormat?c.key:this.exportValueFormatter.formatCellValue(v))+" - ";c.count>1?y+=c.count+" items":y+=c.count+" item";var w={captionText:y,type:this.isCsvExport?"CSV":"Excel",data:c};this.parent.trigger(xc,w),g.value=w.captionText,g.style=this.getCaptionThemeStyle(this.theme),u(w.style)||(g.style=this.mergeOptions(g.style,w.style));var b=new Mu(e),I=b.generateRows(c);if(this.fillAggregates(e,I,t.level+t.childLevels-1,o,this.rowLength),d.push(g),o[o.length-1].cells.length>0){for(var k=t.level+t.childLevels+I[0].cells.length,D=0,W=0,Z=o[o.length-1].cells;W<Z.length;W++){var J=Z[W];J.index<k&&(k=J.index),J.index>D&&(D=J.index),d[d.length-1].index!==J.index&&d.push(J)}for(k-g.index>1&&(g.colSpan=k-g.index);D<i.columns.length+r+t.childLevels;){var X={};X.index=D+1,X.style=this.getCaptionThemeStyle(this.theme),d.push(X),D++}}else{for(var L=0,O=0,F=i.columns;O<F.length;O++){var V=F[O];V.visible&&L++}g.colSpan=t.childLevels+L}if(o[o.length-1].cells=d,this.rowLength++,this.groupedColLength<8&&r>1){var K={outlineLevel:r-1,isCollapsed:!0};o[o.length-1].grouping=K}!u(t.childLevels)&&t.childLevels>0?(this.processGroupedRows(e,c.items,i,c.items.level,n,s,o,l),this.processAggregates(e,c,o,void 0,r-1+t.childLevels,!0)):(n=this.processRecordRows(e,c.items,i,r-1,n,s,o,l),this.processAggregates(e,c,o,void 0,r-1,!0))}},a.prototype.processRecordRows=function(e,t,i,r,n,s,o,l){for(var h=1,p=[],c=i.columns,d=l.getGridRowModel(c,t,e,n),f=0,g=d;f<g.length;f++){var m=g[f];p=[],n++,h=1;for(var v=void 0,y=0,w=m.cells.length;y<w;y++){var b=m.cells[parseInt(y.toString(),10)];if(b.cellType===Q.Data){var I=b.column,k=I.field,D=u(k)?"":I.valueAccessor(k,m.data,I),W=u(D)?"":D;if(I.type==="dateonly"&&typeof W=="string"&&W){var Z=W.split(/[^0-9.]/);W=new Date(parseInt(Z[0],10),parseInt(Z[1],10)-1,parseInt(Z[2],10))}var J=void 0;if(I.isForeignColumn&&I.isForeignColumn()&&(J=l.getFData(W,I),W=j(I.foreignKeyValue,J)),!u(W)){var X={},L=h+r+e.childGridLevel,O={data:m.data,column:I,foreignKeyData:J,value:W,style:void 0,colSpan:1,cell:X};if(e.trigger(Pc,O),!u(O.image)&&!u(O.image.base64)&&(v=this.setImage(O,L),O.image.height&&O.value!==""&&(v+=30)),u(O.hyperLink)||(O.cell.hyperlink={target:O.hyperLink.target},O.value=O.hyperLink.displayText||O.value),X=O.cell,X.index=L,X.value=O.value,O.data===""&&e.childGridLevel&&h===1){var F={};F.hAlign="left",O={style:F},X.colSpan=e.getVisibleColumns().length,X.value=this.l10n.getConstant("EmptyRecord")}if(O.colSpan>1&&(X.colSpan=O.colSpan),u(O.style))X.style={name:e.element.id+"column"+(h+r)};else{var V=this.getColumnStyle(e,h+r);X.style=this.mergeOptions(this.styles[parseInt(V.toString(),10)],O.style)}p.push(X)}h++}}var K={index:this.rowLength++,cells:p};if(u(v)||(K.height=v),this.groupedColLength&&this.groupedColLength<8&&r+1>0&&(K.grouping={outlineLevel:r+1,isCollapsed:!0}),o.push(K),(m.isExpand||this.isChild)&&(!u(e.childGrid)||!u(e.detailTemplate)))if(u(e.childGrid)){var le={parentRow:m,row:K,value:{},action:"excelexport",gridInstance:e};this.parent.trigger(Hc,le),K.childRows=this.processDetailTemplate(le)}else{e.isPrinting=!0;var U=!u(s)&&s.exportType?s.exportType:"AllPages",H=this.helper.createChildGrid(e,m,U,this.gridPool),z=H.childGrid,Y=H.element;z.actionFailure=l.failureHandler(this.gridPool,z,this.globalResolve),z.childGridLevel=e.childGridLevel+1;var le={childGrid:z,row:m,exportProperties:s};this.parent.trigger(zc,le),z.beforeDataBound=this.childGridCell(K,z,s,m),z.appendTo(Y)}e.notify(jc,{rowObj:m,type:"excel",excelRows:o})}return n},a.prototype.processDetailTemplate=function(e){var t=this,i=[],r,n=2,s;if(e.value.columnHeader||e.value.rows){var o=function(c,d){var f={};if(u(c.index)&&(c.index=s,s++),f.index=c.index+n,u(c.value)||(f.value=c.value),u(c.colSpan)||(f.colSpan=c.colSpan),u(c.rowSpan)||(f.rowSpan=c.rowSpan),d?f.style=t.getHeaderThemeStyle(t.theme):f.style=t.getRecordThemeStyle(t.theme),!u(c.style)){var g={fontColor:c.style.fontColor,fontName:c.style.fontName,fontSize:c.style.fontSize,hAlign:c.style.excelHAlign,vAlign:c.style.excelVAlign,rotation:c.style.excelRotation,bold:c.style.bold,indent:c.style.indent,italic:c.style.italic,underline:c.style.underline,backColor:c.style.backColor,wrapText:c.style.wrapText,borders:c.style.excelBorders,numberFormat:c.style.excelNumberFormat,type:c.style.excelType,strikeThrough:c.style.strikeThrough};f.style=t.mergeOptions(g,f.style)}return!u(c.image)&&!u(c.image.base64)&&(c.rowSpan>1?t.setImage(c,f.index):(r=t.setImage(c,f.index),c.image.height&&c.value!==""&&(r+=30))),u(c.hyperLink)||(f.hyperlink={target:c.hyperLink.target},f.value=c.hyperLink.displayText),f},l=function(c,d){var f=[];s=0;for(var g=0;g<c.cells.length;g++){var m=c.cells[parseInt(g.toString(),10)],v=o(m,d);f.push(v)}var y={index:t.rowLength++,cells:f};u(r)||(y.height=r,r=null),i.push(y)};if(e.value.columnHeader)for(var h=0;h<e.value.columnHeader.length;h++)l(e.value.columnHeader[parseInt(h.toString(),10)],!0);if(e.value.rows)for(var h=0;h<e.value.rows.length;h++)l(e.value.rows[parseInt(h.toString(),10)])}else if(e.value.image){r=this.setImage(e.value,n);var p={index:this.rowLength++,cells:[{index:n,style:this.getRecordThemeStyle(this.theme)}]};u(r)||(p.height=r,r=null),i.push(p)}else if(e.value.text){var p={index:this.rowLength++,cells:[{index:n,value:e.value.text,style:this.getRecordThemeStyle(this.theme)}]};i.push(p)}else if(e.value.hyperLink){var p={index:this.rowLength++,cells:[{index:2,hyperlink:{target:e.value.hyperLink.target},value:e.value.hyperLink.displayText,style:this.getRecordThemeStyle(this.theme)}]};i.push(p)}for(var h=0;h<i.length;h++)i[parseInt(h.toString(),10)].grouping={outlineLevel:1,isCollapsed:!e.parentRow.isExpand,isHidden:!e.parentRow.isExpand};return i},a.prototype.setImage=function(e,t){u(this.sheet.images)&&(this.sheet.images=[]);var i={image:e.image.base64,row:this.rowLength,column:t,lastRow:this.rowLength,lastColumn:t};return e.image.width&&e.image.height&&(i.width=e.image.width,i.height=e.image.height),this.sheet.images.push(i),this.columns[t-1].width=e.image.width||this.columns[t-1].width,e.image.height||50},a.prototype.childGridCell=function(e,t,i,r){var n=this;return function(s){t.beforeDataBound=null,s.cancel=!0,s.result.length===0&&(s.result=[""]),e.childRows=n.processGridExport(t,i,s);for(var o=n.parent.groupSettings.columns.length,l=e.childRows,h=0;h<l.length;h++)l[parseInt(h.toString(),10)].grouping={outlineLevel:o+t.childGridLevel,isCollapsed:!r.isExpand,isHidden:!r.isExpand};return t.destroy(),ne(t.element),n.gridPool[t.id]=!0,n.helper.checkAndExport(n.gridPool,n.globalResolve),e}},a.prototype.processAggregates=function(e,t,i,r,n,s){var o=new No(e),l=o.getColumns();l=l.filter(function(f){return u(f.commands)&&f.type!=="checkbox"}),e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo();var h=void 0;if(u(r)?h=t:h=r,n===void 0&&(n=0),e.groupSettings.columns.length>0&&s){var p=new Tu(e),c=p.generateRows(h,{level:h.level});c.length>0&&(i=this.fillAggregates(e,c,n,i))}else{n=e.groupSettings.columns.length>0&&!s?e.groupSettings.columns.length:n;var d=o.generateRows(h,t.aggregates,null,null,l);d.length>0&&!s&&(n=e.groupSettings.columns.length?n-1:n,i=this.fillAggregates(e,d,n,i))}return i},a.prototype.fillAggregates=function(e,t,i,r,n){for(var s=0,o=t;s<o.length;s++){for(var l=o[s],h=[],p=!0,c=0,d=0,f=l.cells;d<f.length;d++){var g=f[d],m={},v={};if(u(g.attributes.index)||(v=this.parent.getColumnByIndex(g.attributes.index)),!(g.cellType===Q.DetailFooterIntent||v.type==="checkbox"||v.commands)&&(g.visible||this.includeHiddenColumn))if(c++,g.isDataCell){p=!1;var y=!u(g.column.footerTemplate),w=!u(g.column.groupFooterTemplate),b=!u(g.column.groupCaptionTemplate);if(m.index=c+i+e.childGridLevel,y)m.value=this.getAggreateValue(e,Q.Summary,g.column.footerTemplate,g,l);else if(w)m.value=this.getAggreateValue(e,Q.GroupSummary,g.column.groupFooterTemplate,g,l);else if(b)m.value=this.getAggreateValue(e,Q.CaptionSummary,g.column.groupCaptionTemplate,g,l);else for(var I=0,k=Object.keys(l.data[g.column.field]);I<k.length;I++){var D=k[I];D===g.column.type&&(u(l.data[g.column.field].Sum)?u(l.data[g.column.field].Average)?u(l.data[g.column.field].Max)?u(l.data[g.column.field].Min)?u(l.data[g.column.field].Count)?u(l.data[g.column.field].TrueCount)?u(l.data[g.column.field].FalseCount)?u(l.data[g.column.field].Custom)||(m.value=l.data[g.column.field].Custom):m.value=l.data[g.column.field][g.column.field+" - falsecount"]:m.value=l.data[g.column.field][g.column.field+" - truecount"]:m.value=l.data[g.column.field][g.column.field+" - count"]:m.value=l.data[g.column.field][g.column.field+" - min"]:m.value=l.data[g.column.field][g.column.field+" - max"]:m.value=l.data[g.column.field][g.column.field+" - average"]:m.value=l.data[g.column.field][g.column.field+" - sum"])}m.style=this.getCaptionThemeStyle(this.theme),this.aggregateStyle(g.column,m.style,g.column.field);var W=g.attributes.style;W.textAlign&&(m.style.hAlign=W.textAlign.toLowerCase());var Z={row:l,type:y?"Footer":w?"GroupFooter":"GroupCaption",style:m,cell:g};this.parent.trigger(Cd,Z),h.push(m)}else n===void 0&&(m.index=c+i+e.childGridLevel,m.style=this.getCaptionThemeStyle(this.theme),h.push(m))}if(!u(n))r.push({index:n,cells:h});else{var J={},X="outlineLevel",L="grouping";if(this.groupedColLength<8&&this.groupedColLength>0&&!(e.groupSettings.enableLazyLoading&&u(r[r.length-1][""+L]))){var O=r[r.length-1][""+L][""+X],F={outlineLevel:O,isCollapsed:!0};J={index:this.rowLength++,cells:h,grouping:F}}else J={index:this.rowLength++,cells:h};p||r.push(J)}}return r},a.prototype.aggregateStyle=function(e,t,i){var r=this.parent.getColumnByField(i);if(typeof e.format=="object"){var n=e.format;t.numberFormat=u(n.format)?n.skeleton:n.format,u(n.type)||(t.type=n.type.toLowerCase())}else t.numberFormat=e.format;!u(r)&&u(t.type)&&(t.type=r.type.toLowerCase())},a.prototype.getAggreateValue=function(e,t,i,r,n){var s={};s[yi(Q,r.cellType)]=We(i);var o,l=n.data[r.column.field?r.column.field:r.column.columnName];return(this.parent.isReact||this.parent.isVue||this.parent.isVue3||this.parent.isAngular)&&!(typeof r.column.footerTemplate=="string"||typeof r.column.groupFooterTemplate=="string"||typeof r.column.groupCaptionTemplate=="string")?(o=l[r.column.type],u(o)?"":o):(o=s[yi(Q,r.cellType)](l),u(o[0])?"":o[0].textContent)},a.prototype.mergeOptions=function(e,t){for(var i={},r=Object.keys(e),n=0;n<r.length;n++)r[parseInt(n.toString(),10)]!=="name"&&(i[r[parseInt(n.toString(),10)]]=e[r[parseInt(n.toString(),10)]]);r=Object.keys(t);for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)]!=="name"&&(i[r[parseInt(n.toString(),10)]]=t[r[parseInt(n.toString(),10)]]);return i},a.prototype.getColumnStyle=function(e,t){for(var i=0,r=0,n=this.styles;r<n.length;r++){var s=n[r];if(s.name===e.element.id+"column"+t)return i;i++}},a.prototype.headerRotation=function(e){var t=e.style.rotation;t<=90&&t>=0?e.style.hAlign="Left":(t>90&&t<=180||(t=180),e.style.hAlign="Right"),e.style.rotation=t},a.prototype.processHeaderContent=function(e,t,i,r){var n=1,s=t.rows,o=t.columns,l=[];if(i>0)for(var h=0;h!==i;)this.columns.push({index:h+1,width:30}),h++;for(var p=0;p<o.length;p++)this.parseStyles(e,o[parseInt(p.toString(),10)],this.getRecordThemeStyle(this.theme),i+p+1);for(var c,d=0;d<s.length;d++){for(var f=1+i,g=[],m=0;m<s[parseInt(d.toString(),10)].cells.length;m++){var v={},y={},w=s[parseInt(d.toString(),10)].cells[parseInt(m.toString(),10)];if(!(w.cellType===Q.HeaderIndent||w.cellType===Q.DetailHeader)){for(var b={contains:!0,index:1};b.contains;)if(b=this.getIndex(l,n,f),f=b.index,!b.contains){y.index=b.index+e.childGridLevel;break}if(!u(w.rowSpan)&&w.rowSpan!==1){y.rowSpan=w.rowSpan;for(var I=n;I<w.rowSpan+n;I++){var k={rowIndex:0,columnIndex:0};k.rowIndex=I,k.columnIndex=f,l.push(k)}}!u(w.colSpan)&&w.colSpan!==1&&(y.colSpan=w.colSpan,f=f+y.colSpan-1),y.value=w.column.headerText,v=this.getHeaderThemeStyle(this.theme),u(w.column.textAlign)||(v.hAlign=w.column.textAlign.toLowerCase()),u(w.column.headerTextAlign)||(v.hAlign=w.column.headerTextAlign.toLowerCase());var D={cell:y,gridCell:w,style:v};e.trigger(Nc,D),D.style.rotation&&this.headerRotation(D),!u(D.image)&&!u(D.image.base64)&&(c=this.setImage(D,f)),u(D.hyperLink)||(D.cell.hyperlink={target:D.hyperLink.target},y.value=D.hyperLink.displayText||y.value),y.style=D.style,g.push(y),f++}}var W={index:this.rowLength++,cells:g};u(c)||(W.height=c),r.push(W)}return r},a.prototype.getHeaderThemeStyle=function(e){var t={};return t.fontSize=12,t.borders={color:"#E0E0E0"},t.bold=!0,!u(e)&&!u(e.header)&&(t=this.updateThemeStyle(e.header,t)),t},a.prototype.updateThemeStyle=function(e,t){return P(t,e)},a.prototype.getCaptionThemeStyle=function(e){var t={};return t.fontSize=13,t.backColor="#F6F6F6",!u(e)&&!u(e.caption)&&(t=this.updateThemeStyle(e.caption,t)),t},a.prototype.getRecordThemeStyle=function(e){var t={};return t.fontSize=13,t.borders={color:"#E0E0E0"},!u(e)&&!u(e.record)&&(t=this.updateThemeStyle(e.record,t)),t},a.prototype.processExcelHeader=function(e){if(!u(e.rows)&&(this.expType==="NewSheet"||this.rowLength===1)){var t=void 0;e.headerRows===void 0?this.rowLength=e.rows.length:this.rowLength=e.headerRows,this.rowLength<e.rows.length?t=this.rowLength:t=e.rows.length,this.rowLength++;for(var i=0;i<t;i++){var r=e.rows[parseInt(i.toString(),10)];r.index!==null&&!u(r.index)||(r.index=i+1),this.updatedCellIndex(r)}}},a.prototype.updatedCellIndex=function(e){for(var t=e.cells.length,i=0;i<t;i++){var r=e.cells[parseInt(i.toString(),10)];r.index!==null&&!u(r.index)||(r.index=i+1)}this.rows.push(e)},a.prototype.processExcelFooter=function(e){if(!u(e.rows)){var t=void 0;e.footerRows===void 0?this.rowLength+=e.rows.length:e.footerRows>e.rows.length?(this.rowLength+=e.footerRows-e.rows.length,t=e.rows.length):t=e.footerRows;for(var i=0;i<t;i++){var r=e.rows[parseInt(i.toString(),10)];r.index===null||r.index===void 0?r.index=this.rowLength++:r.index+=this.rowLength,this.updatedCellIndex(r)}}},a.prototype.getIndex=function(e,t,i){for(var r=0,n=e;r<n.length;r++){var s=n[r];if(s.rowIndex===t&&s.columnIndex===i)return i=i+1,{contains:!0,index:i}}return{contains:!1,index:i}},a.prototype.parseStyles=function(e,t,i,r){if(!u(t.format))if(typeof t.format=="object"){var n=t.format;i.numberFormat=u(n.format)?n.skeleton:n.format,u(n.type)||(i.type=n.type==="dateonly"?"date":n.type.toLowerCase())}else i.numberFormat=t.format,i.type=t.type==="dateonly"?"date":t.type;u(t.textAlign)||(i.hAlign=t.textAlign.toLowerCase()),Object.keys(i).length>0&&(i.name=e.element.id+"column"+r,this.styles.push(i)),!u(t.width)&&t.width!=="auto"&&!e.childGridLevel&&this.columns.push({index:r+e.childGridLevel,width:typeof t.width=="number"?t.width:this.helper.getConvertedWidth(t.width)})},a.prototype.destroy=function(){},a}(),ly=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),hy=function(a){ly(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.buttonElement=r.parent.createElement("button",{}),r.unbounDiv=r.parent.createElement("div",{className:"e-unboundcelldiv",styles:"display: inline-block"}),r.childRefs=[],r.element=r.parent.createElement("TD",{className:"e-rowcell e-unboundcell",attrs:{tabindex:"-1",role:"gridcell"}}),r.parent.on(Ie,r.destroyButtons,r),r.parent.on(oo,r.destroyButtons,r),r}return e.prototype.destroyButtons=function(t){for(var i=0;i<this.childRefs.length;i++)this.childRefs[parseInt(i.toString(),10)]&&!this.childRefs[parseInt(i.toString(),10)].isDestroyed&&!(this.parent.editSettings.showAddNewRow&&this.parent.enableVirtualization&&x(this.childRefs[parseInt(i.toString(),10)].element,"e-addedrow"))&&(this.childRefs[parseInt(i.toString(),10)].destroy(),this.childRefs[parseInt(i.toString(),10)].element&&(this.childRefs[parseInt(i.toString(),10)].element.innerHTML=""));if(this.childRefs=[],t.type==="refreshCommandColumn"){var r=this.parent.element.querySelectorAll(".e-gridcontent .e-unboundcell");if(r.length){for(var i=0;i<r.length;i++)r[parseInt(i.toString(),10)]&&!(this.parent.editSettings.showAddNewRow&&this.parent.enableVirtualization&&x(r[parseInt(i.toString(),10)],"e-addedrow"))&&(r[parseInt(i.toString(),10)].querySelector(".e-unboundcelldiv")&&(r[parseInt(i.toString(),10)].querySelector(".e-unboundcelldiv").innerHTML=""),r[parseInt(i.toString(),10)].innerHTML="");r=null}}else this.parent.off(Ie,this.destroyButtons),this.parent.off(oo,this.destroyButtons)},e.prototype.render=function(t,i,r,n){var s=this.element.cloneNode(),o="uid";if(s.appendChild(this.unbounDiv.cloneNode()),s.setAttribute("aria-label",this.localizer.getConstant("CommandColumnAria")+t.column.headerText),t.column.commandsTemplate)if(this.parent.isReact&&typeof t.column.commandsTemplate!="string"){var l=this.parent+"commandsTemplate";t.column.getColumnTemplate()(i,this.parent,"commandsTemplate",l,null,null,s.firstElementChild),this.parent.renderTemplates()}else $e(s.firstElementChild,t.column.getColumnTemplate()(i,this.parent,"commandsTemplate",null,null,null,null,this.parent.root));else for(var h=0,p=t.commands;h<p.length;h++){var c=p[h];s=this.renderButton(s,c,r.index,c[""+o])}return this.setAttributes(s,t,r),!this.parent.enableVirtualization&&this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))||n?(R([].slice.call(s.getElementsByClassName("e-edit-delete")),"e-hide"),N([].slice.call(s.getElementsByClassName("e-save-cancel")),"e-hide")):(R([].slice.call(s.getElementsByClassName("e-save-cancel")),"e-hide"),N([].slice.call(s.getElementsByClassName("e-edit-delete")),"e-hide")),this.parent.isFrozenGrid()&&Vn(this.parent,t.column,s),s},e.prototype.renderButton=function(t,i,r,n){var s=this.buttonElement.cloneNode();$(s,{id:this.parent.element.id+(i.type||"")+"_"+r+"_"+n,type:"button",title:u(i.title)?i.buttonOption.content||this.localizer.getConstant(i.type)||i.type:i.title,"data-uid":n}),s.onclick=i.buttonOption.click,i.buttonOption.cssClass=this.parent.cssClass?i.buttonOption.cssClass+" "+this.parent.cssClass:i.buttonOption.cssClass;var o=new zr(i.buttonOption,s);switch(this.childRefs.push(o),o.commandType=i.type,t.firstElementChild.appendChild(o.element),i.type){case"Edit":case"Delete":R([s],["e-edit-delete","e-"+i.type.toLowerCase()+"button"]);break;case"Cancel":case"Save":R([s],["e-save-cancel","e-"+i.type.toLowerCase()+"button"]);break}return t},e}(xt),uy=function(){function a(e,t){this.parent=e,this.locator=t,this.initiateRender(),this.addEventListener()}return a.prototype.initiateRender=function(){var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(Q.CommandColumn,new hy(this.parent,this.locator))},a.prototype.commandClickHandler=function(e){var t=this.parent,i=M(e.target,"button");if(!(!i||!M(e.target,".e-unboundcell"))){for(var r=i.ej2_instances[0],n=r.commandType,s=i.getAttribute("data-uid"),o,l=t.getRowObjectFromUID(M(i,"."+ze).getAttribute("data-uid")),h=this.parent.columnModel,p=0;p<h.length;p++)if(h[parseInt(p.toString(),10)].commands)for(var c=h[parseInt(p.toString(),10)].commands,d=0;d<c.length;d++){var f="uid",g="type";if(c[parseInt(d.toString(),10)][""+f]===s&&c[parseInt(d.toString(),10)][""+g]===n)o=c[parseInt(d.toString(),10)];else{var m=[].slice.call(M(i,".e-unboundcell").querySelectorAll("button")),v=m.findIndex(function(w){return w===i});v<c.length&&c[parseInt(v.toString(),10)][""+g]===n&&String(c[parseInt(d.toString(),10)][""+f])===s&&(o=c[parseInt(v.toString(),10)])}}var y={cancel:!1,target:i,commandColumn:o,rowData:u(l)?void 0:l.data};this.parent.trigger(Ic,y,function(w){if(!(r.disabled||!t.editModule||w.cancel))switch(n){case"Edit":t.editModule.endEdit(),t.editModule.startEdit(M(i,"tr"));break;case"Cancel":t.editModule.closeEdit();break;case"Save":t.editModule.endEdit();break;case"Delete":t.editSettings.mode!=="Batch"&&t.editModule.endEdit(),t.commandDelIndex=parseInt(M(i,"tr").getAttribute(Se),10),t.clearSelection(),t.selectRow(t.commandDelIndex,!1),t.editModule.deleteRecord(),t.commandDelIndex=void 0;break}})}},a.prototype.getModuleName=function(){return"commandColumn"},a.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ut,this.commandClickHandler),this.parent.off(at,this.keyPressHandler),this.parent.off(ci,this.load),this.parent.off(Ie,this.destroy))},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ut,this.commandClickHandler,this),this.parent.on(at,this.keyPressHandler,this),this.parent.on(ci,this.load,this),this.parent.on(Ie,this.destroy,this))},a.prototype.keyPressHandler=function(e){e.action==="enter"&&M(e.target,".e-unboundcelldiv")&&(this.commandClickHandler(e),e.preventDefault())},a.prototype.load=function(){for(var e="uid",t=this.parent.columnModel,i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].commands)for(var r=t[parseInt(i.toString(),10)].commands,n=0;n<r.length;n++)r[parseInt(n.toString(),10)][""+e]=li("gridcommand")},a}(),py=function(){var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},a(e,t)};return function(e,t){a(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),cy=function(a){py(e,a);function e(t,i){var r=a.call(this,t,i)||this;return r.parent=t,r.serviceLocator=i,r.initEvent(),r}return e.prototype.initEvent=function(){this.parent.isDestroyed||(this.parent.on(Qa,this.initForeignKeyColumns,this),this.parent.on(Ms,this.getForeignKeyData,this),this.parent.on(Gr,this.generateQueryFormData,this))},e.prototype.initForeignKeyColumns=function(t){for(var i=0;i<t.length;i++)t[parseInt(i.toString(),10)].dataSource=t[parseInt(i.toString(),10)].dataSource instanceof q?t[parseInt(i.toString(),10)].dataSource:u(t[parseInt(i.toString(),10)].dataSource)?new q:"result"in t[parseInt(i.toString(),10)].dataSource?t[parseInt(i.toString(),10)].dataSource:new q(t[parseInt(i.toString(),10)].dataSource)},e.prototype.eventfPromise=function(t,i,r,n){var s=this.getStateEventArgument(i),o=new wt,l=new wt;s.action=t.action;var h=this.parent.getDataModule();return!u(t.action)&&t.action.requestType&&h.foreignKeyDataState.isDataChanged!==!1?(h.setForeignKeyDataState({isPending:!0,resolver:l.resolve}),l.promise.then(function(){o.resolve(n.dataSource)}),s.setColumnData=this.parent.setForeignKeyData.bind(this.parent),this.parent.trigger(Vc,s)):(h.setForeignKeyDataState({}),o.resolve(r)),o},e.prototype.getForeignKeyData=function(t){var i=this,r=t.column?[t.column]:this.parent.getForeignKeyColumns();this.parent.columnQueryMode==="ExcludeHidden"&&(r=r.filter(function(h){return h.visible!==!1}));for(var n=[],s=function(h){var p=void 0,c=t.isComplex?o.genarateColumnQuery(r[parseInt(h.toString(),10)]):o.genarateQuery(r[parseInt(h.toString(),10)],t.result.result,!1,!0);c.params=o.parent.query.params;var d=r[parseInt(h.toString(),10)].dataSource;if(d&&"result"in d){var f=o.eventfPromise(t,c,d,r[parseInt(h.toString(),10)]);p=f.promise}else!d.ready||d.dataSource.offline?p=d.executeQuery(c):p=d.ready.then(function(){return d.executeQuery(c)});n.push(p)},o=this,l=0;l<r.length;l++)s(l);Promise.all(n).then(function(h){for(var p=0;p<h.length;p++)r[parseInt(p.toString(),10)].columnData=h[parseInt(p.toString(),10)].result,r[parseInt(p.toString(),10)].editType==="dropdownedit"&&"result"in r[parseInt(p.toString(),10)].dataSource&&(r[parseInt(p.toString(),10)].edit.params=P(r[parseInt(p.toString(),10)].edit.params,{dataSource:h[parseInt(p.toString(),10)].result,query:new re,fields:{value:r[parseInt(p.toString(),10)].foreignKeyField||r[parseInt(p.toString(),10)].field,text:r[parseInt(p.toString(),10)].foreignKeyValue}}));t.promise.resolve(t.result)}).catch(function(h){var p=h;return p.error||(p={error:p}),i.parent.log(["actionfailure","foreign_key_failure"],p),t.promise&&t.promise.reject&&t.promise.reject(h),h})},e.prototype.generateQueryFormData=function(t){t.predicate.predicate=this.genarateQuery(t.column,t.column.columnData,!0)},e.prototype.genarateQuery=function(t,i,r,n){var s=this.parent,o=[],l=new re,h=r?t.foreignKeyField:t.field;if(s.allowPaging||s.enableVirtualization||r){i=new q(s.allowGrouping&&s.groupSettings.columns.length&&!r?i.records:i).executeLocal(new re().select(h));var p=A.distinct(i,h,!1);h=r?t.field:t.foreignKeyField;for(var c=0;c<p.length;c++)p[parseInt(c.toString(),10)]&&p[parseInt(c.toString(),10)].getDay?o.push(Ji({field:h,operator:"equal",value:p[parseInt(c.toString(),10)],matchCase:!1})):o.push(new pe(h,"equal",p[parseInt(c.toString(),10)],!1))}return n?o.length?l.where(pe.or(o)):l:o.length?pe.or(o):{predicates:[]}},e.prototype.genarateColumnQuery=function(t){var i=this.parent,r=new re,n=this.isFiltered(t);if(n.isTrue&&(r=this.filterQuery(r,n.column,!0)),i.searchSettings.key.length){var s=i.searchSettings;t.dataSource instanceof q&&t.dataSource.adaptor.getModuleName&&t.dataSource.adaptor.getModuleName()==="ODataV4Adaptor"?r=this.searchQuery(r,t,!0):r.search(s.key,t.foreignKeyValue,s.operator,s.ignoreCase)}return r},e.prototype.isFiltered=function(t){var i=this.parent.filterSettings.columns.filter(function(r){return r.field===t.foreignKeyValue&&r.uid===t.uid});return{column:i,isTrue:!!i.length}},e.prototype.getModuleName=function(){return"foreignKey"},e.prototype.destroy=function(){this.destroyEvent()},e.prototype.destroyEvent=function(){this.parent.isDestroyed||(this.parent.off(Qa,this.initForeignKeyColumns),this.parent.off(Ms,this.getForeignKeyData),this.parent.off(Gr,this.generateQueryFormData))},e}(Oo),dy=ko({inject:{custom:{default:null}},render:function(a){if(!vi){var e=vi?a:Zh,t=null;return u(this.$slots.default)||(t=vi?this.$slots.default:this.$slots.default()),e("div",{class:"e-directive"},t)}},updated:function(){!vi&&this.custom&&this.custom()},methods:{getTag:function(){return"e-columns"}}}),fy=ko({render:function(){},methods:{getTag:function(){return"e-column"}}}),up=["isLazyUpdate","plugins","aggregates","allowExcelExport","allowFiltering","allowGrouping","allowKeyboard","allowMultiSorting","allowPaging","allowPdfExport","allowReordering","allowResizing","allowRowDragAndDrop","allowSelection","allowSorting","allowTextWrap","autoFit","childGrid","clipMode","columnChooserSettings","columnMenuItems","columnQueryMode","columns","contextMenuItems","cssClass","currencyCode","currentAction","currentViewData","dataSource","detailTemplate","editSettings","ej2StatePersistenceVersion","emptyRecordTemplate","enableAdaptiveUI","enableAltRow","enableAutoFill","enableColumnVirtualization","enableHeaderFocus","enableHover","enableHtmlSanitizer","enableImmutableMode","enableInfiniteScrolling","enablePersistence","enableRtl","enableStickyHeader","enableVirtualMaskRow","enableVirtualization","exportGrids","filterSettings","frozenColumns","frozenRows","gridLines","groupSettings","height","hierarchyPrintMode","infiniteScrollSettings","loadingIndicator","locale","pageSettings","pagerTemplate","parentDetails","printMode","query","queryString","resizeSettings","rowDropSettings","rowHeight","rowRenderingMode","rowTemplate","searchSettings","selectedRowIndex","selectionSettings","showColumnChooser","showColumnMenu","showHider","sortSettings","textWrapSettings","toolbar","toolbarTemplate","width","actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeAutoFill","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenAdaptiveDialog","beforeOpenColumnChooser","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDataStateChange","columnDeselected","columnDeselecting","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","columnSelected","columnSelecting","commandClick","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelAggregateQueryCellInfo","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","exportDetailTemplate","exportGroupCaption","headerCellInfo","keyPressed","lazyLoadGroupCollapse","lazyLoadGroupExpand","load","pdfAggregateQueryCellInfo","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordClick","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick"],pp=["dataSource"],cp=xp({props:up}),gy=cp[0],dp=cp[1],Go=Object.keys(dp);Go.push("modelchanged","update:modelValue");for(var Oa=0,Lh=pp;Oa<Lh.length;Oa++){var my=Lh[Oa];Go.push("update:"+my)}var vy=ko({name:"GridComponent",mixins:[Ep],props:gy,watch:dp,emits:Go,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new Et({}),propKeys:up,models:pp,hasChildDirective:!0,hasInjectedModules:!0,tagMapper:{"e-columns":{"e-column":{"e-stacked-columns":"e-stacked-column"}},"e-aggregates":{"e-aggregate":{"e-columns":"e-column"}}},tagNameMapper:{"e-stacked-columns":"e-columns"},isVue3:!vi,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(a){var e=vi?a:Zh,t=null;return u(this.$slots.default)||(t=vi?this.$slots.default:this.$slots.default()),e("div",t)},methods:{clearTemplate:function(a){if(a||(a=Object.keys(this.templateCollection||{})),a.length&&this.templateCollection)for(var e=0,t=a;e<t.length;e++){var i=t[e],r=this.templateCollection[i];if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var o=s[n];this.destroyPortals(o)}delete this.templateCollection[i]}}},setProperties:function(a,e){var t=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(a,e),a&&this.models&&this.models.length&&Object.keys(a).map(function(i){t.models.map(function(r){i===r&&!/datasource/i.test(i)&&(t.isVue3?t.ej2Instances.vueInstance.$emit("update:"+i,a[i]):(t.$emit("update:"+i,a[i]),t.$emit("modelchanged",a[i])))})})},trigger:function(a,e,t){if(vi||(this.models=this.models?this.models:this.ej2Instances.referModels),(a==="change"||a==="input")&&this.models&&this.models.length!==0){var i=this.models.toString().match(/checked|value/)||[],r=i[0];e&&i&&!nt(e[r])&&(vi?(a==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+r,e[r]),this.$emit("modelchanged",e[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,e[r]),this.ej2Instances.vueInstance.$emit("modelchanged",e[r]),this.ej2Instances.vueInstance.$emit("update:modelValue",e[r])))}else if(a==="actionBegin"&&e.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var i=this.models.toString().match(/currentView|selectedDate/)||[],r=i[0];e&&i&&!nt(e[r])&&(vi?(this.$emit("update:"+r,e[r]),this.$emit("modelchanged",e[r])):(this.ej2Instances.vueInstance.$emit("update:"+r,e[r]),this.ej2Instances.vueInstance.$emit("modelchanged",e[r])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(a,e,t)},custom:function(){this.updated()},addRecord:function(a,e){return this.ej2Instances.addRecord(a,e)},addShimmerEffect:function(){return this.ej2Instances.addShimmerEffect()},autoFitColumns:function(a,e,t){return this.ej2Instances.autoFitColumns(a,e,t)},batchAsyncUpdate:function(a){return this.ej2Instances.batchAsyncUpdate(a)},batchUpdate:function(a){return this.ej2Instances.batchUpdate(a)},calculatePageSizeByParentHeight:function(a){return this.ej2Instances.calculatePageSizeByParentHeight(a)},changeDataSource:function(a,e){return this.ej2Instances.changeDataSource(a,e)},clearCellSelection:function(){return this.ej2Instances.clearCellSelection()},clearFiltering:function(a){return this.ej2Instances.clearFiltering(a)},clearGrouping:function(){return this.ej2Instances.clearGrouping()},clearRowSelection:function(){return this.ej2Instances.clearRowSelection()},clearSelection:function(){return this.ej2Instances.clearSelection()},clearSorting:function(){return this.ej2Instances.clearSorting()},closeEdit:function(){return this.ej2Instances.closeEdit()},copy:function(a){return this.ej2Instances.copy(a)},csvExport:function(a,e,t,i){return this.ej2Instances.csvExport(a,e,t,i)},dataReady:function(){return this.ej2Instances.dataReady()},deleteRecord:function(a,e){return this.ej2Instances.deleteRecord(a,e)},deleteRow:function(a){return this.ej2Instances.deleteRow(a)},destroyTemplate:function(a,e){return this.ej2Instances.destroyTemplate(a,e)},detailCollapseAll:function(){return this.ej2Instances.detailCollapseAll()},detailExpandAll:function(){return this.ej2Instances.detailExpandAll()},editCell:function(a,e){return this.ej2Instances.editCell(a,e)},enableToolbarItems:function(a,e){return this.ej2Instances.enableToolbarItems(a,e)},endEdit:function(){return this.ej2Instances.endEdit()},excelExport:function(a,e,t,i){return this.ej2Instances.excelExport(a,e,t,i)},extendRequiredModules:function(a){return this.ej2Instances.extendRequiredModules(a)},filterByColumn:function(a,e,t,i,r,n,s,o){return this.ej2Instances.filterByColumn(a,e,t,i,r,n,s,o)},getBatchChanges:function(){return this.ej2Instances.getBatchChanges()},getCellFromIndex:function(a,e){return this.ej2Instances.getCellFromIndex(a,e)},getColumnByField:function(a){return this.ej2Instances.getColumnByField(a)},getColumnByUid:function(a){return this.ej2Instances.getColumnByUid(a)},getColumnFieldNames:function(){return this.ej2Instances.getColumnFieldNames()},getColumnHeaderByField:function(a){return this.ej2Instances.getColumnHeaderByField(a)},getColumnHeaderByIndex:function(a){return this.ej2Instances.getColumnHeaderByIndex(a)},getColumnHeaderByUid:function(a){return this.ej2Instances.getColumnHeaderByUid(a)},getColumnIndexByField:function(a){return this.ej2Instances.getColumnIndexByField(a)},getColumnIndexByUid:function(a){return this.ej2Instances.getColumnIndexByUid(a)},getColumns:function(a){return this.ej2Instances.getColumns(a)},getContent:function(){return this.ej2Instances.getContent()},getContentTable:function(){return this.ej2Instances.getContentTable()},getCurrentViewRecords:function(){return this.ej2Instances.getCurrentViewRecords()},getDataModule:function(){return this.ej2Instances.getDataModule()},getDataRows:function(){return this.ej2Instances.getDataRows()},getFilterUIInfo:function(){return this.ej2Instances.getFilterUIInfo()},getFilteredRecords:function(){return this.ej2Instances.getFilteredRecords()},getFooterContent:function(){return this.ej2Instances.getFooterContent()},getFooterContentTable:function(){return this.ej2Instances.getFooterContentTable()},getForeignKeyColumns:function(){return this.ej2Instances.getForeignKeyColumns()},getFrozenDataRows:function(){return this.ej2Instances.getFrozenDataRows()},getFrozenLeftColumnHeaderByIndex:function(a){return this.ej2Instances.getFrozenLeftColumnHeaderByIndex(a)},getFrozenLeftCount:function(){return this.ej2Instances.getFrozenLeftCount()},getFrozenMode:function(){return this.ej2Instances.getFrozenMode()},getFrozenRightCellFromIndex:function(a,e){return this.ej2Instances.getFrozenRightCellFromIndex(a,e)},getFrozenRightColumnHeaderByIndex:function(a){return this.ej2Instances.getFrozenRightColumnHeaderByIndex(a)},getFrozenRightDataRows:function(){return this.ej2Instances.getFrozenRightDataRows()},getFrozenRightRowByIndex:function(a){return this.ej2Instances.getFrozenRightRowByIndex(a)},getFrozenRightRows:function(){return this.ej2Instances.getFrozenRightRows()},getFrozenRowByIndex:function(a){return this.ej2Instances.getFrozenRowByIndex(a)},getHeaderContent:function(){return this.ej2Instances.getHeaderContent()},getHeaderTable:function(){return this.ej2Instances.getHeaderTable()},getHiddenColumns:function(){return this.ej2Instances.getHiddenColumns()},getMediaColumns:function(){return this.ej2Instances.getMediaColumns()},getMovableCellFromIndex:function(a,e){return this.ej2Instances.getMovableCellFromIndex(a,e)},getMovableColumnHeaderByIndex:function(a){return this.ej2Instances.getMovableColumnHeaderByIndex(a)},getMovableDataRows:function(){return this.ej2Instances.getMovableDataRows()},getMovableRowByIndex:function(a){return this.ej2Instances.getMovableRowByIndex(a)},getMovableRows:function(){return this.ej2Instances.getMovableRows()},getPager:function(){return this.ej2Instances.getPager()},getPrimaryKeyFieldNames:function(){return this.ej2Instances.getPrimaryKeyFieldNames()},getRowByIndex:function(a){return this.ej2Instances.getRowByIndex(a)},getRowIndexByPrimaryKey:function(a){return this.ej2Instances.getRowIndexByPrimaryKey(a)},getRowInfo:function(a){return this.ej2Instances.getRowInfo(a)},getRows:function(){return this.ej2Instances.getRows()},getSelectedColumnsUid:function(){return this.ej2Instances.getSelectedColumnsUid()},getSelectedRecords:function(){return this.ej2Instances.getSelectedRecords()},getSelectedRowCellIndexes:function(){return this.ej2Instances.getSelectedRowCellIndexes()},getSelectedRowIndexes:function(){return this.ej2Instances.getSelectedRowIndexes()},getSelectedRows:function(){return this.ej2Instances.getSelectedRows()},getSummaryValues:function(a,e){return this.ej2Instances.getSummaryValues(a,e)},getUidByColumnField:function(a){return this.ej2Instances.getUidByColumnField(a)},getVisibleColumns:function(){return this.ej2Instances.getVisibleColumns()},goToPage:function(a){return this.ej2Instances.goToPage(a)},groupCollapseAll:function(){return this.ej2Instances.groupCollapseAll()},groupColumn:function(a){return this.ej2Instances.groupColumn(a)},groupExpandAll:function(){return this.ej2Instances.groupExpandAll()},hideColumns:function(a,e){return this.ej2Instances.hideColumns(a,e)},hideScroll:function(){return this.ej2Instances.hideScroll()},hideSpinner:function(){return this.ej2Instances.hideSpinner()},isFrozenGrid:function(){return this.ej2Instances.isFrozenGrid()},openColumnChooser:function(a,e){return this.ej2Instances.openColumnChooser(a,e)},pdfExport:function(a,e,t,i){return this.ej2Instances.pdfExport(a,e,t,i)},print:function(){return this.ej2Instances.print()},refresh:function(){return this.ej2Instances.refresh()},refreshColumns:function(){return this.ej2Instances.refreshColumns()},refreshHeader:function(){return this.ej2Instances.refreshHeader()},removeMaskRow:function(){return this.ej2Instances.removeMaskRow()},reorderColumnByIndex:function(a,e){return this.ej2Instances.reorderColumnByIndex(a,e)},reorderColumnByTargetIndex:function(a,e){return this.ej2Instances.reorderColumnByTargetIndex(a,e)},reorderColumns:function(a,e){return this.ej2Instances.reorderColumns(a,e)},reorderRows:function(a,e){return this.ej2Instances.reorderRows(a,e)},saveCell:function(){return this.ej2Instances.saveCell()},search:function(a){return this.ej2Instances.search(a)},selectCell:function(a,e){return this.ej2Instances.selectCell(a,e)},selectCells:function(a){return this.ej2Instances.selectCells(a)},selectCellsByRange:function(a,e){return this.ej2Instances.selectCellsByRange(a,e)},selectRow:function(a,e){return this.ej2Instances.selectRow(a,e)},selectRows:function(a){return this.ej2Instances.selectRows(a)},selectRowsByRange:function(a,e){return this.ej2Instances.selectRowsByRange(a,e)},serverCsvExport:function(a){return this.ej2Instances.serverCsvExport(a)},serverExcelExport:function(a){return this.ej2Instances.serverExcelExport(a)},serverPdfExport:function(a){return this.ej2Instances.serverPdfExport(a)},setCellValue:function(a,e,t){return this.ej2Instances.setCellValue(a,e,t)},setGridContent:function(a){return this.ej2Instances.setGridContent(a)},setGridContentTable:function(a){return this.ej2Instances.setGridContentTable(a)},setGridHeaderContent:function(a){return this.ej2Instances.setGridHeaderContent(a)},setGridHeaderTable:function(a){return this.ej2Instances.setGridHeaderTable(a)},setGridPager:function(a){return this.ej2Instances.setGridPager(a)},setRowData:function(a,e){return this.ej2Instances.setRowData(a,e)},showAdaptiveFilterDialog:function(){return this.ej2Instances.showAdaptiveFilterDialog()},showAdaptiveSortDialog:function(){return this.ej2Instances.showAdaptiveSortDialog()},showColumns:function(a,e){return this.ej2Instances.showColumns(a,e)},showMaskRow:function(a,e){return this.ej2Instances.showMaskRow(a,e)},showSpinner:function(){return this.ej2Instances.showSpinner()},sortColumn:function(a,e,t){return this.ej2Instances.sortColumn(a,e,t)},startEdit:function(){return this.ej2Instances.startEdit()},ungroupColumn:function(a){return this.ej2Instances.ungroupColumn(a)},updateCell:function(a,e,t){return this.ej2Instances.updateCell(a,e,t)},updateExternalMessage:function(a){return this.ej2Instances.updateExternalMessage(a)},updateRow:function(a,e){return this.ej2Instances.updateRow(a,e)},updateRowValue:function(a,e){return this.ej2Instances.updateRowValue(a,e)}}});Et.Inject(uy);Et.Inject(Fv);Et.Inject(Mv);Et.Inject(oy);Et.Inject(pv);Et.Inject(cy);Et.Inject(tv);Et.Inject(dv);Et.Inject(cv);Et.Inject(Nu);Et.Inject(Pu);Et.Inject($m);const yy=iu({components:{EjsGrid:vy,EColumns:dy,EColumn:fy},data(){return{editSettings:{allowEditing:!1,allowAdding:!0,allowDeleting:!0,mode:"Normal"},filterSettings:{type:"Excel"},pageSettings:{pageSize:21,pageSizes:["21","50"]},sortSettings:{columns:[{field:"id",direction:"Descending"}]}}}});var Cy=Ro;function by(){this.__data__=new Cy,this.size=0}var Sy=by;function wy(a){var e=this.__data__,t=e.delete(a);return this.size=e.size,t}var Iy=wy;function xy(a){return this.__data__.get(a)}var Ey=xy;function Dy(a){return this.__data__.has(a)}var ky=Dy,Ry=Ro,Ay=ru,Ty=nu,My=200;function Fy(a,e){var t=this.__data__;if(t instanceof Ry){var i=t.__data__;if(!Ay||i.length<My-1)return i.push([a,e]),this.size=++t.size,this;t=this.__data__=new Ty(i)}return t.set(a,e),this.size=t.size,this}var Ly=Fy,Oy=Ro,By=Sy,Py=Iy,Ny=Ey,zy=ky,Hy=Ly;function nn(a){var e=this.__data__=new Oy(a);this.size=e.size}nn.prototype.clear=By;nn.prototype.delete=Py;nn.prototype.get=Ny;nn.prototype.has=zy;nn.prototype.set=Hy;var Vy=nn,qy="__lodash_hash_undefined__";function Wy(a){return this.__data__.set(a,qy),this}var jy=Wy;function Uy(a){return this.__data__.has(a)}var Gy=Uy,_y=nu,Ky=jy,Yy=Gy;function Us(a){var e=-1,t=a==null?0:a.length;for(this.__data__=new _y;++e<t;)this.add(a[e])}Us.prototype.add=Us.prototype.push=Ky;Us.prototype.has=Yy;var $y=Us;function Qy(a,e){for(var t=-1,i=a==null?0:a.length;++t<i;)if(e(a[t],t,a))return!0;return!1}var Jy=Qy;function Xy(a,e){return a.has(e)}var Zy=Xy,eC=$y,tC=Jy,iC=Zy,rC=1,nC=2;function sC(a,e,t,i,r,n){var s=t&rC,o=a.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var h=n.get(a),p=n.get(e);if(h&&p)return h==e&&p==a;var c=-1,d=!0,f=t&nC?new eC:void 0;for(n.set(a,e),n.set(e,a);++c<o;){var g=a[c],m=e[c];if(i)var v=s?i(m,g,c,e,a,n):i(g,m,c,a,e,n);if(v!==void 0){if(v)continue;d=!1;break}if(f){if(!tC(e,function(y,w){if(!iC(f,w)&&(g===y||r(g,y,t,i,n)))return f.push(w)})){d=!1;break}}else if(!(g===m||r(g,m,t,i,n))){d=!1;break}}return n.delete(a),n.delete(e),d}var fp=sC,aC=Nn,oC=aC.Uint8Array,lC=oC;function hC(a){var e=-1,t=Array(a.size);return a.forEach(function(i,r){t[++e]=[r,i]}),t}var uC=hC;function pC(a){var e=-1,t=Array(a.size);return a.forEach(function(i){t[++e]=i}),t}var cC=pC,Oh=Hp,Bh=lC,dC=Vp,fC=fp,gC=uC,mC=cC,vC=1,yC=2,CC="[object Boolean]",bC="[object Date]",SC="[object Error]",wC="[object Map]",IC="[object Number]",xC="[object RegExp]",EC="[object Set]",DC="[object String]",kC="[object Symbol]",RC="[object ArrayBuffer]",AC="[object DataView]",Ph=Oh?Oh.prototype:void 0,Ba=Ph?Ph.valueOf:void 0;function TC(a,e,t,i,r,n,s){switch(t){case AC:if(a.byteLength!=e.byteLength||a.byteOffset!=e.byteOffset)return!1;a=a.buffer,e=e.buffer;case RC:return!(a.byteLength!=e.byteLength||!n(new Bh(a),new Bh(e)));case CC:case bC:case IC:return dC(+a,+e);case SC:return a.name==e.name&&a.message==e.message;case xC:case DC:return a==e+"";case wC:var o=gC;case EC:var l=i&vC;if(o||(o=mC),a.size!=e.size&&!l)return!1;var h=s.get(a);if(h)return h==e;i|=yC,s.set(a,e);var p=fC(o(a),o(e),i,r,n,s);return s.delete(a),p;case kC:if(Ba)return Ba.call(a)==Ba.call(e)}return!1}var MC=TC;function FC(a,e){for(var t=-1,i=e.length,r=a.length;++t<i;)a[r+t]=e[t];return a}var LC=FC,OC=LC,BC=su;function PC(a,e,t){var i=e(a);return BC(a)?i:OC(i,t(a))}var NC=PC;function zC(a,e){for(var t=-1,i=a==null?0:a.length,r=0,n=[];++t<i;){var s=a[t];e(s,t,a)&&(n[r++]=s)}return n}var HC=zC;function VC(){return[]}var qC=VC,WC=HC,jC=qC,UC=Object.prototype,GC=UC.propertyIsEnumerable,Nh=Object.getOwnPropertySymbols,_C=Nh?function(a){return a==null?[]:(a=Object(a),WC(Nh(a),function(e){return GC.call(a,e)}))}:jC,KC=_C,YC=NC,$C=KC,QC=Jp;function JC(a){return YC(a,QC,$C)}var XC=JC,zh=XC,ZC=1,eb=Object.prototype,tb=eb.hasOwnProperty;function ib(a,e,t,i,r,n){var s=t&ZC,o=zh(a),l=o.length,h=zh(e),p=h.length;if(l!=p&&!s)return!1;for(var c=l;c--;){var d=o[c];if(!(s?d in e:tb.call(e,d)))return!1}var f=n.get(a),g=n.get(e);if(f&&g)return f==e&&g==a;var m=!0;n.set(a,e),n.set(e,a);for(var v=s;++c<l;){d=o[c];var y=a[d],w=e[d];if(i)var b=s?i(w,y,d,e,a,n):i(y,w,d,a,e,n);if(!(b===void 0?y===w||r(y,w,t,i,n):b)){m=!1;break}v||(v=d=="constructor")}if(m&&!v){var I=a.constructor,k=e.constructor;I!=k&&"constructor"in a&&"constructor"in e&&!(typeof I=="function"&&I instanceof I&&typeof k=="function"&&k instanceof k)&&(m=!1)}return n.delete(a),n.delete(e),m}var rb=ib,nb=Gs,sb=Nn,ab=nb(sb,"DataView"),ob=ab,lb=Gs,hb=Nn,ub=lb(hb,"Promise"),pb=ub,cb=Gs,db=Nn,fb=cb(db,"Set"),gb=fb,mb=Gs,vb=Nn,yb=mb(vb,"WeakMap"),Cb=yb,bo=ob,So=ru,wo=pb,Io=gb,xo=Cb,gp=qp,sn=Wp,Hh="[object Map]",bb="[object Object]",Vh="[object Promise]",qh="[object Set]",Wh="[object WeakMap]",jh="[object DataView]",Sb=sn(bo),wb=sn(So),Ib=sn(wo),xb=sn(Io),Eb=sn(xo),hr=gp;(bo&&hr(new bo(new ArrayBuffer(1)))!=jh||So&&hr(new So)!=Hh||wo&&hr(wo.resolve())!=Vh||Io&&hr(new Io)!=qh||xo&&hr(new xo)!=Wh)&&(hr=function(a){var e=gp(a),t=e==bb?a.constructor:void 0,i=t?sn(t):"";if(i)switch(i){case Sb:return jh;case wb:return Hh;case Ib:return Vh;case xb:return qh;case Eb:return Wh}return e});var Db=hr,Pa=Vy,kb=fp,Rb=MC,Ab=rb,Uh=Db,Gh=su,_h=jp,Tb=Up,Mb=1,Kh="[object Arguments]",Yh="[object Array]",fs="[object Object]",Fb=Object.prototype,$h=Fb.hasOwnProperty;function Lb(a,e,t,i,r,n){var s=Gh(a),o=Gh(e),l=s?Yh:Uh(a),h=o?Yh:Uh(e);l=l==Kh?fs:l,h=h==Kh?fs:h;var p=l==fs,c=h==fs,d=l==h;if(d&&_h(a)){if(!_h(e))return!1;s=!0,p=!1}if(d&&!p)return n||(n=new Pa),s||Tb(a)?kb(a,e,t,i,r,n):Rb(a,e,l,t,i,r,n);if(!(t&Mb)){var f=p&&$h.call(a,"__wrapped__"),g=c&&$h.call(e,"__wrapped__");if(f||g){var m=f?a.value():a,v=g?e.value():e;return n||(n=new Pa),r(m,v,t,i,n)}}return d?(n||(n=new Pa),Ab(a,e,t,i,r,n)):!1}var Ob=Lb,Bb=Ob,Qh=Gp;function mp(a,e,t,i,r){return a===e?!0:a==null||e==null||!Qh(a)&&!Qh(e)?a!==a&&e!==e:Bb(a,e,t,i,mp,r)}var Pb=mp,Nb=Pb;function zb(a,e){return Nb(a,e)}var Hb=zb;const Vb=_p(Hb);function qb(a){return new Promise(e=>setTimeout(()=>{e()},a))}class Wb{constructor(e){if(this.isInitialized=!1,this.heightOffset=350,this.height=Bp("720px"),this.stateVersion=0,!e.id)throw new Error("Component ID is required");this.id=e.id,e.stateVersion&&(this.stateVersion=e.stateVersion),e.heightOffset&&(this.heightOffset=e.heightOffset),this.instance=new Et}init(){if(this.instance=document.getElementById(this.id)?.ej2_instances[0],this.instance===void 0)throw new Error("Grid Component could not be found");this.setHeight(),this.isInitialized=!0,this.onInit()}onInit(){}updateDataSource(e){Vb(this.instance.dataSource,e)||this.isInitialized&&(this.instance.dataSource=[...e])}setHeight(e){typeof e<"u"&&(this.heightOffset=e),this.height.value=screen.height-this.heightOffset+"px"}add(e,t=null){this.isInitialized&&this.instance.addRecord(e,t)}batchAdd(e){this.isInitialized&&(this.instance.dataSource=[...this.instance.dataSource,...e])}update(e){if(!this.isInitialized)return;const t=this.instance.getRowIndexByPrimaryKey(e.id);this.instance.updateRow(t,e)}batchUpdate(e){this.isInitialized&&e.forEach(t=>{this.update(t)})}delete(e,t="id"){this.isInitialized&&this.instance.deleteRecord(t,e)}batchDelete(e,t="id"){this.isInitialized&&e.forEach(i=>{this.delete(i,t)})}selected(){return this.instance.getSelectedRecords()}refresh(e){this.isInitialized&&(this.instance.dataSource=[...e])}getRows(){const e=this.instance.getDataRows(),t=[];return e.forEach(i=>{const r=this.instance.getRowInfo(i).rowData;t.push(r)}),t}showColumns(e){const i=this.instance.columns.filter(r=>{if(!r.visible&&e.includes(r.field))return r.field}).map(r=>r.field);console.log("showColumns: ",i),i.length>0&&this.instance.showColumns(i,"field")}hideColumns(e){const i=this.instance.columns.filter(r=>{if(r.visible&&e.includes(r.field))return r.field}).map(r=>r.field);console.log("hideColumns: ",i),i.length>0&&this.instance.hideColumns(i,"field")}persistState(){window.localStorage.setItem("grid"+this.id,this.instance.getPersistData())}save(){this.isInitialized&&this.instance.endEdit()}recordDoubleClick(e){this.onDoubleClick(e.rowData)}onDoubleClick(e){return e}setFilterLength(e,t){e.requestType==="filterchoicerequest"&&(e.filterChoiceCount=t??this.instance.dataSource.length)}isFiltered(){return console.log(Object.keys(this.instance.filterModule.values)),this.instance.filterModule.value===void 0}showSpinner(){this.instance.showSpinner()}hideSpinner(){this.instance.hideSpinner()}async onLoad(){}getLayout(){return this.instance.getPersistData()}setLayout(e){this.instance.columns=e.columns,this.instance.filterSettings=e.filterSettings}async applyLayout(e){this.setLayout({columns:[...e.settings.columns],filterSettings:e.settings.filterSettings}),this.onLayoutApplied(e).then(async()=>{await qb(500),location.reload()})}async onLayoutApplied(e){}}let jb=class extends Zp{api=Dp;$grid;constructor(){super(),this.$grid=new Wb({id:"NotesGrid",heightOffset:900})}async fetched(e){this.$grid.updateDataSource(e.data)}};const Ub=iu({components:{},mixins:[yy],setup(){return{notes:new jb}},data(){return{}},computed:{height(){return this.$q.screen.height-350+"px"}},created(){this.notes.get()},mounted(){this.notes.$grid.init()},methods:{recordDoubleClick(a){this.$router.push({name:"NotePage",params:{id:a.rowData.id}})}}});function Gb(a,e,t,i,r,n){const s=ji("my-create-button"),o=ji("my-clear-filters-button"),l=ji("my-grid-column-chooser"),h=ji("my-grid-search"),p=ji("my-toolbar"),c=ji("e-column"),d=ji("e-columns"),f=ji("ejs-grid");return Np(),zp(bp,{padding:""},{default:Un(()=>[Mt(p,null,{default:Un(()=>[Mt(s,{tooltip:"Create Note",onClick:e[0]||(e[0]=g=>a.$router.push({name:"NotePage"}))}),Mt(yp,{dark:"",inset:"",vertical:""}),Mt(o,{"grid-id":"NotesGrid"}),Mt(Cp),Mt(l,{"grid-id":"NotesGrid"}),Mt(h,{"grid-id":"NotesGrid"})]),_:1}),Mt(f,{id:"NotesGrid",ref:"grid",allowExcelExport:!0,allowFiltering:!0,allowMultiSorting:!0,allowPaging:!0,allowReordering:!0,allowResizing:!0,allowSorting:!0,clipMode:"EllipsisWithTooltip",dataSource:a.notes.data,editSettings:a.editSettings,enablePersistence:!1,filterSettings:a.filterSettings,height:a.height,pageSettings:a.pageSettings,recordDoubleClick:a.recordDoubleClick,showColumnChooser:!0,sortSettings:a.sortSettings},{default:Un(()=>[Mt(d,null,{default:Un(()=>[Mt(c,{field:"id",headerText:"ID#",isPrimaryKey:"true",type:"number",width:"100"}),Mt(c,{field:"type",headerText:"Type",type:"string",width:"230"}),Mt(c,{field:"meeting_at",format:"dd/MM/yy",headerText:"Meeting Date",type:"date",width:"100"}),Mt(c,{field:"created_at",format:"dd/MM/yy",headerText:"Created At",type:"date",visible:!1,width:"100"}),Mt(c,{field:"updated_at",format:"dd/MM/yy",headerText:"Updated At",type:"date",width:"100"})]),_:1})]),_:1},8,["dataSource","editSettings","filterSettings","height","pageSettings","recordDoubleClick","sortSettings"])]),_:1})}const aS=Pp(Ub,[["render",Gb]]);export{aS as default};
