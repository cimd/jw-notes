import{b as i}from"./index-BtKb8wT8.js";import"./isTypedArray-3TB5rZnQ.js";import{h as a,b as n,c as u}from"./http-CAOryOOa.js";class g{constructor(t){this.urls={login:"login",logout:"logout",forgotPassword:"users/forgot-password",resetPassword:"users/reset-password"},t?.login&&(this.urls.login=t.login),t?.logout&&(this.urls.logout=t.logout),t?.forgotPassword&&(this.urls.forgotPassword=t.forgotPassword),t?.resetPassword&&(this.urls.resetPassword=t.resetPassword)}get token(){return localStorage.getItem("sanctum_token")}set token(t){localStorage.setItem("sanctum_token",t)}login(t){return new Promise((e,s)=>{a.get("/api/csrf-cookie").then(()=>{const r=`${n}/${this.urls.login}`;a.post(r,t).then(o=>{this.token=o.data.token,a.defaults.headers.common.Authorization=`Bearer ${this.token}`,this.loggedIn(o.data),e(o.data)}).catch(o=>{console.error(o),s(o)})}).catch(r=>{console.error(r),this.loginError(r),s(r)})})}loggedIn(t){}loginError(t){}isAuthenticated(){return localStorage.getItem("sanctum_token")!==null}logout(){const t=`${n}/${this.urls.logout}`;return new Promise((e,s)=>{a.post(t).then(r=>{localStorage.removeItem("sanctum_token"),this.loggedOut(r.data),e(r.data)}).catch(r=>{console.error(r),this.logoutError(r),s(r)})})}loggedOut(t){}logoutError(t){}forgotPassword(t){const e=`${n}/${this.urls.forgotPassword}`;return new Promise((s,r)=>{a.post(e,{email:t}).then(o=>{s(o.data)}).catch(o=>{console.error(o),r(o)})})}resetPassword(t){const e=`${n}/${this.urls.resetPassword}`;return new Promise((s,r)=>{a.post(e,t).then(o=>{this.token=o.data.token,a.defaults.headers.common.Authorization=`Bearer ${this.token}`,this.loggedIn(o.data),s(o.data)}).catch(o=>{console.error(o),r(o)})})}}const h=new g,d=u({baseURL:"https://jw-api.daquino.io",apiPrefix:"api/v1",bearerToken:h.token}),P=i(({app:l})=>{l.config.globalProperties.$http=d});export{h as auth,P as default,d as http};
