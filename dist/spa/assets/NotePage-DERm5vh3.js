import{Q as Lh}from"./QSpace-BHKl-E7w.js";import{Q as wh}from"./QForm-CeXXneY4.js";import{Q as kh}from"./QPage-CW88zJPQ.js";import"./isTypedArray-V6sIBVz1.js";import{M as Dh}from"./Api-DXgXXLek.js";import{r as jr}from"./index-BBPnM2xW.js";import{T as ln,d as tr,a as zr,s as Ur,h as pi,P as At,B as En,i as Is,N as Mt,I as Vr,V as xh,H as Nh,e as Oh,o as Mh,C as Xl,j as Hs,D as Bh,R as _r,g as Fs,m as Rh,v as Ah,n as Ph,k as di,l as Ih}from"./NoteApi-D_NlhKrY.js";import{u as Hh}from"./Auth-BgP8Y6hw.js";import{a0 as Fh,q as qh,ac as jh,d as Yl,ad as zh,_ as Uh,r as Wt,o as Vh,c as _h,u as Wr,K as Nt,J as ui}from"./index-CPXBor41.js";import{P as v,C as ee,L as Ir,j as b,i as h,t as z,I as Wh,d as k,c as O,b as Ce,E as C,h as U,S as Lt,a4 as qs,B as x,M as E,y as Ln,G as se,H as P,N as Vt,z as Ri,g as ir,X as rt,s as js,w as F,f as it,K as hn,a5 as wi,A as Ne,Z as Qh,Q as re,x as Di,e as _e,a6 as Kh,a7 as Tr,Y as zs,k as ii,$ as jt,W as Xe,n as B,T as Gh,V as Ot,U as $l,a8 as Xh,q as Na,O as Yh,_ as $h,v as Oa}from"./sanitize-helper-B-wurFwY.js";import"./focus-manager-BJWzFvJg.js";import"./render-D-1utwwR.js";import"./vm-B61G6sTM.js";import"./Action-BeMcUDL_.js";import"./index-kbbxJ5lx.js";import"./http-CAOryOOa.js";var wn=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),K=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Jh=function(a){wn(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return K([v("None")],t.prototype,"placement",void 0),K([v(10)],t.prototype,"largeStep",void 0),K([v(1)],t.prototype,"smallStep",void 0),K([v(!1)],t.prototype,"showSmallTicks",void 0),K([v(null)],t.prototype,"format",void 0),t}(ee),Zh=function(a){wn(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return K([v(null)],t.prototype,"color",void 0),K([v(null)],t.prototype,"start",void 0),K([v(null)],t.prototype,"end",void 0),t}(ee),ec=function(a){wn(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return K([v(!1)],t.prototype,"enabled",void 0),K([v(null)],t.prototype,"minStart",void 0),K([v(null)],t.prototype,"minEnd",void 0),K([v(null)],t.prototype,"maxStart",void 0),K([v(null)],t.prototype,"maxEnd",void 0),K([v(!1)],t.prototype,"startHandleFixed",void 0),K([v(!1)],t.prototype,"endHandleFixed",void 0),t}(ee),tc=function(a){wn(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return K([v("")],t.prototype,"cssClass",void 0),K([v("Before")],t.prototype,"placement",void 0),K([v("Focus")],t.prototype,"showOn",void 0),K([v(!1)],t.prototype,"isVisible",void 0),K([v(null)],t.prototype,"format",void 0),t}(ee),ic=6,nc=3,D={root:"e-slider",rtl:"e-rtl",sliderHiddenInput:"e-slider-input",controlWrapper:"e-control-wrapper",sliderHandle:"e-handle",rangeBar:"e-range",sliderButton:"e-slider-button",firstButton:"e-first-button",secondButton:"e-second-button",scale:"e-scale",tick:"e-tick",large:"e-large",tickValue:"e-tick-value",sliderTooltip:"e-slider-tooltip",sliderHover:"e-slider-hover",sliderFirstHandle:"e-handle-first",sliderSecondHandle:"e-handle-second",sliderDisabled:"e-disabled",sliderContainer:"e-slider-container",horizontalTooltipBefore:"e-slider-horizontal-before",horizontalTooltipAfter:"e-slider-horizontal-after",verticalTooltipBefore:"e-slider-vertical-before",verticalTooltipAfter:"e-slider-vertical-after",materialTooltip:"e-material-tooltip",materialTooltipOpen:"e-material-tooltip-open",materialTooltipActive:"e-tooltip-active",materialSlider:"e-material-slider",sliderTrack:"e-slider-track",sliderHorizantalColor:"e-slider-horizantal-color",sliderVerticalColor:"e-slider-vertical-color",sliderHandleFocused:"e-handle-focused",verticalSlider:"e-vertical",horizontalSlider:"e-horizontal",sliderHandleStart:"e-handle-start",sliderTooltipStart:"e-material-tooltip-start",sliderTabHandle:"e-tab-handle",sliderButtonIcon:"e-button-icon",sliderSmallSize:"e-small-size",sliderTickPosition:"e-tick-pos",sliderFirstTick:"e-first-tick",sliderLastTick:"e-last-tick",sliderButtonClass:"e-slider-btn",sliderTooltipWrapper:"e-tooltip-wrap",sliderTabTrack:"e-tab-track",sliderTabRange:"e-tab-range",sliderActiveHandle:"e-handle-active",sliderMaterialHandle:"e-material-handle",sliderMaterialRange:"e-material-range",sliderMaterialDefault:"e-material-default",materialTooltipShow:"e-material-tooltip-show",materialTooltipHide:"e-material-tooltip-hide",readonly:"e-read-only",limits:"e-limits",limitBarDefault:"e-limit-bar",limitBarFirst:"e-limit-first",limitBarSecond:"e-limit-second",dragHorizontal:"e-drag-horizontal",dragVertical:"e-drag-vertical"},Ma=function(a){wn(t,a);function t(e,i){var n=a.call(this,e,i)||this;return n.horDir="left",n.verDir="bottom",n.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},n.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},n.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",n.customAriaText=null,n.drag=!0,n.isDragComplete=!1,n.initialTooltip=!0,n}return t.prototype.preRender=function(){var e={incrementTitle:"Increase",decrementTitle:"Decrease"};this.l10n=new Ir("slider",e,this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},t.prototype.formChecker=function(){var e=b(this.element,"form");e?(this.isForm=!0,h(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,this.type==="Range"&&(h(this.formResetValue)||typeof this.formResetValue!="object")?this.formResetValue=[parseFloat(z(this.min)),parseFloat(z(this.max))]:h(this.formResetValue)&&(this.formResetValue=parseFloat(z(this.min))),this.formElement=e):this.isForm=!1},t.prototype.initCultureFunc=function(){this.internationalization=new Wh(this.locale)},t.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=h(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=h(this.ticks.format)?null:this.ticks.format},t.prototype.formatString=function(e,i){var n=null,r=null;if(e||e===0){n=this.formatNumber(e);var s=this.numberOfDecimals(e);r=this.internationalization.getNumberFormat(i)(this.makeRoundNumber(e,s))}return{elementVal:n,formatString:r}},t.prototype.formatNumber=function(e){var i=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:i,minimumFractionDigits:i,useGrouping:!1})(e)},t.prototype.numberOfDecimals=function(e){var i=e.toString().split(".")[1],n=!i||!i.length?0:i.length;return n},t.prototype.makeRoundNumber=function(e,i){var n=i||0;return Number(e.toFixed(n))},t.prototype.fractionalToInteger=function(e){e=this.numberOfDecimals(e)===0?Number(e).toFixed(this.noOfDecimals):e;for(var i=1,n=0;n<this.noOfDecimals;n++)i*=10;return e=Number((e*i).toFixed(0)),e},t.prototype.render=function(){var e=this;this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),this.element.tagName==="EJS-SLIDER"&&this.getTheme(this.sliderContainer)==="none"&&setTimeout(function(){e.refresh()},0)},t.prototype.initialize=function(){k([this.element],D.root),this.setCSSClass()},t.prototype.setElementWidth=function(e){!h(e)&&!h(this.sliderContainer)&&(typeof e=="number"?this.sliderContainer.style.width=z(e):typeof e=="string"&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:z(e)))},t.prototype.setCSSClass=function(e){e&&O([this.element],e.split(" ")),this.cssClass&&k([this.element],this.cssClass.split(" "))},t.prototype.setEnabled=function(){this.enabled?(O([this.sliderContainer],[D.sliderDisabled]),this.tooltip.isVisible&&this.tooltipElement&&this.tooltip.showOn==="Always"&&this.tooltipElement.classList.remove(D.sliderDisabled),this.wireEvents()):(k([this.sliderContainer],[D.sliderDisabled]),this.tooltip.isVisible&&this.tooltipElement&&this.tooltip.showOn==="Always"&&this.tooltipElement.classList.add(D.sliderDisabled),this.unwireEvents())},t.prototype.getTheme=function(e){var i=window.getComputedStyle(e,":after").getPropertyValue("content");return i.replace(/['"]+/g,"")},t.prototype.initRender=function(){this.sliderContainer=this.createElement("div",{className:D.sliderContainer+" "+D.controlWrapper}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:D.sliderTrack}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:h(this.value)?h(this.min)?"0":this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(Math.random()*1e3).toFixed(0)+"slider",class:D.sliderHiddenInput}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),this.type==="Range"?this.rangeValueUpdate():this.value=h(this.value)?h(this.min)?0:parseFloat(z(this.min.toString())):this.value,this.previousVal=this.type!=="Range"?this.checkHandleValue(parseFloat(z(this.value.toString()))):[this.checkHandleValue(parseFloat(z(this.value[0].toString()))),this.checkHandleValue(parseFloat(z(this.value[1].toString())))],this.previousChanged=this.previousVal,h(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),this.ticks.placement!=="None"&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?O([this.sliderContainer],[D.sliderDisabled]):k([this.sliderContainer],[D.sliderDisabled]),this.readonly?k([this.sliderContainer],[D.readonly]):O([this.sliderContainer],[D.readonly])},t.prototype.getThemeInitialization=function(){this.isMaterial=this.getTheme(this.sliderContainer)==="material"||this.getTheme(this.sliderContainer)==="material-dark",this.isMaterial3=this.getTheme(this.sliderContainer)==="Material3"||this.getTheme(this.sliderContainer)==="Material3-dark",this.isBootstrap=this.getTheme(this.sliderContainer)==="bootstrap"||this.getTheme(this.sliderContainer)==="bootstrap-dark",this.isBootstrap4=this.getTheme(this.sliderContainer)==="bootstrap4",this.isTailwind=this.getTheme(this.sliderContainer)==="tailwind"||this.getTheme(this.sliderContainer)==="tailwind-dark",this.isBootstrap5=this.getTheme(this.sliderContainer)==="bootstrap5",this.isFluent=this.getTheme(this.sliderContainer)==="FluentUI",this.isFluent2=this.getTheme(this.sliderContainer)==="fluent2",this.isMaterialTooltip=(this.isMaterial||this.isMaterial3)&&this.type!=="Range"&&this.tooltip.isVisible},t.prototype.createRangeBar=function(){this.type!=="Default"&&(this.rangeBar=this.createElement("div",{attrs:{class:D.rangeBar}}),this.element.appendChild(this.rangeBar),this.drag&&this.type==="Range"&&(this.orientation==="Horizontal"?this.rangeBar.classList.add(D.dragHorizontal):this.rangeBar.classList.add(D.dragVertical)))},t.prototype.createLimitBar=function(){var e=this.type!=="Range"?D.limitBarDefault:D.limitBarFirst;e+=" "+D.limits,this.limitBarFirst=this.createElement("div",{attrs:{class:e}}),this.element.appendChild(this.limitBarFirst),this.type==="Range"&&(this.limitBarSecond=this.createElement("div",{attrs:{class:D.limitBarSecond+" "+D.limits}}),this.element.appendChild(this.limitBarSecond))},t.prototype.setOrientClass=function(){this.orientation!=="Vertical"?(this.sliderContainer.classList.remove(D.verticalSlider),this.sliderContainer.classList.add(D.horizontalSlider),this.firstHandle.setAttribute("aria-orientation","horizontal"),this.type==="Range"&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove(D.horizontalSlider),this.sliderContainer.classList.add(D.verticalSlider),this.firstHandle.setAttribute("aria-orientation","vertical"),this.type==="Range"&&this.secondHandle.setAttribute("aria-orientation","vertical"))},t.prototype.setAriaAttributes=function(e){var i=this,n=this.min,r=this.max;if(!h(this.customValues)&&this.customValues.length>0&&(n=this.customValues[0],r=this.customValues[this.customValues.length-1]),this.type!=="Range")Ce(e,{"aria-valuemin":h(n)?"0":n.toString(),"aria-valuemax":h(r)?"100":r.toString()});else{var s=!h(this.customValues)&&this.customValues.length>0?[[n.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),r.toString()]]:[[n.toString(),this.value[1].toString()],[this.value[0].toString(),r.toString()]];s.forEach(function(o,l){var c=l===0?i.firstHandle:i.secondHandle;c&&Ce(c,{"aria-valuemin":o[0],"aria-valuemax":o[1]})})}},t.prototype.createSecondHandle=function(){this.secondHandle=this.createElement("div",{attrs:{class:D.sliderHandle,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.secondHandle.classList.add(D.sliderSecondHandle),this.element.appendChild(this.secondHandle)},t.prototype.createFirstHandle=function(){this.firstHandle=this.createElement("div",{attrs:{class:D.sliderHandle,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.firstHandle.classList.add(D.sliderFirstHandle),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:D.sliderHandle+" "+D.sliderMaterialHandle}}),this.element.appendChild(this.materialHandle))},t.prototype.wireFirstHandleEvt=function(e){e?(C.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),C.remove(this.firstHandle,"transitionend",this.transitionEnd),C.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),C.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(C.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),C.add(this.firstHandle,"transitionend",this.transitionEnd,this),C.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),C.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.wireSecondHandleEvt=function(e){e?(C.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),C.remove(this.secondHandle,"transitionend",this.transitionEnd),C.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),C.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(C.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),C.add(this.secondHandle,"transitionend",this.transitionEnd,this),C.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),C.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.handleStart=function(){this.type!=="Range"&&(this.firstHandle.classList[this.handlePos1===0?"add":"remove"](D.sliderHandleStart),this.isMaterialTooltip&&(this.materialHandle.classList[this.handlePos1===0?"add":"remove"](D.sliderHandleStart),this.tooltipElement&&this.tooltipElement.classList[this.handlePos1===0?"add":"remove"](D.sliderTooltipStart)))},t.prototype.transitionEnd=function(e){e.propertyName!=="transform"&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),this.type!=="Default"&&(this.rangeBar.style.transition="none"),(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible&&this.type==="Default"&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},t.prototype.handleFocusOut=function(){this.firstHandle.classList.contains(D.sliderHandleFocused)&&this.firstHandle.classList.remove(D.sliderHandleFocused),this.type==="Range"&&this.secondHandle.classList.contains(D.sliderHandleFocused)&&this.secondHandle.classList.remove(D.sliderHandleFocused)},t.prototype.handleFocus=function(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?(this.firstHandle.classList.add(D.sliderHandleFocused),this.firstHandle.classList.add(D.sliderTabHandle)):(this.secondHandle.classList.add(D.sliderHandleFocused),this.secondHandle.classList.add(D.sliderTabHandle)),C.add(document,"mousemove touchmove",this.sliderBarMove,this),C.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.handleOver=function(e){this.tooltip.isVisible&&this.tooltip.showOn==="Hover"&&this.tooltipToggle(e.currentTarget),this.type==="Default"&&this.tooltipToggle(this.getHandle())},t.prototype.handleLeave=function(e){this.tooltip.isVisible&&this.tooltip.showOn==="Hover"&&!e.currentTarget.classList.contains(D.sliderHandleFocused)&&!e.currentTarget.classList.contains(D.sliderTabHandle)&&this.closeTooltip()},t.prototype.setHandler=function(){this.createFirstHandle(),this.type==="Range"&&this.createSecondHandle()},t.prototype.setEnableRTL=function(){this.enableRtl&&this.orientation!=="Vertical"?k([this.sliderContainer],D.rtl):O([this.sliderContainer],D.rtl);var e=this.orientation!=="Vertical"?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom");var i=this.orientation!=="Vertical"?this.horDir:this.verDir;e!==i&&this.orientation==="Horizontal"&&(U(this.firstHandle,{right:"",left:"auto"}),this.type==="Range"&&U(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()},t.prototype.tooltipValue=function(){var e=this,i,n={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),n.text=i=typeof this.tooltipObj.content=="function"?this.tooltipObj.content():this.tooltipObj.content,this.trigger("tooltipChange",n,function(r){if(e.addTooltipClass(r.text),i!==r.text){e.customAriaText=r.text,e.enableHtmlSanitizer?r.text=Lt.sanitize(r.text.toString()):r.text=r.text.toString();var s=function(){return r.text};e.tooltipObj.content=qs(s),e.setAriaAttrValue(e.firstHandle),e.type==="Range"&&e.setAriaAttrValue(e.secondHandle)}}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},t.prototype.setTooltipContent=function(){var e=this.formatContent(this.tooltipFormatInfo,!1),i=function(){return e};this.tooltipObj.content=qs(i)},t.prototype.formatContent=function(e,i){var n="",r=this.handleVal1,s=this.handleVal2;return!h(this.customValues)&&this.customValues.length>0&&(r=this.customValues[this.handleVal1],s=this.customValues[this.handleVal2]),i?(this.type==="Range"?this.enableRtl&&this.orientation!=="Vertical"?n=!h(this.tooltip)&&!h(this.tooltip.format)?this.formatString(s,e).elementVal+" - "+this.formatString(r,e).elementVal:s.toString()+" - "+r.toString():n=!h(this.tooltip)&&!h(this.tooltip.format)?this.formatString(r,e).elementVal+" - "+this.formatString(s,e).elementVal:r.toString()+" - "+s.toString():h(r)||(n=!h(this.tooltip)&&!h(this.tooltip.format)?this.formatString(r,e).elementVal:r.toString()),n):(this.type==="Range"?this.enableRtl&&this.orientation!=="Vertical"?n=h(e.format)?s.toString()+" - "+r.toString():this.formatString(s,e).formatString+" - "+this.formatString(r,e).formatString:n=h(e.format)?r.toString()+" - "+s.toString():this.formatString(r,e).formatString+" - "+this.formatString(s,e).formatString:h(r)||(n=h(e.format)?r.toString():this.formatString(r,e).formatString),n)},t.prototype.addTooltipClass=function(e){if(this.isMaterialTooltip){var i=e.toString().length;if(this.tooltipElement){var n=i>4?{oldCss:D.sliderMaterialDefault,newCss:D.sliderMaterialRange}:{oldCss:D.sliderMaterialRange,newCss:D.sliderMaterialDefault};this.tooltipElement.classList.remove(n.oldCss),this.tooltipElement.classList.contains(n.newCss)||(this.tooltipElement.classList.add(n.newCss),this.tooltipElement.style.transform=i>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else{var n=i>4?D.sliderMaterialRange:D.sliderMaterialDefault;this.tooltipObj.cssClass=D.sliderTooltip+" "+n}}},t.prototype.tooltipPlacement=function(){return this.orientation==="Horizontal"?this.tooltip.placement==="Before"?"TopCenter":"BottomCenter":this.tooltip.placement==="Before"?"LeftCenter":"RightCenter"},t.prototype.tooltipBeforeOpen=function(e){this.tooltipElement=e.element,this.tooltip.cssClass&&k([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(i){return i})),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add(D.materialTooltipHide),this.handleStart(),this.setTooltipTransform())},t.prototype.tooltipCollision=function(e){if(this.isBootstrap||this.isBootstrap4||(this.isMaterial||this.isMaterial3)&&!this.isMaterialTooltip){var i=this.isBootstrap4?nc:ic;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-i},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:i},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-i},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:i},!1);break}}},t.prototype.materialTooltipEventCallBack=function(e){this.sliderBarClick(e),C.add(document,"mousemove touchmove",this.sliderBarMove,this),C.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.wireMaterialTooltipEvent=function(e){this.isMaterialTooltip&&(e?C.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):C.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},t.prototype.tooltipPositionCalculation=function(e){var i;switch(e){case"TopCenter":i=D.horizontalTooltipBefore;break;case"BottomCenter":i=D.horizontalTooltipAfter;break;case"LeftCenter":i=D.verticalTooltipBefore;break;case"RightCenter":i=D.verticalTooltipAfter;break}return i},t.prototype.getTooltipTransformProperties=function(e){var i;if(this.tooltipElement){var n=this.orientation==="Horizontal"?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;i=this.orientation==="Horizontal"?e===D.horizontalTooltipBefore?{rotate:"rotate(45deg)",translate:"translateY("+n+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-n+"px)"}:e===D.verticalTooltipBefore?{rotate:"rotate(-45deg)",translate:"translateX("+n+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-n+"px)"}}return i},t.prototype.openMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var i=this.tooltipElement.firstElementChild;i.classList.remove(D.materialTooltipHide),i.classList.add(D.materialTooltipShow),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add(D.materialTooltipOpen),this.materialHandle.style.transform="scale(0)",i.innerText.length>4?this.tooltipElement.style.transform="scale(1)":this.tooltipElement.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate,this.type==="Default"?setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition=e.transition.handle)},2500):setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition="none")},2500)}},t.prototype.closeMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){var i=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,i.classList.remove(D.materialTooltipShow),i.classList.add(D.materialTooltipHide),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove(D.materialTooltipOpen),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition="none")},2500)}},t.prototype.checkTooltipPosition=function(e){var i=this.tooltipPositionCalculation(e.collidedPosition);(this.tooltipCollidedPosition===void 0||this.tooltipCollidedPosition!==e.collidedPosition||!e.element.classList.contains(i))&&(this.isMaterialTooltip&&(i!==void 0&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(i),this.previousTooltipClass=i),e.element.style.transform&&e.element.classList.contains(D.materialTooltipOpen)&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=e.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&this.tooltipElement.style.transform.indexOf("translate")!==-1&&this.setTooltipTransform()},t.prototype.setTooltipTransform=function(){var e=this.getTooltipTransformProperties(this.previousTooltipClass);h(this.tooltipElement)||(this.tooltipElement.firstElementChild.innerText.length>4?this.tooltipElement.style.transform=e.translate+" scale(0.01)":this.tooltipElement.style.transform=e.translate+" "+e.rotate+" scale(0.01)")},t.prototype.renderTooltip=function(){this.tooltipObj=new ln({showTipPointer:this.isBootstrap||this.isMaterial||this.isMaterial3||this.isBootstrap4||this.isTailwind||this.isBootstrap5||this.isFluent||this.isFluent2,cssClass:D.sliderTooltip,height:this.isMaterial||this.isMaterial3?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},t.prototype.initializeTooltipProps=function(){var e=this.tooltip.showOn==="Auto"?"Hover":this.tooltip.showOn;this.setProperties({tooltip:{showOn:e}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(i){h(i)||(i.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add(D.materialSlider),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},t.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},t.prototype.setButtons=function(){this.firstBtn=this.createElement("div",{className:D.sliderButton+" "+D.firstButton}),this.firstBtn.appendChild(this.createElement("span",{className:D.sliderButtonIcon})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:D.sliderButton+" "+D.secondButton}),this.secondBtn.appendChild(this.createElement("span",{className:D.sliderButtonIcon})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add(D.sliderButtonClass),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()},t.prototype.buttonTitle=function(){var e=this.enableRtl&&this.orientation!=="Vertical";this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("decrementTitle"),n=this.l10n.getConstant("incrementTitle");Ce(e?this.secondBtn:this.firstBtn,{"aria-label":i,title:i}),Ce(e?this.firstBtn:this.secondBtn,{"aria-label":n,title:n})},t.prototype.buttonFocusOut=function(){(this.isMaterial||this.isMaterial3)&&this.getHandle().classList.remove("e-large-thumb-size")},t.prototype.repeatButton=function(e){var i=this.handleValueUpdate(),n=this.enableRtl&&this.orientation!=="Vertical",r;e.target.parentElement.classList.contains(D.firstButton)||e.target.classList.contains(D.firstButton)?n?r=this.add(i,parseFloat(this.step.toString()),!0):r=this.add(i,parseFloat(this.step.toString()),!1):(e.target.parentElement.classList.contains(D.secondButton)||e.target.classList.contains(D.secondButton))&&(n?r=this.add(i,parseFloat(this.step.toString()),!1):r=this.add(i,parseFloat(this.step.toString()),!0)),this.limits.enabled&&(r=this.getLimitCorrectedValues(r)),r>=this.min&&r<=this.max&&(this.changeHandleValue(r),this.tooltipToggle(this.getHandle()))},t.prototype.repeatHandlerMouse=function(e){e.preventDefault(),(e.type==="mousedown"||e.type==="touchstart")&&(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))},t.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},t.prototype.focusHandle=function(){this.getHandle().classList.contains(D.sliderTabHandle)||this.getHandle().classList.add(D.sliderTabHandle)},t.prototype.repeatHandlerUp=function(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},t.prototype.customTickCounter=function(e){var i=4;return!h(this.customValues)&&this.customValues.length>0&&(e>4&&(i=3),e>7&&(i=2),e>14&&(i=1),e>28&&(i=0)),i},t.prototype.renderScale=function(){var e=this.orientation==="Vertical"?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:D.scale+" e-"+e+"-scale "+D.tick+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",x.isAndroid&&e==="h"&&this.ul.classList.add(D.sliderTickPosition);var i=this.ticks.smallStep;this.ticks.showSmallTicks?i<=0&&(i=parseFloat(z(this.step))):this.ticks.largeStep>0?i=this.ticks.largeStep:i=parseFloat(z(this.max))-parseFloat(z(this.min));var n=this.fractionalToInteger(this.min),r=this.fractionalToInteger(this.max),s=this.fractionalToInteger(i),o=!h(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,l=this.customTickCounter(o),c=!h(this.customValues)&&this.customValues.length>0?o*l+o:Math.abs((r-n)/s);this.element.appendChild(this.ul);var p,d=parseFloat(this.min.toString());e==="v"&&(d=parseFloat(this.max.toString()));var u=0,m,f=100/c;f===1/0&&(f=5);for(var g=0,y=!h(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,S=0;g<=c;g++){if(p=this.createElement("li",{attrs:{class:D.tick,role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!h(this.customValues)&&this.customValues.length>0)m=g%(l+1)===0,m&&(e==="h"?(d=this.customValues[S],S++):(d=this.customValues[y],y--),p.setAttribute("title",d.toString()));else if(p.setAttribute("title",d.toString()),this.numberOfDecimals(this.max)===0&&this.numberOfDecimals(this.min)===0&&this.numberOfDecimals(this.step)===0)e==="h"?m=(d-parseFloat(this.min.toString()))%this.ticks.largeStep===0:m=Math.abs(d-parseFloat(this.max.toString()))%this.ticks.largeStep===0;else{var T=this.fractionalToInteger(this.ticks.largeStep),L=this.fractionalToInteger(d);e==="h"?m=(L-n)%T===0:m=Math.abs(L-parseFloat(r.toString()))%T===0}m&&p.classList.add(D.large),e==="h"?p.style.width=f+"%":p.style.height=f+"%";var w=m?this.ticks.placement==="Both"?2:1:0;if(m)for(var N=0;N<w;N++)this.createTick(p,d,f);else h(this.customValues)&&this.formatTicksValue(p,d);this.ul.appendChild(p),this.tickElementCollection.push(p);var M=void 0;h(this.customValues)&&(this.numberOfDecimals(i)>this.numberOfDecimals(d)?M=this.numberOfDecimals(i):M=this.numberOfDecimals(d),e==="h"?d=this.makeRoundNumber(d+i,M):this.min>this.max?d=this.makeRoundNumber(d+i,M):d=this.makeRoundNumber(d-i,M),u=this.makeRoundNumber(u+i,M))}this.ticksAlignment(e,f)},t.prototype.ticksAlignment=function(e,i,n){n===void 0&&(n=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add(D.sliderFirstTick),this.lastChild.classList.add(D.sliderLastTick),this.sliderContainer.classList.add(D.scale+"-"+this.ticks.placement.toLowerCase()),e==="h"?(this.firstChild.style.width=i/2+"%",this.lastChild.style.width=i/2+"%"):(this.firstChild.style.height=i/2+"%",this.lastChild.style.height=i/2+"%");var r={ticksWrapper:this.ul,tickElements:this.tickElementCollection};n&&this.trigger("renderedTicks",r),this.scaleAlignment()},t.prototype.createTick=function(e,i,n){var r=this.createElement("span",{className:D.tickValue+" "+D.tick+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});e.appendChild(r),h(this.customValues)?this.formatTicksValue(e,i,r):this.enableHtmlSanitizer?r.innerHTML=Lt.sanitize(i.toString()):r.innerHTML=i.toString()},t.prototype.formatTicksValue=function(e,i,n){var r=this,s=this.formatNumber(i),o=!h(this.ticks)&&!h(this.ticks.format)?this.formatString(i,this.ticksFormatInfo).formatString:s,l={value:i,text:o,tickElement:e};this.trigger("renderingTicks",l,function(c){e.setAttribute("title",c.text.toString()),n&&(r.enableHtmlSanitizer?n.innerHTML=Lt.sanitize(c.text.toString()):n.innerHTML=c.text.toString())})},t.prototype.scaleAlignment=function(){this.tickValuePosition(),this.orientation==="Vertical"?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add(D.sliderSmallSize):this.sliderContainer.classList.remove(D.sliderSmallSize):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add(D.sliderSmallSize):this.sliderContainer.classList.remove(D.sliderSmallSize)},t.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e=this.firstChild.getBoundingClientRect(),i,n,r=this.ticks.smallStep,s=Math.abs(parseFloat(z(this.max))-parseFloat(z(this.min)))/r;this.firstChild.children.length>0&&(i=this.firstChild.children[0].getBoundingClientRect());var o=[this.sliderContainer.querySelectorAll("."+D.tick+"."+D.large+" ."+D.tickValue)],l;this.ticks.placement==="Both"?l=[].slice.call(o[0],2):l=[].slice.call(o[0],1);for(var c=this.orientation==="Vertical"?e.height*2:e.width*2,p=0;p<this.firstChild.children.length;p++)this.orientation==="Vertical"?this.firstChild.children[p].style.top=-(i.height/2)+"px":this.enableRtl?this.firstChild.children[p].style.left=(c-this.firstChild.children[p].getBoundingClientRect().width)/2+"px":this.firstChild.children[p].style.left=-(i.width/2)+"px";for(var p=0;p<l.length;p++)n=l[p].getBoundingClientRect(),this.orientation==="Vertical"?U(l[p],{top:(c-n.height)/2+"px"}):U(l[p],{left:(c-n.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&s!==0&&(this.lastChild.children[0].style.left=-(this.lastChild.getBoundingClientRect().width/2)+"px",this.ticks.placement==="Both"&&(this.lastChild.children[1].style.left=-(this.lastChild.getBoundingClientRect().width/2)+"px")),s===0&&(this.orientation==="Horizontal"&&(this.enableRtl?(this.firstChild.classList.remove(D.sliderLastTick),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px",this.ticks.placement==="Both"&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove(D.sliderLastTick),this.firstChild.style.left=this.firstHandle.style.left)),this.orientation==="Vertical"&&this.firstChild.classList.remove(D.sliderLastTick))},t.prototype.setAriaAttrValue=function(e){var i,n=!h(this.ticks)&&!h(this.ticks.format),r=n?this.formatContent(this.tooltipFormatInfo,!1):this.formatContent(this.ticksFormatInfo,!1),s=n?this.formatContent(this.ticksFormatInfo,!0):this.formatContent(this.tooltipFormatInfo,!0);r=this.customAriaText?this.customAriaText:r,r.split(" - ").length===2?i=r.split(" - "):i=[r,r],this.setAriaAttributes(e),this.type!=="Range"?Ce(e,{"aria-valuenow":s,"aria-valuetext":r}):this.enableRtl?e===this.firstHandle?Ce(e,{"aria-valuenow":s.split(" - ")[1],"aria-valuetext":i[1]}):Ce(e,{"aria-valuenow":s.split(" - ")[0],"aria-valuetext":i[0]}):e===this.firstHandle?Ce(e,{"aria-valuenow":s.split(" - ")[0],"aria-valuetext":i[0]}):Ce(e,{"aria-valuenow":s.split(" - ")[1],"aria-valuetext":i[1]})},t.prototype.handleValueUpdate=function(){var e;return this.type==="Range"?this.activeHandle===1?e=this.handleVal1:e=this.handleVal2:e=this.handleVal1,e},t.prototype.getLimitCorrectedValues=function(e){return this.type==="MinRange"||this.type==="Default"?e=this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.activeHandle===1?e=this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:e=this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0],e},t.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},t.prototype.buttonClick=function(e){this.focusSliderElement();var i,n=this.enableRtl&&this.orientation!=="Vertical",r=this.handleValueUpdate();e.keyCode===40||e.keyCode===37||e.currentTarget.classList.contains(D.firstButton)?n?i=this.add(r,parseFloat(this.step.toString()),!0):i=this.add(r,parseFloat(this.step.toString()),!1):e.keyCode===38||e.keyCode===39||e.currentTarget.classList.contains(D.secondButton)?n?i=this.add(r,parseFloat(this.step.toString()),!1):i=this.add(r,parseFloat(this.step.toString()),!0):e.keyCode===33||e.currentTarget.classList.contains(D.firstButton)?n?i=this.add(r,parseFloat(this.ticks.largeStep.toString()),!1):i=this.add(r,parseFloat(this.ticks.largeStep.toString()),!0):e.keyCode===34||e.currentTarget.classList.contains(D.secondButton)?n?i=this.add(r,parseFloat(this.ticks.largeStep.toString()),!0):i=this.add(r,parseFloat(this.ticks.largeStep.toString()),!1):e.keyCode===36?i=parseFloat(this.min<this.max?this.min.toString():this.max.toString()):e.keyCode===35&&(i=parseFloat(this.min<this.max?this.max.toString():this.min.toString())),this.limits.enabled&&(i=this.getLimitCorrectedValues(i)),this.changeHandleValue(i),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains(D.sliderTabHandle)&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),e.currentTarget.classList.contains(D.firstButton)&&C.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains(D.secondButton)&&C.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},t.prototype.tooltipToggle=function(e){this.isMaterialTooltip?this.tooltipElement.classList.contains(D.materialTooltipOpen)?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)},t.prototype.buttonUp=function(e){e.currentTarget.classList.contains(D.firstButton)&&C.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains(D.secondButton)&&C.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},t.prototype.setRangeBar=function(){this.orientation==="Horizontal"&&!h(this.rangeBar)?this.type==="MinRange"?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",U(this.rangeBar,{width:h(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",U(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):h(this.rangeBar)||(this.type==="MinRange"?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",U(this.rangeBar,{height:h(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",U(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"})))},t.prototype.checkValidValueAndPos=function(e){return e=this.checkHandleValue(e),e=this.checkHandlePosition(e),e},t.prototype.setLimitBarPositions=function(e,i,n,r){this.orientation==="Horizontal"?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=i-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=i-e+"px"):(this.limitBarFirst.style.bottom=(this.min<this.max?e:i)+"px",this.limitBarFirst.style.height=(this.min<this.max?i-e:e-i)+"px"),this.type==="Range"&&(this.orientation==="Horizontal"?this.enableRtl?(this.limitBarSecond.style.right=n+"px",this.limitBarSecond.style.width=r-n+"px"):(this.limitBarSecond.style.left=n+"px",this.limitBarSecond.style.width=r-n+"px"):(this.limitBarSecond.style.bottom=(this.min<this.max?n:r)+"px",this.limitBarSecond.style.height=(this.min<this.max?r-n:n-r)+"px"))},t.prototype.setLimitBar=function(){if(this.type==="Default"||this.type==="MinRange"){var e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);var i=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i),this.setLimitBarPositions(e,i)}else if(this.type==="Range"){var n=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var r=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];r=this.checkValidValueAndPos(r);var s=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];s=this.checkValidValueAndPos(s);var o=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o),this.setLimitBarPositions(n,r,s,o)}},t.prototype.getLimitValueAndPosition=function(e,i,n,r){return h(i)&&(i=this.min<this.max?this.min:this.max,h(e)&&r&&(e=i)),h(n)&&(n=this.min<this.max?this.max:this.min,h(e)&&r&&(e=n)),e<i&&(e=i),e>n&&(e=n),[e,this.checkHandlePosition(e)]},t.prototype.setValue=function(){if(!h(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=h(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,h(this.activeHandle)&&(this.activeHandle=this.type==="Range"?2:1),this.type==="Default"||this.type==="MinRange"){if(this.limits.enabled){var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();this.type!=="Default"&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},t.prototype.rangeValueUpdate=function(){(this.value===null||typeof this.value!="object")&&(this.value=[parseFloat(z(this.min)),parseFloat(z(this.max))])},t.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},t.prototype.modifyZindex=function(){this.type==="Range"&&!h(this.firstHandle)&&!h(this.secondHandle)?this.activeHandle===1?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+""):this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=tr(this.element)+"")},t.prototype.setHandlePosition=function(e){var i=this,n,r=this.activeHandle===1?this.handlePos1:this.handlePos2;this.isMaterialTooltip?n=[this.firstHandle,this.materialHandle]:n=[this.getHandle()],this.handleStart(),n.forEach(function(s){h(s)||(i.orientation==="Horizontal"?i.enableRtl?s.style.right=r+"px":s.style.left=r+"px":s.style.bottom=r+"px")}),this.changeEvent("change",e)},t.prototype.getHandle=function(){return this.activeHandle===1?this.firstHandle:this.secondHandle},t.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},t.prototype.changeEvent=function(e,i){var n=e==="change"?this.previousVal:this.previousChanged;if(this.type!=="Range")this.setProperties({value:this.handleVal1},!0),n!==this.value&&(!this.isMaterialTooltip||!this.initialTooltip)&&(this.trigger(e,this.changeEventArgs(e,i)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{var r=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:r},!0),(n.length===this.value.length&&this.value[0]!==n[0]||this.value[1]!==n[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,i)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},t.prototype.changeEventArgs=function(e,i){var n;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),n={value:this.value,previousValue:e==="change"?this.previousVal:this.previousChanged,action:e,text:typeof this.tooltipObj.content=="function"?this.tooltipObj.content():this.tooltipObj.content,isInteracted:!h(i)}):n={value:this.value,previousValue:e==="change"?this.previousVal:this.previousChanged,action:e,text:h(this.ticksFormatInfo.format)?this.value.toString():this.type!=="Range"?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!h(i)},n},t.prototype.setPreviousVal=function(e,i){e==="change"?this.previousVal=i:this.previousChanged=i},t.prototype.updateRangeValue=function(){var e=this.value.toString().split(",").map(Number);if(this.enableRtl&&this.orientation!=="Vertical"||this.rtl?this.value=[e[1],e[0]]:this.value=[e[0],e[1]],this.enableRtl&&this.orientation!=="Vertical"?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.min<this.max&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.min>this.max&&this.handlePos1<this.handlePos2&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var i=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=i[0],this.handlePos1=i[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,i=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=i[0],this.handlePos2=i[1],this.preHandlePos2=this.handlePos2}},t.prototype.checkHandlePosition=function(e){var i;return e=100*(e-parseFloat(z(this.min)))/(parseFloat(z(this.max))-parseFloat(z(this.min))),this.orientation==="Horizontal"?i=this.element.getBoundingClientRect().width*(e/100):i=this.element.getBoundingClientRect().height*(e/100),parseFloat(z(this.max))===parseFloat(z(this.min))&&(this.orientation==="Horizontal"?i=this.element.getBoundingClientRect().width:i=this.element.getBoundingClientRect().height),i},t.prototype.checkHandleValue=function(e){if(this.min===this.max)return parseFloat(z(this.max));var i=this.tempStartEnd();return e<i.start?e=i.start:e>i.end&&(e=i.end),e},t.prototype.reposition=function(){var e=this;h(this.firstHandle)||(this.firstHandle.style.transition="none"),this.type!=="Default"&&!h(this.rangeBar)&&(this.rangeBar.style.transition="none"),this.type==="Range"&&!h(this.secondHandle)&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),this.orientation==="Horizontal"?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&!h(this.materialHandle)&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),this.type==="MinRange"&&!h(this.rangeBar)?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",U(this.rangeBar,{width:h(this.handlePos1)?0:this.handlePos1+"px"})):this.type==="Range"&&!h(this.secondHandle)&&!h(this.rangeBar)&&(this.enableRtl?(this.secondHandle.style.right=this.handlePos2+"px",this.rangeBar.style.right=this.handlePos1+"px"):(this.secondHandle.style.left=this.handlePos2+"px",this.rangeBar.style.left=this.handlePos1+"px"),U(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),this.type==="MinRange"?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",U(this.rangeBar,{height:h(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):this.type==="Range"&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",U(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),this.ticks.placement!=="None"&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){h(e.firstHandle)||(e.firstHandle.style.transition=e.scaleTransform),e.type==="Range"&&!h(e.secondHandle)&&(e.secondHandle.style.transition=e.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()},t.prototype.changeHandleValue=function(e){var i=null;this.activeHandle===1?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.type==="Range"&&(this.handlePos1>this.handlePos2&&this.min<this.max||this.handlePos1<this.handlePos2&&this.min>this.max)&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(i=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.type==="Range"&&(this.handlePos2<this.handlePos1&&this.min<this.max||this.handlePos2>this.handlePos1&&this.min>this.max)&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(i=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),i!==null&&(this.type!=="Default"&&this.setRangeBar(),this.setHandlePosition(null))},t.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},t.prototype.xyToPosition=function(e){var i;if(this.min===this.max)return 100;if(this.orientation==="Horizontal"){var n=e.x-this.element.getBoundingClientRect().left,r=this.element.offsetWidth/100;this.val=n/r}else{var s=e.y-this.element.getBoundingClientRect().top,r=this.element.offsetHeight/100;this.val=100-s/r}var o=this.stepValueCalculation(this.val);return o<0?o=0:o>100&&(o=100),this.enableRtl&&this.orientation!=="Vertical"&&(o=100-o),this.orientation==="Horizontal"?i=this.element.getBoundingClientRect().width*(o/100):i=this.element.getBoundingClientRect().height*(o/100),i},t.prototype.stepValueCalculation=function(e){this.step===0&&(this.step=1);var i=parseFloat(z(this.step))/((parseFloat(z(this.max))-parseFloat(z(this.min)))/100),n=e%Math.abs(i);return n!==0&&(i/2>n?e-=n:e+=Math.abs(i)-n),e},t.prototype.add=function(e,i,n){var r=Math.pow(10,3),s;return n?s=(Math.round(e*r)+Math.round(i*r))/r:s=(Math.round(e*r)-Math.round(i*r))/r,s},t.prototype.positionToValue=function(e){var i,n=parseFloat(z(this.max))-parseFloat(z(this.min));this.orientation==="Horizontal"?i=e/this.element.getBoundingClientRect().width*n:i=e/this.element.getBoundingClientRect().height*n;var r=this.add(i,parseFloat(this.min.toString()),!0);return r},t.prototype.sliderBarClick=function(e){e.preventDefault();var i;e.type==="mousedown"||e.type==="mouseup"||e.type==="click"?i={x:e.clientX,y:e.clientY}:(e.type==="touchend"||e.type==="touchstart")&&(i={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var n=this.xyToPosition(i),r=this.positionToValue(n);if(this.type==="Range"&&(this.min<this.max&&this.handlePos2-n<n-this.handlePos1||this.min>this.max&&this.handlePos1-n>n-this.handlePos2)){if(this.activeHandle=2,!(this.limits.enabled&&this.limits.endHandleFixed)){if(this.limits.enabled){var s=this.getLimitValueAndPosition(r,this.limits.maxStart,this.limits.maxEnd);r=s[0],n=s[1]}this.secondHandle.classList.add(D.sliderActiveHandle),this.handlePos2=this.preHandlePos2=n,this.handleVal2=r}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!(this.limits.enabled&&this.limits.startHandleFixed)){if(this.limits.enabled){var s=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd);r=s[0],n=s[1]}this.firstHandle.classList.add(D.sliderActiveHandle),this.handlePos1=this.preHandlePos1=n,this.handleVal1=r}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add(D.materialTooltipActive);var o=this.element.querySelector("."+D.sliderTabHandle);o&&this.getHandle()!==o&&o.classList.remove(D.sliderTabHandle);var l=this.activeHandle===1?this.firstHandle:this.secondHandle,c;if((e.type==="click"||e.type==="mousedown")&&e.target===l){var p=e.clientX,d=e.clientY;c=document.elementFromPoint(p,d)}if(e.target===l&&c!==l){(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains(D.sliderTabHandle)&&this.materialChange(),this.sliderBarUp(e),this.tooltipToggle(this.getHandle());return}if(this.checkRepeatedValue(r)){var u=(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=u.handle,this.type!=="Default"&&(this.rangeBar.style.transition=u.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),e.target!==l&&this.changeEvent("changed",e),this.type!=="Default"&&this.setRangeBar()}},t.prototype.handleValueAdjust=function(e,i,n){n===1?(this.handleVal1=i,this.handleVal2=this.handleVal1+this.minDiff):n===2&&(this.handleVal2=i,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},t.prototype.dragRangeBarMove=function(e){var i,n;e.type!=="touchmove"&&e.preventDefault(),this.rangeBarDragged=!0;var r;this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none";var s,o;if(e.type==="mousemove"?(i=[e.clientX,e.clientY],s=i[0],o=i[1]):(n=[e.changedTouches[0].clientX,e.changedTouches[0].clientY],s=n[0],o=n[1]),!(this.limits.enabled&&this.limits.startHandleFixed)&&!(this.limits.enabled&&this.limits.endHandleFixed)){if(this.enableRtl?r={x:s+this.secondPartRemain,y:o+this.secondPartRemain}:r={x:s-this.firstPartRemain,y:o+this.secondPartRemain},this.min>this.max?(this.handlePos2=this.xyToPosition(r),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(r),this.handleVal1=this.positionToValue(this.handlePos1)),this.enableRtl?r={x:s-this.firstPartRemain,y:o-this.firstPartRemain}:r={x:s+this.secondPartRemain,y:o-this.firstPartRemain},this.min>this.max?(this.handlePos1=this.xyToPosition(r),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(r),this.handleVal2=this.positionToValue(this.handlePos2)),this.limits.enabled){var l=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=l[0],this.handlePos1=l[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),l=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=l[0],this.handlePos2=l[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===(this.min>this.max?this.min:this.max)&&this.handleValueAdjust(this.handleVal2,this.min>this.max?this.min:this.max,2),this.handleVal1===(this.min>this.max?this.max:this.min)&&this.handleValueAdjust(this.handleVal1,this.min>this.max?this.max:this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()},t.prototype.sliderBarUp=function(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove(D.sliderActiveHandle),this.type==="Range"&&(this.initialTooltip=!1,this.secondHandle.classList.remove(D.sliderActiveHandle)),this.closeTooltip(),(this.isMaterial||this.isMaterial3)&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove(D.materialTooltipActive)),C.remove(document,"mousemove touchmove",this.sliderBarMove),C.remove(document,"mouseup touchend",this.sliderBarUp)},t.prototype.sliderBarMove=function(e){e.type!=="touchmove"&&e.preventDefault();var i;e.type==="mousemove"?i={x:e.clientX,y:e.clientY}:i={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};var n=this.xyToPosition(i),r=this.positionToValue(n);if(n=Math.round(n),this.type!=="Range"&&this.activeHandle===1){if(!(this.limits.enabled&&this.limits.startHandleFixed)){if(this.limits.enabled){var s=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd);n=s[1],r=s[0]}this.handlePos1=n,this.handleVal1=r}this.firstHandle.classList.add(D.sliderActiveHandle)}if(this.type==="Range"){if(this.activeHandle===1){if(this.firstHandle.classList.add(D.sliderActiveHandle),!(this.limits.enabled&&this.limits.startHandleFixed)&&((this.min<this.max&&n>this.handlePos2||this.min>this.max&&n<this.handlePos2)&&(n=this.handlePos2,r=this.handleVal2),n!==this.preHandlePos1)){if(this.limits.enabled){var o=this.getLimitValueAndPosition(r,this.limits.minStart,this.limits.minEnd);r=o[0],n=o[1]}this.handlePos1=this.preHandlePos1=n,this.handleVal1=r,this.activeHandle=1}}else if(this.activeHandle===2&&(this.secondHandle.classList.add(D.sliderActiveHandle),!(this.limits.enabled&&this.limits.endHandleFixed)&&((this.min<this.max&&n<this.handlePos1||this.min>this.max&&n>this.handlePos1)&&(n=this.handlePos1,r=this.handleVal1),n!==this.preHandlePos2))){if(this.limits.enabled){var o=this.getLimitValueAndPosition(r,this.limits.maxStart,this.limits.maxEnd);r=o[0],n=o[1]}this.handlePos2=this.preHandlePos2=n,this.handleVal2=r,this.activeHandle=2}}this.checkRepeatedValue(r)&&(this.getHandle().style.transition=this.scaleTransform,this.type!=="Default"&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains(D.sliderTabHandle)&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.type!=="Default"&&this.setRangeBar())},t.prototype.dragRangeBarUp=function(e){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),C.remove(document,"mousemove touchmove",this.dragRangeBarMove),C.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},t.prototype.checkRepeatedValue=function(e){if(this.type==="Range"){var i=this.enableRtl&&this.orientation!=="Vertical"?this.activeHandle===1?this.previousVal[1]:this.previousVal[0]:this.activeHandle===1?this.previousVal[0]:this.previousVal[1];if(e===i)return 0}else if(e===this.previousVal)return 0;return 1},t.prototype.refreshTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))},t.prototype.openTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)},t.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&this.tooltip.showOn!=="Always"&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},t.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e);break}},t.prototype.wireButtonEvt=function(e){e?(C.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),C.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),C.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),C.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),C.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),C.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),C.remove(this.firstBtn,"focusout",this.sliderFocusOut),C.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(C.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),C.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),C.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),C.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),C.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),C.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),C.add(this.firstBtn,"focusout",this.sliderFocusOut,this),C.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},t.prototype.rangeBarMousedown=function(e){var i,n;if(e.preventDefault(),this.focusSliderElement(),this.type==="Range"&&this.drag&&e.target===this.rangeBar){var r=void 0,s=void 0;e.type==="mousedown"?(i=[e.clientX,e.clientY],r=i[0],s=i[1]):e.type==="touchstart"&&(n=[e.changedTouches[0].clientX,e.changedTouches[0].clientY],r=n[0],s=n[1]),this.orientation==="Horizontal"?(this.firstPartRemain=r-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-r):(this.firstPartRemain=s-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-s),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var o=this.element.querySelector("."+D.sliderTabHandle);o&&o.classList.remove(D.sliderTabHandle),C.add(document,"mousemove touchmove",this.dragRangeBarMove,this),C.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},t.prototype.elementClick=function(e){if(this.isDragComplete){this.isDragComplete=!1;return}e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e),this.focusHandle()},t.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(C.add(this.element,"click",this.elementClick,this),this.type==="Range"&&this.drag&&C.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),C.add(this.sliderContainer,"keydown",this.keyDown,this),C.add(this.sliderContainer,"keyup",this.keyUp,this),C.add(this.element,"focusout",this.sliderFocusOut,this),C.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),this.type==="Range"&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&C.add(this.formElement,"reset",this.formResetHandler,this))},t.prototype.unwireEvents=function(){C.remove(this.element,"click",this.elementClick),this.type==="Range"&&this.drag&&C.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),C.remove(this.sliderContainer,"keydown",this.keyDown),C.remove(this.sliderContainer,"keyup",this.keyUp),C.remove(this.element,"focusout",this.sliderFocusOut),C.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),this.type==="Range"&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),C.remove(this.element,"reset",this.formResetHandler)},t.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},t.prototype.keyUp=function(e){if(e.keyCode===9&&e.target.classList.contains(D.sliderHandle)&&(this.focusSliderElement(),!e.target.classList.contains(D.sliderTabHandle))){this.element.querySelector("."+D.sliderTabHandle)&&this.element.querySelector("."+D.sliderTabHandle).classList.remove(D.sliderTabHandle),e.target.classList.add(D.sliderTabHandle);var i=e.target.parentElement;if(i===this.element&&(i.querySelector("."+D.sliderTrack).classList.add(D.sliderTabTrack),(this.type==="Range"||this.type==="MinRange")&&i.querySelector("."+D.rangeBar).classList.add(D.sliderTabRange)),this.type==="Range"){var n=e.target.previousSibling;n&&n.classList.contains(D.sliderHandle)?this.activeHandle=2:this.activeHandle=1}this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)},t.prototype.hover=function(e){if(!h(e))if(e.type==="mouseover"||e.type==="touchmove"||e.type==="mousemove"||e.type==="pointermove"||e.type==="touchstart")this.sliderContainer.classList.add(D.sliderHover);else{this.sliderContainer.classList.remove(D.sliderHover);var i=e.currentTarget;this.tooltip.isVisible&&this.tooltip.showOn!=="Always"&&this.tooltipObj&&this.isMaterialTooltip&&!i.classList.contains(D.sliderHandleFocused)&&!i.classList.contains(D.sliderTabHandle)&&this.closeMaterialTooltip()}},t.prototype.sliderFocusOut=function(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector("."+D.sliderTabHandle)&&this.element.querySelector("."+D.sliderTabHandle).classList.remove(D.sliderTabHandle),this.element.querySelector("."+D.sliderTabTrack)&&(this.element.querySelector("."+D.sliderTabTrack).classList.remove(D.sliderTabTrack),(this.type==="Range"||this.type==="MinRange")&&this.element.querySelector("."+D.sliderTabRange)&&this.element.querySelector("."+D.sliderTabRange).classList.remove(D.sliderTabRange)),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},t.prototype.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.prototype.changeSliderType=function(e,i){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove(D.materialSlider),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,e!=="Default"&&(e==="Range"&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!h(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&(e==="MinRange"||e==="Default"?h(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):h(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),this.type==="Range"&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),this.type==="Range"&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),i!=="tooltip"&&this.updateConfig(),this.readonly&&(this.sliderContainer.classList.remove(D.readonly),this.setReadOnly())},t.prototype.changeRtl=function(){if(!this.enableRtl&&this.type==="Range"&&(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var e=this.enableRtl&&this.orientation!=="Vertical";Ce(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),Ce(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},t.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},t.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),this.ticks.placement!=="None"&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},t.prototype.limitsPropertyChange=function(){this.limits.enabled?(h(this.limitBarFirst)&&this.type!=="Range"&&this.createLimitBar(),h(this.limitBarFirst)&&h(this.limitBarSecond)&&this.type==="Range"&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(h(this.limitBarFirst)||E(this.limitBarFirst),h(this.limitBarSecond)||E(this.limitBarSecond))},t.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},t.prototype.destroy=function(){a.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),O([this.sliderContainer],[D.sliderDisabled]),this.firstHandle.removeAttribute("aria-orientation"),this.type==="Range"&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode&&this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),E(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML="",this.hiddenInput=null,this.sliderContainer=null,this.sliderTrack=null,this.rangeBar=null,this.firstHandle=null,this.secondHandle=null,this.tickElementCollection=null,this.ul=null,this.firstBtn=null,this.secondBtn=null,this.materialHandle=null,this.tooltipObj=null,this.tooltipTarget=null,this.limitBarFirst=null,this.limitBarSecond=null,this.firstChild=null,this.lastChild=null,this.tooltipElement=null},t.prototype.onPropertyChanged=function(e,i){for(var n=this,r=0,s=Object.keys(e);r<s.length;r++){var o=s[r];switch(o){case"cssClass":this.setCSSClass(i.cssClass);break;case"value":if(e&&i){var l=h(e.value)?this.type==="Range"?[this.min,this.max]:this.min:e.value;this.setProperties({value:l},!0),!h(i.value)&&i.value.toString()!==l.toString()&&(this.setValue(),this.refreshTooltip(this.tooltipTarget),this.type==="Range"&&(h(e.value)||i.value[1]===l[1]?this.activeHandle=1:this.activeHandle=2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":!h(e.tooltip)&&!h(i.tooltip)&&(this.initialTooltip=!0,this.setTooltip(o),this.showButtons||this.wireEvents());break;case"type":!h(i)&&Object.keys(i).length&&!h(i.type)&&(this.changeSliderType(i.type,o),this.setZindex());break;case"enableRtl":i.enableRtl!==e.enableRtl&&this.orientation!=="Vertical"&&(this.rtl=i.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":h(this.sliderContainer.querySelector("."+D.scale))||(E(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(c){c.match(/e-scale-/)&&n.sliderContainer.classList.remove(c)})),this.ticks.placement!=="None"&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove(D.sliderButtonClass),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange();break}}},t.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add(D.readonly)):(this.wireEvents(),this.sliderContainer.classList.remove(D.readonly))},t.prototype.setMinMaxValue=function(){var e=this;this.setValue(),this.refreshTooltip(this.tooltipTarget),h(this.sliderContainer.querySelector("."+D.scale))||this.ul&&(E(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(i){i.match(/e-scale-/)&&e.sliderContainer.classList.remove(i)})),this.ticks.placement!=="None"&&(this.renderScale(),this.setZindex())},t.prototype.setZindex=function(){this.zIndex=6,!h(this.ticks)&&this.ticks.placement!=="None"&&!h(this.ul)&&!h(this.element)&&(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),!this.isMaterial&&!this.isMaterial3&&!h(this.ticks)&&this.ticks.placement==="Both"&&(this.element.style.zIndex=this.zIndex+2+""),h(this.firstHandle)||(this.firstHandle.style.zIndex=this.zIndex+3+""),this.type==="Range"&&!h(this.secondHandle)&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},t.prototype.setTooltip=function(e){this.changeSliderType(this.type,e)},t.prototype.setBarColor=function(){for(var e,i,n=this.sliderTrack.lastElementChild;n;)this.sliderTrack.removeChild(n),n=this.sliderTrack.lastElementChild;for(var r=0;r<this.colorRange.length;r++)if(!h(this.colorRange[r].start)&&!h(this.colorRange[r].end)&&this.colorRange[r].end>this.colorRange[r].start){this.colorRange[r].start<this.min&&(this.colorRange[r].start=this.min),this.colorRange[r].end>this.max&&(this.colorRange[r].end=this.max);var s=this.checkHandlePosition(this.colorRange[r].start),o=this.checkHandlePosition(this.colorRange[r].end),l=this.createElement("div");l.style.backgroundColor=this.colorRange[r].color,l.style.border="1px solid "+this.colorRange[r].color,this.orientation==="Horizontal"?(i=D.sliderHorizantalColor,this.enableRtl?h(this.customValues)?e=this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[r].end):e=this.checkHandlePosition(this.customValues.length-this.colorRange[r].end-1):e=this.checkHandlePosition(this.colorRange[r].start),l.style.width=o-s+"px",l.style.left=e+"px"):(i=D.sliderVerticalColor,e=this.checkHandlePosition(this.colorRange[r].start),l.style.height=o-s+"px",l.style.bottom=e+"px"),l.classList.add(i),this.sliderTrack.appendChild(l)}},t.prototype.getModuleName=function(){return"slider"},K([v(null)],t.prototype,"value",void 0),K([v(null)],t.prototype,"customValues",void 0),K([v(1)],t.prototype,"step",void 0),K([v(null)],t.prototype,"width",void 0),K([v(0)],t.prototype,"min",void 0),K([v(100)],t.prototype,"max",void 0),K([v(!1)],t.prototype,"readonly",void 0),K([v("Default")],t.prototype,"type",void 0),K([Ln([{}],Zh)],t.prototype,"colorRange",void 0),K([se({},Jh)],t.prototype,"ticks",void 0),K([se({},ec)],t.prototype,"limits",void 0),K([v(!0)],t.prototype,"enabled",void 0),K([se({},tc)],t.prototype,"tooltip",void 0),K([v(!1)],t.prototype,"showButtons",void 0),K([v(!0)],t.prototype,"enableAnimation",void 0),K([v("Horizontal")],t.prototype,"orientation",void 0),K([v("")],t.prototype,"cssClass",void 0),K([v(!0)],t.prototype,"enableHtmlSanitizer",void 0),K([P()],t.prototype,"created",void 0),K([P()],t.prototype,"change",void 0),K([P()],t.prototype,"changed",void 0),K([P()],t.prototype,"renderingTicks",void 0),K([P()],t.prototype,"renderedTicks",void 0),K([P()],t.prototype,"tooltipChange",void 0),t=K([Vt],t),t}(Ri),Hr=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),_=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},rc="e-upload e-control-wrapper",Ba="e-file-select",Qr="e-file-drop",sc="e-file-select-wrap",Ra="e-upload-files",xn="e-upload-file-list",ye="e-file-status",oc="e-upload-actions",ac="e-file-upload-btn e-css e-btn e-flat e-primary",lc="e-file-clear-btn e-css e-btn e-flat",Aa="e-file-name",Pa="e-file-type",Ia="e-file-size",De="e-file-remove-btn",Ye="e-file-delete-btn",Ha="e-spinner-pane",ge="e-file-abort-btn",dt="e-file-reload-btn",Kr="e-upload-drag-hover",Qt="e-upload-progress-wrap",Nn="e-upload-progress-bar",Gr="e-progress-bar-text",$e="e-upload-progress",ot="e-upload-success",Je="e-upload-fails",Xr="e-file-container",Fa="e-validation-fails",qa="e-rtl",Yr="e-disabled",ja="e-rtl-container",$r="e-clear-icon-focus",hc="e-progress-inner-wrap",Pe="e-file-pause-btn",Kt="e-file-play-btn",Ai="e-restrict-retry",za=["title","style","class"],Ua="e-form-upload",cc="e-hidden-file-input",fi="e-file-invalid",pc="e-file-information",dc=function(a){Hr(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return _([v("")],t.prototype,"name",void 0),_([v(null)],t.prototype,"size",void 0),_([v("")],t.prototype,"type",void 0),t}(ee),uc=function(a){Hr(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return _([v("Browse...")],t.prototype,"browse",void 0),_([v("Upload")],t.prototype,"upload",void 0),_([v("Clear")],t.prototype,"clear",void 0),t}(ee),fc=function(a){Hr(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return _([v("")],t.prototype,"saveUrl",void 0),_([v("")],t.prototype,"removeUrl",void 0),_([v(0)],t.prototype,"chunkSize",void 0),_([v(3)],t.prototype,"retryCount",void 0),_([v(500)],t.prototype,"retryAfterDelay",void 0),t}(ee),Us=function(a){Hr(t,a);function t(e,i){var n=a.call(this,e,i)||this;return n.initialAttr={accept:null,multiple:!1,disabled:!1},n.uploadedFilesData=[],n.base64String=[],n.isForm=!1,n.allTypes=!1,n.pausedData=[],n.uploadMetaData=[],n.tabIndex="0",n.btnTabIndex="0",n.disableKeyboardNavigation=!1,n.count=-1,n.actionCompleteCount=0,n.flag=!0,n.selectedFiles=[],n.uploaderName="UploadFiles",n.fileStreams=[],n.newFileRef=0,n.isFirstFileOnSelection=!1,n.dragCounter=0,n.fileList=[],n.filesData=[],n.uploaderOptions=e,n}return t.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++){var s=r[n];switch(s){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=h(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=h(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=h(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":this.isReact?this.reRenderFileList():this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":this.clearAll();break;case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=ir("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(i.cssClass);break}}},t.prototype.setLocalizedTexts=function(){h(this.template)&&(typeof this.buttons.browse=="string"&&(this.browseButton.innerText=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!h(this.uploadWrapper.querySelector("."+Qr))&&(this.uploadWrapper.querySelector("."+Qr).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},t.prototype.getKeyValue=function(e){for(var i,n=0,r=Object.keys(this.preLocaleObj);n<r.length;n++){var s=r[n];this.preLocaleObj[""+s]===e&&(i=s)}return i},t.prototype.updateFileList=function(){var e;if(this.fileList.length>0&&!h(this.uploadWrapper.querySelector("."+Ra)))for(var i=0;i<this.fileList.length;i++)e=this.fileList[i].querySelector(".e-file-status"),e.innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[i].status)),this.filesData[i].status=this.localizedTexts(this.getKeyValue(this.filesData[i].status)),this.fileList[i].classList.contains(ot)&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[i].querySelector(".e-file-play-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[i].querySelector(".e-file-remove-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[i].querySelector(".e-file-reload-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText=this.buttons.upload==="Upload"?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText=this.buttons.clear==="Clear"?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},t.prototype.reRenderFileList=function(){this.listParent&&(E(this.listParent),this.listParent=null,this.fileList=[],this.internalCreateFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},t.prototype.preRender=function(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",invalidFileName:"File Name is not allowed",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new Ir("uploader",this.localeText,this.locale),this.preLocaleObj=ir("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var e=ir("ej2_instances",this.element);if(this.element.tagName==="EJS-UPLOADER"){var i=this.createElement("input",{attrs:{type:"file"}}),n=0;for(n;n<this.element.attributes.length;n++)this.element.attributes[n].nodeName!=="id"?i.setAttribute(this.element.attributes[n].nodeName,this.element.attributes[n].nodeValue):this.element.attributes[n].nodeName==="id"&&i.setAttribute(this.element.attributes[n].nodeName,rt("uploader")),i.innerHTML=this.element.innerHTML;i.hasAttribute("name")||i.setAttribute("name","UploadFiles"),this.element.appendChild(i),this.element=i,js("ej2_instances",e,this.element)}e[0].isPureReactComponent&&(h(e[0].props.name)?!h(e[0].props.id)&&h(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),h(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=x.info.name,this.uploaderName=this.element.getAttribute("name")},t.prototype.formRendered=function(){var e=b(this.element,"form");if(!h(e))for(;e&&e!==document.documentElement;e=e.parentElement)e.tagName==="FORM"&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},t.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},t.prototype.getModuleName=function(){return"uploader"},t.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},t.prototype.render=function(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()},t.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),typeof this.buttons.browse=="string"?(this.browseButton.textContent=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},t.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:oc}),this.uploadButton=this.createElement("button",{className:ac,attrs:{type:"button",tabindex:this.btnTabIndex,"aria-label":this.localizedTexts("Upload")}}),this.clearButton=this.createElement("button",{className:lc,attrs:{type:"button",tabindex:this.btnTabIndex,"aria-label":this.localizedTexts("Clear")}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()},t.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},t.prototype.wireActionButtonEvents=function(){C.add(this.uploadButton,"click",this.uploadButtonClick,this),C.add(this.clearButton,"click",this.clearButtonClick,this)},t.prototype.unwireActionButtonEvents=function(){C.remove(this.uploadButton,"click",this.uploadButtonClick),C.remove(this.clearButton,"click",this.clearButtonClick)},t.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),E(this.actionButtons),this.actionButtons=null)},t.prototype.renderButtonTemplates=function(){if(typeof this.buttons.browse=="string"?(this.browseButton.textContent=this.buttons.browse==="Browse..."?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e=h(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=e,typeof this.buttons.upload=="string"?(this.uploadButton.textContent=this.buttons.upload==="Upload"?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var i=h(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=i,typeof this.buttons.clear=="string"?(this.clearButton.textContent=this.buttons.clear==="Clear"?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},t.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var e=this.createElement("span",{className:Ba});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:sc}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:rc}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},t.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length){this.internalCreateFileList(this.filesData);return}if(h(this.files[0].size))return;this.isPreloadFiles=!0;var e=[].slice.call(this.files),i=[];this.multiple||(this.clearData(),e=[e[0]]);for(var n=0,r=e;n<r.length;n++){var s=r[n],o={name:s.name+"."+s.type.split(".")[s.type.split(".").length-1],rawFile:"",size:s.size,status:this.localizedTexts("uploadSuccessMessage"),type:s.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};i.push(o),this.filesData.push(o)}this.internalCreateFileList(i),!this.autoUpload&&this.listParent&&!this.actionButtons&&(!this.isForm||this.allowUpload())&&this.showFileList&&this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}},t.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll("."+Fa).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+ot).length+this.uploadWrapper.querySelectorAll("span."+$e).length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},t.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement=typeof this.dropArea!="string"?this.dropArea:F(this.dropArea,document);for(var i=this.element,n=!1;i.parentNode;)i=i.parentNode,i===this.dropZoneElement&&(n=!0,e?e.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!n&&e&&it(e)}else!h(this.uploaderOptions)&&this.uploaderOptions.dropArea===void 0&&(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},t.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&it(e)}},t.prototype.createDropTextHint=function(){var e=this.createElement("span",{className:Qr});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)},t.prototype.updateHTMLAttrToElement=function(){if(!h(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];za.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[""+n])}},t.prototype.updateHTMLAttrToWrapper=function(){if(!h(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(za.indexOf(n)>-1)if(n==="class"){var r=this.htmlAttributes[""+n].replace(/\s+/g," ").trim();r!==""&&k([this.uploadWrapper],r.split(" "))}else if(n==="style"){var s=this.uploadWrapper.getAttribute(n);s=h(s)?this.htmlAttributes[""+n]:s+this.htmlAttributes[""+n],this.uploadWrapper.setAttribute(n,s)}else this.uploadWrapper.setAttribute(n,this.htmlAttributes[""+n])}},t.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")},t.prototype.checkAutoUpload=function(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},t.prototype.sequenceUpload=function(e){if(this.filesData.length-e.length===0||this.filesData[this.filesData.length-e.length-1].statusCode!=="1"){(this.multiple||this.count<0)&&++this.count;var i=!this.showFileList;typeof this.filesData[this.count]=="object"?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],i),this.filesData[this.count].statusCode==="0"&&this.sequenceUpload(e)):--this.count}},t.prototype.setCSSClass=function(e){var i=e;h(e)||(i=e.replace(/\s+/g," ").trim()),!h(e)&&i!==""&&O([this.uploadWrapper],i.split(" "));var n=this.cssClass;!h(this.cssClass)&&this.cssClass!==""&&(n=this.cssClass.replace(/\s+/g," ").trim()),!h(this.cssClass)&&n!==""&&k([this.uploadWrapper],n.split(n.indexOf(",")>-1?",":" "))},t.prototype.wireEvents=function(){C.add(this.browseButton,"click",this.browseButtonClick,this),C.add(this.element,"change",this.onSelectFiles,this),C.add(document,"click",this.removeFocus,this),this.keyboardModule=new hn(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&C.add(this.formElement,"reset",this.resetForm,this)},t.prototype.unWireEvents=function(){C.remove(this.browseButton,"click",this.browseButtonClick),C.remove(this.element,"change",this.onSelectFiles),C.remove(document,"click",this.removeFocus),this.isForm&&C.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},t.prototype.resetForm=function(){this.clearAll()},t.prototype.keyActionHandler=function(e){var i=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(i.classList.contains(Pe)){var n=this.getCurrentMetaData(null,e);n.file.statusCode="4",n.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(n,!1)}else if(i.classList.contains(Kt))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(i.classList.contains(dt)){var n=this.getCurrentMetaData(null,e);if(!h(n))n.file.statusCode="1",n.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(n.file);else{var r=e.target.parentElement,s=this.filesData[this.fileList.indexOf(r)];this.retry(s)}}else this.removeFiles(e),i.classList.contains(ge)||this.browseButton.focus();e.preventDefault(),e.stopPropagation();break}},t.prototype.getCurrentMetaData=function(e,i){var n,r;if(h(e)){var s=i.target.parentElement;n=this.filesData[this.fileList.indexOf(s)]}else n=e;for(var o=0;o<this.uploadMetaData.length;o++)this.uploadMetaData[o].file.name===n.name&&(r=this.uploadMetaData[o]);return r},t.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+$r)&&(document.activeElement.blur(),this.listParent.querySelector("."+$r).classList.remove($r))},t.prototype.browseButtonClick=function(){this.element.click()},t.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},t.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},t.prototype.bindDropEvents=function(){this.dropZoneElement&&(C.add(this.dropZoneElement,"drop",this.dropElement,this),C.add(this.dropZoneElement,"dragover",this.dragHover,this),C.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),C.add(this.dropZoneElement,"paste",this.onPasteFile,this),C.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},t.prototype.unBindDropEvents=function(){this.dropZoneElement&&(C.remove(this.dropZoneElement,"drop",this.dropElement),C.remove(this.dropZoneElement,"dragover",this.dragHover),C.remove(this.dropZoneElement,"dragleave",this.onDragLeave),C.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},t.prototype.onDragEnter=function(e){this.enabled&&(this.dropZoneElement.classList.add(Kr),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},t.prototype.onDragLeave=function(){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(Kr))},t.prototype.dragHover=function(e){this.enabled&&(this.dropEffect!=="Default"&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())},t.prototype.dropElement=function(e){this.dragCounter=0,this.dropZoneElement.classList.remove(Kr),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()},t.prototype.onPasteFile=function(e){var i=e.clipboardData.items;if(e.type==="paste"&&this.browserName!=="msie"&&this.browserName!=="edge"&&this.browserName!=="safari"&&(this.element.files=e.clipboardData.files),!(i.length!==1&&!this.multiple))for(var n=0;n<i.length;n++){var r=[].slice.call(i)[n];(r.kind==="file"||r.type.match("^image/"))&&this.renderSelectedFiles(e,[r.getAsFile()],!1,!0)}},t.prototype.getSelectedFiles=function(e){for(var i=[],n=this.fileList[e],r=this.getFilesData(),s=+n.getAttribute("data-files-count"),o=0,l=0;l<e;l++)o+=+this.fileList[l].getAttribute("data-files-count");for(var c=o;c<o+s;c++)i.push(r[c]);return i},t.prototype.removeFiles=function(e){if(this.enabled){var i=e.target.parentElement,n=this.fileList.indexOf(i),r=this.fileList[n],s=this.isFormUpload(),o=s?this.getSelectedFiles(n):this.getFilesInArray(this.filesData[n]);if(!h(o)){if(e.target.classList.contains(ge)&&!s){if(o[0].statusCode="5",!h(r)){var l=r.querySelector("."+ge);zr({target:l,width:"20px"}),Ur(l)}this.sequentialUpload&&this.uploadSequential(),r.classList.contains(Ai)||this.checkActionComplete(!0)}else b(e.target,"."+Ha)||this.remove(o,!1,!1,!0,e);this.isForm&&r&&r.classList.contains(fi)&&(this.element.value=""),this.checkActionButtonStatus()}}},t.prototype.removeFilesData=function(e,i){var n;if(i){this.showFileList||(n=this.filesData.indexOf(e),this.filesData.splice(n,1));return}var r=this.getLiElement(e);h(r)||(this.element.value="",E(r),n=this.fileList.indexOf(r),this.fileList.splice(n,1),this.filesData.splice(n,1),this.fileList.length===0&&!h(this.listParent)&&(E(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&n<=this.count&&--this.count)},t.prototype.removeUploadedFile=function(e,i,n,r){var s=this,o=e,l=new wi(this.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1;var c=new FormData;l.beforeSend=function(p){i.currentRequest=l.httpRequest,n?s.removingEventCallback(i,c,o,e):s.trigger("removing",i,function(d){d.cancel?p.cancel=!0:s.removingEventCallback(d,c,o,e)})},l.onLoad=function(p){return s.removeCompleted(p,o,r),{}},l.onError=function(p){return s.removeFailed(p,o,r),{}},l.send(c)},t.prototype.removingEventCallback=function(e,i,n,r){var s=this.element.getAttribute("name"),o=this.getLiElement(r);if(!h(o)&&(!h(o.querySelector("."+Ye))||!h(o.querySelector("."+De)))){var l=o.querySelector("."+Ye)?o.querySelector("."+Ye):o.querySelector("."+De);zr({target:l,width:"20px"}),Ur(l)}e.postRawFile&&!h(n.rawFile)&&n.rawFile!==""?i.append(s,n.rawFile,n.name):i.append(s,n.name),this.updateFormData(i,e.customFormData)},t.prototype.updateFormData=function(e,i){if(i.length>0&&i[0])for(var n=function(s){var o=i[s],l=Object.keys(o).map(function(c){return o[""+c]});e.append(Object.keys(o)[0],l)},r=0;r<i.length;r++)n(r)},t.prototype.updateCustomheader=function(e,i){if(i.length>0&&i[0])for(var n=function(s){var o=i[s],l=Object.keys(o).map(function(c){return o[""+c]});e.setRequestHeader(Object.keys(o)[0],l)},r=0;r<i.length;r++)n(r)},t.prototype.removeCompleted=function(e,i,n){var r=e&&e.currentTarget?this.getResponse(e):null,s=e.target;if(s.readyState===4&&s.status>=200&&s.status<=299){var o={e,response:r,operation:"remove",file:this.updateStatus(i,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",o),this.removeFilesData(i,n);var l=this.uploadedFilesData.indexOf(i);this.uploadedFilesData.splice(l,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,i,n)},t.prototype.removeFailed=function(e,i,n){var r=e&&e.currentTarget?this.getResponse(e):null,s={e,response:r,operation:"remove",file:this.updateStatus(i,this.localizedTexts("removedFailedMessage"),"0")};if(!n){var o=this.filesData.indexOf(i),l=this.fileList[o];if(l){l.classList.remove(ot),l.classList.add(Je);var c=l.querySelector("."+ye);c&&(c.classList.remove(ot),c.classList.add(Je))}this.checkActionButtonStatus()}this.trigger("failure",s);var p=this.getLiElement(i);if(!h(p)&&!h(p.querySelector("."+Ye))){var d=p.querySelector("."+Ye);pi(d),E(p.querySelector(".e-spinner-pane"))}},t.prototype.getFilesFromFolder=function(e){this.filesEntries=[];var i=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],n=this.checkDirectoryUpload(i);if(n)for(var r=function(l){var c=i[l].webkitGetAsEntry();if(c.isFile){var p=[];c.file(function(d){var u=c.fullPath;p.push({path:u,file:d})}),s.renderSelectedFiles(e,p,!0)}else c.isDirectory&&s.traverseFileTree(c,e)},s=this,o=0;o<i.length;o++)r(o)},t.prototype.checkDirectoryUpload=function(e){for(var i=0;e&&i<e.length;i++){var n=e[i].webkitGetAsEntry();if(n.isDirectory)return!0}return!1},t.prototype.traverseFileTree=function(e,i){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var n=e.createReader();this.readFileFromDirectory(n,i)}},t.prototype.readFileFromDirectory=function(e,i){var n=this;e.readEntries(function(r){for(var s=0;s<r.length;s++)n.traverseFileTree(r[s],i);n.pushFilesEntries(i),r.length&&n.readFileFromDirectory(e)})},t.prototype.pushFilesEntries=function(e){for(var i=this,n=[],r=function(l){s.filesEntries[l].file(function(c){if(i.filesEntries.length){var p=i.filesEntries[l].fullPath;n.push({path:p,file:c}),l===i.filesEntries.length-1&&(i.filesEntries=[],i.renderSelectedFiles(e,n,!0))}})},s=this,o=0;o<this.filesEntries.length;o++)r(o)},t.prototype.onSelectFiles=function(e){if(this.enabled){var i;if(e.type==="drop")if(this.directoryUpload)this.getFilesFromFolder(e);else{var n=this.sortFilesList=e.dataTransfer.files;this.browserName!=="msie"&&this.browserName!=="edge"&&this.browserName!=="safari"&&(this.element.files=n),n.length>0&&(i=this.multiple?this.sortFileList(n):[n[0]],this.renderSelectedFiles(e,i))}else i=[].slice.call(e.target.files),this.renderSelectedFiles(e,i);(this.isAngular||this.isReact)&&e.stopPropagation()}},t.prototype.getBase64=function(e){return new Promise(function(i,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return i(r.result)},r.onerror=function(s){return n(s)}})},t.prototype.renderSelectedFiles=function(e,i,n,r){var s=this;this.base64String=[];var o={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(i.length<1){o.isCanceled=!0,this.trigger("selected",o);return}this.flag=!0;var l=[];this.multiple||(this.clearData(!0),this.actionCompleteCount=0,i=[i[0]]);for(var c=0;c<i.length;c++){var p=n?i[c].file:i[c];this.updateInitialFileDetails(e,i,p,c,l,n,r)}if(o.filesData=l,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(var c=0;c<l.length;c++){for(var d=Lt.beforeSanitize(),u=Lt.serializeValue(d,l[parseInt(c.toString(),10)].name),m=l[parseInt(c.toString(),10)].name,f=!1,g=0;g<m.length;g++)if(m.charCodeAt(g)>127){f=!0;break}var y=/<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/i,S=y.test(m);if(u!==l[parseInt(c.toString(),10)].name&&!(f&&!S)){var T=i[parseInt(c.toString(),10)].name.replace(/[\u00A0-\u9999<>\\&]/g,function(w){return"&#"+w.charCodeAt(0)+";"});l[parseInt(c.toString(),10)].name=T,l[parseInt(c.toString(),10)].status=this.localizedTexts("invalidFileName"),l[parseInt(c.toString(),10)].statusCode="0"}}this.allTypes||(l=this.checkExtension(l)),this.trigger("selected",o,function(L){s._internalRenderSelect(L,l)})},t.prototype.updateInitialFileDetails=function(e,i,n,r,s,o,l){var c=o?i[r].path.substring(1,i[r].path.length):l?rt(n.name.substring(0,n.name.lastIndexOf(".")))+"."+this.getFileType(n.name):this.directoryUpload?i[r].webkitRelativePath:n.name,p={name:c,rawFile:n,size:n.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(n.name),validationMessages:this.validatedFileSize(n.size),statusCode:"1",id:rt(n.name.substring(0,n.name.lastIndexOf(".")))+"."+this.getFileType(n.name)};l&&(p.fileSource="paste"),p.status=p.validationMessages.minSize!==""?this.localizedTexts("invalidMinFileSize"):p.validationMessages.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):p.status,(p.validationMessages.minSize!==""||p.validationMessages.maxSize!=="")&&(p.statusCode="0",this.checkActionComplete(!0)),s.push(p)},t.prototype._internalRenderSelect=function(e,i){if(!e.cancel){if(this.selectedFiles=this.selectedFiles.concat(i),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var n=0;n<e.modifiedFilesData.length;n++)for(var r=0;r<i.length;r++)e.modifiedFilesData[n].id===i[r].id&&(e.modifiedFilesData[n].rawFile=i[r].rawFile);var s=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(s),this.filesData=this.filesData.concat(s),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(s)}else{if(this.internalCreateFileList(i),this.autoUpload&&this.sequenceUpload&&this.sequentialUpload&&this.filesData.length>0&&this.filesData[this.filesData.length-1].statusCode!=="2"&&this.filesData[this.filesData.length-1].statusCode!=="0"){this.filesData=this.filesData.concat(i);return}this.filesData=this.filesData.concat(i),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(i)}!h(e.progressInterval)&&e.progressInterval!==""&&(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(i),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},t.prototype.allowUpload=function(){var e=!1;return this.isForm&&!h(this.asyncSettings.saveUrl)&&this.asyncSettings.saveUrl!==""&&(e=!0),e},t.prototype.isFormUpload=function(){var e=!1;return this.isForm&&(h(this.asyncSettings.saveUrl)||this.asyncSettings.saveUrl==="")&&(h(this.asyncSettings.removeUrl)||this.asyncSettings.removeUrl==="")&&(e=!0),e},t.prototype.clearData=function(e){h(this.listParent)||(E(this.listParent),this.listParent=null),this.browserName!=="msie"&&!e&&(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},t.prototype.updateSortedFileList=function(e){var i=this.createElement("div",{id:"clonewrapper"}),n=-1;if(this.listParent){for(var r=0;r<this.listParent.querySelectorAll("li").length;r++){var s=this.listParent.querySelectorAll("li")[r];i.appendChild(s.cloneNode(!0))}this.removeActionButtons();var o=[].slice.call(i.childNodes);this.createParentUL();for(var l=0;l<e.length;l++){for(var c=0;c<this.filesData.length;c++)this.filesData[c].name===e[l].name&&(this.listParent.appendChild(o[c]),C.add(o[c].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(o[c]),n=l);n!==l&&this.internalCreateFileList([e[l]])}}else this.internalCreateFileList(e)},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.checkExtension=function(e){var i=e;if(!this.isBlank(this.allowedExtensions)){for(var n=[],r=this.allowedExtensions.split(","),s=0,o=r;s<o.length;s++){var l=o[s];n.push(l.trim().toLocaleLowerCase())}for(var c=0;c<e.length;c++){var p=e[c].type.indexOf(".")!==-1?e[c].type.replace(".",""):e[c].type;n.indexOf(("."+p).toLocaleLowerCase())===-1&&(e[c].status=this.localizedTexts("invalidFileType"),e[c].statusCode="0")}}return i},t.prototype.validatedFileSize=function(e){var i="",n="";e<this.minFileSize?i=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?n=this.localizedTexts("invalidMaxFileSize"):(i="",n="");var r={minSize:i,maxSize:n};return r},t.prototype.isPreLoadFile=function(e){for(var i=!1,n=0;n<this.files.length;n++)this.files[n].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[n].type===e.type&&(i=!0);return i},t.prototype.createCustomfileList=function(e){this.createParentUL();for(var i=0,n=e;i<n.length;i++){var r=n[i],s=this.createElement("li",{className:xn,attrs:{"data-file-name":r.name}});this.uploadTemplateFn=this.templateComplier(this.template);var o=this.uploadTemplateFn(r,this,"template",this.element.id+"Template",this.isStringTemplate,null,s);if(o){var l=[].slice.call(o);Ne(l,s)}var c=e.indexOf(r),p={element:s,fileInfo:r,index:c,isPreload:this.isPreLoadFile(r)},d={element:s,fileInfo:r,index:c,isPreload:this.isPreLoadFile(r)};this.trigger("rendering",p),this.trigger("fileListRendering",d),this.listParent.appendChild(s),this.fileList.push(s)}this.renderReactTemplates()},t.prototype.createParentUL=function(){h(this.listParent)&&(this.listParent=this.createElement("ul",{className:Ra}),this.uploadWrapper.appendChild(this.listParent))},t.prototype.formFileList=function(e,i){var n=this.createElement("li",{className:xn});n.setAttribute("data-files-count",e.length+"");for(var r=this.createElement("span",{className:Xr}),s,o=0,l=e;o<l.length;o++){var c=l[o],p=this.createElement("span",{className:Aa});p.innerHTML=this.getFileNameOnly(c.name);var d=this.createElement("span",{className:Pa}),u=this.getFileType(c.name);if(d.innerHTML="."+u,u||d.classList.add("e-hidden"),!this.enableRtl)r.appendChild(p),r.appendChild(d);else{var m=this.createElement("span",{className:ja});m.appendChild(d),m.appendChild(p),r.appendChild(m)}this.truncateName(p),s=this.formValidateFileInfo(c,n)}n.appendChild(r),this.setListToFileInfo(e,n);var f=this.listParent.querySelectorAll("li").length,g=this.createElement("span");if(n.classList.contains(fi)?(g.classList.add(ye),g.classList.add(fi),g.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):s):(g.classList.add(e.length>1?pc:Ia),g.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),r.appendChild(g),h(n.querySelector(".e-icons"))){var y=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});this.browserName==="msie"&&y.classList.add("e-msie"),y.setAttribute("title",this.localizedTexts("remove")),n.appendChild(r),n.appendChild(y),C.add(y,"click",this.removeFiles,this),y.classList.add(De)}var S={element:n,fileInfo:this.mergeFileInfo(e,n),index:f,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,n))},T={element:n,fileInfo:this.mergeFileInfo(e,n),index:f,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,n))};this.trigger("rendering",S),this.trigger("fileListRendering",T),this.listParent.appendChild(n),this.fileList.push(n)},t.prototype.formValidateFileInfo=function(e,i){var n=e.status,r=this.validatedFileSize(e.size);(r.minSize!==""||r.maxSize!=="")&&(this.addInvalidClass(i),n=r.minSize!==""?this.localizedTexts("invalidMinFileSize"):r.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):n);var s=this.checkExtension(this.getFilesInArray(e))[0].status;return s===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(i),n=s),n},t.prototype.addInvalidClass=function(e){e.classList.add(fi)},t.prototype.createFormInput=function(e){if(this.browserName!=="safari"){var i=this.element.cloneNode(!0);i.classList.add(cc);for(var n=0,r=e;n<r.length;n++){var s=r[n];s.input=i}i.setAttribute("id",rt("hiddenUploader")),i.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+Ba).appendChild(i),this.browserName!=="msie"&&this.browserName!=="edge"&&(this.element.value="")}},t.prototype.getFileSize=function(e){for(var i=0,n=0,r=e;n<r.length;n++){var s=r[n];i+=s.size}return i},t.prototype.mergeFileInfo=function(e,i){for(var n={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:i},r=[],s="",o=0,l=e;o<l.length;o++){var c=l[o];r.push(c.name),s=c.type}return n.name=r.join(", "),n.size=this.getFileSize(e),n.type=s,n.status=this.statusForFormUpload(e,i),n},t.prototype.statusForFormUpload=function(e,i){for(var n=!0,r,s=0,o=e;s<o.length;s++){var l=o[s];r=l.status;var c=this.validatedFileSize(l.size);(c.minSize!==""||c.maxSize!=="")&&(n=!1,r=c.minSize!==""?this.localizedTexts("invalidMinFileSize"):c.maxSize!==""?this.localizedTexts("invalidMaxFileSize"):r);var p=this.checkExtension(this.getFilesInArray(l))[0].status;p===this.localizedTexts("invalidFileType")&&(n=!1,r=p)}return n?r=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(i.classList.add(fi),r=e.length>1?this.localizedTexts("invalidFileSelection"):r),r},t.prototype.formCustomFileList=function(e,i){this.createParentUL();var n=this.createElement("li",{className:xn});n.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,n);var r=this.mergeFileInfo(e,n);n.setAttribute("data-file-name",r.name),this.uploadTemplateFn=this.templateComplier(this.template);var s=this.uploadTemplateFn(r,this,"template",this.element.id+"Template",this.isStringTemplate,null,n);if(s){var o=[].slice.call(s);Ne(o,n)}var l=this.listParent.querySelectorAll("li").length;n.classList.contains(fi)||this.createFormInput(e);var c={element:n,fileInfo:r,index:l,isPreload:this.isPreLoadFile(r)},p={element:n,fileInfo:r,index:l,isPreload:this.isPreLoadFile(r)};this.trigger("rendering",c),this.trigger("fileListRendering",p),this.listParent.appendChild(n),this.fileList.push(n),this.renderReactTemplates()},t.prototype.createFileList=function(e){this.filesData=this.filesData&&this.filesData.length>0?this.filesData.concat(e):e,this.internalCreateFileList(e)},t.prototype.internalCreateFileList=function(e){if(this.createParentUL(),this.template!==""&&!h(this.template))this.isFormUpload()?(this.uploadWrapper.classList.add(Ua),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e);else if(this.isFormUpload())this.uploadWrapper.classList.add(Ua),this.formFileList(e,this.element.files);else for(var i=0,n=e;i<n.length;i++){var r=n[i],s=this.createElement("li",{className:xn,attrs:{"data-file-name":r.name,"data-files-count":"1"}}),o=this.createElement("span",{className:Xr}),l=this.createElement("span",{className:Aa,attrs:{title:r.name}});l.innerHTML=this.getFileNameOnly(r.name);var c=this.createElement("span",{className:Pa}),p=this.getFileType(r.name);if(c.innerHTML="."+p,p||c.classList.add("e-hidden"),!this.enableRtl)o.appendChild(l),o.appendChild(c);else{var d=this.createElement("span",{className:ja});d.appendChild(c),d.appendChild(l),o.appendChild(d)}var u=this.createElement("span",{className:Ia});u.innerHTML=this.bytesToSize(r.size),o.appendChild(u);var m=this.createElement("span",{className:ye});o.appendChild(m),m.innerHTML=r.status,s.appendChild(o);var f=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});this.browserName==="msie"&&f.classList.add("e-msie"),f.setAttribute("title",this.localizedTexts("remove")),s.appendChild(f),C.add(f,"click",this.removeFiles,this),r.statusCode==="2"?(m.classList.add(ot),f.classList.add(Ye),f.setAttribute("title",this.localizedTexts("delete"))):r.statusCode!=="1"&&(m.classList.remove(ot),m.classList.add(Fa)),this.autoUpload&&r.statusCode==="1"&&this.asyncSettings.saveUrl!==""&&(m.innerHTML=""),f.classList.contains(Ye)||(f.classList.add(De),f.setAttribute("aria-label",this.localizedTexts("remove")));var g=e.indexOf(r),y={element:s,fileInfo:r,index:g,isPreload:this.isPreLoadFile(r)},S={element:s,fileInfo:r,index:g,isPreload:this.isPreLoadFile(r)};this.trigger("rendering",y),this.trigger("fileListRendering",S),this.listParent.appendChild(s),this.fileList.push(s),this.truncateName(l);var T=this.flag;this.isPreLoadFile(r)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=T)}},t.prototype.getSlicedName=function(e){var i=e.textContent;e.dataset.tail=i.slice(i.length-10)},t.prototype.setListToFileInfo=function(e,i){for(var n=0,r=e;n<r.length;n++){var s=r[n];s.list=i}},t.prototype.truncateName=function(e){var i=e;this.browserName!=="edge"&&i.offsetWidth<i.scrollWidth?this.getSlicedName(i):i.offsetWidth+1<i.scrollWidth&&this.getSlicedName(i)},t.prototype.getFileType=function(e){var i,n=e.lastIndexOf(".");return n>=0&&(i=e.substring(n+1)),i||""},t.prototype.getFileNameOnly=function(e){var i=this.getFileType(e),n=e.split("."+i);return i=n[0]},t.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},t.prototype.filterfileList=function(e){for(var i=[],n,r=0;r<e.length;r++)n=this.getLiElement(e[r]),(!h(n)&&!n.classList.contains(ot)||!this.showFileList&&e[r].status!=="File uploaded successfully")&&i.push(e[r]);return i},t.prototype.updateStatus=function(e,i,n,r){if(r===void 0&&(r=!0),!(i===""||h(i))&&!(n===""||h(n))&&(e.status=i,e.statusCode=n),r){var s=this.getLiElement(e);h(s)||!h(s.querySelector("."+ye))&&!(i===""||h(i))&&(s.querySelector("."+ye).textContent=i)}return e},t.prototype.getLiElement=function(e){for(var i,n=0;n<this.filesData.length;n++)!h(e)&&(!h(this.filesData[n].id)&&!h(e.id)?this.filesData[n].name===e.name&&this.filesData[n].id===e.id:this.filesData[n].name===e.name)&&(i=n);return this.fileList[i]},t.prototype.createProgressBar=function(e){var i=this.createElement("span",{className:Qt}),n=this.createElement("progressbar",{className:Nn,attrs:{value:"0",max:"100"}}),r=this.createElement("span",{className:hc});n.setAttribute("style","width: 0%");var s=this.createElement("span",{className:Gr});s.textContent="0%",r.appendChild(n),i.appendChild(r),i.appendChild(s),e.querySelector("."+Xr).appendChild(i)},t.prototype.updateProgressbar=function(e,i){if(!isNaN(Math.round(e.loaded/e.total*100))&&!h(i.querySelector("."+Nn)))if(!h(this.progressInterval)&&this.progressInterval!==""){var n=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);(n===0||n===100)&&this.changeProgressValue(i,Math.round(e.loaded/e.total*100).toString()+"%")}else this.changeProgressValue(i,Math.round(e.loaded/e.total*100).toString()+"%")},t.prototype.changeProgressValue=function(e,i){e.querySelector("."+Nn).setAttribute("style","width:"+i),e.querySelector("."+Gr).textContent=i},t.prototype.uploadInProgress=function(e,i,n,r){var s=this.getLiElement(i);if(!(h(s)&&!n)){if(h(s))this.cancelUploadingFile(i,e,r);else{i.statusCode==="5"&&this.cancelUploadingFile(i,e,r,s),!(s.querySelectorAll("."+Qt).length>0)&&s.querySelector("."+ye)&&(s.querySelector("."+ye).classList.add($e),this.createProgressBar(s),this.updateProgressBarClasses(s,$e),s.querySelector("."+ye).classList.remove(Je)),this.updateProgressbar(e,s);var o=s.querySelector("."+De);h(o)||(o.classList.add(ge,$e),o.setAttribute("title",this.localizedTexts("abort")),o.classList.remove(De))}var l={e,operation:"upload",file:this.updateStatus(i,this.localizedTexts("inProgress"),"3")};this.trigger("progress",l)}},t.prototype.cancelUploadingFile=function(e,i,n,r){var s=this;if(e.statusCode==="5"){var o={event:i,fileData:e,cancel:!1,customFormData:[],currentRequest:null};this.trigger("canceling",o,function(l){if(l.cancel){if(e.statusCode="3",!h(r)){var c=r.querySelector("."+ge);h(c)||(pi(c),E(r.querySelector(".e-spinner-pane")))}}else{n.emitError=!1,n.httpRequest.abort();var p=new FormData;if(e.statusCode==="5"){var d=s.element.getAttribute("name");p.append(d,e.name),p.append("cancel-uploading",e.name),s.updateFormData(p,l.customFormData);var u=new wi(s.asyncSettings.removeUrl,"POST",!0,null);u.emitError=!1,u.beforeSend=function(m){l.currentRequest&&s.updateCustomheader(u.httpRequest,l.currentRequest)},u.onLoad=function(m){return s.removecanceledFile(m,e),{}},u.send(p)}}})}},t.prototype.removecanceledFile=function(e,i){var n=this.getLiElement(i);if(!(h(n)||n.querySelector("."+dt)||h(n.querySelector("."+ge)))){this.updateStatus(i,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,i,n);var r=n.querySelector("."+De);h(n)||(pi(r),h(n.querySelector(".e-spinner-pane"))||E(n.querySelector(".e-spinner-pane")));var s=e&&e.currentTarget?this.getResponse(e):null,o={event:e,response:s,operation:"cancel",file:i};this.trigger("success",o)}},t.prototype.renderFailureState=function(e,i,n){var r=this;this.updateProgressBarClasses(n,Je),this.removeProgressbar(n,"failure"),h(n.querySelector(".e-file-status"))||n.querySelector(".e-file-status").classList.add(Je);var s=n.querySelector("."+ge);if(!h(s)){s.classList.remove(ge,$e),s.classList.add(De),s.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("retry"));var o=n.querySelector("."+dt);o.addEventListener("click",function(l){r.reloadcanceledFile(l,i,n,!1)},!1)}},t.prototype.reloadcanceledFile=function(e,i,n,r){i.statusCode="1",i.status=this.localizedTexts("readyToUploadMessage"),r||(h(n.querySelector("."+ye))||n.querySelector("."+ye).classList.remove(Je),h(n.querySelector("."+dt))||E(n.querySelector("."+dt)),this.pauseButton=null),h(n)||n.classList.add(Ai),this.upload([i])},t.prototype.uploadComplete=function(e,i,n){var r=e.target;if(r.readyState===4&&r.status>=200&&r.status<=299){var s=this.getLiElement(i);if(h(s)&&(!n||h(n))&&this.showFileList)return;if(!h(s)){this.updateProgressBarClasses(s,ot),this.removeProgressbar(s,"success");var o=s.querySelector("."+ge);h(o)||(o.classList.add(Ye),o.setAttribute("title",this.localizedTexts("delete")),o.setAttribute("aria-label",this.localizedTexts("delete")),o.classList.remove(ge),o.classList.remove($e))}this.raiseSuccessEvent(e,i)}else this.uploadFailed(e,i)},t.prototype.getResponse=function(e){var i=e.currentTarget,n={readyState:i.readyState,statusCode:i.status,statusText:i.statusText,headers:i.getAllResponseHeaders(),withCredentials:i.withCredentials};return n},t.prototype.raiseSuccessEvent=function(e,i){var n=this,r=e&&e.currentTarget?this.getResponse(e):null,s=this.localizedTexts("uploadSuccessMessage"),o={e,response:r,operation:"upload",file:this.updateStatus(i,s,"2",!1),statusText:s},l=this.getLiElement(i);if(!h(l)){var c=l.querySelector("."+Ha);h(c)||(pi(l),E(c))}this.trigger("success",o,function(p){n.updateStatus(i,p.statusText,"2"),n.multiple?n.uploadedFilesData.push(i):n.uploadedFilesData=[i],n.trigger("change",{file:n.uploadedFilesData}),n.checkActionButtonStatus(),n.fileList.length>0?n.getLiElement(i).classList.contains(Ai)?n.getLiElement(i).classList.remove(Ai):(n.uploadSequential(),n.checkActionComplete(!0)):n.showFileList||n.checkActionComplete(!0)})},t.prototype.uploadFailed=function(e,i){var n=this,r=this.getLiElement(i),s=e&&e.currentTarget?this.getResponse(e):null,o=this.localizedTexts("uploadFailedMessage"),l={e,response:s,operation:"upload",file:this.updateStatus(i,o,"0",!1),statusText:o};h(r)||this.renderFailureState(e,i,r),this.trigger("failure",l,function(c){n.updateStatus(i,c.statusText,"0"),n.checkActionButtonStatus(),n.uploadSequential(),n.checkActionComplete(!0)})},t.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},t.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},t.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}},t.prototype.getSelectedFileStatus=function(e){for(var i=[],n=0,r=0;r<e.length;r++)for(var s=e[r],o=0;o<this.filesData.length;o++)this.filesData[o].name===s.name&&this.filesData[o].status===s.status&&(i[n]=this.filesData[o],++n);return i},t.prototype.updateProgressBarClasses=function(e,i){var n=e.querySelector("."+Nn);h(n)||n.classList.add(i)},t.prototype.removeProgressbar=function(e,i){var n=this;h(e.querySelector("."+Qt))||(this.progressAnimation=new Qh({duration:1250}),this.progressAnimation.animate(e.querySelector("."+Qt),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector("."+Gr),{name:"FadeOut"}),setTimeout(function(){n.animateProgressBar(e,i)},750))},t.prototype.animateProgressBar=function(e,i){i==="success"?(e.classList.add(ot),h(e.querySelector("."+ye))||(e.querySelector("."+ye).classList.remove($e),this.progressAnimation.animate(e.querySelector("."+ye),{name:"FadeIn"}),e.querySelector("."+ye).classList.add(ot))):h(e.querySelector("."+ye))||(e.querySelector("."+ye).classList.remove($e),this.progressAnimation.animate(e.querySelector("."+ye),{name:"FadeIn"}),e.querySelector("."+ye).classList.add(Je)),e.querySelector("."+Qt)&&E(e.querySelector("."+Qt))},t.prototype.setExtensions=function(e){e!==""&&!h(e)?this.element.setAttribute("accept",e):this.element.removeAttribute("accept")},t.prototype.templateComplier=function(e){if(e)try{return typeof e!="function"&&re(e,document).length?Di(F(e,document).innerHTML.trim()):Di(e)}catch{return Di(e)}},t.prototype.setRTL=function(){this.enableRtl?k([this.uploadWrapper],qa):O([this.uploadWrapper],qa)},t.prototype.localizedTexts=function(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)},t.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains(Yr)&&this.uploadWrapper.classList.remove(Yr),!h(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!h(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!h(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(Yr),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),h(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),h(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},t.prototype.checkHTMLAttributes=function(e){for(var i=e?h(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"],n=0,r=i;n<r.length;n++){var s=r[n];if(!h(this.element.getAttribute(s)))switch(s){case"accept":(h(this.uploaderOptions)||this.uploaderOptions.allowedExtensions===void 0||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(h(this.uploaderOptions)||this.uploaderOptions.multiple===void 0||e){var o=this.element.getAttribute(s)==="multiple"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true";this.setProperties({multiple:o},!e),this.initialAttr.multiple=!0}break;case"disabled":if(h(this.uploaderOptions)||this.uploaderOptions.enabled===void 0||e){var l=!(this.element.getAttribute(s)==="disabled"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true");this.setProperties({enabled:l},!e),this.initialAttr.disabled=!0}}}},t.prototype.chunkUpload=function(e,i,n){var r=0,s=Math.min(this.asyncSettings.chunkSize,e.size),o=0,l=e.rawFile.slice(r,s),c={chunkIndex:o,blob:l,file:e,start:r,end:s,retryCount:0,request:null};this.sendRequest(e,c,i,n)},t.prototype.sendRequest=function(e,i,n,r){var s=this,o=new FormData,l=e.rawFile.slice(i.start,i.end);o.append(this.uploaderName,l,e.name),o.append("chunk-index",i.chunkIndex.toString()),o.append("chunkIndex",i.chunkIndex.toString());var c=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);o.append("total-chunk",c.toString()),o.append("totalChunk",c.toString());var p=new wi({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});p.emitError=!1,p.onLoad=function(u){return s.chunkUploadComplete(u,i,n),{}},p.onUploadProgress=function(u){return s.chunkUploadInProgress(u,i,n),{}};var d={fileData:e,customFormData:[],cancel:!1,chunkSize:this.asyncSettings.chunkSize===0?null:this.asyncSettings.chunkSize};p.beforeSend=function(u){d.currentRequest=p.httpRequest,d.currentChunkIndex=i.chunkIndex,d.currentChunkIndex===0?s.trigger("uploading",d,function(m){s.uploadingEventCallback(o,m,u,e)}):s.trigger("chunkUploading",d,function(m){s.uploadingEventCallback(o,m,u,e)})},p.onError=function(u){return s.chunkUploadFailed(u,i,n),{}},p.send(o),i.request=p},t.prototype.uploadingEventCallback=function(e,i,n,r){i.cancel?this.eventCancelByArgs(n,i,r):this.updateFormData(e,i.customFormData)},t.prototype.eventCancelByArgs=function(e,i,n){var r=this;if(e.cancel=!0,i.fileData.statusCode!=="5"){i.fileData.statusCode="5",i.fileData.status=this.localizedTexts("fileUploadCancel");var s=this.getLiElement(i.fileData);if(s){h(s.querySelector("."+ye))||(s.querySelector("."+ye).innerHTML=this.localizedTexts("fileUploadCancel"),s.querySelector("."+ye).classList.add(Je)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=s.querySelector("."+De);o&&o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(l){r.reloadcanceledFile(l,n,s)},!1),this.checkActionButtonStatus()}}},t.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||h(this.asyncSettings.chunkSize))},t.prototype.chunkUploadComplete=function(e,i,n){var r=this,s=e.target,o;if(s.readyState===4&&s.status>=200&&s.status<300){var l=e&&e.currentTarget?this.getResponse(e):null,c=Math.max(Math.ceil(i.file.size/this.asyncSettings.chunkSize),1),p={event:e,file:i.file,chunkIndex:i.chunkIndex,totalChunk:c,chunkSize:this.asyncSettings.chunkSize,response:l};if(this.trigger("chunkSuccess",p),(h(n)||!n)&&(o=this.getLiElement(i.file)),this.updateMetaData(i),i.end===i.file.size&&(i.file.statusCode="3"),i.file.statusCode==="5"){var d={event:e,fileData:i.file,cancel:!1,customFormData:[]};this.trigger("canceling",d,function(m){if(m.cancel){i.file.statusCode="3";var f=o.querySelector("."+ge);!h(o)&&!h(f)&&(pi(f),E(o.querySelector(".e-spinner-pane"))),r.sendNextRequest(i)}else{i.request.emitError=!1,s.abort();var g=new FormData,y=r.element.getAttribute("name");g.append(y,i.file.name),g.append("cancel-uploading",i.file.name),g.append("cancelUploading",i.file.name),r.updateFormData(g,m.customFormData);var S=new wi(r.asyncSettings.removeUrl,"POST",!0,null);S.emitError=!1,S.onLoad=function(T){return r.removeChunkFile(T,i,n),{}},S.send(g)}})}else{if(c-1===i.chunkIndex&&c>i.chunkIndex){var u=this.pausedData.indexOf(i);u>=0&&this.pausedData.splice(u,1),h(this.template)&&(h(n)||!n)&&o&&(o&&!h(o.querySelector("."+Pe))&&E(o.querySelector("."+Pe)),this.removeChunkProgressBar(i)),this.raiseSuccessEvent(e,i.file);return}i.file.statusCode!=="4"&&this.sendNextRequest(i)}}else this.chunkUploadFailed(e,i)},t.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},t.prototype.removeChunkFile=function(e,i,n){if(h(this.template)&&h(n)&&!n){var r=this.getLiElement(i.file),s=r.querySelector("."+ge),o=s;this.updateStatus(i.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(r,Je),this.removeProgressbar(r,"failure"),s&&(s.classList.remove(ge),s.classList.add(De),s.setAttribute("title",this.localizedTexts("remove")));var l=r.querySelector("."+Pe);l&&(l.classList.add(dt),l.classList.remove(Pe),l.setAttribute("title",this.localizedTexts("retry"))),!h(r)&&!h(s)&&!h(r.querySelector(".e-spinner-pane"))&&(pi(o),E(r.querySelector(".e-spinner-pane")))}},t.prototype.pauseUpload=function(e,i,n){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var r={event:i||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,n,r)},t.prototype.abortUpload=function(e,i,n){e.file.statusCode!=="4"&&(e.request.emitError=!1,e.request.httpRequest.abort());var r=this.getLiElement(e.file);if(h(this.template)&&(h(i)||!i)){var s=r.querySelector("."+Pe);s.classList.remove(Pe),s.classList.add(Kt),s.setAttribute("title",this.localizedTexts("resume")),s.nextElementSibling.classList.add(De),s.nextElementSibling.classList.remove(ge),s.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].file.name===e.file.name&&this.pausedData.splice(o,1);this.pausedData.push(e),this.trigger("pausing",n)},t.prototype.resumeUpload=function(e,i,n){var r=this.getLiElement(e.file),s;h(r)||(s=r.querySelector("."+Kt)),!h(s)&&(h(n)||!n)&&(s.classList.remove(Kt),s.classList.add(Pe),s.setAttribute("title",this.localizedTexts("pause")),s.nextElementSibling.classList.remove(De),s.nextElementSibling.classList.add(ge),s.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var o={event:i||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",o);for(var l=0;l<this.pausedData.length;l++)this.pausedData[l].end===this.pausedData[l].file.size?this.chunkUploadComplete(i,e,n):this.pausedData[l].file.name===e.file.name&&(this.pausedData[l].start=this.pausedData[l].end,this.pausedData[l].end=this.pausedData[l].end+this.asyncSettings.chunkSize,this.pausedData[l].end=Math.min(this.pausedData[l].end,this.pausedData[l].file.size),this.pausedData[l].chunkIndex=this.pausedData[l].chunkIndex+1,this.sendRequest(this.pausedData[l].file,this.pausedData[l],n))},t.prototype.updateMetaData=function(e){this.uploadMetaData.indexOf(e)===-1?this.uploadMetaData.push(e):(this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e))},t.prototype.removeChunkProgressBar=function(e){var i=this.getLiElement(e.file);if(!h(i)){this.updateProgressBarClasses(i,ot),this.removeProgressbar(i,"success");var n=i.querySelector("."+ge);h(n)||(n.classList.add(Ye),n.setAttribute("title",this.localizedTexts("delete")),n.classList.remove(ge,$e))}},t.prototype.chunkUploadFailed=function(e,i,n){var r=this,s=Math.max(Math.ceil(i.file.size/this.asyncSettings.chunkSize),1),o;h(this.template)&&(h(n)||!n)&&(o=this.getLiElement(i.file));var l=e&&e.currentTarget?this.getResponse(e):null,c={event:e,file:i.file,chunkIndex:i.chunkIndex,totalChunk:s,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:l};this.trigger("chunkFailure",c,function(p){if(!p.cancel)if(i.retryCount<r.asyncSettings.retryCount)setTimeout(function(){r.retryRequest(o,i,n)},r.asyncSettings.retryAfterDelay);else{if(!h(o)){var d=o.querySelector("."+Pe)?o.querySelector("."+Pe):o.querySelector("."+Kt);h(d)||(d.classList.add(dt),d.classList.remove(Pe,Kt)),r.updateProgressBarClasses(o,Je),r.removeProgressbar(o,"failure"),o.querySelector(".e-icons").classList.remove($e);var u=o.querySelector("."+ge)?o.querySelector("."+ge):o.querySelector("."+De);u.classList.remove(ge),h(o.querySelector("."+Pe))||E(o.querySelector("."+Pe)),i.start>0?(u.classList.add(Ye),u.setAttribute("title",r.localizedTexts("delete"))):(u.classList.add(De),u.setAttribute("title",r.localizedTexts("remove")))}i.retryCount=0;var m=i.file,f=r.localizedTexts("uploadFailedMessage"),g={e,response:l,operation:"upload",file:r.updateStatus(m,f,"0",!1),statusText:f};r.trigger("failure",g,function(y){r.updateStatus(m,y.statusText,"0"),r.uploadSequential(),r.checkActionComplete(!0)})}})},t.prototype.retryRequest=function(e,i,n){h(this.template)&&(h(n)||!n)&&e&&this.updateProgressBarClasses(e,Je),i.retryCount+=1,this.sendRequest(i.file,i)},t.prototype.checkPausePlayAction=function(e){var i=e.target,n=e.target.parentElement,r=this.fileList.indexOf(n),s=this.filesData[r],o=this.getCurrentMetaData(s);i.classList.contains(Pe)?this.pauseUpload(o,e):i.classList.contains(Kt)?this.resumeUpload(o,e):i.classList.contains(dt)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))},t.prototype.retryUpload=function(e,i){i?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add(Ai)},t.prototype.chunkUploadInProgress=function(e,i,n){var r=this;if(i.file.statusCode!=="4"){i.file.statusCode!=="4"&&i.file.statusCode!=="5"&&(i.file.statusCode="3",i.file.status=this.localizedTexts("inProgress")),this.updateMetaData(i);var s=this.getLiElement(i.file);if(!h(s)){var o=s.querySelector("."+dt);if(h(o)||(o.classList.add(Pe),o.setAttribute("title",this.localizedTexts("pause")),o.classList.remove(dt)),!h(s)){if(!(s.querySelectorAll("."+Qt).length>0)){var l=s.querySelector("."+ye);h(this.template)&&(l.classList.add($e),l.classList.remove(Je),this.createProgressBar(s),this.updateProgressBarClasses(s,$e));var c=s.querySelector("."+De)?s.querySelector("."+De):s.querySelector("."+Ye);h(c)||(c.classList.add(ge),c.setAttribute("title",this.localizedTexts("abort")),c.classList.remove(De))}if(!isNaN(Math.round(e.loaded/e.total*100))&&h(this.template)&&i.file.statusCode!=="4"){var p=void 0,d=Math.ceil(i.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&d&&(p=Math.round(i.chunkIndex/d*100),this.changeProgressValue(s,p.toString()+"%"))}i.chunkIndex===0&&this.checkActionButtonStatus()}if(h(s.querySelector("."+Pe))&&h(this.template)&&h(s.querySelector("."+Ye))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),this.browserName==="msie"&&this.pauseButton.classList.add("e-msie");var u=s.querySelector("."+ge);u.parentElement.insertBefore(this.pauseButton,u),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(m){r.checkPausePlayAction(m)},!1)}}}},t.prototype.bytesToSize=function(e){var i=-1;if(!e)return"0.0 KB";do e=e/1024,i++;while(e>99);return i>=2&&(e=e*1024,i=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][i]},t.prototype.sortFileList=function(e){e=e||this.sortFilesList;for(var i=e,n=[],r=0;r<i.length;r++)n.push(i[r].name);for(var s=n.sort(),o=[],l=0,c=s;l<c.length;l++)for(var p=c[l],r=0;r<i.length;r++)p===i[r].name&&o.push(i[r]);return o},t.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=["aria-label","directory","webkitdirectory","tabindex"],i=0,n=e;i<n.length;i++){var r=n[i];this.element.removeAttribute(r)}h(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),E(this.uploadWrapper)),this.uploadWrapper=null,this.uploadWrapper=null,this.browseButton=null,this.dropAreaWrapper=null,this.dropZoneElement=null,this.dropArea=null,this.keyboardModule=null,this.clearButton=null,this.uploadButton=null,a.prototype.destroy.call(this)},t.prototype.upload=function(e,i){var n=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||i))this.sequenceUpload(e);else{var r=this.getFilesInArray(e),s={customFormData:[],currentRequest:null,cancel:!1};this.trigger("beforeUpload",s,function(o){o.cancel||n.uploadFiles(r,i)})}},t.prototype.getFilesInArray=function(e){var i=[];return e instanceof Array?i=e:i.push(e),i},t.prototype.serverReadFileBase64=function(e,i,n){var r=this;return new Promise(function(s,o){var l=r.fileStreams[e].rawFile;try{var c=new FileReader;c.onload=function(p){return function(){try{var d=p.result,u=d?d.split(";base64,")[1]:null;s(u)}catch(m){o(m)}}}(c),c.readAsDataURL(l.slice(i,i+n))}catch(p){o(p)}})},t.prototype.uploadFileCount=function(e){var i=this.filesData;if(!i||i.length===0)return-1;var n=i.length;return n},t.prototype.getFileRead=function(e,i){var n=this.filesData;if(!n||n.length===0)return-1;var r=n[e],s=this.newFileRef++;return this.fileStreams[s]=r,s},t.prototype.uploadFiles=function(e,i){var n=[];if(!(this.asyncSettings.saveUrl===""||h(this.asyncSettings.saveUrl))){if(!i||h(i))if(this.multiple)n=this.filterfileList(e);else{var r=[];r.push(e[0]),n=this.filterfileList(r)}else n=e;for(var s=0;s<n.length;s++)this.uploadFilesRequest(n,s,i)}},t.prototype.uploadFilesRequest=function(e,i,n){var r=this,s=this.checkChunkUpload(),o=new wi(this.asyncSettings.saveUrl,"POST",!0,null);o.emitError=!1;var l={fileData:e[i],customFormData:[],cancel:!1},c=new FormData;if(o.beforeSend=function(d){l.currentRequest=o.httpRequest,r.trigger("uploading",l,function(u){u.cancel&&r.eventCancelByArgs(d,u,e[i]),r.updateFormData(c,u.customFormData)})},e[i].statusCode==="1"){var p=this.element.getAttribute("name");c.append(p,e[i].rawFile,e[i].name),s&&e[i].size>this.asyncSettings.chunkSize?this.chunkUpload(e[i],n,i):(o.onLoad=function(d){return l.cancel?{}:(r.uploadComplete(d,e[i],n),{})},o.onUploadProgress=function(d){return l.cancel?{}:(r.uploadInProgress(d,e[i],n,o),{})},o.onError=function(d){return r.uploadFailed(d,e[i]),{}},o.send(c))}},t.prototype.spliceFiles=function(e){for(var i=this.fileList[e],n=this.getFilesData(),r=+i.getAttribute("data-files-count"),s=0,o=0;o<e;o++)s+=+this.fileList[o].getAttribute("data-files-count");for(var l=s+r-1,c=l;c>=s;c--)n.splice(c,1)},t.prototype.remove=function(e,i,n,r,s){var o=this;h(r)&&(r=!0);var l={event:s,cancel:!1,filesData:[],customFormData:[],postRawFile:r,currentRequest:null},c={cancel:!1,customFormData:[],currentRequest:null};this.trigger("beforeRemove",c,function(p){if(!p.cancel)if(o.isFormUpload())l.filesData=e,o.trigger("removing",l,function(T){if(!T.cancel)for(var L=o.getFilesInArray(e),w=!1,N=void 0,M=0,I=L;M<I.length;M++){var A=I[M];if(w||(N=o.fileList.indexOf(A.list)),N>-1){var V=h(A.input)?null:A.input;V&&E(V),o.spliceFiles(N),E(o.fileList[N]),o.fileList.splice(N,1),w=!0,N=-1}}});else if(o.isForm&&(h(o.asyncSettings.removeUrl)||o.asyncSettings.removeUrl===""))l.filesData=o.getFilesData(),o.trigger("removing",l,function(T){T.cancel||o.clearAll()});else{var d=[];e=h(e)?o.filesData:e,e instanceof Array?d=e:d.push(e),l.filesData=d;for(var u=o.asyncSettings.removeUrl,m=!(u===""||h(u)),f=function(T){var L=o.uploadedFilesData.indexOf(T);(T.statusCode==="2"||T.statusCode==="4"||T.statusCode==="0"&&L!==-1)&&m?o.removeUploadedFile(T,l,n,i):n?o.removeFilesData(T,i):o.trigger("removing",l,function(w){w.cancel||o.removeFilesData(T,i)}),s&&!s.target.classList.contains(De)&&o.checkActionComplete(!1)},g=0,y=d;g<y.length;g++){var S=y[g];f(S)}}})},t.prototype.clearAll=function(){var e=this;if(h(this.listParent)){this.browserName!=="msie"&&(this.element.value=""),this.filesData=[];return}var i={cancel:!1,filesData:this.filesData};this.trigger("clearing",i,function(n){n.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})},t.prototype.getFilesData=function(e){return h(e)?this.filesData:this.getSelectedFiles(e)},t.prototype.pause=function(e,i){e=e||this.filesData;var n=this.getFilesInArray(e);this.pauseUploading(n,i)},t.prototype.pauseUploading=function(e,i){for(var n=this.getFiles(e),r=0;r<n.length;r++)n[r].statusCode==="3"&&this.pauseUpload(this.getCurrentMetaData(n[r],null),null,i)},t.prototype.getFiles=function(e){var i=[];return!h(e)&&!(e instanceof Array)?i.push(e):i=e,i},t.prototype.resume=function(e,i){e=e||this.filesData;var n=this.getFilesInArray(e);this.resumeFiles(n,i)},t.prototype.resumeFiles=function(e,i){for(var n=this.getFiles(e),r=0;r<n.length;r++)n[r].statusCode==="4"&&this.resumeUpload(this.getCurrentMetaData(n[r],null),null,i)},t.prototype.retry=function(e,i,n){e=e||this.filesData;var r=this.getFilesInArray(e);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(r,i,n)},t.prototype.retryFailedFiles=function(e,i,n){for(var r=this.getFiles(e),s=0;s<r.length;s++)if(r[s].statusCode==="5"||r[s].statusCode==="0")if(this.asyncSettings.chunkSize>0&&this.getCurrentMetaData(r[s],null))this.retryUpload(this.getCurrentMetaData(r[s],null),i);else{var o=void 0;n||(o=this.fileList[this.filesData.indexOf(r[s])]),this.reloadcanceledFile(null,r[s],o,n)}},t.prototype.cancel=function(e){e=e||this.filesData;var i=this.getFilesInArray(e);this.cancelUpload(i)},t.prototype.cancelUpload=function(e){var i=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var n=0;n<i.length;n++)if(i[n].statusCode==="3"){var r=this.getCurrentMetaData(i[n],null);r.file.statusCode="5",r.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(r),this.showHideUploadSpinner(i[n])}}else for(var n=0;n<i.length;n++)i[n].statusCode==="3"&&(i[n].statusCode="5",i[n].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(i[n]))},t.prototype.showHideUploadSpinner=function(e){var i=this.getLiElement(e);if(!h(i)&&h(this.template)){var n=i.querySelector("."+ge);zr({target:n,width:"20px"}),Ur(n)}},_([se({saveUrl:"",removeUrl:""},fc)],t.prototype,"asyncSettings",void 0),_([v(!1)],t.prototype,"sequentialUpload",void 0),_([v({})],t.prototype,"htmlAttributes",void 0),_([v("")],t.prototype,"cssClass",void 0),_([v(!0)],t.prototype,"enabled",void 0),_([v(null)],t.prototype,"template",void 0),_([v(!0)],t.prototype,"multiple",void 0),_([v(!0)],t.prototype,"autoUpload",void 0),_([v(!0)],t.prototype,"enableHtmlSanitizer",void 0),_([se({},uc)],t.prototype,"buttons",void 0),_([v("")],t.prototype,"allowedExtensions",void 0),_([v(0)],t.prototype,"minFileSize",void 0),_([v(3e7)],t.prototype,"maxFileSize",void 0),_([v(null)],t.prototype,"dropArea",void 0),_([Ln([{}],dc)],t.prototype,"files",void 0),_([v(!0)],t.prototype,"showFileList",void 0),_([v(!1)],t.prototype,"directoryUpload",void 0),_([v("Default")],t.prototype,"dropEffect",void 0),_([P()],t.prototype,"created",void 0),_([P()],t.prototype,"actionComplete",void 0),_([P()],t.prototype,"rendering",void 0),_([P()],t.prototype,"beforeUpload",void 0),_([P()],t.prototype,"fileListRendering",void 0),_([P()],t.prototype,"selected",void 0),_([P()],t.prototype,"uploading",void 0),_([P()],t.prototype,"success",void 0),_([P()],t.prototype,"failure",void 0),_([P()],t.prototype,"removing",void 0),_([P()],t.prototype,"beforeRemove",void 0),_([P()],t.prototype,"clearing",void 0),_([P()],t.prototype,"progress",void 0),_([P()],t.prototype,"change",void 0),_([P()],t.prototype,"chunkSuccess",void 0),_([P()],t.prototype,"chunkFailure",void 0),_([P()],t.prototype,"chunkUploading",void 0),_([P()],t.prototype,"canceling",void 0),_([P()],t.prototype,"pausing",void 0),_([P()],t.prototype,"resuming",void 0),t=_([Vt],t),t}(Ri),mc=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),mi=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r};function cn(a,t){for(var e=_e({},a),i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];t.indexOf(r)<0&&Kh(e,r)}return e}function gc(a,t){var e=t===40?0:a.childElementCount-1,i=e,n,r=a.querySelector(".e-selected");r&&r.classList.remove("e-selected");for(var s=0,o=a.children.length;s<o;s++)a.children[s].classList.contains("e-focused")&&(n=a.children[s],i=s,n.classList.remove("e-focused"),t===40?i++:i--,i===(t===40?a.childElementCount:-1)&&(i=e));n=a.children[i],i=Jl(a,n,i,t),i!==-1&&(k([a.children[i]],"e-focused"),a.children[i].focus())}function Jl(a,t,e,i,n){if(n===void 0&&(n=0),(t.classList.contains("e-separator")||t.classList.contains("e-disabled"))&&(e===(i===40?a.childElementCount-1:0)?e=i===40?0:a.childElementCount-1:i===40?e++:e--),t=a.children[e],t.classList.contains("e-separator")||t.classList.contains("e-disabled")){if(n++,n===a.childElementCount)return e=-1;e=Jl(a,t,e,i,n)}return e}function vc(a,t){var e=[].slice.call(a.getElementsByClassName("e-blank-icon"));if(e.length){var i=a.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!h(i)){i.classList.contains("e-url")&&(i=i.querySelector(".e-menu-url"));var n=i.querySelector(".e-menu-icon"),r,s=a.classList.contains("e-rtl");s?r={padding:"paddingRight",margin:"marginLeft"}:r={padding:"paddingLeft",margin:"marginRight"};var o=parseInt(getComputedStyle(n).fontSize,10)+parseInt(getComputedStyle(n)[r.margin],10)+parseInt(getComputedStyle(i).paddingLeft,10)+"px";e.forEach(function(l){l.classList.contains("e-url")?l.querySelector(".e-menu-url").style[r.padding]=o:l.style[r.padding]=o})}}}var Vs=function(a){mc(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return mi([v("")],t.prototype,"iconCss",void 0),mi([v("")],t.prototype,"id",void 0),mi([v(!1)],t.prototype,"separator",void 0),mi([v("")],t.prototype,"text",void 0),mi([v("")],t.prototype,"url",void 0),mi([v(!1)],t.prototype,"disabled",void 0),t}(ee),bc=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),xe=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},ut={DISABLED:"e-disabled",FOCUS:"e-focused",ICON:"e-menu-icon",ITEM:"e-item",POPUP:"e-dropdown-popup",RTL:"e-rtl",SEPARATOR:"e-separator",VERTICAL:"e-vertical"},Ji=function(a){bc(t,a);function t(e,i){var n=a.call(this,e,i)||this;return n.isPopupCreated=!0,n}return t.prototype.preRender=function(){},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.createPopupOnClick&&!this.isPopupCreated?(this.createPopup(),this.openPopUp()):this.closePopup()},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,i){for(var n,r=this.items.length,s=0,o=this.items.length;s<o;s++)if(i===this.items[s].text){r=s;break}for(var l=e.length-1;l>=0;l--)n=new Vs(this,"items",e[l],!0),this.items.splice(r,0,n);this.canOpen()||this.createItems()},t.prototype.removeItems=function(e,i){for(var n=!1,r=0,s=e.length;r<s;r++)for(var o=0,l=this.items.length;o<l;o++)if(e[r]===(i?this.items[o].id:this.items[o].text)){this.items.splice(o,1),n=!0;break}n&&this.getULElement()&&this.createItems()},t.prototype.createPopup=function(){var e,i=this.createElement("div",{className:ut.POPUP,id:this.element.id+"-popup"});document.body.appendChild(i),this.dropDown=new At(i,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),this.dropDown.element.setAttribute("role","dialog"),this.dropDown.element.setAttribute("aria-label","dropdown menu"),h(this.popupContent)||(this.popupContent.style.display=""),this.dropDown.element.style.position==="fixed"&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),Ce(this.element,(e={},e["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e.type="button",e)),this.cssClass&&k([i],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0},t.prototype.getTargetElement=function(){return this.createPopupOnClick&&!this.isColorPicker()&&!h(this.popupContent)?this.popupContent:typeof this.target=="string"?F(this.target):this.target},t.prototype.createItems=function(e){var i=this.items,n=this.hasIcon(this.items,"iconCss"),r,s,o,l,c=this.getULElement();c?c.innerHTML="":c=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var p=0;p<i.length;p++){s=i[p];var d=s.text;o=this.createElement("li",{innerHTML:s.url?"":d,className:s.separator?ut.ITEM+" "+ut.SEPARATOR:ut.ITEM,attrs:s.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":d},id:s.id?s.id:rt("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?o.textContent=s.url?"":d:o.innerHTML=s.url?"":d,s.url&&(o.appendChild(this.createAnchor(s)),o.classList.add("e-url")),s.iconCss?(r=this.createElement("span",{className:ut.ICON+" "+s.iconCss}),s.url?o.childNodes[0].appendChild(r):o.insertBefore(r,o.childNodes[0])):n&&!s.separator&&o.classList.add("e-blank-icon");var u=s.disabled;s.disabled&&o.classList.add("e-disabled"),l={item:s,element:o},this.trigger("beforeItemRender",l);var m=l.item.disabled;u!==m&&(l.item.disabled?o.classList.add("e-disabled"):o.classList.remove("e-disabled")),c.appendChild(o)}e&&this.getPopUpElement().appendChild(c),n&&vc(this.getPopUpElement())},t.prototype.hasIcon=function(e,i){for(var n=0,r=e.length;n<r;n++)if(e[n][""+i])return!0;return!1},t.prototype.createAnchor=function(e){var i=this.enableHtmlSanitizer?Lt.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:i,attrs:{href:e.url}})},t.prototype.initialize=function(){this.button=new En({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=rt("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-label",this.element.textContent?this.element.textContent:"dropdownbutton"),this.target&&!this.isColorPicker()&&!this.createPopupOnClick||!this.createPopupOnClick?this.createPopup():(this.isPopupCreated=!1,this.target&&!this.isColorPicker()&&this.createPopupOnClick&&(this.popupContent=this.getTargetElement(),this.popupContent.style.display="none"))},t.prototype.isColorPicker=function(){if(!this.element)return!1;var e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))},t.prototype.appendArrowSpan=function(){this.cssClass=h(this.cssClass)?"":this.cssClass,this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(ut.VERTICAL)>-1?"bottom":"right")+" e-caret"}))},t.prototype.setActiveElem=function(e){this.activeElem=e},t.prototype.getModuleName=function(){return"dropdown-btn"},t.prototype.canOpen=function(){var e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e},t.prototype.destroy=function(){var e=this;if(a.prototype.destroy.call(this),this.getModuleName()==="dropdown-btn"){var i;this.element.querySelector("span.e-caret")&&E(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&O([this.element],i),O(this.activeElem,["e-active"]);var n=this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"];n.forEach(function(r){e.element.removeAttribute(r)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents()}},t.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var e=document.getElementById(this.getPopUpElement().id);e&&(O([e],["e-popup-open","e-popup-close"]),E(e))}C.remove(this.getPopUpElement(),"click",this.clickHandler),C.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&this.dropDown&&(this.dropDown.element=null,this.dropDown=void 0)}this.isPopupCreated=!1},t.prototype.getPopUpElement=function(){var e=null;if(!this.dropDown&&this.activeElem[0].classList.contains("e-split-btn")){var i=Tr(this.activeElem[1],"dropdown-btn");i&&(this.dropDown=i.dropDown)}return this.dropDown&&(e=this.dropDown.element),e},t.prototype.getULElement=function(){var e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e},t.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||C.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),C.add(this.element,"click",this.clickHandler,this),C.add(this.element,"keydown",this.keyBoardHandler,this),C.add(window,"resize",this.windowResize,this)},t.prototype.windowResize=function(){!this.canOpen()&&this.dropDown&&this.dropDown.refreshPosition(this.element)},t.prototype.popupWireEvents=function(){this.delegateMousedownHandler||(this.delegateMousedownHandler=this.mousedownHandler.bind(this));var e=this.getPopUpElement();this.createPopupOnClick&&C.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(C.add(e,"click",this.clickHandler,this),C.add(e,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&C.add(e,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=zs(e,{selector:"."+ut.ITEM})},t.prototype.popupUnWireEvents=function(){var e=this.getPopUpElement();this.createPopupOnClick&&C.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(C.remove(e,"click",this.clickHandler),C.remove(e,"keydown",this.keyBoardHandler),this.closeActionEvents&&C.remove(e,this.closeActionEvents,this.focusoutHandler))},t.prototype.keyBoardHandler=function(e){if(!(e.target===this.element&&(e.keyCode===9||!e.altKey&&e.keyCode===40||e.keyCode===38)))switch(e.keyCode){case 38:case 40:e.altKey&&(e.keyCode===38||e.keyCode===40)?this.keyEventHandler(e):this.upDownKeyHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e);break}},t.prototype.upDownKeyHandler=function(e){this.target&&(e.keyCode===38||e.keyCode===40)||(e.preventDefault(),gc(this.getULElement(),e.keyCode))},t.prototype.keyEventHandler=function(e){if(!(this.target&&(e.keyCode===13||e.keyCode===9))){if(e.keyCode===13&&this.activeElem[0].classList.contains("e-split-btn")){this.triggerSelect(e),this.activeElem[0].focus();return}e.target&&e.target.className.indexOf("e-edit-template")>-1&&e.keyCode===32||(e.keyCode!==9&&e.preventDefault(),e.keyCode===27||e.keyCode===38||e.keyCode===9?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))}},t.prototype.getLI=function(e){return e.tagName==="LI"?e:b(e,"li")},t.prototype.mousedownHandler=function(e){var i=e.target;this.dropDown&&!this.canOpen()&&!(b(i,'[id="'+this.getPopUpElement().id+'"]')||b(i,'[id="'+this.element.id+'"]'))&&this.closePopup(e)},t.prototype.focusoutHandler=function(e){if(this.isPopupCreated&&!this.canOpen()){var i=e.relatedTarget;if(i&&i.className.indexOf("e-item")>-1){var n=this.getLI(i);if(n){var r=Array.prototype.indexOf.call(this.getULElement().children,n),s=this.items[r];if(s){var o={element:n,item:s,event:e};this.trigger("select",o)}}}this.closePopup(e)}},t.prototype.clickHandler=function(e){var i=e.target;if(b(i,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&this.target!==""&&!this.isColorPicker()&&!this.createPopupOnClick?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if(b(i,'[id="'+this.getPopUpElement().id+'"]')){var n=this.getLI(e.target);n&&(this.triggerSelect(e),this.closePopup(e,this.activeElem[0]))}},t.prototype.triggerSelect=function(e){var i,n,r,s=this.getLI(e.target);s&&(n=Array.prototype.indexOf.call(this.getULElement().children,s),r=this.items[n],r&&(i={element:s,item:r,event:e},this.trigger("select",i)))},t.prototype.openPopUp=function(e){var i=this;e===void 0&&(e=null);var n=this.getPopUpElement();if(!this.target)this.createItems(!0);else if(this.activeElem.length>1){var r=Tr(this.activeElem[0],"split-btn");r.isReact&&n.childNodes.length<1&&(r.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&n.childNodes.length<1&&(this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());var s=this.getULElement();this.popupWireEvents();var o={element:s,items:this.items,event:e,cancel:!1};this.trigger("beforeOpen",o,function(l){if(!l.cancel){var c=i.getULElement();if(i.dropDown.show(null,i.element),k([i.element],"e-active"),i.element.setAttribute("aria-expanded","true"),i.element.setAttribute("aria-owns",i.getPopUpElement().id),c&&c.focus(),i.enableRtl&&c.parentElement.style.left!=="0px"){var p=void 0;i.element.parentElement&&i.element.parentElement.classList.contains("e-split-btn-wrapper")?p=i.element.parentElement.offsetWidth:p=i.element.offsetWidth;var d=c.parentElement.offsetWidth-p,u=parseFloat(c.parentElement.style.left)-d;u<0&&(u=0),c.parentElement.style.left=u+"px"}var m={element:c,items:i.items};i.trigger("open",m)}})},t.prototype.closePopup=function(e,i){var n=this;e===void 0&&(e=null);var r=this.getULElement(),s={element:r,items:this.items,event:e,cancel:!1};this.trigger("beforeClose",s,function(o){if(o.cancel)r&&r.focus();else{var l=n.getPopUpElement();l&&C.remove(l,"keydown",n.keyBoardHandler),n.popupUnWireEvents();var c=n.getULElement(),p=void 0;c&&(p=c.querySelector(".e-selected")),p&&p.classList.remove("e-selected"),n.dropDown.hide(),O(n.activeElem,"e-active"),n.element.setAttribute("aria-expanded","false"),n.element.removeAttribute("aria-owns"),i&&i.focus();var d={element:c,items:n.items};n.trigger("close",d),!n.target&&c&&E(c),(!n.target||n.isColorPicker()||n.target&&!n.isColorPicker())&&n.createPopupOnClick&&n.destroyPopup()}})},t.prototype.unWireEvents=function(){this.createPopupOnClick||C.remove(document,"mousedown touchstart",this.delegateMousedownHandler),C.remove(this.element,"click",this.clickHandler),C.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(C.remove(this.getPopUpElement(),"click",this.clickHandler),C.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler)),C.remove(window,"resize",this.windowResize)},t.prototype.onPropertyChanged=function(e,i){var n=["content","cssClass","iconCss","iconPosition","disabled","enableRtl"];this.button.setProperties(cn(e,n));var r;this.isPopupCreated&&(r=this.getPopUpElement(),this.dropDown.setProperties(cn(e,["enableRtl"])));for(var s=0,o=Object.keys(e);s<o.length;s++){var l=o[s];switch(l){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(e.cssClass.indexOf(ut.VERTICAL)>-1||i.cssClass.indexOf(ut.VERTICAL)>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var c=this.element.querySelector("span.e-caret");e.cssClass.indexOf(ut.VERTICAL)>-1?ii(c,["e-icon-bottom"],["e-icon-right"]):ii(c,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(i.cssClass&&O([r],i.cssClass.split(" ")),e.cssClass&&k([r],e.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup();break}}},t.prototype.focusIn=function(){this.element.focus()},xe([v("")],t.prototype,"content",void 0),xe([v("")],t.prototype,"cssClass",void 0),xe([v(!1)],t.prototype,"disabled",void 0),xe([v("")],t.prototype,"iconCss",void 0),xe([v("Left")],t.prototype,"iconPosition",void 0),xe([v(!0)],t.prototype,"enableHtmlSanitizer",void 0),xe([Ln([],Vs)],t.prototype,"items",void 0),xe([v(!1)],t.prototype,"createPopupOnClick",void 0),xe([v("")],t.prototype,"target",void 0),xe([v("")],t.prototype,"closeActionEvents",void 0),xe([P()],t.prototype,"beforeItemRender",void 0),xe([P()],t.prototype,"beforeOpen",void 0),xe([P()],t.prototype,"beforeClose",void 0),xe([P()],t.prototype,"close",void 0),xe([P()],t.prototype,"open",void 0),xe([P()],t.prototype,"select",void 0),xe([P()],t.prototype,"created",void 0),t=xe([Vt],t),t}(Ri),yc=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Be=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},On="e-rtl",Jr="EJS-SPLITBUTTON",Cc=function(a){yc(t,a);function t(e,i){return a.call(this,e,i)||this}return t.prototype.preRender=function(){var e=this.element;if(e.tagName===Jr){for(var i=ir("ej2_instances",e),n=this.createElement("button",{attrs:{type:"button"}}),r=this.createElement(Jr,{className:"e-"+this.getModuleName()+"-wrapper"}),s=0,o=e.attributes.length;s<o;s++)n.setAttribute(e.attributes[s].nodeName,e.attributes[s].nodeValue);e.parentNode.insertBefore(r,e),E(e),e=n,r.appendChild(e),js("ej2_instances",i,e),this.wrapper=r,this.element=e}this.element.id||(this.element.id=rt("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},t.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,i){a.prototype.addItems.call(this,e,i),this.secondaryBtnObj.items=this.items},t.prototype.removeItems=function(e,i){a.prototype.removeItems.call(this,e,i),this.secondaryBtnObj.items=this.items},t.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(On),this.cssClass&&k([this.wrapper],this.cssClass.replace(/\s+/g," ").trim().split(" "))},t.prototype.createPrimaryButton=function(){var e={cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled};this.primaryBtnObj=new En(e),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},t.prototype.createSecondaryButton=function(){var e=this,i=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(i);var n={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick};n.beforeItemRender=function(r){e.createPopupOnClick&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown),e.trigger("beforeItemRender",r)},n.open=function(r){e.trigger("open",r)},n.close=function(r){e.trigger("close",r)},n.select=function(r){e.trigger("select",r)},n.beforeOpen=function(r){e.createPopupOnClick&&e.items.length===0&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown);var s=new Er;return e.trigger("beforeOpen",r,function(o){s.resolve(o)}),s},n.beforeClose=function(r){var s=new Er;return e.trigger("beforeClose",r,function(o){s.resolve(o)}),s},this.secondaryBtnObj=new Ji(n),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(i),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.isPopupCreated=this.secondaryBtnObj.isPopupCreated,this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right"),this.disabled&&this.wrapper.classList.add("e-splitbtn-disabled")},t.prototype.setAria=function(){Ce(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent?this.element.textContent+" splitbutton":"splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})},t.prototype.getModuleName=function(){return"split-btn"},t.prototype.toggle=function(){this.secondaryBtnObj.toggle()},t.prototype.destroy=function(){var e=this,i=[On];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var n=document.getElementById(this.element.id);n&&n.parentElement===this.wrapper&&(this.wrapper.tagName===Jr?(this.wrapper.innerHTML="",O([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),O([this.wrapper],this.cssClass.split(" "))):(O([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(r){e.element.removeAttribute(r)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),it(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),a.prototype.destroy.call(this),this.element&&!this.element.getAttribute("class")&&this.element.removeAttribute("class"),this.refreshing&&this.isAngular&&(this.element=this.wrapper,["e-control","e-split-btn","e-lib"].forEach(function(r){e.element.classList.add(r)}),js("ej2_instances",[this],this.element)),this.wrapper=null},t.prototype.wireEvents=function(){C.add(this.element,"click",this.primaryBtnClickHandler,this),new hn(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow",enter:"enter"}})},t.prototype.unWireEvents=function(){C.remove(this.element,"click",this.primaryBtnClickHandler),jt(this.element,hn).destroy()},t.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},t.prototype.btnKeyBoardHandler=function(e){switch(e.action){case"altdownarrow":this.clickHandler(e);break;case"enter":this.clickHandler(e),this.getPopUpElement()&&!this.getPopUpElement().classList.contains("e-popup-close")?(this.element.classList.remove("e-active"),this.secondaryBtnObj.element.classList.add("e-active")):this.secondaryBtnObj.element.classList.remove("e-active");break}},t.prototype.onPropertyChanged=function(e,i){var n=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(cn(e,n)),n=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(cn(e,n));for(var r=0,s=Object.keys(e);r<s.length;r++){var o=s[r];switch(o){case"cssClass":i.cssClass&&O([this.wrapper],i.cssClass.split(" ")),k([this.wrapper],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?k([this.wrapper],On):O([this.wrapper],On);break;case"disabled":e.disabled?k([this.wrapper],"e-splitbtn-disabled"):O([this.wrapper],"e-splitbtn-disabled")}}},t.prototype.focusIn=function(){this.element.focus()},Be([v("")],t.prototype,"content",void 0),Be([v("")],t.prototype,"cssClass",void 0),Be([v(!1)],t.prototype,"disabled",void 0),Be([v("")],t.prototype,"iconCss",void 0),Be([v("Left")],t.prototype,"iconPosition",void 0),Be([v(!1)],t.prototype,"createPopupOnClick",void 0),Be([Ln([],Vs)],t.prototype,"items",void 0),Be([v("")],t.prototype,"target",void 0),Be([P()],t.prototype,"beforeItemRender",void 0),Be([P()],t.prototype,"beforeOpen",void 0),Be([P()],t.prototype,"beforeClose",void 0),Be([P()],t.prototype,"click",void 0),Be([P()],t.prototype,"close",void 0),Be([P()],t.prototype,"open",void 0),Be([P()],t.prototype,"select",void 0),Be([P()],t.prototype,"created",void 0),t=Be([Vt],t),t}(Ji),Er=function(){function a(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}return a}(),Sc=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ve=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Pi="e-apply",Mn="e-cancel",Zr="e-current",Tc="e-container",Ii="e-ctrl-btn",gi="e-switch-ctrl-btn",Va="e-disabled",_a="e-value-switch-btn",Wa="e-handler",Qa="e-hex",es="e-hide-hex-value",ts="e-hide-opacity",vi="e-hide-switchable-value",Gt="e-hide-value",Ka="e-hide-valueswitcher",Hi="e-hsv-color",Ga="e-hsv-container",bi="e-selected-value",Bn="e-mode-switch-btn",is="e-nocolor-item",ns="e-opacity-value",Fi="e-palette",Rn="e-color-palette",rs="e-color-picker",An="e-preview-container",Pn="e-previous",Ec="e-rtl",yi="e-show-value",qi="e-selected",In="e-split-preview",Hn="e-tile",Lc={default:["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},Xa=function(a){Sc(t,a);function t(e,i){return a.call(this,e,i)||this}return t.prototype.preRender=function(){var e=this.element;this.formElement=b(this.element,"form"),this.formElement&&C.add(this.formElement,"reset",this.formResetHandler,this);var i={Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"};this.l10n=new Ir("colorpicker",i,this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)},t.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||k([this.container.parentElement],ts),this.renderComplete()},t.prototype.initWrapper=function(){var e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),Ce(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:Tc}),this.getWrapper().appendChild(this.container);var i=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&this.mode==="Palette"&&this.value===""&&(i="");var n=i.slice(0,7);h(this.initialInputValue)&&(this.initialInputValue=n),this.element.value=n,this.enableOpacity?this.setProperties({value:i},!0):this.setProperties({value:n},!0),this.enableRtl&&e.classList.add(Ec),this.cssClass&&k([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.tileRipple=zs(this.container,{selector:"."+Hn}),this.ctrlBtnRipple=zs(this.container,{selector:".e-btn"})},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.createWidget=function(){this.mode==="Palette"?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),x.isDevice&&this.refreshPopupPos()},t.prototype.createSplitBtn=function(){var e=this,i=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(i),this.splitBtn=new Cc({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){var o=new MouseEvent("click",{bubbles:!0,cancelable:!1});e.trigger("change",{currentValue:{hex:e.value.slice(0,7),rgba:e.convertToRgbString(e.hexToRgb(e.value))},previousValue:{hex:null,rgba:null},value:e.value,event:o})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(i);var n=this.createElement("span",{className:In});F(".e-selected-color",i).appendChild(n),n.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var r=this.getPopupEle();if(k([r],"e-colorpicker-popup"),this.cssClass&&k([r],this.cssClass.replace(/\s+/g," ").trim().split(" ")),x.isDevice&&!this.createPopupOnClick){var s=this.getPopupInst();s.relateTo=document.body,s.position={X:"center",Y:"center"},s.targetType="container",s.collision={X:"fit",Y:"fit"},s.offsetY=4,r.style.zIndex=tr(this.splitBtn.element).toString()}this.bindCallBackEvent()},t.prototype.onOpen=function(){if(this.trigger("open",{element:this.container}),!x.isDevice){var e=this.getPopupInst(),i=Is(e.element);i.length>0&&(e.collision={X:"flip",Y:"fit"},e.position={X:"right",Y:"bottom"},e.targetType="container")}},t.prototype.getPopupInst=function(){return jt(this.getPopupEle(),At)},t.prototype.bindCallBackEvent=function(){var e=this;this.splitBtn.beforeOpen=function(i){var n=new Er;return e.trigger("beforeOpen",i,function(r){if(!r.cancel){var s=e.getPopupEle();if(s.style.top=z(0+pageYOffset),s.style.left=z(0+pageXOffset),s.style.display="block",e.createWidget(),s.style.display="",x.isDevice){if(e.createPopupOnClick){var o=e.getPopupInst();o.relateTo=document.body,o.position={X:"center",Y:"center"},o.targetType="container",o.collision={X:"fit",Y:"fit"},o.offsetY=4,s.style.zIndex=tr(e.splitBtn.element).toString()}e.modal=e.createElement("div"),e.modal.className="e-"+e.getModuleName()+" e-modal",e.modal.style.display="none",document.body.insertBefore(e.modal,s),document.body.className+=" e-colorpicker-overflow",e.modal.style.display="block",e.modal.style.zIndex=(Number(s.style.zIndex)-1).toString()}}i.cancel=r.cancel,n.resolve(r)}),n},this.splitBtn.beforeClose=function(i){var n=new Er;if(h(i.event))n.resolve(i);else{var r={element:e.container,event:i.event,cancel:!1};e.trigger("beforeClose",r,function(s){x.isDevice&&i.event.target===e.modal&&(s.cancel=!0),s.cancel||e.onPopupClose(),i.cancel=s.cancel,n.resolve(s)})}return n}},t.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",F("."+In,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",O([this.container],[rs,Rn]),x.isDevice&&this.modal&&(O([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.createPalette=function(){if(ii(this.container,[Rn],[rs]),this.presetColors){var e=this.createElement("div",{className:"e-custom-palette"});this.appendElement(e);var i=Object.keys(this.presetColors);if(i.length===1)this.appendPalette(this.presetColors[i[0]],i[0],e);else for(var n=0,r=i.length;n<r;n++)this.appendPalette(this.presetColors[i[n]],i[n],e);re(".e-row",e).length>10&&k([e],"e-palette-group")}else this.appendPalette(Lc.default,"default");this.mode==="Palette"&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var s=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=z(this.container.children[0].offsetWidth+s+s),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},t.prototype.firstPaletteFocus=function(){F("."+qi,this.container.children[0])||re("."+Fi,this.container)[0].focus()},t.prototype.appendPalette=function(e,i,n){var r=this.createElement("div",{className:Fi,attrs:{tabindex:"0",role:"grid"}});n?n.appendChild(r):this.appendElement(r);for(var s,o,l,c=0,p=e.length;c<p;c++)(c===0||c%this.columns===0)&&(s=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),r.appendChild(s)),l=this.roundValue(e[c]).toLowerCase(),o=this.createElement("span",{className:Hn,attrs:{role:"gridcell","aria-label":l,"aria-selected":"false",tabindex:"0"}}),this.trigger("beforeTileRender",{element:o,presetName:i,value:e[c]}),s.appendChild(o),this.value===l&&(this.addTileSelection(o),r.focus()),o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(l))},t.prototype.setNoColor=function(){var e=this.container.querySelector(".e-row").children[0];e.classList.add(is),this.value||(e.classList.add(qi),b(e,"."+Fi).focus()),["aria-selected","aria-label"].forEach(function(i){e.removeAttribute(i)}),e.style.backgroundColor=""},t.prototype.appendElement=function(e,i){i===void 0&&(i=0);var n=this.container.children[i];n?this.container.insertBefore(e,n):this.container.appendChild(e)},t.prototype.addTileSelection=function(e){e.classList.add(qi),e.setAttribute("aria-selected","true")},t.prototype.createPicker=function(){ii(this.container,[rs],[Rn]);var e=this.createElement("div",{className:Ga});this.appendElement(e),e.appendChild(this.createElement("div",{className:Hi}));var i=this.createElement("span",{className:Wa,attrs:{tabindex:"0"}});e.appendChild(i),(this.value===null||this.value==="")&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},t.prototype.setHsvContainerBg=function(e){e===void 0&&(e=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))},t.prototype.getHsvContainer=function(){return F("."+Ga,this.container)},t.prototype.setHandlerPosition=function(){var e=this.getDragHandler(),i=F("."+Hi,this.container);this.enableRtl?e.style.left=z(i.offsetWidth*Math.abs(100-this.hsv[1])/100):e.style.left=z(i.offsetWidth*this.hsv[1]/100),e.style.top=z(i.offsetHeight*(100-this.hsv[2])/100)},t.prototype.createSlider=function(){var e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);var i=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(i,e.children[0]);var n=this.createElement("div",{className:"e-hue-slider"});i.appendChild(n),this.hueSlider=new Ma({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(n),this.enableOpacity&&(n=this.createElement("div",{className:"e-opacity-slider"}),i.appendChild(n),this.createOpacitySlider(n))},t.prototype.createOpacitySlider=function(e){this.opacitySlider=new Ma({value:this.rgb[3]*100,min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);var i=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(i),this.updateOpacitySliderBg()},t.prototype.updateOpacitySliderBg=function(){var e=this.enableRtl?"to left":"to right",i=F(".e-opacity-empty-track",this.opacitySlider.element);i&&(i.style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},t.prototype.hueChange=function(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()},t.prototype.opacityChange=function(e){var i=e.value,n=this.rgbToHex(this.rgb);this.hsv[3]=i/100,this.rgb[3]=i/100;var r=this.rgbToHex(this.rgb);this.updateOpacityInput(i);var s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.triggerEvent(r,n,s)},t.prototype.updateOpacityInput=function(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(Gt)){var i=jt(F("."+ns,this.container),Mt);i.value=e,i.dataBind()}},t.prototype.createPreview=function(e){var i=this.createElement("div",{className:An});e.appendChild(i);var n=this.createElement("span",{className:"e-preview "+Zr});i.appendChild(n);var r=this.convertToRgbString(this.rgb);n.style.backgroundColor=r,n=this.createElement("span",{className:"e-preview "+Pn}),i.appendChild(n),n.style.backgroundColor=r},t.prototype.isPicker=function(){return!this.container.classList.contains(Rn)},t.prototype.getPopupEle=function(){return this.container.parentElement},t.prototype.createNumericInput=function(e,i,n,r){var s=this,o=new Mt({value:i,placeholder:n,min:0,max:r,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(l){l.event&&s.inputHandler(l.event)}});o.createElement=this.createElement,o.appendTo(e)},t.prototype.createInput=function(){var e=this.isPicker(),i=this.getWrapper();if(e&&!i.classList.contains(Gt)||!e&&i.classList.contains(yi)){var n=this.createElement("div",{className:bi});e?this.appendElement(n,2):this.appendElement(n,1);var r=this.createElement("div",{className:"e-input-container"});if(n.appendChild(r),i.classList.contains(Ka)||this.appendValueSwitchBtn(n),!i.classList.contains(es)){var s=this.createElement("input",{className:Qa,attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});r.appendChild(s),Vr.createInput({element:s,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),Vr.setValue(this.value.slice(0,7),s),s.addEventListener("input",this.inputHandler.bind(this))}if(!i.classList.contains(vi)){var o=void 0,l=void 0;this.isRgb?(o="RGB",l=this.rgb):(o="HSV",l=this.hsv);for(var c=["rh","gs","bv"],p=0;p<3;p++)this.createNumericInput(r.appendChild(this.createElement("input",{className:"e-"+c[p]+"-value"})),l[p],o[p],255);this.enableOpacity&&this.appendOpacityValue(r)}}},t.prototype.appendOpacityValue=function(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:ns})),this.rgb[3]*100,"A",100)},t.prototype.appendValueSwitchBtn=function(e){var i=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+_a,attrs:{title:"Toggle format"}});e.appendChild(i),this.isPicker()&&!this.getWrapper().classList.contains(vi)&&i.addEventListener("click",this.formatSwitchHandler.bind(this))},t.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var e=this.createElement("div",{className:gi});if(this.container.appendChild(e),this.showButtons){var i=this.createElement("div",{className:Ii});e.appendChild(i);var n=this.l10n.getConstant("Apply");i.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-primary e-small "+Pi,attrs:{title:n}}));var r=this.l10n.getConstant("Cancel");i.appendChild(this.createElement("button",{innerHTML:r,className:"e-btn e-css e-flat e-small "+Mn,attrs:{title:r}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},t.prototype.appendModeSwitchBtn=function(){var e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+Bn,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});F("."+gi,this.container).insertBefore(e,F("."+Ii,this.container))},t.prototype.createDragTooltip=function(){var e=this,i=new ln({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",htmlAttributes:{title:"tooltip"},beforeOpen:function(n){e.tooltipEle=n.element},animation:{open:{effect:"None"},close:{effect:"None"}}});i.createElement=this.createElement,i.appendTo(this.container),i.open(this.container),this.tooltipEle.style.zIndex=tr(this.tooltipEle).toString(),this.tooltipEle.setAttribute("aria-label","colorpicker-tooltip"),F(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},t.prototype.getTooltipInst=function(){return jt(this.container,ln)},t.prototype.setTooltipOffset=function(e){this.getTooltipInst().offsetY=e},t.prototype.toggleDisabled=function(e){e?this.getWrapper().classList.add(Va):this.getWrapper().classList.remove(Va),this.showButtons&&[].slice.call(re(".e-btn",this.container)).forEach(function(i){e?Ce(i,{disabled:""}):i.removeAttribute("disabled")})},t.prototype.convertToRgbString=function(e){return e.length?e.length===4?"rgba("+e.join()+")":"rgb("+e.join()+")":""},t.prototype.convertToHsvString=function(e){return e.length===4?"hsva("+e.join()+")":"hsv("+e.join()+")"},t.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},t.prototype.convertToOtherFormat=function(e,i){e===void 0&&(e=!1);var n=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var r=this.rgbToHex(this.rgb),s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.updateInput(r),this.triggerEvent(r,n,s,e,i)},t.prototype.updateInput=function(e){var i=this.getWrapper();i.classList.contains(Gt)||(i.classList.contains(es)||Vr.setValue(e.substr(0,7),F("."+Qa,this.container)),i.classList.contains(vi)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},t.prototype.updatePreview=function(e){this.enableOpacity&&this.updateOpacitySliderBg(),F(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,F("."+An+" ."+Zr,this.container).style.backgroundColor=e,F("."+An+" ."+Pn,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},t.prototype.getDragHandler=function(){return F("."+Wa,this.container)},t.prototype.removeTileSelection=function(){var e=[].slice.call(re("."+qi,this.container.children[0]));e.forEach(function(i){i.classList.remove(qi),i.setAttribute("aria-selected","false")})},t.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(function(i,n){return n!==3?parseInt(i,10):parseFloat(i)})},t.prototype.getValue=function(e,i){if(e||(e=this.value),i=i?i.toLowerCase():"hex",e[0]==="r"){var n=this.convertRgbToNumberArray(e);if(i==="hex"||i==="hexa"){var r=this.rgbToHex(n);return i==="hex"?r.slice(0,7):r}else return i==="hsv"?this.convertToHsvString(this.rgbToHsv.apply(this,n.slice(0,3))):i==="hsva"?this.convertToHsvString(this.rgbToHsv.apply(this,n)):"null"}else if(e[0]==="h"){var n=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if(i==="rgba")return this.convertToRgbString(n);if(i==="hex"||i==="hexa"){var r=this.rgbToHex(n);return i==="hex"?r.slice(0,7):r}else return i==="rgb"?this.convertToRgbString(n.slice(0,3)):"null"}else{e=this.roundValue(e);var s=this.hexToRgb(e);return(i==="rgb"||i==="hsv")&&(s=s.slice(0,3)),i==="rgba"||i==="rgb"?this.convertToRgbString(s):i==="hsva"||i==="hsv"?this.convertToHsvString(this.rgbToHsv.apply(this,s)):i==="hex"?e.slice(0,7):i==="a"?s[3].toString():"null"}},t.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},t.prototype.getModuleName=function(){return"colorpicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.wireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();C.add(e,"keydown",this.pickerKeyDown,this);var i=F("."+Ii,this.container);i&&C.add(i,"keydown",this.ctrlBtnKeyDown,this),C.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),C.add(F("."+Pn,this.container),"click",this.previewHandler,this)}else C.add(this.container,"click",this.paletteClickHandler,this),C.add(this.container,"keydown",this.paletteKeyDown,this)},t.prototype.formResetHandler=function(){this.value=this.initialInputValue,Ce(this.element,{value:this.initialInputValue})},t.prototype.addCtrlSwitchEvent=function(){var e=F("."+gi,this.container);e&&C.add(e,"click",this.btnClickHandler,this)},t.prototype.ctrlBtnKeyDown=function(e){if(e.keyCode===13){var i=F("."+Pi,this.container);if(i){var n=this.rgbToHex(this.rgb);this.triggerChangeEvent(n)}this.splitBtn.element.focus()}},t.prototype.pickerKeyDown=function(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:{e.preventDefault();var i=this.rgbToHex(this.rgb);this.enterKeyHandler(i,e)}}},t.prototype.enterKeyHandler=function(e,i){this.triggerChangeEvent(e),this.inline||this.splitBtn.element.focus()},t.prototype.closePopup=function(e){var i=this,n={element:this.container,event:e,cancel:!1};this.trigger("beforeClose",n,function(r){r.cancel||(i.splitBtn.toggle(),i.onPopupClose())})},t.prototype.triggerChangeEvent=function(e,i){var n=e.slice(0,7);this.trigger("change",{currentValue:{hex:n,rgba:this.convertToRgbString(this.rgb)},event:i,previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:n}),this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:n},!0),this.element.value=n||"#000000"},t.prototype.handlerDragPosition=function(e,i,n){n.preventDefault(),this.hsv[e]+=i*(n.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0,n)},t.prototype.handlerDown=function(e){e.preventDefault(),e.type==="mousedown"?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(!1,e),this.getDragHandler().focus(),C.add(document,"mousemove touchmove",this.handlerMove,this),C.add(document,"mouseup touchend",this.handlerEnd,this)},t.prototype.handlerMove=function(e){e.type!=="touchmove"&&e.preventDefault();var i,n;e.type==="mousemove"?(i=Math.abs(e.pageX-pageXOffset),n=Math.abs(e.pageY-pageYOffset)):(i=Math.abs(e.changedTouches[0].pageX-pageXOffset),n=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(i,n);var r=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(!1,e),this.getTooltipInst().refresh(r),this.tooltipEle.style.transform||(Math.abs(this.clientX-i)>8||Math.abs(this.clientY-n)>8)&&(F("."+Hi,this.container).style.cursor="pointer",r.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",r.classList.add("e-hide-handler"))},t.prototype.setHsv=function(e,i){var n=F("."+Hi,this.container),r=n.getBoundingClientRect();this.enableRtl?e=e>r.right?0:Math.abs(e-r.right):e=e>r.left?Math.abs(e-r.left):0,i=i>r.top?Math.abs(i-r.top):0,this.hsv[2]=Math.round(Number(100*(n.offsetHeight-Math.max(0,Math.min(n.offsetHeight,i-n.offsetTop)))/n.offsetHeight)*10)/10,this.hsv[1]=Math.round(Number(100*Math.max(0,Math.min(n.offsetWidth,e-n.offsetLeft))/n.offsetWidth)*10)/10},t.prototype.handlerEnd=function(e){e.type!=="touchend"&&e.preventDefault(),C.remove(document,"mousemove touchmove",this.handlerMove),C.remove(document,"mouseup touchend",this.handlerEnd);var i=this.getDragHandler();F("."+Hi,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",i.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(e)},t.prototype.btnClickHandler=function(e){var i=e.target;b(i,"."+Bn)?(e.stopPropagation(),this.switchToPalette()):(i.classList.contains(Pi)||i.classList.contains(Mn))&&this.ctrlBtnClick(i,e)},t.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),E(F(".e-slider-preview",this.container)),this.getWrapper().classList.contains(Gt)||it(F("."+bi,this.container)),E(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},t.prototype.refreshImageEditorPopupPos=function(){if(x.isDevice){var e=this.getPopupEle();e.style.left=z(0+pageXOffset),e.style.top=z(0+pageYOffset);var i=document.querySelector("#"+this.element.parentElement.parentElement.id.split("-popup")[0]);i&&e.parentElement.ej2_instances[0].refreshPosition(i)}},t.prototype.refreshPopupPos=function(){if(!this.inline){var e=this.getPopupEle();e.style.left=z(0+pageXOffset),e.style.top=z(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},t.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},t.prototype.updateValue=function(e,i,n,r){for(var s=["e-rh-value","e-gs-value","e-bv-value"],o,l=0,c=s.length;l<c;l++)o=jt(F("."+s[l],this.container),Mt),o.value=Math.round(e[l]),i&&(o.placeholder=s[l].substr(n,1).toUpperCase(),o.max=r?r[l]:255),o.dataBind()},t.prototype.previewHandler=function(e){var i=e.target,n=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(i.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var r=this.rgbToHex(this.rgb),s=this.rgbToHsv.apply(this,this.rgb);s[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:s[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(s[0]),this.enableOpacity&&s[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:s[3]*100},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=s,this.setHandlerPosition(),this.updateInput(r),F("."+An+" ."+Zr,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(r,n,this.convertToRgbString(this.rgb),!1,e)},t.prototype.paletteClickHandler=function(e){e.preventDefault();var i=e.target;if(i.classList.contains(Hn)){if(this.removeTileSelection(),this.addTileSelection(i),i.classList.contains(is))this.noColorTile();else{var n=i.getAttribute("aria-label"),r=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(n)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(yi)&&this.updateInput(n),this.triggerEvent(n,r,this.convertToRgbString(this.rgb),!1,e)}!this.inline&&!this.showButtons&&this.closePopup(e)}else b(i,"."+Bn)?this.switchToPicker():i.classList.contains(Pi)||i.classList.contains(Mn)?this.ctrlBtnClick(i,e):this.getWrapper().classList.contains(yi)&&b(i,"."+_a)&&this.formatSwitchHandler()},t.prototype.noColorTile=function(e){e===void 0&&(e=!1);var i=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",i,"",e)},t.prototype.switchToPicker=function(){var e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(re("."+Fi,this.container)).forEach(function(n){E(n)}),e.classList.contains(yi)&&E(F("."+bi,this.container)),this.container.style.width="";var i=F(".e-custom-palette",this.container);this.presetColors&&it(i),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},t.prototype.ctrlBtnClick=function(e,i){if(e.classList.contains(Pi)){var n=this.rgbToHex(this.rgb);this.triggerChangeEvent(n,i)}if(!this.inline)this.closePopup(i),this.splitBtn.element.focus();else if(e.classList.contains(Mn)){var r={element:this.container,event:i,cancel:!1};this.trigger("beforeClose",r)}},t.prototype.paletteKeyDown=function(e){var i=e.target;if(i.classList.contains(Fi)){var n,r,s=[].slice.call(re("."+Hn,i)),o=s.filter(function(c){return c.classList.contains("e-selected")}).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),n=o?s[this.tilePosition(s,o,this.enableRtl?-1:1)]:s[this.enableRtl?s.length-1:0],this.keySelectionChanges(n);break;case 37:e.preventDefault(),n=o?s[this.tilePosition(s,o,this.enableRtl?1:-1)]:s[this.enableRtl?0:s.length-1],this.keySelectionChanges(n);break;case 38:e.preventDefault(),r=o?this.tilePosition(s,o,-this.columns):0,n=s[r]?s[r]:s[r-this.columns],this.keySelectionChanges(n);break;case 40:e.preventDefault(),r=o?this.tilePosition(s,o,this.columns):s.length-1,s[r]||(r%=s.length,r+=s[s.length-1].parentElement.childElementCount),n=s[r],this.keySelectionChanges(n);break;case 13:if(e.preventDefault(),o){var l=o.getAttribute("aria-label");this.enterKeyHandler(l||"",e)}}}},t.prototype.keySelectionChanges=function(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(is))this.noColorTile(!0);else{var i=e.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(i),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(yi)&&this.updateInput(i),this.triggerEvent(i,n,this.convertToRgbString(this.rgb),!0)}},t.prototype.tilePosition=function(e,i,n){e=Array.prototype.slice.call(e);var r=e.length,s=this.columns-e[r-1].parentElement.childElementCount,o=e.indexOf(i);return o+=n,o<0?o+=r+s:o%=r+s,o},t.prototype.inputHandler=function(e){var i=e.target;if(i.value.length){var n,r,s=F(".e-float-text",i.parentElement).textContent;switch(s){case"HEX":{var o="";if((i.value[0]==="#"&&i.value.length!==5||i.value[0]!=="#"&&i.value.length!==4)&&(o=this.roundValue(i.value)),o.length===9)r=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(o+o.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),r,i.value,e);else return;break}case"R":this.rgb[0]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[0]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r,null,e));break;case"G":this.rgb[1]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[1]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r,null,e));break;case"B":this.rgb[2]!==Number(i.value)&&(r=this.rgbToHex(this.rgb),this.rgb[2]=Number(i.value),n=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(n,r,null,e));break;case"H":this.hueSlider.value=Number(i.value);break;case"S":this.hsv[1]!==Number(i.value)&&(this.hsv[1]=Number(i.value),this.updateHsv(),this.convertToOtherFormat(!1,e));break;case"V":this.hsv[2]!==Number(i.value)&&(this.hsv[2]=Number(i.value),this.updateHsv(),this.convertToOtherFormat(!1,e));break;case"A":this.opacitySlider.value=Number(i.value);break}}},t.prototype.inputValueChange=function(e,i,n,r){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;var s=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(n||s);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(s,i,o,!1,r)},t.prototype.triggerEvent=function(e,i,n,r,s){r===void 0&&(r=!1);var o=e.slice(0,7);h(s)&&(s=new MouseEvent("click",{bubbles:!0,cancelable:!1})),!this.showButtons&&!r?(this.trigger("change",{currentValue:{hex:o,rgba:n},event:s,previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:o},!0),this.element.value=o||"#000000"):this.trigger("select",{currentValue:{hex:o,rgba:n},event:s,previousValue:{hex:i.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(i))}})},t.prototype.destroy=function(){var e=this,i=this.getWrapper();a.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(n){e.element.removeAttribute(n)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&E(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),E(i)),this.container=null,this.formElement&&C.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.destroyOtherComp=function(){if(this.isPicker()){for(var e=b(this.hueSlider.element,".e-color-picker"),i=e.querySelectorAll(".e-numerictextbox"),n=0;n<i.length;n++)jt(i[n],Mt).destroy();this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var r=this.getTooltipInst();r.close(),r.destroy(),this.tooltipEle=null}},t.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},t.prototype.unWireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();C.remove(e,"keydown",this.pickerKeyDown);var i=F("."+Ii,this.container);i&&C.remove(i,"keydown",this.ctrlBtnKeyDown),C.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&C.remove(F("."+gi,this.container),"click",this.btnClickHandler),C.remove(F("."+Pn,this.container),"click",this.previewHandler)}else C.remove(this.container,"click",this.paletteClickHandler),C.remove(this.container,"keydown",this.paletteKeyDown)},t.prototype.roundValue=function(e){if(!e)return"";e[0]!=="#"&&(e="#"+e);var i=e.length;if(i===4&&(e+="f",i=5),i===5){for(var n="",r=1,s=e.length;r<s;r++)n+=e.charAt(r)+e.charAt(r);e="#"+n,i=9}return i===7&&(e+="ff"),e},t.prototype.hexToRgb=function(e){if(!e)return[];e=e.trim(),e.length!==9&&(e=this.roundValue(e));var i=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var n=parseInt(e,16),r=[];return r.push(n>>16&255),r.push(n>>8&255),r.push(n&255),r.push(i),r},t.prototype.rgbToHsv=function(e,i,n,r){if(this.rgb&&!this.rgb.length)return[];e/=255,i/=255,n/=255;var s=Math.max(e,i,n),o=Math.min(e,i,n),l,c=s,p=s-o,d=s===0?0:p/s;if(s===o)l=0;else{switch(s){case e:l=(i-n)/p+(i<n?6:0);break;case i:l=(n-e)/p+2;break;case n:l=(e-i)/p+4;break}l/=6}var u=[Math.round(l*360),Math.round(d*1e3)/10,Math.round(c*1e3)/10];return h(r)||u.push(r),u},t.prototype.hsvToRgb=function(e,i,n,r){var s,o,l;if(i/=100,n/=100,i===0)return s=o=l=n,[Math.round(s*255),Math.round(o*255),Math.round(l*255),r];e/=60;var c=Math.floor(e),p=e-c,d=n*(1-i),u=n*(1-i*p),m=n*(1-i*(1-p));switch(c){case 0:s=n,o=m,l=d;break;case 1:s=u,o=n,l=d;break;case 2:s=d,o=n,l=m;break;case 3:s=d,o=u,l=n;break;case 4:s=m,o=d,l=n;break;default:s=n,o=d,l=u}var f=[Math.round(s*255),Math.round(o*255),Math.round(l*255)];return h(r)||f.push(r),f},t.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(h(e[3])?"":e[3]!==0?(Math.round(e[3]*255)+65536).toString(16).substr(-2):"00"):""},t.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype.changeModeSwitcherProp=function(e){var i=F("."+gi,this.container);e?i?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):i&&(this.showButtons?E(F("."+Bn,i)):it(i))},t.prototype.changeShowBtnProps=function(e){var i=F("."+gi,this.container);e?(i&&it(i),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?E(F("."+Ii,i)):it(i)},t.prototype.changeValueProp=function(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),E(b(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),this.rgb.length===4&&this.updateOpacityInput(this.rgb[3]*100);else{this.removeTileSelection();var i=this.container.querySelector('span[aria-label="'+this.roundValue(e)+'"]');i&&this.addTileSelection(i)}},t.prototype.setInputEleProps=function(){it(F("."+bi,this.container)),this.createInput()},t.prototype.changeDisabledProp=function(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps()),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},t.prototype.changeCssClassProps=function(e,i){var n=this.getWrapper(),r=this.getPopupEle();i&&O([n,r],i.split(" ")),e&&k([n,r],e.replace(/\s+/g," ").trim().split(" "))},t.prototype.changeRtlProps=function(e){e?k([this.getWrapper()],"e-rtl"):O([this.getWrapper()],"e-rtl")},t.prototype.changePaletteProps=function(){E(this.container.children[0]),this.container.style.width="",this.createPalette()},t.prototype.changeOpacityProps=function(e){var i=this.getWrapper();e?(O([this.container.parentElement],ts),this.createOpacitySlider(F(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!i.classList.contains(Gt)&&!i.classList.contains(vi)&&this.appendOpacityValue(F(".e-input-container",this.container))):(k([this.container.parentElement],ts),this.opacitySlider.destroy(),it(this.opacitySlider.element),this.opacitySlider=null,!i.classList.contains(Gt)&&!i.classList.contains(vi)&&it(F("."+ns,this.container).parentElement))},t.prototype.onPropertyChanged=function(e,i){var n=this;if(!h(e.value)){var r=this.roundValue(e.value);if(r.length===9){this.element.value=this.roundValue(r).slice(0,7);var s=this.splitBtn&&F("."+In,this.splitBtn.element);s&&(s.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)))}else if(this.noColor&&this.mode==="Palette"&&this.value===""){var s=this.splitBtn&&F("."+In,this.splitBtn.element);s.style.backgroundColor=""}else this.value=i.value}if(!this.inline&&h(e.inline)){var o=["disabled","enableRtl"];if(this.splitBtn.setProperties(cn(e,o)),!this.isPopupOpen()){this.changeCssClassProps(e.cssClass,i.cssClass),this.changeRtlProps(e.enableRtl);return}}for(var l=function(m){switch(m){case"inline":e.inline?(c.getWrapper().appendChild(c.container),c.splitBtn.destroy(),E(c.element.nextElementSibling),c.container.children.length||c.createWidget()):(c.destroyOtherComp(),c.unWireEvents(),c.container.innerHTML="",c.createSplitBtn());break;case"cssClass":{c.changeCssClassProps(e.cssClass,i.cssClass);var f=e.cssClass.split(" ").concat(i.cssClass.split(" "));f=f.reduce(function(y,S){return y.indexOf(S)<0&&y.push(S),y},[]);var g=0;f.forEach(function(y){if(g===0&&(y===Gt||y===Ka||y===yi||y===es||y===vi)){var S=F("."+bi,n.container);S&&it(F("."+bi,n.container)),n.createInput(),g++}});break}case"enableRtl":c.isPicker()&&(c.hueSlider.enableRtl=e.enableRtl,c.enableOpacity&&(c.opacitySlider.enableRtl=e.enableRtl),c.setInputEleProps()),c.changeRtlProps(e.enableRtl);break;case"disabled":c.changeDisabledProp(e.disabled);break;case"value":c.value!==i.value&&c.changeValueProp(e.value);break;case"showButtons":c.changeShowBtnProps(e.showButtons);break;case"mode":e.mode==="Picker"?c.switchToPicker():c.switchToPalette();break;case"modeSwitcher":c.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":c.isPicker()||c.changePaletteProps();break;case"noColor":e.noColor?c.mode==="Palette"&&!c.modeSwitcher&&c.setNoColor():c.changePaletteProps();break;case"enableOpacity":c.changeOpacityProps(e.enableOpacity);break}},c=this,p=0,d=Object.keys(e);p<d.length;p++){var u=d[p];l(u)}},t.prototype.focusIn=function(){this.element.parentElement.focus()},ve([v("#008000ff")],t.prototype,"value",void 0),ve([v("")],t.prototype,"cssClass",void 0),ve([v(!1)],t.prototype,"disabled",void 0),ve([v("Picker")],t.prototype,"mode",void 0),ve([v(!0)],t.prototype,"modeSwitcher",void 0),ve([v(null)],t.prototype,"presetColors",void 0),ve([v(!0)],t.prototype,"showButtons",void 0),ve([v(10)],t.prototype,"columns",void 0),ve([v(!1)],t.prototype,"inline",void 0),ve([v(!1)],t.prototype,"noColor",void 0),ve([v(!1)],t.prototype,"enablePersistence",void 0),ve([v(!0)],t.prototype,"enableOpacity",void 0),ve([v(!1)],t.prototype,"createPopupOnClick",void 0),ve([P()],t.prototype,"select",void 0),ve([P()],t.prototype,"change",void 0),ve([P()],t.prototype,"beforeTileRender",void 0),ve([P()],t.prototype,"beforeOpen",void 0),ve([P()],t.prototype,"open",void 0),ve([P()],t.prototype,"beforeClose",void 0),ve([P()],t.prototype,"beforeModeSwitch",void 0),ve([P()],t.prototype,"onModeSwitch",void 0),ve([P()],t.prototype,"created",void 0),t=ve([Vt],t),t}(Ri),Zl=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),oe=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},ss="e-vertical",he="e-toolbar-items",ce="e-toolbar-item",ft="e-rtl",fe="e-separator",Fn="e-popup-up-icon",ji="e-popup-down-icon",Ya="e-popup-open",$a="e-template",Ie="e-overlay",Ja="e-toolbar-text",os="e-popup-text",at="e-overflow-show",qn="e-overflow-hide",wc="e-tbar-btn",ze="e-hor-nav",Za="e-scroll-nav",kc="e-toolbar-right",Dc="e-toolbar-left",el="e-toolbar-center",lt="e-tbar-pos",xc="e-hscroll-content",Nc="e-vscroll-content",as="e-hscroll-bar",Oc="e-hor-nav",zi="e-toolbar-pop",Ht="e-toolbar-popup",Mc="e-tbar-btn-text",Ui="e-nav-active",Vi="e-ignore",ls="e-popup-alone",mt="e-hidden",tl="e-toolbar-multirow",il="e-multirow-pos",hs="e-multirow-separator",cs="e-extended-separator",nl="e-extended-toolbar",jn="e-toolbar-extended",Bc="e-expended-nav",ps="e-tbar-extended",Rc=function(a){Zl(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return oe([v("")],t.prototype,"id",void 0),oe([v("")],t.prototype,"text",void 0),oe([v("auto")],t.prototype,"width",void 0),oe([v("")],t.prototype,"cssClass",void 0),oe([v(!1)],t.prototype,"showAlwaysInPopup",void 0),oe([v(!1)],t.prototype,"disabled",void 0),oe([v("")],t.prototype,"prefixIcon",void 0),oe([v("")],t.prototype,"suffixIcon",void 0),oe([v(!0)],t.prototype,"visible",void 0),oe([v("None")],t.prototype,"overflow",void 0),oe([v("")],t.prototype,"template",void 0),oe([v("Button")],t.prototype,"type",void 0),oe([v("Both")],t.prototype,"showTextOn",void 0),oe([v(null)],t.prototype,"htmlAttributes",void 0),oe([v("")],t.prototype,"tooltipText",void 0),oe([v("Left")],t.prototype,"align",void 0),oe([P()],t.prototype,"click",void 0),oe([v(-1)],t.prototype,"tabIndex",void 0),t}(ee),eh=function(a){Zl(t,a);function t(e,i){var n=a.call(this,e,i)||this;return n.resizeContext=n.resize.bind(n),n.orientationChangeContext=n.orientationChange.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return t.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(n){!h(n)&&!h(n.ej2_instances)&&!h(n.ej2_instances[0])&&!n.ej2_instances[0].isDestroyed&&n.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(n){h(e.element.querySelector(n))||(document.body.appendChild(e.element.querySelector(n)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),E(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&O([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach(function(n){return e.element.removeAttribute(n)}),a.prototype.destroy.call(this)},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(ss),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,ft)},t.prototype.wireEvents=function(){C.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),window.addEventListener("orientationchange",this.orientationChangeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new hn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),C.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},t.prototype.updateTabIndex=function(e){var i=this.element.querySelector("."+ce+":not(."+Ie+" ):not(."+fe+" ):not(."+mt+" )");if(!h(i)&&!h(i.firstElementChild)){var n=i.firstElementChild.getAttribute("data-tabindex");n&&n==="-1"&&i.firstElementChild.tagName!=="INPUT"&&i.firstElementChild.setAttribute("tabindex",e)}},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(C.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if(e.target.tagName!=="INPUT"){var i=!h(this.popObj)&&Xe(this.popObj.element)&&this.overflowMode!=="Extended";e.keyCode===9&&e.target.classList.contains("e-hor-nav")===!0&&i&&this.popObj.hide({name:"FadeOut",duration:100});var n=e.keyCode===40||e.keyCode===38||e.keyCode===35||e.keyCode===36;n&&e.preventDefault()}},t.prototype.unwireEvents=function(){C.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),window.removeEventListener("orientationchange",this.orientationChangeContext),document.removeEventListener("scroll",this.clickEvent),document.removeEventListener("click",this.scrollEvent),this.scrollEvent=null,this.clickEvent=null},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var i=b(e.target,".e-popup");this.popObj&&Xe(this.popObj.element)&&!i&&this.overflowMode==="Popup"&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,lt),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+ce)).forEach(function(i){E(i)}),this.tbarAlign){var e=this.element.querySelector("."+he);[].slice.call(e.children).forEach(function(i){E(i)}),this.tbarAlign=!1,this.remove(e,lt)}this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,ft),this.destroyScroll()),this.remove(this.element,ps),this.remove(this.element,nl);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,tl),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,i){e.classList.add(i)},t.prototype.remove=function(e,i){e.classList.remove(i)},t.prototype.elementFocus=function(e){var i=e.firstElementChild;i?(i.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,i){var n;return e&&this.popObj&&Xe(this.popObj.element)?n=this.popObj.element.querySelector("."+ce):this.element===i||e?n=this.element.querySelector("."+ce+":not(."+Ie+" ):not(."+fe+" ):not(."+mt+" )"):n=b(i,"."+ce),n},t.prototype.keyHandling=function(e,i,n,r,s){var o=this.popObj,l=this.element,c={name:"FadeOut",duration:100},p=i.action==="moveUp"?"previous":"next",d,u;switch(i.action){case"moveRight":if(this.isVertical)return;l===n?this.elementFocus(e):r||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;r||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var m=b(e,".e-popup"),f=this.element.querySelector("."+jn);this.overflowMode==="Extended"&&f&&f.classList.contains("e-popup-open")&&(m=i.action==="end"?f:null),m?Xe(this.popObj.element)&&(u=[].slice.call(m.children),i.action==="home"?d=this.focusFirstVisibleEle(u):d=this.focusLastVisibleEle(u)):(u=this.element.querySelectorAll("."+he+" ."+ce+":not(."+fe+")"),i.action==="home"?d=this.focusFirstVisibleEle(u):d=this.focusLastVisibleEle(u)),d&&this.elementFocus(d)}break;case"moveUp":case"moveDown":if(this.isVertical)i.action==="moveUp"?this.eleFocus(e,"previous"):this.eleFocus(e,"next");else if(o&&b(n,".e-popup")){var g=o.element,y=g.firstElementChild;p==="previous"&&y===e?g.lastElementChild.firstChild.focus():p==="next"&&g.lastElementChild===e?y.firstChild.focus():this.eleFocus(e,p)}else i.action==="moveDown"&&o&&Xe(o.element)&&this.elementFocus(e);break;case"tab":if(!s&&!r){var S=e.firstElementChild;l===n&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(S),S.focus()))}break;case"popupClose":o&&this.overflowMode!=="Extended"&&o.hide(c);break;case"popupOpen":if(!r)return;o&&!Xe(o.element)?(o.element.style.top=l.offsetHeight+"px",o.show({name:"FadeIn",duration:100})):o.hide(c);break}},t.prototype.keyActionHandler=function(e){var i=e.target;if(!(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||this.element.classList.contains(Ie))){e.preventDefault();var n=i.classList.contains(ze),r=i.classList.contains(Za),s=this.clstElement(n,i);(s||r)&&this.keyHandling(s,e,i,n,r)}},t.prototype.disable=function(e){var i=this.element;e?i.classList.add(Ie):i.classList.remove(Ie),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(Xe(this.popObj.element)&&this.overflowMode!=="Extended"&&this.popObj.hide(),i.querySelector("#"+i.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains(fe)||e.classList.contains(Ie)||e.getAttribute("disabled")||e.classList.contains(mt)||!Xe(e)||!e.classList.contains(ce)},t.prototype.focusFirstVisibleEle=function(e){for(var i,n=0;n<e.length;){var r=e[parseInt(n.toString(),10)];if(!r.classList.contains(mt)&&!r.classList.contains(Ie))return r;n++}return i},t.prototype.focusLastVisibleEle=function(e){for(var i,n=e.length-1;n>=0;){var r=e[parseInt(n.toString(),10)];if(!r.classList.contains(mt)&&!r.classList.contains(Ie))return r;n--}return i},t.prototype.eleFocus=function(e,i){var n=Object(e)[i+"ElementSibling"];if(n){var r=this.eleContains(n);if(r){this.eleFocus(n,i);return}this.elementFocus(n)}else if(this.tbarAlign){var s=Object(e.parentElement)[i+"ElementSibling"];if(!h(s)&&s.children.length===0&&(s=Object(s)[i+"ElementSibling"]),!h(s)&&s.children.length>0)if(i==="next"){var o=s.querySelector("."+ce);this.eleContains(o)?this.eleFocus(o,i):(o.firstElementChild.focus(),this.activeEleSwitch(o))}else{var o=s.lastElementChild;this.eleContains(o)?this.eleFocus(o,i):this.elementFocus(o)}}else if(!h(e)){var l=this.element.querySelectorAll("."+he+" ."+ce+":not(."+fe+"):not(."+Ie+"):not(."+mt+")");i==="next"&&l?this.elementFocus(l[0]):i==="previous"&&l&&this.elementFocus(l[l.length-1])}},t.prototype.clickHandler=function(e){var i=this,n=e.target,r=this.element,s=!h(b(n,"."+zi)),o=n.classList,l=b(n,"."+ze);l||(l=n),!r.children[0].classList.contains("e-hscroll")&&!r.children[0].classList.contains("e-vscroll")&&o.contains(ze)&&(o=n.querySelector(".e-icons").classList),(o.contains(Fn)||o.contains(ji))&&this.popupClickHandler(r,l,ft);var c,p=b(e.target,"."+ce);if(!((h(p)||p.classList.contains(Ie))&&!l.classList.contains(ze))){if(p){var d=this.items[this.tbarEle.indexOf(p)];c=d}var u={originalEvent:e,item:c},m=c&&!h(c.click)&&typeof c.click=="object"?!h(c.click.observers)&&c.click.observers.length>0:!h(c)&&!h(c.click);m&&this.trigger("items["+this.tbarEle.indexOf(p)+"].click",u),u.cancel||this.trigger("clicked",u,function(f){!h(i.popObj)&&s&&!f.cancel&&i.overflowMode==="Popup"&&f.item&&f.item.type!=="Input"&&i.popObj.hide({name:"FadeOut",duration:100})})}},t.prototype.popupClickHandler=function(e,i,n){var r=this.popObj;Xe(r.element)?(i.classList.remove(Ui),r.hide({name:"FadeOut",duration:100})):(e.classList.contains(n)&&(r.enableRtl=!0,r.position={X:"left",Y:"top"}),r.offsetX===0&&!e.classList.contains(n)&&(r.enableRtl=!1,r.position={X:"right",Y:"top"}),this.overflowMode==="Extended"&&(r.element.style.minHeight="0px",r.width=this.getToolbarPopupWidth(this.element)),r.dataBind(),r.refreshPosition(),r.element.style.top=this.getElementOffsetY()+"px",i.classList.add(Ui),r.show({name:"FadeIn",duration:100}))},t.prototype.getToolbarPopupWidth=function(e){var i=window.getComputedStyle(e);return parseFloat(i.width)+parseFloat(i.borderRightWidth)*2},t.prototype.render=function(){var e=this;this.initialize(),this.renderControl(),this.wireEvents(),this.clickEvent=this.docEvent.bind(this),this.scrollEvent=this.docEvent.bind(this),this.renderComplete(),this.isReact&&this.portals&&this.portals.length>0&&this.renderReactTemplates(function(){e.refreshOverflow()})},t.prototype.initialize=function(){var e=z(this.width),i=z(this.height);(x.info.name!=="msie"||this.height!=="auto"||this.overflowMode==="MultiRow")&&U(this.element,{height:i}),U(this.element,{width:e});var n={role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};Ce(this.element,n),this.cssClass&&k([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,i){var n,r;this.tbarEle||(this.tbarEle=[]);for(var s=0;s<e.length;s++)n=this.renderSubComponent(e[parseInt(s.toString(),10)],s),this.tbarEle.indexOf(n)===-1&&this.tbarEle.push(n),this.tbarAlign||this.tbarItemAlign(e[parseInt(s.toString(),10)],i,s),r=i.querySelector(".e-toolbar-"+e[parseInt(s.toString(),10)].align.toLowerCase()),r?(e[parseInt(s.toString(),10)].showAlwaysInPopup&&e[parseInt(s.toString(),10)].overflow!=="Show"||this.tbarAlgEle[(e[parseInt(s.toString(),10)].align+"s").toLowerCase()].push(n),r.appendChild(n)):i.appendChild(n);if(this.isReact){var o="portals";this.notify("render-react-toolbar-template",this[""+o]),this.renderReactTemplates()}},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(ss),this.isVertical=!1,(this.height==="auto"||this.height==="100%")&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(ss),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),U(this.element,{height:z(this.height),width:z(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,i){if(!this.scrollModule&&this.checkOverflow(e,i[0])){this.tbarAlign&&this.element.querySelector("."+he+" ."+el).removeAttribute("style"),this.isVertical?this.scrollModule=new xh({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]):this.scrollModule=new Nh({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]),this.cssClass&&k([i[0]],this.cssClass.split(" "));var n=this.scrollModule.element.querySelector("."+as+", .e-vscroll-bar");n&&n.removeAttribute("tabindex"),this.remove(this.scrollModule.element,lt),U(this.element,{overflow:"hidden"})}},t.prototype.itemWidthCal=function(e){var i=this,n=0,r;return[].slice.call(re("."+ce,e)).forEach(function(s){Xe(s)&&(r=window.getComputedStyle(s),n+=i.isVertical?s.offsetHeight:s.offsetWidth,n+=parseFloat(i.isVertical?r.marginTop:r.marginRight),n+=parseFloat(i.isVertical?r.marginBottom:r.marginLeft))}),n},t.prototype.getScrollCntEle=function(e){var i=this.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(i)},t.prototype.checkOverflow=function(e,i){if(h(e)||h(i)||!Xe(e))return!1;var n=this.isVertical?e.offsetHeight:e.offsetWidth,r=this.isVertical?i.offsetHeight:i.offsetWidth;(this.tbarAlign||this.scrollModule||n===r)&&(r=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(i):i));var s=e.querySelector("."+ze),o=e.querySelector("."+Za),l=0;return s?l=this.isVertical?s.offsetHeight:s.offsetWidth:o&&(l=this.isVertical?o.offsetHeight*2:o.offsetWidth*2),r>n-l},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,lt),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,i=e.querySelector("."+he),n=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),x.info.name==="msie"&&this.height==="auto"&&(e.style.height=""),this.overflowMode){case"Scrollable":h(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(he)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,i)||n)&&this.setOverflowAttributes(e),this.toolbarAlign(i);break;case"MultiRow":this.add(i,tl),this.checkOverflow(e,i)&&this.tbarAlign&&(this.removePositioning(),this.add(i,il)),e.style.overflow==="hidden"&&(e.style.overflow=""),(x.info.name==="msie"||e.style.height!=="auto")&&(e.style.height="auto");break;case"Extended":this.add(this.element,nl),(this.checkOverflow(e,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(i)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(re("."+he+" ."+ce,e)));var i={tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"};Ce(this.element.querySelector("."+ze),i)},t.prototype.separator=function(){var e=this.element,i=[].slice.call(e.querySelectorAll("."+fe)),n=e.querySelector("."+hs),r=e.querySelector("."+cs),s=this.overflowMode==="MultiRow"?n:r;s!==null&&(this.overflowMode==="MultiRow"?s.classList.remove(hs):this.overflowMode==="Extended"&&s.classList.remove(cs));for(var o=0;o<=i.length-1;o++)i[parseInt(o.toString(),10)].offsetLeft<30&&i[parseInt(o.toString(),10)].offsetLeft!==0&&(this.overflowMode==="MultiRow"?i[parseInt(o.toString(),10)].classList.add(hs):this.overflowMode==="Extended"&&i[parseInt(o.toString(),10)].classList.add(cs))},t.prototype.createPopupEle=function(e,i){var n=e.querySelector("."+ze),r=this.isVertical;n||this.createPopupIcon(e),n=e.querySelector("."+ze);var s=r?n.offsetHeight:n.offsetWidth,o=(r?e.offsetHeight:e.offsetWidth)-s;this.element.classList.remove("e-rtl"),U(this.element,{direction:"initial"}),this.checkPriority(e,i,o,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,i,n,r,s){var o=e.element,l=[].slice.call(re("."+Ht,o.querySelector("."+he))),c=re("."+at,n),p=0,d=0;l.forEach(function(g,y){c=re("."+at,n),g.classList.contains(at)&&c.length>0?e.tbResize&&c.length>y?(n.insertBefore(g,c[parseInt(y.toString(),10)]),++d):(n.insertBefore(g,n.children[c.length]),++d):g.classList.contains(at)||e.tbResize&&g.classList.contains(qn)&&n.children.length>0&&c.length===0?(n.insertBefore(g,n.firstChild),++d):g.classList.contains(qn)?i.push(g):e.tbResize?(n.insertBefore(g,n.childNodes[p+d]),++p):n.appendChild(g),g.classList.contains(fe)?U(g,{display:"",height:s+"px"}):U(g,{display:"",height:r+"px"})}),i.forEach(function(g){n.appendChild(g)});for(var u=re("."+ce,o.querySelector("."+he)),m=u.length-1;m>=0;m--){var f=u[parseInt(m.toString(),10)];if(f.classList.contains(fe)&&this.overflowMode!=="Extended")U(f,{display:"none"});else break}},t.prototype.createPopup=function(){var e=this.element,i,n;this.overflowMode==="Extended"&&(n=e.querySelector("."+fe),i=e.style.height==="auto"||e.style.height===""?null:n&&n.offsetHeight);var r=e.querySelector("."+ce+":not(."+fe+"):not(."+Ht+")"),s=e.style.height==="auto"||e.style.height===""?null:r&&r.offsetHeight,o,l=[];if(F("#"+e.id+"_popup."+zi,e))o=F("#"+e.id+"_popup."+zi,e);else{var c=this.createElement("div",{id:e.id+"_popup",className:zi+" "+jn}),p=this.createElement("div",{id:e.id+"_popup",className:zi});o=this.overflowMode==="Extended"?c:p}this.pushingPoppedEle(this,l,o,s,i),this.popupInit(e,o)},t.prototype.getElementOffsetY=function(){return this.overflowMode==="Extended"&&window.getComputedStyle(this.element).getPropertyValue("box-sizing")==="border-box"?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,i){if(this.popObj){if(this.overflowMode!=="Extended"){var s=this.popObj.element;U(s,{maxHeight:"",display:"block"}),U(s,{maxHeight:s.offsetHeight+"px",display:""})}}else{e.appendChild(i),this.cssClass&&k([i],this.cssClass.split(" ")),U(this.element,{overflow:""});var n=new At(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(this.overflowMode==="Extended"&&(n.width=this.getToolbarPopupWidth(this.element),n.offsetX=0),n.appendTo(i),document.addEventListener("scroll",this.clickEvent),document.addEventListener("click",this.scrollEvent),this.overflowMode!=="Extended"&&(n.element.style.maxHeight=n.element.offsetHeight+"px"),this.isVertical&&(n.element.style.visibility="hidden"),this.isExtendedOpen){var r=this.element.querySelector("."+ze);r.classList.add(Ui),ii(r.firstElementChild,[Fn],[ji]),this.element.querySelector("."+jn).classList.add(Ya)}else n.hide();this.popObj=n}},t.prototype.tbarPopupHandler=function(e){this.overflowMode==="Extended"&&(e?this.add(this.element,ps):this.remove(this.element,ps))},t.prototype.popupOpen=function(e){var i=this.popObj;this.isVertical||(i.offsetY=this.getElementOffsetY(),i.dataBind());var n=this.popObj.element,r=this.popObj.element.parentElement,s=r.querySelector("."+ze);s.setAttribute("aria-expanded","true"),this.overflowMode==="Extended"?i.element.style.minHeight="":(U(i.element,{height:"auto",maxHeight:""}),i.element.style.maxHeight=i.element.offsetHeight+"px");var o=n.offsetTop+n.offsetHeight+Oh(r).top,l=s.firstElementChild;s.classList.add(Ui),ii(l,[Fn],[ji]),this.tbarPopupHandler(!0);var c=h(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+c<o&&this.element.offsetTop<n.offsetHeight){var p=n.offsetHeight-(o-window.innerHeight-c+5);i.height=p+"px";for(var d=0;d<=n.childElementCount;d++){var u=n.children[parseInt(d.toString(),10)];if(u.offsetTop+u.offsetHeight>p){p=u.offsetTop;break}}this.overflowMode!=="Extended"&&U(i.element,{maxHeight:p+"px"})}else if(this.isVertical&&this.overflowMode!=="Extended"){var m=this.element.getBoundingClientRect();U(i.element,{maxHeight:m.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(i){var f=n.getBoundingClientRect();f.right>document.documentElement.clientWidth&&f.width>r.getBoundingClientRect().width&&(i.collision={Y:"none"},i.dataBind()),i.refreshPosition()}},t.prototype.popupClose=function(e){var i=this.element,n=i.querySelector("."+ze);n.setAttribute("aria-expanded","false");var r=n.firstElementChild;n.classList.remove(Ui),ii(r,[ji],[Fn]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,i,n,r){for(var s=this.popupPriCount>0,o=i.length,l=n,c,p,d=0,u=0,m=0,f=function(M,I){var A=!1;return I.forEach(function(V){M.classList.contains(V)&&(A=!0)}),A},g=o-1;g>=0;g--){var y=void 0,S=window.getComputedStyle(i[parseInt(g.toString(),10)]);this.isVertical?(y=parseFloat(S.marginTop),y+=parseFloat(S.marginBottom)):(y=parseFloat(S.marginRight),y+=parseFloat(S.marginLeft));var T=i[parseInt(g.toString(),10)]===this.tbarEle[0];T&&(this.tbarEleMrgn=y),c=this.isVertical?i[parseInt(g.toString(),10)].offsetHeight:i[parseInt(g.toString(),10)].offsetWidth;var L=T?c+y:c;if(f(i[parseInt(g.toString(),10)],[ls])&&s&&(i[parseInt(g.toString(),10)].classList.add(Ht),this.isVertical?U(i[parseInt(g.toString(),10)],{display:"none",minHeight:L+"px"}):U(i[parseInt(g.toString(),10)],{display:"none",minWidth:L+"px"}),m++),this.isVertical?p=i[parseInt(g.toString(),10)].offsetTop+i[parseInt(g.toString(),10)].offsetHeight+y>n:p=i[parseInt(g.toString(),10)].offsetLeft+i[parseInt(g.toString(),10)].offsetWidth+y>n,p){if(i[parseInt(g.toString(),10)].classList.contains(fe)){if(this.overflowMode==="Extended"){var w=i[parseInt(g.toString(),10)];f(w,[fe,Vi])&&(i[parseInt(g.toString(),10)].classList.add(Ht),m++),u++}else if(this.overflowMode==="Popup"){if(d>0&&u===m){var w=i[g+u+(d-1)];f(w,[fe,Vi])&&U(w,{display:"none"})}d++,u=0,m=0}}else u++;i[parseInt(g.toString(),10)].classList.contains(at)&&r?n-=(this.isVertical?i[parseInt(g.toString(),10)].offsetHeight:i[parseInt(g.toString(),10)].offsetWidth)+y:f(i[parseInt(g.toString(),10)],[fe,Vi])?n-=(this.isVertical?i[parseInt(g.toString(),10)].offsetHeight:i[parseInt(g.toString(),10)].offsetWidth)+y:(i[parseInt(g.toString(),10)].classList.add(Ht),this.isVertical?U(i[parseInt(g.toString(),10)],{display:"none",minHeight:L+"px"}):U(i[parseInt(g.toString(),10)],{display:"none",minWidth:L+"px"}),m++)}}if(r){var N=re("."+ce+":not(."+Ht+")",this.element);this.checkPriority(e,N,l,!1)}},t.prototype.createPopupIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+Oc);n=this.overflowMode==="Extended"?n+" "+Bc:n;var r=this.createElement("div",{id:i,className:n});(x.info.name==="msie"||x.info.name==="edge")&&r.classList.add("e-ie-align");var s=this.createElement("div",{className:ji+" e-icons"});r.appendChild(s),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),e.appendChild(r)},t.prototype.tbarPriRef=function(e,i,n,r,s,o,l,c,p){var d=c,u=this.popObj.element,m="."+ce+":not(."+fe+"):not(."+at+")",f=re("."+Ht+":not(."+at+")",u).length,g=function(w,N){return w.classList.contains(N)};if(re(m,e).length===0){var y=e.children[i-(i-n)-1],S=!h(y)&&g(y,Vi);if(!h(y)&&g(y,fe)&&!Xe(y)||S){y.style.display="unset";var T=y.offsetWidth+parseFloat(window.getComputedStyle(y).marginRight)*2,L=y.previousElementSibling;o+T<l||s?(e.insertBefore(r,e.children[i+d-(i-n)]),h(L)||(L.style.display="")):(U(r,p),L.classList.contains(fe)&&(L.style.display="none")),y.style.display=""}else e.insertBefore(r,e.children[i+d-(i-n)])}else e.insertBefore(r,e.children[i+d-f])},t.prototype.popupRefresh=function(e,i){var n=this,r=this.element,s=this.isVertical,o=r.querySelector("."+he),l=r.querySelector("."+ze);if(!h(l)){o.removeAttribute("style"),e.style.display="block";var c;s?c=r.offsetHeight-(l.offsetHeight+o.offsetHeight):c=r.offsetWidth-(l.offsetWidth+o.offsetWidth);var p=0;[].slice.call(e.children).forEach(function(d){p+=n.popupEleWidth(d),U(d,{position:""})}),c+(s?l.offsetHeight:l.offsetWidth)>p&&this.popupPriCount===0&&(i=!0),this.popupEleRefresh(c,e,i),e.style.display="",e.children.length===0&&l&&this.popObj&&(E(l),l=null,this.popObj.destroy(),E(this.popObj.element),this.popObj=null)}},t.prototype.ignoreEleFetch=function(e,i){var n=[].slice.call(i.querySelectorAll("."+Vi)),r=[],s=0;if(n.length>0)n.forEach(function(o){r.push([].slice.call(i.children).indexOf(o))});else return 0;return r.forEach(function(o){o<=e&&s++}),s},t.prototype.checkPopupRefresh=function(e,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var r=e.offsetWidth-e.querySelector("."+ze).offsetWidth,s=e.querySelector("."+he).offsetWidth;return i.style.removeProperty("display"),r>n+s},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=e.querySelector("."+Mc);if(e.classList.contains("e-tbtn-align")||e.classList.contains(os)){var r=e.children[0];!h(n)&&e.classList.contains(os)?n.style.display="none":!h(n)&&e.classList.contains(Ja)&&(n.style.display="block"),r.style.minWidth="0%",i=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),r.style.minWidth="",r.style.minHeight="",h(n)||(n.style.display="")}return i},t.prototype.popupEleRefresh=function(e,i,n){for(var r=this.popupPriCount>0,s=this.tbarEle,o,l,c=this.element.querySelector("."+he),p=0,d=function(T){if(T.classList.contains(ls)&&r&&!n)return"continue";var L=u.popupEleWidth(T);if(T===u.tbarEle[0]&&(L+=u.tbarEleMrgn),T.style.position="",L<e||n){var w={minWidth:T.style.minWidth,height:T.style.height,minHeight:T.style.minHeight};if(U(T,{minWidth:"",height:"",minHeight:""}),T.classList.contains(qn)||T.classList.remove(Ht),l=u.tbarEle.indexOf(T),u.tbarAlign){var N=u.items[parseInt(l.toString(),10)].align;l=u.tbarAlgEle[(N+"s").toLowerCase()].indexOf(T),s=u.tbarAlgEle[(N+"s").toLowerCase()],c=u.element.querySelector("."+he+" .e-toolbar-"+N.toLowerCase())}var M=0;u.overflowMode!=="Extended"&&s.slice(0,l).forEach(function(I){(I.classList.contains(at)||I.classList.contains(fe))&&(I.classList.contains(fe)&&(I.style.display="",e-=I.offsetWidth),M++)}),p=u.ignoreEleFetch(l,c),T.classList.contains(at)?(u.tbarPriRef(c,l,M,T,n,L,e,p,w),e-=T.offsetWidth):l===0?(c.insertBefore(T,c.firstChild),e-=T.offsetWidth):(o=re("."+at,u.popObj.element).length,c.insertBefore(T,c.children[l+p-o]),e-=T.offsetWidth),T.style.height=""}else return"break"},u=this,m=0,f=[].slice.call(i.children);m<f.length;m++){var g=f[m],y=d(g);if(y==="break")break}var S=this.checkOverflow(this.element,this.element.getElementsByClassName(he)[0]);S&&!n&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+he);if(!(h(e)||!e.classList.contains(lt))){this.remove(e,lt);var i=[].slice.call(e.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+he);this.add(e,lt),this.itemPositioning()},t.prototype.itemPositioning=function(){var e=this.element.querySelector("."+he),i;if(!(h(e)||!e.classList.contains(lt))){var n=this.element.querySelector("."+ze),r;if(this.scrollModule){var s=this.isVertical?Nc:xc;r=[].slice.call(e.querySelector("."+s).children)}else r=[].slice.call(e.childNodes);this.isVertical?i=r[0].offsetHeight+r[2].offsetHeight:i=r[0].offsetWidth+r[2].offsetWidth;var o=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){o-=this.isVertical?n.offsetHeight:n.offsetWidth;var l=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";r[2].removeAttribute("style"),this.isVertical?this.enableRtl?r[2].style.top=l:r[2].style.bottom=l:this.enableRtl?r[2].style.left=l:r[2].style.right=l}if(!(o<=i)){var c=(o-i-(this.isVertical?r[1].offsetHeight:r[1].offsetWidth))/2;r[1].removeAttribute("style");var p=(this.isVertical?r[0].offsetHeight:r[0].offsetWidth)+c+"px";this.isVertical?this.enableRtl?r[1].style.marginBottom=p:r[1].style.marginTop=p:this.enableRtl?r[1].style.marginRight=p:r[1].style.marginLeft=p}}},t.prototype.tbarItemAlign=function(e,i,n){var r=this;if(!(e.showAlwaysInPopup&&e.overflow!=="Show")){var s=[];if(s.push(this.createElement("div",{className:Dc})),s.push(this.createElement("div",{className:el})),s.push(this.createElement("div",{className:kc})),n===0&&e.align!=="Left")s.forEach(function(c){i.appendChild(c)}),this.tbarAlign=!0,this.add(i,lt);else if(e.align!=="Left"){var o=i.childNodes,l=s[0];[].slice.call(o).forEach(function(c){r.tbarAlgEle.lefts.push(c),l.appendChild(c)}),i.appendChild(l),i.appendChild(s[1]),i.appendChild(s[2]),this.tbarAlign=!0,this.add(i,lt)}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,he),this.tbarEle=[];var i=[].slice.call(this.trgtEle.children);i.forEach(function(n){n.tagName==="DIV"&&(e.tbarEle.push(n),h(n.firstElementChild)||n.firstElementChild.setAttribute("aria-disabled","false"),e.add(n,ce))})},t.prototype.renderItems=function(){var e=this.element,i=this.items;if(this.trgtEle!=null)this.ctrlTemplate();else if(e&&i.length>0){var n=void 0;e&&e.children.length>0&&(n=e.querySelector("."+he)),n||(n=this.createElement("div",{className:he})),this.itemsAlign(i,n),e.appendChild(n)}},t.prototype.setAttr=function(e,i){for(var n=Object.keys(e),r,s=0;s<n.length;s++)r=n[parseInt(s.toString(),10)],r==="class"?this.add(i,e[""+r]):i.setAttribute(r,e[""+r])},t.prototype.enableItems=function(e,i){var n=e,r=n.length,s;h(i)&&(i=!0);var o=function(d,u){d?(u.classList.remove(Ie),h(u.firstElementChild)||u.firstElementChild.setAttribute("aria-disabled","false")):(u.classList.add(Ie),h(u.firstElementChild)||u.firstElementChild.setAttribute("aria-disabled","true"))};if(!h(r)&&r>=1){for(var l=0,c=[].slice.call(n);l<r;l++){var p=c[parseInt(l.toString(),10)];if(typeof p=="number"){if(s=this.getElementByIndex(p),h(s))return;n[parseInt(l.toString(),10)]=s}else s=p;o(i,s)}i?O(n,Ie):k(n,Ie)}else{if(typeof n=="number"){if(s=this.getElementByIndex(n),h(s))return}else s=e;o(i,s)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[parseInt(e.toString(),10)]?this.tbarEle[parseInt(e.toString(),10)]:null},t.prototype.addItems=function(e,i){var n;this.extendedOpen();var r=this.element.querySelector("."+he);if(h(r)){this.itemsRerender(e);return}var s,o="Left";h(i)&&(i=0),e.forEach(function(m){!h(m.align)&&m.align!=="Left"&&o==="Left"&&(o=m.align)});for(var l=0,c=e;l<c.length;l++){var p=c[l];if(h(p.type)&&(p.type="Button"),n=re("."+ce,this.element),p.align=o,s=this.renderSubComponent(p,i),this.tbarEle.length>=i&&n.length>=0){h(this.scrollModule)&&this.destroyMode();var d=p.align[0]==="L"?0:p.align[0]==="C"?1:2,u=void 0;!this.tbarAlign&&o!=="Left"?(this.tbarItemAlign(p,r,1),this.tbarAlign=!0,u=b(n[0],"."+he).children[parseInt(d.toString(),10)],u.appendChild(s),this.tbarAlgEle[(p.align+"s").toLowerCase()].push(s),this.refreshPositioning()):this.tbarAlign?(u=b(n[0],"."+he).children[parseInt(d.toString(),10)],u.insertBefore(s,u.children[parseInt(i.toString(),10)]),this.tbarAlgEle[(p.align+"s").toLowerCase()].splice(i,0,s),this.refreshPositioning()):n.length===0?(n=re("."+he,this.element),n[0].appendChild(s)):n[0].parentNode.insertBefore(s,n[parseInt(i.toString(),10)]),this.items.splice(i,0,p),p.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(i,0,s),i++,this.offsetWid=r.offsetWidth}}r.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.removeItems=function(e){var i=e,n,r=[].slice.call(re("."+ce,this.element));if(typeof i=="number")n=parseInt(e.toString(),10),this.removeItemByIndex(n,r);else if(i&&i.length>1)for(var s=0,o=[].slice.call(i);s<o.length;s++){var l=o[s];n=this.tbarEle.indexOf(l),this.removeItemByIndex(n,r),r=re("."+ce,this.element)}else{var l=i&&i.length&&i.length===1?i[0]:e;n=r.indexOf(l),this.removeItemByIndex(n,r)}this.resize()},t.prototype.removeItemByIndex=function(e,i){if(this.tbarEle[parseInt(e.toString(),10)]&&i[parseInt(e.toString(),10)]){var n=this.tbarEle.indexOf(i[parseInt(e.toString(),10)]);if(this.tbarAlign){var r=this.tbarAlgEle[(this.items[parseInt(n.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(n.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(n.toString(),10)].align+"s").toLowerCase()].splice(parseInt(r.toString(),10),1)}this.isReact&&this.clearToolbarTemplate(i[parseInt(e.toString(),10)]);var s=i[parseInt(e.toString(),10)].querySelector(".e-control.e-btn");!h(s)&&!h(s.ej2_instances[0])&&!s.ej2_instances[0].isDestroyed&&s.ej2_instances[0].destroy(),E(i[parseInt(e.toString(),10)]),this.items.splice(n,1),this.tbarEle.splice(n,1)}},t.prototype.templateRender=function(e,i,n,r){var s=n.type,o=e,l;if(typeof e=="object"&&(l=typeof o.appendTo=="function"),typeof e=="string"||!l){var c=void 0,p=e,d=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);p=typeof e=="string"?e.trim():e;try{if(typeof e=="object"&&!h(e.tagName))i.appendChild(e);else if(typeof e=="string"&&d.test(p))i.innerHTML=p;else if(document.querySelectorAll(p).length){var u=document.querySelector(p),m=u.outerHTML.trim();i.appendChild(u),u.style.display="",h(m)||this.tempId.push(p)}else c=Di(p)}catch{c=Di(p)}var f=void 0;if(!h(c)){var g=this.element.id+r+"_template";f=c({},this,"template",g,this.isStringTemplate,void 0,void 0,this.root)}!h(f)&&f.length>0&&[].slice.call(f).forEach(function(S){h(S.tagName)||(S.style.display=""),i.appendChild(S)})}else if(s==="Input"){var u=this.createElement("input");n.id?u.id=n.id:u.id=rt("tbr-ipt"),i.appendChild(u),o.appendTo(u)}this.add(i,$a);var y=i.firstElementChild;h(y)||(y.setAttribute("tabindex",h(y.getAttribute("tabIndex"))?"-1":this.getDataTabindex(y)),y.setAttribute("data-tabindex",h(y.getAttribute("tabIndex"))?"-1":this.getDataTabindex(y))),this.tbarEle.push(i)},t.prototype.buttonRendering=function(e,i){var n=this.createElement("button",{className:wc});n.setAttribute("type","button");var r=e.text,s,o;e.id?n.id=e.id:n.id=rt("e-tbr-btn");var l=this.createElement("span",{className:"e-tbar-btn-text"});r?(l.innerHTML=this.enableHtmlSanitizer?Lt.sanitize(r):r,n.appendChild(l),n.classList.add("e-tbtn-txt")):this.add(i,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(s=e.prefixIcon+" e-icons",o="Left"):(s=e.suffixIcon+" e-icons",o="Right"));var c=new En({iconCss:s,iconPosition:o});return c.createElement=this.createElement,c.appendTo(n),e.width&&U(n,{width:z(e.width)}),n},t.prototype.renderSubComponent=function(e,i){var n,r=this.createElement("div",{className:ce}),s=this.createElement("div",{innerHTML:this.enableHtmlSanitizer&&!h(e.tooltipText)?Lt.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,r),e.tooltipText&&r.setAttribute("title",s.textContent),e.cssClass&&(r.className=r.className+" "+e.cssClass),e.template)this.templateRender(e.template,r,e,i);else switch(e.type){case"Button":n=this.buttonRendering(e,r),n.setAttribute("tabindex",h(e.tabIndex)?"-1":e.tabIndex.toString()),n.setAttribute("data-tabindex",h(e.tabIndex)?"-1":e.tabIndex.toString()),n.setAttribute("aria-label",e.text||e.tooltipText),n.setAttribute("aria-disabled","false"),r.appendChild(n),r.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(r,fe);break}if(e.showTextOn){var o=e.showTextOn;o==="Toolbar"?(this.add(r,Ja),this.add(r,"e-tbtn-align")):o==="Overflow"&&this.add(r,os)}if(e.overflow){var l=e.overflow;l==="Show"?this.add(r,at):l==="Hide"&&(r.classList.contains(fe)||this.add(r,qn))}return e.overflow!=="Show"&&e.showAlwaysInPopup&&!r.classList.contains(fe)&&(this.add(r,ls),this.popupPriCount++),e.disabled&&this.add(r,Ie),e.visible===!1&&this.add(r,mt),r},t.prototype.getDataTabindex=function(e){return h(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){var i=this.element.querySelector("."+ce+":not(."+Ie+" ):not(."+fe+" ):not(."+mt+" )");if(h(this.activeEle)||(this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),i&&i.removeAttribute("tabindex"),i=this.activeEle),this.activeEle=e,this.getDataTabindex(this.activeEle)==="-1")if(h(this.trgtEle)&&!e.parentElement.classList.contains($a)){if(!h(this.element.querySelector(".e-hor-nav"))&&this.element.querySelector(".e-hor-nav").classList.contains("e-nav-active")){this.updateTabIndex("0");var n=this.getDataTabindex(i)==="-1"?"0":this.getDataTabindex(i);i.setAttribute("tabindex",n)}else this.updateTabIndex("-1");e.removeAttribute("tabindex")}else{var r=parseInt(this.getDataTabindex(this.activeEle),10)+1;this.activeEle.setAttribute("tabindex",r.toString())}},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&this.overflowMode==="Popup"&&this.popObj.hide();var i=this.checkOverflow(e,e.getElementsByClassName(he)[0]);if(!i){this.destroyScroll();var n=e.querySelector("."+he);h(n)||(this.remove(n,il),this.tbarAlign&&this.add(n,lt))}i&&this.scrollModule&&this.offsetWid===e.offsetWidth||((this.offsetWid>e.offsetWidth||i)&&this.renderOverflowMode(),this.popObj&&(this.overflowMode==="Extended"&&(this.popObj.width=this.getToolbarPopupWidth(this.element)),this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()),this.element.querySelector("."+as)&&(this.scrollStep=this.element.querySelector("."+as).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator())},t.prototype.orientationChange=function(){var e=this;setTimeout(function(){e.resize()},500)},t.prototype.extendedOpen=function(){var e=this.element.querySelector("."+jn);this.overflowMode==="Extended"&&e&&(this.isExtendedOpen=e.classList.contains(Ya))},t.prototype.updateHideEleTabIndex=function(e,i,n,r,s){n&&(r=s.indexOf(e));for(var o=s[++r];o;){var l=this.eleContains(o);if(!l){var c=o.firstElementChild.getAttribute("data-tabindex");i&&c==="-1"?o.firstElementChild.setAttribute("tabindex","0"):c!==o.firstElementChild.getAttribute("tabindex")&&o.firstElementChild.setAttribute("tabindex",c);break}o=s[++r]}},t.prototype.clearToolbarTemplate=function(e){if(this.registeredTemplate&&this.registeredTemplate.template)for(var i=this.registeredTemplate,n=0;n<i.template.length;n++){var r=i.template[parseInt(n.toString(),10)].rootNodes[0],s=b(r,"."+ce);if(!h(s)&&s===e){this.clearTemplate(["template"],[i.template[parseInt(n.toString(),10)]]);break}}else if(this.portals&&this.portals.length>0)for(var o=this.portals,n=0;n<o.length;n++){var l=o[parseInt(n.toString(),10)],s=b(l.containerInfo,"."+ce);if(!h(s)&&s===e){this.clearTemplate(["template"],n);break}}},t.prototype.onPropertyChanged=function(e,i){var n=this.element;this.extendedOpen();for(var r=0,s=Object.keys(e);r<s.length;r++){var o=s[r];switch(o){case"items":if(e.items instanceof Array&&i.items instanceof Array)this.itemsRerender(e.items);else for(var l=Object.keys(e.items),c=0;c<l.length;c++){var p=parseInt(Object.keys(e.items)[parseInt(c.toString(),10)],10),d=Object.keys(e.items[parseInt(p.toString(),10)])[0],u=Object(e.items[parseInt(p.toString(),10)])[""+d];if(this.tbarAlign||d==="align"){this.refresh(),this.trigger("created");break}var m=d==="showAlwaysInPopup"&&!u,f=d==="overflow"&&this.popupPriCount!==0;(m||this.items[parseInt(p.toString(),10)].showAlwaysInPopup&&f)&&--this.popupPriCount,h(this.scrollModule)&&this.destroyMode();var g=[].slice.call(re("."+he+" ."+ce,n));this.isReact&&this.items[parseInt(p.toString(),10)].template&&this.clearToolbarTemplate(g[parseInt(p.toString(),10)]),E(g[parseInt(p.toString(),10)]),this.tbarEle.splice(p,1),this.addItems([this.items[parseInt(p.toString(),10)]],p),this.items.splice(p,1),this.items[parseInt(p.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":U(n,{width:z(e.width)}),this.refreshOverflow();break;case"height":U(this.element,{height:z(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(n,ft),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(n,ft):this.remove(n,ft),h(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,ft):this.remove(this.scrollModule.element,ft)),h(this.popObj)||(e.enableRtl?this.add(this.popObj.element,ft):this.remove(this.popObj.element,ft)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":i.cssClass&&O([this.element],i.cssClass.split(" ")),e.cssClass&&k([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent();break}}},t.prototype.hideItem=function(e,i){var n=typeof e=="object",r=e,s;if(!(!n&&h(r))){var o=[].slice.call(re("."+ce,this.element));if(n)s=e;else if(this.tbarEle[parseInt(r.toString(),10)]){var l=[].slice.call(re("."+ce,this.element));s=l[parseInt(r.toString(),10)]}s&&(i?(s.classList.add(mt),s.classList.contains(fe)||(h(s.firstElementChild.getAttribute("tabindex"))||s.firstElementChild.getAttribute("tabindex")!=="-1")&&this.updateHideEleTabIndex(s,i,n,r,o)):(s.classList.remove(mt),s.classList.contains(fe)||this.updateHideEleTabIndex(s,i,n,r,o)),this.refreshOverflow())}},oe([Ln([],Rc)],t.prototype,"items",void 0),oe([v("auto")],t.prototype,"width",void 0),oe([v("auto")],t.prototype,"height",void 0),oe([v("")],t.prototype,"cssClass",void 0),oe([v("Scrollable")],t.prototype,"overflowMode",void 0),oe([v()],t.prototype,"scrollStep",void 0),oe([v(!0)],t.prototype,"enableCollision",void 0),oe([v(!0)],t.prototype,"enableHtmlSanitizer",void 0),oe([v(!0)],t.prototype,"allowKeyboard",void 0),oe([P()],t.prototype,"clicked",void 0),oe([P()],t.prototype,"created",void 0),oe([P()],t.prototype,"destroyed",void 0),oe([P()],t.prototype,"beforeCreate",void 0),t=oe([Vt],t),t}(Ri);class Ac extends Dh{api=Mh;model=Fh({id:void 0,created_at:void 0,updated_at:void 0,deleted_at:void 0,user_id:Hh().user.id,type:void 0,meeting_at:void 0,keywords:[],notes:void 0});$editor=null;constructor(t){super(),this.factory(t),super.initValidations()}validations=qh(()=>({model:{type:{required:jr},meeting_at:{required:jr},notes:{required:jr}}}));saving(){this.model.notes=this.$editor.getXhtml()}}const Pc=jh("Note",{state:()=>({types:["Life and Ministry","Watchtower Study","Personal Study"]}),actions:{},getters:{}});var pn="tableclass",Ic="load",_s="initial-load",Zi="content-changed",je="initial-end",ht="iframe-click",Y="destroy",Ws="toolbarClick",ni="toolbar-refresh",Lr="refresh-begin",Bt="toolbar-updated",Qs="bind-on-end",Ks="html-toolbar-click",Hc="markdown-toolbar-click",Me="model-changed",Gs="tableModulekeyUp",Ke="keyUp",we="keyDown",dn="mouseUp",Fc="toolbarCreated",rl="toolbarRenderComplete",Xs="enableFullScreen",Ys="disableFullScreen",si="dropDownSelect",$s="beforeDropDownItemRender",Js="execCommandCallBack",Zs="image-toolbar-action",qc="audio-toolbar-action",jc="video-toolbar-action",eo="link-toolbar-action",to="resize",th="resizeStart",ih="resizing",nh="resizeStop",io="insertLink",nr="unLink",ds="editLink",zn="openLink",Re="actionBegin",ct="actionComplete",zc="updatedToolbarStatus",en="updateToolbarItem",rr="insertImage",Uc="insertAudio",Vc="insertVideo",un="insertCompleted",us="insertImgLink",fs="imgAltText",ms="delete",gs="caption",vs="imageSize",Ni="sourceCode",fn="updateSource",wr="beforeDropDownOpen",Tt="selection-save",Et="selection-restore",no="count",Fe="mouseDown",mn="sourceCodeMouseDown",wt="editAreaClick",Zt="scroll",ei="contentscroll",tn="colorPickerChanged",nn="tableColorPickerChanged",gn="focusChange",ro="selectAll",kr="selectRange",so="getSelectedHtml",oo="renderInlineToolbar",Oi="paste-content",Rt="rtl-mode",ao="createTable",oi="docClick",lo="table-toolbar-action",ho="checkUndoStack",co="readOnlyMode",st="moduleDestroy",po="pasteClean",uo="enterHandler",_c="beforeDialogOpen",ai="clearDialogObj",Wc="dialogOpen",Qc="beforeDialogClose",Kc="dialogClose",Gc="beforeQuickToolbarOpen",Xc="quickToolbarOpen",Yc="quickToolbarClose",$c="imageSelected",fo="imageUploading",mo="imageUploadSuccess",go="imageUploadFailed",rh="imageRemoving",sl="afterImageDelete",vo="drop",vn="xhtmlValidation",bo="beforeImageUpload",ol="resizeInitialized",sh="renderFileManager",Jc="beforeImageDrop",bn="dynamicModule",Zc="beforePasteCleanup",al="afterPasteCleanup",yo="updateTbItemsStatus",Co="showLinkDialog",So="closeLinkDialog",To="showImageDialog",ep="showAudioDialog",tp="showVideoDialog",Eo="closeImageDialog",ip="closeAudioDialog",np="closeVideoDialog",Lo="showTableDialog",wo="closeTableDialog",Le="bindCssClass",ko="formatPainterClick",Do="formatPainterDoubleClick",Dr="emojiPicker",yn="destroyTooltip",xr="hidePopup",xo="cleanupResizeElements",No="afterKeyDown",Oo="updateValueOnIdle",Cn="documentClickClosedBy",Mo="showColorPicker",Nr="closeTooltip",Bo="autoResize",rp=`address:empty, article:empty, aside:empty, blockquote:empty,
 details:empty, dd:empty, div:empty, dl:empty, dt:empty, fieldset:empty, footer:empty,form:empty, h1:empty,
 h2:empty, h3:empty, h4:empty, h5:empty, h6:empty, header:empty, hgroup:empty, li:empty, main:empty, nav:empty,
 noscript:empty, output:empty, p:empty, pre:empty, section:empty, td:empty, th:empty`,sp=`a:empty, abbr:empty, acronym:empty, b:empty, bdi:empty, bdo:empty, big:empty, button:empty,
canvas:empty, cite:empty, code:empty, data:empty, datalist:empty, del:empty, dfn:empty, em:empty, font:empty, i:empty, iframe:empty,
ins:empty, kbd:empty, label:empty, map:empty, mark:empty, meter:empty, noscript:empty, object:empty, output:empty, picture:empty, progress:empty,
q:empty, ruby:empty, s:empty, samp:empty, script:empty, select:empty, slot:empty, small:empty, span:empty, strong:empty, strike:empty, sub:empty, sup:empty, svg:empty,
template:empty, textarea:empty, time:empty, u:empty, tt:empty, var:empty, wbr:empty`,ll=["px","em","rem","pt","cm","mm","in","pc","vw","vh","vmin","vmax"],op={px:{px:1,em:.0625,rem:.0625,pt:.75,cm:.0264583,mm:.0026458,in:.0104167,pc:.0625,vw:.00625,vh:.00625,vmin:.00625,vmax:.00625},em:{px:16,em:1,rem:1,pt:12,cm:.423333,mm:.0423333,in:.166667,pc:.0625,vw:1,vh:1,vmin:1,vmax:1},rem:{px:16,em:1,rem:1,pt:12,cm:.423333,mm:.0423333,in:.166667,pc:.0625,vw:1,vh:1,vmin:1,vmax:1},pt:{px:1.33333,em:.0833333,rem:.0833333,pt:1,cm:.0352778,mm:.0035278,in:.0138889,pc:.0416667,vw:.00416667,vh:.00416667,vmin:.00416667,vmax:.00416667},cm:{px:37.7953,em:2.3622,rem:2.3622,pt:28.3465,cm:1,mm:.1,in:.393701,pc:.148148,vw:.0377953,vh:.0377953,vmin:.0377953,vmax:.0377953},mm:{px:3.77953,em:.23622,rem:.23622,pt:2.83465,cm:10,mm:1,in:.0393701,pc:.0148148,vw:.00377953,vh:.00377953,vmin:.00377953,vmax:.00377953},in:{px:96,em:6,rem:6,pt:72,cm:2.54,mm:25.4,in:1,pc:.375,vw:.09375,vh:.09375,vmin:.09375,vmax:.09375},pc:{px:16,em:1,rem:1,pt:12,cm:.423333,mm:.0423333,in:.166667,pc:1,vw:.0625,vh:.0625,vmin:.0625,vmax:.0625},vw:{px:160,em:10,rem:10,pt:120,cm:4.23333,mm:.423333,in:1.66667,pc:.625,vw:1,vh:1,vmin:1,vmax:1},vh:{px:160,em:10,rem:10,pt:120,cm:4.23333,mm:.423333,in:1.66667,pc:.625,vw:1,vh:1,vmin:1,vmax:1},vmin:{px:160,em:10,rem:10,pt:120,cm:4.23333,mm:.423333,in:1.66667,pc:.625,vw:1,vh:1,vmin:1,vmax:1},vmax:{px:160,em:10,rem:10,pt:120,cm:4.23333,mm:.423333,in:1.66667,pc:.625,vw:1,vh:1,vmin:1,vmax:1}},oh="onHandleFontsizeChange",rn="e-richtexteditor",Yt="e-rtl",bs="e-disabled",hl="rte-iframe-script-sheet",cl="rte-iframe-style-sheet",ap="e-rte-container",sr="e-rte-toolbar",pl="e-rte-tb-fixed",Ro="e-rte-tb-float",ys="e-rte-inline",dl="e-rte-tb-expand",_i="e-rte-full-screen",or="e-rte-quick-toolbar",lp="e-rte-text-quicktoolbar",ul="e-rte-pop",hp="e-tb-static",cp="e-rte-quick-popup",Xt="e-quick-dropdown",pp="e-rte-image-popup",fl="e-rte-text-popup",Gi="e-rte-inline-popup",Cs="e-rte-inline-dropdown",Ze="e-rte-dropdown-popup",Ss="e-rte-dropdown-icons",gt="e-rte-dropdown-items",He="e-rte-dropdown-btn",dp="e-rte-content",zt="e-toolbar-item",Ts="e-toolbar-wrapper",ml="e-show",Xi="e-hide",gl="e-visible",Es="e-focused",vl="e-remove-white-space",bl="e-imgright",yl="e-imgleft",Cl="e-imgcenter",qt="e-imgbreak",$t="e-clickelem",Ca="e-video-clickelem",Yi="e-audio-wrap",Ls="e-video-wrap",et="e-img-caption",up="e-rte-img-caption",Wi="e-caption-inline",Jt="e-imginline",fp="e-audio-inline",mp="e-video-inline",Sl="e-rte-character-count",ws="e-warning",ks="e-error",Or="e-icons",ti="e-active",Ao="e-expand-open",Oe="e-rte-elements",Ds="e-tbar-btn",gp="e-rte-horizontal-separator",Tl="e-tbar-ios-fixed",xs="e-rte-list-primary-content",vp="e-rte-numberformatlist-dropdown",bp="e-rte-bulletformatlist-dropdown",yp="e-formats-tbar-btn",Cp="e-font-name-tbar-btn",Sp="e-font-size-tbar-btn",Tp="e-alignment-tbar-btn",Ep="e-rte-fontcolor-element",Lp="e-rte-backgroundcolor-element",Qi="e-rte-color-content",wp="e-rte-fontcolor-dropdown",kp="e-rte-backgroundcolor-dropdown",Dp="e-rte-square-palette",El="e-rte-fontcolor-colorpicker",Ll="e-rte-backgroundcolor-colorpicker",Po="e-rte-readonly",Ue="e-cell-select",Sa="e-cell-select-end",Ta="e-multi-cells-select",Ci="e-dashed-border",Si="e-alternate-border",Un="e-column-resize",Vn="e-row-resize",_n="e-table-box",wl="e-rte-hidden",xp="e-rte-keepformat",Np="e-rte-removeformat",Op="e-rte-plainformat",Mp="e-rte-pasteok",Bp="e-rte-pastecancel",Rp="e-rte-dialog-minheight",Io="e-rte-image",Ap="e-resize",ar="e-img-focus",Pp="e-audio-focus",Ip="e-video-focus",Wn="e-rte-drag-image",ah="e-rte-upload-popup",Ho="e-popup-open",Hp="e-img-resize",Fp="e-droparea",qp="e-img-inner",jp="e-upload-files",lh="e-rte-dialog-upload",zp="e-custom-tile",Up="e-nocolor-item",kl="e-rte-table-border",Dl="e-rte-table-resize",xl="e-rte-fixed-tb-expand",Nl="e-rte-toolbar-enabled",ri="e-rte-srctextarea",Vp=["Enter","ArrowRight","ArrowLeft"],X;(function(a){a[a.Toolbar=0]="Toolbar",a[a.Content=1]="Content",a[a.Popup=2]="Popup",a[a.LinkToolbar=3]="LinkToolbar",a[a.TextToolbar=4]="TextToolbar",a[a.ImageToolbar=5]="ImageToolbar",a[a.AudioToolbar=6]="AudioToolbar",a[a.VideoToolbar=7]="VideoToolbar",a[a.InlineToolbar=8]="InlineToolbar",a[a.TableToolbar=9]="TableToolbar"})(X||(X={}));var nt;(function(a){a.Expand="Expand",a.MultiRow="MultiRow",a.Scrollable="Scrollable"})(nt||(nt={}));var tt;(function(a){a.InsertLink="InsertLink",a.InsertImage="InsertImage",a.InsertAudio="InsertAudio",a.InsertVideo="InsertVideo",a.InsertTable="InsertTable"})(tt||(tt={}));var Sn;(function(a){a.Uploaded="Uploaded",a.Dropped="Dropped",a.Pasted="Pasted"})(Sn||(Sn={}));var Ea=["alignments","formats","fontname","fontsize","fontcolor","backgroundcolor","align","display","audiolayoutoption","videolayoutoption","videoalign","tablerows","tablecolumns","tablecell","tablecellhorizontalalign","tablecellverticalalign","styles","numberformatlist","bulletformatlist"],Mi={alignments:{id:"Alignments",icon:"e-alignments",tooltip:"Alignments",command:"Alignments",subCommand:"Alignments"},justifyleft:{id:"JustifyLeft",icon:"e-justify-left",tooltip:"JustifyLeft",command:"Alignments",subCommand:"JustifyLeft"},justifycenter:{id:"JustifyCenter",icon:"e-justify-center",tooltip:"JustifyCenter",command:"Alignments",subCommand:"JustifyCenter"},justifyright:{id:"JustifyRight",icon:"e-justify-right",tooltip:"JustifyRight",command:"Alignments",subCommand:"JustifyRight"},justifyfull:{id:"JustifyFull",icon:"e-justify-full",tooltip:"JustifyFull",command:"Alignments",subCommand:"JustifyFull"},fontname:{id:"FontName",icon:"e-font-name",tooltip:"Font Name",command:"Font",subCommand:"FontName"},fontsize:{id:"FontSize",icon:"e-font-size",tooltip:"Font Size",command:"Font",subCommand:"FontSize"},fontcolor:{id:"FontColor",icon:"e-rte-font-color",tooltip:"Font Color",command:"Font",subCommand:"FontColor",value:"#ff0000ff"},backgroundcolor:{id:"BackgroundColor",icon:"e-background-color",tooltip:"Background Color",command:"Font",subCommand:"BackgroundColor",value:"#ffff00ff"},bold:{id:"Bold",icon:"e-bold",tooltip:"Bold",command:"Style",subCommand:"Bold"},italic:{id:"Italic",icon:"e-italic",tooltip:"Italic",command:"Style",subCommand:"Italic"},underline:{id:"Underline",icon:"e-underline",tooltip:"Underline",command:"Style",subCommand:"Underline"},strikethrough:{id:"StrikeThrough",icon:"e-strike-through",tooltip:"StrikeThrough",command:"Style",subCommand:"StrikeThrough"},clearformat:{id:"ClearFormat",icon:"e-clear-format",tooltip:"Clear Format",command:"Clear",subCommand:"ClearFormat"},clearall:{id:"ClearAll",icon:"e-clear-all",tooltip:"Clear All",command:"Clear",subCommand:"ClearAll"},cut:{id:"Cut",icon:"e-cut",tooltip:"Cut",command:"ClipBoard",subCommand:"Cut"},copy:{id:"Copy",icon:"e-copy",tooltip:"Copy",command:"ClipBoard",subCommand:"Copy"},paste:{id:"Paste",icon:"e-paste",tooltip:"Paste",command:"ClipBoard",subCommand:"Paste"},unorderedlist:{id:"UnorderedList",icon:"e-unorder-list",tooltip:"Bulleted List",command:"Lists",subCommand:"UL"},orderedlist:{id:"OrderedList",icon:"e-order-list",tooltip:"Numbered List",command:"Lists",subCommand:"OL"},numberformatlist:{id:"NumberFormatList",icon:"e-order-list",tooltip:"Number Format List",command:"NumberFormatList",subCommand:"NumberFormatList"},bulletformatlist:{id:"BulletFormatList",icon:"e-unorder-list",tooltip:"Bullet Format List",command:"BulletFormatList",subCommand:"BulletFormatList"},indent:{id:"Indent",icon:"e-indent",tooltip:"Increase Indent",command:"Indents",subCommand:"Indent"},outdent:{id:"Outdent",icon:"e-outdent",tooltip:"Decrease Indent",command:"Indents",subCommand:"Outdent"},undo:{id:"Undo",icon:"e-undo",tooltip:"Undo",command:"Actions",subCommand:"Undo"},redo:{id:"Redo",icon:"e-redo",tooltip:"Redo",command:"Actions",subCommand:"Redo"},superscript:{id:"SuperScript",icon:"e-super-script",tooltip:"Superscript",command:"Effects",subCommand:"SuperScript"},subscript:{id:"SubScript",icon:"e-sub-script",tooltip:"Subscript",command:"Effects",subCommand:"SubScript"},createlink:{id:"CreateLink",icon:"e-create-link",tooltip:"Insert Hyperlink",command:"Links",subCommand:"CreateLink"},openlink:{id:"OpenLink",icon:"e-open-link",tooltip:"Open Link",command:"Links",subCommand:"OpenLink"},editlink:{id:"EditLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Links",subCommand:"EditLink"},removelink:{id:"RemoveLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Links",subCommand:"RemoveLink"},image:{id:"Image",icon:"e-image",tooltip:"Insert Image",command:"Images",subCommand:"Image"},audio:{id:"Audio",icon:"e-audio",tooltip:"Insert Audio",command:"Audios",subCommand:"Audio"},video:{id:"Video",icon:"e-video",tooltip:"Insert Video",command:"Videos",subCommand:"Video"},filemanager:{id:"FileManager",icon:"e-rte-file-manager",tooltip:"File Manager",command:"Files",subCommand:"File"},createtable:{id:"CreateTable",icon:"e-create-table",tooltip:"Create Table",command:"Table",subCommand:"CreateTable"},removetable:{id:"removeTable",icon:"e-remove-table",tooltip:"Remove Table",command:"removeTable",subCommand:"removeTable"},replace:{id:"Replace",icon:"e-replace",tooltip:"Replace",command:"Images",subCommand:"Replace"},audioreplace:{id:"AudioReplace",icon:"e-audio-replace",tooltip:"Audio Replace",command:"Audios",subCommand:"AudioReplace"},audioremove:{id:"AudioRemove",icon:"e-audio-remove",tooltip:"Audio Remove",command:"Audios",subCommand:"AudioRemove"},audiolayoutoption:{id:"AudioLayoutOption",icon:"e-audio-display",tooltip:"Audio LayoutOption",command:"Audios",subCommand:"AudioLayoutOption"},videoreplace:{id:"VideoReplace",icon:"e-video-replace",tooltip:"Video Replace",command:"Videos",subCommand:"VideoReplace"},videoalign:{id:"VideoAlign",icon:"e-video-align",tooltip:"Video Align",command:"Videos",subCommand:"VideoAlign"},videoremove:{id:"VideoRemove",icon:"e-video-remove",tooltip:"Video Remove",command:"Videos",subCommand:"VideoRemove"},videolayoutoption:{id:"VideoLayoutOption",icon:"e-video-display",tooltip:"Video LayoutOption",command:"Videos",subCommand:"VideoLayoutOption"},videodimension:{id:"VideoDimension",icon:"e-video-dimension",tooltip:"Video Dimension",command:"Videos",subCommand:"VideoDimension"},align:{id:"Align",icon:"e-align",tooltip:"Align",command:"Images",subCommand:"Align"},caption:{id:"Caption",icon:"e-caption",tooltip:"Image Caption",command:"Images",subCommand:"Caption"},remove:{id:"Remove",icon:"e-remove",tooltip:"Remove",command:"Images",subCommand:"Remove"},openimagelink:{id:"OpenImageLink",icon:"e-open-link",tooltip:"Open Link",command:"Images",subCommand:"OpenImageLink"},editimagelink:{id:"EditImageLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Images",subCommand:"EditImageLink"},removeimagelink:{id:"RemoveImageLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Images",subCommand:"RemoveImageLink"},insertlink:{id:"InsertLink",icon:"e-insert-link",tooltip:"Insert Link",command:"Images",subCommand:"InsertLink"},display:{id:"Display",icon:"e-display",tooltip:"Display",command:"Images",subCommand:"Display"},alttext:{id:"AltText",icon:"e-alt-text",tooltip:"Alternative Text",command:"Images",subCommand:"AltText"},dimension:{id:"Dimension",icon:"e-img-dimension",tooltip:"Change Size",command:"Images",subCommand:"Dimension"},fullscreen:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"View",subCommand:"Maximize"},maximize:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"FullScreen",subCommand:"Maximize"},minimize:{id:"Minimize",icon:"e-minimize",tooltip:"Minimize",command:"FullScreen",subCommand:"Minimize"},lowercase:{id:"LowerCase",icon:"e-lower-case",tooltip:"Lower Case",command:"Casing",subCommand:"LowerCase"},uppercase:{id:"UpperCase",icon:"e-upper-case",tooltip:"Upper Case",command:"Casing",subCommand:"UpperCase"},print:{id:"Print",icon:"e-print",tooltip:"Print",command:"Print",subCommand:"Print"},formats:{id:"Formats",icon:"e-formats",tooltip:"Formats",command:"Formats",subCommand:"Formats"},sourcecode:{id:"SourceCode",icon:"e-source-code",tooltip:"Code View (Ctrl+Shift+H)",command:"SourceCode",subCommand:"SourceCode"},preview:{id:"Preview",icon:"e-preview",tooltip:"Preview (Ctrl+Shift+H)",command:"Preview",subCommand:"Preview"},viewside:{id:"ViewSide",icon:"e-view-side",tooltip:"ViewSide",command:"ViewSide",subCommand:"ViewSide"},insertcode:{id:"InsertCode",icon:"e-insert-code",tooltip:"Insert Code",command:"Formats",subCommand:"Pre"},blockquote:{id:"Blockquote",icon:"e-blockquote",tooltip:"Blockquote",command:"Formats",subCommand:"blockquote"},tableheader:{id:"TableHeader",icon:"e-table-header",tooltip:"Table Header",command:"Table",subCommand:"TableHeader"},tableremove:{id:"TableRemove",icon:"e-table-remove",tooltip:"Table Remove",command:"Table",subCommand:"TableRemove"},tablerows:{id:"TableRows",icon:"e-table-rows",tooltip:"Table Rows",command:"Table",subCommand:"TableRows"},tablecolumns:{id:"TableColumns",icon:"e-table-columns",tooltip:"Table Columns",command:"Table",subCommand:"TableColumns"},tablecell:{id:"TableCell",icon:"e-table-cell",tooltip:"Table Cell",command:"Table",subCommand:"TableCell"},tablecellbackground:{id:"TableCellBackground",icon:"e-table-cell-background",tooltip:"Table Cell Background",command:"Table",subCommand:"TableCellBackground"},tablecellhorizontalalign:{id:"TableCellHorizontalAlign",icon:"e-table-cell-horizontalAlign",tooltip:"Table Cell HorizontalAlign",command:"Table",subCommand:"TableCellHorizontalAlign"},tablecellverticalalign:{id:"TableCellVerticalAlign",icon:"e-table-cell-verticalAlign",tooltip:"Table Cell VerticalAlign",command:"Table",subCommand:"TableCellVerticalAlign"},tableeditproperties:{id:"TableEditProperties",icon:"e-table-edit-properties",tooltip:"Table Edit Properties",command:"Table",subCommand:"TableEditProperties"},styles:{id:"Styles",icon:"e-table-styles",tooltip:"Styles",command:"Table",subCommand:"Styles"},formatpainter:{id:"FormatPainter",icon:"e-rte-format-painter",tooltip:"Format Painter",command:"FormatPainter",subCommand:"FormatPainter"},emojipicker:{id:"EmojiPicker",icon:"e-emoji",tooltip:"Emoji Icon",command:"EmojiPicker",subCommand:"EmojiPicker"}},_p=[{locale:"alignmentsDropDownLeft",value:"JustifyLeft"},{locale:"alignmentsDropDownCenter",value:"JustifyCenter"},{locale:"alignmentsDropDownRight",value:"JustifyRight"},{locale:"alignmentsDropDownJustify",value:"JustifyFull"}],sn=[{iconCss:"e-icons e-justify-left",text:"Align Left",command:"Alignments",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",text:"Align Center",command:"Alignments",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",text:"Align Right",command:"Alignments",subCommand:"JustifyRight"},{iconCss:"e-icons e-justify-full",text:"Align Justify",command:"Alignments",subCommand:"JustifyFull"}],Wp=[{iconCss:"e-icons e-justify-left",command:"Images",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",command:"Images",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",command:"Images",subCommand:"JustifyRight"}],Qp=[{iconCss:"e-icons e-justify-left",command:"Videos",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",command:"Videos",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",command:"Videos",subCommand:"JustifyRight"}],Kp=[{locale:"imageDisplayDropDownInline",value:"Inline"},{locale:"imageDisplayDropDownBreak",value:"Break"}],Gp=[{locale:"audioLayoutOptionDropDownInline",value:"Inline"},{locale:"audioLayoutOptionDropDownBreak",value:"Break"}],Xp=[{locale:"videoLayoutOptionDropDownInline",value:"Inline"},{locale:"videoLayoutOptionDropDownBreak",value:"Break"}],lr=[{text:"Inline",cssClass:"e-inline",command:"Images",subCommand:"Inline"},{text:"Break",cssClass:"e-break",command:"Images",subCommand:"Break"}],hr=[{text:"Inline",cssClass:"e-audio-inline",command:"Audios",subCommand:"Inline"},{text:"Break",cssClass:"e-audio-break",command:"Audios",subCommand:"Break"}],cr=[{text:"Inline",cssClass:"e-video-inline",command:"Videos",subCommand:"Inline"},{text:"Break",cssClass:"e-video-break",command:"Videos",subCommand:"Break"}],Yp=[{iconCss:"e-icons e-cell-merge",text:"Merge cells",command:"Table",subCommand:"Merge"},{iconCss:"e-icons e-cell-horizontal-split",text:"Horizontal split",command:"Table",subCommand:"HorizontalSplit"},{iconCss:"e-icons e-cell-vertical-split",text:"Vertical split",command:"Table",subCommand:"VerticalSplit"}],$p=[{locale:"tableInsertRowDropDownBefore",value:"InsertRowBefore"},{locale:"tableInsertRowDropDownAfter",value:"InsertRowAfter"},{locale:"tableInsertRowDropDownDelete",value:"DeleteRow"}],pr=[{iconCss:"e-icons e-insert-row-before",text:"Insert row before",command:"Table",subCommand:"InsertRowBefore"},{iconCss:"e-icons e-insert-row-after",text:"Insert row after",command:"Table",subCommand:"InsertRowAfter"},{iconCss:"e-icons e-delete-row",text:"Delete row",command:"Table",subCommand:"DeleteRow"}],Jp=[{locale:"tableInsertColumnDropDownLeft",value:"InsertColumnLeft"},{locale:"tableInsertColumnDropDownRight",value:"InsertColumnRight"},{locale:"tableInsertColumnDropDownDelete",value:"DeleteColumn"}],dr=[{iconCss:"e-icons e-insert-column-left",text:"Insert column left",command:"Table",subCommand:"InsertColumnLeft"},{iconCss:"e-icons e-insert-column-right",text:"Insert column right",command:"Table",subCommand:"InsertColumnRight"},{iconCss:"e-icons e-delete-column",text:"Delete column",command:"Table",subCommand:"DeleteColumn"}],Zp=[{locale:"tableVerticalAlignDropDownTop",value:"AlignTop"},{locale:"tableVerticalAlignDropDownMiddle",value:"AlignMiddle"},{locale:"tableVerticalAlignDropDownBottom",value:"AlignBottom"}],ur=[{iconCss:"e-icons e-align-top",text:"Align Top",command:"Table",subCommand:"AlignTop"},{iconCss:"e-icons e-align-middle",text:"Align Middle",command:"Table",subCommand:"AlignMiddle"},{iconCss:"e-icons e-align-bottom",text:"Align Bottom",command:"Table",subCommand:"AlignBottom"}],ed=[{locale:"tableStylesDropDownDashedBorder",value:"Dashed"},{locale:"tableStylesDropDownAlternateRows",value:"Alternate"}],fr=[{text:"Dashed Borders",cssClass:"e-dashed-borders",command:"Table",subCommand:"Dashed"},{text:"Alternate Rows",cssClass:"e-alternate-rows",command:"Table",subCommand:"Alternate"}],td=["Bold","Italic","Underline","|","Formats","Alignments","Blockquote","OrderedList","UnorderedList","|","CreateLink","Image","|","SourceCode","Undo","Redo"],mr=[{cssClass:"e-default",text:"Default",command:"Font",subCommand:"FontName",value:""},{cssClass:"e-segoe-ui",text:"Segoe UI",command:"Font",subCommand:"FontName",value:"Segoe UI"},{cssClass:"e-arial",text:"Arial",command:"Font",subCommand:"FontName",value:"Arial,Helvetica,sans-serif"},{cssClass:"e-georgia",text:"Georgia",command:"Font",subCommand:"FontName",value:"Georgia,serif"},{cssClass:"e-impact",text:"Impact",command:"Font",subCommand:"FontName",value:"Impact,Charcoal,sans-serif"},{cssClass:"e-tahoma",text:"Tahoma",command:"Font",subCommand:"FontName",value:"Tahoma,Geneva,sans-serif"},{cssClass:"e-times-new-roman",text:"Times New Roman",command:"Font",subCommand:"FontName",value:"Times New Roman,Times,serif"},{cssClass:"e-verdana",text:"Verdana",command:"Font",subCommand:"FontName",value:"Verdana,Geneva,sans-serif"}],id=[{text:"Default",value:""},{text:"8 pt",value:"8pt"},{text:"10 pt",value:"10pt"},{text:"12 pt",value:"12pt"},{text:"14 pt",value:"14pt"},{text:"18 pt",value:"18pt"},{text:"24 pt",value:"24pt"},{text:"36 pt",value:"36pt"}],gr=[{cssClass:"e-paragraph",text:"Paragraph",command:"Formats",subCommand:"P",value:"P"},{cssClass:"e-code",text:"Code",command:"Formats",subCommand:"Pre",value:"Pre"},{cssClass:"e-h1",text:"Heading 1",command:"Formats",subCommand:"H1",value:"H1"},{cssClass:"e-h2",text:"Heading 2",command:"Formats",subCommand:"H2",value:"H2"},{cssClass:"e-h3",text:"Heading 3",command:"Formats",subCommand:"H3",value:"H3"},{cssClass:"e-h4",text:"Heading 4",command:"Formats",subCommand:"H4",value:"H4"}],nd={Custom:["","#000000","#e7e6e6","#44546a","#4472c4","#ed7d31","#a5a5a5","#ffc000","#70ad47","#ff0000","#f2f2f2","#808080","#cfcdcd","#d5dce4","#d9e2f3","#fbe4d5","#ededed","#fff2cc","#e2efd9","#ffcccc","#d9d9d9","#595959","#aeaaaa","#acb9ca","#b4c6e7","#f7caac","#dbdbdb","#ffe599","#c5e0b3","#ff8080","#bfbfbf","#404040","#747070","#8496b0","#8eaadb","#f4b083","#c9c9c9","#ffd966","#a8d08d","#ff3333","#a6a6a6","#262626","#3b3838","#323e4f","#2f5496","#c45911","#7b7b7b","#bf8f00","#538135","#b30000","#7f7f7f","#0d0d0d","#161616","#212934","#1f3763","#823b0b","#525252","#7f5f00","#375623","#660000"]},rd={Custom:["","#000000","#ffff00","#00ff00","#00ffff","#0000ff","#ff0000","#000080","#800080","#996633","#f2f2f2","#808080","#ffffcc","#b3ffb3","#ccffff","#ccccff","#ffcccc","#ccccff","#ff80ff","#f2e6d9","#d9d9d9","#595959","#ffff80","#80ff80","#b3ffff","#8080ff","#ff8080","#8080ff","#ff00ff","#dfbf9f","#bfbfbf","#404040","#ffff33","#33ff33","#33ffff","#3333ff","#ff3333","#0000b3","#b300b3","#c68c53","#a6a6a6","#262626","#e6e600","#00b300","#009999","#000099","#b30000","#000066","#660066","#86592d","#7f7f7f","#0d0d0d","#999900","#006600","#006666","#000066","#660000","#00004d","#4d004d","#734d26"]},vr=[{text:"None",command:"Lists",subCommand:"NumberFormatList",value:"none"},{text:"Number",command:"Lists",subCommand:"NumberFormatList",value:"decimal"},{text:"Lower Greek",command:"Lists",subCommand:"NumberFormatList",value:"lowerGreek"},{text:"Lower Roman",command:"Lists",subCommand:"NumberFormatList",value:"lowerRoman"},{text:"Upper Alpha",command:"Lists",subCommand:"NumberFormatList",value:"upperAlpha"},{text:"Lower Alpha",command:"Lists",subCommand:"NumberFormatList",value:"lowerAlpha"},{text:"Upper Roman",command:"Lists",subCommand:"NumberFormatList",value:"upperRoman"}],br=[{text:"None",command:"Lists",subCommand:"BulletFormatList",value:"none"},{text:"Disc",command:"Lists",subCommand:"BulletFormatList",value:"disc"},{text:"Circle",command:"Lists",subCommand:"BulletFormatList",value:"circle"},{text:"Square",command:"Lists",subCommand:"BulletFormatList",value:"square"}];function Ft(a,t,e){for(var i=0;t.length>i;i++)if(t[i].value===e.subCommand)return a.localeObj.getConstant(t[i].locale);return e.text}function sd(a){sn.forEach(function(t,e){sn[e].text=Ft(a,_p,sn[e])}),lr.forEach(function(t,e){lr[e].text=Ft(a,Kp,lr[e])}),hr.forEach(function(t,e){hr[e].text=Ft(a,Gp,hr[e])}),cr.forEach(function(t,e){cr[e].text=Ft(a,Xp,cr[e])}),pr.forEach(function(t,e){pr[e].text=Ft(a,$p,pr[e])}),dr.forEach(function(t,e){dr[e].text=Ft(a,Jp,dr[e])}),ur.forEach(function(t,e){ur[e].text=Ft(a,Zp,ur[e])}),fr.forEach(function(t,e){fr[e].text=Ft(a,ed,fr[e])})}var Ns={"Insert Link":"Ctrl+K","Insert Image":"Ctrl+Shift+I","Create Table":"Ctrl+Shift+E",Undo:"Ctrl+Z",Redo:"Ctrl+Y",Copy:"Ctrl+C",Cut:"Ctrl+X",Paste:"Ctrl+V",Bold:"Ctrl+B",Italic:"Ctrl+I",Underline:"Ctrl+U",Strikethrough:"Ctrl+Shift+S","Upper Case":"Ctrl+Shift+U","Lower Case":"Ctrl+Shift+L",Superscript:"Ctrl+Shift+=",Subscript:"Ctrl+=","Code View":"Ctrl+Shift+H",Maximize:"Ctrl+Shift+F",Minimize:"Esc","Clear Format":"Ctrl+Shift+R","Numbered List":"Ctrl+Shift+O","Bulleted List":"Ctrl+Alt+O","Number Format List":"Ctrl+Shift+O","Bullet Format List":"Ctrl+Alt+O","Insert Audio":"Ctrl+Shift+A","Insert Video":"Ctrl+Alt+V","Increase Indent":"Ctrl+]","Decrease Indent":"Ctrl+[","Decrease Fontsize":"Ctrl+Shift+<","Increase Fontsize":"Ctrl+Shift+>","Justify Center":"Ctrl+E","Justify Full":"Ctrl+J","Justify Left":"Ctrl+L","Justify Right":"Ctrl+R","Format Painter":"Alt+Shift+C, Alt+Shift+V"},od=[{name:"Smilies & People",code:"1F600",iconCss:"e-emoji",icons:[{code:"1F600",desc:"Grinning face"},{code:"1F603",desc:"Grinning face with big eyes"},{code:"1F604",desc:"Grinning face with smiling eyes"},{code:"1F606",desc:"Grinning squinting face"},{code:"1F605",desc:"Grinning face with sweat"},{code:"1F602",desc:"Face with tears of joy"},{code:"1F923",desc:"Rolling on the floor laughing"},{code:"1F60A",desc:"Smiling face with smiling eyes"},{code:"1F607",desc:"Smiling face with halo"},{code:"1F642",desc:"Slightly smiling face"},{code:"1F643",desc:"Upside-down face"},{code:"1F60D",desc:"Smiling face with heart-eyes"},{code:"1F618",desc:"Face blowing a kiss"},{code:"1F61B",desc:"Face with tongue"},{code:"1F61C",desc:"Winking face with tongue"},{code:"1F604",desc:"Grinning face with smiling eyes"},{code:"1F469",desc:"Woman"},{code:"1F468",desc:"Man"},{code:"1F467",desc:"Girl"},{code:"1F466",desc:"Boy"},{code:"1F476",desc:"Baby"},{code:"1F475",desc:"Old woman"},{code:"1F474",desc:"Old man"},{code:"1F46E",desc:"Police officer"},{code:"1F477",desc:"Construction worker"},{code:"1F482",desc:"Guard"},{code:"1F575",desc:"Detective"},{code:"1F9D1",desc:"Cook"}]},{name:"Animals & Nature",code:"1F435",iconCss:"e-animals",icons:[{code:"1F436",desc:"Dog face"},{code:"1F431",desc:"Cat face"},{code:"1F42D",desc:"Mouse face"},{code:"1F439",desc:"Hamster face"},{code:"1F430",desc:"Rabbit face"},{code:"1F98A",desc:"Fox face"},{code:"1F43B",desc:"Bear face"},{code:"1F43C",desc:"Panda face"},{code:"1F428",desc:"Koala"},{code:"1F42F",desc:"Tiger face"},{code:"1F981",desc:"Lion face"},{code:"1F42E",desc:"Cow face"},{code:"1F437",desc:"Pig face"},{code:"1F43D",desc:"Pig nose"},{code:"1F438",desc:"Frog face"},{code:"1F435",desc:"Monkey face"},{code:"1F649",desc:"Hear-no-evil monkey"},{code:"1F64A",desc:"Speak-no-evil monkey"},{code:"1F412",desc:"Monkey"},{code:"1F414",desc:"Chicken"},{code:"1F427",desc:"Penguin"},{code:"1F426",desc:"Bird"},{code:"1F424",desc:"Baby chick"},{code:"1F986",desc:"Duck"},{code:"1F985",desc:"Eagle"}]},{name:"Food & Drink",code:"1F347",iconCss:"e-food-and-drinks",icons:[{code:"1F34E",desc:"Red apple"},{code:"1F34C",desc:"Banana"},{code:"1F347",desc:"Grapes"},{code:"1F353",desc:"Strawberry"},{code:"1F35E",desc:"Bread"},{code:"1F950",desc:"Croissant"},{code:"1F955",desc:"Carrot"},{code:"1F354",desc:"Hamburger"},{code:"1F355",desc:"Pizza"},{code:"1F32D",desc:"Hot dog"},{code:"1F35F",desc:"French fries"},{code:"1F37F",desc:"Popcorn"},{code:"1F366",desc:"Soft ice cream"},{code:"1F367",desc:"Shaved ice"},{code:"1F36A",desc:"Cookie"},{code:"1F382",desc:"Birthday cake"},{code:"1F370",desc:"Shortcake"},{code:"1F36B",desc:"Chocolate bar"},{code:"1F369",desc:"Donut"},{code:"1F36E",desc:"Custard"},{code:"1F36D",desc:"Lollipop"},{code:"1F36C",desc:"Candy"},{code:"1F377",desc:"Wine glass"},{code:"1F37A",desc:"Beer mug"},{code:"1F37E",desc:"Bottle with popping cork"}]},{name:"Activities",code:"1F383",iconCss:"e-activities",icons:[{code:"26BD",desc:"Soccer ball"},{code:"1F3C0",desc:"Basketball"},{code:"1F3C8",desc:"American football"},{code:"26BE",desc:"Baseball"},{code:"1F3BE",desc:"Tennis"},{code:"1F3D0",desc:"Volleyball"},{code:"1F3C9",desc:"Rugby football"},{code:"1F3B1",desc:"Pool 8 ball"},{code:"1F3D3",desc:"Ping pong"},{code:"1F3F8",desc:"Badminton"},{code:"1F94A",desc:"Boxing glove"},{code:"1F3CA",desc:"Swimmer"},{code:"1F3CB",desc:"Weightlifter"},{code:"1F6B4",desc:"Bicyclist"},{code:"1F6F9",desc:"Skateboard"},{code:"1F3AE",desc:"Video game"},{code:"1F579",desc:"Joystick"},{code:"1F3CF",desc:"Cricket"},{code:"1F3C7",desc:"Horse racing"},{code:"1F3AF",desc:"Direct hit"},{code:"1F3D1",desc:"Field hockey"},{code:"1F3B0",desc:"Slot machine"},{code:"1F3B3",desc:"Bowling"},{code:"1F3B2",desc:"Game die"},{code:"265F",desc:"Chess pawn"}]},{name:"Travel & Places",code:"1F30D",iconCss:"e-travel-and-places",icons:[{code:"2708",desc:"Airplane"},{code:"1F697",desc:"Automobile"},{code:"1F695",desc:"Taxi"},{code:"1F6B2",desc:"Bicycle"},{code:"1F68C",desc:"Bus"},{code:"1F682",desc:"Locomotive"},{code:"1F6F3",desc:"Passenger ship"},{code:"1F680",desc:"Rocket"},{code:"1F681",desc:"Helicopter"},{code:"1F6A2",desc:"Ship"},{code:"1F3DF",desc:"Stadium"},{code:"1F54C",desc:"Mosque"},{code:"26EA",desc:"Church"},{code:"1F6D5",desc:"Hindu Temple"},{code:"1F3D4",desc:"Snow-capped mountain"},{code:"1F3EB",desc:"School"},{code:"1F30B",desc:"Volcano"},{code:"1F3D6",desc:"Beach with umbrella"},{code:"1F3DD",desc:"Desert island"},{code:"1F3DE",desc:"National park"},{code:"1F3F0",desc:"Castle"},{code:"1F5FC",desc:"Tokyo tower"},{code:"1F5FD",desc:"Statue of liberty"},{code:"26E9",desc:"Shinto shrine"},{code:"1F3EF",desc:"Japanese castle"},{code:"1F3A2",desc:"Roller coaster"}]},{name:"Objects",code:"1F507",iconCss:"e-objects",icons:[{code:"1F4A1",desc:"Light bulb"},{code:"1F526",desc:"Flashlight"},{code:"1F4BB",desc:"Laptop computer"},{code:"1F5A5",desc:"Desktop computer"},{code:"1F5A8",desc:"Printer"},{code:"1F4F7",desc:"Camera"},{code:"1F4F8",desc:"Camera with flash"},{code:"1F4FD",desc:"Film projector"},{code:"1F3A5",desc:"Movie camera"},{code:"1F4FA",desc:"Television"},{code:"1F4FB",desc:"Radio"},{code:"1F50B",desc:"Battery"},{code:"231A",desc:"Watch"},{code:"1F4F1",desc:"Mobile phone"},{code:"260E",desc:"Telephone"},{code:"1F4BE",desc:"Floppy disk"},{code:"1F4BF",desc:"Optical disk"},{code:"1F4C0",desc:"Digital versatile disc"},{code:"1F4BD",desc:"Computer disk"},{code:"1F3A7",desc:"Headphone"},{code:"1F3A4",desc:"Microphone"},{code:"1F3B6",desc:"Multiple musical notes"},{code:"1F4DA",desc:"Books"}]},{name:"Symbols",code:"1F3E7",iconCss:"e-symbols",icons:[{code:"274C",desc:"Cross mark"},{code:"2714",desc:"Check mark"},{code:"26A0",desc:"Warning sign"},{code:"1F6AB",desc:"Prohibited"},{code:"2139",desc:"Information"},{code:"267B",desc:"Recycling symbol"},{code:"1F6AD",desc:"No smoking"},{code:"1F4F5",desc:"No mobile phones"},{code:"1F6AF",desc:"No littering"},{code:"1F6B3",desc:"No bicycles"},{code:"1F6B7",desc:"No pedestrians"},{code:"2795",desc:"Plus"},{code:"2796",desc:"Minus"},{code:"2797",desc:"Divide"},{code:"2716",desc:"Multiplication"},{code:"1F4B2",desc:"Dollar banknote"},{code:"1F4AC",desc:"Speech balloon"},{code:"2755",desc:"White exclamation mark"},{code:"2754",desc:"White question mark"},{code:"2764",desc:"Heart"}]}],ad={alignments:"Alignments",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",fontName:"Font Name",fontSize:"Font Size",fontColor:"Font Color",backgroundColor:"Background Color",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",clearFormat:"Clear Format",clearAll:"Clear All",cut:"Cut",copy:"Copy",paste:"Paste",unorderedList:"Bulleted List",orderedList:"Numbered List",indent:"Increase Indent",outdent:"Decrease Indent",undo:"Undo",redo:"Redo",superscript:"Superscript",subscript:"Subscript",createLink:"Insert Link",openLink:"Open Link",editLink:"Edit Link",removeLink:"Remove Link",image:"Insert Image",audio:"Insert Audio",video:"Insert Video",replace:"Replace",numberFormatList:"Number Format List",bulletFormatList:"Bullet Format List",audioReplace:"Replace",videoReplace:"Replace",videoAlign:"Align",videoDimension:"Dimension",audioRemove:"Remove",videoRemove:"Remove",audioLayoutOption:"Layout option",videoLayoutOption:"Layout option",align:"Align",caption:"Caption",remove:"Remove",insertLink:"Insert Link",display:"Display",altText:"Alternative text",dimension:"Change Size",fullscreen:"Maximize",maximize:"Maximize",minimize:"Minimize",lowerCase:"Lower Case",upperCase:"Upper Case",print:"Print",formats:"Formats",sourcecode:"Code View",preview:"Preview",viewside:"ViewSide",insertCode:"Insert Code",blockquote:"Blockquote",linkText:"Display text",linkTooltipLabel:"Title",linkWebUrl:"Web address",linkTitle:"Enter a title",linkurl:"https://example.com",linkOpenInNewWindow:"Open link in new window",linkHeader:"Insert Link",dialogInsert:"Insert",dialogCancel:"Cancel",dialogUpdate:"Update",imageHeader:"Insert Image",audioHeader:"Insert Audio",videoHeader:"Insert Video",imageLinkHeader:"You can also provide a link from the web",audioLinkHeader:"You can also provide a link from the web",videoLinkHeader:"Web URL",embedVideoLinkHeader:"Media Embed URL",mdimageLink:"Please provide a URL for your image",imageUploadMessage:"Drop image here or browse to upload",audioUploadMessage:"Drop an audio file or browse to upload",videoUploadMessage:"Drop a video file or browse to upload",imageDeviceUploadMessage:"Click here to upload",audioDeviceUploadMessage:"Click here to upload",videoDeviceUploadMessage:"Click here to upload",imageAlternateText:"Alternate Text",alternateHeader:"Alternative Text",browse:"Browse",imageUrl:"https://example.com/image.png",audioUrl:"https://example.com/audio.mp3",videoUrl:"https://example.com/video.mp4",webUrl:"Web URL",embedUrl:"Embed Code",imageCaption:"Caption",imageSizeHeader:"Image Size",videoSizeHeader:"Video Size",imageHeight:"Height",imageWidth:"Width",videoHeight:"Height",videoWidth:"Width",textPlaceholder:"Enter text",inserttablebtn:"Insert Table",tabledialogHeader:"Insert Table",tableWidth:"Width",cellpadding:"Cell Padding",cellspacing:"Cell Spacing",columns:"Number of columns",rows:"Number of rows",tableRows:"Row",tableColumns:"Column",tableCellHorizontalAlign:"Table Cell Horizontal Align",tableCellVerticalAlign:"Vertical Align",createTable:"Create Table",removeTable:"Remove Table",tableHeader:"Header Row",tableRemove:"Delete Table",tableCellBackground:"Table Cell Background",tableEditProperties:"Table Edit Properties",styles:"Styles",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteColumn:"Delete Column",insertRowBefore:"Insert Row Before",insertRowAfter:"Insert Row After",deleteRow:"Delete Row",tableEditHeader:"Edit Table",TableHeadingText:"Heading",TableColText:"Col",imageInsertLinkHeader:"Insert Link",editImageHeader:"Edit Image",editAudioHeader:"Edit Audio",editVideoHeader:"Edit Video",alignmentsDropDownLeft:"Align Left",alignmentsDropDownCenter:"Align Center",alignmentsDropDownRight:"Align Right",alignmentsDropDownJustify:"Align Justify",imageDisplayDropDownInline:"Inline",imageDisplayDropDownBreak:"Break",audioLayoutOptionDropDownInline:"Inline",audioLayoutOptionDropDownBreak:"Break",videoLayoutOptionDropDownInline:"Inline",videoLayoutOptionDropDownBreak:"Break",tableInsertRowDropDownBefore:"Insert row before",tableInsertRowDropDownAfter:"Insert row after",tableInsertRowDropDownDelete:"Delete row",tableInsertColumnDropDownLeft:"Insert column left",tableInsertColumnDropDownRight:"Insert column right",tableInsertColumnDropDownDelete:"Delete column",tableVerticalAlignDropDownTop:"Align Top",tableVerticalAlignDropDownMiddle:"Align Middle",tableVerticalAlignDropDownBottom:"Align Bottom",tableStylesDropDownDashedBorder:"Dashed Borders",tableStylesDropDownAlternateRows:"Alternate Rows",pasteFormat:"Paste Format",pasteFormatContent:"Choose the formatting action",plainText:"Plain Text",cleanFormat:"Clean",keepFormat:"Keep",pasteDialogOk:"OK",pasteDialogCancel:"Cancel",fileManager:"File Manager",fileDialogHeader:"File Browser",formatsDropDownParagraph:"Paragraph",formatsDropDownCode:"Code",formatsDropDownQuotation:"Blockquote",formatsDropDownHeading1:"Heading 1",formatsDropDownHeading2:"Heading 2",formatsDropDownHeading3:"Heading 3",formatsDropDownHeading4:"Heading 4",fontNameSegoeUI:"Segoe UI",fontNameArial:"Arial",fontNameGeorgia:"Georgia",fontNameImpact:"Impact",fontNameTahoma:"Tahoma",fontNameTimesNewRoman:"Times New Roman",fontNameVerdana:"Verdana",numberFormatListNumber:"Number",numberFormatListLowerAlpha:"Lower Alpha",numberFormatListUpperAlpha:"Upper Alpha",numberFormatListLowerRoman:"Lower Roman",numberFormatListUpperRoman:"Upper Roman",numberFormatListLowerGreek:"Lower Greek",bulletFormatListDisc:"Disc",bulletFormatListCircle:"Circle",bulletFormatListSquare:"Square",numberFormatListNone:"None",bulletFormatListNone:"None",formatPainter:"Format Painter",emojiPicker:"Emoji Picker",embeddedCode:"Embedded code",pasteEmbeddedCodeHere:"Paste embedded code here",emojiPickerTypeToFind:"Type to find",emojiPickerNoResultFound:"No results found",emojiPickerTrySomethingElse:"Try something else",linkAriaLabel:"Open in new window",unsupportedImage:"Unsupported file format",mergecells:"Merge cells",verticalsplit:"Vertical split",horizontalsplit:"Horizontal split"},ld={alignments:"alignments",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",justifyfull:"justifyFull",fontname:"fontName",fontsize:"fontSize",fontcolor:"fontColor",backgroundcolor:"backgroundColor",bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough",clearformat:"clearFormat",clearall:"clearAll",cut:"cut",copy:"copy",paste:"paste",unorderedlist:"unorderedList",orderedlist:"orderedList",indent:"indent",outdent:"outdent",numberformatlist:"numberFormatList",bulletformatlist:"bulletFormatList",undo:"undo",redo:"redo",filemanager:"fileManager",superscript:"superscript",subscript:"subscript",createlink:"createLink",openlink:"openLink",editlink:"editLink",removelink:"removeLink",openimagelink:"openLink",editimagelink:"editLink",removeimagelink:"removeLink",image:"image",audio:"audio",video:"video",replace:"replace",audioreplace:"audioReplace",videoreplace:"videoReplace",videoalign:"videoAlign",videodimension:"videoDimension",audioremove:"audioRemove",videoremove:"videoRemove",audiolayoutoption:"audioLayoutOption",videolayoutoption:"videoLayoutOption",align:"align",caption:"caption",remove:"remove",insertlink:"insertLink",display:"display",alttext:"alternateHeader",dimension:"dimension",fullscreen:"fullscreen",maximize:"maximize",minimize:"minimize",lowercase:"lowerCase",uppercase:"upperCase",print:"print",formats:"formats",sourcecode:"sourcecode",preview:"preview",viewside:"viewside",insertcode:"insertCode",blockquote:"blockquote",tablerows:"tableRows",tablecolumns:"tableColumns",tablecellhorizontalalign:"tableCellHorizontalAlign",tablecellverticalalign:"tableCellVerticalAlign",createtable:"createTable",removetable:"removeTable",tableheader:"tableHeader",tableremove:"tableRemove",tablecellbackground:"tableCellBackground",tableeditproperties:"tableEditProperties",styles:"styles",insertcolumnleft:"insertColumnLeft",insertcolumnright:"insertColumnRight",deletecolumn:"deleteColumn",aligntop:"AlignTop",alignmiddle:"AlignMiddle",alignbottom:"AlignBottom",insertrowbefore:"insertRowBefore",insertrowafter:"insertRowAfter",deleterow:"deleteRow",formatpainter:"formatPainter",emojipicker:"emojiPicker",embeddedCode:"Embedded code",pasteEmbeddedCodeHere:"Paste embedded code here",emojiPickerTypeToFind:"Type to find",emojiPickerNoResultFound:"No results found",emojiPickerTrySomethingElse:"Try something else",imageLinkAriaLabel:"Open in new window"},hd=[{locale:"fontNameSegoeUI",value:"Segoe UI"},{locale:"fontNameArial",value:"Arial,Helvetica,sans-serif"},{locale:"fontNameGeorgia",value:"Georgia,serif"},{locale:"fontNameImpact",value:"Impact,Charcoal,sans-serif"},{locale:"fontNameTahoma",value:"Tahoma,Geneva,sans-serif"},{locale:"fontNameTimesNewRoman",value:"Times New Roman,Times,serif"},{locale:"fontNameVerdana",value:"Verdana,Geneva,sans-serif"}],cd=[{locale:"formatsDropDownParagraph",value:"P"},{locale:"formatsDropDownCode",value:"Pre"},{locale:"formatsDropDownHeading1",value:"H1"},{locale:"formatsDropDownHeading2",value:"H2"},{locale:"formatsDropDownHeading3",value:"H3"},{locale:"formatsDropDownHeading4",value:"H4"}],pd=[{locale:"numberFormatListNone",value:"none"},{locale:"numberFormatListNumber",value:"decimal"},{locale:"numberFormatListLowerAlpha",value:"lower-alpha"},{locale:"numberFormatListUpperAlpha",value:"upper-alpha"},{locale:"numberFormatListLowerRoman",value:"lower-roman"},{locale:"numberFormatListUpperRoman",value:"upper-roman"},{locale:"numberFormatListLowerGreek",value:"lower-greek"}],dd=[{locale:"bulletFormatListNone",value:"none"},{locale:"bulletFormatListDisc",value:"disc"},{locale:"bulletFormatListCircle",value:"circle"},{locale:"bulletFormatListSquare",value:"square"}],ud=["Undo","Redo"],fd=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function La(a,t){var e=-1;return t.some(function(i,n){return typeof i=="string"&&a===i.toLocaleLowerCase()?(e=n,!0):!1}),e}function be(a,t){var e=!1;return a.classList.contains(t)&&(e=!0),e}function Ve(a,t,e,i){for(var n,r,s=0;s<a.length;s++)if(e==="value"&&a[s].value.toLocaleLowerCase()===t.toLocaleLowerCase()){n=a[s];break}else if(e==="text"&&a[s].text.toLocaleLowerCase()===t.toLocaleLowerCase()){n=a[s];break}else if(e==="subCommand"&&a[s].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){n=a[s];break}if(!h(n))switch(i){case"text":r=n.text;break;case"value":r=n.value;break;case"iconCss":r=n.iconCss;break}return r}function Se(){var a=!1;return x.isDevice&&x.isIos&&(a=!0),a}function Fo(a){return h(a)?"":a}function Ol(a,t,e){var i=0;return e?i=window.pageYOffset+t.getBoundingClientRect().top+a.clientY:i=a.pageY,i}function on(a,t){var e=t.getService("rteLocale"),i=ld[""+a],n=e.getConstant(i);return n}function qo(a,t,e){ph(e);for(var i=a.dropDownModule,n=a.args,r=Object.keys(a.args),s=0,o=r;s<o.length;s++)for(var l=o[s],c=0;c<a.tbItems.length;c++){var p=a.tbItems[c].subCommand,d=p&&p.toLocaleLowerCase();if(p&&d===l||p==="UL"&&l==="unorderedlist"||p==="OL"&&l==="orderedlist"||d==="pre"&&l==="insertcode"||p==="NumberFormatList"&&l==="numberFormatList"||p==="BulletFormatList"&&l==="bulletFormatList"){if(typeof n[""+l]=="boolean")n[""+l]===!0?k([a.tbElements[c]],[ti]):O([a.tbElements[c]],[ti]);else if((typeof n[""+l]=="string"||n[""+l]===null)&&La(l,a.parent.toolbarSettings.items)>=-1){var u=n[""+l]?n[""+l]:"",m="";switch(l){case"formats":{if(h(i.formatDropDown)||t||!h(i.formatDropDown)&&i.formatDropDown.isDestroyed)break;var f=a.parent.format.types,g=h(a.parent.format.default)?f[0].text:a.parent.format.default;m=u==="empty"?"":Ve(f,u,"subCommand","text"),i.formatDropDown.content='<span style="display: inline-flex;width:'+a.parent.format.width+'" ><span class="e-rte-dropdown-btn-text'+(h(a.parent.cssClass)?"":" "+a.parent.cssClass)+'">'+(h(m)?g:m)+"</span></span>",i.formatDropDown.dataBind();break}case"alignments":{if(h(i.alignDropDown)||!h(i.alignDropDown)&&i.alignDropDown.isDestroyed)break;var y=sn;m=Ve(y,u,"subCommand","iconCss"),i.alignDropDown.iconCss=h(m)?"e-icons e-justify-left":m,i.alignDropDown.dataBind();break}case"fontname":{if(h(i.fontNameDropDown)||t||!h(i.fontNameDropDown)&&i.fontNameDropDown.isDestroyed)break;var S=a.parent.fontFamily.items;m=u==="empty"?"":Ve(S,u,"value","text");var T=h(a.parent.fontFamily.default)?S[0].text:a.parent.fontFamily.default,L=(h(m)?T:m)==="Default"?e.serviceLocator.getService("rteLocale").getConstant("fontName"):h(m)?T:m;i.fontNameDropDown.content='<span style="display: inline-flex;width:'+a.parent.fontFamily.width+'" ><span class="e-rte-dropdown-btn-text'+(h(a.parent.cssClass)?"":" "+a.parent.cssClass)+'">'+L+"</span></span>",i.fontNameDropDown.dataBind();break}case"fontsize":{if(h(i.fontSizeDropDown)||!h(i.fontSizeDropDown)&&i.fontSizeDropDown.isDestroyed)break;var w=a.parent.fontSize.items,N=h(a.parent.fontSize.default)?w[0].text:a.parent.fontSize.default,M=Ve(w,u===""?N.replace(/\s/g,""):u,N.replace(/\s/g,"")===w[0].text&&u===""?"text":"value","text");m=u==="empty"?"":M==="Default"?e.serviceLocator.getService("rteLocale").getConstant("fontSize"):M,i.fontSizeDropDown.content='<span style="display: inline-flex;width:'+a.parent.fontSize.width+'" ><span class="e-rte-dropdown-btn-text'+(h(a.parent.cssClass)?"":" "+a.parent.cssClass)+'">'+Fo(m)+"</span></span>",i.fontSizeDropDown.dataBind();break}case"bulletFormatList":case"numberFormatList":u!==""?k([a.tbElements[c]],[ti]):O([a.tbElements[c]],[ti])}}}}}function yr(a){return typeof a=="object"?a:[a]}function Cr(a,t){for(var e=[],i=0;i<a.length;i++)for(var n=0;n<t.length;n++)if(t[n].type!=="Separator"){if((a[i]==="OrderedList"||a[i]==="NumberFormatList")&&t[n].subCommand==="OL"){e.push(n);break}else if((a[i]==="UnorderedList"||a[i]==="BulletFormatList")&&t[n].subCommand==="UL"){e.push(n);break}else if(a[i]==="InsertCode"&&t[n].subCommand==="Pre"){e.push(n);break}else if(a[i]==="Blockquote"&&t[n].subCommand==="blockquote"){e.push(n);break}else if(a[i]==="FileManager"&&t[n].subCommand==="File"){e.push(n);break}else if(typeof a[i]=="object"&&a[i].command==="Custom"){e.push(i);break}else if(a[i]===t[n].subCommand){e.push(n);break}}return e}function Bi(a,t){for(var e=0,i=Cr(yr(ud),a.toolbarObj.items),n=re("."+zt,a.toolbarObj.element),r=Object.keys(t),s=0,o=r;s<o.length;s++){var l=o[s],c=n[i[e]];c&&a.toolbarObj.enableItems(c,t[""+l]),e++}}function kn(a,t){var e=document.createEvent("HTMLEvents");e.initEvent(t,!1,!0),a.dispatchEvent(e)}function xi(a){var t=B("template");return t.innerHTML=a,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(a)}function hh(a,t){var e=[];for(t=t.firstChild;t;t=t.nextSibling)t.nodeType===3?e.push(t):e=e.concat(hh(a,t));return e}function wa(a){for(var t={},e=Object.keys(a),i=0;i<Object.keys(a).length;i++)t[e[i].toLocaleLowerCase()]=a[e[i]];return t}function Mr(a,t){var e;return a!==null&&a!==""?(e=t.enableHtmlEncode?Ml(yt(a),t):Ml(a,t),t.setProperties({value:e},!0)):t.enterKey==="DIV"?e=t.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":t.enterKey==="BR"?e=t.enableHtmlEncode?"&lt;br/&gt;":"<br/>":e=t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",e}function Ml(a,t){var e=document.createElement("div"),i=document.createElement("div"),n=e.childNodes;if(e.innerHTML=a,e.setAttribute("class","tempDiv"),n.length>0){for(var r=void 0,s=void 0,o=void 0;e.firstChild;){for(var l=e.querySelectorAll(rp),c=0;c<l.length;c++)l[c].innerHTML="<br>";for(var p=e.querySelectorAll("p"),c=0;c<p.length;c++)p[c].textContent.trim().length===0&&p[c].childNodes.length===1&&p[c].childNodes[0].nodeName==="#text"&&h(p[c].childNodes[0].textContent.match(/\u00a0/g))&&(p[c].innerHTML="<br>");for(var d=e.querySelectorAll(sp),c=0;c<d.length;c++)d[c].innerHTML="&ZeroWidthSpace;";t.enterKey!=="BR"&&(e.firstChild.nodeName==="#text"&&(e.firstChild.textContent.indexOf(`
`)<0||e.firstChild.textContent.trim()!=="")||fd.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0)?(r?s.appendChild(e.firstChild):(t.enterKey==="DIV"?o=B("div"):o=B("p"),i.appendChild(o),o.appendChild(e.firstChild)),s=o,r=!0):e.firstChild.nodeName==="#text"&&(e.firstChild.textContent===`
`||e.firstChild.textContent.indexOf(`
`)>=0&&e.firstChild.textContent.trim()==="")?E(e.firstChild):(i.appendChild(e.firstChild),r=!1)}for(var u=i.querySelectorAll("img"),c=0;c<u.length;c++)u[c].classList.contains("e-rte-image-unsupported")||(u[c].classList.contains(Io)||u[c].classList.add(Io),!(u[c].classList.contains(Jt)||u[c].classList.contains(qt))&&!(u[c].classList.contains("e-imgleft")||u[c].classList.contains("e-imgright")||u[c].classList.contains("e-imgcenter"))&&u[c].classList.add(Jt))}return i.innerHTML}function ka(a){var t;return a.enterKey==="DIV"?t=a.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":a.enterKey==="BR"?t=a.enableHtmlEncode?"&lt;br/&gt;":"<br/>":t=a.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",t}function md(a){return a==="<p><br></p>"||a==="&lt;p&gt;&lt;br&gt;&lt;/p&gt;"||a==="<div><br></div>"||a==="&lt;div&gt;&lt;br&gt;&lt;/div&gt;"||a==="<br>"||a==="&lt;br&gt;"||a===""}function yt(a){return a.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}function ch(a,t){if(t.enableHtmlSanitizer){var e=Lt.beforeSanitize();e.selectors.tags[2]&&e.selectors.tags[2].indexOf("iframe")>-1&&(e.selectors.tags[2]="iframe:not(.e-rte-embed-url)");var i={cancel:!1,helper:null};_e(e,e,i),t.trigger("beforeSanitizeHtml",e),e.cancel&&!h(e.helper)?a=e.helper(a):e.cancel||(a=Lt.serializeValue(e,a))}return a}function Sr(a){for(var t=a.split(","),e=t[0].match(/:(.*?);/)[1],i=atob(t[1]),n=i.length,r=new Uint8Array(n);n--;)r[n]=i.charCodeAt(n);return new Blob([r],{type:e})}function Qn(a,t,e){for(var i=0;t.length>i;i++)if(t[i].value===e.value||t[i].value===e.subCommand)return a.localeObj.getConstant(t[i].locale);return e.text}function ph(a){mr.forEach(function(t,e){mr[e].text=Qn(a,hd,mr[e])}),gr.forEach(function(t,e){gr[e].text=Qn(a,cd,gr[e])}),vr.forEach(function(t,e){vr[e].text=Qn(a,pd,vr[e])}),br.forEach(function(t,e){br[e].text=Qn(a,dd,br[e])})}var dh=function(){function a(t){this.parent=t}return a.prototype.renderPanel=function(){var t=this.parent,e=this.parent.createElement("div",{className:"e-rte-content",id:this.parent.getID()+"rte-view"}),i=Mr(t.value,t);this.editableElement=this.parent.createElement("div",{className:"e-content",id:this.parent.getID()+"_rte-edit-view",attrs:{contenteditable:"true"},innerHTML:i}),e.appendChild(this.editableElement),this.setPanel(e),t.rootContainer.appendChild(e)},a.prototype.getPanel=function(){return this.contentPanel},a.prototype.getEditPanel=function(){return this.editableElement},a.prototype.getText=function(){var t=this.getEditPanel().innerText;return t===`
`?"":t},a.prototype.setPanel=function(t){this.contentPanel=t},a.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},a}(),gd=function(){function a(t,e){this.parent=t,this.locator=e,this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return a.prototype.render=function(){this.parent,this.contentRenderer=this.renderer.getRenderer(X.Content),this.contentRenderer.renderPanel()},a.prototype.refresh=function(t){t===void 0&&(t={requestType:"refresh"}),this.parent.notify(t.requestType+"-begin",t)},a.prototype.destroy=function(){h(this.parent)||(this.removeEventListener(),this.locator.destroy(),this.renderer.destroy())},a.prototype.moduleDestroy=function(){this.parent=null},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Me,this.refresh,this),this.parent.on(Ke,this.keyUp,this),this.parent.on(st,this.moduleDestroy,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Me,this.refresh),this.parent.off(Ke,this.keyUp),this.parent.off(st,this.moduleDestroy))},a.prototype.keyUp=function(t){if(this.parent.editorMode==="HTML")switch(t.args.which){case 46:case 8:var e=this.parent.contentModule.getEditPanel().childNodes;if(e.length===0||e.length===1&&e[0].childNodes.length===0&&(e[0].tagName==="BR"||(e[0].tagName==="P"||e[0].tagName==="DIV")&&e[0].textContent==="")){var i=this.parent.contentModule.getEditPanel();this.parent.enterKey==="DIV"?i.innerHTML="<div><br/></div>":this.parent.enterKey==="BR"?i.innerHTML="<br/>":i.innerHTML="<p><br/></p>",this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),i.childNodes[0],0)}break}},a}(),Ge=function(){function a(){}return a.prototype.getFormattedNode=function(t,e,i){var n=this.getFormatParent(t,e,i);return n!==null&&n!==i?n:null},a.prototype.getFormatParent=function(t,e,i){do t=t.parentNode;while(t&&t!==i&&!this.isFormattedNode(t,e));return t},a.prototype.isFormattedNode=function(t,e){switch(e){case"bold":return a.isBold(t);case"italic":return a.isItalic(t);case"underline":return a.isUnderline(t);case"strikethrough":return a.isStrikethrough(t);case"superscript":return a.isSuperscript(t);case"subscript":return a.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},a.isBold=function(t){var e=["strong","b"];return e.indexOf(t.nodeName.toLowerCase())!==-1?!0:!!(this.inlineTags.indexOf(t.nodeName.toLowerCase())!==-1&&t.style&&t.style.fontWeight==="bold")},a.isItalic=function(t){var e=["em","i"];return e.indexOf(t.nodeName.toLowerCase())!==-1?!0:!!(this.inlineTags.indexOf(t.nodeName.toLowerCase())!==-1&&t.style&&t.style.fontStyle==="italic")},a.isUnderline=function(t){var e=["u"];return e.indexOf(t.nodeName.toLowerCase())!==-1?!0:!!(this.inlineTags.indexOf(t.nodeName.toLowerCase())!==-1&&t.style&&(t.style.textDecoration==="underline"||t.style.textDecorationLine==="underline"))},a.isStrikethrough=function(t){var e=["del","strike","s"];return e.indexOf(t.nodeName.toLowerCase())!==-1?!0:!!(this.inlineTags.indexOf(t.nodeName.toLowerCase())!==-1&&t.style&&(t.style.textDecoration==="line-through"||t.style.textDecorationLine==="line-through"))},a.isSuperscript=function(t){var e=["sup"];return e.indexOf(t.nodeName.toLowerCase())!==-1},a.isSubscript=function(t){var e=["sub"];return e.indexOf(t.nodeName.toLowerCase())!==-1},a.prototype.isFontColor=function(t){var e=t.style&&t.style.color;return a.inlineTags.indexOf(t.nodeName.toLowerCase())!==-1&&e!==null&&e!==""&&e!==void 0},a.prototype.isBackgroundColor=function(t){var e=t.style&&t.style.backgroundColor;return a.inlineTags.indexOf(t.nodeName.toLowerCase())!==-1&&e!==null&&e!==""&&e!==void 0},a.prototype.isFontSize=function(t){var e=t.style&&t.style.fontSize;return a.inlineTags.indexOf(t.nodeName.toLowerCase())!==-1&&e!==null&&e!==""&&e!==void 0},a.prototype.isFontName=function(t){var e=t.style&&t.style.fontFamily;return a.inlineTags.indexOf(t.nodeName.toLowerCase())!==-1&&e!==null&&e!==""&&e!==void 0},a.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","font","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var","del"],a}(),Br="INSERT-IMAGE",jo="INSERT-AUDIO",zo="INSERT-VIDEO",Uo="INSERT-TABLE",Vo="INSERT-LINK",_o="INSERT-ROW",Wo="INSERT-COLUMN",Qo="DELETE-ROW",Ko="DELETE-COLUMN",Go="REMOVE-TABLE",Xo="TABLE-HEADER",Yo="TABLE_VERTICAL_ALIGN",$o="TABLE_MERGE",Jo="TABLE_VERTICAL_SPLIT",Zo="TABLE_HORIZONTAL_SPLIT",Bl="TABLE_MOVE",ea="alignment-type",ta="indent-type",St="p",li=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video","body"],Ct=["td","th"],$i=["table","tbody","td","tfoot","th","thead","tr"],ia="selection-type",na="inserthtml-type",ra="insert-text-type",sa="clear-type",vd=["area","base","br","embed","hr","img","input","param","source","track","wbr","iframe","td","table"],Os=["word","excel","onenote"],qe=function(){function a(){this.startNodeName=[],this.endNodeName=[]}return a.prototype.saveInstance=function(t,e){return this.range=t.cloneRange(),this.rootNode=this.documentFromRange(t),this.body=e,this.startContainer=this.getNodeArray(t.startContainer,!0),this.endContainer=this.getNodeArray(t.endContainer,!1),this.startOffset=t.startOffset,this.endOffset=t.endOffset,this.html=this.body.innerHTML,this},a.prototype.documentFromRange=function(t){return t.startContainer.nodeType===9?t.startContainer:t.startContainer.ownerDocument},a.prototype.getRange=function(t){var e=this.get(t),i=e&&e.rangeCount>0?e.getRangeAt(e.rangeCount-1):t.createRange();return i.startContainer!==t||i.endContainer!==t||i.startOffset||i.endOffset||(i.setStart(t.body,0),i.collapse(!0)),i},a.prototype.get=function(t){return t.defaultView.getSelection()},a.prototype.save=function(t,e){return t=t?t.cloneRange():this.getRange(e),this.saveInstance(t,e.body)},a.prototype.getIndex=function(t){var e,i=0;if(t=!t.previousSibling&&t.tagName==="BR"?t:t.previousSibling,t)for(var n=t.nodeType;t;null)e=t.nodeType,i++,n=e,t=t.previousSibling;return i},a.prototype.isChildNode=function(t,e){for(var i=0;i<e.childNodes.length;i++)if(t.indexOf(e.childNodes[i])>-1)return!0;return!1},a.prototype.getNode=function(t,e,i){return e===t&&(t.nodeType===3||!t.firstChild||i.indexOf(t.firstChild)!==-1||this.isChildNode(i,t))||t.nodeType===3&&t.previousSibling===e&&e.nodeName==="IMG"?null:i.indexOf(t.firstChild)===-1&&t.firstChild&&!this.isChildNode(i,t)?t.firstChild:t.nextSibling?t.nextSibling:t.parentNode?t.parentNode:null},a.prototype.getNodeCollection=function(t){var e=t.startContainer.childNodes[t.startOffset]||t.startContainer,i=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if((e===i||e.nodeName==="BR"&&e===t.endContainer.childNodes[t.endOffset])&&e.childNodes.length===0)return[e];if(t.startOffset===t.endOffset&&t.startOffset!==0&&t.startContainer.nodeName==="PRE")return[e.nodeName==="BR"||e.nodeName==="#text"?e:e.childNodes[0]];var n=[];do n.indexOf(e)===-1&&n.push(e),e=this.getNode(e,i,n);while(e);return n},a.prototype.getParentNodeCollection=function(t){return this.getParentNodes(this.getNodeCollection(t),t)},a.prototype.getParentNodes=function(t,e){t=t.reverse();for(var i=0;i<t.length;i++)t.indexOf(t[i].parentNode)!==-1||t[i].nodeType===3&&e.startContainer!==e.endContainer&&e.startContainer.parentNode!==e.endContainer.parentNode?(t.splice(i,1),i--):t[i].nodeType===3&&(t[i]=t[i].parentNode);return t},a.prototype.getSelectionNodeCollection=function(t){return this.getSelectionNodes(this.getNodeCollection(t))},a.prototype.getSelectionNodeCollectionBr=function(t){return this.getSelectionNodesBr(this.getNodeCollection(t))},a.prototype.getSelectionNodes=function(t){t=t.reverse();for(var e=new RegExp("​","g"),i=0;i<t.length;i++)(t[i].nodeType!==3||t[i].textContent.trim()===""||t[i].textContent.length===1&&t[i].textContent.match(e))&&(t.splice(i,1),i--);return t.reverse()},a.prototype.getSelectionNodesBr=function(t){t=t.reverse();for(var e=new RegExp("​","g"),i=0;i<t.length;i++)t[i].nodeName!=="BR"&&(t[i].nodeType!==3||t[i].textContent.trim()===""||t[i].textContent.length===1&&t[i].textContent.match(e))&&(t.splice(i,1),i--);return t.reverse()},a.prototype.getInsertNodeCollection=function(t){return this.getInsertNodes(this.getNodeCollection(t))},a.prototype.getInsertNodes=function(t){t=t.reverse();for(var e=0;e<t.length;e++)(t[e].childNodes.length!==0&&t[e].nodeType!==3||t[e].nodeType===3&&t[e].textContent==="")&&(t.splice(e,1),e--);return t.reverse()},a.prototype.getNodeArray=function(t,e,i){var n=[];for(e?this.startNodeName=[]:this.endNodeName=[];t!==(i||this.rootNode)&&!h(t);null)e?this.startNodeName.push(t.nodeName.toLowerCase()):this.endNodeName.push(t.nodeName.toLowerCase()),n.push(this.getIndex(t)),t=t.parentNode;return n},a.prototype.setRangePoint=function(t,e,i,n){for(var r=this.rootNode,s=i.length,o=n;s--;null)r=r&&r.childNodes[i[s]];return r&&o>=0&&r.nodeName!=="html"&&(r.nodeType===3&&r.nodeValue.replace(/\u00a0/g,"&nbsp;")==="&nbsp;"&&(o=r.textContent.length),t[e?"setStart":"setEnd"](r,o)),t},a.prototype.restore=function(){var t=this.range.cloneRange();return t=this.setRangePoint(t,!0,this.startContainer,this.startOffset),t=this.setRangePoint(t,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,t),t},a.prototype.selectRange=function(t,e){this.setRange(t,e),this.save(e,t)},a.prototype.setRange=function(t,e){var i=this.get(t);i.removeAllRanges(),i.addRange(e)},a.prototype.setSelectionText=function(t,e,i,n,r){var s=t.createRange();s.setStart(e,n),s.setEnd(i,r),this.setRange(t,s)},a.prototype.setSelectionContents=function(t,e){var i=t.createRange();i.selectNode(e),this.setRange(t,i)},a.prototype.setSelectionNode=function(t,e){var i=t.createRange();i.selectNodeContents(e),this.setRange(t,i)},a.prototype.getSelectedNodes=function(t){return this.getNodeCollection(this.getRange(t))},a.prototype.Clear=function(t){this.get(t).removeAllRanges()},a.prototype.insertParentNode=function(t,e,i){i.surroundContents(e),this.selectRange(t,i)},a.prototype.setCursorPoint=function(t,e,i){var n=t.createRange(),r=t.defaultView.getSelection();n.setStart(e,i),n.collapse(!0),r.removeAllRanges(),r.addRange(n)},a}(),bd=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function Qe(){var a=!1;return x.isDevice&&x.isIos&&(a=!0),a}function Ut(a,t){if(a.nodeName==="BODY"&&!h(t)){var e=top.window.document.querySelector(t);h(e)||e.contentWindow.focus()}}function yd(a,t){var e=document.createElement("div");e.innerHTML=a,e.setAttribute("class","tempDiv");var i=document.createElement("div"),n=e.childNodes;if(n.length>0){for(var r=void 0,s=void 0,o=void 0;e.firstChild;)e.firstChild.nodeName==="#text"&&(e.firstChild.textContent.indexOf(`
`)<0||e.firstChild.textContent.trim()!=="")||bd.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0?r?(s.appendChild(e.firstChild),s=o,r=!0):t==="BR"?(i.appendChild(e.firstChild),s=i):(o=B("p"),i.appendChild(o),o.appendChild(e.firstChild),s=o,r=!0):e.firstChild.nodeName==="#text"&&(e.firstChild.textContent===`
`||e.firstChild.textContent.indexOf(`
`)>=0&&e.firstChild.textContent.trim()==="")?E(e.firstChild):(i.appendChild(e.firstChild),r=!1);for(var l=i.querySelectorAll("table"),c=0;c<l.length;c++)if(l[c].classList.length>0&&!l[c].classList.contains("e-rte-table")){if(l[c].classList.add("e-rte-paste-table"),l[c].classList.contains("e-rte-paste-word-table")){l[c].classList.remove("e-rte-paste-word-table");continue}else if(l[c].classList.contains("e-rte-paste-excel-table")){l[c].classList.remove("e-rte-paste-excel-table"),l[c].getAttribute("border")==="0"&&l[c].removeAttribute("border");for(var p=l[c].querySelectorAll("td"),d=0;d<p.length;d++)p[d].style.borderLeft==="none"&&p[d].style.removeProperty("border-left"),p[d].style.borderRight==="none"&&p[d].style.removeProperty("border-right"),p[d].style.borderBottom==="none"&&p[d].style.removeProperty("border-bottom"),p[d].style.borderTop==="none"&&p[d].style.removeProperty("border-top"),p[d].style.border==="none"&&p[d].style.removeProperty("border")}else if(l[c].classList.contains("e-rte-paste-onenote-table")){l[c].classList.remove("e-rte-paste-onenote-table");continue}else if(l[c].classList.contains("e-rte-paste-html-table")){l[c].classList.remove("e-rte-paste-html-table");continue}}for(var u=i.querySelectorAll("img"),c=0;c<u.length;c++)u[c].classList.contains("e-rte-image-unsupported")||(u[c].classList.contains("e-rte-image")||u[c].classList.add("e-rte-image"),u[c].classList.contains("e-imginline")||u[c].classList.contains("e-imgbreak")||u[c].classList.add("e-imginline"))}return i.innerHTML}function Cd(a){var t=a;do t.childNodes.length>0&&(t=t.childNodes[0]);while(t.childNodes.length>0);return t}function uh(){return{bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,numberFormatList:!1,bulletFormatList:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1,blockquote:!1}}function Sd(a){if(a.startContainer.parentElement.closest("ol,ul")!==null&&a.endContainer.parentElement.closest("ol,ul")!==null){for(a.extractContents();(a.startContainer.nodeName==="#text"?a.startContainer.parentElement:a.startContainer).querySelectorAll("li :empty").length>0||(a.startContainer.nodeName==="#text"?a.startContainer.parentElement:a.startContainer).querySelectorAll("ol :empty").length>0;){var t=(a.startContainer.nodeName==="#text"?a.startContainer.parentElement:a.startContainer).querySelectorAll("li :empty");if(t.length>0)t.forEach(function(i){i.remove()});else break}var e=(a.startContainer.nodeName==="#text"?a.startContainer.parentElement:a.startContainer).querySelectorAll("li");e.length>0&&e.forEach(function(i){!h(i.firstChild)&&(i.firstChild.nodeName==="OL"||i.firstChild.nodeName==="UL")&&(i.style.listStyleType="none")})}}function Rr(a,t){var e=t.nodeName==="BODY"?t.ownerDocument.defaultView.frameElement.closest(".e-richtexteditor"):t.closest(".e-richtexteditor"),i=e.style.height;if(a.getSelection().rangeCount!==0){var n=a.getSelection().getRangeAt(0),r=n.startContainer.nodeName==="#text"?n.startContainer.parentElement:n.startContainer,s=r.getBoundingClientRect(),o=s.top,l=s.bottom,c=e.getBoundingClientRect(),p=e.querySelectorAll(".e-count-enabled, .e-resize-enabled").length>0;t.nodeName==="BODY"?i==="auto"?window.innerHeight<o&&r.scrollIntoView(!1):o>t.getBoundingClientRect().height&&r.scrollIntoView({block:"nearest",inline:"nearest"}):i==="auto"?window.innerHeight<o&&r.scrollIntoView({block:"end",inline:"nearest"}):l>c.bottom&&(e.querySelector(".e-rte-content").scrollTop+=l-c.bottom+(p?20:0));var d=t.closest('div[style*="overflow-y: scroll"]');if(!h(d)){var u=d.getBoundingClientRect();l>u.bottom&&(d.scrollTop+=l-u.bottom)}}}function Rl(a,t,e){for(var i=0;i<t.length;i++)i===0?a.splice(e+i,1,t[i]):a.splice(e+i,0,t[i]);return a}function de(a,t){O(a,t);for(var e=0;e<a.length;e++)a[e].classList.length===0&&a[e].getAttribute("class")&&a[e].removeAttribute("class");return a}var Ms=uh(),fh=function(){function a(){}return a.get=function(t,e,i,n,r,s){for(var o=JSON.parse(JSON.stringify(Ms)),l=JSON.parse(JSON.stringify(Ms)),c=new qe,p=c.getRange(t),d=s?[s]:p.collapsed?c.getNodeCollection(p):c.getSelectionNodeCollectionBr(p),u=d.length,m=!1,f=0;f<d.length;f++){for(;d[f].nodeType===3&&p.startContainer.nodeType===3&&d[f].parentNode&&d[f].parentNode.lastElementChild&&d[f].parentNode.lastElementChild.nodeName!=="BR"&&this.getImmediateBlockNode(d[f].parentNode).textContent.replace(/\u200B/g,"").length===0&&p.startContainer.textContent.replace(/\u200B/g,"").length===0&&c.get(t).toString().replace(/\u200B/g,"").length===0;)d[f]=d[f].parentNode.lastElementChild.firstChild,m=!0;m&&d[f]&&(c.setCursorPoint(t,d[f],d[f].textContent.length),m=!1),(d[f].nodeName!=="BR"&&d[f].nodeType!==3||u>1&&d[f].nodeType===3&&d[f].textContent.trim()==="")&&(d.splice(f,1),f--)}for(var f=0;f<d.length;f++)o=this.getFormatParent(t,o,d[f],e,i,n,r),(f===0&&o.bold||!o.bold)&&(l.bold=o.bold),(f===0&&o.insertcode||!o.insertcode)&&(l.insertcode=o.insertcode),(f===0&&o.blockquote||!o.blockquote)&&(l.blockquote=o.blockquote),(f===0&&o.italic||!o.italic)&&(l.italic=o.italic),(f===0&&o.underline||!o.underline)&&(l.underline=o.underline),(f===0&&o.strikethrough||!o.strikethrough)&&(l.strikethrough=o.strikethrough),(f===0&&o.superscript||!o.superscript)&&(l.superscript=o.superscript),(f===0&&o.subscript||!o.subscript)&&(l.subscript=o.subscript),(f===0&&o.fontcolor||!o.fontcolor)&&(l.fontcolor=o.fontcolor),f===0&&o.fontname?l.fontname=o.fontname:l.fontname=o.fontname===l.fontname?o.fontname:"empty",f===0&&o.fontsize?l.fontsize=o.fontsize:l.fontsize=o.fontsize===l.fontsize?o.fontsize:"empty",(f===0&&o.backgroundcolor||!o.backgroundcolor)&&(l.backgroundcolor=o.backgroundcolor),(f===0&&o.orderedlist||!o.orderedlist)&&(l.orderedlist=o.orderedlist),(f===0&&o.unorderedlist||!o.unorderedlist)&&(l.unorderedlist=o.unorderedlist),(f===0&&o.alignments||!o.alignments)&&(l.alignments=o.alignments),f===0&&o.formats?l.formats=o.formats:l.formats=o.formats===l.formats?o.formats:"empty",(f===0&&o.createlink||!o.createlink)&&(l.createlink=o.createlink),(f===0&&o.numberFormatList||!o.numberFormatList)&&(l.numberFormatList=o.numberFormatList),(f===0&&o.bulletFormatList||!o.bulletFormatList)&&(l.bulletFormatList=o.bulletFormatList),o=JSON.parse(JSON.stringify(Ms));return l},a.getImmediateBlockNode=function(t){do t=t.parentNode;while(t&&li.indexOf(t.nodeName.toLocaleLowerCase())<0);return t},a.getFormatParent=function(t,e,i,n,r,s,o){var l=!1,c=!1;if(n.contains(i)||i.nodeType===3&&n.nodeType!==3&&n.contains(i.parentNode))do e=this.isFormattedNode(t,e,i,l,c,r,s,o),(e.orderedlist||e.unorderedlist)&&(l=!0),(e.bulletFormatList||e.numberFormatList)&&(c=!0),i=i.parentNode;while(i&&i!==n);return e},a.isFormattedNode=function(t,e,i,n,r,s,o,l){if(e.bold||(e.bold=Ge.isBold(i)),e.italic||(e.italic=Ge.isItalic(i)),e.underline||(e.underline=Ge.isUnderline(i)),e.strikethrough||(e.strikethrough=Ge.isStrikethrough(i)),e.superscript||(e.superscript=Ge.isSuperscript(i)),e.subscript||(e.subscript=Ge.isSubscript(i)),e.fontcolor||(e.fontcolor=this.isFontColor(t,i)),e.fontname||(e.fontname=this.isFontName(t,i,l)),e.fontsize||(e.fontsize=this.isFontSize(t,i,o)),e.backgroundcolor||(e.backgroundcolor=this.isBackgroundColor(i)),!e.orderedlist&&!n&&(e.orderedlist=this.isOrderedList(i)),!e.unorderedlist&&!n&&(e.unorderedlist=this.isUnorderedList(i)),e.alignments||(e.alignments=this.isAlignment(i)),e.formats||(e.formats=this.isFormats(i,s),e.formats==="pre"&&(e.insertcode=!0)),!e.blockquote){var c=void 0;if(!h(s))if(s.indexOf("blockquote")>-1)e.formats=this.isFormats(i,s),c=e.formats;else{s.push("blockquote"),c=this.isFormats(i,s);for(var p=s.length-1;p>=0;p--)s[p]==="blockquote"&&s.splice(p,1)}c==="blockquote"&&(e.blockquote=!0)}return e.createlink||(e.createlink=this.isLink(i)),!e.numberFormatList&&!r&&(e.numberFormatList=this.isNumberFormatList(i)),!e.bulletFormatList&&!r&&(e.bulletFormatList=this.isBulletFormatList(i)),e},a.isFontColor=function(t,e){var i=e.style&&e.style.color;return(i==null||i==="")&&e.nodeType!==3&&(i=this.getComputedStyle(t,e,"color")),i!==null&&i!==""&&i!==void 0?i:null},a.isLink=function(t){return t.nodeName.toLocaleLowerCase()==="a"},a.isBackgroundColor=function(t){var e=t.style&&t.style.backgroundColor;return e!==null&&e!==""&&e!==void 0?e:null},a.isFontSize=function(t,e,i){var n=e.style&&e.style.fontSize;return(n==null||n==="")&&e.nodeType!==3&&e.parentElement.classList.contains("e-content")&&(n=this.getComputedStyle(t,e,"font-size")),n!==null&&n!==""&&n!==void 0&&(i==null||i.indexOf(n)>-1)?n:null},a.isFontName=function(t,e,i){var n=e.style&&e.style.fontFamily;(n==null||n==="")&&e.nodeType!==3&&(n=this.getComputedStyle(t,e,"font-family"));var r=null;return n!==null&&n!==""&&n!==void 0&&(i==null||i.filter(function(s,o){var l=RegExp,c=new l(n,"i");(s.replace(/"/g,"").replace(/ /g,"").toLowerCase()===n.replace(/"/g,"").replace(/ /g,"").toLowerCase()||s.split(",")[0]&&!h(s.split(",")[0].trim().match(c))&&s.split(",")[0].trim()===s.split(",")[0].trim().match(c)[0])&&(r=o)})&&r!==null)?r!==null?i[r]:n.replace(/"/g,""):null},a.isOrderedList=function(t){return t.nodeName.toLocaleLowerCase()==="ol"},a.isUnorderedList=function(t){return t.nodeName.toLocaleLowerCase()==="ul"},a.isAlignment=function(t){var e=t.style&&t.style.textAlign;return e==="left"?"justifyleft":e==="center"?"justifycenter":e==="right"?"justifyright":e==="justify"?"justifyfull":null},a.isFormats=function(t,e){return e==null&&li.indexOf(t.nodeName.toLocaleLowerCase())>-1||e!=null&&e.indexOf(t.nodeName.toLocaleLowerCase())>-1?t.nodeName.toLocaleLowerCase():null},a.getComputedStyle=function(t,e,i){return t.defaultView.getComputedStyle(e,null).getPropertyValue(i)},a.isNumberFormatList=function(t){var e=t.style&&t.style.listStyleType;return e==="lower-alpha"?"Lower Alpha":e==="number"?"Number":e==="upper-alpha"?"Upper Alpha":e==="lower-roman"?"Lower Roman":e==="upper-roman"?"Upper Roman":e==="lower-greek"?"Lower Greek":e==="none"?"None":this.isOrderedList(t)?!0:null},a.isBulletFormatList=function(t){var e=t.style&&t.style.listStyleType;return e==="circle"?"Circle":e==="square"?"Square":e==="none"?"None":e==="disc"?"Disc":this.isUnorderedList(t)?!0:null},a}(),Al=function(){function a(t,e){this.parent=t,this.isDestroyed=!1,e&&(this.l10n=e.getService("rteLocale")),this.wireEvent()}return a.prototype.wireEvent=function(){this.parent.on(Y,this.destroy,this),this.parent.on(yn,this.destroyTooltip,this),this.parent.on(Nr,this.closeTooltip,this)},a.prototype.destroyTooltip=function(){var t=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().ownerDocument:this.parent.contentModule.getDocument();if(!h(t.querySelector(".e-tooltip-wrap"))&&!h(t.querySelector("[data-tooltip-id]"))){var e=t.querySelector("[data-tooltip-id]"),i=new MouseEvent("mouseleave",{bubbles:!0,cancelable:!0});e.dispatchEvent(i)}},a.prototype.unWireEvent=function(){this.parent.off(Y,this.destroy),this.parent.off(yn,this.destroyTooltip),this.parent.off(Nr,this.closeTooltip)},a.prototype.toolbarBeforeCreate=function(t){this.mode==="Extended"&&(t.enableCollision=!1)},a.prototype.toolbarCreated=function(){this.parent.notify(Fc,this)},a.prototype.toolbarClicked=function(t){this.parent.enabled&&(this.parent.trigger("toolbarClick",t),(!this.parent.readonly||h(t.item))&&this.parent.notify(Ws,t))},a.prototype.dropDownSelected=function(t){this.parent.notify(si,{element:t.element,item:t.item,originalEvent:t.event}),this.destroyTooltip()},a.prototype.beforeDropDownItemRender=function(t){this.parent.readonly||!this.parent.enabled||this.parent.notify($s,t)},a.prototype.tooltipBeforeRender=function(t){if(!h(t.target.getAttribute("title"))){var e=t.target.getAttribute("title"),i=void 0;switch(e){case"Minimize":i=this.l10n.getConstant("minimize"),t.target.setAttribute("title",i+" (Esc)");break;case"Maximize":i=this.l10n.getConstant("maximize"),t.target.setAttribute("title",i+" (Ctrl+Shift+F)");break}}t.target.querySelector(".e-active")&&(t.cancel=!0,h(t.target.getAttribute("title"))||this.closeTooltip({target:t.target,isTitle:!0}))},a.prototype.dropDownOpen=function(t){if(t.element.parentElement.getAttribute("id").indexOf("TableCell")>-1&&!h(t.element.parentElement.querySelector(".e-cell-merge"))&&(!h(t.element.parentElement.querySelector(".e-cell-horizontal-split"))||!h(t.element.parentElement.querySelector(".e-cell-vertical-split")))){var e=t.element.querySelectorAll("li"),i=this.parent.inputElement.querySelectorAll(".e-cell-select");i.length===1?(k([e[0]],"e-disabled"),O([e[1],e[2]],"e-disabled")):i.length>1&&(Array.from(i).every(function(n){return n.tagName.toLowerCase()===i[0].tagName.toLowerCase()})?O([e[0]],"e-disabled"):k([e[0]],"e-disabled"),k([e[1],e[2]],"e-disabled"))}this.parent.notify(Tt,t)},a.prototype.dropDownClose=function(t){this.parent.notify(Et,t)},a.prototype.renderToolbar=function(t){this.setPanel(t.target),this.renderPanel(),this.mode=t.overflowMode,t.rteToolbarObj.toolbarObj=new eh({items:t.items,width:"100%",overflowMode:t.overflowMode,beforeCreate:this.toolbarBeforeCreate.bind(this),created:this.toolbarCreated.bind(this),clicked:this.toolbarClicked.bind(this),enablePersistence:t.enablePersistence,enableRtl:t.enableRtl,cssClass:t.cssClass}),t.rteToolbarObj.toolbarObj.isStringTemplate=!0,t.rteToolbarObj.toolbarObj.createElement=this.parent.createElement,t.rteToolbarObj.toolbarObj.appendTo(t.target),this.parent.showTooltip&&t.type==="toolbar"&&(this.tooltip=new ln({target:"#"+this.parent.getID()+"_toolbar_wrapper [title]",showTipPointer:!0,openDelay:400,opensOn:"Hover",beforeRender:this.tooltipBeforeRender.bind(this),beforeOpen:this.tooltipBeforeOpen.bind(this),cssClass:this.parent.getCssClass(),windowCollision:!0,position:"BottomCenter"}),this.tooltip.appendTo(t.target.parentElement))},a.prototype.tooltipBeforeOpen=function(t){t.element&&t.element.setAttribute("data-rte-id",this.parent.getID())},a.prototype.renderDropDownButton=function(t){var e=this,i;t.element.classList.add(He),i=t.cssClass+" "+Oe+" "+Ds,this.parent.inlineMode.enable&&x.isDevice&&(i=i+" "+Cs);var n=this,r=new Ji({items:t.items,iconCss:t.iconCss,cssClass:i,content:t.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:function(o){if(n.parent.readonly||!n.parent.enabled){o.cancel=!0;return}if(n.parent.editorMode!=="Markdown"){var l=n.parent.getRange().startContainer.parentElement,c=l.closest("table"),p=l.closest("tr");if(!h(c)&&c.classList.contains("e-dashed-border"))for(var d=0;d<o.element.childNodes.length;d++)o.element.childNodes[d].classList.contains("e-dashed-borders")&&k([o.element.childNodes[d]],"e-active");else if(!h(c)&&!c.classList.contains("e-dashed-border")&&c.classList.contains("e-alternate-rows")&&window.getComputedStyle(p).backgroundColor!=="")for(var d=0;d<o.element.childNodes.length;d++)o.element.childNodes[d].classList.contains("e-alternate-rows")&&k([o.element.childNodes[d]],"e-active");for(var u=n.parent.getRange().startContainer;u!==n.parent.inputElement&&!h(u.parentElement);){u.nodeName==="#text"&&(u=u.parentElement);var m=window.getComputedStyle(u).textAlign;if(o.items[0].command==="Alignments"){if(o.items[0].text==="Align Left"&&m==="left"||m==="start"){k([o.element.childNodes[0]],"e-active");break}else if(o.items[1].text==="Align Center"&&m==="center"){k([o.element.childNodes[1]],"e-active");break}else if(o.items[2].text==="Align Right"&&m==="right"){k([o.element.childNodes[2]],"e-active");break}else if(o.items[3].text==="Align Justify"&&m==="justify"){k([o.element.childNodes[3]],"e-active");break}}u=u.parentElement}var f=l.closest("img"),g=f||l.querySelector("img");if(o.items[0].command==="Images"&&!h(g)){var d=void 0;g.classList.contains("e-imgleft")||g.classList.contains("e-imginline")?d=0:g.classList.contains("e-imgcenter")||g.classList.contains("e-imgbreak")?d=1:g.classList.contains("e-imgright")&&(d=2),h(o.element.childNodes[d])||k([o.element.childNodes[d]],"e-active")}if(o.items[0].command==="Formats"||o.items[0].command==="Font"){var y=[],S=[],T=!1;e.parent.format.types.forEach(function(N){S.push(N.value.toLocaleLowerCase())}),e.parent.fontFamily.items.forEach(function(N){y.push(N.value)});for(var L=fh.get(e.parent.contentModule.getDocument(),e.parent.contentModule.getEditPanel(),S,null,y),d=0;d<o.element.childNodes.length;d++){var w=e.parent.createElement("div");w.innerHTML=r.content.trim(),!T&&(w.textContent.trim()!==""&&o.element.childNodes[d].textContent.trim()===w.textContent.trim()||o.items[0].command==="Formats"&&!h(L.formats)&&e.parent.format.types[d].value.toLowerCase()===L.formats.toLowerCase()&&o.element.childNodes[d].classList.contains(e.parent.format.types[d].cssClass)||o.items[0].subCommand==="FontName"&&o.items[0].command==="Font"&&!h(L.fontname)&&!h(e.parent.fontFamily.items[d])&&e.parent.fontFamily.items[d].value.toLowerCase()===L.fontname.toLowerCase()&&o.element.childNodes[d].classList.contains(e.parent.fontFamily.items[d].cssClass)||o.items[0].subCommand==="FontName"&&e.parent.fontFamily.items[d].value===""&&h(L.fontname)&&o.element.childNodes[d].classList.contains(e.parent.fontFamily.items[d].cssClass)||o.items[0].subCommand==="FontSize"&&o.element.childNodes[d].textContent==="Default"&&w.textContent==="Font Size"&&e.parent.fontSize.items[d].value===""&&!h(L.fontsize))?o.element.childNodes[d].classList.contains("e-active")||(k([o.element.childNodes[d]],"e-active"),T=!0):O([o.element.childNodes[d]],"e-active")}}}n.parent.notify(wr,o)},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});r.isStringTemplate=!0,r.createElement=n.parent.createElement,r.appendTo(t.element),t.element.tabIndex=-1;var s=document.getElementById(r.element.id+"-popup");return s.setAttribute("aria-owns",this.parent.getID()),r},a.prototype.mouseOutHandler=function(){if(!h(this.tooltipTargetEle))this.tooltipTargetEle.setAttribute("title",this.tooltipTargetEle.getAttribute("data-title"));else{var t=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().ownerDocument:this.parent.contentModule.getDocument();this.tooltipTargetEle=t.querySelector("[data-title]"),this.tooltipTargetEle.setAttribute("title",this.tooltipTargetEle.getAttribute("data-title"))}this.tooltipTargetEle.removeAttribute("data-title"),C.remove(this.tooltipTargetEle,"mouseout",this.mouseOutHandler)},a.prototype.closeTooltip=function(t){if(t.isTitle)this.tooltipTargetEle=t.target,this.tooltipTargetEle.setAttribute("data-title",this.tooltipTargetEle.getAttribute("title")),this.tooltipTargetEle.removeAttribute("title"),C.add(this.tooltipTargetEle,"mouseout",this.mouseOutHandler,this);else{var e=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().ownerDocument:this.parent.contentModule.getDocument();this.tooltipTargetEle=b(t.target,"[data-tooltip-id]"),!h(this.tooltipTargetEle)&&this.parent.showTooltip&&!h(e.querySelector(".e-tooltip-wrap"))&&(this.destroyTooltip(),this.tooltipTargetEle.setAttribute("data-title",this.tooltipTargetEle.getAttribute("title")),this.tooltipTargetEle.removeAttribute("title"),C.add(this.tooltipTargetEle,"mouseout",this.mouseOutHandler,this))}},a.prototype.renderListDropDown=function(t){var e=this,i=this,n=Oe+" "+Ds+(this.parent.inlineMode?" "+Cs:"");n+=" "+(t.itemName==="NumberFormatList"?vp:bp);var r=i.parent.createElement("span",{className:xs}),s=i.parent.createElement("span",{className:t.cssClass});r.appendChild(s);var o=new Ji({items:t.items,cssClass:n,content:t.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:function(c){if(i.parent.editorMode!=="Markdown"){var p=i.parent.getRange().startContainer.parentElement,d=p.closest("LI"),u=h(d)?null:d.parentElement;if(!h(u)&&(u.nodeName==="OL"||u.nodeName==="UL"))if(u.nodeName==="UL"&&c.items[0].subCommand==="NumberFormatList")k([c.element.childNodes[0]],"e-active");else if(u.nodeName==="OL"&&c.items[0].subCommand==="BulletFormatList")k([c.element.childNodes[0]],"e-active");else{var m=u.style.listStyleType.split("-").join("").toLocaleLowerCase();m=m==="decimal"?"number":m;for(var f=0;f<c.element.childNodes.length;f++)if(m===c.element.childNodes[f].innerHTML.split(" ").join("").toLocaleLowerCase()){k([c.element.childNodes[f]],"e-active");break}else if(m===""&&c.element.childNodes[f].innerHTML!=="None"){k([c.element.childNodes[f]],"e-active");break}}else k([c.element.childNodes[0]],"e-active")}if(e.closeTooltip({target:c.event.target}),i.parent.readonly||!i.parent.enabled){c.cancel=!0;return}i.parent.notify(Et,{});var g=c.event?c.event.target:null;if(i.currentElement=o.element,i.currentDropdown=o,c.event&&c.event.type==="click"&&(g.classList.contains(xs)||g.parentElement.classList.contains(xs))){c.cancel=!0;return}i.parent.notify(wr,c)},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});o.isStringTemplate=!0,o.createElement=i.parent.createElement,o.appendTo(t.element),t.element.tabIndex=-1,t.element.setAttribute("role","button");var l=document.getElementById(o.element.id+"-popup");return l.setAttribute("aria-owns",this.parent.getID()),t.element.childElementCount===1&&o.element.insertBefore(r,o.element.querySelector(".e-caret")),t.element.tabIndex=-1,o.element.removeAttribute("type"),o.element.onmousedown=function(){i.parent.notify(Tt,{})},o.element.onkeydown=function(){i.parent.notify(Tt,{})},o},a.prototype.paletteSelection=function(t,e){var i=t.element.querySelector(".e-control.e-colorpicker"),n=[].slice.call(re(".e-tile",i.parentElement));O(n,"e-selected");var r=e.querySelector("."+Oe).style.borderBottomColor;n.filter(function(s){s.style.backgroundColor===r&&k([s],"e-selected")})},a.prototype.renderColorPickerDropDown=function(t,e,i,n){var r=this,s=this,o=Oe+" "+Ds+(this.parent.inlineMode?" "+Cs:"");o+=" "+(e==="backgroundcolor"?kp:wp),o+=this.parent.getCssClass(!0);var l=s.parent.createElement("span",{className:Qi}),c=s.parent.createElement("span",{className:t.cssClass}),p,d=h(n)?s.parent.backgroundColor.default:n;c.style.borderBottomColor=e==="backgroundcolor"?d:s.parent.fontColor.default,l.appendChild(c);var u=new Ji({target:i.element.parentElement,cssClass:o,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,beforeOpen:function(f){if(s.parent.readonly||!s.parent.enabled){f.cancel=!0;return}var g=f.event?f.event.target:null;if(s.currentElement=u.element,s.currentDropdown=u,s.paletteSelection(f,s.currentElement),f.event&&f.event.type==="click"&&(g.classList.contains(Qi)||g.parentElement.classList.contains(Qi))){f.cancel=!0;var y=g.classList.contains(Oe)?g.style.borderBottomColor:g.querySelector("."+Oe).style.borderBottomColor;s.parent.notify(Et,{}),p=s.parent.formatter.editorManager.nodeSelection.getRange(s.parent.contentModule.getDocument());var S=p.startContainer.parentNode,T=b(p.startContainer.parentNode,"table");(p.startContainer.nodeName==="TD"||p.startContainer.nodeName==="TH"||b(p.startContainer.parentNode,"td,th")||s.parent.iframeSettings.enable&&!be(S.ownerDocument.querySelector("body"),"e-lib"))&&p.collapsed&&t.subCommand==="BackgroundColor"&&b(T,"."+rn)?s.parent.notify(nn,{item:{command:t.command,subCommand:t.subCommand,value:y}}):s.parent.notify(tn,{item:{command:t.command,subCommand:t.subCommand,value:y}});return}else{var L=f.element.querySelector(".e-control.e-colorpicker"),w=jt(L,Xa);w.showButtons=!f.element.querySelector(".e-color-palette"),w.dataBind()}f.element.onclick=function(N){N.target.classList.contains("e-cancel")&&u.toggle()}},open:function(f){r.setColorPickerContentWidth(i);var g,y=f.element.querySelector(".e-control.e-colorpicker");f.element.querySelector(".e-color-palette")?g=y.parentElement.querySelector(".e-palette"):g=y.parentElement.querySelector("e-handler"),g&&g.focus(),r.pickerRefresh(f)},beforeClose:function(f){var g=f.event?f.event.target:null;if(f.event&&f.event.type==="click"&&(g.classList.contains(Qi)||g.parentElement.classList.contains(Qi))){var y=g.classList.contains(Oe)?g.style.borderBottomColor:g.querySelector("."+Oe).style.borderBottomColor;p=s.parent.formatter.editorManager.nodeSelection.getRange(s.parent.contentModule.getDocument()),(p.startContainer.nodeName==="TD"||p.startContainer.nodeName==="TH"||b(p.startContainer.parentNode,"td,th"))&&p.collapsed?s.parent.notify(nn,{item:{command:t.command,subCommand:t.subCommand,value:y}}):s.parent.notify(tn,{item:{command:t.command,subCommand:t.subCommand,value:y}});return}},close:function(){s.parent.notify(Et,{})}});u.isStringTemplate=!0,u.createElement=s.parent.createElement,t.element.setAttribute("role","button"),u.appendTo(t.element);var m=document.getElementById(u.element.id+"-popup");return m.setAttribute("aria-owns",this.parent.getID()),u.element.insertBefore(l,u.element.querySelector(".e-caret")),t.element.tabIndex=-1,u.element.removeAttribute("type"),u.element.onmousedown=function(){s.parent.notify(Tt,{})},u.element.onkeydown=function(){s.parent.notify(Tt,{})},u},a.prototype.pickerRefresh=function(t){if(this.parent.backgroundColor.mode==="Picker"){var e=t.element.parentElement;e.style.width=(e.offsetWidth+5).toString()+"px",jt(e,At).refreshPosition(e),e.style.width=(e.offsetWidth-5).toString()+"px"}},a.prototype.setColorPickerContentWidth=function(t){var e=t.element.nextSibling;if(e.style.width==="0px"){e.style.width="";var i=parseInt(getComputedStyle(e).borderBottomWidth,10);e.style.width=z(e.children[0].offsetWidth+i+i)}},a.prototype.renderColorPicker=function(t,e){var i=this,n=this,r,s=new Xa({enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,inline:!0,value:null,cssClass:(e==="backgroundcolor"?Ll:El)+" "+t.cssClass+" e-rte-picker-init",created:function(){var o=e==="backgroundcolor"?n.parent.backgroundColor.default:n.parent.fontColor.default,l=(e==="backgroundcolor"?Ll:El)+" "+t.cssClass;s.setProperties({value:o,cssClass:l})},mode:e==="backgroundcolor"?n.parent.backgroundColor.mode:n.parent.fontColor.mode,modeSwitcher:e==="backgroundcolor"?n.parent.backgroundColor.modeSwitcher:n.parent.fontColor.modeSwitcher,presetColors:e==="backgroundcolor"?this.parent.backgroundColor.colorCode:this.parent.fontColor.colorCode,columns:e==="backgroundcolor"?this.parent.backgroundColor.columns:this.parent.fontColor.columns,beforeTileRender:function(o){if(o.element.classList.add(Dp),o.element.classList.add(zp),!h(i.parent.cssClass))for(var l=i.parent.getCssClass().split(" "),c=0;c<l.length;c++)l[c].trim()!==""&&o.element.classList.add(l[c]);o.value===""&&o.element.classList.add(Up)},change:function(o){var l=o.currentValue.rgba;o.item={command:t.command,subCommand:t.subCommand,value:l},n.parent.notify(Et,{}),n.currentElement.querySelector("."+Oe).style.borderBottomColor=l;var c=n.parent.formatter.editorManager.nodeSelection.getRange(n.parent.contentModule.getDocument()),p=b(c.startContainer.parentNode,"table");(c.startContainer.nodeName==="TD"||c.startContainer.nodeName==="TH"||c.startContainer.nodeName==="BODY"||b(c.startContainer.parentNode,"td,th"))&&c.collapsed&&t.subCommand==="BackgroundColor"&&b(p,"."+rn)?n.parent.notify(nn,o):n.parent.notify(tn,o),n.currentDropdown.toggle()},beforeModeSwitch:function(o){r=s.value,r===""&&s.setProperties({value:o.mode==="Picker"?"#008000ff":""},!0),s.showButtons=o.mode!=="Palette"}});return s.isStringTemplate=!0,s.createElement=this.parent.createElement,s.appendTo(document.getElementById(t.target)),s},a.prototype.renderPanel=function(){this.getPanel().classList.add(sr)},a.prototype.getPanel=function(){return this.toolbarPanel},a.prototype.setPanel=function(t){this.toolbarPanel=t},a.prototype.destroy=function(){if(!this.isDestroyed){if(this.tooltip&&!this.tooltip.isDestroyed){this.tooltip.destroy();for(var t=document.querySelectorAll('[data-rte-id="'+this.parent.getID()+'"]'),e=0;e<t.length;e++){var i=t[e];this.parent.getID()===i.getAttribute("data-rte-id")&&E(i)}}this.unWireEvent(),this.mode=null,this.toolbarPanel=null,this.currentElement=null,this.currentDropdown=null,this.tooltip=null,this.tooltipTargetEle=null,this.isDestroyed=!0}},a}(),Td=function(){function a(t,e){this.parent=t,this.rteID=t.element.id,this.i10n=e.getService("rteLocale"),this.addEventListener(),this.serviceLocator=e,this.rendererFactory=e.getService("rendererFactory"),this.dialogRenderObj=e.getService("dialogRenderObject"),this.isDestroyed=!1,this.mouseDown=this.onDocumentClick.bind(this)}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(io,this.linkDialog,this),this.parent.on(Co,this.showDialog,this),this.parent.on(So,this.closeDialog,this),this.parent.on(we,this.onKeyDown,this),this.parent.on(un,this.showLinkQuickToolbar,this),this.parent.on(ai,this.clearDialogObj,this),this.parent.on(eo,this.onToolbarAction,this),this.parent.on(ht,this.onIframeMouseDown,this),this.parent.on(nr,this.removeLink,this),this.parent.on(ds,this.editLink,this),this.parent.on(zn,this.openLink,this),this.parent.on(wt,this.editAreaClickHandler,this),this.parent.on(Le,this.setCssClass,this),this.parent.on(Y,this.destroy,this))},a.prototype.onToolbarAction=function(t){var e=t.args.item;switch(e.subCommand){case"OpenLink":this.parent.notify(zn,t);break;case"EditLink":this.parent.notify(ds,t);break;case"RemoveLink":this.parent.notify(nr,t);break}},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(io,this.linkDialog),this.parent.off(Co,this.showDialog),this.parent.off(So,this.closeDialog),this.parent.off(we,this.onKeyDown),this.parent.off(un,this.showLinkQuickToolbar),this.parent.off(ai,this.clearDialogObj),this.parent.off(eo,this.onToolbarAction),this.parent.off(nr,this.removeLink),this.parent.off(ht,this.onIframeMouseDown),this.parent.off(ds,this.editLink),this.parent.off(zn,this.openLink),this.parent.off(wt,this.editAreaClickHandler),this.parent.off(Le,this.setCssClass),this.parent.off(Y,this.destroy))},a.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},a.prototype.updateCss=function(t,e){t&&e.cssClass&&(h(e.oldCssClass)?t.setProperties({cssClass:(t.cssClass+" "+e.cssClass).trim()}):t.setProperties({cssClass:(t.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){this.updateCss(this.checkBoxObj,t),this.updateCss(this.dialogObj,t)},a.prototype.showLinkQuickToolbar=function(t){if(!h(t.args)&&t.args.action!=="enter"&&t.args.action!=="space"){var e=void 0,i=void 0;if(t.type!=="Links"||h(this.parent.quickToolbarModule)||h(this.parent.quickToolbarModule.linkQTBar))return;this.quickToolObj=this.parent.quickToolbarModule;var n=this.parent.element.getBoundingClientRect().top,r=this.parent.element.getBoundingClientRect().left,s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),o;if([].forEach.call(t.elements,function(f,g){g===0&&(o=f.nodeName==="#text"?f.parentNode:f)}),t.isNotify){var l=this.parent.toolbarModule.getToolbarElement(),c=o.getBoundingClientRect().top,p=o.getBoundingClientRect().left,d=c-n,u=l?l.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;e=this.parent.iframeSettings.enable?r+p:o.getBoundingClientRect().left,i=window.pageYOffset+(this.parent.iframeSettings.enable?n+u+c:n+d)}else{var m=void 0;m=t.args.touches?t.args.changedTouches[0]:m=t.args,e=this.parent.iframeSettings.enable?window.pageXOffset+r+m.clientX:m.pageX,i=this.parent.iframeSettings.enable?window.pageYOffset+n+m.clientY:m.pageY}this.quickToolObj.linkQTBar&&this.quickToolObj.linkQTBar.showPopup(e,i,s.endContainer,"link")}},a.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.linkQTBar&&document.body.contains(this.quickToolObj.linkQTBar.element)&&this.quickToolObj.linkQTBar.hidePopup()},a.prototype.editAreaClickHandler=function(t){if(this.parent.readonly){this.hideLinkQuickToolbar();return}var e=t.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(e.which===2||i&&e.which===1||!i&&e.which===3)&&this.parent.editorMode==="HTML"&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.linkQTBar){this.quickToolObj=this.parent.quickToolbarModule;var n=e.target;n=this.getAnchorNode(n),this.contentModule=this.rendererFactory.getRenderer(X.Content);var r=this.quickToolObj.linkQTBar.element.classList.contains("e-rte-pop");if(n.nodeName==="A"&&n.childNodes.length>0&&n.childNodes[0].nodeName!=="IMG"&&t.args.target.nodeName!=="IMG"&&!h(b(this.parent.getRange().startContainer.parentElement,"A"))&&!h(b(this.parent.getRange().endContainer.parentElement,"A"))){if(r)return;if(t.args.ctrlKey===!1)this.showLinkQuickToolbar({args:e,isNotify:!1,type:"Links",elements:[e.target]});else{var s=this.parent.formatter.editorManager.nodeSelection,o=s.getRange(this.parent.contentModule.getDocument()),l={args:{item:{subCommand:"OpenLink",command:"Links",name:""},originalEvent:t.args},selectNode:s.getNodeCollection(o),selectParent:s.getParentNodeCollection(o),selection:s.save(o,this.parent.contentModule.getDocument())};this.parent.notify(zn,l)}}else this.hideLinkQuickToolbar()}},a.prototype.onKeyDown=function(t){var e=t.args;switch(e.action){case"escape":h(this.dialogObj)||this.dialogObj.close();break;case"insert-link":this.openDialog(!0,t),e.preventDefault();break}},a.prototype.openDialog=function(t,e){if(t||this.parent.contentModule.getEditPanel().focus(),this.parent.editorMode==="HTML"){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),o={args:e?e.args:{item:{command:"Links",subCommand:"CreateLink"},originalEvent:void 0,name:t?null:"showDialog"},selectNode:r,selection:n,selectParent:s};this.linkDialog(o)}else{var l=this.parent.contentModule.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(l.selectionStart,l.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:e&&e.args},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertLink"})}},a.prototype.showDialog=function(){this.openDialog(!1),this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.closeDialog=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},a.prototype.clearDialogObj=function(){this.dialogObj&&(this.dialogObj.destroy(),E(this.dialogObj.element),this.dialogObj=null)},a.prototype.linkDialog=function(t,e){var i=this;if(this.dialogObj){this.dialogObj.hide({returnValue:!0});return}if(this.parent.editorMode==="HTML"&&t.selectParent.length>0&&!h(t.selectParent[0].classList)&&t.selectParent[0].classList.contains("e-rte-anchor")&&h(e)){this.editLink(t);return}var n=this.i10n.getConstant("linkWebUrl"),r=this.i10n.getConstant("linkText"),s=this.i10n.getConstant("linkTooltipLabel"),o=this.i10n.getConstant("linkurl"),l=this.i10n.getConstant("textPlaceholder"),c=this.i10n.getConstant("linkTitle"),p=this.parent.createElement("div",{className:"e-rte-link-dialog"+this.parent.getCssClass(!0),id:this.rteID+"_rtelink"});this.parent.rootContainer.appendChild(p);var d=this.parent.createElement("div",{className:"e-rte-linkcontent"+this.parent.getCssClass(!0),id:this.rteID+"_linkContent"}),u=this.parent.editorMode==="HTML"?"<label>"+s+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" spellcheck="false" placeholder = "'+c+'"aria-label="'+this.i10n.getConstant("linkTitle")+'" class="e-input e-rte-linkTitle'+this.parent.getCssClass(!0)+'"></div><div class="e-rte-label'+this.parent.getCssClass(!0)+'"></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="checkbox" class="e-rte-linkTarget'+this.parent.getCssClass(!0)+'"  data-role ="none"></div>':"",m='<div class="e-rte-label'+this.parent.getCssClass(!0)+'"><label>'+n+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" spellcheck="false" placeholder="'+o+'"aria-label="'+this.i10n.getConstant("linkWebUrl")+'" class="e-input e-rte-linkurl'+this.parent.getCssClass(!0)+'"/></div><div class="e-rte-label'+this.parent.getCssClass(!0)+'"><label>'+r+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"> <input type="text" data-role ="none" spellcheck="false" class="e-input e-rte-linkText'+this.parent.getCssClass(!0)+'"aria-label="'+this.i10n.getConstant("linkText")+'" placeholder="'+l+'"></div><div class="e-rte-label'+this.parent.getCssClass(!0)+'">'+u,f=xi(m);d.appendChild(f);var g=d.querySelector(".e-rte-linkTarget"),y=d.querySelector(".e-rte-linkurl"),S=d.querySelector(".e-rte-linkText"),T=d.querySelector(".e-rte-linkTitle"),L=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new Xl({label:L,checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass()}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(g);var w=this.parent.editorMode==="HTML"?t.selection.getRange(this.parent.contentModule.getDocument()).toString():t.text,N=this.i10n.getConstant("dialogInsert"),M=this.i10n.getConstant("dialogCancel"),I=t.selection,A={selfLink:this,selection:t.selection,selectParent:t.selectParent,args:t.args},V={header:this.i10n.getConstant("linkHeader"),content:d,cssClass:Oe+this.parent.getCssClass(!0),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:x.isDevice?"290px":"310px",isModal:x.isDevice,buttons:[{click:this.insertlink.bind(A),buttonModel:{content:N,cssClass:"e-flat e-insertLink"+this.parent.getCssClass(!0),isPrimary:!0}},{click:this.cancelDialog.bind(A),buttonModel:{cssClass:"e-flat"+this.parent.getCssClass(!0),content:M}}],target:x.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(Q){i.parent.isBlur=!1,Q&&Q.event.returnValue&&(i.parent.editorMode==="HTML"?I.restore():i.parent.formatter.editorManager.markdownSelection.restore(i.parent.contentModule.getEditPanel())),i.dialogObj.destroy(),E(i.dialogObj.element);var Z=i.dialogObj;i.dialogRenderObj.close(Z),i.dialogObj=null}};this.dialogObj=this.dialogRenderObj.render(V),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(p),p.style.maxHeight="inherit",!h(this.dialogObj)&&(h(e)||(y.value=e.url,S.value=e.text,T.value=e.title,e.target?this.checkBoxObj.checked=!0:this.checkBoxObj.checked=!1,this.dialogObj.header=e.header,this.dialogObj.element.querySelector(".e-insertLink").textContent=e.btnText),this.checkUrl(!1),(this.parent.editorMode==="HTML"&&h(e)&&(!h(w)&&w!==""&&t.selection.range.startOffset===0||t.selection.range.startOffset!==t.selection.range.endOffset)||t.module==="Markdown")&&(S.value=w),this.parent.element.ownerDocument.addEventListener("mousedown",this.mouseDown,!0),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup(),this.quickToolObj.textQTBar&&this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)&&this.quickToolObj.textQTBar.hidePopup()))},a.prototype.insertlink=function(t){var e=this.selfLink.dialogObj.element,i=e.querySelector(".e-rte-linkurl").value,n=e.querySelector(".e-rte-linkText").value,r;this.selfLink.parent.editorMode==="HTML"&&(r=e.querySelector(".e-rte-linkTitle").value);var s=this.selfLink.checkBoxObj.checked?"_blank":null,o=this.selfLink.checkBoxObj.checked?this.selfLink.i10n.getConstant("linkAriaLabel"):null;if(this.selfLink.parent.editorMode==="Markdown"&&i===""&&(i="http://"),i===""){this.selfLink.checkUrl(!0);return}this.selfLink.isUrl(i)?this.selfLink.checkUrl(!1):(this.selfLink.parent.editorMode==="Markdown"?n=n!==""?n:"":n=n===""?i:n,this.selfLink.parent.enableAutoUrl?i=i:i=i.indexOf("http")>-1?i:"http://"+i);var l=this.selfLink;if(l.parent.editorMode==="HTML"&&h(b(this.selection.range.startContainer.parentNode,"[id='"+l.parent.contentModule.getPanel().id+"']"))){l.parent.contentModule.getEditPanel().focus(),x.isIE&&l.parent.iframeSettings.enable&&this.selection.restore();var c=l.parent.formatter.editorManager.nodeSelection.getRange(l.parent.contentModule.getDocument());this.selection=l.parent.formatter.editorManager.nodeSelection.save(c,l.parent.contentModule.getDocument()),this.selectParent=l.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(c)}var p={url:i,text:n,title:r,target:s,ariaLabel:o,selection:this.selection,selectParent:this.selectParent};document.body.contains(l.dialogObj.element)&&this.selfLink.dialogObj.hide({returnValue:!1}),Qe()&&l.parent.iframeSettings.enable&&F("iframe",l.parent.element).contentWindow.focus(),l.parent.editorMode==="HTML"&&this.selection.restore(),l.parent.formatter.getUndoRedoStack().length===0&&l.parent.formatter.saveData();var d;if(!h(this.args)&&this.args.code==="KeyK"){var u=this.args;_e(this.args,{item:{command:"Links",subCommand:"CreateLink"},originalEvent:u},!0);var m={item:{command:"Links",subCommand:"CreateLink"},originalEvent:u};d=m}else d=this.args;this.selfLink.parent.formatter.process(this.selfLink.parent,d,!h(this.args)&&this.args.originalEvent,p),this.selfLink.parent.contentModule.getEditPanel().focus()},a.prototype.isUrl=function(t){var e=RegExp,i=new e("(ftp|http|https)://(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(/|/([\\w#!:.?+=&%@\\-\\/]))?","gi");return i.test(t)},a.prototype.checkUrl=function(t){var e=this.dialogObj.element,i=e.querySelector(".e-rte-linkurl");t?(k([i],"e-error"),i.setSelectionRange(0,i.value.length),i.focus()):O([i],"e-error")},a.prototype.removeLink=function(t){this.parent.formatter.getUndoRedoStack().length===0&&this.parent.formatter.saveData();var e=this.getAnchorNode(t.selectParent[0]);this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,selectParent:t.selectParent,selection:t.selection,text:e.innerText,subCommand:t.args.item.subCommand}),Qe()&&this.parent.iframeSettings.enable?F("iframe",this.parent.element).contentWindow.focus():this.parent.contentModule.getEditPanel().focus(),this.hideLinkQuickToolbar()},a.prototype.openLink=function(t){var e=this.getAnchorNode(t.selectParent[0]);(e.classList.contains("e-rte-anchor")||e.tagName==="A")&&this.parent.formatter.process(this.parent,t.args,t.args,{url:e.href,text:e.innerText,target:e.target===""?"_self":"_blank",selectNode:t.selectNode,subCommand:t.args.item.subCommand})},a.prototype.getAnchorNode=function(t){var e=b(t,"a");return e||t},a.prototype.editLink=function(t){var e=this.getAnchorNode(t.selectNode[0]),i=this.getAnchorNode(t.selectParent[0]);if(i=e.nodeName==="A"?e:i,i.classList.contains("e-rte-anchor")||i.tagName==="A"){var n=this.i10n.getConstant("dialogUpdate"),r={url:i.getAttribute("href"),text:i.innerText,title:i.title,target:i.target,header:this.i10n.getConstant("editLink"),btnText:n};this.linkDialog(t,r)}},a.prototype.cancelDialog=function(t){if(this.selfLink.parent.isBlur=!1,this.selfLink.dialogObj.hide({returnValue:!0}),Qe())this.selection.restore();else{var e=window.scrollX,i=window.scrollY;this.selfLink.parent.contentModule.getEditPanel().focus(),window.scrollTo(e,i)}},a.prototype.onDocumentClick=function(t){var e=t.target;!h(this.dialogObj)&&(!b(e,"[id='"+this.dialogObj.element.id+"']")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(t.target)||(this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(t.target)||this.parent.inlineMode.enable&&!b(e,"#"+this.dialogObj.element.id))&&!b(e,"#"+this.parent.getID()+"_toolbar_CreateLink")&&!e.querySelector("#"+this.parent.getID()+"_toolbar_CreateLink"))&&(this.parent.notify(Cn,{closedBy:"outside click"}),this.dialogObj.hide({returnValue:!0}),this.parent.element.ownerDocument.removeEventListener("mousedown",this.mouseDown,!0),this.mouseDown=null,this.parent.isBlur=!0,kn(this.parent.element,"focusout"))},a.prototype.destroy=function(){this.isDestroyed||(this.parent.element.ownerDocument.removeEventListener("mousedown",this.mouseDown,!0),this.mouseDown=null,this.removeEventListener(),this.isDestroyed=!0)},a.prototype.getModuleName=function(){return"link"},a}(),Ed={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-audio":"ctrl+shift+a","insert-video":"ctrl+alt+v","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46","format-copy":"alt+shift+c","format-paste":"alt+shift+v"},Pl={b:["strong"],strong:["b"],i:["emp","cite"],emp:["i","cite"],cite:["i","emp"]},Il=["BR","IMG"],Ld={topLeft:[-1,-1],topRight:[1,-1],botRight:[1,1],botLeft:[-1,1]},wd=function(){function a(t,e){this.isImgUploaded=!1,this.isAllowedTypes=!0,this.pageX=null,this.pageY=null,this.deletedImg=[],this.isResizeBind=!0,this.parent=t,this.rteID=t.element.id,this.i10n=e.getService("rteLocale"),this.rendererFactory=e.getService("rendererFactory"),this.dialogRenderObj=e.getService("dialogRenderObject"),this.addEventListener(),this.drop=this.dragDrop.bind(this),this.drag=this.dragOver.bind(this),this.enter=this.dragEnter.bind(this),this.start=this.dragStart.bind(this),this.docClick=this.onDocumentClick.bind(this),this.isDestroyed=!1}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(we,this.onKeyDown,this),this.parent.on(Ke,this.onKeyUp,this),this.parent.on(rr,this.insertImage,this),this.parent.on(To,this.showDialog,this),this.parent.on(Eo,this.closeDialog,this),this.parent.on(to,this.onWindowResize,this),this.parent.on(un,this.showImageQuickToolbar,this),this.parent.on(ai,this.clearDialogObj,this),this.parent.on(Zs,this.onToolbarAction,this),this.parent.on(gs,this.caption,this),this.parent.on(ms,this.deleteImg,this),this.parent.on(us,this.insertImgLink,this),this.parent.on(fs,this.insertAltText,this),this.parent.on(wt,this.editAreaClickHandler,this),this.parent.on(ht,this.onIframeMouseDown,this),this.parent.on(vs,this.imageSize,this),this.parent.on(si,this.alignmentSelect,this),this.parent.on(je,this.afterRender,this),this.parent.on(bn,this.afterRender,this),this.parent.on(Oi,this.imagePaste,this),this.parent.on(Le,this.setCssClass,this),this.parent.on(Y,this.destroy,this))},a.prototype.removeEventListener=function(){this.parent.off(we,this.onKeyDown),this.parent.off(Ke,this.onKeyUp),this.parent.off(to,this.onWindowResize),this.parent.off(rr,this.insertImage),this.parent.off(To,this.showDialog),this.parent.off(Eo,this.closeDialog),this.parent.off(un,this.showImageQuickToolbar),this.parent.off(ai,this.clearDialogObj),this.parent.off(gs,this.caption),this.parent.off(Zs,this.onToolbarAction),this.parent.off(ms,this.deleteImg),this.parent.off(us,this.insertImgLink),this.parent.off(fs,this.insertAltText),this.parent.off(wt,this.editAreaClickHandler),this.parent.off(ht,this.onIframeMouseDown),this.parent.off(vs,this.imageSize),this.parent.off(si,this.alignmentSelect),this.parent.off(je,this.afterRender),this.parent.off(bn,this.afterRender),this.parent.off(Oi,this.imagePaste),this.parent.off(Le,this.setCssClass),this.parent.off(Y,this.destroy);var t=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;t.removeEventListener("drop",this.drop,!0),t.removeEventListener("dragstart",this.drag,!0),t.removeEventListener("dragenter",this.enter,!0),t.removeEventListener("dragover",this.start,!0),this.drop=null,this.drag=null,this.enter=null,this.start=null,h(this.contentModule)||(C.remove(this.contentModule.getEditPanel(),x.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off(ho,this.undoStack),this.parent.insertImageSettings.resize&&(C.remove(this.parent.contentModule.getEditPanel(),x.touchStartEvent,this.resizeStart),this.parent.element.ownerDocument.removeEventListener("mousedown",this.docClick,!0),this.docClick=null,C.remove(this.contentModule.getEditPanel(),"cut",this.onCutHandler),C.remove(this.contentModule.getDocument(),x.touchMoveEvent,this.resizing)))},a.prototype.updateCss=function(t,e){t&&e.cssClass&&(h(e.oldCssClass)?t.setProperties({cssClass:(t.cssClass+" "+e.cssClass).trim()}):t.setProperties({cssClass:(t.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){this.popupObj&&t.cssClass&&(h(t.oldCssClass)?k([this.popupObj.element],t.cssClass):(O([this.popupObj.element],t.oldCssClass),k([this.popupObj.element],t.cssClass))),this.updateCss(this.checkBoxObj,t),this.updateCss(this.widthNum,t),this.updateCss(this.heightNum,t),this.updateCss(this.uploadObj,t),this.updateCss(this.dialogObj,t)},a.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},a.prototype.afterRender=function(){this.contentModule=this.rendererFactory.getRenderer(X.Content),C.add(this.contentModule.getEditPanel(),x.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(C.add(this.parent.contentModule.getEditPanel(),x.touchStartEvent,this.resizeStart,this),this.parent.element.ownerDocument.addEventListener("mousedown",this.docClick,!0),C.add(this.contentModule.getEditPanel(),"cut",this.onCutHandler,this));var t=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;t.addEventListener("drop",this.drop,!0),t.addEventListener("dragstart",this.drag,!0),t.addEventListener("dragenter",this.enter,!0),t.addEventListener("dragover",this.start,!0)},a.prototype.undoStack=function(t){if(t.subCommand.toLowerCase()==="undo"||t.subCommand.toLowerCase()==="redo")for(var e=0;e<this.parent.formatter.getUndoRedoStack().length;e++){var i=this.parent.createElement("div"),n=this.parent.formatter.getUndoRedoStack()[e].text;i.appendChild(n.cloneNode(!0));var r=i.querySelectorAll("img");if(i.querySelector(".e-img-resize")&&r.length>0){for(var s=0;s<r.length;s++)r[s].style.outline="";E(i.querySelector(".e-img-resize"));for(var o=i.cloneNode(!0),l=document.createDocumentFragment();o.firstChild;)l.appendChild(o.firstChild);this.parent.formatter.getUndoRedoStack()[e].text=l}}},a.prototype.resizeEnd=function(t){this.resizeBtnInit(),this.imgEle.parentElement&&(this.imgEle.parentElement.style.cursor="auto"),x.isDevice&&O([t.target.parentElement],"e-mob-span");var e={event:t,requestType:"images"};this.parent.trigger(nh,e),this.parent.formatter.editorManager.observer.on(ho,this.undoStack,this),this.parent.formatter.saveData()},a.prototype.resizeStart=function(t,e){var i=this;if(!this.parent.readonly){var n=e||t.target;if(this.prevSelectedImgEle=this.imgEle,n.tagName==="IMG"){this.parent.preventDefaultResize(t);var r=n;this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&E(this.imgResizeDiv),this.imageResize(r)}if(n.classList.contains("e-rte-imageboxmark")){this.parent.formatter.getUndoRedoStack().length===0&&this.parent.formatter.saveData(),this.pageX=this.getPointX(t),this.pageY=this.getPointY(t),t.preventDefault(),t.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.imageQTBar.hidePopup();for(var s=["topLeft","topRight","botLeft","botRight"],o=0;o<s.length;o++){var l=s[o];if(n.classList.contains("e-rte-"+l)){this.resizeBtnStat[l]=!0,this.currentResizeHandler=l,this.aspectRatio=this.findAspectRatio(this.imgEle);break}}if(x.isDevice&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span"))k([this.imgResizeDiv],"e-mob-span");else{var c={event:t,requestType:"images"};this.parent.trigger(th,c,function(p){p.cancel&&i.cancelResizeAction()})}this.isResizeBind&&(C.add(this.contentModule.getDocument(),x.touchMoveEvent,this.resizing,this),C.add(this.contentModule.getDocument(),x.touchEndEvent,this.resizeEnd,this),this.isResizeBind=!1)}}},a.prototype.imageClick=function(t){x.isDevice&&(t.target.tagName==="IMG"&&t.target.parentElement.tagName==="A"||t.target.tagName==="IMG"?(this.contentModule.getEditPanel().setAttribute("contenteditable","false"),t.target.focus()):this.parent.readonly||this.contentModule.getEditPanel().setAttribute("contenteditable","true")),t.target.tagName==="IMG"&&t.target.parentElement.tagName==="A"&&t.preventDefault()},a.prototype.onCutHandler=function(){this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()},a.prototype.imageResize=function(t){this.resizeBtnInit(),this.imgEle=t,k([this.imgEle],"e-resize"),this.imgResizeDiv=this.parent.createElement("span",{className:"e-img-resize"+this.parent.getCssClass(!0),id:this.rteID+"_imgResize"}),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft"+this.parent.getCssClass(!0),styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight"+this.parent.getCssClass(!0),styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft"+this.parent.getCssClass(!0),styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight"+this.parent.getCssClass(!0),styles:"cursor: nwse-resize"})),x.isDevice&&k([this.imgResizeDiv],"e-mob-rte"),t.style.outline="2px solid #4a90e2",this.imgResizePos(t,this.imgResizeDiv),this.resizeImgDupPos(t),this.contentModule.getEditPanel().appendChild(this.imgResizeDiv)},a.prototype.getPointX=function(t){return t.touches&&t.touches.length?t.touches[0].pageX:t.pageX},a.prototype.getPointY=function(t){return t.touches&&t.touches.length?t.touches[0].pageY:t.pageY},a.prototype.imgResizePos=function(t,e){var i=this.calcPos(t),n=i.top,r=i.left,s=t.getBoundingClientRect().width,o=t.getBoundingClientRect().height,l=x.isDevice?4*parseInt(t.style.outline.slice(-3),10)+2:2*parseInt(t.style.outline.slice(-3),10)+2,c=x.isDevice?0:2;e.querySelector(".e-rte-botLeft").style.left=r-l+"px",e.querySelector(".e-rte-botLeft").style.top=o-l+n+"px",e.querySelector(".e-rte-botRight").style.left=s-(l-c)+r+"px",e.querySelector(".e-rte-botRight").style.top=o-l+n+"px",e.querySelector(".e-rte-topRight").style.left=s-(l-c)+r+"px",e.querySelector(".e-rte-topRight").style.top=n-l+"px",e.querySelector(".e-rte-topLeft").style.left=r-l+"px",e.querySelector(".e-rte-topLeft").style.top=n-l+"px"},a.prototype.calcPos=function(t){for(var e=["TD","TH","TABLE","A"],i={top:0,left:0},n,r=t.ownerDocument,s=(t.offsetParent&&(t.offsetParent.classList.contains("e-img-caption")||e.indexOf(t.offsetParent.tagName)>-1)?b(t,"#"+this.parent.getID()+"_rte-edit-view"):t.offsetParent)||r.documentElement;s&&(s===r.body||s===r.documentElement)&&s.style.position==="static";)s=s.parentNode;return s&&s!==t&&s.nodeType===1&&(i=s.getBoundingClientRect()),t.offsetParent&&t.offsetParent.classList.contains("e-img-caption")?(n=t.getBoundingClientRect(),{top:n.top-i.top,left:n.left-i.left}):{top:t.offsetTop,left:t.offsetLeft}},a.prototype.setAspectRatio=function(t,e,i){if(!h(t.width)){var n=t.width,r=t.height,s=n===r,o=this.parent.insertImageSettings.resizeByPercent?"%":"px",l=t.style.width===""&&t.style.height==="";!s&&!l?t.style.width!==""&&t.style.height!==""?this.parent.insertImageSettings.resizeByPercent?(this.setImageWidth(t,e,o),this.removeImageHeight(t)):(this.setImageWidth(t,e,o),this.setImageHeight(t,i,o)):t.style.width!==""?this.parent.insertImageSettings.resizeByPercent?(this.setImageWidth(t,e,o),this.removeImageHeight(t)):this.setImageWidth(t,e,o):t.style.height!==""&&(this.parent.insertImageSettings.resizeByPercent?(this.setImageWidth(t,e,o),this.removeImageHeight(t)):this.setImageHeight(t,i,o)):(this.setImageWidth(t,e,o),this.parent.insertImageSettings.resizeByPercent?this.removeImageHeight(t):this.setImageHeight(t,i,o))}},a.prototype.setImageWidth=function(t,e,i){t.style.width=this.getImageDimension(e,t)+i,this.parent.insertImageSettings.resizeByPercent||t.setAttribute("width",e.toString())},a.prototype.setImageHeight=function(t,e,i){t.style.height=this.getImageDimension(e,t)+i,this.parent.insertImageSettings.resizeByPercent||t.setAttribute("height",e.toString())},a.prototype.removeImageHeight=function(t){t.style.height="",t.removeAttribute("height")},a.prototype.getImageDimension=function(t,e){if(this.parent.insertImageSettings.resizeByPercent){var i=e.parentElement;return this.pixToPerc(t,i)}else return t},a.prototype.pixToPerc=function(t,e){return t/parseFloat(getComputedStyle(e).width)*100},a.prototype.imgDupMouseMove=function(t,e,i){var n=this,r={event:i,requestType:"images"};this.parent.trigger(ih,r,function(s){if(s.cancel)n.cancelResizeAction();else{if(parseInt(n.parent.insertImageSettings.minWidth,10)>=parseInt(t,10)||parseInt(n.parent.getInsertImgMaxWidth(),10)<=parseInt(t,10)&&h(n.imgEle.style.width)||!n.parent.insertImageSettings.resizeByPercent&&(parseInt(n.parent.insertImageSettings.minHeight,10)>=parseInt(e,10)||parseInt(n.parent.insertImageSettings.maxHeight,10)<=parseInt(e,10)))return;n.imgEle.parentElement.style.cursor="pointer",n.setAspectRatio(n.imgEle,parseInt(t,10),parseInt(e,10)),n.resizeImgDupPos(n.imgEle),n.imgResizePos(n.imgEle,n.imgResizeDiv)}})},a.prototype.resizing=function(t){if(!this.parent){this.cancelResizeAction();return}if(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft){var e=this.getPointX(t),i=this.getPointY(t),n=this.getResizeFactor(this.currentResizeHandler),r=e-this.pageX,s=i-this.pageY,o=this.imgEle.clientWidth,l=this.imgEle.clientHeight,c=r*n[0]+o,p=s*n[1]+l;c=c<16?16:c,p=p<16?16:p,Math.abs(r)>Math.abs(s)?(p=Math.round(c/this.aspectRatio),c=Math.round(p*this.aspectRatio)):(c=Math.round(p*this.aspectRatio),p=Math.round(c/this.aspectRatio)),this.pageX=e,this.pageY=i,this.imgDupMouseMove(c+"px",p+"px",t)}},a.prototype.getResizeFactor=function(t){return Ld[t]},a.prototype.findAspectRatio=function(t){return t.clientWidth/t.clientHeight},a.prototype.cancelResizeAction=function(){this.isResizeBind=!0,C.remove(this.contentModule.getDocument(),x.touchMoveEvent,this.resizing),C.remove(this.contentModule.getDocument(),x.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&(E(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null,this.currentResizeHandler=null,this.aspectRatio=null)},a.prototype.resizeImgDupPos=function(t){this.imgDupPos={width:t.style.width!==""&&this.parent.insertImageSettings&&!this.parent.insertImageSettings.resizeByPercent?this.imgEle.style.width:t.width+"px",height:t.style.height!==""?this.imgEle.style.height:t.height+"px"}},a.prototype.resizeBtnInit=function(){return this.aspectRatio=null,this.currentResizeHandler=null,this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},a.prototype.onToolbarAction=function(t){Qe()&&this.parent.notify(Et,{});var e=t.args.item;switch(e.subCommand){case"Replace":this.parent.fileManagerSettings.enable?this.parent.notify(sh,t):this.parent.notify(rr,t);break;case"Caption":this.parent.notify(gs,t);break;case"InsertLink":this.parent.notify(us,t);break;case"AltText":this.parent.notify(fs,t);break;case"Remove":this.parent.notify(ms,t);break;case"Dimension":this.parent.notify(vs,t);break;case"OpenImageLink":this.openImgLink(t);break;case"EditImageLink":this.editImgLink(t);break;case"RemoveImageLink":this.removeImgLink(t);break}},a.prototype.openImgLink=function(t){var e=t.selectParent[0].parentNode.target===""?"_self":"_blank";this.parent.formatter.process(this.parent,t.args,t.args,{url:t.selectParent[0].parentNode.href,target:e,selectNode:t.selectNode,subCommand:t.args.item.subCommand})},a.prototype.editImgLink=function(t){var e=t.selectParent[0].parentNode,i=this.i10n.getConstant("dialogUpdate"),n={url:e.href,target:e.target,header:"Edit Link",btnText:i};this.insertImgLink(t,n)},a.prototype.removeImgLink=function(t){x.isIE&&this.contentModule.getEditPanel().focus(),t.selection.restore();var e=!!(this.contentModule.getEditPanel().contains(this.captionEle)&&F("a",this.captionEle)),i=e?[this.captionEle]:[t.selectNode[0].parentElement];this.parent.formatter.process(this.parent,t.args,t.args,{insertElement:t.selectNode[0],selectParent:i,selection:t.selection,subCommand:t.args.item.subCommand}),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),h(t.selectParent)||O([t.selectParent[0]],"e-img-focus")),e&&F(".e-img-inner",this.captionEle).focus()},a.prototype.onKeyDown=function(t){var e=t.args,i,n,r,s;this.deletedImg=[];var o,l=[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183];if(this.parent.editorMode==="HTML"&&(i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),o=i.startContainer===i.endContainer&&i.startOffset===i.endOffset),!o&&this.parent.editorMode==="HTML"&&l.indexOf(e.which)<0)for(var c=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),p=0;p<c.length;p++)c[p].nodeName==="IMG"&&this.deletedImg.push(c[p]);if(this.parent.editorMode==="HTML"&&(e.which===8&&e.code==="Backspace"||e.which===46&&e.code==="Delete")){var d=i.startContainer===i.endContainer&&i.startOffset===i.endOffset;e.which===8&&e.code==="Backspace"&&d?this.checkImageBack(i):e.which===46&&e.code==="Delete"&&d&&this.checkImageDel(i)}if(!h(this.parent.formatter.editorManager.nodeSelection)&&e.code!=="KeyK"&&(i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),!e.ctrlKey&&e.key&&(e.key.length===1||e.action==="enter")&&!h(s[0])&&s[0].tagName==="IMG"&&s[0].parentElement&&(this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),O([s[0]],"e-img-focus"),this.quickToolObj&&this.quickToolObj.imageQTBar&&this.quickToolObj.imageQTBar.hidePopup())),e.ctrlKey&&(e.keyCode===89||e.keyCode===90)&&this.parent.editorMode!=="Markdown"&&this.undoStack({subCommand:e.keyCode===90?"undo":"redo"}),e.keyCode===8||e.keyCode===46){if(r&&r[0].nodeName==="IMG"&&r.length<1){h(this.parent.formatter.editorManager.nodeSelection)||(n=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument())),e.preventDefault();var u={selectNode:r,selection:n,selectParent:s,args:{item:{command:"Images",subCommand:"Remove"},originalEvent:e}};this.deleteImg(u,e.keyCode)}this.parent.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle()}switch(e.code==="Backspace"&&(e.action="backspace"),e.action){case"escape":h(this.dialogObj)||this.dialogObj.close();break;case"backspace":case"delete":for(var p=0;p<this.deletedImg.length;p++){var m=this.deletedImg[p].src;this.imageRemovePost(m)}if(this.parent.editorMode!=="Markdown"){if(i.startContainer.nodeType===3)e.code==="Backspace"?i.startContainer.previousElementSibling&&i.startOffset===0&&i.startContainer.previousElementSibling.classList.contains(et)&&i.startContainer.previousElementSibling.classList.contains(Wi)&&E(i.startContainer.previousElementSibling):i.startContainer.nextElementSibling&&i.endContainer.textContent.length===i.endOffset&&i.startContainer.nextElementSibling.classList.contains(et)&&i.startContainer.nextElementSibling.classList.contains(Wi)&&E(i.startContainer.nextElementSibling);else if(i.startContainer.nodeType===1){if(i.startContainer.querySelector("."+et+"."+Wi))E(i.startContainer.querySelector("."+et+"."+Wi));else if(i.startContainer.querySelector("."+et+"."+qt))E(i.startContainer.querySelector("."+et+"."+qt));else if(i.startContainer.classList.contains("e-img-wrap")&&b(i.startContainer,"."+et)){var f=i.startContainer.parentElement.parentElement;if(E(b(i.startContainer,"."+et)),f&&f.textContent.trim()===""){var g=this.parent.createElement("br");g.classList.add("e-rte-image-remove-focus"),f.appendChild(g)}}}}break;case"insert-image":h(this.parent.formatter.editorManager.nodeSelection)||(n=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument())),this.openDialog(!0,e,n,r,s),e.preventDefault();break}e.ctrlKey&&e.key==="a"&&this.handleSelectAll()},a.prototype.handleSelectAll=function(){this.cancelResizeAction();var t=this.parent.inputElement.querySelectorAll("."+ar);O(t,ar)},a.prototype.openDialog=function(t,e,i,n,r){var s,o,l,c;!t&&!h(this.parent.formatter.editorManager.nodeSelection)?(s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),o=this.parent.formatter.editorManager.nodeSelection.save(s,this.parent.contentModule.getDocument()),l=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(s),c=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(s)):(o=i,l=n,c=r),this.parent.editorMode==="HTML"?this.insertImage({args:{item:{command:"Images",subCommand:"Image"},originalEvent:e,name:t?null:"showDialog"},selectNode:l,selection:o,selectParent:c}):this.insertImage({args:{item:{command:"Images",subCommand:"Image"},originalEvent:e,name:t?null:"showDialog"},member:"image",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertImage"})},a.prototype.showDialog=function(){this.openDialog(!1),this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.closeDialog=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},a.prototype.onKeyUp=function(t){if(!h(this.deletedImg)&&this.deletedImg.length>0)for(var e=0;e<this.deletedImg.length;e++){var i={element:this.deletedImg[e],src:this.deletedImg[e].getAttribute("src")};this.parent.trigger(sl,i)}},a.prototype.checkImageBack=function(t){t.startContainer.nodeName==="#text"&&t.startOffset===0&&!h(t.startContainer.previousSibling)&&t.startContainer.previousSibling.nodeName==="IMG"?this.deletedImg.push(t.startContainer.previousSibling):t.startContainer.nodeName!=="#text"&&!h(t.startContainer.childNodes[t.startOffset-1])&&t.startContainer.childNodes[t.startOffset-1].nodeName==="IMG"&&this.deletedImg.push(t.startContainer.childNodes[t.startOffset-1])},a.prototype.checkImageDel=function(t){t.startContainer.nodeName==="#text"&&t.startOffset===t.startContainer.textContent.length&&!h(t.startContainer.nextSibling)&&t.startContainer.nextSibling.nodeName==="IMG"?this.deletedImg.push(t.startContainer.nextSibling):t.startContainer.nodeName!=="#text"&&!h(t.startContainer.childNodes[t.startOffset])&&t.startContainer.childNodes[t.startOffset].nodeName==="IMG"&&this.deletedImg.push(t.startContainer.childNodes[t.startOffset])},a.prototype.alignmentSelect=function(t){var e=t.item;if(!(!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||e.command!=="Images")){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i);n=n[0].nodeName==="IMG"?n:[this.imgEle];var r={args:t,selectNode:n};switch(this.parent.formatter.getUndoRedoStack().length===0&&this.parent.formatter.saveData(),e.subCommand){case"JustifyLeft":this.alignImage(r);break;case"JustifyCenter":this.alignImage(r);break;case"JustifyRight":this.alignImage(r);break;case"Inline":this.inline(r);break;case"Break":this.break(r);break}this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),O([n[0]],"e-img-focus")),this.cancelResizeAction()}},a.prototype.imageWithLinkQTBarItemUpdate=function(){for(var t=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item"),e=0;e<t.length;e++)t[e].getAttribute("title")===this.i10n.getConstant("openLink")||t[e].getAttribute("title")===this.i10n.getConstant("editLink")||t[e].getAttribute("title")===this.i10n.getConstant("removeLink")?(k([t[e]],"e-link-groups"),t[e].style.display="none"):t[e].getAttribute("title")==="Insert Link"?t[e].style.display="":t[e].classList.contains("e-rte-horizontal-separator")&&E(t[e]);var i=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-link-groups)");this.quickToolObj.imageQTBar.addQTBarItem(["-"],Math.round(i.length/2))},a.prototype.showImageQuickToolbar=function(t){var e=this;if(!(t.type!=="Images"||h(this.parent.quickToolbarModule)||h(this.parent.quickToolbarModule.imageQTBar)||h(t.args))){this.quickToolObj=this.parent.quickToolbarModule;var i=t.args,n=t.elements;[].forEach.call(t.elements,function(o,l){l===0&&(n=o)}),n&&!b(n,"a")&&this.imageWithLinkQTBarItemUpdate(),n.nodeName==="IMG"&&k([n],["e-img-focus"]);var r=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+i.clientY:i.pageY;if(this.parent.quickToolbarModule.imageQTBar)if(t.isNotify)this.imageQTPopupTime=setTimeout(function(){e.parent.formatter.editorManager.nodeSelection.Clear(e.contentModule.getDocument()),e.parent.formatter.editorManager.nodeSelection.setSelectionContents(e.contentModule.getDocument(),n),e.quickToolObj.imageQTBar.showPopup(i.pageX,r,n),e.resizeStart(t.args,n)},400);else{var s=n.getBoundingClientRect();this.quickToolObj.imageQTBar.showPopup(s.left,s.top,n,"Image")}}},a.prototype.hideImageQuickToolbar=function(){h(this.contentModule.getEditPanel().querySelector(".e-img-focus"))||(O([this.contentModule.getEditPanel().querySelector(".e-img-focus")],"e-img-focus"),this.quickToolObj&&this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup())},a.prototype.editAreaClickHandler=function(t){if(this.parent.readonly){this.hideImageQuickToolbar();return}var e=t.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(e.which===2||i&&e.which===1||!i&&e.which===3){i&&e.which===1&&!h(e.target)&&e.target.tagName==="IMG"&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),e.target));return}if(this.parent.editorMode==="HTML"&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.imageQTBar){this.quickToolObj=this.parent.quickToolbarModule;var n=e.target;this.contentModule=this.rendererFactory.getRenderer(X.Content);var r=this.quickToolObj.imageQTBar.element.classList.contains("e-rte-pop");if(n.nodeName==="IMG"&&this.parent.quickToolbarModule){if(r)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),n),Qe()&&this.parent.notify(Tt,t),k([n],"e-img-focus");var s=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item");if(b(n,"a")){for(var o=0;o<s.length;o++)s[o].getAttribute("title")===this.i10n.getConstant("openLink")||s[o].getAttribute("title")===this.i10n.getConstant("editLink")||s[o].getAttribute("title")===this.i10n.getConstant("removeLink")?(s[o].style.display="",O([s[o]],"e-link-groups")):s[o].getAttribute("title")==="Insert Link"?s[o].style.display="none":s[o].classList.contains("e-rte-horizontal-separator")&&(s[o],E(s[o]));var l=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-link-groups)");this.quickToolObj.imageQTBar.addQTBarItem(["-"],Math.round(l.length/2))}else b(n,"a")||this.imageWithLinkQTBarItemUpdate();this.showImageQuickToolbar({args:e,type:"Images",elements:[e.target]})}else this.hideImageQuickToolbar()}},a.prototype.insertImgLink=function(t,e){var i=this;if(t.selectNode[0].nodeName==="IMG"&&(this.imagDialog(t),!h(this.dialogObj))){var n=this.parent.createElement("div",{className:"e-img-linkwrap"+this.parent.getCssClass(!0)}),r=this.i10n.getConstant("linkurl"),s='<div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" class="e-input e-img-link'+this.parent.getCssClass(!0)+'" spellcheck="false" placeholder="'+r+'"/></div><div class="e-rte-label"></div><div class="e-rte-field"><input type="checkbox" class="e-rte-linkTarget'+this.parent.getCssClass(!0)+'"  data-role ="none"></div>',o=xi(s);n.appendChild(o);var l=n.querySelector(".e-rte-linkTarget"),c=n.querySelector(".e-img-link"),p=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new Xl({label:p,checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass(),change:function(g){g.checked?d="_blank":d=null}}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(l);var d="_blank",u=this.i10n.getConstant("imageLinkAriaLabel"),m=this.i10n.getConstant("dialogUpdate"),f={args:t.args,selfImage:this,selection:t.selection,selectNode:t.selectNode,selectParent:t.selectParent,link:c,target:d,ariaLabel:u};this.dialogObj.setProperties({width:"290px",header:this.parent.localeObj.getConstant("imageInsertLinkHeader"),content:n,buttons:[{click:function(g){i.insertlink(f)},buttonModel:{content:m,cssClass:"e-flat e-update-link"+this.parent.getCssClass(!0),isPrimary:!0}}],cssClass:this.dialogObj.cssClass+" e-rte-img-link-dialog"}),h(this.parent.cssClass)||this.dialogObj.setProperties({cssClass:this.parent.cssClass}),h(e)||(c.value=e.url,this.checkBoxObj.checked=!!e.target,this.dialogObj.header=e.header),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}},a.prototype.insertAltText=function(t){var e=this;if(t.selectNode[0].nodeName==="IMG"){this.imagDialog(t);var i=this.i10n.getConstant("altText");if(!h(this.dialogObj)){var n=this.parent.createElement("div",{className:"e-img-altwrap"+this.parent.getCssClass(!0)}),r=this.i10n.getConstant("alternateHeader"),s=this.i10n.getConstant("dialogUpdate"),o=t.selectNode[0].getAttribute("alt")===null?"":t.selectNode[0].getAttribute("alt"),l='<div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" spellcheck="false"  class="e-input e-img-alt'+this.parent.getCssClass(!0)+'" placeholder="'+i+'"/></div>',c=xi(l);c.querySelector("input").setAttribute("value",o),n.appendChild(c);var p=n.querySelector(".e-img-alt"),d={args:t.args,selfImage:this,selection:t.selection,selectNode:t.selectNode,alt:p};this.dialogObj.setProperties({width:"290px",header:r,content:n,buttons:[{click:function(u){e.insertAlt(d)},buttonModel:{content:s,cssClass:"e-flat e-update-alt"+this.parent.getCssClass(!0),isPrimary:!0}}],cssClass:this.dialogObj.cssClass+" e-rte-img-alt-dialog"}),h(this.parent.cssClass)||this.dialogObj.setProperties({cssClass:this.parent.cssClass}),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}}},a.prototype.insertAlt=function(t){if(!h(t.alt)){t.selection.restore(),this.parent.formatter.getUndoRedoStack().length===0&&this.parent.formatter.saveData();var e=t.alt.value;this.parent.formatter.process(this.parent,t.args,t.args,{altText:e,selectNode:t.selectNode,subCommand:t.args.item.subCommand}),this.dialogObj.hide({returnValue:!1})}},a.prototype.insertlink=function(t){if(t.selectNode[0].nodeName==="IMG"){var e=t.link.value;if(e===""){k([t.link],"e-error"),t.link.setSelectionRange(0,e.length),t.link.focus();return}this.isUrl(e)?O([t.link],"e-error"):e="http://"+e;var i=t.selfImage;if(i.parent.editorMode==="HTML"&&t.selection.restore(),i.parent.formatter.getUndoRedoStack().length===0&&i.parent.formatter.saveData(),t.selectNode[0].parentElement.nodeName==="A"){i.parent.formatter.process(i.parent,t.args,t.args,{url:e,target:i.checkBoxObj.checked?"_blank":null,ariaLabel:i.checkBoxObj.checked?this.i10n.getConstant("imageLinkAriaLabel"):null,selectNode:t.selectNode,subCommand:t.args.item.subCommand}),i.dialogObj.hide({returnValue:!0});return}i.parent.formatter.process(i.parent,t.args,t.args,{url:e,target:i.checkBoxObj.checked?"_blank":null,ariaLabel:i.checkBoxObj.checked?this.i10n.getConstant("imageLinkAriaLabel"):null,selectNode:t.selectNode,subCommand:t.args.item.subCommand,selection:t.selection});var n=b(t.selectNode[0],".e-img-caption");n&&F(".e-img-inner",n).focus(),n&&F(".e-img-inner",n).focus(),i.dialogObj.hide({returnValue:!1})}},a.prototype.isUrl=function(t){var e=RegExp,i=new e("(ftp|http|https)://(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(/|/([\\w#!:.?+=&%@\\-\\/]))?","gi");return i.test(t)},a.prototype.deleteImg=function(t,e){if(t.selectNode[0].nodeName==="IMG"){var i={element:t.selectNode[0],src:t.selectNode[0].getAttribute("src")};this.parent.formatter.getUndoRedoStack().length===0&&this.parent.formatter.saveData();var n=t.selection.range.startContainer;if(t.selection.range.startContainer.nodeName==="SPAN"&&n.classList.contains("e-img-wrap")&&n.parentElement.classList.contains("e-img-caption"))if(n=n.parentElement,h(n.previousSibling)){if(!h(n.nextSibling)){for(var s=n.nextSibling;s.nodeName!=="#text"&&s.nodeName!=="BR";)s=s.firstChild;this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),s,0)}}else{for(var r=n.previousSibling;r.nodeName!=="#text"&&r.nodeName!=="BR";)r=r.lastChild;this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),r,r.nodeName!=="BR"?r.textContent.length:0)}else t.selection.restore();this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,captionClass:et,subCommand:t.args.item.subCommand}),this.imageRemovePost(i.src),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup(),this.cancelResizeAction(),h(e)&&this.parent.trigger(sl,i)}},a.prototype.imageRemovePost=function(t){var e=this,i="";if(!(h(this.parent.insertImageSettings.removeUrl)||this.parent.insertImageSettings.removeUrl==="")){t.indexOf("http://")>-1||t.indexOf("https://")>-1?i=t:i=new URL(t,document.baseURI).href,this.removingImgName=i.replace(/^.*[\\/]/,"");var n=new XMLHttpRequest;n.addEventListener("readystatechange",function(){this.readyState===4&&this.status===200&&e.triggerPost(this.response)}),n.open("GET",i),n.responseType="blob",n.send()}},a.prototype.triggerPost=function(t){var e=this.parent.insertImageSettings.removeUrl;if(!(h(e)||e==="")){var i=new File([t],this.removingImgName),n=new wi(e,"POST",!0,null),r=new FormData;r.append("UploadFiles",i),n.send(r)}},a.prototype.caption=function(t){var e=t.selectNode[0];if(e.nodeName==="IMG"){t.selection.restore(),this.parent.formatter.getUndoRedoStack().length===0&&this.parent.formatter.saveData(),this.cancelResizeAction(),k([e],"e-rte-image");var i=t.args.item?t.args.item.subCommand:"Caption";if(!h(b(e,"."+et)))E(b(e,"."+et)),x.isIE&&(this.contentModule.getEditPanel().focus(),t.selection.restore()),e.parentElement.tagName==="A"?this.parent.formatter.process(this.parent,t.args,t.args,{insertElement:e.parentElement,selectNode:t.selectNode,subCommand:i}):this.parent.formatter.process(this.parent,t.args,t.args,{insertElement:e,selectNode:t.selectNode,subCommand:i});else{this.captionEle=this.parent.createElement("span",{className:et+" "+up+this.parent.getCssClass(!0),attrs:{contenteditable:"false",draggable:"false",style:"width:"+this.parent.insertImageSettings.width}});var n=this.parent.createElement("span",{className:"e-img-wrap"+this.parent.getCssClass(!0)}),r=this.parent.createElement("span",{className:"e-img-inner"+this.parent.getCssClass(!0),attrs:{contenteditable:"true"}}),s=t.selectNode[0].parentElement;s.tagName==="A"&&s.setAttribute("contenteditable","true"),n.appendChild(s.tagName==="A"?s:t.selectNode[0]),n.appendChild(r);var o=this.i10n.getConstant("imageCaption");r.innerHTML=o,this.captionEle.appendChild(n),e.classList.contains(Jt)&&k([this.captionEle],Wi),e.classList.contains(qt)&&k([this.captionEle],qt),e.classList.contains(yl)&&k([this.captionEle],yl),e.classList.contains(bl)&&k([this.captionEle],bl),e.classList.contains(Cl)&&k([this.captionEle],Cl),this.parent.formatter.process(this.parent,t.args,t.args,{insertElement:this.captionEle,selectNode:t.selectNode,subCommand:i}),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),r.childNodes[0],r.childNodes[0],0,r.childNodes[0].textContent.length)}this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),O([e],"e-img-focus"))}},a.prototype.imageSize=function(t){var e=this;if(t.selectNode[0].nodeName==="IMG"&&(this.imagDialog(t),!h(this.dialogObj))){var i=this.i10n.getConstant("imageSizeHeader"),n=this.i10n.getConstant("dialogUpdate"),r=this.imgsizeInput(t),s={args:t.args,selfImage:this,selection:t.selection,selectNode:t.selectNode};this.dialogObj.setProperties({width:"290px",header:i,content:r,buttons:[{click:function(o){e.insertSize(s)},buttonModel:{content:n,cssClass:"e-flat e-update-size"+this.parent.getCssClass(!0),isPrimary:!0}}],cssClass:this.dialogObj.cssClass+" e-rte-img-size-dialog"}),h(this.parent.cssClass)||this.dialogObj.setProperties({cssClass:this.parent.cssClass}),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}},a.prototype.break=function(t){if(t.selectNode[0].nodeName==="IMG"){var e=t.args.item.subCommand;this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,subCommand:e})}},a.prototype.inline=function(t){if(t.selectNode[0].nodeName==="IMG"){var e=t.args.item.subCommand;this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,subCommand:e})}},a.prototype.alignImage=function(t){var e=t.args.item.subCommand;this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,subCommand:e})},a.prototype.clearDialogObj=function(){this.uploadObj&&!this.uploadObj.isDestroyed&&(this.uploadObj.destroy(),E(this.uploadObj.element),this.uploadObj=null),this.checkBoxObj&&!this.checkBoxObj.isDestroyed&&(this.checkBoxObj.destroy(),E(this.checkBoxObj.element),this.checkBoxObj=null),this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),E(this.popupObj.element),this.popupObj=null),this.widthNum&&!this.widthNum.isDestroyed&&(this.widthNum.destroy(),E(this.widthNum.element),this.widthNum=null),this.heightNum&&!this.heightNum.isDestroyed&&(this.heightNum.destroy(),E(this.heightNum.element),this.heightNum=null),this.browseButton&&!this.browseButton.isDestroyed&&(this.browseButton.destroy(),E(this.browseButton.element),this.browseButton=null),this.dialogObj&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),E(this.dialogObj.element),this.dialogObj=null)},a.prototype.imagDialog=function(t){var e=this;if(this.dialogObj){this.dialogObj.hide({returnValue:!0});return}var i=this.parent.createElement("div",{className:"e-rte-img-dialog"+this.parent.getCssClass(!0),id:this.rteID+"_image"});this.parent.rootContainer.appendChild(i);var n=this.i10n.getConstant("dialogInsert"),r=this.i10n.getConstant("dialogCancel"),s=this.i10n.getConstant("imageHeader"),o=t.selection,l={selfImage:this,selection:t.selection,args:t.args,selectParent:t.selectParent},c={header:s,cssClass:Oe+this.parent.getCssClass(!0),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:x.isDevice?"290px":"340px",isModal:x.isDevice,buttons:[{click:this.insertImageUrl.bind(l),buttonModel:{content:n,cssClass:"e-flat e-insertImage"+this.parent.getCssClass(!0),isPrimary:!0,disabled:this.parent.editorMode!=="Markdown"}},{click:function(m){e.cancelDialog(m)},buttonModel:{cssClass:"e-flat e-cancel"+this.parent.getCssClass(!0),content:r}}],target:x.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(m){e.isImgUploaded&&(e.dialogObj.element.querySelector(".e-file-abort-btn")?e.dialogObj.element.querySelector(".e-file-abort-btn").click():e.uploadObj.remove()),e.parent.isBlur=!1,m&&!h(m.event)&&m.event.returnValue&&(e.parent.editorMode==="HTML"?o.restore():e.parent.formatter.editorManager.markdownSelection.restore(e.parent.contentModule.getEditPanel())),e.clearDialogObj(),e.dialogRenderObj.close(m)}},p=this.parent.createElement("div",{className:"e-img-content"+this.parent.getCssClass(!0)});(!h(this.parent.insertImageSettings.path)&&this.parent.editorMode==="Markdown"||this.parent.editorMode==="HTML")&&p.appendChild(this.imgUpload(t));var d=this.parent.createElement("div",{className:"e-linkheader"+this.parent.getCssClass(!0)}),u=this.i10n.getConstant("imageLinkHeader");this.parent.editorMode==="HTML"?d.innerHTML=u:d.innerHTML=this.i10n.getConstant("mdimageLink"),p.appendChild(d),p.appendChild(this.imageUrlPopup(t)),t.selectNode&&t.selectNode[0].nodeName==="IMG"&&(c.header=this.parent.localeObj.getConstant("editImageHeader")),c.content=p,this.dialogObj=this.dialogRenderObj.render(c),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(i),!h(this.dialogObj)&&(t.selectNode&&t.selectNode[0].nodeName==="IMG"&&t.name==="insertImage"&&(this.dialogObj.element.querySelector(".e-insertImage").textContent=this.parent.localeObj.getConstant("dialogUpdate")),i.style.maxHeight="inherit",this.quickToolObj&&(this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),h(t.selectParent)||O([t.selectParent[0]],"e-img-focus")),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup(),this.quickToolObj.textQTBar&&this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)&&this.quickToolObj.textQTBar.hidePopup()))},a.prototype.cancelDialog=function(t){this.parent.isBlur=!1,this.dialogObj.hide({returnValue:!0})},a.prototype.onDocumentClick=function(t){var e=t.target;if(!h(this.contentModule.getEditPanel())&&(e.nodeName==="IMG"&&(this.imgEle=e),!!this.parent)){if(e.nodeName!=="#document"&&(this.parent.currentTarget=t.target),!h(this.dialogObj)&&(!b(e,"[id='"+this.dialogObj.element.id+"']")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(t.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(t.target)&&!b(e,"#"+this.parent.getID()+"_toolbar_Image")&&!e.querySelector("#"+this.parent.getID()+"_toolbar_Image"))&&(t.offsetX>t.target.clientWidth||t.offsetY>t.target.clientHeight||(this.parent.notify(Cn,{closedBy:"outside click"}),this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,kn(this.parent.element,"focusout"))),!(this.parent.iframeSettings.enable&&!h(this.parent.currentTarget)&&this.parent.currentTarget.nodeName==="IMG")&&t.target.tagName!=="IMG"&&this.imgResizeDiv&&!(this.quickToolObj&&this.quickToolObj.imageQTBar&&this.quickToolObj.imageQTBar.element.contains(t.target))&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.contains(t.target)&&this.cancelResizeAction(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&!(this.parent.iframeSettings.enable&&this.parent.currentTarget.nodeName==="IMG")&&(e.tagName!=="IMG"&&this.removeResizeEle(),e.tagName!=="IMG"&&!h(this.imgEle)?this.imgEle.style.outline="":!h(this.prevSelectedImgEle)&&this.prevSelectedImgEle!==e&&(this.prevSelectedImgEle.style.outline="")),e.tagName!=="IMG")for(var i=this.contentModule.getEditPanel().querySelectorAll("img"),n=0;n<i.length;n++)O([i[n]],"e-img-focus"),O([i[n]],"e-resize");this.parent.inlineMode.enable&&e&&this.dialogObj&&!b(e,"#"+this.dialogObj.element.id)&&this.dialogObj.hide()}},a.prototype.removeResizeEle=function(){this.isResizeBind=!0,C.remove(this.contentModule.getDocument(),x.touchMoveEvent,this.resizing),C.remove(this.contentModule.getDocument(),x.touchEndEvent,this.resizeEnd),E(this.contentModule.getEditPanel().querySelector(".e-img-resize"))},a.prototype.onWindowResize=function(){!h(this.contentModule)&&!h(this.contentModule.getEditPanel().querySelector(".e-img-resize"))&&this.cancelResizeAction()},a.prototype.imageUrlPopup=function(t){var e=this,i=this.parent.createElement("div",{className:"imgUrl"+this.parent.getCssClass(!0)}),n=this.i10n.getConstant("imageUrl");if(this.inputUrl=this.parent.createElement("input",{className:"e-input e-img-url"+this.parent.getCssClass(!0),attrs:{placeholder:n,spellcheck:"false","aria-label":this.i10n.getConstant("imageLinkHeader")}}),this.inputUrl.addEventListener("input",function(){h(e.inputUrl)||(e.inputUrl.value.length===0?e.dialogObj.getButtons(0).element.disabled=!0:e.dialogObj.getButtons(0).element.removeAttribute("disabled"))}),t.selectNode&&t.selectNode[0].nodeName==="IMG"){var r=new RegExp(/([^\S]|^)(((https?:\/\/)|(www\.))(\S+))/gi);this.inputUrl.value=t.selectNode[0].src.match(r)?t.selectNode[0].src:""}return i.appendChild(this.inputUrl),i},a.prototype.insertImageUrl=function(t){var e=this.selfImage;e.isImgUploaded=!1;var i=e.inputUrl.value;if(e.parent.editorMode==="Markdown"&&i===""&&(i="http://"),e.parent.formatter.getUndoRedoStack().length===0&&e.parent.formatter.saveData(),!h(e.uploadUrl)&&e.uploadUrl.url!=="")e.uploadUrl.cssClass=e.parent.insertImageSettings.display==="inline"?Jt:qt,e.dialogObj.hide({returnValue:!1}),e.parent.formatter.process(e.parent,this.args,this.args.originalEvent,e.uploadUrl),e.uploadUrl.url="",e.contentModule.getEditPanel().querySelector(".e-img-resize")&&(e.imgEle.style.outline="",e.removeResizeEle());else if(i!==""){if(e.parent.editorMode==="HTML"&&h(b(this.selection.range.startContainer.parentNode,"[id='"+e.contentModule.getPanel().id+"']"))){e.contentModule.getEditPanel().focus();var n=e.parent.formatter.editorManager.nodeSelection.getRange(e.contentModule.getDocument());this.selection=e.parent.formatter.editorManager.nodeSelection.save(n,e.contentModule.getDocument()),this.selectParent=e.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(n)}var r=/[\w-]+.(jpg|png|jpeg|gif)/g,s=!h(i.match(r))&&e.parent.editorMode==="HTML"?i.match(r)[0]:"",o={cssClass:e.parent.insertImageSettings.display==="inline"?Jt:qt,url:i,selection:this.selection,altText:s,selectParent:this.selectParent,width:{width:e.parent.insertImageSettings.width,minWidth:e.parent.insertImageSettings.minWidth,maxWidth:e.parent.getInsertImgMaxWidth()},height:{height:e.parent.insertImageSettings.height,minHeight:e.parent.insertImageSettings.minHeight,maxHeight:e.parent.insertImageSettings.maxHeight}};e.parent.formatter.process(e.parent,this.args,this.args.originalEvent,o),e.dialogObj.hide({returnValue:!1})}},a.prototype.imgsizeInput=function(t){var e=this,i=t.selectNode[0],n=this.i10n.getConstant("imageHeight"),r=this.i10n.getConstant("imageWidth"),s=this.parent.createElement("div",{className:"e-img-sizewrap"+this.parent.getCssClass(!0)}),o=h(this.changedWidthValue)&&(i.style.width.toString()==="auto"||i.style.width!=="")?i.style.width:h(this.changedWidthValue)?parseInt(i.getClientRects()[0].width.toString(),10).toString():this.changedWidthValue,l=h(this.changedHeightValue)&&(i.style.height.toString()==="auto"||i.style.height!=="")?i.style.height:h(this.changedHeightValue)?parseInt(i.getClientRects()[0].height.toString(),10).toString():this.changedHeightValue;i.style.width===""&&(o="auto"),i.style.height===""&&(l="auto"),this.changedWidthValue=null,this.changedHeightValue=null;var c='<div class="e-rte-label'+this.parent.getCssClass(!0)+'"><label>'+r+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" id="imgwidth" class="e-img-width'+this.parent.getCssClass(!0)+'"/></div><div class="e-rte-label'+this.parent.getCssClass(!0)+'"><label>'+n+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"> <input type="text" id="imgheight" class="e-img-height'+this.parent.getCssClass(!0)+'"/></div>',p=xi(c);return p.getElementById("imgwidth").setAttribute("value",o),p.getElementById("imgheight").setAttribute("value",l),s.appendChild(p),this.widthNum=new Hs({value:z(o),enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass(),input:function(d){e.inputWidthValue=z(e.inputValue(d.value))}}),this.widthNum.createElement=this.parent.createElement,this.widthNum.appendTo(s.querySelector("#imgwidth")),this.heightNum=new Hs({value:z(l),enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass(),input:function(d){e.inputHeightValue=z(e.inputValue(d.value))}}),this.heightNum.createElement=this.parent.createElement,this.heightNum.appendTo(s.querySelector("#imgheight")),s},a.prototype.inputValue=function(t){return t==="auto"||t.indexOf("%")!==-1||t.indexOf("px")!==-1||t.match(/(\d+)/)?t:"auto"},a.prototype.insertSize=function(t){t.selection.restore();var e=t.selfImage;e.parent.formatter.getUndoRedoStack().length===0&&e.parent.formatter.saveData();var i=e.dialogObj.element;this.changedWidthValue=this.inputWidthValue,this.changedHeightValue=this.inputHeightValue;var n=i.querySelector(".e-img-width").value,r=i.parentElement.querySelector(".e-img-height").value;e.parent.formatter.process(this.parent,t.args,t.args,{width:n,height:r,selectNode:t.selectNode,subCommand:t.args.item.subCommand}),this.imgResizeDiv&&e.imgResizePos(t.selectNode[0],this.imgResizeDiv),e.dialogObj.hide({returnValue:!0})},a.prototype.insertImage=function(t){if(this.imagDialog(t),!h(this.dialogObj)){this.dialogObj.element.style.maxHeight="inherit";var e=this.dialogObj.element.querySelector(".e-img-content");!h(this.parent.insertImageSettings.path)&&this.parent.editorMode==="Markdown"||this.parent.editorMode==="HTML"?document.getElementById(this.rteID+"_insertImage").focus():e.querySelector(".e-img-url").focus()}},a.prototype.imgUpload=function(t){var e=this,i,n,r=this,s=r.parent.iframeSettings.enable;if(r.parent.editorMode==="HTML"&&(!s&&h(b(t.selection.range.startContainer.parentNode,"[id='"+this.parent.contentModule.getPanel().id+"']"))||s&&!be(t.selection.range.startContainer.parentNode.ownerDocument.querySelector("body"),"e-lib"))){this.contentModule.getEditPanel().focus();var o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());i=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)}else i=t.selection,n=t.selectParent;var l=this.parent.createElement("div",{className:"e-img-uploadwrap e-droparea"+this.parent.getCssClass(!0)}),c=this.i10n.getConstant("imageDeviceUploadMessage"),p=this.i10n.getConstant("imageUploadMessage"),d=this.parent.createElement("span",{className:"e-droptext"+this.parent.getCssClass(!0)}),u=this.parent.createElement("span",{className:"e-rte-upload-text"+this.parent.getCssClass(!0),innerHTML:x.isDevice?c:p});d.appendChild(u);var m=this.parent.createElement("button",{className:"e-browsebtn"+this.parent.getCssClass(!0),id:this.rteID+"_insertImage",attrs:{autofocus:"true",type:"button"}});d.appendChild(m),l.appendChild(d);var f=this.i10n.getConstant("browse");this.browseButton=new En({content:f,enableRtl:this.parent.enableRtl}),this.browseButton.isStringTemplate=!0,this.browseButton.createElement=this.parent.createElement,this.browseButton.appendTo(m);var g=x.isDevice?d:m;C.add(g,"click",this.fileSelect,this);var y=this.parent.createElement("input",{id:this.rteID+"_upload",attrs:{type:"File",name:"UploadFiles"},className:this.parent.getCssClass()});l.appendChild(y);var S,T,L=null;return this.uploadObj=new Us({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},dropArea:d,multiple:!1,enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass(),allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),selected:function(w){r.isImgUploaded=!0,T=w,w.filesData,e.parent.trigger($c,T,function(N){if(!N.cancel&&(e.checkExtension(N.filesData[0]),S=N.filesData[0].name.replace(/\.[a-zA-Z0-9]+$/,""),e.parent.editorMode==="HTML"&&h(e.parent.insertImageSettings.path))){var M=new FileReader;M.addEventListener("load",function(I){var A=e.parent.insertImageSettings.saveFormat==="Base64"?M.result:URL.createObjectURL(Sr(M.result));r.uploadUrl={url:A,selection:i,altText:S,selectParent:n,width:{width:r.parent.insertImageSettings.width,minWidth:r.parent.insertImageSettings.minWidth,maxWidth:r.parent.getInsertImgMaxWidth()},height:{height:r.parent.insertImageSettings.height,minHeight:r.parent.insertImageSettings.minHeight,maxHeight:r.parent.insertImageSettings.maxHeight}},r.inputUrl.setAttribute("disabled","true"),h(r.parent.insertImageSettings.saveUrl)&&e.isAllowedTypes&&!h(e.dialogObj)&&e.dialogObj.getButtons(0).element.removeAttribute("disabled")}),M.readAsDataURL(N.filesData[0].rawFile)}})},beforeUpload:function(w){e.parent.trigger(bo,w)},uploading:function(w){e.parent.isServerRendered||e.parent.trigger(fo,w)},success:function(w){w.detectImageSource=Sn.Uploaded,e.parent.trigger(mo,w,function(N){if(!h(e.parent.insertImageSettings.path)){var M=e.parent.insertImageSettings.path+N.file.name;!h(L)&&N.operation==="upload"&&e.uploadObj.remove(L),r.uploadUrl={url:M,selection:i,altText:S,selectParent:n,width:{width:r.parent.insertImageSettings.width,minWidth:r.parent.insertImageSettings.minWidth,maxWidth:r.parent.getInsertImgMaxWidth()},height:{height:r.parent.insertImageSettings.height,minHeight:r.parent.insertImageSettings.minHeight,maxHeight:r.parent.insertImageSettings.maxHeight}},r.inputUrl.setAttribute("disabled","true"),L=N.file}N.operation==="upload"&&!h(e.dialogObj)&&e.dialogObj.getButtons(0).element.removeAttribute("disabled")})},failure:function(w){e.parent.trigger(go,w)},removing:function(w){e.parent.trigger(rh,w,function(N){r.isImgUploaded=!1,e.dialogObj.getButtons(0).element.disabled=!0,r.inputUrl.removeAttribute("disabled"),r.uploadUrl&&(r.uploadUrl.url="")})}}),this.uploadObj.isStringTemplate=!0,this.uploadObj.createElement=this.parent.createElement,this.uploadObj.appendTo(y),l},a.prototype.checkExtension=function(t){this.uploadObj.allowedExtensions&&(this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(("."+t.type).toLocaleLowerCase())===-1?(this.dialogObj.getButtons(0).element.setAttribute("disabled","disabled"),this.isAllowedTypes=!1):this.isAllowedTypes=!0)},a.prototype.fileSelect=function(){return this.dialogObj.element.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1},a.prototype.dragStart=function(t){if(t.target.nodeName==="IMG")this.parent.trigger(Re,t,function(e){e.cancel?t.preventDefault():(t.dataTransfer.effectAllowed="copyMove",t.target.classList.add(Wn))});else return!0},a.prototype.dragEnter=function(t){t.dataTransfer.dropEffect="copy",t.preventDefault()},a.prototype.dragOver=function(t){if(x.info.name==="edge"&&t.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||x.isIE&&t.dataTransfer.types[0]==="Files")t.preventDefault();else return!0},a.prototype.dragDrop=function(t){var e=this;this.parent.trigger(Jc,t,function(i){var n=e.parent.inputElement.ownerDocument.querySelector("."+Wn),r=n&&n.tagName==="IMG"||i.dataTransfer.files.length>0;!i.cancel&&r?e.parent.trigger(Re,i,function(s){if(s.cancel)i.preventDefault();else{if(b(i.target,"#"+e.parent.getID()+"_toolbar")||e.parent.inputElement.contentEditable==="false"){i.preventDefault();return}e.parent.element.querySelector("."+Hp)&&E(e.imgResizeDiv),i.preventDefault();var o=void 0;e.contentModule.getDocument().caretRangeFromPoint?o=e.contentModule.getDocument().caretRangeFromPoint(i.clientX,i.clientY):i.rangeParent?(o=e.contentModule.getDocument().createRange(),o.setStart(i.rangeParent,i.rangeOffset)):o=e.getDropRange(i.clientX,i.clientY),e.parent.notify(kr,{range:o});var l=e.parent.element.querySelector("."+Fp);if(l)return;e.insertDragImage(i)}}):r&&i.preventDefault()})},a.prototype.getDropRange=function(t,e){var i=this.contentModule.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),i);var n=this.contentModule.getDocument().elementFromPoint(t,e),r=n.childNodes.length>0?n.childNodes[0]:n,s=0;if(this.parent.inputElement.firstChild.innerHTML==="<br>")i.setStart(r,s),i.setEnd(r,s);else{var o=void 0;do s++,i.setStart(r,s),i.setEnd(r,s+1),o=i.getBoundingClientRect();while(o.left<t&&s<r.length-1)}return i},a.prototype.insertDragImage=function(t){var e=this;t.preventDefault();var i=this.parent.element.querySelector(""+Ho);this.parent.notify(vo,{args:t}),i&&i.classList.add(Xi);var n=this.parent.inputElement.ownerDocument.querySelector("."+Wn);if(t.dataTransfer.files.length>0&&n===null){if(t.dataTransfer.files.length>1)return;for(var r=t.dataTransfer.files,s=r[0].name,o=s.substring(s.lastIndexOf(".")),l=this.parent.insertImageSettings.allowedTypes,c=0;c<l.length;c++)if(o.toLocaleLowerCase()===l[c].toLowerCase())if(this.parent.insertImageSettings.saveUrl)this.onSelect(t);else{var p={args:t,text:"",file:r[0]};t.preventDefault(),this.imagePaste(p)}}else{var d=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());if(n&&n.tagName==="IMG"){n.nextElementSibling&&n.nextElementSibling.classList.contains(qp)?d.insertNode(n.parentElement.parentElement):d.insertNode(n),n.classList.remove(Wn);var u={elements:[n]};n.addEventListener("load",function(){e.parent.trigger(ct,u)}),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());var p=t;this.resizeStart(p,n),this.hideImageQuickToolbar()}}},a.prototype.onSelect=function(t){var e=this,i=this,n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),r=this.parent.createElement("ul",{className:jp});this.parent.rootContainer.appendChild(r);var s={name:"",size:0,status:"",statusCode:"",type:"",rawFile:t.dataTransfer.files[0],validationMessages:{}},o=this.parent.createElement("IMG");o.style.opacity="0.5",o.classList.add(Io),o.classList.add(Jt),o.classList.add(Ap);var l=s.rawFile,c=new FileReader;c.addEventListener("load",function(){var d=URL.createObjectURL(Sr(c.result));o.src=i.parent.insertImageSettings.saveFormat==="Blob"?d:c.result}),l&&c.readAsDataURL(l),n.insertNode(o),this.uploadMethod(t,o);var p={elements:[o]};o.addEventListener("load",function(){e.parent.trigger(ct,p)}),E(r)},a.prototype.uploadMethod=function(t,e){var i=this,n=!1,r=this,s=this.parent.createElement("div");this.parent.rootContainer.appendChild(s);var o=this.parent.createElement("input",{id:this.rteID+"_upload",attrs:{type:"File",name:"UploadFiles"}}),l=this.parent.iframeSettings.enable?-50:-90;this.popupObj=new At(s,{relateTo:e,height:"85px",width:"300px",offsetY:l,content:o,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(d){i.parent.isBlur=!1,i.popupObj.destroy(),E(i.popupObj.element),i.popupObj=null,i.parent.inlineMode.enable||i.parent.toolbarModule.baseToolbar.toolbarObj.disable(!1)}}),this.popupObj.element.style.display="none",k([this.popupObj.element],Ho),k([this.popupObj.element],ah),h(this.parent.cssClass)||k([this.popupObj.element],this.parent.cssClass.replace(/\s+/g," ").trim().split(" "));var c=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),p=t.dataTransfer.files[0].size>1e6?300:100;this.imageDragPopupTime=setTimeout(function(){r.refreshPopup(e)},p),this.uploadObj=new Us({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},cssClass:lh+this.parent.getCssClass(!0),dropArea:this.parent.element,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),removing:function(){i.parent.inputElement.contentEditable="true",n=!1,E(e),i.popupObj.close()},canceling:function(){i.parent.inputElement.contentEditable="true",n=!1,E(e),i.popupObj.close(),i.quickToolObj.imageQTBar.hidePopup(),i.uploadCancelTime=setTimeout(function(){i.uploadObj.destroy()},900)},beforeUpload:function(d){i.parent.trigger(bo,d),i.parent.inlineMode.enable||i.parent.toolbarModule.baseToolbar.toolbarObj.disable(!0)},uploading:function(d){i.parent.isServerRendered||(n=!0,i.parent.trigger(fo,d,function(u){u.cancel?(h(e)||E(e),h(i.popupObj.element)||E(i.popupObj.element)):i.parent.inputElement.contentEditable="false"}))},selected:function(d){n&&(d.cancel=!0)},failure:function(d){n=!1,i.parent.inputElement.contentEditable="true";var u={args:t,type:"Images",isNotify:void 0,elements:e};i.uploadFailureTime=setTimeout(function(){i.uploadFailure(e,u,d)},900)},success:function(d){if(d.operation!=="cancel"){n=!1,i.parent.inputElement.contentEditable="true";var u={args:t,type:"Images",isNotify:void 0,elements:e};i.uploadSuccessTime=setTimeout(function(){i.uploadSuccess(e,t,u,d)},900)}}}),this.uploadObj.appendTo(this.popupObj.element.childNodes[0]),this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap").style.display="none",c.selectNodeContents(e),this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),c)},a.prototype.refreshPopup=function(t){var e=this.parent.iframeSettings.enable?this.parent.element.offsetTop+t.offsetTop:t.offsetTop,i=this.parent.element.offsetTop+this.parent.element.offsetHeight;e>i?(this.popupObj.relateTo=this.parent.inputElement,this.popupObj.offsetY=this.parent.iframeSettings.enable?-30:-65,this.popupObj.element.style.display="block"):this.popupObj&&(this.popupObj.refreshPosition(t),this.popupObj.element.style.display="block")},a.prototype.uploadFailure=function(t,e,i){E(t),this.popupObj&&this.popupObj.close(),this.parent.trigger(go,i),this.uploadObj.destroy()},a.prototype.uploadSuccess=function(t,e,i,n){var r=this;t.style.opacity="1",t.classList.add(ar),n.element=t,n.detectImageSource=Sn.Dropped,this.parent.trigger(mo,n,function(s){if(!h(r.parent.insertImageSettings.path)){var o=r.parent.insertImageSettings.path+s.file.name;t.src=o,t.setAttribute("alt",s.file.name)}}),this.popupObj&&(this.popupObj.close(),this.uploadObj.destroy()),this.showImageQuickToolbar(i),this.resizeStart(e,t)},a.prototype.imagePaste=function(t){var e=this;if(t.text.length===0&&!h(t.file)){var i=this,n=new FileReader;t.args.preventDefault(),n.addEventListener("load",function(r){var s={cssClass:i.parent.insertImageSettings.display==="inline"?Jt:qt,url:e.parent.insertImageSettings.saveFormat==="Base64"||!h(t.callBack)?n.result:URL.createObjectURL(Sr(n.result)),width:{width:i.parent.insertImageSettings.width,minWidth:i.parent.insertImageSettings.minWidth,maxWidth:i.parent.getInsertImgMaxWidth()},height:{height:i.parent.insertImageSettings.height,minHeight:i.parent.insertImageSettings.minHeight,maxHeight:i.parent.insertImageSettings.maxHeight}};if(h(t.callBack))i.parent.formatter.process(i.parent,{item:{command:"Images",subCommand:"Image"}},t.args,s),e.showPopupToolBar(t,s);else{t.callBack(s);return}}),n.readAsDataURL(t.file)}},a.prototype.showPopupToolBar=function(t,e){var i=this,n='img[src="'+e.url+'"]',r=this.parent.inputElement.querySelector(n);this.parent.quickToolbarModule.createQTBar("Image","MultiRow",this.parent.quickToolbarSettings.image,X.ImageToolbar);var s={args:t.args,type:"Images",isNotify:void 0,elements:r};r&&(this.showImageQTbarTime=setTimeout(function(){i.showImageQuickToolbar(s),i.resizeStart(t.args,r)},0))},a.prototype.destroy=function(){this.isDestroyed||(this.prevSelectedImgEle=void 0,h(this.imageQTPopupTime)||(clearTimeout(this.imageQTPopupTime),this.imageQTPopupTime=null),h(this.imageDragPopupTime)||(clearTimeout(this.imageDragPopupTime),this.imageDragPopupTime=null),h(this.uploadCancelTime)||(clearTimeout(this.uploadCancelTime),this.uploadCancelTime=null),h(this.uploadFailureTime)||(clearTimeout(this.uploadFailureTime),this.uploadFailureTime=null),h(this.showImageQTbarTime)||(clearTimeout(this.showImageQTbarTime),this.showImageQTbarTime=null),h(this.uploadSuccessTime)||(clearTimeout(this.uploadSuccessTime),this.uploadSuccessTime=null),this.removeEventListener(),this.clearDialogObj(),this.cancelResizeAction(),this.isDestroyed=!0)},a.prototype.getModuleName=function(){return"image"},a}(),oa="keydown",aa="action",la="format-type",Ee="keydown-handler",ha="list-type",hi="keyup-handler",ki="keyup",Tn="model_changed_plugin",Ar="model_changed",ca="ms_word_cleanup_plugin",pa="ms_word_cleanup",da="onBegin",ua="actionBegin",fa="format_painter_actions",kd="blockquote_list_handled",ma="emoji_picker_actions",Hl="mouseDown",Fl="destroy",ie="internal_destroy",Dd=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kn=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},xd={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187,"<":188,">":190},ga=function(a){Dd(t,a);function t(i,n){var r=a.call(this,n,i)||this;return r.keyPressHandler=function(s){for(var o=s.altKey,l=s.ctrlKey,c=s.shiftKey,p=s.metaKey,d=s.which,u=Object.keys(r.keyConfigs),m=0,f=u;m<f.length;m++)for(var g=f[m],y=r.keyConfigs[""+g].split(","),S=0,T=y;S<T.length;S++){var L=T[S],w=e.getKeyConfigData(L.trim());o===w.altKey&&(l===w.ctrlKey||p)&&c===w.shiftKey&&d===w.keyCode&&(s.action=g)}r.keyAction&&r.keyAction(s)},r.bind(),r}e=t,t.prototype.destroy=function(){this.unwireEvents(),a.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(i){if(i in this.configCache)return this.configCache[""+i];var n=i.toLowerCase().split("+"),r={altKey:n.indexOf("alt")!==-1,ctrlKey:n.indexOf("ctrl")!==-1,shiftKey:n.indexOf("shift")!==-1,keyCode:null};return n[n.length-1].length>1&&Number(n[n.length-1])?r.keyCode=Number(n[n.length-1]):r.keyCode=e.getKeyCode(n[n.length-1]),e.configCache[""+i]=r,r},t.getKeyCode=function(i){return xd[""+i]||i.toUpperCase().charCodeAt(0)};var e;return t.configCache={},Kn([v({})],t.prototype,"keyConfigs",void 0),Kn([v("keyup")],t.prototype,"eventName",void 0),Kn([P()],t.prototype,"keyAction",void 0),t=e=Kn([Vt],t),t}(Gh),Nd=function(){function a(t,e){this.parent=t;var i=e;this.rendererFactory=i.getService("rendererFactory"),this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(Ni,this.sourceCode,this),this.parent.on(je,this.onInitialEnd,this),this.parent.on(fn,this.updateSourceCode,this),this.parent.on(Y,this.destroy,this),this.parent.on(st,this.moduleDestroy,this)},a.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on(Ee,this.onKeyDown,this)},a.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.off(Ni,this.sourceCode),this.parent.off(fn,this.updateSourceCode),this.parent.off(je,this.onInitialEnd),this.parent.off(Y,this.destroy),this.parent.off(st,this.moduleDestroy),this.parent.formatter.editorManager.observer.off(Ee,this.onKeyDown)},a.prototype.getSourceCode=function(){return this.parent.createElement("textarea",{className:ri+this.parent.getCssClass(!0)})},a.prototype.wireEvent=function(t){this.keyboardModule=new ga(t,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),C.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},a.prototype.unWireEvent=function(){this.previewElement&&C.remove(this.previewElement,"mousedown",this.mouseDownHandler),this.keyboardModule&&!this.keyboardModule.isDestroyed&&this.keyboardModule.destroy()},a.prototype.wireBaseKeyDown=function(){this.parent.keyboardModule=new ga(this.contentModule.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},a.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},a.prototype.mouseDownHandler=function(t){this.parent.notify(mn,{args:t})},a.prototype.previewKeyDown=function(t){switch(t.action){case"html-source":this.updateSourceCode(t),t.preventDefault();break;case"toolbar-focus":if(this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()){var e=this.parent.getToolbarElement().querySelector(".e-toolbar-item:not(.e-overlay)[title]");e.firstElementChild.removeAttribute("tabindex"),e.firstElementChild.focus()}break}},a.prototype.onKeyDown=function(t){switch(t.event.action){case"html-source":t.event.preventDefault(),this.sourceCode(t),t.callBack({requestType:"SourceCode",editorMode:"HTML",event:t.event});break}},a.prototype.sourceCode=function(t){var e=this;this.parent.notify(xr,{}),this.parent.isBlur=!1,this.parent.trigger(Re,{requestType:"SourceCode",targetItem:"SourceCode",args:t,cancel:!1},function(i){if(!i.cancel){var n=re("."+zt,e.parent.element);e.contentModule=e.rendererFactory.getRenderer(X.Content);var r=e.parent.inputElement.getBoundingClientRect().height;e.parent.rootContainer.classList.add("e-source-code-enabled"),e.parent.notify(en,{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:e.parent.getBaseToolbarObject()}),h(e.previewElement)&&(e.previewElement=e.getSourceCode()),e.parent.updateValueData();var s=void 0;h(e.parent.element.querySelector("#"+e.parent.getID()+"_source-view"))?s=e.parent.createElement("div",{className:"e-source-content",id:e.parent.getID()+"_source-view",attrs:{style:"height:"+r+"px"}}):(s=e.parent.element.querySelector("#"+e.parent.getID()+"_source-view"),s.style.height=r+"px"),s.appendChild(e.previewElement),e.parent.rootContainer.appendChild(s),e.getPanel().value=e.getTextAreaValue(),e.parent.isBlur=!1,e.parent.disableToolbarItem(e.parent.toolbarSettings.items),e.parent.enableToolbarItem("SourceCode"),e.parent.getToolbar()&&O([e.parent.getToolbar()],[Ao]),O(n,[ti]),e.wireEvent(e.previewElement),e.unWireBaseKeyDown(),e.previewElement.focus(),e.parent.updateValue(),e.parent.trigger(ct,{requestType:"SourceCode",targetItem:"SourceCode",args:t}),e.parent.invokeChangeEvent(),!h(e.parent.saveInterval)&&e.parent.saveInterval>0&&e.parent.autoSaveOnIdle&&(e.codeViewTimeInterval=setInterval(function(){e.parent.notify(Oo,{})},e.parent.saveInterval))}})},a.prototype.updateSourceCode=function(t){var e=this;this.parent.isBlur=!1,this.parent.trigger(Re,{requestType:"Preview",targetItem:"Preview",args:t,cancel:!1},function(i){if(!i.cancel){e.parent.rootContainer.classList.remove("e-source-code-enabled");var n=e.getPanel();e.parent.notify(en,{targetItem:"Preview",updateItem:"SourceCode",baseToolbar:e.parent.getBaseToolbarObject()});var r=e.parent.serializeValue(n.value),s=void 0;r===null||r===""?e.parent.enterKey==="DIV"?s="<div><br/></div>":e.parent.enterKey==="BR"?s="<br/>":s="<p><br/></p>":s=r,e.contentModule.getEditPanel().innerHTML=s,e.parent.isBlur=!1,e.parent.enableToolbarItem(e.parent.toolbarSettings.items),e.parent.getToolbar()&&O([e.parent.getToolbar()],[Ao]),e.unWireEvent(),e.wireBaseKeyDown(),e.contentModule.getEditPanel().focus(),e.parent.updateValue(),e.parent.trigger(ct,{requestType:"Preview",targetItem:"Preview",args:t}),e.parent.formatter.enableUndo(e.parent),e.parent.addAudioVideoWrapper(),clearTimeout(e.codeViewTimeInterval),e.parent.invokeChangeEvent(),e.parent.notify(pn,{})}})},a.prototype.getTextAreaValue=function(){return this.contentModule.getEditPanel().innerHTML==="<p><br></p>"||this.contentModule.getEditPanel().innerHTML==="<div><br></div>"||this.contentModule.getEditPanel().innerHTML==="<br>"||this.contentModule.getEditPanel().childNodes.length===1&&this.contentModule.getEditPanel().childNodes[0].tagName==="P"&&this.contentModule.getEditPanel().innerHTML.length===7||this.contentModule.getEditPanel().childNodes[0].tagName==="DIV"&&this.contentModule.getEditPanel().innerHTML.length===11?"":this.parent.value},a.prototype.getPanel=function(){return this.parent.element&&this.parent.element.querySelector(".e-rte-srctextarea")},a.prototype.destroy=function(){h(this.parent)||this.removeEventListener()},a.prototype.moduleDestroy=function(){this.parent=null},a}(),Od=function(){function a(t,e){this.ensureInsideTableList=!0,this.pageX=null,this.pageY=null,this.moveEle=null,this.currentColumnResize="",this.resizeEndTime=0,this.isTableMoveActive=!1,this.isResizeBind=!0,this.parent=t,this.rteID=t.element.id,this.l10n=e.getService("rteLocale"),this.rendererFactory=e.getService("rendererFactory"),this.dialogRenderObj=e.getService("dialogRenderObject"),this.addEventListener(),this.isDestroyed=!1}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ao,this.renderDlgContent,this),this.parent.on(je,this.afterRender,this),this.parent.on(bn,this.afterRender,this),this.parent.on(Lo,this.showDialog,this),this.parent.on(wo,this.closeDialog,this),this.parent.on(oi,this.docClick,this),this.parent.on(ht,this.onIframeMouseDown,this),this.parent.on(wt,this.editAreaClickHandler,this),this.parent.on(ai,this.clearDialogObj,this),this.parent.on(lo,this.onToolbarAction,this),this.parent.on(si,this.dropdownSelect,this),this.parent.on(we,this.keyDown,this),this.parent.on(Ke,this.keyUp,this),this.parent.on(dn,this.selectionTable,this),this.parent.on(Gs,this.tableModulekeyUp,this),this.parent.on(Le,this.setCssClass,this),this.parent.on(Y,this.destroy,this),this.parent.on(st,this.moduleDestroy,this),this.parent.on(No,this.afterKeyDown,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ao,this.renderDlgContent),this.parent.off(je,this.afterRender),this.parent.off(bn,this.afterRender),this.parent.off(oi,this.docClick),this.parent.off(ht,this.onIframeMouseDown),this.parent.off(Lo,this.showDialog),this.parent.off(wo,this.closeDialog),this.parent.off(wt,this.editAreaClickHandler),this.parent.off(ai,this.clearDialogObj),this.parent.off(lo,this.onToolbarAction),this.parent.off(si,this.dropdownSelect),this.parent.off(Fe,this.cellSelect),this.parent.off(nn,this.setBGColor),this.parent.off(we,this.keyDown),this.parent.off(Ke,this.keyUp),this.parent.off(dn,this.selectionTable),this.parent.off(Gs,this.tableModulekeyUp),this.parent.off(Le,this.setCssClass),this.parent.off(Y,this.destroy),this.parent.off(st,this.moduleDestroy),this.parent.off(No,this.afterKeyDown),!x.isDevice&&this.parent.tableSettings.resize&&(C.remove(this.contentModule.getEditPanel(),"mouseover",this.resizeHelper),C.remove(this.contentModule.getEditPanel(),x.touchStartEvent,this.resizeStart)))},a.prototype.updateCss=function(t,e){t&&e.cssClass&&(h(e.oldCssClass)?t.setProperties({cssClass:(t.cssClass+" "+e.cssClass).trim()}):t.setProperties({cssClass:(t.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){this.popupObj&&t.cssClass&&(h(t.oldCssClass)?k([this.popupObj.element],t.cssClass):(de([this.popupObj.element],t.oldCssClass),k([this.popupObj.element],t.cssClass))),this.updateCss(this.createTableButton,t),this.updateCss(this.editdlgObj,t);for(var e=[this.columnTextBox,this.rowTextBox,this.tableWidthNum,this.tableCellPadding,this.tableCellSpacing],i=0;i<e.length;i++)this.updateCss(e[i],t)},a.prototype.selectionTable=function(t){var e=t.args.target;x.info.name==="mozilla"&&!h(b(e,"table"))&&b(e,"table").tagName==="TABLE"&&this.parent.contentModule.getEditPanel().setAttribute("contenteditable","true")},a.prototype.afterRender=function(){h(this.contentModule)&&(this.contentModule=this.rendererFactory.getRenderer(X.Content),this.parent.on(nn,this.setBGColor,this),this.parent.on(Fe,this.cellSelect,this),this.parent.tableSettings.resize&&C.add(this.parent.contentModule.getEditPanel(),x.touchStartEvent,this.resizeStart,this),!x.isDevice&&this.parent.tableSettings.resize&&C.add(this.contentModule.getEditPanel(),"mouseover",this.resizeHelper,this))},a.prototype.dropdownSelect=function(t){var e=t.item;if(!(!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||e.command!=="Table")){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n={args:t,selection:this.parent.formatter.editorManager.nodeSelection.save(i,this.contentModule.getDocument()),selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)};switch(e.subCommand){case"InsertRowBefore":case"InsertRowAfter":this.addRow(n.selection,t);break;case"InsertColumnLeft":case"InsertColumnRight":this.addColumn(n.selection,t);break;case"DeleteColumn":case"DeleteRow":this.removeRowColumn(n.selection,t);break;case"AlignTop":case"AlignMiddle":case"AlignBottom":this.verticalAlign(n,t);break;case"Dashed":case"Alternate":case"Custom":this.tableStyles(n,e.subCommand);break;case"Merge":case"VerticalSplit":case"HorizontalSplit":this.UpdateCells(n.selection,t);break}}},a.prototype.UpdateCells=function(t,e){this.parent.formatter.process(this.parent,e,e,{selection:t,subCommand:e.item.subCommand}),this.hideTableQuickToolbar()},a.prototype.keyUp=function(t){var e=t.args.target;if(t.args.key.toLocaleLowerCase()==="escape"&&e&&e.classList&&this.popupObj&&!b(e,"[id='"+this.popupObj.element.id+"']")&&this.popupObj){var i=this.popupObj.relateTo;i.nodeName!=="BUTTON"&&(i=i.querySelector("span.e-create-table"),i=i.parentElement),this.popupObj.hide(),i&&i.focus()}},a.prototype.keyDown=function(t){var e=t.args,i=this;switch(e.action){case"escape":break;case"insert-table":this.openDialog(!0,t),e.preventDefault();break}if(!h(this.parent.formatter.editorManager.nodeSelection)&&this.contentModule&&e.code!=="KeyK"){var n=void 0,r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(r)[0];if(s=s&&s.tagName!=="TD"&&s.tagName!=="TH"?s.parentElement:s,(e.keyCode===8||e.keyCode===46||e.ctrlKey&&e.keyCode===88)&&(s&&s.tagName==="TBODY"?(!h(this.parent.formatter.editorManager.nodeSelection)&&this.contentModule&&(n=this.parent.formatter.editorManager.nodeSelection.save(r,this.contentModule.getDocument())),e.preventDefault(),i.removeTable(n,e,!0)):s&&s.querySelectorAll("table").length>0&&(this.removeResizeElement(),this.hideTableQuickToolbar())),s&&s.tagName!=="TD"&&s.tagName!=="TH"){var o=b(s,"td");s=!h(o)&&this.parent.inputElement.contains(o)?o:s}if(s&&(s.tagName==="TD"||s.tagName==="TH")){var l=this.contentModule.getEditPanel().querySelectorAll(".e-cell-select-end");if((h(this.activeCell)||this.activeCell!==s)&&!h(l)&&l.length===0&&(this.activeCell=s),!h(this.parent.formatter.editorManager.nodeSelection)&&this.contentModule&&(n=this.parent.formatter.editorManager.nodeSelection.save(r,this.contentModule.getDocument())),!e.shiftKey||e.shiftKey&&e.keyCode===9)switch(e.keyCode){case 9:case 37:case 39:this.removeCellSelectClasses(),i.tabSelection(e,n,s);break;case 40:case 38:this.removeCellSelectClasses(),i.tableArrowNavigation(e,n,s);break}}}if(e.shiftKey&&(e.keyCode===39||e.keyCode===37||e.keyCode===38||e.keyCode===40)&&(this.keyDownEventInstance=e,C.add(this.parent.contentModule.getDocument(),"selectionchange",this.tableCellsKeyboardSelection,this)),e.ctrlKey&&e.key==="a"&&this.handleSelectAll(),e.code==="Delete"&&e.which===46||e.code==="Backspace"&&e.which===8){var r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());if(r.startContainer.nodeType===Node.ELEMENT_NODE&&r.startContainer.nodeName==="DIV"&&r.startContainer.classList.contains("e-table-fake-selection"))this.deleteTable(),e.preventDefault();else{var c=e.code==="Delete"&&e.which===46?this.getAdjacentTableElement(r,!0):this.getAdjacentTableElement(r,!1);c&&(this.updateTableSelection(c),e.preventDefault())}}else{var p=e.shiftKey&&e.key==="Enter",d=Vp.indexOf(e.key)!==-1;if(p||d||e.key&&e.key.length===1){var c=this.parent.contentModule.getEditPanel().querySelector("table.e-cell-select");if(c)if(e.keyCode===39||e.keyCode===37)this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),c,0);else{var u=c.querySelector("tr").cells[0];this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),u,u,0,0)}this.removeTableSelection()}}},a.prototype.tableCellsKeyboardSelection=function(t){C.remove(this.parent.contentModule.getDocument(),"selectionchange",this.tableCellsKeyboardSelection);var e=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),i=this.keyDownEventInstance,n=!h(e)&&!h(e.commonAncestorContainer)&&e.commonAncestorContainer.nodeType===Node.ELEMENT_NODE&&(e.commonAncestorContainer.tagName==="TR"||e.commonAncestorContainer.tagName==="TBODY")&&!h(this.activeCell),r=this.contentModule.getEditPanel().querySelectorAll(".e-cell-select-end");if(!h(r)&&r.length>0&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),r[0],r[0],0,0),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),r[0],0)),n||!h(r)&&r.length>0){var s=this.getCorrespondingColumns(),o=!h(r)&&r.length>0?r[0]:this.activeCell,l=this.getCorrespondingIndex(o,s),c=l[0],p=l[1],d=void 0;i.keyCode===39?p<s[0].length-1?d=s[c][p+1]:c<s.length-1?(d=s[c+1][p],r.length===0&&c<s.length-1&&(this.activeCell=s[c][0])):this.resetTableSelection():i.keyCode===37?0<p?d=s[c][p-1]:0<c?(d=s[c-1][p],r.length===0&&0<c&&(this.activeCell=s[c][s[c].length-1])):this.resetTableSelection():i.keyCode===38?0<c?d=s[c-1][p]:this.resetTableSelection():i.keyCode===40&&(c<s.length-1?d=s[c+1][p]:this.resetTableSelection()),d&&this.parent.formatter.editorManager.observer.notify("TABLE_MOVE",{event:{target:d},selectNode:[this.activeCell]})}r.length>0&&(i.preventDefault(),t.preventDefault())},a.prototype.resetTableSelection=function(){var t=this.contentModule.getEditPanel().querySelectorAll(".e-cell-select-end");!h(t)&&t.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionNode(this.parent.contentModule.getDocument(),this.curTable),this.activeCell=null,this.removeCellSelectClasses(),this.removeTableSelection()},a.prototype.getCorrespondingColumns=function(){for(var t=[],e=0,i=this.curTable.rows,n=0;n<=i.length-1;n++)for(var r=i[n],s=0,o=0;o<=r.children.length-1;o++){for(var l=r.children[o],c=l,p=parseInt(c.getAttribute("colspan"),10)||1,d=parseInt(c.getAttribute("rowspan"),10)||1,u=n;u<n+d;u++)for(var m=s;m<s+p;m++)t[u]||(t[u]=[]),t[u][m]?s++:t[u][m]=l;s+=e}return t},a.prototype.getCorrespondingIndex=function(t,e){for(var i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)if(e[i][n]===t)return[i,n];return[]},a.prototype.getAdjacentTableElement=function(t,e){if(!t.collapsed||!e&&this.quickToolObj&&this.quickToolObj.tableQTBar&&document.body.contains(this.quickToolObj.tableQTBar.element))return null;var i=this.getNodeCollection(t),n=t.collapsed&&this.parent.contentModule.getEditPanel()===t.startContainer&&i&&i.length>0&&i[0]?i[0]:t.startContainer,r=this.getSelectedTableEle(i),s=this.getBrElement(t,i);if(n&&n.nodeType===Node.ELEMENT_NODE&&(n.tagName==="IMG"||n.querySelector("img")||n.tagName==="AUDIO"||n.querySelector("audio")||n.tagName==="VIDEO"||n.querySelector("video")||n.querySelector(".e-video-clickelem"))){var o=this.contentModule.getDocument().createRange();o.collapse(!0),o.selectNodeContents(n);var l=this.parent.formatter.editorManager.nodeSelection.getIndex(n);if(e&&o.startOffset>=t.startOffset||!e&&(n.tagName!=="IMG"&&o.startOffset!==t.startOffset||n.tagName==="IMG"&&l!==t.startOffset))return null}if(n&&n.nodeType===Node.TEXT_NODE){if(e){if(t.endOffset!==t.endContainer.textContent.length&&t.endOffset!==t.endContainer.textContent.trim().length)return null}else if(t.startOffset!==0)return null}if(n&&n.nodeType===Node.ELEMENT_NODE&&n.tagName==="TABLE"&&(r=n),r){var c=this.parent.formatter.editorManager.nodeSelection.getIndex(r);t.startOffset===c&&e||t.startOffset!==c&&!e||(r=null)}return!r&&n&&(r=this.getAdjacentElementFromDom(n,s,e)),r&&r.nodeType===Node.ELEMENT_NODE&&r.tagName==="TABLE"?(this.setSelection(r,s),r):null},a.prototype.getAdjacentElementFromDom=function(t,e,i){for(var n,r=e||t.parentNode,s=t;r&&!n&&r.parentNode;){var o=Array.from(r.childNodes),l=o.indexOf(s);if(l!==-1&&(i&&l<o.length-1||!i&&l>0)?n=o[i?l+1:l-1]:(n=i?r.nextSibling:r.previousSibling,s=r),!e&&t.nodeType===Node.TEXT_NODE&&n&&n.tagName&&n.tagName.toUpperCase()==="BR"&&(e=s=r=n,n=null),!e&&n&&!(n.nodeType===Node.ELEMENT_NODE&&n.tagName==="TABLE")&&!h(n.textContent)&&!n.textContent.trim()&&(s=r=n.parentNode,n=null),n&&n.tagName&&["UL","OL","LI"].indexOf(n.tagName.toUpperCase())!==-1&&(n=this.getAdjacentElementFromList(n,i),!n))return null;r&&r.tagName&&r.tagName.toUpperCase()==="LI"&&!i&&(n=r),r=r.parentNode}return n},a.prototype.getAdjacentElementFromList=function(t,e){for(;t;){if(t.tagName&&["UL","OL","LI"].indexOf(t.tagName.toUpperCase())===-1){t.nodeType===Node.ELEMENT_NODE&&t.tagName==="TABLE"||(t=e?t.firstChild:t.lastChild);break}t=e?t.firstChild:t.lastChild}return t},a.prototype.getNodeCollection=function(t){var e=[];if(t.collapsed&&this.parent.contentModule.getEditPanel()===t.startContainer&&t.startContainer.childNodes.length>0){var i=Math.max(0,Math.min(t.startContainer.childNodes.length-1,t.endOffset-1));e.push(t.startContainer.childNodes[i])}else e=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t);return e},a.prototype.getSelectedTableEle=function(t){if(t&&t.length>0)for(var e=0,i=Array.from(t);e<i.length;e++){var n=i[e];if(n&&n.tagName==="TABLE")return n}return null},a.prototype.getBrElement=function(t,e){return t.endContainer.tagName==="BR"?t.endContainer:e.length===1&&e[0]&&e[0].tagName==="BR"?e[0]:null},a.prototype.setSelection=function(t,e){if(!t.classList.contains("e-cell-select")){this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),e&&(e.parentNode&&e.parentNode.childNodes.length===1&&e.parentNode.firstChild.nodeName==="BR"?E(e.parentNode):E(e));var i=this.parent.createElement("div",{className:"e-table-fake-selection"});i.setAttribute("contenteditable","false"),this.contentModule.getEditPanel().appendChild(i),this.parent.formatter.editorManager.nodeSelection.setSelectionNode(this.contentModule.getDocument(),i)}},a.prototype.removeAllFakeSelectionEles=function(){var t=this.parent.contentModule.getEditPanel().querySelectorAll(".e-table-fake-selection");t&&t.length>0&&t.forEach(function(e){E(e)})},a.prototype.deleteTable=function(){var t=this.parent.contentModule.getEditPanel().querySelector("table.e-cell-select");if(this.removeResizeElement(),t){var e=document.createElement("br"),i=e;this.parent.enterKey==="DIV"?(i=document.createElement("div"),i.appendChild(e)):this.parent.enterKey==="P"&&(i=document.createElement("p"),i.appendChild(e)),t.parentNode.replaceChild(i,t),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),i,i,0,0),this.removeTableSelection()}},a.prototype.removeTableSelection=function(){var t=this.parent.contentModule.getEditPanel().querySelector("table.e-cell-select");t&&de([t],Ue),this.removeAllFakeSelectionEles()},a.prototype.updateTableSelection=function(t){k([t],"e-cell-select")},a.prototype.handleSelectAll=function(){this.cancelResizeAction();var t=this.parent.inputElement.querySelectorAll("."+Ue);de(t,Ue),this.removeTableSelection()},a.prototype.tableModulekeyUp=function(t){if(!h(this.parent.formatter.editorManager.nodeSelection)&&this.contentModule){var e=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(e)[0];if(i=i&&i.tagName!=="TD"&&i.tagName!=="TH"?i.parentElement:i,i&&i.tagName!=="TD"&&i.tagName!=="TH"){var n=b(i,"td");i=!h(n)&&this.parent.inputElement.contains(n)?n:i}this.previousTableElement!==i&&!h(this.previousTableElement)&&!(event.shiftKey&&(event.keyCode===39||event.keyCode===37||event.keyCode===38||event.keyCode===40))&&(de([this.previousTableElement],Ue),this.removeTableSelection())}},a.prototype.openDialog=function(t,e){if(t||this.parent.contentModule.getEditPanel().focus(),this.parent.editorMode==="HTML"){var i=this.parent.contentModule.getDocument(),n=this.parent.formatter.editorManager.nodeSelection.getRange(i),r=this.parent.formatter.editorManager.nodeSelection.save(n,i),s={originalEvent:e?e.args:{action:"insert-table"},item:{command:"Table",subCommand:"CreateTable"},name:t?null:"showDialog"};this.insertTableDialog({self:this,args:s,selection:r})}},a.prototype.showDialog=function(){this.openDialog(!1),this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.closeDialog=function(){this.editdlgObj&&this.editdlgObj.hide({returnValue:!0})},a.prototype.onToolbarAction=function(t){var e=t.args.item;switch(e.subCommand){case"TableHeader":this.tableHeader(t.selection,t.args);break;case"TableRemove":this.removeTable(t.selection,t.args);break;case"TableEditProperties":this.editTable(t);break}},a.prototype.verticalAlign=function(t,e){var i=b(t.selectParent[0],"th")||b(t.selectParent[0],"td");i&&this.parent.formatter.process(this.parent,e,e,{tableCell:i,subCommand:e.item.subCommand})},a.prototype.tableStyles=function(t,e){var i=b(t.selectParent[0],"table");if(e==="Dashed"&&(this.parent.element.classList.contains(Ci)?de([this.parent.element],Ci):this.parent.element.classList.add(Ci),i.classList.contains(Ci)?de([this.parent.element],Ci):i.classList.add(Ci)),e==="Alternate"&&(this.parent.element.classList.contains(Si)?de([this.parent.element],Si):this.parent.element.classList.add(Si),i.classList.contains(Si)?de([i],Si):i.classList.add(Si)),t.args&&t.args.item.cssClass)for(var n=t.args.item.cssClass.split(" "),r=0;r<n.length;r++)i.classList.contains(n[r])?de([i],n[r]):i.classList.add(n[r]);this.parent.formatter.saveData(),this.hideTableQuickToolbar(),this.parent.formatter.editorManager.nodeSelection.restore()},a.prototype.insideList=function(t){for(var e=this.parent.formatter.editorManager.domNode.blockNodes(),i=[],n=0;n<e.length;n++)e[n].parentNode.tagName==="LI"?i.push(e[n].parentNode):e[n].tagName==="LI"&&e[n].childNodes[0].tagName!=="P"&&e[n].childNodes[0].tagName!=="OL"&&e[n].childNodes[0].tagName!=="UL"&&i.push(e[n]);return i.length>1||i.length&&t.startOffset===0&&t.endOffset===0?(this.ensureInsideTableList=!0,!0):(this.ensureInsideTableList=!1,!1)},a.prototype.removeEmptyTextNodes=function(t){for(var e=t.childNodes,i=e.length-1;i>=0;i--){var n=e[i];n.nodeType===Node.TEXT_NODE&&n.nodeValue.trim()===""&&t.removeChild(n)}},a.prototype.tabSelection=function(t,e,i){for(var n=i.closest("table").querySelectorAll("thead, tbody, tr"),r=0;r<n.length;r++)this.removeEmptyTextNodes(n[r]);this.previousTableElement=i;var s=this.insideList(e.range);if(!((t.keyCode===37||t.keyCode===39)&&e.range.startContainer.nodeType===3||s))if(t.preventDefault(),de([i],Ue),this.removeTableSelection(),!t.shiftKey&&t.keyCode!==37){var o=h(i.nextSibling)?h(b(i,"tr").nextSibling)?h(b(i,"table").nextSibling)?i:b(i,"table").nextSibling.nodeName.toLowerCase()==="td"?b(i,"table").nextSibling:i:b(i,"tr").nextSibling.childNodes[0]:i.nextSibling;i===o&&i.nodeName==="TH"&&(o=b(i,"table").rows[1].cells[0]),t.keyCode===39&&i===o&&(o=b(i,"table").nextSibling),o&&(o.textContent.trim()!==""&&b(o,"td")?e.setSelectionNode(this.contentModule.getDocument(),o):e.setSelectionText(this.contentModule.getDocument(),o,o,0,0)),i===o&&t.keyCode!==39&&o&&(i.classList.add(Ue),this.addRow(e,t,!0),de([i],Ue),this.removeTableSelection(),o=o.parentElement.nextSibling?o.parentElement.nextSibling.firstChild:o.parentElement.firstChild,o.textContent.trim()!==""&&b(o,"td")?e.setSelectionNode(this.contentModule.getDocument(),o):e.setSelectionText(this.contentModule.getDocument(),o,o,0,0))}else{var l=h(i.previousSibling)?h(b(i,"tr").previousSibling)?h(b(i,"table").previousSibling)?i:b(i,"table").previousSibling.nodeName.toLowerCase()==="td"?b(i,"table").previousSibling:i:b(i,"tr").previousSibling.childNodes[b(i,"tr").previousSibling.childNodes.length-1]:i.previousSibling;if(i===l&&i.cellIndex===0&&b(i,"table").tHead){var c=b(i,"table");l=c.rows[0].cells[c.rows[0].cells.length-1]}t.keyCode===37&&i===l&&(l=b(i,"table").previousSibling),l&&(l.textContent.trim()!==""&&b(l,"td")?e.setSelectionNode(this.contentModule.getDocument(),l):e.setSelectionText(this.contentModule.getDocument(),l,l,0,0))}},a.prototype.tableArrowNavigation=function(t,e,i){var n=e.range.startContainer;t.keyCode===40&&n.nodeType===3&&(n.nextSibling&&n.nextSibling.nodeName==="BR"||n.parentNode&&n.parentNode.nodeName!=="TD")||t.keyCode===38&&n.nodeType===3&&(n.previousSibling&&n.previousSibling.nodeName==="BR"||n.parentNode&&n.parentNode.nodeName!=="TD")||(t.preventDefault(),de([i],Ue),this.removeTableSelection(),t.keyCode===40?i=h(b(i,"tr").nextElementSibling)?b(i,"table").tHead&&i.nodeName==="TH"?b(i,"table").rows[1].cells[i.cellIndex]:h(b(i,"table").nextSibling)?i:b(i,"table").nextSibling:b(i,"tr").nextElementSibling.children[i.cellIndex]:i=h(b(i,"tr").previousElementSibling)?b(i,"table").tHead&&i.nodeName!=="TH"?b(i,"table").tHead.rows[0].cells[i.cellIndex]:h(b(i,"table").previousSibling)?i:b(i,"table").previousSibling:b(i,"tr").previousElementSibling.children[i.cellIndex],i&&e.setSelectionText(this.contentModule.getDocument(),i,i,0,0))},a.prototype.setBGColor=function(t){var e=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());this.parent.formatter.editorManager.nodeSelection.save(e,this.contentModule.getDocument());for(var i=this.curTable.querySelectorAll(".e-cell-select"),n=0;n<i.length;n++)i[n].style.backgroundColor=t.item.value;this.parent.formatter.saveData(),this.hideTableQuickToolbar()},a.prototype.hideTableQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.tableQTBar&&document.body.contains(this.quickToolObj.tableQTBar.element)&&this.quickToolObj.tableQTBar.hidePopup()},a.prototype.tableHeader=function(t,e){this.parent.formatter.process(this.parent,e,e.originalEvent,{selection:t,subCommand:e.item.subCommand})},a.prototype.getAnchorNode=function(t){var e=b(t,"a");return e||t},a.prototype.editAreaClickHandler=function(t){if(!(this.parent.readonly||!h(b(t.args.target,".e-img-caption")))){var e=t.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(e.which===2||i&&e.which===1||!i&&e.which===3)&&this.parent.editorMode==="HTML"&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar){this.quickToolObj=this.parent.quickToolbarModule;var n=e.target;this.contentModule=this.rendererFactory.getRenderer(X.Content);var r=this.quickToolObj.tableQTBar.element.classList.contains("e-rte-pop");if(r)return;var s=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument()),o=b(n,"table"),l=this.parent.getRange().startContainer.parentElement,c=this.parent.getRange().endContainer.parentElement,p=this.getAnchorNode(n),d=new Date().getTime();if(n&&n.nodeName!=="A"&&p.nodeName!=="A"&&n.nodeName!=="IMG"&&n.nodeName!=="VIDEO"&&!n.classList.contains($t)&&n.nodeName!=="AUDIO"&&l===c&&(n.nodeName==="TD"||n.nodeName==="TH"||n.nodeName==="TABLE"||o&&this.parent.contentModule.getEditPanel().contains(o))&&!(s.startContainer.nodeType===3&&!s.collapsed)&&d-this.resizeEndTime>100){var u=this.parent.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument());this.parent.formatter.editorManager.nodeSelection.save(u,this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument());var m=void 0,f=void 0;x.isDevice&&t.args.touches?(m=this.parent.iframeSettings.enable?window.pageXOffset+this.parent.element.getBoundingClientRect().left+t.args.changedTouches[0].clientX:t.args.changedTouches[0].pageX,f=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+(this.parent.inlineMode.enable?0:this.parent.toolbarModule.getToolbarHeight())+t.args.changedTouches[0].clientY:t.args.changedTouches[0].pageY):(m=this.parent.iframeSettings.enable?window.pageXOffset+this.parent.element.getBoundingClientRect().left+e.clientX:e.pageX,f=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+this.parent.toolbarModule.getToolbarHeight()+e.clientY:e.pageY),this.quickToolObj.tableQTBar.showPopup(m,f,n),this.parent.formatter.editorManager.nodeSelection.restore()}else this.hideTableQuickToolbar()}}},a.prototype.tableCellSelect=function(t){var e=t.target,i=Array.prototype.slice.call(e.parentElement.parentElement.children).indexOf(e.parentElement),n=Array.prototype.slice.call(e.parentElement.children).indexOf(e),r=this.dlgDiv.querySelectorAll(".e-rte-tablecell");Array.prototype.forEach.call(r,function(s){var o=Array.prototype.slice.call(s.parentElement.parentElement.children).indexOf(s.parentElement),l=Array.prototype.slice.call(s.parentElement.children).indexOf(s);de([s],"e-active"),o<=i&&l<=n&&k([s],"e-active")}),this.tblHeader.innerHTML=n+1+"x"+(i+1)},a.prototype.tableMouseUp=function(){this.unwireTableSelectionEvents(),this.isTableMoveActive=!1},a.prototype.tableMouseLeave=function(){this.unwireTableSelectionEvents(),this.isTableMoveActive=!1,this.resetTableSelection()},a.prototype.tableCellLeave=function(t){de(this.dlgDiv.querySelectorAll(".e-rte-tablecell"),"e-active"),k([this.dlgDiv.querySelector(".e-rte-tablecell")],"e-active"),this.tblHeader.innerHTML="1x1"},a.prototype.tableCellClick=function(t){var e=t.target,i=Array.prototype.slice.call(e.parentElement.parentElement.children).indexOf(e.parentElement)+1,n=Array.prototype.slice.call(e.parentElement.children).indexOf(e)+1;this.self.tableInsert(i,n,t,this)},a.prototype.tableInsert=function(t,e,i,n){var r=n.self?n.self:this,s=n.selection.range.startContainer;s.nodeName==="P"&&s.textContent.trim()===""&&!(s.childNodes.length>0)&&(s.innerHTML="<br />");var o=s.parentNode;if(r.parent.editorMode==="HTML"&&(r.parent.iframeSettings.enable&&!be(o.ownerDocument.querySelector("body"),"e-lib")||!r.parent.iframeSettings.enable&&h(b(o,"[id='"+r.contentModule.getPanel().id+"']")))){r.contentModule.getEditPanel().focus();var l=r.parent.formatter.editorManager.nodeSelection.getRange(r.contentModule.getDocument());n.selection=r.parent.formatter.editorManager.nodeSelection.save(l,r.contentModule.getDocument())}var c={rows:t,columns:e,width:{minWidth:r.parent.tableSettings.minWidth,maxWidth:r.parent.tableSettings.maxWidth,width:r.parent.tableSettings.width},selection:n.selection};if(r.popupObj){for(var p=Array.prototype.slice.call(i.target.parentElement.parentElement.children),d=0;d<p.length;d++){C.remove(p[d],"mouseleave",this.tableCellLeave);for(var u=Array.prototype.slice.call(p[d].children),m=0;m<u.length;m++)C.remove(u[m],"mousemove",this.tableCellSelect),C.remove(u[m],"mouseup",this.tableCellClick)}r.popupObj.hide()}r.editdlgObj&&r.editdlgObj.hide();var f=window.scrollX,g=window.scrollY;r.parent.formatter.process(r.parent,n.args,n.args.originalEvent,c),r.contentModule.getEditPanel().focus(),window.scrollTo(f,g),r.parent.on(Fe,r.cellSelect,r);var y=r.parent.formatter.editorManager.nodeSelection.get(r.contentModule.getDocument());!h(y)&&!h(y.anchorNode)&&y.anchorNode.nodeType===Node.ELEMENT_NODE&&(y.anchorNode.tagName==="TD"||y.anchorNode.tagName==="TH")&&(r.curTable=b(y.anchorNode,"table"),r.activeCell=y.anchorNode)},a.prototype.cellSelect=function(t){var e=t.args.target,i=b(e,"td,th");if(e=e.nodeName!=="TD"&&i&&this.parent.contentModule.getEditPanel().contains(i)?i:e,!h(this.activeCell)&&t.args.shiftKey&&!h(e)&&!h(e.tagName)&&(e.tagName==="TD"||e.tagName==="TH")&&this.activeCell!==e){this.parent.formatter.editorManager.observer.notify("TABLE_MOVE",{event:t.args,selectNode:[this.activeCell]}),t.args.preventDefault();return}this.parent.quickToolbarSettings.showOnRightClick&&t.args.which===3&&e.classList.contains(Ue)||(this.isTableMoveActive&&(this.unwireTableSelectionEvents(),this.isTableMoveActive=!1),this.activeCell=null,this.removeCellSelectClasses(),this.removeTableSelection()),e&&(e.tagName==="TD"||e.tagName==="TH")&&(k([e],Ue),this.activeCell=e,this.curTable=this.curTable?this.curTable:b(e,"table"),this.wireTableSelectionEvents(),this.isTableMoveActive=!0,this.removeResizeElement(),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&E(this.helper)),x.info.name==="mozilla"&&!h(b(e,"table"))&&b(e,"table").tagName==="TABLE"&&this.parent.contentModule.getEditPanel().setAttribute("contenteditable","false")},a.prototype.wireTableSelectionEvents=function(){C.add(this.curTable,"mousemove",this.tableMove,this),C.add(this.curTable,"mouseup",this.tableMouseUp,this),C.add(this.curTable,"mouseleave",this.tableMouseLeave,this)},a.prototype.unwireTableSelectionEvents=function(){C.remove(this.curTable,"mousemove",this.tableMove),C.remove(this.curTable,"mouseup",this.tableMouseUp),C.remove(this.curTable,"mouseleave",this.tableMouseLeave)},a.prototype.removeCellSelectClasses=function(){de(this.contentModule.getEditPanel().querySelectorAll("table td, table th"),Sa),de(this.contentModule.getEditPanel().querySelectorAll("table td, table th"),Ta),de(this.contentModule.getEditPanel().querySelectorAll("table td, table th"),Ue)},a.prototype.tableMove=function(t){this.parent.formatter.editorManager.observer.notify("TABLE_MOVE",{event:t,selectNode:[this.activeCell]})},a.prototype.resizeHelper=function(t){if(!this.parent.readonly&&!this.isTableMoveActive&&!(t&&t.buttons&&t.buttons>0)){var e=t.target||t.targetTouches[0].target,i=b(e,"table.e-rte-table, table.e-rte-paste-table"),n=this.parent.contentModule.getEditPanel().querySelectorAll(".e-table-box.e-rbox-select, .e-table-rhelper.e-column-helper, .e-table-rhelper.e-row-helper").length>0;!n&&!h(this.curTable)&&!h(i)&&i!==this.curTable&&this.parent.contentModule.getEditPanel().contains(i)&&(this.removeResizeElement(),this.removeHelper(t),this.cancelResizeAction()),!n&&(e.nodeName==="TABLE"||e.nodeName==="TD"||e.nodeName==="TH")&&(this.curTable=i&&this.parent.contentModule.getEditPanel().contains(i)&&(e.nodeName==="TD"||e.nodeName==="TH")?i:e,this.removeResizeElement(),this.tableResizeEleCreation(this.curTable,t))}},a.prototype.tableResizeEleCreation=function(t,e){this.parent.preventDefaultResize(e);for(var i=this.calMaxCol(this.curTable),n=[],r=0;r<t.rows.length;r++)for(var s=0;s<t.rows[r].cells.length;s++)if(!t.rows[r].cells[s].hasAttribute("rowspan")){n.push(Array.prototype.slice.call(t.rows[r].cells,0,t.rows[r].cells.length)[s]);break}for(var o=parseInt(getComputedStyle(t).height,10),l=parseInt(getComputedStyle(t).width,10),c=this.calcPos(t),r=0;i.length>=r;r++){var p=this.parent.createElement("span",{attrs:{"data-col":r.toString(),unselectable:"on",contenteditable:"false"}});p.classList.add(Dl,Un),i.length===r?p.style.cssText="height: "+o+"px; width: 4px; top: "+c.top+"px; left:"+((i[r-1].classList.contains("e-multi-cells-select")?0:c.left)+this.calcPos(i[r-1]).left+i[r-1].offsetWidth-2)+"px;":p.style.cssText="height: "+o+"px; width: 4px; top: "+c.top+"px; left:"+((i[r].classList.contains("e-multi-cells-select")?0:c.left)+this.calcPos(i[r]).left-2)+"px;",this.contentModule.getEditPanel().appendChild(p)}for(var r=0;n.length>r;r++){var d=this.parent.createElement("span",{attrs:{"data-row":r.toString(),unselectable:"on",contenteditable:"false"}});d.classList.add(Dl,Vn);var u=!h(t.getAttribute("cellspacing"))||t.getAttribute("cellspacing")!==""?0:this.calcPos(n[r]).left;d.style.cssText="width: "+l+"px; height: 4px; top: "+(this.calcPos(n[r]).top+(n[r].classList.contains("e-multi-cells-select")?0:c.top)+n[r].offsetHeight-2)+"px; left:"+(u+c.left)+"px;",this.contentModule.getEditPanel().appendChild(d)}var m=this.parent.createElement("span",{className:_n+this.parent.getCssClass(!0),attrs:{"data-col":i.length.toString(),unselectable:"on",contenteditable:"false"}});m.style.cssText="top: "+(c.top+o-4)+"px; left:"+(c.left+l-4)+"px;",x.isDevice&&m.classList.add("e-rmob"),this.contentModule.getEditPanel().appendChild(m)},a.prototype.removeResizeElement=function(){var t=this.parent.contentModule.getEditPanel().querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box");if(t.length>0)for(var e=0;e<t.length;e++)E(t[e])},a.prototype.calcPos=function(t){for(var e={top:0,left:0},i=t.getBoundingClientRect(),n=t.ownerDocument,r=t.offsetParent||n.documentElement,s=!1;r&&(r===n.body||r===n.documentElement)&&r.style.position==="static";)r=r.parentNode;if(r.nodeName==="TD"&&t.nodeName==="TABLE"&&(r=b(r,".e-rte-content"),s=!0),r&&r!==t&&r.nodeType===1&&(e=r.getBoundingClientRect()),s){s=!1;var o=this.parent.inputElement&&this.parent.inputElement.scrollTop>0?this.parent.inputElement.scrollTop+i.top-e.top:i.top-e.top,l=this.parent.inputElement&&this.parent.inputElement.scrollLeft>0?this.parent.inputElement.scrollLeft+i.left-e.left:i.left-e.left;return{top:o,left:l}}else return{top:t.offsetTop,left:t.offsetLeft}},a.prototype.getPointX=function(t){return t.touches&&t.touches.length?t.touches[0].pageX:t.pageX},a.prototype.getPointY=function(t){return t.touches&&t.touches.length?t.touches[0].pageY:t.pageY},a.prototype.resizeStart=function(t){var e=this;if(!this.parent.readonly){x.isDevice&&this.resizeHelper(t);var i=t.target;if(i.classList.contains(Un)||i.classList.contains(Vn)||i.classList.contains(_n)){if(this.resetResizeHelper(this.curTable),t.preventDefault(),this.parent.preventDefaultResize(t),de(this.curTable.querySelectorAll("td,th"),Ue),this.removeTableSelection(),this.pageX=this.getPointX(t),this.pageY=this.getPointY(t),this.resizeBtnInit(),this.hideTableQuickToolbar(),i.classList.contains(Un)){if(this.resizeBtnStat.column=!0,parseInt(i.getAttribute("data-col"),10)===this.calMaxCol(this.curTable).length)this.currentColumnResize="last",this.colIndex=parseInt(i.getAttribute("data-col"),10)-1,this.columnEle=this.calMaxCol(this.curTable)[this.colIndex];else{if(parseInt(i.getAttribute("data-col"),10)===0)this.currentColumnResize="first";else{this.currentColumnResize="middle";for(var n=this.curTable.rows[0].cells,r=0,s=0;s<n.length;s++)r=r+n[s].colSpan;for(var o=new Array(r),l=B("colgroup"),c=new Map,p=0;p<this.curTable.rows.length;p++)for(var d=0,u=0;u<this.curTable.rows[p].cells.length;u++){for(var m=1;m<this.curTable.rows[p].cells[u].rowSpan;m++){var f=""+(p+m)+d;c.set(f,this.curTable.rows[p].cells[u])}var g=this.getCellIndex(c,p,u);g>d&&(d=g);var y=this.curTable.rows[p].cells[u].offsetWidth;(!o[d]||y<o[d])&&(o[d]=y),d+=1+this.curTable.rows[p].cells[u].colSpan-1}for(var S=0;S<o.length;S++){var s=B("col");s.appendChild(B("br")),s.style.width=this.convertPixelToPercentage(o[S],parseInt(getComputedStyle(this.curTable).width,10))+"%",l.appendChild(s)}this.curTable.insertBefore(l,this.curTable.firstChild);for(var p=0;p<this.curTable.rows.length;p++)for(var u=0;u<this.curTable.rows[p].cells.length;u++)this.curTable.rows[p].cells[u].style.width=""}this.colIndex=parseInt(i.getAttribute("data-col"),10),this.columnEle=this.calMaxCol(this.curTable)[this.colIndex]}this.moveEle=t.target,this.appendHelper()}if(i.classList.contains(Vn)&&(this.rowEle=this.curTable.rows[parseInt(i.getAttribute("data-row"),10)],this.resizeBtnStat.row=!0,this.appendHelper()),i.classList.contains(_n)&&(this.resizeBtnStat.tableBox=!0),x.isDevice&&this.helper&&!this.helper.classList.contains("e-reicon"))this.helper.classList.add("e-reicon"),C.add(document,x.touchStartEvent,this.removeHelper,this),C.add(this.helper,x.touchStartEvent,this.resizeStart,this);else{var T={event:t,requestType:"Table"};this.parent.trigger(th,T,function(L){L.cancel&&e.cancelResizeAction()})}this.isResizeBind&&(C.add(this.contentModule.getDocument(),x.touchMoveEvent,this.resizing,this),C.add(this.contentModule.getDocument(),x.touchEndEvent,this.resizeEnd,this),this.isResizeBind=!1)}}},a.prototype.getCellIndex=function(t,e,i){var n=""+e+i,r=t.get(n);return r?this.getCellIndex(t,e,i+r.colSpan):i},a.prototype.removeHelper=function(t){var e=t.target.classList;!e.contains("e-reicon")&&this.helper&&(C.remove(document,x.touchStartEvent,this.removeHelper),C.remove(this.helper,x.touchStartEvent,this.resizeStart),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&E(this.helper),this.pageX=null,this.helper=null)},a.prototype.appendHelper=function(){this.helper=this.parent.createElement("div",{className:"e-table-rhelper"+this.parent.getCssClass(!0)}),x.isDevice&&this.helper.classList.add("e-reicon"),this.contentModule.getEditPanel().appendChild(this.helper),this.setHelperHeight()},a.prototype.setHelperHeight=function(){var t=this.calcPos(this.curTable);this.resizeBtnStat.column?(this.helper.classList.add("e-column-helper"),this.helper.style.cssText="height: "+getComputedStyle(this.curTable).height+"; top: "+t.top+"px; left:"+(t.left+this.calcPos(this.columnEle).left+(this.currentColumnResize==="last"?this.columnEle.offsetWidth:0)-1)+"px;"):(this.helper.classList.add("e-row-helper"),this.helper.style.cssText="width: "+getComputedStyle(this.curTable).width+"; top: "+(this.calcPos(this.rowEle).top+t.top+this.rowEle.offsetHeight-1)+"px; left:"+(this.calcPos(this.rowEle).left+t.left)+"px;")},a.prototype.updateHelper=function(){var t=this.calcPos(this.curTable);if(this.resizeBtnStat.column){var e=t.left+this.calcPos(this.columnEle).left+(this.currentColumnResize==="last"?this.columnEle.offsetWidth:0)-1;this.helper.style.left=e+"px",this.helper.style.height=this.curTable.offsetHeight+"px"}else{var i=this.calcPos(this.rowEle).top+t.top+this.rowEle.offsetHeight-1;this.helper.style.top=i+"px"}},a.prototype.calMaxCol=function(t){for(var e=t.rows[0].cells,i=0,n=0;n<e.length;n++)i=i+e[n].colSpan;for(var r=new Array(i),s=new Map,o=0;o<t.rows.length;o++)for(var l=0,c=0;c<t.rows[o].cells.length;c++){for(var p=1;p<t.rows[o].cells[c].rowSpan;p++){var d=""+(o+p)+l;s.set(d,t.rows[o].cells[c])}var u=this.getCellIndex(s,o,c);u>l&&(l=u);var m=t.rows[o].cells[c].offsetWidth;(!r[l]||m<r[l].offsetWidth)&&(r[l]=t.rows[o].cells[c]),l+=1+t.rows[o].cells[c].colSpan-1}return r},a.prototype.resizing=function(t){var e=this,i=this.getPointX(t),n=this.getPointY(t),r=this.parent.enableRtl?-(i-this.pageX):i-this.pageX,s=this.parent.enableRtl?-(n-this.pageY):n-this.pageY;this.pageX=i,this.pageY=n;var o,l=this.curTable.closest("td"),c={event:t,requestType:"table"};this.parent.trigger(ih,c,function(p){if(p.cancel)e.cancelResizeAction();else{var d=e.contentModule.getEditPanel().querySelector(".e-table-box"),u=parseInt(getComputedStyle(e.curTable).width,10),m=parseInt(getComputedStyle(e.curTable).height,10),f=+getComputedStyle(e.contentModule.getEditPanel()).paddingRight.match(/\d/g).join(""),g=e.contentModule.getEditPanel().offsetWidth-(e.contentModule.getEditPanel().offsetWidth-e.contentModule.getEditPanel().clientWidth)-f*2,y=void 0;if(!h(e.curTable.parentElement.closest("table"))&&!h(e.curTable.closest("td"))&&e.contentModule.getEditPanel().contains(e.curTable.closest("td"))){var S=e.curTable.closest("td"),T=+getComputedStyle(S).paddingRight.match(/\d/g).join("");y=S.offsetWidth-(S.offsetWidth-S.clientWidth)-T*2}else y=g;if(e.resizeBtnStat.column){e.curTable.closest("li")&&(y=e.curTable.closest("li").offsetWidth);var L=e.curTable.querySelectorAll("colgroup > col"),w=void 0;e.curTable.style.width!==""&&e.curTable.style.width.includes("%")?w=parseFloat(e.curTable.style.width.split("%")[0]):w=e.getCurrentTableWidth(e.curTable.offsetWidth,e.parent.inputElement.offsetWidth);var N=e.calMaxCol(e.curTable)[e.colIndex],M=e.getCurrentColWidth(N,u);if(e.currentColumnResize==="first"){if(r=r-.75,e.removeResizeElement(),l&&(o=e.curTable.getBoundingClientRect().right-e.calcPos(l).left,e.curTable.style.maxWidth=o+"px"),(r!==0&&5<M||r<0)&&w<=100&&e.convertPixelToPercentage(u-r,y)<=100){var I=e.findFirstLastColCells(e.curTable,!0);e.curTable.style.width=e.convertPixelToPercentage(u-r,y)>100?"100%":e.convertPixelToPercentage(u-r,y)+"%";var A=w-e.convertPixelToPercentage(u-r,y),V=0,Q=e.curTable.style.width.indexOf("%")>-1;if(!Q&&e.curTable.offsetWidth>e.contentModule.getEditPanel().offsetWidth){e.curTable.style.width=g+"px";return}if(Q&&parseFloat(e.curTable.style.width.split("%")[0])>100){e.curTable.style.width="100%";return}if(!h(e.curTable.style.marginLeft)&&e.curTable.style.marginLeft!==""){var Z=/[-+]?\d*\.\d+|\d+/,W=e.curTable.style.marginLeft.match(Z);h(W)||(V=parseFloat(W[0]))}var $=V+A;if($&&$>100){var te=parseFloat(e.curTable.style.width);$=100-te}if(!e.curTable.classList.contains("e-rte-paste-table")&&$&&$<1){e.curTable.style.marginLeft=null,e.curTable.style.width="100%";return}e.curTable.style.marginLeft="calc("+(e.curTable.style.width==="100%"?0:$)+"%)";for(var j=0;j<I.length;j++){var J=e.getCurrentColWidth(I[j],u);I[j].style.width=J-A+"%"}}}else if(e.currentColumnResize==="last"){if(r=r+.75,e.removeResizeElement(),l&&(o=l.getBoundingClientRect().right-e.curTable.getBoundingClientRect().left,e.curTable.style.maxWidth=o+"px"),(r!==0&&5<M||r>0)&&w<=100&&e.convertPixelToPercentage(u+r,y)<=100){var ne=e.findFirstLastColCells(e.curTable,!1);e.curTable.style.width=e.convertPixelToPercentage(u+r,y)>100?"100%":e.convertPixelToPercentage(u+r,y)+"%";for(var A=w-e.convertPixelToPercentage(u+r,y),j=0;j<ne.length;j++){var J=e.getCurrentColWidth(ne[j],u);ne[j].style.width=J-A+"%"}}}else{var ae=L[e.colIndex].offsetWidth-r,q=L[e.colIndex].offsetWidth+L[e.colIndex-1].offsetWidth;if(q-ae>20&&ae>20){var me=q-ae,Pt=ae;L[e.colIndex-1].style.width=e.convertPixelToPercentage(me,u)+"%",L[e.colIndex].style.width=e.convertPixelToPercentage(Pt,u)+"%"}}e.updateHelper()}else if(e.resizeBtnStat.row){e.parent.preventDefaultResize(t);for(var le=[],ke=e.curTable.querySelectorAll("tr"),j=0;j<ke.length;j++)e.rowEle!==ke[j]&&(le[j]=parseFloat(ke[j].clientHeight.toString()));e.curTable.style.height=parseFloat(e.curTable.clientHeight.toString())+(s>0?0:s)+"px";for(var j=0;j<ke.length;j++)e.rowEle===ke[j]?ke[j].style.height=parseFloat(ke[j].clientHeight.toString())+s+"px":ke[j].style.height=le[j]+"px";h(d)||(d.style.cssText="top: "+(e.calcPos(e.curTable).top+m-4)+"px; left:"+(e.calcPos(e.curTable).left+u-4)+"px;"),e.updateHelper()}else if(e.resizeBtnStat.tableBox){if(l){var _t=e.curTable.getBoundingClientRect().left-l.getBoundingClientRect().left;o=Math.abs(_t-l.getBoundingClientRect().width)-5,e.curTable.style.maxWidth=o+"px"}e.curTable.style.height=m+s+"px",h(d)||(d.classList.add("e-rbox-select"),d.style.cssText="top: "+(e.calcPos(e.curTable).top+m-4)+"px; left:"+(e.calcPos(e.curTable).left+u-4)+"px;"),e.curTable.closest("li")&&(y=e.curTable.closest("li").offsetWidth);var Q=e.curTable.style.width.indexOf("%")>-1;if(Q&&parseFloat(e.curTable.style.width.split("%")[0])>100){e.curTable.style.width="100%";return}if(!Q&&e.curTable.offsetWidth>e.contentModule.getEditPanel().offsetWidth){e.curTable.style.width=g+"px";return}e.curTable.style.width=Q?e.convertPixelToPercentage(u+r,y)+"%":u+r+"px"}}})},a.prototype.getCurrentColWidth=function(t,e){var i=0;return t.style.width!==""&&t.style.width.includes("%")?i=parseFloat(t.style.width.split("%")[0]):i=this.convertPixelToPercentage(t.offsetWidth,e),i},a.prototype.getCurrentTableWidth=function(t,e){var i=0;return i=t/e*100,i},a.prototype.findFirstLastColCells=function(t,e){for(var i=[],n=t.rows,r=[],s=function(l){for(var c=e?0:n[l].cells.length-1,p=n[l].cells[c],d=1;d<p.rowSpan;d++){var u=l+d+"-"+c;r.push(u)}var m=l+"-"+c;(r.length===0||e&&r.indexOf(m)===-1||!e&&r.indexOf(m)===-1&&r.every(function(f){return f.split("-")[0]!==l.toString()}))&&i.push(p)},o=0;o<n.length;o++)s(o);return i},a.prototype.convertPixelToPercentage=function(t,e){return t/e*100},a.prototype.cancelResizeAction=function(){this.isResizeBind=!0,C.remove(this.contentModule.getDocument(),x.touchMoveEvent,this.resizing),C.remove(this.contentModule.getDocument(),x.touchEndEvent,this.resizeEnd),this.removeResizeElement()},a.prototype.resizeEnd=function(t){this.resizeBtnInit(),this.isResizeBind=!0,C.remove(this.contentModule.getDocument(),x.touchMoveEvent,this.resizing),C.remove(this.contentModule.getDocument(),x.touchEndEvent,this.resizeEnd),this.contentModule.getEditPanel().querySelector(".e-table-box")&&this.contentModule.getEditPanel().contains(this.contentModule.getEditPanel().querySelector(".e-table-box"))&&this.removeResizeElement(),this.helper&&this.contentModule.getEditPanel().contains(this.helper)&&(E(this.helper),this.helper=null),this.resetResizeHelper(this.curTable),this.pageX=null,this.pageY=null,this.moveEle=null;for(var e=this.curTable.querySelectorAll("tr"),i=[],n=0;n<e.length;n++){var r=parseFloat(e[n].clientHeight.toString())/parseFloat(this.curTable.clientHeight.toString())*100;i[n]=r}for(var n=0;n<e.length;n++)e[n].parentElement.nodeName==="THEAD"&&(e[n].parentElement.style.height=i[n]+"%"),e[n].style.height=i[n]+"%";var s={event:t,requestType:"table"};this.parent.trigger(nh,s),this.parent.formatter.saveData(),this.resizeEndTime=new Date().getTime()},a.prototype.resetResizeHelper=function(t){var e=this.parent.element.querySelectorAll(".e-table-rhelper.e-column-helper");Array.from(e).forEach(function(l){l.parentNode&&l.parentNode.removeChild(l)});var i=this.parent.element.querySelectorAll(".e-table-rhelper.e-row-helper");Array.from(i).forEach(function(l){l.parentNode&&l.parentNode.removeChild(l)}),t.style.width||(t.style.width=t.offsetWidth+"px");var n=t.querySelector("colgroup");if(n){for(var r=0;r<t.rows.length;r++)for(var s=0;s<t.rows[r].cells.length;s++){var o=this.convertPixelToPercentage(t.rows[r].cells[s].offsetWidth,parseInt(getComputedStyle(t).width,10))+"%";t.rows[r].cells[s].style.width=o}t.removeChild(n)}},a.prototype.resizeBtnInit=function(){return this.resizeBtnStat={column:!1,row:!1,tableBox:!1}},a.prototype.addRow=function(t,e,i){var n;i&&(n={item:{command:"Table",subCommand:"InsertRowAfter"}});var r={selection:t,subCommand:i?n.item.subCommand:e.item.subCommand};this.parent.formatter.process(this.parent,i?n:e,e,r)},a.prototype.addColumn=function(t,e){this.parent.formatter.process(this.parent,e,e,{selection:t,width:this.parent.tableSettings.width,subCommand:e.item.subCommand})},a.prototype.removeRowColumn=function(t,e){this.parent.formatter.process(this.parent,e,e,{selection:t,subCommand:e.item.subCommand}),this.hideTableQuickToolbar()},a.prototype.removeTable=function(t,e,i){var n;i&&(n={item:{command:"Table",subCommand:"TableRemove"}});var r={selection:t,subCommand:i?n.item.subCommand:e.item.subCommand};this.parent.formatter.process(this.parent,i?n:e,e.originalEvent,r),this.contentModule.getEditPanel().focus(),(this.parent.inputElement.innerHTML===null||this.parent.inputElement.innerHTML==="")&&(this.parent.enterKey==="DIV"?this.contentModule.getEditPanel().innerHTML="<div><br/></div>":this.parent.enterKey==="BR"?this.contentModule.getEditPanel().innerHTML="<br/>":this.contentModule.getEditPanel().innerHTML="<p><br/></p>"),this.removeResizeElement(),this.hideTableQuickToolbar()},a.prototype.renderDlgContent=function(t){var e=this,i=t.args.originalEvent.target;if(x.isDevice||this.parent.inlineMode.enable||!h(b(i,".e-rte-text-popup"))){this.insertTableDialog(t);return}if(this.popupObj){this.popupObj.hide();return}this.hideTableQuickToolbar();var n="1X1",r=this.l10n.getConstant("inserttablebtn");this.dlgDiv=this.parent.createElement("div",{className:"e-rte-table-popup"+this.parent.getCssClass(!0),id:this.rteID+"_table"}),this.tblHeader=this.parent.createElement("div",{className:"e-rte-popup-header"+this.parent.getCssClass(!0)}),this.tblHeader.innerHTML=n,this.dlgDiv.appendChild(this.tblHeader);var s=this.parent.createElement("div",{className:"e-rte-table-span"+this.parent.getCssClass(!0)});this.drawTable(s,t),this.dlgDiv.appendChild(s),this.dlgDiv.appendChild(this.parent.createElement("span",{className:"e-span-border"+this.parent.getCssClass(!0)}));var o=this.parent.createElement("button",{className:"e-insert-table-btn"+this.parent.getCssClass(!0),id:this.rteID+"_insertTable",attrs:{type:"button",tabindex:"0"}});h(this.parent.getToolbarElement().querySelector(".e-expended-nav"))||this.parent.getToolbarElement().querySelector(".e-expended-nav").setAttribute("tabindex","1"),this.dlgDiv.appendChild(o),this.createTableButton=new En({iconCss:"e-icons e-create-table",content:r,cssClass:"e-flat"+this.parent.getCssClass(!0),enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.createTableButton.isStringTemplate=!0,this.createTableButton.appendTo(o),C.add(o,"click",this.insertTableDialog,{self:this,args:t.args,selection:t.selection}),this.parent.getToolbar().parentElement.appendChild(this.dlgDiv);var l=t.args.originalEvent.target;l=l.classList.contains("e-toolbar-item")?l.firstChild:l.parentElement,this.popupObj=new At(this.dlgDiv,{targetType:"relative",relateTo:l,collision:{X:"fit",Y:"none"},offsetY:8,viewPortElement:this.parent.element,position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(c){C.remove(o,"click",e.insertTableDialog),E(o),e.createTableButton&&!e.createTableButton.isDestroyed&&(e.createTableButton.destroy(),e.createTableButton.element=null,e.createTableButton=null),e.parent.isBlur=!1,e.popupObj.destroy(),E(e.popupObj.element),e.popupObj=null}}),k([this.popupObj.element],"e-popup-open"),h(this.parent.cssClass)||k([this.popupObj.element],this.parent.getCssClass()),o.focus(),this.popupObj.refreshPosition(l)},a.prototype.onIframeMouseDown=function(){this.popupObj&&this.popupObj.hide(),this.parent.inlineMode.enable&&this.editdlgObj&&this.editdlgObj.hide(),!h(this.parent)&&!h(this.parent.contentModule)&&!h(this.parent.contentModule.getEditPanel())&&this.removeResizeElement()},a.prototype.docClick=function(t){var e=t.args.target;e&&e.classList&&(this.popupObj&&!b(e,"[id='"+this.popupObj.element.id+"']")||this.editdlgObj&&!b(e,"#"+this.editdlgObj.element.id))&&!e.classList.contains("e-create-table")&&e.offsetParent&&!e.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")&&(this.popupObj&&this.popupObj.hide(),this.editdlgObj&&(this.parent.notify(Cn,{closedBy:"outside click"}),this.editdlgObj.hide()),this.parent.isBlur=!0,kn(this.parent.element,"focusout"));var i=b(e,"td"),n=!!(i&&this.parent.contentModule.getEditPanel().contains(i));if(e&&e.tagName!=="TD"&&e.tagName!=="TH"&&!n&&b(e,".e-rte-quick-popup")===null&&e.offsetParent&&!e.offsetParent.classList.contains("e-quick-dropdown")&&!e.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")&&!b(e,".e-rte-dropdown-popup")&&!b(e,".e-rte-elements")){var r=!!(e&&e.closest(".e-toolbar"));r||this.removeCellSelectClasses(),this.removeTableSelection(),x.isIE||this.hideTableQuickToolbar()}e&&e.classList&&!e.classList.contains(Un)&&!e.classList.contains(Vn)&&!e.classList.contains(_n)&&this.removeResizeElement()},a.prototype.drawTable=function(t,e){for(var i,n,r=0;r<3;r++){i=this.parent.createElement("div",{className:"e-rte-table-row"+this.parent.getCssClass(!0),attrs:{"data-column":""+r}}),C.add(i,"mouseleave",this.tableCellLeave,this);for(var s=0;s<10;s++)n=this.parent.createElement("div",{className:"e-rte-tablecell e-default"+this.parent.getCssClass(!0),attrs:{"data-cell":""+s}}),i.appendChild(n),n.style.display="inline-block",s===0&&r===0&&k([n],"e-active"),C.add(n,"mousemove",this.tableCellSelect,this),C.add(n,"mouseup",this.tableCellClick,{self:this,args:e.args,selection:e.selection});t.appendChild(i)}},a.prototype.editTable=function(t){var e=this;this.createDialog(t);var i=this.tableDlgContent(t),n=this.l10n.getConstant("dialogUpdate"),r=this.l10n.getConstant("dialogCancel"),s=this.l10n.getConstant("tableEditHeader");this.editdlgObj.setProperties({height:"initial",width:"290px",content:i,header:s,buttons:[{click:this.applyProperties.bind(this,t),buttonModel:{content:n,cssClass:"e-flat e-size-update"+this.parent.getCssClass(!0),isPrimary:!0}},{click:function(o){e.cancelDialog(o)},buttonModel:{cssClass:"e-flat e-cancel"+this.parent.getCssClass(!0),content:r}}],cssClass:this.editdlgObj.cssClass+" e-rte-edit-table-prop-dialog"}),this.editdlgObj.element.style.maxHeight="none",this.editdlgObj.content.querySelector("input").focus(),this.hideTableQuickToolbar()},a.prototype.insertTableDialog=function(t){var e=this.self?this.self:this;e.popupObj&&e.popupObj.hide(),e.createDialog(t);var i=e.tableCellDlgContent(),n=e.l10n.getConstant("dialogInsert"),r=e.l10n.getConstant("dialogCancel");h(e.editdlgObj)||(e.editdlgObj.setProperties({height:"initial",width:"290px",content:i,buttons:[{click:e.customTable.bind(this,t),buttonModel:{content:n,cssClass:"e-flat e-insert-table "+e.parent.cssClass,isPrimary:!0}},{click:function(s){e.cancelDialog(s)},buttonModel:{cssClass:"e-flat e-cancel "+e.parent.cssClass,content:r}}]}),h(e.parent.cssClass)||e.editdlgObj.setProperties({cssClass:e.parent.cssClass}),e.editdlgObj.element.style.maxHeight="none",e.editdlgObj.content.querySelector("input").focus())},a.prototype.tableCellDlgContent=function(){var t=this.l10n.getConstant("columns"),e=this.l10n.getConstant("rows"),i=this.parent.createElement("div",{className:"e-cell-wrap"+this.parent.getCssClass(!0)}),n='<div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text"  data-role ="none" id="tableColumn" class="e-table-column'+this.parent.getCssClass(!0)+'"/></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" id="tableRow" class="e-table-row'+this.parent.getCssClass(!0)+'" /></div>',r=xi(n);return i.appendChild(r),this.columnTextBox=new Mt({format:"n0",min:1,value:3,placeholder:t,floatLabelType:"Auto",max:50,enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:this.parent.getCssClass()}),this.columnTextBox.isStringTemplate=!0,this.columnTextBox.appendTo(i.querySelector("#tableColumn")),this.rowTextBox=new Mt({format:"n0",min:1,value:3,placeholder:e,floatLabelType:"Auto",max:1e3,enableRtl:this.parent.enableRtl,locale:this.parent.locale,cssClass:this.parent.getCssClass()}),this.rowTextBox.isStringTemplate=!0,this.rowTextBox.appendTo(i.querySelector("#tableRow")),i},a.prototype.clearDialogObj=function(){this.editdlgObj&&(this.editdlgObj.destroy(),E(this.editdlgObj.element),this.editdlgObj=null)},a.prototype.createDialog=function(t){var e=this;if(this.editdlgObj){this.editdlgObj.hide({returnValue:!0});return}var i=this.parent.createElement("div",{className:"e-rte-edit-table"+this.parent.getCssClass(!0),id:this.rteID+"_tabledialog"});this.parent.rootContainer.appendChild(i);var n=this.l10n.getConstant("dialogInsert"),r=this.l10n.getConstant("dialogCancel"),s=this.l10n.getConstant("tabledialogHeader"),o={header:s,cssClass:Oe+this.parent.getCssClass(!0),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:x.isDevice?"290px":"340px",height:"initial",position:{X:"center",Y:x.isDevice?"center":"top"},isModal:x.isDevice,buttons:[{buttonModel:{content:n,cssClass:"e-flat e-insert-table"+this.parent.getCssClass(!0),isPrimary:!0}},{click:function(l){e.cancelDialog(l)},buttonModel:{cssClass:"e-flat e-cancel"+this.parent.getCssClass(!0),content:r}}],target:x.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(l){e.parent.isBlur=!1,e.editdlgObj.destroy(),E(e.editdlgObj.element),e.dialogRenderObj.close(l),e.editdlgObj=null}};this.editdlgObj=this.dialogRenderObj.render(o),this.editdlgObj.appendTo(i),this.quickToolObj&&this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup(),this.quickToolObj&&this.quickToolObj.textQTBar&&this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)&&this.quickToolObj.textQTBar.hidePopup()},a.prototype.customTable=function(t,e){var i=this.self?this.self:this;if(i.rowTextBox.value&&i.columnTextBox.value){var n=x.isDevice||!h(t.args)&&!h(t.args.originalEvent)&&t.args.originalEvent.action==="insert-table"||i.parent.inlineMode.enable||!h(i.parent.quickToolbarSettings.text)&&!(t instanceof PointerEvent)?t:this;i.tableInsert(i.rowTextBox.value,i.columnTextBox.value,e,n)}},a.prototype.cancelDialog=function(t){this.parent.isBlur=!1,this.editdlgObj.hide({returnValue:!0})},a.prototype.applyProperties=function(t,e){var i=this.editdlgObj.element,n=b(t.selectNode[0],"table");if(n.style.width=i.querySelector(".e-table-width").value+"px",i.querySelector(".e-cell-padding").value!=="")for(var r=n.querySelectorAll("td"),s=0;s<r.length;s++){var o="";r[s].style.padding===""?o=r[s].getAttribute("style")+" padding:"+i.querySelector(".e-cell-padding").value+"px;":(r[s].style.padding=i.querySelector(".e-cell-padding").value+"px",o=r[s].getAttribute("style")),r[s].setAttribute("style",o)}n.cellSpacing=i.querySelector(".e-cell-spacing").value,!h(n.cellSpacing)&&n.cellSpacing!=="0"?k([n],kl):de([n],kl),this.parent.formatter.saveData(),this.editdlgObj.hide({returnValue:!0})},a.prototype.tableDlgContent=function(t){var e=t.selectParent[0],i=this.l10n.getConstant("tableWidth"),n=this.l10n.getConstant("cellpadding"),r=this.l10n.getConstant("cellspacing"),s=this.parent.createElement("div",{className:"e-table-sizewrap"+this.parent.getCssClass(!0)}),o=b(e,"table").getClientRects()[0].width,l=b(e,"td").style.padding,c=b(e,"table").getAttribute("cellspacing"),p='<div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" id="tableWidth" class="e-table-width'+this.parent.getCssClass(!0)+'"  /></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" id="cellPadding" class="e-cell-padding'+this.parent.getCssClass(!0)+'" /> </div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" id="cellSpacing" class="e-cell-spacing'+this.parent.getCssClass(!0)+'" /></div>',d=xi(p);return s.appendChild(d),this.tableWidthNum=new Mt({format:"n0",min:0,value:o,placeholder:i,floatLabelType:"Auto",enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.tableWidthNum.isStringTemplate=!0,this.tableWidthNum.appendTo(s.querySelector("#tableWidth")),this.tableCellPadding=new Mt({format:"n0",min:0,value:l!==""?parseInt(l,null):0,placeholder:n,floatLabelType:"Auto",enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.tableCellPadding.isStringTemplate=!0,this.tableCellPadding.appendTo(s.querySelector("#cellPadding")),this.tableCellSpacing=new Mt({format:"n0",min:0,value:c!==""&&!h(c)?parseInt(c,null):0,placeholder:r,floatLabelType:"Auto",enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.tableCellSpacing.isStringTemplate=!0,this.tableCellSpacing.appendTo(s.querySelector("#cellSpacing")),s},a.prototype.destroy=function(){this.isDestroyed||(this.resizeIconPositionTime&&(clearTimeout(this.resizeIconPositionTime),this.resizeIconPositionTime=null),this.removeEventListener(),C.remove(this.parent.contentModule.getDocument(),"selectionchange",this.tableCellsKeyboardSelection),this.curTable&&C.remove(this.curTable,"mouseleave",this.tableMouseLeave),this.tableCellSpacing&&!this.tableCellSpacing.isDestroyed&&(this.tableCellSpacing.destroy(),this.tableCellSpacing=null),this.tableCellPadding&&!this.tableCellPadding.isDestroyed&&(this.tableCellPadding.destroy(),this.tableCellPadding=null),this.tableWidthNum&&!this.tableWidthNum.isDestroyed&&(this.tableWidthNum.destroy(),this.tableWidthNum=null),this.rowTextBox&&!this.rowTextBox.isDestroyed&&(this.rowTextBox.destroy(),this.rowTextBox=null),this.columnTextBox&&!this.columnTextBox.isDestroyed&&(this.columnTextBox.destroy(),this.columnTextBox=null),this.createTableButton&&!this.createTableButton.isDestroyed&&(this.createTableButton.destroy(),this.createTableButton=null),this.isDestroyed=!0)},a.prototype.moduleDestroy=function(){this.parent=null},a.prototype.getModuleName=function(){return"table"},a.prototype.afterKeyDown=function(){var t=this;this.curTable&&(this.resizeIconPositionTime=setTimeout(function(){t.updateResizeIconPosition()},1))},a.prototype.updateResizeIconPosition=function(){var t=this.parent.contentModule.getEditPanel().querySelector(".e-table-box");if(!h(t)){var e=this.calcPos(this.curTable);t.style.cssText="top: "+(e.top+parseInt(getComputedStyle(this.curTable).height,10)-4)+"px; left:"+(e.left+parseInt(getComputedStyle(this.curTable).width,10)-4)+"px;"}},a}(),Md=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Y,this.removeEventListener,this),this.parent.on(Cn,this.documentClickClosedBy,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Y,this.removeEventListener),this.parent.off(Cn,this.documentClickClosedBy))},a.prototype.render=function(t){var e;return t.beforeOpen=this.beforeOpen.bind(this),t.open=this.open.bind(this),t.position={X:"center",Y:t.target!=="string"&&t.target.nodeName==="BODY"&&!h(t.position)?t.position.Y:this.getDialogPosition()},h(t.close)&&(t.close=this.close.bind(this)),t.beforeClose=this.beforeClose.bind(this),e=new Bh(t),e.isStringTemplate=!0,e},a.prototype.beforeOpen=function(t){if(t.element.classList.contains("e-dialog")){var e=b(t.target,"form");h(e)||(this.dialogEle=t.element,this.dialogEle.addEventListener("keydown",this.handleEnterKeyDown))}this.parent.trigger(_c,t,this.beforeOpenCallback.bind(this,t))},a.prototype.handleEnterKeyDown=function(t){t.code==="Enter"&&t.preventDefault()},a.prototype.beforeOpenCallback=function(t){t.cancel&&this.parent.notify(ai,null)},a.prototype.open=function(t){this.parent.trigger(Wc,t)},a.prototype.documentClickClosedBy=function(t){this.outsideClickClosedBy=t.closedBy},a.prototype.beforeClose=function(t){this.dialogEle&&this.dialogEle.removeEventListener("keydown",this.handleEnterKeyDown),t.closedBy=this.outsideClickClosedBy==="outside click"?this.outsideClickClosedBy:t.closedBy,this.parent.trigger(Qc,t,function(e){e.cancel||e.container.classList.contains("e-popup-close")&&(e.cancel=!0)}),this.outsideClickClosedBy=""},a.prototype.getDialogPosition=function(){var t=this.parent.element.getBoundingClientRect().top;if(t<0){for(var e=0,i=this.parent.element;i.nodeName!=="BODY";){var n=i.getBoundingClientRect().top;n>0&&(e=n),i=i.parentElement}return t=Math.abs(t)+e,t.toString()}else return"top"},a.prototype.close=function(t){this.parent.trigger(Kc,t)},a}(),Bd=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rd=`
<!DOCTYPE html> 
    <html>
         <head>
            <meta charset='utf-8' /> 
            <style>
                @charset "UTF-8";
                body {
                    font-family: "Roboto", sans-serif;
                    font-size: 14px;
                }
                html, body{height: 100%;margin: 0;}
                body.e-cursor{cursor:default}
                span.e-selected-node	{background-color: #939393;color: white;}
                span.e-selected-node.e-highlight {background-color: #1d9dd8;}
                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}
                .e-rte-image, .e-rte-video {border: 0;cursor: pointer;display:
                    block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}
                .e-rte-audio {border: 0;cursor: pointer;display:
                        block;float: none;margin: 5px auto;max-width: 100%;position: relative;}
                .e-rte-image.e-imginline, .e-rte-audio.e-audio-inline, .e-rte-video.e-video-inline {display: inline-block;float: none;
                    margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));padding: 1px;vertical-align: bottom;}
                .e-rte-image.e-imgcenter, .e-rte-video.e-video-center {cursor: pointer;display: block;float: none;margin: 5px auto;max-width: 100%;position: relative;}
                .e-rte-image.e-imgright, .e-rte-video.e-video-right { float: right; margin: 0 auto;margin-left: 5px;text-align: right;}
                .e-rte-image.e-imgleft, .e-rte-video.e-video-left {float: left;margin: 0 auto;margin-right: 5px;text-align: left;}
                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}
                .e-img-caption.e-caption-inline {display: inline-block;float: none;
                    margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));
                    position: relativetext-align: center;vertical-align: bottom;}
                .e-rte-img-caption.e-imgcenter {display: contents; margin-left: auto; margin-right: auto;}
                .e-rte-img-caption.e-imgright {display: contents; margin-left: auto; margin-right: 0;}
                .e-rte-img-caption.e-imgleft {display: contents;margin-left: 0;margin-right: auto;}
                .e-img-caption.e-rte-img-caption.e-imgbreak {display: contents;}
                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;
                    margin: auto;opacity: .9;text-align: center;width: 100%;}
                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}
                .e-imgleft, .e-video-left {float: left;margin: 0 5px 0 0;text-align: left;}
                .e-imgright, .e-video-right {float: right;margin: 0 0 0 5px;text-align: right;}
                .e-imgcenter, .e-video-center {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}
                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}
                .e-imginline , .e-audio-inline, .e-video-inline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;
                    max-width: calc(100% - (2 * 5px));vertical-align: bottom;}
                .e-imgbreak, .e-audio-break, .e-video-break {border: 0;cursor: pointer;
                    display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}
                .e-rte-image.e-img-focus:not(.e-resize), .e-audio-focus:not(.e-resize), .e-video-focus:not(.e-resize) {border: solid 2px #4a90e2;}
                img.e-img-focus::selection, audio.e-audio-focus::selection, .e-video-focus::selection { background: transparent;color: transparent;}
                span.e-rte-imageboxmark, span.e-rte-videoboxmark {  width: 10px; height: 10px; position: absolute; display: block;
                    background: #4a90e2; border: 1px solid #fff; z-index: 1000;}
                .e-mob-rte.e-mob-span span.e-rte-imageboxmark, .e-mob-rte.e-mob-span span.e-rte-videoboxmark { background: #4a90e2; border: 1px solid #fff; }
                .e-mob-rte span.e-rte-imageboxmark, .e-mob-rte span.e-rte-videoboxmark { background: #fff; border: 1px solid #4a90e2;
                    border-radius: 15px; height: 20px; width: 20px; }
                .e-mob-rte.e-mob-span span.e-rte-imageboxmark, .e-mob-rte.e-mob-span span.e-rte-videoboxmark { background: #4a90e2; border: 1px solid #fff; }
                .e-rte-content .e-content img.e-resize, .e-rte-content .e-content video.e-resize { z-index: 1000; }
                .e-rte-content { font-size: 14px; }
                .e-content { font-weight: normal; line-height: 1.5; font-size: 1em; }
                .e-img-caption .e-img-inner { outline: 0; }
                .e-rte-img-caption.e-imgleft .e-img-inner { float: left; text-align: left; }
                .e-rte-img-caption.e-imgright .e-img-inner { float: right; text-align: right; }
                .e-rte-img-caption.e-imgleft .e-img-wrap, .e-rte-img-caption.e-imgright .e-img-wrap { display: contents; }
                .e-img-caption a:focus-visible { outline: none; }
                .e-rte-img-caption .e-rte-image.e-imgright { margin-left: auto; margin-right: 0; }
                .e-rte-img-caption .e-rte-image.e-imgleft { margin: 0; }
                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;
                    overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}
                p{margin: 0 0 10px;margin-bottom: 10px;}
                li{margin-bottom: 10px;}
                table{margin-bottom: 10px;}
                h1{ font-size: 2.857em; font-weight: 600; line-height: 1.2; margin: 10px 0; }
                h2{ font-size: 2.285em; font-weight: 600; line-height: 1.2; margin: 10px 0; }
                h3{ font-size: 2em; font-weight: 600; line-height: 1.2; margin: 10px 0; }
                h4{ font-size: 1.714em; font-weight: 600; line-height: 1.2; margin: 10px 0; }
                h5{ font-size: 1.428em; font-weight: 600; line-height: 1.2; margin: 10px 0; }
                h6{ font-size: 1.142em; line-height: 600; line-height: 1.5; margin: 10px 0; }
                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}
                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;
                    font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;
                    white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}
                strong, b{font-weight: 700;}
                a{text-decoration: none;user-select: auto;}
                a:hover{text-decoration: underline;};
                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}
                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}
                ul:last-child{margin-bottom: 0;}
                table { border-collapse: collapse; empty-cells: show;}
                table td,table th {border: 1px solid #BDBDBD; height: 20px; padding: 2px 5px; vertical-align: middle;}
                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}
                table th {background-color: #E0E0E0;}
                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} 
                table .e-cell-select {border: 1px double #4a90e2;}
                table.e-cell-select {position: relative;}
                table.e-cell-select::after { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; border: 2px solid #4a90e2; pointer-events: none;}
                table td.e-cell-select.e-multi-cells-select, table th.e-cell-select.e-multi-cells-select {border: 1px solid #dee2e6; position: relative; }
                table td.e-cell-select.e-multi-cells-select::after, table th.e-cell-select.e-multi-cells-select::after {background-color: rgba(13, 110, 253, 0.08); content: "";
                    position: absolute; top: 0; left: 0; width: 100%; height: 100%; bottom: 0; pointer-events: none; right: 0;}
                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }
                span.e-table-box.e-rmob {height: 14px;width: 14px;}
                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat;
                    bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }
                .e-row-resize { cursor: row-resize; height: 1px;}
                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}
                .e-table-rhelper.e-column-helper { width: 1px; }
                .e-table-rhelper.e-row-helper {height: 1px;}
                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid;
                    border-top: 6px solid transparent; content: ''; display: block; height: 0;
                    position: absolute; right: 4px; top: 4px; width: 20px; }
                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid;
                    border-top: 6px solid transparent; content: ''; display: block;
                    height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }
                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }
                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }
                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }
                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }
                .e-table-rhelper { background-color: #4a90e2;}
                .e-rtl { direction: rtl; }
                .e-rte-placeholder::before { content: attr(placeholder); opacity: 0.54; overflow: hidden; padding-top: 16px; position: absolute; text-align: start; top: 0; z-index: 1; }
                li ol, li ul { margin-block-start: 10px;}
                .e-resize-enabled, .e-count-enabled { padding-bottom: 0px; }
                td.e-multi-cells-select ::selection, th.e-multi-cells-select ::selection { background-color: transparent; }
                td.e-multi-cells-select, th.e-multi-cells-select { user-select: none !important; }
            </style>
        </head>`,Ad=function(a){Bd(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.renderPanel=function(){var e=this.parent,i=Mr(e.value,e),n='<body spellcheck="false" autocorrect="off" contenteditable="true">'+i+"</body></html>",r=Rd+n,s=this.parent.createElement("iframe",{id:this.parent.getID()+"_rte-view",className:"e-rte-content",attrs:{srcdoc:r}});s.setAttribute("role","none"),this.setPanel(s),e.rootContainer.appendChild(s),s.contentDocument.body.id=this.parent.getID()+"_rte-edit-view",s.contentDocument.body.setAttribute("aria-owns",this.parent.getID()),s.contentDocument.open(),r=this.setThemeColor(r,{color:"#333"}),s.contentDocument.write(r),s.contentDocument.close(),e.enableRtl&&this.contentPanel.contentDocument.body.setAttribute("class","e-rtl")},t.prototype.setThemeColor=function(e,i){var n=getComputedStyle(this.parent.element,".e-richtexteditor").getPropertyValue("color");return e.replace(i.color,n)},t.prototype.getEditPanel=function(){var e;return h(this.contentPanel.contentDocument)?e=this.parent.inputElement:e=this.contentPanel.contentDocument.body,e},t.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},t}(dh),Pd=function(){function a(t){this.parent=t}return a.prototype.quickToolbarOpen=function(){var t=this.popupObj;this.parent.trigger(Xc,t)},a.prototype.renderPopup=function(t){this.setPanel(t.element),this.renderPanel(),t.popupObj=new At(t.element,{targetType:"relative",relateTo:this.parent.element,open:this.quickToolbarOpen.bind(this)}),this.popupObj=t.popupObj,t.popupObj.hide()},a.prototype.renderPanel=function(){this.getPanel().classList.add(cp)},a.prototype.getPanel=function(){return this.popupPanel},a.prototype.setPanel=function(t){this.popupPanel=t},a}(),va=function(){function a(t,e){this.tools={},this.parent=t,this.locator=e,this.isDestroyed=!1,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?_e(this.tools,Mi,wa(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Mi,(this.parent.toolbarSettings.enable||this.parent.quickToolbarSettings.enable)&&(this.toolbarRenderer=new Al(this.parent,this.locator),this.renderFactory.addRenderer(X.Toolbar,this.toolbarRenderer))}return a.prototype.addEventListener=function(){this.parent.on(Rt,this.setRtl,this),this.parent.on(Le,this.setCssClass,this)},a.prototype.removeEventListener=function(){this.parent.off(Rt,this.setRtl),this.parent.off(Le,this.setCssClass)},a.prototype.setCssClass=function(t){h(this.toolbarObj)||(h(t.oldCssClass)?this.toolbarObj.setProperties({cssClass:(this.toolbarObj.cssClass+" "+t.cssClass).trim()}):this.toolbarObj.setProperties({cssClass:(this.toolbarObj.cssClass.replace(t.oldCssClass,"").trim()+" "+t.cssClass).trim()}))},a.prototype.setRtl=function(t){h(this.toolbarObj)||this.toolbarObj.setProperties({enableRtl:t.enableRtl})},a.prototype.getClass=function(t){var e;switch(t){case"fontsize":e="e-rte-inline-size-template";break;case"fontcolor":case"backgroundcolor":e="e-rte-inline-color-template";break;default:e="e-rte-inline-template";break}return e},a.prototype.getTemplateObject=function(t,e){var i;switch(t){case"fontcolor":case"backgroundcolor":case"numberformatlist":case"bulletformatlist":i="span";break;default:i="button";break}return{command:this.tools[t.toLocaleLowerCase()].command,subCommand:this.tools[t.toLocaleLowerCase()].subCommand,template:this.parent.createElement(i,{id:this.parent.getID()+"_"+e+"_"+this.tools[t.toLocaleLowerCase()].id}).outerHTML,cssClass:this.parent.inlineMode.enable?this.getClass(t):"",tooltipText:on(t,this.locator)}},a.prototype.getObject=function(t,e){var i=t.toLowerCase();if(Ea.indexOf(i)!==-1)return this.getTemplateObject(i,e);switch(i){case"|":return{type:"Separator"};case"-":return{type:"Separator",cssClass:gp};default:return{id:this.parent.getID()+"_"+e+"_"+this.tools[i.toLocaleLowerCase()].id,prefixIcon:this.tools[i.toLocaleLowerCase()].icon,tooltipText:on(i,this.locator),command:this.tools[i.toLocaleLowerCase()].command,subCommand:this.tools[i.toLocaleLowerCase()].subCommand}}},a.prototype.getItems=function(t,e){var i=this;if(this.parent.toolbarSettings.items.length<1)return[];for(var n=[],r=function(f){switch(typeof f){case"string":n.push(s.getObject(f,e));break;default:if(!h(f.click)){var g=f,y=g.click;g.click=function(){if(g.undo&&i.parent.formatter.getUndoRedoStack().length===0&&i.parent.formatter.saveData(),y.call(i),i.parent.formatter.getUndoRedoStack().length>0){var S=i.parent.createElement("div"),T=i.parent.formatter.getUndoRedoStack()[i.parent.formatter.getUndoRedoStack().length-1],L=T.text.cloneNode(!0);if(S.appendChild(L),S.innerHTML.trim()===i.parent.inputElement.innerHTML.trim())return}g.undo&&i.parent.formatter.saveData()}}n.push(f)}},s=this,o=0,l=t;o<l.length;o++){var c=l[o];r(c)}if(this.parent.showTooltip)for(var p=0;p<n.length;p++){var d=n[p].tooltipText,u=void 0,m=window.navigator.platform.toLocaleLowerCase().includes("mac");Ns[""+d]?u=m?Ns[""+d].replace("Ctrl+","⌘").replace("Shift+","⇧").replace("Alt+","⌥"):Ns[""+d]:u=d,u&&(n[p].command==="Images"&&n[p].subCommand==="InsertLink"||(n[p].tooltipText=d!==u?d+" ("+u+")":d))}return n},a.prototype.getToolbarOptions=function(t){return{target:t.target,rteToolbarObj:this,items:this.getItems(t.items,t.container),overflowMode:t.mode,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,cssClass:t.cssClass,type:t.container}},a.prototype.render=function(t){this.toolbarRenderer=this.renderFactory.getRenderer(X.Toolbar),this.toolbarRenderer&&this.toolbarRenderer.isDestroyed&&(this.toolbarRenderer=new Al(this.parent,this.locator)),this.toolbarRenderer.renderToolbar(this.getToolbarOptions(t))},a.prototype.destroy=function(){this.isDestroyed||(this.removeEventListener(),this.toolbarObj&&!this.toolbarObj.isDestroyed&&(this.toolbarObj.destroy(),this.toolbarObj=null),this.toolbarRenderer.destroy(),this.toolbarRenderer=null,this.tools={},this.isDestroyed=!0)},a}(),mh=function(){function a(t,e){this.parent=t,this.locator=e,this.i10n=e.getService("rteLocale"),this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener()}return a.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(X.Toolbar)},a.prototype.beforeRender=function(t){var e=t.item;e.cssClass&&k([t.element],e.cssClass)},a.prototype.dropdownContent=function(t,e,i){return'<span style="display: inline-flex;width:'+(e==="quick"?"auto":t)+'" ><span class="e-rte-dropdown-btn-text">'+i+"</span></span>"},a.prototype.renderDropDowns=function(t){var e=this;this.initializeInstance();var i=t.containerType,n=t.container;Ea.forEach(function(r){var s=void 0;if(La(r,t.items)!==-1)switch(r){case"numberformatlist":{if(s=F("#"+e.parent.getID()+"_"+i+"_NumberFormatList",n),h(s)||s.classList.contains(He))return;var o=e.parent.numberFormatList.types.slice();o.forEach(function(y){Object.defineProperties(y,{command:{value:"Lists",enumerable:!0},subCommand:{value:"NumberFormatList",enumerable:!0}})}),e.numberFormatListDropDown=e.toolbarRenderer.renderListDropDown({cssClass:"e-order-list "+Oe+" "+Or,itemName:"NumberFormatList",items:o,element:s});break}case"bulletformatlist":{if(s=F("#"+e.parent.getID()+"_"+i+"_BulletFormatList",n),h(s)||s.classList.contains(He))return;var l=e.parent.bulletFormatList.types.slice();l.forEach(function(y){Object.defineProperties(y,{command:{value:"Lists",enumerable:!0},subCommand:{value:"BulletFormatList",enumerable:!0}})}),e.bulletFormatListDropDown=e.toolbarRenderer.renderListDropDown({cssClass:"e-unorder-list "+Oe+" "+Or,itemName:"BulletFormatList",items:l,element:s});break}case"formats":{if(s=F("#"+e.parent.getID()+"_"+i+"_Formats",n),h(s)||s.classList.contains(He))return;var c=e.parent.format.types.slice();c.forEach(function(y){Object.defineProperties(y,{command:{value:"Formats",enumerable:!0},subCommand:{value:y.value,enumerable:!0}})});var p=h(e.parent.format.default)?c[0].text:e.parent.format.default;e.formatDropDown=e.toolbarRenderer.renderDropDownButton({iconCss:i==="quick"?"e-formats e-icons":"",content:e.dropdownContent(e.parent.format.width,i,i==="quick"?"":Ve(c,p,"text","text")),cssClass:Ze+" "+gt+" "+yp,itemName:"Formats",items:c,element:s});break}case"fontname":{if(s=F("#"+e.parent.getID()+"_"+i+"_FontName",n),h(s)||s.classList.contains(He))return;var d=e.parent.fontFamily.items.slice();d.forEach(function(y){Object.defineProperties(y,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontName",enumerable:!0}})});var u=h(e.parent.fontFamily.default)?d[0].text:e.parent.fontFamily.default;e.fontNameDropDown=e.toolbarRenderer.renderDropDownButton({iconCss:i==="quick"?"e-font-name e-icons":"",content:e.dropdownContent(e.parent.fontFamily.width,i,i==="quick"?"":Ve(d,u,"text","text")==="Default"?e.i10n.getConstant("fontName"):Ve(d,u,"text","text")),cssClass:Ze+" "+gt+" "+Cp,itemName:"FontName",items:d,element:s}),h(e.parent.fontFamily.default)||(e.getEditNode().style.fontFamily=e.parent.fontFamily.default);break}case"fontsize":{if(s=F("#"+e.parent.getID()+"_"+i+"_FontSize",n),h(s)||s.classList.contains(He))return;var m=!h(e.fontSizeDropDown)&&!h(e.fontSizeDropDown.items)&&e.fontSizeDropDown.items.length>0?e.fontSizeDropDown.items:JSON.parse(JSON.stringify(e.parent.fontSize.items.slice()));m.forEach(function(y){Object.defineProperties(y,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontSize",enumerable:!0}})});var f=h(e.parent.fontSize.default)?m[0].text:e.parent.fontSize.default,g=f==="Default"?Ve(m,f.replace(/\s/g,""),"text","text"):Ve(m,f.replace(/\s/g,""),"value","text");e.fontSizeDropDown=e.toolbarRenderer.renderDropDownButton({content:e.dropdownContent(e.parent.fontSize.width,i,Fo(g==="Default"?e.i10n.getConstant("fontSize"):g)),cssClass:Ze+" "+gt+" "+Sp,itemName:"FontSize",items:m,element:s}),h(e.parent.fontSize.default)||(e.getEditNode().style.fontSize=e.parent.fontSize.default);break}case"alignments":if(s=F("#"+e.parent.getID()+"_"+i+"_Alignments",n),h(s)||s.classList.contains(He))return;e.alignDropDown=e.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:Ze+" "+gt+" "+Tp,itemName:"Alignments",items:sn,element:s});break;case"align":case"videoalign":e.renderAlignmentDropDown(i,n,s,r);break;case"display":case"audiolayoutoption":case"videolayoutoption":e.renderDisplayDropDown(i,n,s,r);break;case"tablerows":e.rowDropDown(i,n,s);break;case"tablecolumns":e.columnDropDown(i,n,s);break;case"tablecell":e.cellDropDown(i,n,s);break;case"tablecellverticalalign":e.verticalAlignDropDown(i,n,s);break;case"styles":e.tableStylesDropDown(i,n,s);break}}),this.parent.inlineMode.enable&&this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.getUpdateItems=function(t,e){var i=t.slice();return i.forEach(function(n){Object.defineProperties(n,{command:{value:e==="Format"?"Formats":"Font",enumerable:!0},subCommand:{value:e==="Format"?n.value:e,enumerable:!0}})}),i},a.prototype.onPropertyChanged=function(t){for(var e=t.newProp,i,n,r=0,s=Object.keys(e);r<s.length;r++){var o=s[r];switch(o){case"fontFamily":if(this.fontNameDropDown)for(var l=0,c=Object.keys(e.fontFamily);l<c.length;l++){var p=c[l];switch(p){case"default":case"width":{var d=this.fontNameDropDown.items;i=h(b(this.fontNameDropDown.element,"."+or))?"toolbar":"quick";var u=h(this.parent.fontFamily.default)?d[0].text:this.parent.fontFamily.default;n=this.dropdownContent(this.parent.fontFamily.width,i,i==="quick"?"":Ve(d,u,"text","text")==="Default"?this.i10n.getConstant("fontName"):Ve(d,u,"text","text")),this.fontNameDropDown.setProperties({content:n}),h(this.parent.fontFamily.default)?this.getEditNode().style.removeProperty("font-family"):this.getEditNode().style.fontFamily=this.parent.fontFamily.default;break}case"items":this.fontNameDropDown.setProperties({items:this.getUpdateItems(e.fontFamily.items,"FontName")});break}}break;case"fontSize":if(this.fontSizeDropDown)for(var m=0,f=Object.keys(e.fontSize);m<f.length;m++){var g=f[m];switch(g){case"default":case"width":{var y=this.fontSizeDropDown.items;i=h(b(this.fontSizeDropDown.element,"."+or))?"toolbar":"quick";var S=h(this.parent.fontSize.default)?y[0].text:this.parent.fontSize.default,T=S==="Default"?Ve(y,S.replace(/\s/g,""),"text","text"):Ve(y,S.replace(/\s/g,""),"value","text");n=this.dropdownContent(this.parent.fontSize.width,i,Fo(T==="Default"?this.i10n.getConstant("fontSize"):T)),this.fontSizeDropDown.setProperties({content:n}),h(this.parent.fontSize.default)?this.getEditNode().style.removeProperty("font-size"):this.getEditNode().style.fontSize=this.parent.fontSize.default;break}case"items":this.fontSizeDropDown.setProperties({items:this.getUpdateItems(e.fontSize.items,"FontSize")});break}}break;case"format":if(this.formatDropDown)for(var L=0,w=Object.keys(e.format);L<w.length;L++){var N=w[L];switch(N){case"default":case"width":{var M=this.formatDropDown.items;i=h(b(this.formatDropDown.element,"."+or))?"toolbar":"quick";var I=h(this.parent.format.default)?M[0].text:this.parent.format.default;n=this.dropdownContent(this.parent.format.width,i,i==="quick"?"":Ve(M,I,"text","text")),this.formatDropDown.setProperties({content:n});break}case"types":this.formatDropDown.setProperties({items:this.getUpdateItems(e.format.types,"Format")});break}}break}}},a.prototype.getEditNode=function(){return this.parent.contentModule.getEditPanel()},a.prototype.rowDropDown=function(t,e,i){i=F("#"+this.parent.getID()+"_"+t+"_TableRows",e),!i.classList.contains(He)&&(this.tableRowsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-rows e-icons",cssClass:Ze+" "+gt+" "+Xt,itemName:"TableRows",items:pr,element:i}))},a.prototype.columnDropDown=function(t,e,i){i=F("#"+this.parent.getID()+"_"+t+"_TableColumns",e),!i.classList.contains(He)&&(this.tableColumnsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-columns e-icons",cssClass:Ze+" "+gt+" "+Xt,itemName:"TableColumns",items:dr,element:i}))},a.prototype.cellDropDown=function(t,e,i){i=F("#"+this.parent.getID()+"_"+t+"_TableCell",e),!i.classList.contains(He)&&(this.tableCellDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-cell e-icons",cssClass:Ze+" "+gt+" "+Xt,itemName:"TableCell",items:Yp,element:i}))},a.prototype.verticalAlignDropDown=function(t,e,i){i=F("#"+this.parent.getID()+"_"+t+"_TableCellVerticalAlign",e),!i.classList.contains(He)&&(this.tableCellVerticalAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-cell-ver-align e-icons",cssClass:Ze+" "+gt+" "+Xt,itemName:"TableCellVerticalAlign",items:ur,element:i}))},a.prototype.renderDisplayDropDown=function(t,e,i,n){i=F("#"+this.parent.getID()+"_"+t+(n==="display"?"_Display":n==="videolayoutoption"?"_VideoLayoutOption":"_AudioLayoutOption"),e),!i.classList.contains(He)&&(this.displayDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:n==="display"?"e-display e-icons":n==="videolayoutoption"?"e-video-display e-icons":"e-audio-display e-icons",cssClass:Ze+" "+gt+" "+Xt,itemName:n==="display"?"Display":n==="videolayoutoption"?"VideoLayoutOption":"AudioLayoutOption",items:n==="display"?lr:n==="videolayoutoption"?cr:hr,element:i}))},a.prototype.renderAlignmentDropDown=function(t,e,i,n){i=F("#"+this.parent.getID()+"_"+t+(n==="align"?"_Align":"_VideoAlign"),e),!i.classList.contains(He)&&(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:Ze+" "+Ss+" "+Xt,itemName:n==="align"?"Align":"VideoAlign",items:n==="align"?Wp:Qp,element:i}))},a.prototype.tableStylesDropDown=function(t,e,i){i=F("#"+this.parent.getID()+"_"+t+"_Styles",e),!i.classList.contains(He)&&(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-style e-icons",cssClass:Ze+" "+Ss+" "+Xt,itemName:"Styles",items:this.parent.tableSettings.styles,element:i}))},a.prototype.removeDropDownClasses=function(t){O([t],[He,Ze,Ss,gt])},a.prototype.destroyDropDowns=function(){this.formatDropDown&&(this.removeDropDownClasses(this.formatDropDown.element),this.formatDropDown.destroy(),this.formatDropDown=null),this.fontNameDropDown&&(this.removeDropDownClasses(this.fontNameDropDown.element),this.fontNameDropDown.destroy(),this.fontNameDropDown=null),this.fontSizeDropDown&&(this.removeDropDownClasses(this.fontSizeDropDown.element),this.fontSizeDropDown.destroy(),this.fontSizeDropDown=null),this.alignDropDown&&(this.removeDropDownClasses(this.alignDropDown.element),this.alignDropDown.destroy(),this.alignDropDown=null),this.imageAlignDropDown&&(this.removeDropDownClasses(this.imageAlignDropDown.element),this.imageAlignDropDown.destroy(),this.imageAlignDropDown=null),this.displayDropDown&&(this.removeDropDownClasses(this.displayDropDown.element),this.displayDropDown.destroy(),this.displayDropDown=null),this.tableRowsDropDown&&(this.removeDropDownClasses(this.tableRowsDropDown.element),this.tableRowsDropDown.destroy(),this.tableRowsDropDown=null),this.tableColumnsDropDown&&(this.removeDropDownClasses(this.tableColumnsDropDown.element),this.tableColumnsDropDown.destroy(),this.tableColumnsDropDown=null),this.tableCellDropDown&&(this.removeDropDownClasses(this.tableCellDropDown.element),this.tableCellDropDown.destroy(),this.tableCellDropDown=null),this.tableCellVerticalAlignDropDown&&(this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element),this.tableCellVerticalAlignDropDown.destroy(),this.tableCellVerticalAlignDropDown=null),this.numberFormatListDropDown&&(this.removeDropDownClasses(this.numberFormatListDropDown.element),this.numberFormatListDropDown.destroy(),this.numberFormatListDropDown=null),this.bulletFormatListDropDown&&(this.removeDropDownClasses(this.bulletFormatListDropDown.element),this.bulletFormatListDropDown.destroy(),this.bulletFormatListDropDown=null),this.toolbarRenderer=null},a.prototype.setRtl=function(t){this.formatDropDown&&this.formatDropDown.setProperties({enableRtl:t.enableRtl}),this.fontNameDropDown&&this.fontNameDropDown.setProperties({enableRtl:t.enableRtl}),this.fontSizeDropDown&&this.fontSizeDropDown.setProperties({enableRtl:t.enableRtl}),this.alignDropDown&&this.alignDropDown.setProperties({enableRtl:t.enableRtl}),this.imageAlignDropDown&&this.imageAlignDropDown.setProperties({enableRtl:t.enableRtl}),this.displayDropDown&&this.displayDropDown.setProperties({enableRtl:t.enableRtl}),this.numberFormatListDropDown&&this.numberFormatListDropDown.setProperties({enableRtl:t.enableRtl}),this.bulletFormatListDropDown&&this.bulletFormatListDropDown.setProperties({enableRtl:t.enableRtl})},a.prototype.updateCss=function(t,e){t&&e.cssClass&&(h(e.oldCssClass)?t.setProperties({cssClass:(t.cssClass+" "+e.cssClass).trim()}):t.setProperties({cssClass:(t.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){for(var e=[this.formatDropDown,this.fontNameDropDown,this.fontSizeDropDown,this.alignDropDown,this.imageAlignDropDown,this.displayDropDown,this.numberFormatListDropDown,this.bulletFormatListDropDown,this.tableRowsDropDown,this.tableColumnsDropDown,this.tableCellDropDown,this.tableCellVerticalAlignDropDown],i=0;i<e.length;i++)this.updateCss(e[i],t)},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on($s,this.beforeRender,this),this.parent.on(ht,this.onIframeMouseDown,this),this.parent.on(Rt,this.setRtl,this),this.parent.on(Me,this.onPropertyChanged,this),this.parent.on(Le,this.setCssClass,this))},a.prototype.onIframeMouseDown=function(){!h(this.parent.getToolbarElement())&&(this.parent.getToolbarElement().querySelectorAll('.e-rte-dropdown-btn[aria-expanded="true"]').length>0||this.parent.getToolbarElement().querySelectorAll('.e-dropdown-btn.e-rte-inline-dropdown[aria-expanded="true"]').length>0)&&kn(document,"mousedown")},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ht,this.onIframeMouseDown),this.parent.off(Rt,this.setRtl),this.parent.off($s,this.beforeRender),this.parent.off(Me,this.onPropertyChanged),this.parent.off(Le,this.setCssClass))},a.prototype.destroy=function(){this.removeEventListener(),this.destroyDropDowns()},a}(),Id=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(Ws,this.toolbarClick,this),this.parent.on(si,this.dropDownSelect,this),this.parent.on(tn,this.renderSelection,this),this.parent.on(Y,this.removeEventListener,this)},a.prototype.toolbarClick=function(t){if(!h(t.item)){if(!h(t.item.controlParent)){var e=t.item.controlParent.activeEle;e&&(e.tabIndex=-1)}(t.item.command==="NumberFormatList"||t.item.command==="BulletFormatList")&&(t.originalEvent.target.classList.contains("e-order-list")||t.originalEvent.target.classList.contains("e-unorder-list"))&&(t.item.command="Lists",t.item.subCommand=t.item.subCommand==="NumberFormatList"?"OL":"UL"),!(t.item.command==="Lists"&&t.originalEvent.target.classList.contains("e-caret")&&(t.originalEvent.target.parentElement.classList.contains("e-rte-bulletformatlist-dropdown")||t.originalEvent.target.parentElement.classList.contains("e-rte-numberformatlist-dropdown")))&&(this.parent.notify(Ks,t),this.parent.notify(Hc,t))}},a.prototype.dropDownSelect=function(t){if(this.parent.notify(Et,{}),!(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&t.item&&(t.item.command==="Images"||t.item.command==="Audios"||t.item.command==="Videos"||t.item.command==="VideoLayoutOption"||t.item.command==="Display"||t.item.command==="Table"))){var e=t.item.controlParent&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar&&this.parent.quickToolbarModule.tableQTBar.element.contains(t.item.controlParent.element)?"Table":null;if(t.item.command==="Lists"){var i={listStyle:t.item.value,listImage:t.item.listImage,type:t.item.subCommand};this.parent.formatter.process(this.parent,t,t.originalEvent,i)}else this.parent.formatter.process(this.parent,t,t.originalEvent,e)}this.parent.notify(Tt,{})},a.prototype.renderSelection=function(t){this.parent.notify(Et,{}),this.parent.formatter.process(this.parent,t,t.originalEvent,null),this.parent.notify(Tt,{})},a.prototype.removeEventListener=function(){this.parent.off(Ws,this.toolbarClick),this.parent.off(si,this.dropDownSelect),this.parent.off(tn,this.renderSelection),this.parent.off(Y,this.removeEventListener)},a}(),gh=function(){function a(t,e){this.tools={},this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?_e(this.tools,Mi,wa(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Mi}return a.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(X.Toolbar)},a.prototype.renderColorPickerInput=function(t){var e=this;this.initializeInstance();var i=t.containerType,n=t.container,r,s;Ea.forEach(function(o){if(La(o,t.items)!==-1)switch(o){case"fontcolor":{r=e.parent.getID()+"_"+i+"_FontColor_Target";var l=e.parent.createElement("input");if(l.id=r,l.classList.add(Ep),!h(e.parent.cssClass))for(var c=e.parent.cssClass.split(" "),p=0;p<c.length;p++)c[p].trim()!==""&&l.classList.add(c[p]);document.body.appendChild(l),s={cssClass:e.tools[o.toLocaleLowerCase()].icon+" "+Oe+" "+Or+e.parent.getCssClass(!0),value:e.tools[o.toLocaleLowerCase()].value,command:e.tools[o.toLocaleLowerCase()].command,subCommand:e.tools[o.toLocaleLowerCase()].subCommand,element:F("#"+e.parent.getID()+"_"+i+"_FontColor",n),target:r},e.fontColorPicker=e.toolbarRenderer.renderColorPicker(s,"fontcolor"),e.fontColorDropDown=e.toolbarRenderer.renderColorPickerDropDown(s,"fontcolor",e.fontColorPicker);break}case"backgroundcolor":{r=e.parent.getID()+"_"+i+"_BackgroundColor_Target";var d=e.parent.createElement("input");if(d.id=r,d.classList.add(Lp),!h(e.parent.cssClass))for(var c=e.parent.cssClass.split(" "),p=0;p<c.length;p++)c[p].trim()!==""&&d.classList.add(c[p]);document.body.appendChild(d),s={cssClass:e.tools[o.toLocaleLowerCase()].icon+" "+Oe+" "+Or+e.parent.getCssClass(!0),value:e.tools[o.toLocaleLowerCase()].value,command:e.tools[o.toLocaleLowerCase()].command,subCommand:e.tools[o.toLocaleLowerCase()].subCommand,element:F("#"+e.parent.getID()+"_"+i+"_BackgroundColor",n),target:r},e.backgroundColorPicker=e.toolbarRenderer.renderColorPicker(s,"backgroundcolor"),e.backgroundColorDropDown=e.toolbarRenderer.renderColorPickerDropDown(s,"backgroundcolor",e.backgroundColorPicker,e.defaultColorPicker);break}}}),this.parent.inlineMode.enable&&this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.destroy=function(){this.removeEventListener(),this.destroyColorPicker(),this.defaultColorPicker=null,this.fontColorPicker=null,this.fontColorDropDown=null,this.backgroundColorDropDown=null,this.backgroundColorPicker=null,this.tools={}},a.prototype.destroyColorPicker=function(){if(this.fontColorPicker&&!this.fontColorPicker.isDestroyed&&this.fontColorPicker.destroy(),this.backgroundColorPicker&&!this.backgroundColorPicker.isDestroyed&&this.backgroundColorPicker.destroy(),this.fontColorDropDown&&!this.fontColorDropDown.isDestroyed){var t=this.fontColorDropDown.element.querySelector(".e-rte-color-content");t&&E(t),this.fontColorDropDown.destroy()}if(this.backgroundColorDropDown&&!this.backgroundColorDropDown.isDestroyed){var t=this.backgroundColorDropDown.element.querySelector(".e-rte-color-content");t&&(this.defaultColorPicker=t.children[0].style.borderBottomColor,E(t)),this.backgroundColorDropDown.destroy()}},a.prototype.setRtl=function(t){this.fontColorPicker&&(this.fontColorPicker.setProperties({enableRtl:t.enableRtl}),this.fontColorDropDown.setProperties({enableRtl:t.enableRtl})),this.backgroundColorPicker&&(this.backgroundColorPicker.setProperties({enableRtl:t.enableRtl}),this.backgroundColorDropDown.setProperties({enableRtl:t.enableRtl}))},a.prototype.setCssClass=function(t){this.updateCss(this.fontColorPicker,this.fontColorDropDown,t),this.updateCss(this.backgroundColorPicker,this.backgroundColorDropDown,t)},a.prototype.updateCss=function(t,e,i){t&&i.cssClass&&(h(i.oldCssClass)?(t.setProperties({cssClass:(t.cssClass+" "+i.cssClass).trim()}),e.setProperties({cssClass:(e.cssClass+" "+i.cssClass).trim()})):(t.setProperties({cssClass:(t.cssClass.replace(i.oldCssClass,"").replace("  "," ").trim()+" "+i.cssClass).trim()}),e.setProperties({cssClass:(e.cssClass.replace(i.oldCssClass,"").replace("  "," ").trim()+" "+i.cssClass).trim()})))},a.prototype.addEventListener=function(){this.parent.on(rl,this.renderColorPickerInput,this),this.parent.on(Rt,this.setRtl,this),this.parent.on(Me,this.onPropertyChanged,this),this.parent.on(Le,this.setCssClass,this),this.parent.on(Mo,this.showColorPicker,this)},a.prototype.showColorPicker=function(t){!h(this.fontColorPicker)&&t.toolbarClick==="fontcolor"?this.fontColorDropDown.toggle():!h(this.backgroundColorPicker)&&t.toolbarClick==="backgroundcolor"&&this.backgroundColorDropDown.toggle()},a.prototype.onPropertyChanged=function(t){for(var e=t.newProp,i,n=0,r=Object.keys(e);n<r.length;n++){var s=r[n];switch(s){case"fontColor":if(this.fontColorPicker)for(var o=0,l=Object.keys(e.fontColor);o<l.length;o++){var c=l[o];switch(c){case"default":{this.fontColorPicker.setProperties({value:e.fontColor.default}),i=this.fontColorDropDown.element;var p=i.querySelector("."+this.tools.fontcolor.icon);p.style.borderBottomColor=e.fontColor.default;break}case"mode":this.fontColorPicker.setProperties({mode:e.fontColor.mode});break;case"columns":this.fontColorPicker.setProperties({columns:e.fontColor.columns});break;case"colorCode":this.fontColorPicker.setProperties({presetColors:e.fontColor.colorCode});break;case"modeSwitcher":this.fontColorPicker.setProperties({modeSwitcher:e.fontColor.modeSwitcher});break}}break;case"backgroundColor":if(this.backgroundColorPicker)for(var d=0,u=Object.keys(e.backgroundColor);d<u.length;d++){var m=u[d];switch(m){case"default":{this.backgroundColorPicker.setProperties({value:e.backgroundColor.default}),i=this.backgroundColorDropDown.element;var f=i.querySelector("."+this.tools.backgroundcolor.icon);f.style.borderBottomColor=e.backgroundColor.default;break}case"mode":this.backgroundColorPicker.setProperties({mode:e.backgroundColor.mode});break;case"columns":this.backgroundColorPicker.setProperties({columns:e.backgroundColor.columns});break;case"colorCode":this.backgroundColorPicker.setProperties({presetColors:e.backgroundColor.colorCode});break;case"modeSwitcher":this.backgroundColorPicker.setProperties({modeSwitcher:e.backgroundColor.modeSwitcher});break}}break}}},a.prototype.removeEventListener=function(){this.parent.off(rl,this.renderColorPickerInput),this.parent.off(Rt,this.setRtl),this.parent.off(Me,this.onPropertyChanged),this.parent.off(Le,this.setCssClass),this.parent.off(Mo,this.showColorPicker)},a}(),Hd=function(){function a(t,e){this.tools={},this.parent=t,this.isDestroyed=!1,this.isToolbar=!1,this.locator=e,this.isTransformChild=!1,this.renderFactory=this.locator.getService("rendererFactory"),sd(this.parent),ph(this.parent),this.baseToolbar=new va(this.parent,this.locator),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?_e(this.tools,Mi,wa(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Mi}return a.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(X.Content),this.editableElement=this.contentRenderer.getEditPanel(),this.editPanel=this.contentRenderer.getPanel()},a.prototype.toolbarBindEvent=function(){this.parent.inlineMode.enable||(this.keyBoardModule=new hn(this.getToolbarElement(),{keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}))},a.prototype.toolBarKeyDown=function(t){switch(t.action){case"escape":this.parent.contentModule.getEditPanel().focus();break;case"enter":!h(t.target)&&(t.target.classList.contains("e-rte-fontcolor-dropdown")||t.target.classList.contains("e-rte-backgroundcolor-dropdown"))&&this.parent.notify(Mo,{toolbarClick:t.target.classList.contains("e-rte-fontcolor-dropdown")?"fontcolor":"backgroundcolor"})}},a.prototype.createToolbarElement=function(){this.tbElement=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar"}),!(!x.isDevice&&this.parent.inlineMode.enable&&Se())&&(this.parent.inlineMode.enable?this.parent.rootContainer.insertBefore(this.tbElement,this.editPanel):(this.tbWrapper=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar_wrapper",innerHTML:this.tbElement.outerHTML,className:Ts}),this.tbElement=this.tbWrapper.firstElementChild,this.parent.rootContainer.insertBefore(this.tbWrapper,this.editPanel)))},a.prototype.getToolbarMode=function(){var t;switch(this.parent.toolbarSettings.type){case nt.Expand:t="Extended";break;case nt.Scrollable:t="Scrollable";break;default:t="MultiRow"}return Se()&&this.parent.toolbarSettings.type===nt.Expand&&(t=nt.Scrollable),t},a.prototype.checkToolbarResponsive=function(t){if(!x.isDevice||Se())return!1;var e;return this.parent.toolbarSettings.type===nt.Expand?e=nt.MultiRow:e=this.parent.toolbarSettings.type,this.baseToolbar.render({container:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items,mode:e,target:t,cssClass:this.parent.getCssClass()}),this.parent.toolbarSettings.type===nt.Expand&&(k([t],["e-rte-tb-mobile"]),this.parent.inlineMode.enable?this.addFixedTBarClass():k([t],[hp])),this.wireEvents(),this.dropDownModule.renderDropDowns({container:t,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),this.renderColorPicker({container:this.tbElement,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),!0},a.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var t=re('[style*="transform"]',document),e=0;e<t.length;e++)if(!h(t[e].contains)&&t[e].contains(this.parent.element)){this.isTransformChild=!0;break}},a.prototype.toggleFloatClass=function(){var t=this.parent.floatingToolbarOffset;this.parent.toolbarSettings.enableFloating?(k([this.tbElement.parentElement],[Ro]),U(this.tbElement.parentElement,{top:t+"px"})):(O([this.tbElement.parentElement],[Ro]),U(this.tbElement.parentElement,{top:""}))},a.prototype.renderToolbar=function(){this.initializeInstance(),this.createToolbarElement(),!this.checkToolbarResponsive(this.tbElement)&&(this.parent.inlineMode.enable?this.parent.notify(oo,{}):(this.baseToolbar.render({container:"toolbar",items:this.parent.toolbarSettings.items,mode:this.getToolbarMode(),target:this.tbElement,cssClass:this.parent.getCssClass()}),this.parent.inlineMode.enable||(this.parent.toolbarSettings.enableFloating&&(this.checkIsTransformChild(),this.toggleFloatClass()),k([this.parent.element],[Nl]),this.parent.toolbarSettings.type===nt.Expand&&k([this.parent.element],[dl]))),this.wireEvents(),this.parent.inlineMode.enable&&!Se()&&this.addFixedTBarClass(),this.parent.inlineMode.enable||(this.dropDownModule.renderDropDowns({container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.renderColorPicker({container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.refreshToolbarOverflow()),this.parent.rootContainer&&this.parent.rootContainer.classList.contains("e-source-code-enabled")&&(this.parent.notify(en,{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),this.parent.disableToolbarItem(this.parent.toolbarSettings.items)))},a.prototype.addFixedTBarClass=function(){k([this.tbElement],[pl])},a.prototype.removeFixedTBarClass=function(){O([this.tbElement],[pl])},a.prototype.showFixedTBar=function(){k([this.tbElement],[ml]),x.isIos&&k([this.tbElement],[Tl])},a.prototype.hideFixedTBar=function(){this.isToolbar?this.isToolbar=!1:O([this.tbElement],[ml,Tl])},a.prototype.updateItem=function(t){var e=this.tools[t.updateItem.toLocaleLowerCase()];(on(t.updateItem.toLocaleLowerCase(),this.locator)!=="Code View"&&on(t.updateItem.toLocaleLowerCase(),this.locator)!=="Preview"||this.parent.locale!=="en-US")&&(e.tooltip=on(t.updateItem.toLocaleLowerCase(),this.locator));var i=this.tools[t.targetItem.toLocaleLowerCase()],n=Cr(yr(i.subCommand),t.baseToolbar.toolbarObj.items)[0];if(h(n))this.addTBarItem(t,0);else{var r=this.parent.inlineMode.enable?"_quick_":"_toolbar_";t.baseToolbar.toolbarObj.items[n].id=this.parent.getID()+r+e.id,t.baseToolbar.toolbarObj.items[n].prefixIcon=e.icon,t.baseToolbar.toolbarObj.items[n].tooltipText=e.tooltip,t.baseToolbar.toolbarObj.items[n].subCommand=e.subCommand,t.baseToolbar.toolbarObj.dataBind(),t.baseToolbar.toolbarObj.refreshOverflow()}},a.prototype.updateToolbarStatus=function(t){if(!(!this.tbElement||this.parent.inlineMode.enable&&(Se()||!x.isDevice))){var e={args:t,dropDownModule:this.dropDownModule,parent:this.parent,tbElements:re("."+zt,this.tbElement),tbItems:this.baseToolbar.toolbarObj.items};qo(e,!!this.parent.inlineMode.enable,this.parent)}},a.prototype.fullScreen=function(t){this.parent.fullScreenModule.showFullScreen(t)},a.prototype.hideScreen=function(t){this.parent.fullScreenModule.hideFullScreen(t)},a.prototype.getBaseToolbar=function(){return this.baseToolbar},a.prototype.addTBarItem=function(t,e){t.baseToolbar.toolbarObj.addItems([t.baseToolbar.getObject(t.updateItem,"toolbar")],e)},a.prototype.enableTBarItems=function(t,e,i,n){var r=Cr(yr(e),t.toolbarObj.items);this.tbItems=re("."+zt,t.toolbarObj.element);for(var s=0;s<r.length;s++){var o=this.tbItems[r[s]];o&&t.toolbarObj.enableItems(o,i)}!F("."+ri,this.parent.element)&&!n&&Bi(t,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},a.prototype.removeTBarItems=function(t){h(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var e=Cr(yr(t),this.baseToolbar.toolbarObj.items);this.tbItems=this.parent.inlineMode.enable?re("."+zt,this.baseToolbar.toolbarObj.element):re("."+zt,this.parent.element);for(var i=0;i<e.length;i++)this.baseToolbar.toolbarObj.removeItems(this.tbItems[e[i]])},a.prototype.getExpandTBarPopHeight=function(){var t=0;if(this.parent.toolbarSettings.type===nt.Expand&&this.tbElement.classList.contains("e-extended-toolbar")){var e=F(".e-toolbar-extended",this.tbElement);e&&this.tbElement.classList.contains("e-expand-open")||e&&e.classList.contains("e-popup-open")?(k([e],[gl]),t=t+e.offsetHeight,O([e],[gl])):O([this.tbElement],[Ao])}return t},a.prototype.getToolbarHeight=function(){return this.tbElement.offsetHeight},a.prototype.getToolbarElement=function(){return this.parent&&this.parent.element?F("."+sr,this.parent.element):null},a.prototype.refreshToolbarOverflow=function(){this.parent.element.classList.remove(Yt),this.baseToolbar.toolbarObj.refreshOverflow(),this.parent.enableRtl&&this.parent.element.classList.add(Yt)},a.prototype.isToolbarDestroyed=function(){return!!(this.baseToolbar&&this.baseToolbar.toolbarObj&&this.baseToolbar.toolbarObj.isDestroyed)},a.prototype.destroyToolbar=function(){if(!this.isToolbarDestroyed()){this.parent.unWireScrollElementsEvents(),this.unWireEvents(),this.dropDownModule.destroy(),this.parent.emojiPickerModule&&!this.parent.emojiPickerModule.isPopupDestroyed&&this.parent.emojiPickerModule.childDestroy(),this.dropDownModule=null,this.colorPickerModule.destroy(),this.colorPickerModule=null,this.keyBoardModule&&(this.keyBoardModule.destroy(),this.keyBoardModule=null),this.baseToolbar.destroy(),this.removeEventListener(),O([this.parent.element],[Nl]),O([this.parent.element],[dl]);var t=F("."+Ts,this.parent.element),e=F("."+sr,this.parent.element);h(t)||E(t),h(e)||E(e)}},a.prototype.destroy=function(){this.isDestroyed||(this.isToolbarDestroyed()||this.destroyToolbar(),this.toolbarObj=null,this.editPanel=null,this.isToolbar=null,this.editableElement=null,this.tbItems=null,this.baseToolbar=null,this.tbElement=null,this.tbWrapper=null,this.isTransformChild=null,this.contentRenderer=null,this.dropDownModule=null,this.colorPickerModule=null,this.toolbarActionModule=null,this.tools=null,this.locator=null,this.renderFactory=null,this.isDestroyed=!0)},a.prototype.moduleDestroy=function(){this.parent=null,this.baseToolbar.parent=null,this.toolbarActionModule.parent=null,this.dropDownModule.parent=null},a.prototype.mouseDownHandler=function(){x.isDevice&&this.parent.inlineMode.enable&&!Se()&&this.showFixedTBar()},a.prototype.focusChangeHandler=function(){x.isDevice&&this.parent.inlineMode.enable&&!Se()&&(this.isToolbar=!1,this.hideFixedTBar())},a.prototype.dropDownBeforeOpenHandler=function(){this.isToolbar=!0},a.prototype.tbFocusHandler=function(t){var e=document.activeElement,i=b(e,".e-rte-toolbar");if(e===this.parent.getToolbarElement()||i===this.parent.getToolbarElement())for(var n=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav"),r=0;r<n.length;r++)h(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?n[r].setAttribute("tabindex","0"):n[r].setAttribute("tabindex","1")},a.prototype.wireEvents=function(){this.parent.inlineMode.enable&&Se()||C.add(this.tbElement,"focusin",this.tbFocusHandler,this)},a.prototype.unWireEvents=function(){C.remove(this.tbElement,"focusin",this.tbFocusHandler)},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.dropDownModule=new mh(this.parent,this.locator),this.toolbarActionModule=new Id(this.parent),this.colorPickerModule=new gh(this.parent,this.locator),this.parent.on(je,this.renderToolbar,this),this.parent.on(Qs,this.toolbarBindEvent,this),this.parent.on(Bt,this.updateToolbarStatus,this),this.parent.on(Me,this.onPropertyChanged,this),this.parent.on(Lr,this.onRefresh,this),this.parent.on(Y,this.destroy,this),this.parent.on(Xs,this.fullScreen,this),this.parent.on(Ys,this.hideScreen,this),this.parent.on(en,this.updateItem,this),this.parent.on(wr,this.dropDownBeforeOpenHandler,this),this.parent.on(gn,this.focusChangeHandler,this),this.parent.on(Fe,this.mouseDownHandler,this),this.parent.on(mn,this.mouseDownHandler,this),this.parent.on(Le,this.setCssClass,this),this.parent.on(st,this.moduleDestroy,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(je,this.renderToolbar),this.parent.off(Qs,this.toolbarBindEvent),this.parent.off(Bt,this.updateToolbarStatus),this.parent.off(Me,this.onPropertyChanged),this.parent.off(Lr,this.onRefresh),this.parent.off(Y,this.destroy),this.parent.off(Xs,this.parent.fullScreenModule.showFullScreen),this.parent.off(Ys,this.parent.fullScreenModule.hideFullScreen),this.parent.off(en,this.updateItem),this.parent.off(wr,this.dropDownBeforeOpenHandler),this.parent.off(gn,this.focusChangeHandler),this.parent.off(Fe,this.mouseDownHandler),this.parent.off(mn,this.mouseDownHandler),this.parent.off(Le,this.setCssClass),this.parent.off(st,this.moduleDestroy))},a.prototype.setCssClass=function(t){this.toolbarObj&&t.cssClass&&(h(t.oldCssClass)?this.toolbarObj.setProperties({cssClass:(this.toolbarObj.cssClass+" "+t.cssClass).trim()}):this.toolbarObj.setProperties({cssClass:(this.toolbarObj.cssClass.replace(t.oldCssClass,"").trim()+" "+t.cssClass).trim()}))},a.prototype.onRefresh=function(){this.parent.inlineMode.enable||this.refreshToolbarOverflow(),this.parent.autoResize()},a.prototype.onPropertyChanged=function(t){if(!h(t.newProp.inlineMode))for(var e=0,i=Object.keys(t.newProp.inlineMode);e<i.length;e++){var n=i[e];switch(n){case"enable":this.refreshToolbar();break}}h(t.newProp.toolbarSettings)||h(t.newProp.toolbarSettings.enableFloating)||this.toggleFloatClass(),t.module===this.getModuleName()&&this.refreshToolbar()},a.prototype.refreshToolbar=function(){h(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var t=F("."+Ts,this.parent.element),e=F("."+sr,this.parent.element);(e||t)&&this.destroyToolbar(),this.parent.toolbarSettings.enable&&(this.baseToolbar&&this.baseToolbar.toolbarObj&&!this.baseToolbar.toolbarObj.isDestroyed&&this.baseToolbar.destroy(),this.baseToolbar=new va(this.parent,this.locator),this.addEventListener(),this.renderToolbar(),this.parent.wireScrollElementsEvents(),!F("."+ri,this.parent.element)&&!this.parent.inlineMode.enable&&Bi(this.baseToolbar,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus()),this.parent.notify(bn,{}))},a.prototype.getModuleName=function(){return"toolbar"},a.prototype.renderColorPicker=function(t){this.colorPickerModule.renderColorPickerInput(t)},a}(),Fd=function(){function a(t,e){this.parent=t,this.locator=e,this.isRendered=!1,this.isDestroyed=!1,this.renderFactory=this.locator.getService("rendererFactory"),this.contentRenderer=this.renderFactory.getRenderer(X.Content),this.popupRenderer=this.renderFactory.getRenderer(X.Popup),this.dropDownButtons=new mh(this.parent,this.locator),this.colorPickerObj=new gh(this.parent,this.locator)}return a.prototype.appendPopupContent=function(){this.toolbarElement=this.parent.createElement("div",{className:or}),this.element.classList.contains(fl)&&this.toolbarElement.classList.add(lp),this.element.appendChild(this.toolbarElement)},a.prototype.render=function(t){var e;t.popupType==="Image"?e=pp:t.popupType==="Inline"?e=Gi:t.popupType==="Text"?e=fl:e="";var i=rt(t.popupType+"_Quick_Popup");this.stringItems=t.toolbarItems,this.element=this.parent.createElement("div",{id:i,className:e+" "+Oe}),this.element.setAttribute("aria-owns",this.parent.getID()),this.appendPopupContent(),this.createToolbar(t.toolbarItems,t.mode,t.cssClass),this.popupRenderer.renderPopup(this),this.addEventListener()},a.prototype.createToolbar=function(t,e,i){this.quickTBarObj=new va(this.parent,this.locator),this.quickTBarObj.render({container:"quick",target:this.toolbarElement,items:t,mode:e,cssClass:i}),this.quickTBarObj.toolbarObj.refresh()},a.prototype.setPosition=function(t){var e,i,n=b(t.target,".e-img-caption"),r=!(t.target.classList.contains("e-imginline")||t.target.classList.contains("e-imgbreak")),s=h(n)?t.target:n;k([this.toolbarElement],[vl]);var o;if(!h(b(s,"table"))&&!s.classList.contains("e-multi-cells-select")&&!s.classList.contains("e-rte-image")){o=s.offsetTop;for(var l=b(s,"table");!h(l);)o+=l.offsetTop,l=b(l.parentElement,"table")}else o=s.classList.contains("e-rte-audio")?s.parentElement.offsetTop:s.offsetTop;var c=window.pageYOffset+t.parentData.top;o-t.editTop>t.popHeight?i=c+t.tBarElementHeight+(o-t.editTop)-t.popHeight-5:t.editTop+t.editHeight-(o+s.offsetHeight)>t.popHeight?i=c+t.tBarElementHeight+(o-t.editTop)+s.offsetHeight+5:i=t.y,s=r?t.target:s;var p;if(!h(b(s,"table"))&&!s.classList.contains("e-multi-cells-select")&&!s.classList.contains("e-rte-image")){p=s.offsetLeft;for(var l=b(s.parentElement,"th, td");!h(l);)p+=l.offsetLeft,l=b(l.parentElement,"table")}else p=s.classList.contains("e-rte-audio")?s.parentElement.offsetLeft:s.offsetLeft;s.offsetWidth>t.popWidth?e=s.offsetWidth/2-t.popWidth/2+t.parentData.left+p:e=t.parentData.left+p,this.popupObj.position.X=e+t.popWidth>t.parentData.right?t.parentData.right-t.popWidth:e,this.popupObj.position.Y=i>=0?i:t.y+5,this.popupObj.dataBind(),O([this.toolbarElement],[vl])},a.prototype.checkCollision=function(t,e,i){var n,r,s=t.parentData.top,o=t.windowY+s+t.tBarElementHeight,l=[];e==="document"?l=Is(t.popup):l=Is(t.popup,t.parentElement);for(var c=0;c<l.length;c++)switch(l[c]){case"top":e==="document"?r=t.windowY:r=window.pageYOffset+s+t.tBarElementHeight;break;case"bottom":{var p=void 0;e==="document"?i==="inline"||i==="text"?p=t.y-t.popHeight-10:t.windowHeight-(s+t.tBarElementHeight)>t.popHeight?o-t.windowHeight>t.popHeight?p=o+(t.windowHeight-s)-t.popHeight:p=o:p=t.windowY+(s+t.tBarElementHeight):t.target.tagName!=="IMG"?p=t.parentData.bottom+window.pageYOffset-t.popHeight-10:p=t.parentData.bottom+window.pageYOffset-t.popHeight-5,r=p;break}case"right":i==="inline"||i==="text"?n=window.pageXOffset+(t.windowWidth-(t.popWidth+t.bodyRightSpace+10)):n=t.x-t.popWidth;break;case"left":i==="inline"||i==="text"?n=0:n=t.parentData.left;break}this.popupObj.position.X=n||this.popupObj.position.X,this.popupObj.position.Y=r||this.popupObj.position.Y,this.popupObj.dataBind()},a.prototype.showPopup=function(t,e,i,n){var r=this,s={popup:this.popupObj,cancel:!1,targetElement:i,positionX:t,positionY:e};this.parent.trigger(Gc,s,function(o){if(!o.cancel){var l=void 0,c=void 0,p=window.getComputedStyle(document.body),d=parseFloat(p.marginRight.split("px")[0])+parseFloat(p.paddingRight.split("px")[0]),u=window.innerHeight,m=window.innerWidth,f=r.parent.element,g=!h(r.parent.getToolbar()),y=g&&r.parent.toolbarModule.getToolbarHeight(),S=g&&r.parent.toolbarModule.getExpandTBarPopHeight(),T=g?y+S:0;if(k([r.element],[Xi]),x.isDevice&&!Se()&&k([r.parent.getToolbar()],[Xi]),r.parent.iframeSettings.enable){var L=r.contentRenderer.getPanel().contentWindow;l=L.pageYOffset,c=L.innerHeight}else{var L=b(i,"."+dp);l=L?L.scrollTop:0,c=L?L.offsetHeight:0}!r.parent.inlineMode.enable&&!b(i,"table")&&n!=="text"&&n!=="link"||i.tagName==="IMG"?(r.parent.disableToolbarItem(r.parent.toolbarSettings.items),r.parent.enableToolbarItem(["Undo","Redo"])):r.parent.enableToolbarItem(r.parent.toolbarSettings.items),Ne([r.element],document.body),r.parent.showTooltip&&(r.tooltip=new ln({target:"#"+r.element.id+" [title]",openDelay:400,showTipPointer:!0,beforeRender:r.tooltipBeforeRender.bind(r),windowCollision:!0,position:"BottomCenter",cssClass:r.parent.getCssClass()}),r.tooltip.appendTo(r.element)),r.popupObj.position.X=o.positionX+20,r.popupObj.position.Y=o.positionY+20,r.popupObj.dataBind(),r.popupObj.element.classList.add("e-popup-open"),r.dropDownButtons.renderDropDowns({container:r.toolbarElement,containerType:"quick",items:r.stringItems}),r.colorPickerObj.renderColorPickerInput({container:r.toolbarElement,containerType:"quick",items:r.stringItems});var w={x:t,y:e,target:i,editTop:l,editHeight:c,popup:r.popupObj.element,popHeight:r.popupObj.element.offsetHeight,popWidth:r.popupObj.element.offsetWidth,parentElement:f,bodyRightSpace:d,windowY:window.pageYOffset,windowHeight:u,windowWidth:m,parentData:f.getBoundingClientRect(),tBarElementHeight:T};(b(i,"TABLE")||i.tagName==="IMG"||i.tagName==="AUDIO"||i.tagName==="VIDEO"||i.tagName==="IFRAME"||i.classList&&(i.classList.contains(Yi)||i.classList.contains($t)||i.classList.contains(Ca)))&&(t===o.positionX||e===o.positionY)&&r.setPosition(w),r.parent.inlineMode.enable||r.checkCollision(w,"parent",""),r.checkCollision(w,"document",r.parent.inlineMode.enable?"inline":n==="text"?"text":""),r.popupObj.element.classList.remove("e-popup-open"),O([r.element],[Xi]),r.popupObj.show({name:"ZoomIn",duration:x.isIE?250:400},i),r.popupObj&&r.parent.cssClass&&(O([r.popupObj.element],r.parent.cssClass.replace(/\s+/g," ").trim().split(" ")),k([r.popupObj.element],r.parent.cssClass.replace(/\s+/g," ").trim().split(" "))),U(r.element,{maxWidth:window.outerWidth+"px"}),k([r.element],[ul]),r.isRendered=!0}})},a.prototype.tooltipBeforeRender=function(t){t.target.querySelector(".e-active")&&(t.cancel=!0,h(t.target.getAttribute("title"))||this.parent.notify(Nr,{target:t.target,isTitle:!0}))},a.prototype.hidePopup=function(){var t=!h(this.parent.rootContainer)&&this.parent.rootContainer.classList.contains("e-source-code-enabled");if(x.isDevice&&!Se()&&O([this.parent.getToolbar()],[Xi]),!h(this.element.querySelectorAll("[data-title]"))){var e=this.element.querySelectorAll("[data-title]");e.forEach(function(r){var s=new MouseEvent("mouseout",{bubbles:!0,cancelable:!0});r.dispatchEvent(s)})}if(h(document.querySelector(".e-tooltip-wrap")))h(this.tooltip)||this.tooltip.destroy();else{if(!h(document.querySelector("#"+this.element.id+" [data-tooltip-id]"))){var i=document.querySelector("#"+this.element.id+" [data-tooltip-id]"),n=i.getAttribute("data-content");i.removeAttribute("data-content"),i.setAttribute("title",n),i.removeAttribute("data-tooltip-id")}this.tooltip.destroy()}!h(this.parent.getToolbar())&&!this.parent.inlineMode.enable&&(t||this.parent.enableToolbarItem(this.parent.toolbarSettings.items)),this.removeEleFromDOM(),this.isRendered=!1},a.prototype.addQTBarItem=function(t,e){this.quickTBarObj.toolbarObj.addItems(this.quickTBarObj.getItems(t,"toolbar"),e)},a.prototype.removeQTBarItem=function(t){this.quickTBarObj.toolbarObj.removeItems(t)},a.prototype.removeEleFromDOM=function(){var t=this.popupObj.element;if(this.isRendered){this.dropDownButtons.destroyDropDowns(),this.colorPickerObj.destroyColorPicker(),O([this.element],[ul]),E(t);var e=this.popupObj;this.parent.trigger(Yc,e)}},a.prototype.updateStatus=function(t){var e={args:t,dropDownModule:this.dropDownButtons,parent:this.parent,tbElements:re("."+zt,this.element),tbItems:this.quickTBarObj.toolbarObj.items};if(qo(e,!0,this.parent),this.parent.quickToolbarSettings.text&&this.parent.quickToolbarModule.textQTBar){var i={args:t,dropDownModule:this.parent.quickToolbarModule.textQTBar.dropDownButtons,parent:this.parent,tbElements:re("."+zt,this.parent.quickToolbarModule.textQTBar.element),tbItems:this.parent.quickToolbarModule.textQTBar.quickTBarObj.toolbarObj.items};qo(i,!0,this.parent),Bi(this.parent.quickToolbarModule.textQTBar.quickTBarObj,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())}F("."+ri,this.parent.element)||Bi(this.parent.getBaseToolbarObject(),this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},a.prototype.destroy=function(){this.isDestroyed||(this.tooltip&&!this.tooltip.isDestroyed&&(this.tooltip.destroy(),this.tooltip=null),this.removeEventListener(),this.quickTBarObj.destroy(),this.quickTBarObj=null,this.popupObj&&!this.popupObj.isDestroyed&&(this.removeEleFromDOM(),this.popupObj.destroy()),this.colorPickerObj=null,this.dropDownButtons=null,this.stringItems=null,this.dropDownButtons=null,this.colorPickerObj=null,this.toolbarElement=null,this.isDestroyed=!0)},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Y,this.destroy,this),this.parent.on(Me,this.onPropertyChanged,this),(this.parent.inlineMode.enable||this.parent.quickToolbarSettings.text)&&this.parent.on(Bt,this.updateStatus,this))},a.prototype.onPropertyChanged=function(t){if(!h(t.newProp.inlineMode))for(var e=0,i=Object.keys(t.newProp.inlineMode);e<i.length;e++){var n=i[e];switch(n){case"enable":t.newProp.inlineMode.enable?this.parent.on(Bt,this.updateStatus,this):this.parent.off(Bt,this.updateStatus);break}}},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Y,this.destroy),this.parent.off(Me,this.onPropertyChanged),(this.parent.inlineMode.enable||this.parent.quickToolbarSettings.text)&&this.parent.off(Bt,this.updateStatus))},a}(),qd=function(){function a(t,e){this.debounceTimeout=1e3,this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.renderFactory.addRenderer(X.Popup,new Pd(this.parent)),this.addEventListener(),this.isDestroyed=!1}return a.prototype.formatItems=function(t){var e=[];return t.forEach(function(i){if(typeof i=="string")switch(i.toLocaleLowerCase()){case"open":e.push("openLink");break;case"edit":e.push("editLink");break;case"unlink":e.push("removeLink");break;default:e.push(i);break}else e.push(i)}),e},a.prototype.getQTBarOptions=function(t,e,i,n){return{popupType:t,toolbarItems:i,mode:e,renderType:n,cssClass:this.parent.getCssClass()}},a.prototype.createQTBar=function(t,e,i,n){if(i.length<1)return null;var r=new Fd(this.parent,this.locator);return r.render(this.getQTBarOptions(t,e,this.formatItems(i),n)),r},a.prototype.initializeQuickToolbars=function(){this.parent.quickToolbarModule=this,this.contentRenderer=this.renderFactory.getRenderer(X.Content),this.parent.inlineMode.enable&&this.parent.inlineMode.onSelection&&Se()&&C.add(this.contentRenderer.getDocument(),"selectionchange",this.selectionChangeHandler,this)},a.prototype.onMouseDown=function(t){this.parent.isBlur=!1,this.parent.isRTE=!0},a.prototype.keyUpQT=function(t){t.which===27&&this.hideQuickToolbars()},a.prototype.renderQuickToolbars=function(){this.linkQTBar||this.imageQTBar||this.audioQTBar||this.videoQTBar||this.textQTBar||this.tableQTBar||(this.linkQTBar=this.createQTBar("Link","Scrollable",this.parent.quickToolbarSettings.link,X.LinkToolbar),this.renderFactory.addRenderer(X.LinkToolbar,this.linkQTBar),!h(this.parent.quickToolbarSettings.text)&&!this.parent.inlineMode.enable&&(this.textQTBar=this.createQTBar("Text","MultiRow",this.parent.quickToolbarSettings.text,X.TextToolbar),this.renderFactory.addRenderer(X.TextToolbar,this.textQTBar)),this.imageQTBar=this.createQTBar("Image","MultiRow",this.parent.quickToolbarSettings.image,X.ImageToolbar),this.renderFactory.addRenderer(X.ImageToolbar,this.imageQTBar),this.audioQTBar=this.createQTBar("Audio","MultiRow",this.parent.quickToolbarSettings.audio,X.AudioToolbar),this.renderFactory.addRenderer(X.AudioToolbar,this.audioQTBar),this.videoQTBar=this.createQTBar("Video","MultiRow",this.parent.quickToolbarSettings.video,X.VideoToolbar),this.renderFactory.addRenderer(X.VideoToolbar,this.videoQTBar),this.tableQTBar=this.createQTBar("Table","MultiRow",this.parent.quickToolbarSettings.table,X.TableToolbar),this.renderFactory.addRenderer(X.TableToolbar,this.tableQTBar),this.linkQTBar&&(C.add(this.linkQTBar.element,"mousedown",this.onMouseDown,this),C.add(this.linkQTBar.element,"keyup",this.keyUpQT,this)),this.imageQTBar&&(C.add(this.imageQTBar.element,"mousedown",this.onMouseDown,this),C.add(this.imageQTBar.element,"keyup",this.keyUpQT,this)),this.audioQTBar&&(C.add(this.audioQTBar.element,"mousedown",this.onMouseDown,this),C.add(this.audioQTBar.element,"keyup",this.keyUpQT,this)),this.videoQTBar&&(C.add(this.videoQTBar.element,"mousedown",this.onMouseDown,this),C.add(this.videoQTBar.element,"keyup",this.keyUpQT,this)),this.textQTBar&&(C.add(this.textQTBar.element,"mousedown",this.onMouseDown,this),C.add(this.textQTBar.element,"keyup",this.keyUpQT,this)),this.tableQTBar&&(C.add(this.tableQTBar.element,"mousedown",this.onMouseDown,this),C.add(this.tableQTBar.element,"keyup",this.keyUpQT,this)))},a.prototype.renderInlineQuickToolbar=function(){this.parent.inlineMode.enable&&(!x.isDevice||Se())&&(k([this.parent.element],[ys]),this.inlineQTBar=this.createQTBar("Inline","MultiRow",this.parent.toolbarSettings.items,X.InlineToolbar),this.renderFactory.addRenderer(X.InlineToolbar,this.inlineQTBar),C.add(this.inlineQTBar.element,"mousedown",this.onMouseDown,this),C.add(this.inlineQTBar.element,"keyup",this.keyUpQT,this))},a.prototype.showInlineQTBar=function(t,e,i){h(this.parent)||this.parent.readonly||i.tagName.toLowerCase()==="img"||this.inlineQTBar.element.querySelector(".e-rte-color-content")||this.inlineQTBar.showPopup(t,e,i)},a.prototype.hideInlineQTBar=function(){this.inlineQTBar&&!be(this.inlineQTBar.element,"e-popup-close")&&this.inlineQTBar.hidePopup()},a.prototype.hideQuickToolbars=function(){this.linkQTBar&&!be(this.linkQTBar.element,"e-popup-close")&&document.body.contains(this.linkQTBar.element)&&this.linkQTBar.hidePopup(),this.textQTBar&&!be(this.textQTBar.element,"e-popup-close")&&document.body.contains(this.textQTBar.element)&&this.textQTBar.hidePopup(),this.imageQTBar&&!be(this.imageQTBar.element,"e-popup-close")&&document.body.contains(this.imageQTBar.element)&&this.imageQTBar.hidePopup(),this.audioQTBar&&!be(this.audioQTBar.element,"e-popup-close")&&document.body.contains(this.audioQTBar.element)&&this.audioQTBar.hidePopup(),this.videoQTBar&&!be(this.videoQTBar.element,"e-popup-close")&&document.body.contains(this.videoQTBar.element)&&this.videoQTBar.hidePopup(),this.tableQTBar&&!be(this.tableQTBar.element,"e-popup-close")&&document.body.contains(this.tableQTBar.element)&&this.tableQTBar.hidePopup(),!h(this.parent)&&this.parent.inlineMode.enable&&(!x.isDevice||Se())&&this.hideInlineQTBar()},a.prototype.deBounce=function(t,e,i){var n=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout(function(){n.showInlineQTBar(t,e,i)},this.debounceTimeout)},a.prototype.mouseUpHandler=function(t){if(this.parent.inlineMode.enable&&(!x.isDevice||Se())){var e=t.args.touches?t.args.changedTouches[0]:t.args,i=this.parent.getRange(),n=t.args.target;if(h(F("."+Gi,document.body))){if(Se()&&t.touchData&&t.touchData.prevClientX!==t.touchData.clientX&&t.touchData.prevClientY!==t.touchData.clientY)return;this.hideInlineQTBar();var r=this.parent.element.getBoundingClientRect().left;if(this.offsetX=this.parent.iframeSettings.enable?window.pageXOffset+r+e.clientX:e.pageX,this.offsetY=Ol(e,this.parent.element,this.parent.iframeSettings.enable),n.nodeName==="TEXTAREA")this.showInlineQTBar(this.offsetX,this.offsetY,n);else{var s=b(n,"a");n=s||n;var o=this.parent.getRange().startContainer.parentElement,l=this.parent.getRange().endContainer.parentElement;if((h(b(o,"A"))||h(b(l,"A")))&&(!b(n,"td,th")||!i.collapsed)&&(n.tagName!=="IMG"||this.parent.getRange().startOffset!==this.parent.getRange().endOffset)){if(this.parent.inlineMode.onSelection&&i.collapsed)return;this.target=n,this.showInlineQTBar(this.offsetX,this.offsetY,n)}}}}if(!h(this.textQTBar)&&!h(this.parent.quickToolbarSettings.text)&&!this.parent.inlineMode.enable){if(!h(t)&&!h(t.name)&&t.name==="sourceCodeMouseDown")return;var e=t.args.touches?t.args.changedTouches[0]:t.args,n=t.args.target;this.hideQuickToolbars();var r=this.parent.element.getBoundingClientRect().left;this.offsetX=this.parent.iframeSettings.enable?this.parent.element.ownerDocument.documentElement.scrollLeft+r+e.clientX:e.pageX,this.offsetY=Ol(e,this.parent.element,this.parent.iframeSettings.enable);var i=this.parent.getRange();if(i.endContainer.parentElement.tagName===i.startContainer.parentElement.tagName&&i.startContainer.parentElement.tagName==="A"&&i.endContainer.parentElement.tagName==="A"||n.tagName==="IMG"||n.tagName==="VIDEO"||this.isEmbedVidElem(n)||n.tagName==="AUDIO"||n.childNodes[0]&&n.childNodes[0].nodeType===1&&n.childNodes[0].classList.contains("e-rte-audio")||this.parent.getRange().startOffset===this.parent.getRange().endOffset)return;this.target=n,this.textQTBar.showPopup(this.offsetX,this.offsetY,n,"text")}},a.prototype.isEmbedVidElem=function(t){return!!(t&&t.nodeType!==3&&t.nodeName!=="BR"&&t.classList&&t.classList.contains(Ca)||t&&t.nodeName==="IFRAME")},a.prototype.keyDownHandler=function(t){var e=t.args.altKey;if(this.parent.inlineMode.enable&&t.args.metaKey&&t.args.keyCode===65){this.showInlineQTBar(this.offsetX,this.offsetY,t.args.target);return}e||(this.parent.inlineMode.enable&&(!x.isDevice||Se())&&!h(F("."+Gi,document))&&this.hideInlineQTBar(),this.textQTBar&&!be(this.textQTBar.element,"e-popup-close")&&this.textQTBar.hidePopup())},a.prototype.inlineQTBarMouseDownHandler=function(){this.parent.inlineMode.enable&&(!x.isDevice||Se())&&!h(F("."+Gi,document))&&this.hideInlineQTBar(),h(this.parent.quickToolbarSettings.text)||this.textQTBar&&!be(this.textQTBar.element,"e-popup-close")&&document.body.contains(this.textQTBar.element)&&this.textQTBar.hidePopup()},a.prototype.keyUpHandler=function(t){var e=t.args;if(this.parent.inlineMode.enable&&!x.isDevice){if(this.parent.inlineMode.onSelection){this.parent.getSelection().length>0&&(e.ctrlKey&&e.keyCode===65||e.shiftKey&&(e.keyCode===33||e.keyCode===34||e.keyCode===35||e.keyCode===36||e.keyCode===37||e.keyCode===38||e.keyCode===39||e.keyCode===40))&&this.showInlineQTBar(this.offsetX,this.offsetY,e.target);return}this.deBounce(this.offsetX,this.offsetY,e.target)}this.parent.quickToolbarSettings.text&&!x.isDevice&&(e.ctrlKey&&e.keyCode===65||e.shiftKey&&(e.keyCode===33||e.keyCode===34||e.keyCode===35||e.keyCode===36||e.keyCode===37||e.keyCode===38||e.keyCode===39||e.keyCode===40))&&this.textQTBar.showPopup(this.offsetX,this.offsetY,e.target,"text")},a.prototype.selectionChangeHandler=function(t){var e=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout(function(){e.onSelectionChange(t)},this.debounceTimeout)},a.prototype.onSelectionChange=function(t){if(h(F("."+Gi,document.body))){var e=this.contentRenderer.getDocument().getSelection();e.isCollapsed||this.mouseUpHandler({args:t})}},a.prototype.getInlineBaseToolbar=function(){return this.inlineQTBar&&this.inlineQTBar.quickTBarObj},a.prototype.destroy=function(){this.isDestroyed||(this.linkQTBar&&!this.linkQTBar.isDestroyed&&(C.remove(this.linkQTBar.element,"mousedown",this.onMouseDown),C.remove(this.linkQTBar.element,"keyup",this.keyUpQT),this.linkQTBar.destroy()),this.textQTBar&&!this.textQTBar.isDestroyed&&(C.remove(this.textQTBar.element,"mousedown",this.onMouseDown),C.remove(this.textQTBar.element,"keyup",this.keyUpQT),this.textQTBar.destroy()),this.imageQTBar&&!this.imageQTBar.isDestroyed&&(C.remove(this.imageQTBar.element,"mousedown",this.onMouseDown),C.remove(this.imageQTBar.element,"keyup",this.keyUpQT),this.imageQTBar.destroy()),this.audioQTBar&&!this.audioQTBar.isDestroyed&&(C.remove(this.audioQTBar.element,"mousedown",this.onMouseDown),C.remove(this.audioQTBar.element,"keyup",this.keyUpQT),this.audioQTBar.destroy()),this.videoQTBar&&!this.videoQTBar.isDestroyed&&(C.remove(this.videoQTBar.element,"mousedown",this.onMouseDown),C.remove(this.videoQTBar.element,"keyup",this.keyUpQT),this.videoQTBar.destroy()),this.tableQTBar&&!this.tableQTBar.isDestroyed&&(C.remove(this.tableQTBar.element,"mousedown",this.onMouseDown),C.remove(this.tableQTBar.element,"keyup",this.keyUpQT),this.tableQTBar.destroy()),this.inlineQTBar&&!this.inlineQTBar.isDestroyed&&(C.remove(this.inlineQTBar.element,"mousedown",this.onMouseDown),C.remove(this.inlineQTBar.element,"keyup",this.keyUpQT),Se()&&C.remove(document,"selectionchange",this.selectionChangeHandler),this.inlineQTBar.destroy()),this.removeEventListener(),this.isDestroyed=!0)},a.prototype.wireInlineQTBarEvents=function(){this.parent.on(dn,this.mouseUpHandler,this),this.parent.on(Fe,this.inlineQTBarMouseDownHandler,this),this.parent.on(we,this.keyDownHandler,this),this.parent.on(Ke,this.keyUpHandler,this),this.parent.on(mn,this.mouseUpHandler,this),this.parent.on(oo,this.renderInlineQuickToolbar,this)},a.prototype.unWireInlineQTBarEvents=function(){this.parent.off(dn,this.mouseUpHandler),this.parent.off(Fe,this.inlineQTBarMouseDownHandler),this.parent.off(we,this.keyDownHandler),this.parent.off(Ke,this.keyUpHandler),this.parent.off(mn,this.mouseUpHandler),this.parent.off(oo,this.renderInlineQuickToolbar)},a.prototype.toolbarUpdated=function(t){this.linkQTBar&&!be(this.linkQTBar.element,"e-popup-close")&&this.linkQTBar.hidePopup(),this.imageQTBar&&!be(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup(),this.audioQTBar&&!be(this.audioQTBar.element,"e-popup-close")&&this.audioQTBar.hidePopup(),this.videoQTBar&&!be(this.videoQTBar.element,"e-popup-close")&&this.videoQTBar.hidePopup(),this.tableQTBar&&!be(this.tableQTBar.element,"e-popup-close")&&this.tableQTBar.hidePopup()},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(je,this.initializeQuickToolbars,this),this.parent.on(Fe,this.renderQuickToolbars,this),this.parent.on(Bt,this.toolbarUpdated,this),this.parent.on(vo,this.renderQuickToolbars,this),this.wireInlineQTBarEvents(),this.parent.on(Me,this.onPropertyChanged,this),this.parent.quickToolbarSettings.actionOnScroll==="hide"&&(this.parent.on(Zt,this.hideQuickToolbars,this),this.parent.on(ei,this.hideQuickToolbars,this)),this.parent.on(gn,this.hideQuickToolbars,this),this.parent.on(ht,this.onIframeMouseDown,this),this.parent.on(Y,this.destroy,this),this.parent.on(we,this.onKeyDown,this),this.parent.on(Rt,this.setRtl,this),this.parent.on(Le,this.setCssClass,this),this.parent.on(xr,this.hideQuickToolbars,this))},a.prototype.onKeyDown=function(t){var e=t.args;(e.which===8||e.which===46)&&(this.imageQTBar&&!be(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup(),this.audioQTBar&&!be(this.audioQTBar.element,"e-popup-close")&&this.audioQTBar.hidePopup(),this.videoQTBar&&!be(this.videoQTBar.element,"e-popup-close")&&this.videoQTBar.hidePopup(),this.tableQTBar&&!be(this.tableQTBar.element,"e-popup-close")&&this.tableQTBar.hidePopup(),this.linkQTBar&&!be(this.linkQTBar.element,"e-popup-close")&&this.linkQTBar.hidePopup(),this.textQTBar&&!be(this.textQTBar.element,"e-popup-close")&&this.textQTBar.hidePopup())},a.prototype.onIframeMouseDown=function(){this.hideQuickToolbars(),this.hideInlineQTBar()},a.prototype.updateCss=function(t,e){t&&e.cssClass&&(h(e.oldCssClass&&t.quickTBarObj.toolbarObj.cssClass!==e.cssClass)?t.quickTBarObj.toolbarObj.setProperties({cssClass:(t.quickTBarObj.toolbarObj.cssClass+" "+e.cssClass).trim()}):t.quickTBarObj.toolbarObj.setProperties({cssClass:(t.quickTBarObj.toolbarObj.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){for(var e=[this.inlineQTBar,this.imageQTBar,this.linkQTBar,this.textQTBar,this.tableQTBar],i=0;i<e.length;i++)this.updateCss(e[i],t)},a.prototype.setRtl=function(t){this.inlineQTBar&&this.inlineQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:t.enableRtl}),this.imageQTBar&&this.imageQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:t.enableRtl}),this.audioQTBar&&this.audioQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:t.enableRtl}),this.videoQTBar&&this.videoQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:t.enableRtl}),this.linkQTBar&&this.linkQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:t.enableRtl}),this.textQTBar&&this.textQTBar.quickTBarObj.toolbarObj.setProperties({enableRtl:t.enableRtl})},a.prototype.removeEventListener=function(){this.deBouncer&&(clearTimeout(this.deBouncer),this.deBouncer=null),this.parent.off(je,this.initializeQuickToolbars),this.parent.off(Fe,this.renderQuickToolbars),this.parent.off(Bt,this.toolbarUpdated),this.parent.off(vo,this.renderQuickToolbars),this.unWireInlineQTBarEvents(),this.parent.off(Me,this.onPropertyChanged),this.parent.quickToolbarSettings.actionOnScroll==="hide"&&(this.parent.off(Zt,this.hideQuickToolbars),this.parent.off(ei,this.hideQuickToolbars)),this.parent.off(gn,this.hideQuickToolbars),this.parent.off(Y,this.destroy),this.parent.off(ht,this.onIframeMouseDown),this.parent.off(we,this.onKeyDown),this.parent.off(Rt,this.setRtl),this.parent.off(Le,this.setCssClass),this.parent.off(xr,this.hideQuickToolbars)},a.prototype.onPropertyChanged=function(t){if(!h(t.newProp.quickToolbarSettings))for(var e=0,i=Object.keys(t.newProp.quickToolbarSettings);e<i.length;e++){var n=i[e];switch(n){case"actionOnScroll":t.newProp.quickToolbarSettings.actionOnScroll==="none"?(this.parent.off(Zt,this.hideQuickToolbars),this.parent.off(ei,this.hideQuickToolbars)):(this.parent.on(Zt,this.hideQuickToolbars,this),this.parent.on(ei,this.hideQuickToolbars,this));break}}t.module===this.getModuleName()&&(this.inlineQTBar&&(O([this.parent.element],[ys]),this.unWireInlineQTBarEvents(),this.hideInlineQTBar()),this.parent.inlineMode.enable&&(!x.isDevice||Se())&&(k([this.parent.element],[ys]),this.wireInlineQTBarEvents()))},a.prototype.getModuleName=function(){return"quickToolbar"},a.prototype.getQuickToolbarInstance=function(){return[this.linkQTBar,this.imageQTBar,this.audioQTBar,this.videoQTBar,this.tableQTBar,this.textQTBar,this.inlineQTBar]},a}(),jd=function(){function a(t,e){this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.isDestroyed=!1}return a.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(X.Content),this.editPanel=this.contentRenderer.getEditPanel(),this.addEventListener()},a.prototype.renderCount=function(){this.initializeInstance(),this.element=this.parent.createElement("span",{className:Sl}),this.parent.rootContainer.appendChild(this.element),this.parent.rootContainer.classList.add("e-count-enabled"),this.parent.iframeSettings.enable&&this.parent.inputElement.classList.add("e-count-enabled"),this.appendCount(),this.parent.maxLength!==-1&&this.charCountBackground(this.htmlLength)},a.prototype.appendCount=function(){var t=this.parent.editorMode==="Markdown"?this.editPanel.value:h(this.parent.getText())?"":this.parent.getText().replace(/(\r\n|\n|\r|\t)/gm,"");this.parent.editorMode!=="Markdown"&&t.indexOf("​")!==-1?this.htmlLength=t.replace(/\u200B/g,"").length:this.htmlLength=t.length;var e=this.parent.maxLength===-1?this.htmlLength:this.htmlLength+" / "+this.parent.maxLength;this.element.innerHTML=e},a.prototype.charCountBackground=function(t){var e=t/this.parent.maxLength*100;e<85?(this.element.classList.remove(ws),this.element.classList.remove(ks)):e>85&&e<=90?(this.element.classList.remove(ks),this.element.classList.add(ws)):e>90&&(this.element.classList.remove(ws),this.element.classList.add(ks))},a.prototype.refresh=function(){h(this.editPanel)||(this.appendCount(),this.parent.maxLength!==-1&&this.charCountBackground(this.htmlLength))},a.prototype.destroy=function(){this.isDestroyed||(this.parent&&this.parent.rootContainer&&this.parent.rootContainer.classList.contains("e-count-enabled")&&this.parent.rootContainer.classList.remove("e-count-enabled"),this.parent.iframeSettings.enable&&!h(this.parent.inputElement)&&this.parent.inputElement.classList.remove("e-count-enabled"),this.element&&!h(this.parent.element.querySelector("."+Sl))&&E(this.element),this.removeEventListener(),this.editPanel&&(this.editPanel=null),this.element&&(E(this.element),this.element=null),this.isDestroyed=!0)},a.prototype.toggle=function(t){this.element.style.display=t.member==="viewSource"?"none":"block"},a.prototype.addEventListener=function(){this.parent.on(je,this.renderCount,this),this.parent.on(Ke,this.refresh,this),this.parent.on(no,this.refresh,this),this.parent.on(Lr,this.refresh,this),this.parent.on(Fe,this.refresh,this),this.parent.on(Y,this.destroy,this),this.parent.on(Ni,this.toggle,this),this.parent.on(fn,this.toggle,this)},a.prototype.removeEventListener=function(){this.parent.off(je,this.renderCount),this.parent.off(Ke,this.refresh),this.parent.off(Lr,this.refresh),this.parent.off(no,this.refresh),this.parent.off(Fe,this.refresh),this.parent.off(Y,this.destroy),this.parent.off(Ni,this.toggle),this.parent.off(fn,this.toggle)},a.prototype.getModuleName=function(){return"count"},a}(),zd=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(Js,this.commandCallBack,this),this.parent.on(Y,this.removeEventListener,this)},a.prototype.commandCallBack=function(t){var e=!h(t.requestType)&&t.requestType==="FormatPainter"&&t.action==="format-copy";!h(t)&&!h(t.requestType)&&t.requestType!=="Undo"&&t.requestType!=="Redo"&&!e&&this.parent.formatter.saveData(),this.parent.notify(ni,{args:t}),this.parent.notify(no,{})},a.prototype.removeEventListener=function(){this.parent.off(Js,this.commandCallBack),this.parent.off(Y,this.removeEventListener)},a}(),Ud=function(){function a(){}return a.prototype.process=function(t,e,i,n){var r=this,s=t.contentModule.getDocument().getSelection(),o=s.rangeCount>0?s.getRangeAt(s.rangeCount-1):null,l,c;!h(n)&&!h(n.selection)&&(c=n.selection.range);var p=!h(n)&&!h(n.cssClass)&&n.cssClass!=="e-video-inline";if(t.editorMode==="HTML"&&!h(e)&&!p&&(h(e.name)||!h(e.name)&&e.name!=="showDialog")&&(c?l=this.editorManager.nodeSelection.save(c,t.contentModule.getDocument()):l=this.editorManager.nodeSelection.save(o,t.contentModule.getDocument())),!(!h(e)&&e.item.command&&e.item.command!=="Table"&&e.item.command!=="Actions"&&e.item.command!=="Links"&&e.item.command!=="Images"&&e.item.command!=="Files"&&e.item.command!=="Audios"&&e.item.command!=="Videos"&&e.item.command!=="EmojiPicker"&&o&&!(t.contentModule.getEditPanel().contains(this.getAncestorNode(o.commonAncestorContainer))||t.contentModule.getEditPanel()===o.commonAncestorContainer||t.contentModule.getPanel()===o.commonAncestorContainer))){if(!h(e)&&t.maxLength!==-1&&!h(e.item.command)){var d=0;e.item.command==="Links"&&(d=n.text.length===0?n.url.length:n.text.length),(e.item.command==="Images"||e.item.command==="Videos"||e.item.command==="Table"||e.item.command==="Files")&&(d=1);var u=t.getText().trim().replace(/(\r\n|\n|\r|\t)/gm,"").replace(/\u200B/g,"").length,m=t.getSelection().length,f=u-m+d;if(!(t.maxLength===-1||f<=t.maxLength))return}if(h(e)){var g=i.action;e={};var y={originalEvent:i,cancel:!1,requestType:g||i.key+"Key",itemCollection:n};if(_e(e,e,y,!0),g!=="tab"&&g!=="enter"&&g!=="space"&&g!=="escape"&&(t.editorMode==="Markdown"&&g==="insert-table"&&(n={headingText:t.localeObj.getConstant("TableHeadingText"),colText:t.localeObj.getConstant("TableColText")}),t.trigger(Re,e,function(T){T.cancel&&(g==="paste"||g==="cut"||g==="copy")&&i.preventDefault()})),!e.cancel){var S=h(t.tableModule)?!0:t.tableModule?t.tableModule.ensureInsideTableList:!1;(i.which===9&&S||i.which!==9)&&(i.which===13&&t.editorMode==="HTML"&&(n={enterAction:t.enterKey}),this.editorManager.observer.notify(i.type==="keydown"?oa:ki,{event:i,callBack:this.onSuccess.bind(this,t),value:n,enterAction:t.enterKey}))}}else!h(e)&&e.item.command&&e.item.subCommand&&(e.item.command!==e.item.subCommand&&e.item.command!=="Font"||(e.item.subCommand==="FontName"||e.item.subCommand==="FontSize")&&e.name==="dropDownSelect"||(e.item.subCommand==="BackgroundColor"||e.item.subCommand==="FontColor")&&e.name==="colorPickerChanged"||e.item.subCommand==="FormatPainter"||e.item.subCommand==="EmojiPicker")&&(_e(e,e,{requestType:e.item.subCommand,cancel:!1,itemCollection:n,selectType:e.name},!0),t.trigger(Re,e,function(T){if(!T.cancel){var L=!h(T.requestType)&&T.requestType==="FormatPainter"&&T.name==="format-copy",w=!h(T.requestType)&&T.requestType==="FormatPainter"&&T.name==="format-paste";(r.getUndoRedoStack().length===0&&T.item.command!=="Links"&&T.item.command!=="Images"&&!L||w)&&r.saveData(),t.isBlur=!1;var N=!h(i)&&!h(i.target)&&(!h(b(i.target,".e-rte-elements.e-dropdown-popup.e-rte-dropdown-popup.e-quick-dropdown.e-popup-open"))||!h(b(i.target,".e-rte-elements.e-rte-quick-popup.e-popup-open")));(h(l)||!N&&(h(b(l.range.startContainer.parentElement,".e-img-caption"))||b(l.range.startContainer.parentElement,".e-img-caption").getAttribute("contenteditable")!=="false"))&&t.contentModule.getEditPanel().focus(),t.editorMode==="HTML"&&!p&&(h(e.selectType)||!h(e.selectType)&&e.selectType!=="showDialog")&&l.restore();var M=T.item.subCommand.toLocaleLowerCase();M==="paste"||M==="cut"||M==="copy"?t.clipboardAction(M,i):(r.editorManager.observer.notify(ho,{subCommand:T.item.subCommand}),r.editorManager.execCommand(T.item.command,T.item.subCommand,i,r.onSuccess.bind(r,t),T.item.value,T.item.subCommand==="Pre"&&T.selectType==="dropDownSelect"?{name:T.selectType}:n,"#"+t.getID()+" iframe",t.enterKey))}}));(h(i)||i&&i.action!=="copy")&&this.enableUndo(t)}},a.prototype.getAncestorNode=function(t){return t=t.nodeType===3?t.parentNode:t,t},a.prototype.onKeyHandler=function(t,e){var i=this;this.editorManager.observer.notify(ki,{event:e,callBack:function(){t.notify(Zi,{}),i.enableUndo(t)},enterAction:t.enterKey})},a.prototype.onSuccess=function(t,e){t.notify(Zi,{}),e&&(h(e.event)||e.event.action!=="copy")&&(this.enableUndo(t),t.notify(Js,e)),t.trigger(ct,e,function(i){if(t.setPlaceHolder(),(i.requestType==="Images"||i.requestType==="Links"||i.requestType==="Audios"||i.requestType==="Videos")&&t.editorMode==="HTML"){var n=i;if(i.requestType==="Links"&&i.event&&i.event.type==="keydown"&&i.event.keyCode===32)return;t.notify(un,{args:n.event,type:i.requestType,isNotify:!0,elements:n.elements})}i.requestType==="VideosPlayPause"&&t.notify("editAreaClick",{args:event}),t.autoResize()})},a.prototype.saveData=function(t){this.editorManager.undoRedoManager.saveData(t)},a.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},a.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},a.prototype.enableUndo=function(t){var e=this.getUndoStatus();t.inlineMode.enable&&(!x.isDevice||Se())?Bi(t.quickToolbarModule.inlineQTBar.quickTBarObj,e):t.toolbarModule&&t.toolbarModule.baseToolbar&&Bi(t.toolbarModule.baseToolbar,e)},a}(),vh=function(){function a(t,e){this.BLOCK_TAGS=["p","h1","h2","h3","h4","h5","h6","blockquote","li","pre","td","th","div","hr","section","figure"],this.BASIC_FORMATS=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.root=t,this.currentDocument=e}return a.prototype.getBlockNodes=function(){var t=[];if(h(this.root.querySelector(".e-cell-select")))return t;var e=this.root.querySelector(".e-cell-select").closest("table"),i=e.querySelectorAll(".e-cell-select");if(h(i)||i.length<2)return t;for(var n=0;n<i.length;n++)this.addBlockNodes(i[n],t);return this.wrapParagraphNodes(t),t},a.prototype.addBlockNodes=function(t,e){var i=t.childNodes;if(i.length===0){e.push(t);return}for(var n=0;n<i.length;n++){var r=i[n];e.indexOf(r.parentElement)>=0||(r.parentElement&&(r.parentElement.nodeName==="TD"||r.parentElement.nodeName==="TH")&&r.parentElement.childNodes.length===1&&(r.nodeName==="BR"||(r.nodeType,Node.TEXT_NODE)),e.push(r.parentElement))}},a.prototype.getTextNodes=function(){var t=[];if(h(this.root.querySelector(".e-cell-select")))return t;var e=this.root.querySelector(".e-cell-select").closest("table"),i=e.querySelectorAll(".e-cell-select");if(h(i)||i.length<2)return t;for(var n=0;n<i.length;n++)this.addTextNodes(i[n],t);return t},a.prototype.addTextNodes=function(t,e){var i=t.childNodes;if(i.length===0&&(t.nodeName==="TD"||t.nodeName==="TH")){var n=this.currentDocument.createTextNode("​");t.appendChild(n),e.push(n);return}else if(i.length===1&&(t.nodeName==="TD"||t.nodeName==="TH")&&i[0].nodeName==="BR"){var n=this.currentDocument.createTextNode("​");t.insertBefore(n,i[0]),e.push(n);return}for(var r=0;r<i.length;r++){var s=i[r];s.nodeType===Node.TEXT_NODE?e.push(s):s.nodeType===Node.ELEMENT_NODE&&this.addTextNodes(s,e)}},a.prototype.wrapParagraphNodes=function(t){for(var e=Array.from(t),i=0;i<e.length;i++){var n=e[i];if(n.nodeName==="TD"||n.nodeName==="TH")if(n.childNodes.length===1&&(n.childNodes[0].nodeName==="BR"||n.childNodes[0].nodeType===Node.TEXT_NODE)){var r=n.childNodes[0],s=B("p");r.parentElement.insertBefore(s,r),s.appendChild(r);var o=t.indexOf(n);t[o]=s}else{var l=t.indexOf(n);this.wrapInlineNodes(n,t,l)}}for(var i=0;i<t.length;i++){var c=t[i];if(c.nodeName==="LI"&&c.childNodes.length===1){var p=c.childNodes[0];p.nodeType===Node.ELEMENT_NODE&&this.BASIC_FORMATS.indexOf(p.nodeName.toLocaleLowerCase())>=0&&p.textContent===c.textContent&&(t[i]=p)}}},a.prototype.wrapInlineNodes=function(t,e,i){var n=t.childNodes[0],r=B("p"),s=[];if(h(n)){t.appendChild(r),s.push(r),Rl(e,s,i);return}for(;n;)if(n.nodeName==="BR")n.parentNode.insertBefore(r,n),r.appendChild(n),r.childNodes.length>0&&s.indexOf(r)<0&&s.push(r),n=r.nextSibling,r=B("p");else if(this.BLOCK_TAGS.indexOf(n.nodeName.toLocaleLowerCase())>=0)if(s.push(n),r.childNodes.length>0)n=r.nextSibling;else{if(n&&n.nodeName==="LI"&&n.querySelectorAll("li").length>0)for(var o=n.querySelectorAll("li"),l=0;l<o.length;l++)s.push(o[l]);n.nodeName==="LI"&&h(n.nextSibling)?n=n.parentElement.nextSibling:n=n.nextSibling}else if(n.nodeType===Node.TEXT_NODE){if(n.textContent.trim()===""&&n.textContent.indexOf("​")<0){var c=n.nextSibling;E(n),n=c;continue}n.parentNode.insertBefore(r,n);var p=n;r.appendChild(p),r.childNodes.length>0&&s.indexOf(r)<0&&s.push(r),n=r.nextSibling}else if(n.nodeName==="TABLE"||n.nodeName==="UL"||n.nodeName==="OL")if(n.nodeName==="TABLE"){for(var d=[],u=n.querySelectorAll("td, th"),l=0;l<u.length;l++)this.addBlockNodes(u[l],d);this.wrapParagraphNodes(d);for(var l=0;l<d.length;l++)s.push(d[l]);n=n.nextSibling}else n=n.firstElementChild;else this.BLOCK_TAGS.indexOf(n.nodeName.toLocaleLowerCase())<0&&(n.parentNode.insertBefore(r,n),r.appendChild(n),r.childNodes.length>0&&s.indexOf(r)<0&&s.push(r),n=r.nextSibling);Rl(e,s,i)},a}(),G={startSelection:"e-editor-select-start",endSelection:"e-editor-select-end"},Pr=function(){function a(t,e){this.parent=t,this.nodeSelection=new qe,this.currentDocument=e,this.tableSelection=new vh(t,e)}return a.prototype.contents=function(t){return t&&t.tagName!=="IFRAME"?Array.prototype.slice.call(t.childNodes||[]):[]},a.prototype.isBlockNode=function(t){return!!t&&t.nodeType===Node.ELEMENT_NODE&&li.indexOf(t.tagName.toLowerCase())>=0},a.prototype.isLink=function(t){return!!t&&t.nodeType===Node.ELEMENT_NODE&&t.tagName.toLowerCase()==="a"},a.prototype.blockParentNode=function(t){for(;t&&t.parentNode!==this.parent&&(!t.parentNode||!this.hasClass(t.parentNode,"e-node-inner"));null)if(t=t.parentNode,this.isBlockNode(t))return t;return t},a.prototype.rawAttributes=function(t){var e={},i=t.attributes;if(i.length>0)for(var n=0;n<i.length;n++){var r=i[n];e[r.nodeName]=r.value}return e},a.prototype.attributes=function(t){if(!t)return"";for(var e="",i=this.rawAttributes(t),n=Object.keys(i).sort(),r=0;r<n.length;r++){var s=n[r],o=i[""+s];o.indexOf("'")<0&&o.indexOf('"')>=0?e+=" "+s+"='"+o+"'":(o.indexOf('"')>=0&&o.indexOf("'")>=0&&(o=o.replace(/"/g,"&quot;")),e+=" "+s+'="'+o+'"')}return e},a.prototype.clearAttributes=function(t){for(var e=t.attributes,i=e.length-1;i>=0;i--){var n=e[i];t.removeAttribute(n.nodeName)}},a.prototype.openTagString=function(t){return"<"+t.tagName.toLowerCase()+this.attributes(t)+">"},a.prototype.closeTagString=function(t){return"</"+t.tagName.toLowerCase()+">"},a.prototype.createTagString=function(t,e,i){return"<"+t.toLowerCase()+this.attributes(e)+">"+i+"</"+t.toLowerCase()+">"},a.prototype.isList=function(t){return!!t&&["UL","OL"].indexOf(t.tagName)>=0},a.prototype.isElement=function(t){return t===this.parent},a.prototype.isEditable=function(t){return(!t.getAttribute||t.getAttribute("contenteditable")==="true")&&["STYLE","SCRIPT"].indexOf(t.tagName)<0},a.prototype.hasClass=function(t,e){return t&&t.classList&&t.classList.contains(e)},a.prototype.replaceWith=function(t,e){var i=t.parentNode;i.insertBefore(this.parseHTMLFragment(e),t),E(t)},a.prototype.parseHTMLFragment=function(t){var e=B("template");return e.innerHTML=t,e.content instanceof DocumentFragment?e.content:document.createRange().createContextualFragment(t)},a.prototype.wrap=function(t,e){return t.parentNode.insertBefore(e,t),e=t.previousSibling,e.appendChild(t),e},a.prototype.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},a.prototype.wrapInner=function(t,e){for(t.appendChild(e),e=t.querySelector(".e-rte-wrap-inner"),e.classList.remove("e-rte-wrap-inner"),e.classList.length===0&&e.removeAttribute("class");t.firstChild!==e;)e.appendChild(t.firstChild);return e},a.prototype.unWrap=function(t){for(var e=t.parentNode,i=[];t.firstChild&&t.textContent!==" ";)i.push(t.firstChild),e.insertBefore(t.firstChild,t);return i=i.length>0?i:[t.parentNode],e.removeChild(t),i},a.prototype.getSelectedNode=function(t,e){return t.nodeType===Node.ELEMENT_NODE&&t.childNodes.length>0&&t.childNodes[e-1]&&t.childNodes[e-1].nodeType===Node.ELEMENT_NODE&&(t.childNodes[e-1].classList.contains(G.startSelection)||t.childNodes[e-1].classList.contains(G.endSelection))?t=t.childNodes[e-1]:t.nodeType===Node.ELEMENT_NODE&&t.childNodes.length>0&&t.childNodes[e]&&(t=t.childNodes[e]),t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),t},a.prototype.nodeFinds=function(t,e){for(var i=[],n=0;n<e.length;n++)t.contains(e[n])&&t!==e[n]&&i.push(e[n]);return i},a.prototype.isEditorArea=function(){var t=this.getRangePoint(0),e;for(e=t.commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},a.prototype.getRangePoint=function(t){var e=this.getSelection(),i=[];if(e&&e.getRangeAt&&e.rangeCount){i=[];for(var n=0;n<e.rangeCount;n++)i.push(e.getRangeAt(n))}else i=[this.currentDocument.createRange()];return typeof t<"u"?i[t]:i},a.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},a.prototype.getPreviousNode=function(t){for(t=t.previousElementSibling;t&&t.textContent===`
`;null)t=t.previousElementSibling;return t},a.prototype.encode=function(t){var e=document.createElement("div");return e.innerText=t,e.innerHTML.replace(/<br\s*[\/]?>/gi,`
`)},a.prototype.saveMarker=function(t){var e=this.parent.querySelector("."+G.startSelection),i=this.parent.querySelector("."+G.endSelection),n,r;if(this.hasClass(e,G.startSelection)&&e.classList.length>1){var s=this.createTagString(St,e,this.encode(e.textContent));this.replaceWith(e,s),e=this.parent.querySelector("."+G.startSelection),e.classList.remove(G.startSelection),n=e.childNodes[0]}else n=this.unWrap(e)[0];if(this.hasClass(i,G.endSelection)&&i.classList.length>1){var s=this.createTagString(St,i,this.encode(i.textContent));this.replaceWith(i,s),i=this.parent.querySelector("."+G.endSelection),i.classList.remove(G.endSelection),r=i.childNodes[0]}else r=i?this.unWrap(i)[0]:n;return t.startContainer=t.getNodeArray(n,!0),t.endContainer=t.getNodeArray(r,!1),t},a.prototype.marker=function(t,e){return'<span class="'+t+'">'+e+"</span>"},a.prototype.setMarker=function(t){var e=t.range,i=e.startContainer.childNodes,n=i.length>1&&i[0].nodeName==="TABLE",r=i.length>1&&i[0].nodeName==="IMAGE"&&e.endOffset===1&&e.endContainer.nodeName==="#text"&&e.endContainer.textContent.length===0,s=(n?Cd(i[e.startOffset+1]):i[e.startOffset>0?e.startOffset-1:e.startOffset])||e.startContainer,o=e.endContainer.childNodes[e.endOffset>0?r?e.endOffset:e.endOffset-1:e.endOffset]||e.endContainer;if(s.nodeType===Node.ELEMENT_NODE&&o.nodeType===Node.ELEMENT_NODE&&(s.contains(o)||o.contains(s))){var l=s.contains(o)?s:o,c=l.nodeType!==Node.TEXT_NODE;if(c){for(var p=[],d=[],u=l;l.contains(u);null)p.indexOf(u)<0&&u.childNodes&&u.childNodes.length?(p.push(u),u=u.childNodes[0]):u.nextSibling?u=u.nextSibling:u.parentNode&&(u=u.parentNode,p.push(u)),d.indexOf(u)<0&&(u.nodeType===Node.TEXT_NODE||Ct.indexOf(u.parentNode.tagName.toLocaleLowerCase())>=0&&(u.tagName==="BR"||u.tagName==="IMG"))&&d.push(u);d.length&&(s=s.contains(o)?d[0]:s,o=d[d.length-1])}}if(s!==o){if(s.nodeType!==Node.TEXT_NODE&&(s.tagName==="BR"&&Ct.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0||s.tagName==="IMG")){this.replaceWith(s,this.marker(G.startSelection,this.encode(s.textContent)));var m=e.startContainer.querySelector("."+G.startSelection);m.appendChild(s)}else if(s.nodeType!==3&&s.nodeName!=="#text"&&s.nodeName!=="BR"){var f=this.marker(G.startSelection,"");Ne([this.parseHTMLFragment(f)],s)}else this.replaceWith(s,this.marker(G.startSelection,this.encode(s.textContent)));if(o.nodeType!==Node.TEXT_NODE&&o.tagName==="BR"&&Ct.indexOf(o.parentNode.tagName.toLocaleLowerCase())>=0){this.replaceWith(o,this.marker(G.endSelection,this.encode(o.textContent)));var g=e.endContainer.querySelector("."+G.endSelection);g.appendChild(o)}else this.ensureSelfClosingTag(o,G.endSelection,e)}else this.ensureSelfClosingTag(s,G.startSelection,e)},a.prototype.ensureSelfClosingTag=function(t,e,i){var n=!1;if(t.nodeType===3)this.replaceWith(t,this.marker(e,this.encode(t.textContent)));else if(t.tagName==="BR"){this.replaceWith(t,this.marker(e,this.encode(t.textContent)));var r=i.startContainer.querySelector("."+e);r&&r.parentElement.appendChild(t)}else{var s=h(t.parentElement)?"":t.parentElement.tagName.toLocaleLowerCase();if(t.tagName==="IMG"&&s!=="p"&&s!=="div"){var o=document.createElement("p");t.parentElement.insertBefore(o,t),o.appendChild(t),t=o.children[0]}if(t.tagName==="TABLE")if(n=!0,t.textContent===""){var l=t.querySelectorAll("td");t=l[l.length-1],t=h(t.childNodes[0])?t:t.childNodes[0]}else{for(var c=t.lastChild;c.nodeType!==3&&c.nodeName!=="#text"&&c.nodeName!=="BR";)c=c.lastChild;t=c}for(var p=0;p<Il.length;p++)t=t.tagName===Il[p]&&!n?t.parentNode:t;if(t.nodeType===3&&t.nodeName==="#text")this.replaceWith(t,this.marker(e,this.encode(t.textContent)));else if(t.nodeName==="BR"){this.replaceWith(t,this.marker(G.endSelection,this.encode(t.textContent)));var d=i.endContainer.querySelector("."+G.endSelection);d.appendChild(t)}else{var u=this.marker(e,"");Ne([this.parseHTMLFragment(u)],t)}}},a.prototype.createTempNode=function(t){var e=t.textContent;if(t.tagName==="BR"){var i="<"+St+"></"+St+">",n=t.parentNode;Ct.indexOf(n.tagName.toLocaleLowerCase())>=0&&(t=this.wrap(t,this.parseHTMLFragment(i)))}else if(t.nodeType!==Node.TEXT_NODE&&(t.classList.contains(G.startSelection)||t.classList.contains(G.endSelection))||e.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||e.length&&e.indexOf(`
`)<0){var i="<"+St+"></"+St+">",r=t;t=this.wrap(t,this.parseHTMLFragment(i));var s=r.nodeType===Node.ELEMENT_NODE&&r.firstChild&&r.firstChild.nodeName==="BR"&&(r.classList.contains(G.startSelection)||r.classList.contains(G.endSelection));!s&&t.nextElementSibling&&t.nextElementSibling.tagName==="BR"&&t.appendChild(t.nextElementSibling)}return t},a.prototype.getImageTagInSelection=function(){var t=this.getSelection();return this.isEditorArea()&&t.rangeCount?t.focusNode.querySelectorAll("img"):null},a.prototype.gatherElementsAround=function(t,e){var i=B(e),n=t.previousSibling,r=t.parentElement;r.className==="e-editor-select-start"?r.parentNode.insertBefore(i,r):r&&r.insertBefore(i,t);for(var s=0;n!==null&&n.nodeName!=="BR"&&!this.isBlockNode(n);){var o=n.previousSibling;(n.nodeType===3||n.nodeType===1)&&(s===0?i.appendChild(n):i.insertBefore(n,i.firstChild)),n=o,s++}for(i.appendChild(t),n=i.nextSibling?i.nextSibling:i.parentElement.nextSibling;n!==null&&n.nodeName!=="BR"&&!this.isBlockNode(n);){var l=n.nextSibling?n.nextSibling:n.parentElement.nextSibling;(n.nodeType===3||n.nodeType===1)&&i.appendChild(n),n=l}return i},a.prototype.convertToBlockNodes=function(t,e){if(t.length>1)for(var i=0,n=t[0];!h(n);){if(n.nodeName==="BR"){var r=n.nextSibling;E(n),n=r}if(!h(n)){e?t[i]=n.nodeName==="LI"||this.isBlockNode(n)?n:this.gatherElementsAround(n,e?"p":"div"):t[i]=this.isBlockNode(t[i])?t[i]:this.gatherElementsAround(n,e?"p":"div");var s=t[i].nodeName==="LI"?t[i].parentElement:t[i],o=s.nodeName==="#text"?s.parentElement:s;n=!h(o.querySelector(".e-editor-select-end"))||!h(b(n,".e-editor-select-end"))?null:s.nextSibling,n===null&&!h(s.nextSibling)&&s.nextSibling.nodeName==="BR"&&E(s.nextSibling)}i++}else this.isBlockNode(t[0])||(t[0]=this.gatherElementsAround(t[0],e?"p":"div"),!h(t[0].nextSibling)&&t[0].nextSibling.nodeName==="BR"&&E(t[0].nextSibling));return t},a.prototype.blockNodes=function(t){var e=[],i=this.getSelection();if(this.isEditorArea()&&i.rangeCount)for(var n=this.getRangePoint(),r=0;r<n.length;r++){var s=void 0,o=n[r],l=this.getSelectedNode(o.startContainer,o.startOffset),c=this.getSelectedNode(o.endContainer,o.endOffset);this.isBlockNode(l)&&e.indexOf(l)<0&&e.push(l),s=this.blockParentNode(l);var p=this.blockParentNode(c);if(s&&e.indexOf(s)<0)if(!h(t)&&t)if(o.commonAncestorContainer.nodeName==="TD"||s.nodeName==="TD"||p.nodeName==="TD"){var d=this.getPreBlockNodeCollection(o);d.length>1?this.wrapWithBlockNode(d,e):d.length>0&&(l!==c&&l.nodeName!=="BR"?e.push(this.createTempNode(l)):l===c&&l.nodeName==="SPAN"&&(l.classList.contains(G.startSelection)||l.classList.contains(G.endSelection))&&e.push(this.createTempNode(l)))}else e.push(s);else if(Ct.indexOf(s.tagName.toLocaleLowerCase())>=0&&(l.tagName==="BR"||l.nodeType===Node.TEXT_NODE||l.classList.contains(G.startSelection)||l.classList.contains(G.endSelection))){var u=l.previousSibling&&l.previousSibling.nodeType===Node.TEXT_NODE?l.previousSibling:l;!l.nextSibling&&!l.previousSibling&&l.tagName==="BR"?e.push(u):e.push(this.createTempNode(u))}else e.push(s);for(var m=[],f=l;f!==c&&f!==this.parent;null)m.indexOf(f)<0&&f.childNodes&&f.childNodes.length?(m.push(f),f=f.childNodes[0]):f&&f.nodeType!==8&&(f.tagName==="BR"||f.nodeType===Node.TEXT_NODE&&f.textContent.trim()!==""||f.nodeType!==Node.TEXT_NODE&&(f.classList.contains(G.startSelection)||f.classList.contains(G.endSelection)))&&Ct.indexOf(f.parentNode.tagName.toLocaleLowerCase())>=0?f=this.createTempNode(f):f.nextSibling&&f.nextSibling.nodeType!==8&&(f.nextSibling.tagName==="BR"||f.nextSibling.nodeType===Node.TEXT_NODE||f.nextSibling.classList.contains(G.startSelection)||f.nextSibling.classList.contains(G.endSelection))&&Ct.indexOf(f.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?f=this.createTempNode(f.nextSibling):f.nextSibling?f=f.nextSibling:f.parentNode&&(f=f.parentNode,m.push(f)),e.indexOf(f)<0&&f.nodeType===Node.ELEMENT_NODE&&Ct.indexOf(f.parentNode.tagName.toLocaleLowerCase())>=0&&(f.classList.contains(G.startSelection)||f.classList.contains(G.endSelection))&&e.push(this.createTempNode(f)),this.isBlockNode(f)&&this.ignoreTableTag(f)&&m.indexOf(f)<0&&e.indexOf(f)<0&&(f!==c||o.endOffset>0)&&e.push(f),f.nodeName==="IMG"&&f.parentElement.contentEditable==="true"&&e.push(f);s=this.blockParentNode(c),s&&this.ignoreTableTag(s)&&e.indexOf(s)<0&&!h(s.previousElementSibling)&&s.previousElementSibling.tagName!=="IMG"&&e.push(s)}for(var g=e.length-1;g>0;g--){var m=this.nodeFinds(e[g],e);if(m.length){var y=e[g].querySelectorAll("ul, ol");if(e[g].tagName==="LI"&&y.length>0)continue;e.splice(g,1)}}var S=this.tableSelection.getBlockNodes();return S.length>0?S:e},a.prototype.ignoreTableTag=function(t){return!($i.indexOf(t.tagName.toLocaleLowerCase())>=0)},a.prototype.getPreBlockNodeCollection=function(t){var e=this.getSelectedNode(t.startContainer,t.startOffset),i=this.getSelectedNode(t.endContainer,t.endOffset),n=[],r=e.closest("td, th");if(h(r))return n;for(var s=Array.from(r.childNodes),o=!0,l=this.getClosestInlineParent(e,r,!0),c=this.getClosestInlineParent(i,r,!1),p=0;p<s.length;p++){var d=s[p];l===c&&d===l?(n.push(d),o=!0):d===l?o=!1:d===c&&(n.push(d),o=!0),!o&&n.push(d)}return n},a.prototype.getClosestInlineParent=function(t,e,i){if(t.nodeType===Node.TEXT_NODE||this.isBlockNode(t))return t;for(var n=t,r=!1;n;){var s=n;if(r){if(this.isBlockNode(n))return s;if(i&&n.previousSibling){if(this.isBlockNode(n.previousSibling)||n.previousSibling.nodeName==="BR")return s;n=n.previousSibling}else if(!i&&n.nextSibling){if(this.isBlockNode(n.nextSibling)||n.nextSibling.nodeName==="BR")return s;n=n.nextSibling}else return n}else n=n.parentElement,n===e&&(n=s,r=!0)}return null},a.prototype.wrapWithBlockNode=function(t,e){for(var i=B("p"),n=0;n<t.length;n++){var r=t[n];if(r.nodeName==="BR")r.parentNode.insertBefore(i,r),i.appendChild(r),i.childNodes.length>0&&e.push(i),i=B("p");else{if(this.isBlockNode(r))e.push(r);else{if(r.nodeName==="#text"&&r.textContent.trim()==="")continue;i.childElementCount===0&&r.parentNode.insertBefore(i,r),i.appendChild(r)}n===t.length-1&&i.nextElementSibling&&i.querySelectorAll("br").length===0&&i.nextElementSibling.nodeName==="BR"&&i.appendChild(i.nextElementSibling)}}i.childNodes.length>0&&e.indexOf(i)<0&&e.push(i)},a}(),Vd=function(){function a(t){this.parent=t,this.domNode=this.parent.domNode,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(ha,this.applyListsHandler,this),this.parent.observer.on(hi,this.onKeyUp,this),this.parent.observer.on(Ee,this.keyDownHandler,this),this.parent.observer.on(ua,this.spaceKeyAction,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(ha,this.applyListsHandler),this.parent.observer.off(hi,this.onKeyUp),this.parent.observer.off(Ee,this.keyDownHandler),this.parent.observer.off(ua,this.spaceKeyAction),this.parent.observer.off(ie,this.destroy)},a.prototype.testList=function(t){var e=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],i=h(t)?null:t.innerText.trim().split(".")[0]+".";if(!h(i)){for(var n=0;n<e.length;n++)if(e[n].test(i))return!0}return!1},a.prototype.testCurrentList=function(t){var e=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!h(t.startContainer.textContent.slice(0,t.startOffset))){for(var i=t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim(),n=0;n<e.length;n++)if(e[n].test(i)&&i.length===2)return!0}return!1},a.prototype.spaceList=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(e,this.parent.currentDocument);var i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset);this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset);var n=i.previousElementSibling,r=i.nextElementSibling,s=h(n)?null:n.innerText.trim().substring(0,1),o=h(r)?null:r.innerText.trim().substring(0,1),l=this.testCurrentList(e),c=this.testList(n),p=this.testList(r);if(!c&&!p&&s!=="*"&&o!=="*"){var d=B("br");l?(e.startContainer.textContent=e.startContainer.textContent.slice(e.startOffset,e.startContainer.textContent.length),e.startContainer.nodeName==="#text"&&e.startContainer.textContent.length===0&&this.parent.domNode.insertAfter(d,e.startContainer),this.applyListsHandler({subCommand:"OL",callBack:t.callBack}),t.event.preventDefault()):(e.startContainer.textContent.replace(/\u200B/g,"").slice(0,e.startOffset).trim()==="*"||e.startContainer.textContent.replace(/\u200B/g,"").slice(0,e.startOffset).trim()==="-")&&(e.startContainer.textContent=e.startContainer.textContent.slice(e.startOffset,e.startContainer.textContent.length),e.startContainer.nodeName==="#text"&&e.startContainer.textContent.length===0&&this.parent.domNode.insertAfter(d,e.startContainer),this.applyListsHandler({subCommand:"UL",callBack:t.callBack}),t.event.preventDefault())}},a.prototype.enterList=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=e.startContainer.nodeName==="LI"?e.startContainer:e.startContainer.parentElement.closest("LI"),n=e.endContainer.nodeName==="LI"?e.endContainer:e.endContainer.parentElement.closest("LI"),r=!1;if(!h(i)){var s=i.querySelectorAll(".e-video-clickelem"),o=s.length>0&&s[0].childNodes[0].nodeName==="IFRAME";r=i.querySelectorAll("IMG").length>0||i.querySelectorAll("AUDIO").length>0||i.querySelectorAll("VIDEO").length>0||o}if(!h(i)&&!h(n)&&i===n&&i.tagName==="LI"&&i.textContent.trim()===""&&!r){if(i.innerHTML.indexOf("&nbsp;")>=0)return;i.textContent.charCodeAt(0)===65279&&(i.textContent="");var l=i.parentElement,c=l.parentElement;if(h(c.closest("UL"))&&h(c.closest("OL"))){if(!h(i.nextElementSibling)){var p=this.parent.domNode.blockParentNode(i);this.parent.nodeCutter.GetSpliceNode(e,p)}var d=void 0;t.enterAction==="DIV"?(d=B("div"),d.innerHTML="<br>"):t.enterAction==="P"?(d=B("p"),d.innerHTML="<br>"):d=B("br"),!h(c)&&c.nodeName==="BLOCKQUOTE"&&this.parent.observer.notify("blockquote_list_handled",{}),this.parent.domNode.insertAfter(d,l),t.event.preventDefault(),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,d,0),l.textContent===""&&l.querySelectorAll("audio,video").length===0?E(l):E(i)}!h(c)&&(!h(c.closest("UL"))||!h(c.closest("OL")))&&c.nodeName==="LI"&&c.style.listStyleType==="none"&&c.textContent===""&&i.textContent===""&&i===l.firstElementChild&&h(i.nextSibling)&&(E(l),c.style.removeProperty("list-style-type"),t.event.preventDefault())}},a.prototype.backspaceList=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset),n=this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset);if(i=i.nodeName==="BR"?i.parentElement:i,n=n.nodeName==="BR"?n.parentElement:n,i===n&&!h(b(i,"li"))&&(i.textContent.trim()===""&&i.textContent.charCodeAt(0)===65279||i.textContent.length===1&&i.textContent.charCodeAt(0)===8203)&&(i.textContent=""),i===n&&i.tagName==="LI"&&i.textContent.length===0&&h(i.previousElementSibling)&&i.removeAttribute("style"),i===n&&i.textContent===""){if(i.parentElement.tagName==="LI"&&n.parentElement.tagName==="LI")E(i);else if(i.closest("ul")||i.closest("ol")){var r=h(i.closest("ul"))?i.closest("ol"):i.closest("ul");if(r.firstElementChild===i&&!h(r.children[1])&&(r.children[1].tagName==="OL"||r.children[1].tagName==="UL"))if(r.tagName===r.children[1].tagName){for(;r.children[1].lastChild;)this.parent.domNode.insertAfter(r.children[1].lastChild,r.children[1]);E(r.children[1])}else r.parentElement.insertBefore(r.children[1],r)}}else if(!h(i.firstChild)&&i.firstChild.nodeName==="BR"&&!h(i.childNodes[1])&&(i.childNodes[1].nodeName==="UL"||i.childNodes[1].nodeName==="OL")){var r=h(i.closest("ul"))?i.closest("ol"):i.closest("ul");if(r.tagName===i.childNodes[1].nodeName){for(;i.childNodes[1].lastChild;)this.parent.domNode.insertAfter(i.children[1].lastChild,i);E(i.childNodes[1])}else r.parentElement.insertBefore(i.children[1],r)}this.removeList(e,t),this.firstListBackSpace(e,t)},a.prototype.removeList=function(t,e){var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),n=!h(t.endContainer.parentElement.closest("li"))&&t.endContainer.parentElement.closest("li").childElementCount>1&&t.endContainer.nodeName==="#text"?t.endContainer:this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),r=t.startContainer.nodeName==="#text"?t.startContainer.parentElement.closest("li"):t.startContainer.closest("li"),s="";!h(r)&&!h(r.firstChild)&&r.childNodes.forEach(function(o){s=s+o.textContent}),i=i.nodeName==="BR"?i.parentElement:i,n=n.nodeName==="BR"?n.parentElement:n,i=i.nodeName!=="LI"&&!h(i.closest("LI"))?i.closest("LI"):i,n=n.nodeName!=="LI"&&n.nodeName!=="#text"&&!h(n.closest("LI"))?n.closest("LI"):n,(t.commonAncestorContainer.nodeName==="OL"||t.commonAncestorContainer.nodeName==="UL"||t.commonAncestorContainer.nodeName==="LI")&&h(n.nextElementSibling)&&n.textContent.length===t.endOffset&&h(i.previousElementSibling)&&t.startOffset===0||x.userAgent.indexOf("Firefox")!==-1&&t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement&&t.startOffset===0&&t.endOffset===1?(x.userAgent.indexOf("Firefox")!==-1?E(t.commonAncestorContainer.childNodes[0]):t.commonAncestorContainer.nodeName==="LI"?E(t.commonAncestorContainer.parentElement):E(t.commonAncestorContainer),e.event.preventDefault()):!h(r)&&!t.collapsed&&r.textContent===s&&(t.deleteContents(),this.parent.editableElement.querySelectorAll("li").forEach(function(o){(!o.firstChild||o.textContent.trim()==="")&&o.parentNode.removeChild(o)}),this.parent.editableElement.querySelectorAll("ol").forEach(function(o){(!o.firstChild||o.textContent.trim()==="")&&o.parentNode.removeChild(o)}),this.parent.editableElement.querySelectorAll("ul").forEach(function(o){(!o.firstChild||o.textContent.trim()==="")&&o.parentNode.removeChild(o)}),e.event.preventDefault())},a.prototype.onKeyUp=function(t){if(!h(this.commonLIParent)&&!h(this.commonLIParent.querySelector(".removeList"))){for(var e=this.commonLIParent.querySelector(".removeList");!h(e.firstChild);)this.parent.domNode.insertAfter(e.firstChild,e);E(e)}if(t.event.keyCode===13)for(var i=this.parent.editableElement.querySelectorAll("UL, OL"),n=0;n<i.length;n++)!h(i[n])&&!h(i[n].parentElement)&&!h(i[n].previousElementSibling)&&(i[n].parentElement.nodeName==="UL"||i[n].parentElement.nodeName==="OL")&&i[n].previousElementSibling.appendChild(i[n])},a.prototype.firstListBackSpace=function(t,e){var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);if(h(i.closest("OL"))?h(i.closest("UL"))||(this.commonLIParent=i.closest("UL")):this.commonLIParent=i.closest("OL"),i.nodeName==="LI"&&t.startOffset===0&&t.endOffset===0&&h(i.previousSibling)&&!h(this.commonLIParent)&&h(this.commonLIParent.previousSibling)&&h(this.commonLIParent.parentElement.closest("OL"))&&h(this.commonLIParent.parentElement.closest("UL"))&&h(this.commonLIParent.parentElement.closest("LI"))){var n=B("P");n.innerHTML="&#8203;",i.classList.add("removeList"),this.commonLIParent.parentElement.insertBefore(n,this.commonLIParent)}},a.prototype.keyDownHandler=function(t){if(t.event.which===13&&this.enterList(t),t.event.which===32&&this.spaceList(t),t.event.which===8&&this.backspaceList(t),t.event.which===46&&t.event.action==="delete"||t.event.which===88&&t.event.action==="cut"){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=e.commonAncestorContainer,n=e.startContainer,r=e.endContainer,s=n.nodeType===3?this.domNode.blockParentNode(n):n,o=r.nodeType===3?this.domNode.blockParentNode(r):r;(i.nodeName==="UL"||i.nodeName==="OL")&&s!==o&&(!h(b(s,"ul"))||!h(b(s,"ol")))&&(!h(b(o,"ul"))||!h(b(o,"ol")))&&i.lastElementChild===b(o,"li")&&i.lastChild!==o&&!e.collapsed&&this.areAllListItemsSelected(i,e)&&E(i),this.removeList(e,t)}if(t.event.which===9){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument);t.event.action&&t.event.action==="indent"||(this.saveSelection=this.parent.nodeSelection.save(e,this.parent.currentDocument));var l=void 0;e.startOffset,e.endOffset;var s=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset),o=this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset);if(s===o&&(s.nodeName==="BR"||s.nodeName==="#text")&&Ct.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0)return;t.event.action&&t.event.action==="indent"||this.domNode.setMarker(this.saveSelection),l=this.domNode.blockNodes();for(var c=[],p=!0,d=0;d<l.length;d++)l[d].parentNode.tagName==="LI"?c.push(l[d].parentNode):l[d].tagName==="LI"&&l[d].childNodes[0].tagName!=="P"&&l[d].childNodes[0].tagName!=="OL"&&l[d].childNodes[0].tagName!=="UL"&&c.push(l[d]);c.length>1||c.length===1?(t.event.preventDefault(),t.event.stopPropagation(),this.currentAction=this.getAction(c[0]),t.event.shiftKey?(this.revertList(c,t),this.revertClean()):p=this.nestedList(c),p&&(this.cleanNode(),this.parent.editableElement.focus()),t.event.action&&t.event.action==="indent"||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),t.callBack&&t.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:t.event}))):t.event.action&&t.event.action==="indent"||(t.event&&t.event.shiftKey&&t.event.key==="Tab"&&(t.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore())}else switch(t.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:t.callBack}),t.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:t.callBack}),t.event.preventDefault();break}},a.prototype.spaceKeyAction=function(t){t.event.which===32&&this.spaceList(t)},a.prototype.getAction=function(t){var e=t.parentNode;return e.nodeName==="OL"?"OL":"UL"},a.prototype.revertClean=function(){for(var t=this.parent.editableElement.querySelectorAll("ul, ol"),e=0;e<t.length;e++){var i=t[e].querySelectorAll("ul, ol");if(i.length>0)for(var n=0;n<i.length;n++){var r=i[n].previousSibling;r&&r.tagName==="LI"&&r.appendChild(i[n])}}},a.prototype.noPreviousElement=function(t){var e,i,n=t.querySelectorAll("ol, ul"),r=t.querySelectorAll("li"),s=this.domNode.contents(r[0])[0];if(r.length>0&&(s.nodeName==="OL"||s.nodeName==="UL")?e=r[0]:i=n[0],e)for(var o=this.domNode.contents(t)[0];o&&!this.domNode.isList(o);null){var l=o.nextSibling;Ot([o],e),U(t,{"list-style-type":"none"}),U(e,{"list-style-type":""}),o=l}else if(i){var c=B("li");Ot([c],i);for(var o=this.domNode.contents(t)[0];o&&!this.domNode.isList(o);null){var l=o.nextSibling;c.appendChild(o),o=l}Ot([i],t.parentNode),E(t);var p=B("li",{styles:"list-style-type: none;"});Ot([p],i.parentNode),Ne([i],p)}else{var p=B("li",{styles:"list-style-type: none;"});Ot([p],t.parentNode);var c=B(t.parentNode.tagName);Ot([c],p),Ne([t],c)}},a.prototype.nestedList=function(t){for(var e=!1,i=0;i<t.length;i++){var n=this.domNode.getPreviousNode(t[i]);if(n){e=!0;var r=void 0,s=void 0,o=t[i].querySelectorAll("ol, ul"),l=t[i].querySelectorAll("li"),c=this.domNode.contents(l[0])[0];if(l.length>0&&(c.nodeName==="OL"||c.nodeName==="UL")?s=l[0]:r=o[0],r){var p=B("li");Ot([p],r);for(var d=this.domNode.contents(t[i])[0];d&&!this.domNode.isList(d);null){var u=d.nextSibling;p.appendChild(d),d=u}Ne([r],n),E(t[i])}else if(s){if(n.tagName==="LI"){for(var d=this.domNode.contents(t[i])[0];d&&!this.domNode.isList(d);null){var u=d.nextSibling;Ot([d],s),U(t[i],{"list-style-type":"none"}),U(s,{"list-style-type":""}),d=u}Ne([s.parentNode],n),E(t[i])}}else if(n.tagName==="LI"){var p=B(t[i].parentNode.tagName);p.style.listStyleType=t[i].parentNode.style.listStyleType,Ne([p],n),Ne([t[i]],p)}else(n.tagName==="OL"||n.tagName==="UL")&&Ne([t[i]],n)}else{var m=t[i];e=!0,this.noPreviousElement(m)}}return e},a.prototype.applyListsHandler=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument);if(x.userAgent.indexOf("Firefox")!==-1&&e.startContainer===e.endContainer&&e.startContainer===this.parent.editableElement){for(var i=e.startContainer.childNodes,n=i[e.startOffset>0?e.startOffset-1:e.startOffset]||e.startContainer,r=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer,s=r.lastChild.nodeName==="BR"?h(r.lastChild.previousSibling)?r:r.lastChild.previousSibling:r.lastChild;!h(s)&&s.nodeName!=="#text"&&s.nodeName!=="IMG"&&s.nodeName!=="BR"&&s.nodeName!=="HR";)s=s.lastChild;this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,n,s,0,s.textContent.length),e=this.parent.nodeSelection.getRange(this.parent.currentDocument)}if(e.startContainer===e.endContainer&&e.startContainer===this.parent.editableElement&&e.startOffset===e.endOffset&&e.startOffset===0&&this.parent.editableElement.textContent.length===0&&this.parent.editableElement.childNodes[0].nodeName!=="TABLE"&&this.parent.editableElement.childNodes[0].nodeName!=="IMG"){var o=e.startContainer.childNodes[0];this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,o,o,0,0),e=this.parent.nodeSelection.getRange(this.parent.currentDocument)}this.saveSelection=this.parent.nodeSelection.save(e,this.parent.currentDocument),this.currentAction=t.subCommand,this.currentAction=t.subCommand=this.currentAction==="NumberFormatList"?"OL":this.currentAction==="BulletFormatList"?"UL":this.currentAction,this.domNode.setMarker(this.saveSelection);var l=this.domNode.blockNodes(!0);t.enterAction==="BR"&&(this.setSelectionBRConfig(),this.parent.domNode.convertToBlockNodes(this.parent.domNode.blockNodes(),!0),this.setSelectionBRConfig(),l=this.parent.domNode.blockNodes());for(var c=0;c<l.length;c++)l[c].tagName==="TABLE"&&!e.collapsed&&l.splice(c,1),l.length>0&&l[c].tagName!=="LI"&&l[c].parentNode.tagName==="LI"&&(l[c]=l[c].parentNode);this.applyLists(l,this.currentAction,t.selector,t.item,t),t.callBack&&t.callBack({requestType:this.currentAction,event:t.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},a.prototype.setSelectionBRConfig=function(){var t=this.parent.editableElement.querySelector("."+G.startSelection),e=this.parent.editableElement.querySelector("."+G.endSelection);h(e)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,t,e,0,0)},a.prototype.applyLists=function(t,e,i,n,r){if(this.isRevert(t,e,n)&&h(n))this.revertList(t,r),this.removeEmptyListElements();else{this.checkLists(t,e,n);var s="";t[0].style.marginLeft!==""&&(s=' style = "margin-left: '+t[0].style.marginLeft+';"');for(var o=0;o<t.length;o++){!h(n)&&!h(n.listStyle)&&(n.listStyle==="listImage"?U(t[o],{"list-style-image":n.listImage}):(U(t[o],{"list-style-image":"none"}),U(t[o],{"list-style-type":n.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),t[o].style.removeProperty("margin-left");var l=t[o].tagName==="IMG"||t[o].classList.contains("e-editor-select-start")?"":this.domNode.attributes(t[o]);if(t[o].getAttribute("contenteditable")==="true"&&t[o].childNodes.length===1&&t[o].childNodes[0].nodeName==="TABLE"){var c=document.createElement(e);c.innerHTML="<li><br/></li>",t[o].appendChild(c)}else if(t[o].tagName!=="LI"&&h(n)&&t[o].nodeName==="BLOCKQUOTE"){var p="<"+e+s+">",d="</"+e+">",u="li"+l,m=t[o].innerHTML,f=this.domNode.createTagString(u,null,m),g=p+f+d;t[o].innerHTML=g}else if(t[o].tagName!=="LI"&&h(n)){var p="<"+e+s+">",d="</"+e+">",u="li"+l,m=t[o].tagName.toLowerCase()===St?t[o].innerHTML:t[o].outerHTML,f=this.domNode.createTagString(u,null,m),g=p+f+d;this.domNode.replaceWith(t[o],g)}else if(!h(n)&&t[o].tagName!=="LI"){var y=t[o].tagName==="IMG"?"":this.domNode.attributes(t[o]),p="<"+e+y+">",d="</"+e+">",u="li",m=t[o].tagName.toLowerCase()===St?t[o].innerHTML:t[o].outerHTML,f=this.domNode.createTagString(u,null,m),g=p+f+d;this.domNode.replaceWith(t[o],g)}}}if(this.cleanNode(),r.enterAction==="BR"){var S=document.querySelectorAll("span#removeSpan");S.forEach(function(T){for(var L=document.createDocumentFragment();T.firstChild;)L.appendChild(T.firstChild);T.parentNode.replaceChild(L,T)})}this.parent.editableElement.focus(),Qe()&&Ut(this.parent.editableElement,i),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},a.prototype.removeEmptyListElements=function(){for(var t=this.parent.editableElement.querySelectorAll("ol, ul"),e=0;e<t.length;e++)t[e].textContent.trim()===""&&E(t[e])},a.prototype.isRevert=function(t,e,i){for(var n=!0,r=0;r<t.length;r++){if(t[r].tagName!=="LI")return!1;(t[r].parentNode.tagName!==e||h(i)&&t[r].parentNode.style.listStyleType!=="")&&(n=!1),t[r].parentNode.tagName===e&&t[r].parentNode.style.listStyleType!==""&&(n=!0)}return n},a.prototype.checkLists=function(t,e,i){for(var n=[],r=0;r<t.length;r++){var s=t[r].parentNode;!h(i)&&t[r].tagName==="LI"&&!h(i.listStyle)&&(i.listStyle==="listImage"?U(s,{"list-style-image":i.listImage}):(U(s,{"list-style-image":"none"}),U(s,{"list-style-type":i.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),(t[r].tagName==="LI"&&s.tagName!==e&&n.indexOf(s)<0||t[r].tagName==="LI"&&s.tagName===e&&n.indexOf(s)<0&&i!==null)&&n.push(s),h(i)&&(s.tagName===e||(s.tagName==="UL"||s.tagName==="OL")&&s.hasAttribute("style"))&&s.hasAttribute("style")&&s.removeAttribute("style")}for(var o=n.length-1;o>=0;o--){var l=n[o],c="<"+e.toLowerCase()+" "+this.domNode.attributes(l)+">"+l.innerHTML+"</"+e.toLowerCase()+">";this.domNode.replaceWith(n[o],c)}},a.prototype.cleanNode=function(){for(var t=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),e,i,n=0;n<t.length;n++){for(var r=t[n],s=!0,o=r;o.parentElement&&!(o.parentElement&&o.parentElement.tagName!=="LI"&&o.parentElement.tagName!=="OL"&&o.parentElement.tagName!=="UL");)o=o.parentElement;if(s&&(t[n].parentElement.parentElement.nodeName==="OL"||t[n].parentElement.parentElement.nodeName==="UL")){s=!1;var l=t[n].parentElement.parentElement;e=l.style.listStyleType,i=r.previousElementSibling}if(this.domNode.isList(r.previousElementSibling)&&this.domNode.openTagString(r)===this.domNode.openTagString(r.previousElementSibling)){for(var c=this.domNode.contents(r),p=0;p<c.length;p++)r.previousElementSibling.appendChild(c[p]);r.parentNode.removeChild(r)}else if(!h(r.getAttribute("level")))r.tagName===r.previousElementSibling.tagName&&r.previousElementSibling.lastChild.append(r);else if(this.domNode.isList(r.previousElementSibling)&&o.contains(r.previousElementSibling)&&(r.tagName==="OL"||r.tagName==="UL")&&(r.previousElementSibling.nodeName==="OL"||r.previousElementSibling.nodeName==="UL")){for(var c=this.domNode.contents(r),p=0;p<c.length;p++)r.previousElementSibling.appendChild(c[p]);r.parentNode.removeChild(r)}}if(i){i.style.listStyleType=e;var d=this.parent.nodeSelection.getRange(this.parent.currentDocument),u=[];d.commonAncestorContainer.nodeName==="UL"||d.commonAncestorContainer.nodeName==="OL"?(d.commonAncestorContainer instanceof Element&&u.push(d.commonAncestorContainer),u=u.concat(Array.from(d.commonAncestorContainer.querySelectorAll("ol, ul")))):u=Array.from(d.commonAncestorContainer.querySelectorAll("ol, ul"));for(var m=0;m<u.length;m++)for(var f=void 0,g=u[m];g;)(g.nodeName==="OL"||g.nodeName==="OL")&&(g.style.listStyleType!==""&&g.style.listStyleType!=="none"&&g.nodeName!=="LI"?f=g.style.listStyleType:!h(f)&&(g.style.listStyleType===""||g.style.listStyleType==="none")&&g.nodeName!=="LI"&&(g.nodeName==="UL"||g.nodeName==="OL")&&(g.style.listStyleType=f)),g=g.querySelector("UL,OL")}},a.prototype.findUnSelected=function(t,e){if(t=t.slice().reverse(),t.length>0){var i=[],n=[],r=e[e.length-1],s=[],o=[];s=r.childNodes;for(var l=0;l<s.length;l++)if(s[l].tagName==="OL"||s[l].tagName==="UL"){var c=s[l].querySelectorAll("li");if(c.length>0)for(var p=0;p<c.length;p++)o.push(c[p])}for(var d=0;d<o.length;d++){for(var u=0,m=0;m<t.length;m++)o[d].contains(t[m])||(u=u+1);u===t.length&&n.push(o[d])}if(n.length>0)for(var f=0;f<n.length;f++)this.domNode.contents(n[f])[0].nodeName!=="OL"&&this.domNode.contents(n[f])[0].nodeName!=="UL"&&i.push(n[f]);i.length>0&&this.nestedList(i)}},a.prototype.revertList=function(t,e){for(var i=[],n=t.length-1;n>=0;n--)for(var r=n-1;r>=0;r--)if(t[r].contains(t[n])||t[r]===t[n]){i.push(t[n]),t.splice(n,1);break}this.findUnSelected(i,t);for(var s=[],n=0;n<t.length;n++){var o=t[n];this.domNode.contents(o)[0].nodeType===3&&this.domNode.contents(o)[0].textContent.trim().length===0&&E(this.domNode.contents(o)[0]);var l=t[n].parentNode,c=o.getAttribute("class");if(i.length===0){var p=t[n].querySelectorAll("ul, ol"),d=p[0];if(d){var u=d.querySelectorAll("li");if(u){var m=B(d.tagName);Ne([m],d.parentNode);var f=B("li",{styles:"list-style-type: none;"});Ne([f],m),Ne([d],f)}}}if(o.parentNode.insertBefore(this.closeTag(l.tagName),o),l.parentNode.tagName==="LI"||l.parentNode.tagName==="OL"||l.parentNode.tagName==="UL")o.parentNode.insertBefore(this.closeTag("LI"),o);else{if(o.querySelectorAll(li.join(", ")).length===0){var g=h(c)?' class="e-rte-wrap-inner"':' class="'+c+' e-rte-wrap-inner"',y=l;t.length===y.querySelectorAll("li").length&&(h(y.style.listStyleType)||l.style.removeProperty("list-style-type"),h(y.style.listStyleImage)||l.style.removeProperty("list-style-image"),y.style.length===0&&l.removeAttribute("style"));var S="<"+e.enterAction+g+this.domNode.attributes(o)+"></"+e.enterAction+">";if(e.enterAction!=="BR")this.domNode.wrapInner(o,this.domNode.parseHTMLFragment(S));else{var T="<span class=e-rte-wrap-inner id=removeSpan></span>",L=document.createElement("br");this.domNode.wrapInner(o,this.domNode.parseHTMLFragment(T)),o.appendChild(L)}}else if(this.domNode.contents(o)[0].nodeType===3){var w=this.domNode.createTagString(St,l,this.parent.domNode.encode(this.domNode.contents(o)[0].textContent));this.domNode.replaceWith(this.domNode.contents(o)[0],w)}else if(this.domNode.contents(o)[0].classList.contains(G.startSelection)||this.domNode.contents(o)[0].classList.contains(G.endSelection)){var w=this.domNode.createTagString(St,l,this.domNode.contents(o)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(o)[0],w)}else{var N=o.firstChild;if(N){var M=o.parentElement.attributes;if(M.length>0)for(var I=0;I<M.length;I++){var A=M[I],V=N.getAttribute(A.nodeName),Q=o.parentElement.getAttribute(A.nodeName);N.setAttribute(A.nodeName,V?Q+" "+V:Q)}}c=N.getAttribute("class"),c&&N.getAttribute("class")&&Ce(N,{class:c+" "+N.getAttribute("class")})}Ne([this.openTag("LI")],o),Ot([this.closeTag("LI")],o)}this.domNode.insertAfter(this.openTag(l.tagName),o),l.parentNode.tagName==="LI"&&(l=l.parentNode.parentNode),s.indexOf(l)<0&&s.push(l)}for(var n=0;n<s.length;n++){var Z=s[n],W=Z.innerHTML,$=/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,te=/<span class="e-rte-list-open-([a-z]*)"><\/span>/g;W=W.replace($,"</$1>"),W=W.replace(te,"<$1 "+this.domNode.attributes(Z)+">"),this.domNode.replaceWith(Z,this.domNode.openTagString(Z)+W.trim()+this.domNode.closeTagString(Z))}for(var j=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),n=0;n<j.length;n++)E(j[n]);for(var J=this.parent.editableElement.querySelectorAll("li:empty"),n=0;n<J.length;n++)E(J[n])},a.prototype.openTag=function(t){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+t.toLowerCase()+'"></span>')},a.prototype.closeTag=function(t){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+t.toLowerCase()+'"></span>')},a.prototype.destroy=function(){this.removeEventListener(),this.domNode&&(this.domNode=null)},a.prototype.areAllListItemsSelected=function(t,e){for(var i=t.querySelectorAll("li"),n=0;n<i.length;n++){var r=i[n],s=this.parent.currentDocument.createRange();if(s.selectNodeContents(r),!e.intersectsNode(r))return!1}return!0},a}(),ue=function(){function a(){}return a.WrapBefore=function(t,e,i){return e.innerText=t.textContent,i?this.AppendBefore(e,t,!0):this.AppendBefore(e,t),t.parentNode&&t.parentNode.removeChild(t),e.childNodes[0]},a.Wrap=function(t,e){return this.AppendBefore(e,t),e.appendChild(t),t},a.unwrap=function(t){for(var e=t.parentNode,i=[];t.firstChild;null)i.push(e.insertBefore(t.firstChild,t));return e.removeChild(t),i},a.AppendBefore=function(t,e,i){return e.parentNode?i?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.insertBefore(t,e):e},a}(),ci=function(){function a(){this.enterAction="P",this.position=-1,this.nodeSelection=new qe}return a.prototype.GetSpliceNode=function(t,e){return e=this.SplitNode(t,e,!0),e=this.SplitNode(t,e,!1),e},a.prototype.SplitNode=function(t,e,i){if(e){var n=t.cloneRange(),r=e.parentNode,s=this.nodeSelection.getIndex(e);n.collapse(i),i?n.setStartBefore(e):n.setEndAfter(e);var o=n.extractContents();if(i){if(e=r.childNodes[s],o=this.spliceEmptyNode(o,!1),o&&o.childNodes.length>0){var l=!!(o.childNodes.length===1&&o.childNodes[0].nodeName!=="IMG"&&!(o.querySelectorAll("img").length>0)&&this.isRteElm(o)&&o.textContent.trim()==="");if(!l)if(e)ue.AppendBefore(o,e);else{r.appendChild(o);var c=document.createElement("div");c.innerHTML="&#65279;&#65279;",e=c.firstChild,r.appendChild(e)}}}else if(e=r.childNodes.length>1?r.childNodes[s]:r.childNodes[0],o=this.spliceEmptyNode(o,!0),o&&o.childNodes.length>0){var l=!!(o.childNodes.length===1&&o.childNodes[0].nodeName!=="IMG"&&this.isRteElm(o)&&o.textContent.trim()==="");if(!l)if(e)ue.AppendBefore(o,e,!0);else{r.appendChild(o);var c=document.createElement("div");c.innerHTML="&#65279;&#65279;",r.insertBefore(c.firstChild,r.firstChild),e=r.firstChild}}return e}else return null},a.prototype.isRteElm=function(t){var e=!0;if(t.childNodes.length===1&&t.childNodes[0].nodeName!=="IMG")for(var i=t.childNodes[0],n=0;!h(i.childNodes)&&n<i.childNodes.length;n++)(i.childNodes[n].nodeName==="IMG"||i.childNodes[n].nodeName==="SPAN"&&(i.childNodes[n].classList.contains("e-video-wrap")||i.childNodes[n].classList.contains("e-embed-video-wrap")||i.childNodes[n].classList.contains("e-audio-wrap")))&&(e=!1);else e=!0;return e},a.prototype.spliceEmptyNode=function(t,e){var i;return t.childNodes.length===1&&t.childNodes[0].nodeName==="#text"&&t.childNodes[0].textContent===""||t.textContent===""?i=-1:i=t.childNodes.length-1,i>-1&&!e?this.spliceEmptyNode(t.childNodes[i],e):i>-1?this.spliceEmptyNode(t.childNodes[0],e):t.nodeType!==3&&t.nodeType!==11&&t.nodeName!=="IMG"&&!(t.querySelectorAll("img").length>0)&&!t.classList.contains("e-video-wrap")&&!t.classList.contains("e-audio-wrap")&&t.parentNode.removeChild(t),t},a.prototype.GetCursorStart=function(t,e,i){t=i?t:t.reverse();for(var n=t[0],r=0;r<t.length&&(i?t[r]<e:t[r]>=e);r++)n=t[r];return n},a.prototype.GetCursorRange=function(t,e,i){var n=t.createRange(),r=[];r.push(0);for(var s=this.TrimLineBreak(i.data),o=s.indexOf(" ",0);o!==-1;)r.indexOf(o)<0&&r.push(o),new RegExp("\\s").test(s[o-1])&&r.indexOf(o-1)<0&&r.push(o-1),new RegExp("\\s").test(s[o+1])&&r.push(o+1),o=s.indexOf(" ",o+1);if(r.push(s.length),r.indexOf(e.startOffset)>=0||r.indexOf(e.startOffset-1)>=0&&(e.startOffset!==1||e.startOffset===1&&new RegExp("\\s").test(s[0]))||r[r.length-1]-1===e.startOffset&&e.endOffset!==s.length-1&&!new RegExp("\\s").test(s[0]))n=e,this.position=1;else{var l=this.GetCursorStart(r,e.startOffset,!0);this.position=e.startOffset-l,l!==0&&s[l]&&s[l]===" "&&(l=l+1),n.setStart(e.startContainer,l),n.setEnd(e.startContainer,this.GetCursorStart(r,e.startOffset,!1))}return n},a.prototype.GetCursorNode=function(t,e,i){return this.GetSpliceNode(this.GetCursorRange(t,e,i),i)},a.prototype.TrimLineBreak=function(t){return t.replace(/(\r\n\t|\n|\r\t)/gm," ")},a}(),_d=function(){function a(t){this.blockquotePrevent=!1,this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(la,this.applyFormats,this),this.parent.observer.on(hi,this.onKeyUp,this),this.parent.observer.on(Ee,this.onKeyDown,this),this.parent.observer.on(kd,this.blockQuotesHandled,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(la,this.applyFormats),this.parent.observer.off(hi,this.onKeyUp),this.parent.observer.off(Ee,this.onKeyDown),this.parent.observer.off(ie,this.destroy)},a.prototype.getParentNode=function(t){for(;t.parentNode&&t.parentNode!==this.parent.editableElement;null)t=t.parentNode;return t},a.prototype.blockQuotesHandled=function(){this.blockquotePrevent=!0},a.prototype.onKeyUp=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=e.endContainer,n=i.lastChild;if(t.event.which===13&&e.startContainer===i&&i.nodeType!==3){var r=B("p");if(r.innerHTML="<br>",!h(n)&&n&&n.nodeName==="BR"&&n.previousSibling&&n.previousSibling.nodeName==="TABLE")i.replaceChild(r,n),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0);else{var s=this.parent.nodeSelection.getSelectionNodeCollectionBr(e)[0];!h(s)&&s.nodeName==="BR"&&s.previousSibling&&s.previousSibling.nodeName==="TABLE"&&(i.replaceChild(r,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,0))}}if(t.enterAction!=="BR"&&!h(e.startContainer)&&!h(e.startContainer.parentElement)&&e.startContainer===e.endContainer&&e.startContainer.nodeName==="#text"&&e.startContainer.parentElement.classList.contains("e-content")&&e.startContainer.parentElement.isContentEditable){var r=B(t.enterAction);e.startContainer.parentElement.insertBefore(r,e.startContainer),r.appendChild(e.startContainer),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,r,1)}},a.prototype.getBlockParent=function(t,e){for(var i=t;t!==e;)i=t,t=t.parentElement;return i},a.prototype.onKeyDown=function(t){if(t.event.which===13&&!this.blockquotePrevent){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=e.startContainer.textContent.length===0||e.startContainer.nodeName==="PRE"?e.startContainer:e.startContainer.parentElement,n=e.endContainer.textContent.length===0||e.endContainer.nodeName==="PRE"?e.endContainer:e.endContainer.parentElement,r=b(i,"pre"),s=b(n,"pre"),o=b(i,"blockquote"),l=b(n,"blockquote"),c=!h(r)&&!h(r.parentElement)&&r.parentElement.tagName==="LI";if(c)return;if((h(r)&&!h(s)||!h(r)&&h(s))&&(t.event.preventDefault(),this.deleteContent(e),this.removeCodeContent(e),e=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0)),t.event.which===13&&(!h(o)&&!h(l)||!h(o)&&h(l))){var p=this.getBlockParent(e.startContainer,o);if(p.textContent.charCodeAt(0)===8203&&p.textContent.length===1||p.textContent.length===0&&p.querySelectorAll("img").length===0&&p.querySelectorAll("table").length===0)if(t.event.preventDefault(),h(p.nextElementSibling))this.paraFocus(p.parentElement===this.parent.editableElement?p:p.parentElement);else{var d=new ci;d.SplitNode(e,p.parentElement,!1).cloneNode(!0),this.paraFocus(p.parentElement===this.parent.editableElement?p:p.parentElement)}}if(t.event.which===13&&!h(r)&&!h(s)){t.event.preventDefault(),this.deleteContent(e),this.removeCodeContent(e),e=this.parent.nodeSelection.getRange(this.parent.currentDocument);var u=e.startContainer.childNodes[e.endOffset],m=e.startContainer.childNodes[e.endOffset-1],p=e.startContainer;if(!h(u)&&!h(m)&&h(u.nextSibling)&&u.nodeName==="BR"&&m.nodeName==="BR")this.paraFocus(e.startContainer,t.enterAction);else if(p.textContent.charCodeAt(0)===8203&&p.textContent.length===1||p.textContent.length===0){for(;p.parentElement.nodeName!=="PRE"&&(p.textContent.length===1||p.textContent.length===0);)p=p.parentElement;!h(p.previousSibling)&&p.previousSibling.nodeName==="BR"&&h(p.nextSibling)?this.paraFocus(p.parentElement):this.isNotEndCursor(r,e)}else this.isNotEndCursor(r,e)}}this.blockquotePrevent=!1},a.prototype.removeCodeContent=function(t){var e=new RegExp("\uFEFF","g");if(!h(t.endContainer.textContent.match(e))){var i=t.endContainer.textContent.charCodeAt(t.endOffset-1)===65279?t.endOffset-2:t.endOffset;t.endContainer.textContent=t.endContainer.textContent.replace(e,""),t.endContainer.textContent===""?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t.endContainer,i)}},a.prototype.deleteContent=function(t){(t.startContainer!==t.endContainer||t.startOffset!==t.endOffset)&&t.deleteContents()},a.prototype.paraFocus=function(t,e){var i;e==="DIV"?(i=B("div"),i.innerHTML="<br>"):e==="BR"?i=B("br"):(i=B("p"),i.innerHTML="<br>"),this.parent.domNode.insertAfter(i,t),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),E(t.lastChild)},a.prototype.isNotEndCursor=function(t,e){var i=new ci,n=e.startOffset===t.lastChild.textContent.length&&t.lastChild.textContent===e.startContainer.textContent;if(t.textContent.indexOf(e.startContainer.textContent)===0&&(e.startOffset===0&&e.endOffset===0||e.startContainer.nodeName==="PRE")){this.insertMarker(t,e);var r=B("br");t.childNodes[e.endOffset].parentElement.insertBefore(r,t.childNodes[e.endOffset])}else{var s=i.SplitNode(e,t,!0);this.insertMarker(t,e);var o=t.previousElementSibling;o.tagName==="PRE"&&(o.insertAdjacentHTML("beforeend","<br>"+s.innerHTML),E(t))}this.setCursorPosition(n,t)},a.prototype.setCursorPosition=function(t,e){var i=!1,n=this.parent.editableElement.querySelector(".tempSpan"),r=n.parentElement;if(n.parentNode.textContent===""?i=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),t)if(i)r===e?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),E(n)):this.focusSelectionParent(n,r);else{var s=B("br");this.parent.domNode.insertAfter(s,n),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),E(n)}else i?this.focusSelectionParent(n,r):E(n)},a.prototype.focusSelectionParent=function(t,e){E(t),e.innerHTML="​",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0)},a.prototype.insertMarker=function(t,e){var i=B("span",{className:"tempSpan"});e.startContainer.nodeName==="PRE"?t.childNodes[e.endOffset].parentElement.insertBefore(i,t.childNodes[e.endOffset]):e.startContainer.parentElement.insertBefore(i,e.startContainer)},a.prototype.applyFormats=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=!1;this.parent.editableElement===e.endContainer&&!h(this.parent.editableElement.children[e.endOffset-1])&&this.parent.editableElement.children[e.endOffset-1].tagName==="TABLE"&&!e.collapsed&&(i=!0);var n=this.parent.nodeSelection.save(e,this.parent.currentDocument);this.parent.domNode.setMarker(n);var r=this.parent.domNode.blockNodes(!0);if(t.enterAction==="BR"){this.setSelectionBRConfig();var s=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),o=this.parent.nodeSelection.getSelectionNodes(s),l=[];o.length===0&&o.push(r[0]);for(var c=0;c<o.length;c++){for(var p=o[c],d=void 0;!this.parent.domNode.isBlockNode(p)&&p!==this.parent.editableElement;)d=p,p=p.parentElement;this.parent.domNode.isBlockNode(p)&&p===this.parent.editableElement&&l.push(d)}for(var c=0;c<l.length;c++)if(!this.parent.domNode.isBlockNode(l[c])){for(var p=l[c],u=p;p===this.parent.editableElement;)u=p,p=p.parentElement;var m=void 0;this.parent.domNode.isBlockNode(u.parentElement)&&u.parentElement===this.parent.editableElement?(m=B("div"),u.parentElement.insertBefore(m,u),m.appendChild(u),u.textContent.length===0&&u.appendChild(B("br"))):m=u;for(var f=m.previousSibling;!h(f)&&f.nodeName!=="BR"&&!this.parent.domNode.isBlockNode(f);)m.firstChild.parentElement.insertBefore(f,m.firstChild),f=m.previousSibling;!h(f)&&f.nodeName==="BR"&&E(f);for(var g=m.nextSibling;!h(g)&&g.nodeName!=="BR"&&!this.parent.domNode.isBlockNode(g);)m.appendChild(g),g=m.nextSibling;!h(g)&&g.nodeName==="BR"&&E(g)}this.setSelectionBRConfig(),r=this.parent.domNode.blockNodes()}for(var y=!1,S=!1,c=0;c<r.length;c++)(h(b(r[0],"blockquote"))||h(b(r[r.length-1],"blockquote")))&&(S=!0);for(var c=0;c<r.length;c++){var T=void 0,L=void 0;if(t.subCommand.toLowerCase()==="blockquote"?(T=this.getParentNode(r[c]),t.enterAction==="BR"?L=T.innerHTML:!h(b(r[c],"table"))&&this.parent.editableElement.contains(b(r[c],"table"))?L=h(b(r[c],"blockquote"))?r[c].outerHTML:b(r[c],"blockquote").outerHTML:L=T.outerHTML):(T=r[c],L=T.innerHTML),!(t.subCommand.toLowerCase()==="blockquote"&&t.subCommand.toLowerCase()===T.tagName.toLowerCase()&&S||t.subCommand.toLowerCase()===T.tagName.toLowerCase()&&(t.subCommand.toLowerCase()!=="pre"&&t.subCommand.toLowerCase()!=="blockquote"||!h(t.exeValue)&&t.exeValue.name==="dropDownSelect")||h(T.parentNode)||T.tagName==="TABLE"&&t.subCommand.toLowerCase()==="pre")){this.cleanFormats(T,t.subCommand);var w=t.subCommand.toLowerCase()==="pre"&&T.tagName.toLowerCase()==="pre"?"p":t.subCommand,N=t.subCommand.toLowerCase()===T.tagName.toLowerCase()&&t.subCommand.toLowerCase()==="blockquote"&&this.parent.domNode.isList(T.firstElementChild),M=T.tagName==="TABLE"?h(b(r[c],"blockquote"))?T:b(r[c],"blockquote"):T,I=t.subCommand.toLowerCase()===M.tagName.toLowerCase()&&t.subCommand.toLowerCase()==="blockquote",A=void 0;if(N)A=L.replace("<blockquote>","").replace("</blockquote>","");else if(I&&b(r[0],"blockquote")&&b(r[r.length-1],"blockquote"))if(h(r[0].previousSibling)&&h(r[r.length-1].nextSibling))A=L.replace(/<blockquote[^>]*>|<\/blockquote>/g,"");else{if(y=!0,c===0){var V=B("span");V.classList.add("e-rte-blockquote-close"),r[c].parentNode.insertBefore(V,r[c])}if(c===r.length-1){var Q=B("span");Q.classList.add("e-rte-blockquote-open"),this.parent.domNode.insertAfter(Q,r[c])}}else A=this.parent.domNode.createTagString(w,t.subCommand.toLowerCase()==="blockquote"?null:T,L.replace(/>\s+</g,"><"));if(T.tagName==="LI")T.innerHTML="",T.insertAdjacentHTML("beforeend",A);else if(!y){var Z=!h(b(r[c],"table"))&&this.parent.editableElement.contains(b(r[c],"table"))?h(b(r[c],"blockquote"))?r[c]:b(r[c],"blockquote"):T;this.parent.domNode.replaceWith(Z,A)}}}if(y)for(var W=this.parent.editableElement.querySelectorAll(".e-rte-blockquote-open, .e-rte-blockquote-close"),c=0;c<W.length;c++){var $=W[c].parentElement,te=$.innerHTML;if(te=te.replace(/<span class="e-rte-blockquote-open"><\/span>/g,"<blockquote>"),te=te.replace(/<span class="e-rte-blockquote-close"><\/span>/g,"</blockquote>"),W[0].parentElement===W[1].parentElement){this.parent.domNode.replaceWith($,this.parent.domNode.openTagString($)+te.trim()+this.parent.domNode.closeTagString($));break}else c===W.length-1&&!h(W[c])&&!h(W[c-1])&&W[c].parentElement!==W[c-1].parentElement?this.parent.domNode.replaceWith($,te.trim()):this.parent.domNode.replaceWith($,this.parent.domNode.openTagString($)+te.trim()+this.parent.domNode.closeTagString($))}this.preFormatMerge(),this.blockquotesFormatMerge(t.enterAction);var j=this.parent.editableElement.querySelector("."+G.startSelection),J=this.parent.editableElement.querySelector("."+G.endSelection);!h(j)&&!h(J)&&(j=j.lastChild,J=J.lastChild),n=this.parent.domNode.saveMarker(n),Qe()&&Ut(this.parent.editableElement,t.selector),i?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,j,J,0,J.textContent.length):n.restore(),t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},a.prototype.setSelectionBRConfig=function(){var t=this.parent.editableElement.querySelector("."+G.startSelection),e=this.parent.editableElement.querySelector("."+G.endSelection);h(e)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,t,e,0,0)},a.prototype.preFormatMerge=function(){var t=this.parent.editableElement.querySelectorAll("PRE");if(!h(t))for(var e=0;e<t.length;e++){var i=t[e].previousElementSibling;!h(i)&&i.tagName==="PRE"&&(i.insertAdjacentHTML("beforeend","<br>"+t[e].innerHTML),E(t[e]))}},a.prototype.blockquotesFormatMerge=function(t){var e=this.parent.editableElement.querySelectorAll("BLOCKQUOTE");if(!h(e))for(var i=0;i<e.length;i++){e[i].innerHTML.trim()===""&&E(e[i]);var n=e[i].previousElementSibling;!h(n)&&n.tagName==="BLOCKQUOTE"&&(n.insertAdjacentHTML("beforeend",(t==="BR"?"<br>":"")+e[i].innerHTML),E(e[i]))}},a.prototype.cleanFormats=function(t,e){var i=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];e=e.toLowerCase();for(var n=0;n<i.length&&e!=="p"&&e!=="blockquote"&&e!=="pre";n++)t.style.removeProperty(i[n])},a.prototype.destroy=function(){this.removeEventListener()},a}(),We=function(){function a(){}return a.Insert=function(t,e,i,n,r){var s;if(typeof e=="string"){var o=document.createElement("div");o.innerHTML=e,s=n?o:o.firstChild}else if(n&&!(!h(e)&&!h(e.classList)&&e.classList.contains("pasteContent"))){var o=document.createElement("div");o.appendChild(e),s=o}else s=e;var l=new qe,c=new ci,p=l.getRange(t);if(p.startContainer===i&&p.startContainer===p.endContainer&&p.startOffset===0&&p.startOffset===p.endOffset&&i.textContent.length===0&&(i.children[0].tagName==="P"||i.children[0].tagName==="DIV"||i.children[0].tagName==="BR")&&(l.setSelectionText(t,p.startContainer.children[0],p.startContainer.children[0],0,0),p=l.getRange(t)),p.startContainer===i&&p.startContainer===p.endContainer&&p.startOffset===0&&p.startOffset===p.endOffset&&i.textContent.trim().length>0){var d=this.findFirstTextNode(p.startContainer);h(d)||(l.setSelectionText(t,d,d,0,0),p=l.getRange(t))}if(p.startContainer.nodeName==="BR"&&p.startOffset===0&&p.startOffset===p.endOffset&&p.startContainer===p.endContainer){var u=Array.prototype.slice.call(p.startContainer.parentElement.childNodes).indexOf(p.startContainer);l.setSelectionText(t,p.startContainer.parentElement,p.startContainer.parentElement,u,u),p=l.getRange(t)}var m=p.startOffset===p.endOffset&&p.startOffset===0&&p.startContainer===p.endContainer,f=p.collapsed,g=this.getNodeCollection(p,l,s),y=s.nodeName.toLowerCase()==="table"?h(g[0])?p.startContainer:this.closestEle(g[0].parentNode,i):g[0];if(y&&y.nodeName==="LI"&&s.nodeName.toLowerCase()==="table"){this.insertTableInList(p,s,y,g[0],c);return}if(m&&p.startContainer.textContent===""&&p.startContainer.nodeName!=="BR"&&r!=="BR"&&s.nodeName!=="#text"&&!h(s.children[0])&&!h(s.children[0].tagName)&&s.children[0].tagName==="IMG"&&s.children.length===1&&(p.startContainer.innerHTML=""),n||!h(s)&&!h(s.classList)&&s.classList.contains("pasteContent")){this.pasteInsertHTML(g,s,p,l,c,t,f,y,i,r);return}if(i!==p.startContainer&&(!f&&!(y.nodeType===Node.ELEMENT_NODE&&$i.indexOf(y.tagName.toLocaleLowerCase())!==-1)||s.nodeName.toLowerCase()==="table"&&y&&$i.indexOf(y.tagName.toLocaleLowerCase())===-1)){var S=c.GetSpliceNode(p,y),T=S.previousSibling,L=S.parentNode;if(g.length===1||s.nodeName.toLowerCase()==="table"&&S.childElementCount===0)l.setSelectionContents(t,S),p=l.getRange(t);else{var w=c.GetSpliceNode(p,g[g.length-1].parentElement);w=h(w)?S:w,l.setSelectionText(t,S,w,0,w.nodeType===3?w.textContent.length:w.childNodes.length),p=l.getRange(t)}p.startContainer.parentElement.closest("ol,ul")!==null&&p.endContainer.parentElement.closest("ol,ul")!==null?Sd(p):p.extractContents(),e.tagName==="TABLE"&&this.removeEmptyElements(i);for(var N=0;N<g.length;N++)if(g[N].nodeType!==3&&g[N].parentNode!=null){if(g[N].nodeName==="IMG")continue;g[N].parentNode.removeChild(g[N])}if(!h(T)&&!h(T.parentNode))ue.AppendBefore(s,T,!0);else{for(var M=null;L!==i&&L.firstChild&&L.textContent.trim()==="";){var I=L.parentNode;M=L,L=I}M!==null&&(L=M),L.firstChild&&(L!==i||s.nodeName==="TABLE"&&m&&L===p.startContainer&&L===p.endContainer)?L.textContent.trim()===""&&L!==i?(ue.AppendBefore(s,L,!1),E(L)):ue.AppendBefore(s,L.firstChild,!1):h(S.previousSibling)&&e.tagName==="TABLE"?L.prepend(s):L.appendChild(s)}s.nodeName==="IMG"?this.imageFocus(s,l,t):s.nodeType!==3?l.setSelectionText(t,s,s,0,s.childNodes.length):l.setSelectionText(t,s,s,0,s.textContent.length)}else{if(p.deleteContents(),m&&p.startContainer.textContent===""&&p.startContainer.nodeName!=="BR"&&(p.startContainer.innerHTML=""),x.isIE){var A=t.createDocumentFragment();A.appendChild(s),p.insertNode(A)}else if(p.startContainer.nodeType===1&&p.startContainer.nodeName.toLowerCase()==="hr"&&p.endContainer.nodeName.toLowerCase()==="hr"){var V=p.startContainer.nextElementSibling;V&&(V.querySelector("br")&&E(V.querySelector("br")),V.appendChild(s))}else p.startContainer.nodeName==="BR"?p.startContainer.parentElement.insertBefore(s,p.startContainer):p.insertNode(s);s.nodeType!==3&&s.childNodes.length>0?l.setSelectionText(t,s,s,1,1):s.nodeName==="IMG"?this.imageFocus(s,l,t):s.nodeType!==3?l.setSelectionContents(t,s):l.setSelectionText(t,s,s,s.textContent.length,s.textContent.length)}},a.findFirstTextNode=function(t){if(t.nodeType===Node.TEXT_NODE)return t;for(var e=0;e<t.childNodes.length;e++){var i=this.findFirstTextNode(t.childNodes[e]);if(!h(i))return i}return null},a.pasteInsertHTML=function(t,e,i,n,r,s,o,l,c,p){var d=i.startOffset===i.endOffset&&i.startContainer===i.endContainer;if(d&&i.startContainer===c&&c.textContent===""){var u=this.getImmediateBlockNode(t[t.length-1],c);n.setSelectionText(s,u,u,0,0),i=n.getRange(s)}var m,f,g,y;c!==i.startContainer&&(!o&&!(l.nodeType===Node.ELEMENT_NODE&&$i.indexOf(l.tagName.toLocaleLowerCase())!==-1)||e.nodeName.toLowerCase()==="table"&&l&&$i.indexOf(l.tagName.toLocaleLowerCase())===-1)&&(y=r.GetSpliceNode(i,l),h(y)||(f=h(y.previousSibling)?y.parentNode.previousSibling:y.previousSibling,t.length===1?(n.setSelectionContents(s,y),i=n.getRange(s),g=!0):(m=r.GetSpliceNode(i,t[t.length-1].parentElement),m=h(m)?y:m,n.setSelectionText(s,y,m,0,m.nodeType===3?m.textContent.length:m.childNodes.length),i=n.getRange(s),g=!1)));var S=!1;this.removingComments(e);for(var T=e.childNodes,L=0;L<T.length;L++)if(li.indexOf(T[L].nodeName.toLocaleLowerCase())>=0){S=!0;break}var w,N=document.createDocumentFragment();if(S){for(var W=i.startContainer;!h(W)&&W.nodeName!=="PRE"&&W!==c;)W=W.parentElement;if(!h(e)&&!h(W)&&W.nodeName==="PRE")i.insertNode(e),w=e.lastChild;else{this.insertTempNode(i,e,t,r,c);var $=!0,te=void 0,j=void 0,J=void 0;for(this.contentsDeleted||(!o&&i.startContainer.parentElement.textContent.length===0&&i.startContainer.nodeName==="BR"&&i.startContainer.parentElement.nodeName==="P"&&c.removeChild(i.startContainer.parentElement),i.deleteContents());e.firstChild;){if(e.firstChild.nodeName==="#text"&&e.firstChild.textContent.trim()===""){E(e.firstChild);continue}if(e.firstChild.nodeName==="#text"&&$||this.inlineNode.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0&&$){if(w=e.firstChild,h(e.previousElementSibling)){var ne=p==="DIV"?B("div"):B("p");e.parentElement.insertBefore(ne,e)}e.previousElementSibling.nodeName==="BR"?e.parentElement.insertBefore(e.firstChild,e):e.previousElementSibling.appendChild(e.firstChild)}else w=e.firstChild,e.firstChild.nodeName==="#text"||this.inlineNode.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0?(te?(J.appendChild(e.firstChild),N.appendChild(J)):(j=p==="DIV"?B("div"):B("p"),j.appendChild(e.firstChild),N.appendChild(j)),J=j,te=!0):(N.appendChild(e.firstChild),te=!1),$=!1}e.parentNode.replaceChild(N,e)}}else if(d){var A=B("span",{className:"tempSpan"}),V=b(i.startContainer.parentElement,"a");if(i.startContainer.nodeType===3&&V&&b(V,"span")){var Q=this.getImmediateBlockNode(i.startContainer,c);Q.querySelectorAll("br").length>0&&E(Q.querySelector("br"));var Z=b(V,"span");Z.appendChild(A)}else t[0].nodeName==="#text"&&t[0].nodeValue.includes("​")&&!h(t[0].parentElement)&&!h(t[0].parentElement.previousElementSibling)&&t[0].parentElement.previousElementSibling.classList.contains("e-mention-chip")?i.startContainer.parentElement.insertAdjacentElement("afterend",A):i.insertNode(A);for(;e.firstChild;)w=e.firstChild,N.appendChild(e.firstChild);A.parentNode.replaceChild(N,A)}else{for(;e.firstChild;)w=e.firstChild,N.appendChild(e.firstChild);if(g)y.parentNode.replaceChild(N,y);else{var M=c===i.startContainer?i.startContainer:i.startContainer.parentNode,I=Array.prototype.indexOf.call(M.childNodes,x.userAgent.indexOf("Firefox")!==-1&&c===i.startContainer?i.startContainer.firstChild:i.startContainer);i.deleteContents(),i.setStart(M,I),i.setEnd(M,I),!h(m)&&m!==c&&E(m),h(f)?i.insertNode(N):f.parentNode===c?f.appendChild(N):f.parentNode.appendChild(N)}}if(w.nodeName==="TABLE"){var ae=B("p");ae.appendChild(B("br")),w.parentElement.insertBefore(ae,w.nextSibling),w=ae}w.nodeName==="#text"?this.placeCursorEnd(w,e,n,s,c):this.cursorPos(w,e,n,s,c,p),this.alignCheck(c)},a.placeCursorEnd=function(t,e,i,n,r){for(t=t.nodeName==="BR"?h(t.previousSibling)?t.parentNode:t.previousSibling:t;!h(t)&&t.nodeName!=="#text"&&t.nodeName!=="IMG"&&t.nodeName!=="BR"&&t.nodeName!=="HR";){if(!h(t.lastChild)&&t.lastChild.nodeName==="P"&&t.lastChild.innerHTML===""){var s=B("br");t.lastChild.appendChild(s)}t=t.lastChild}t=h(t)?e:t,t.nodeName==="IMG"?this.imageFocus(t,i,n):i.setSelectionText(n,t,t,t.textContent.length,t.textContent.length),this.removeEmptyElements(r)},a.getNodeCollection=function(t,e,i){var n=[];return t.startOffset===t.endOffset&&t.startContainer===t.endContainer&&t.startContainer.nodeName!=="BR"&&t.startContainer.childNodes.length>0&&(t.startContainer.nodeName==="TD"||t.startContainer.nodeType!==3&&i.classList&&i.classList.contains("pasteContent"))?n.push(t.startContainer.childNodes[t.endOffset]):n=e.getInsertNodeCollection(t),n},a.insertTempNode=function(t,e,i,n,r){if(t.startContainer===r&&!h(t.startContainer.childNodes[t.endOffset-1])&&t.startContainer.childNodes[t.endOffset-1].nodeName==="TABLE")h(t.startContainer.childNodes[t.endOffset-1].nextSibling)?t.startContainer.appendChild(e):t.startContainer.insertBefore(e,t.startContainer.childNodes[t.endOffset-1].nextSibling);else if(t.startContainer===r&&!h(t.startContainer.childNodes[t.endOffset])&&t.startContainer.childNodes[t.endOffset].nodeName==="TABLE")t.startContainer.insertBefore(e,t.startContainer.childNodes[t.endOffset]);else if(t.startContainer===t.endContainer&&t.startContainer.nodeType!==3&&e.firstChild.nodeName==="HR")t.startContainer.classList.contains("e-content")||t.startContainer.nodeName==="BODY"?t.startContainer.appendChild(e):t.startContainer.parentNode.insertBefore(e,t.startContainer);else{var s=this.getImmediateBlockNode(i[i.length-1],r);if((h(s)||h(s.parentElement))&&t.endContainer.nodeType!==3&&(s=t.endContainer,t.setEnd(s,t.endContainer.textContent.length)),s.nodeName==="BODY"&&t.startContainer===t.endContainer&&t.startContainer.nodeType===1&&(s=t.startContainer),s.closest("LI")&&s.nodeName!=="TD"&&s.nodeName!=="TH"&&s.nodeName!=="TR"&&e&&e.firstElementChild&&(e.firstElementChild.tagName==="OL"||e.firstElementChild.tagName==="UL"))for(var o=void 0;e.firstElementChild.lastElementChild&&e.firstElementChild.lastElementChild.tagName==="LI";)o=e.firstElementChild.lastElementChild,o.style.removeProperty("margin-left"),o.style.removeProperty("margin-top"),o.style.removeProperty("margin-bottom"),e.firstElementChild.insertAdjacentElement("afterend",o);if(s.nodeName==="TD"||s.nodeName==="TH"||s.nodeName==="TR"){var l=B("span",{className:"tempSpan"});t.insertNode(l),l.parentNode.replaceChild(e,l)}else{var c=new qe,p=this.getNodeCollection(t,c,e)[this.getNodeCollection(t,c,e).length-1],d=void 0;if((p.nodeName==="BR"||p.nodeName==="HR"||p.nodeName==="#text"&&!h(p.parentElement)&&p.parentElement.nodeName==="LI")&&!h(p.parentElement)&&p.parentElement.textContent.trim().length===0)d=p,p.parentElement.nodeName==="LI"&&!h(p.nextSibling)&&p.nextSibling.nodeName==="BR"&&E(p.nextSibling);else if((p.nodeName==="#text"||p.nodeName==="BR")&&!h(p.parentElement)&&(p.parentElement.nodeName==="LI"||p.parentElement.closest("LI")||s===r&&p.parentElement===s)&&p.parentElement.textContent.trim().length>0){if(d=p,p.parentElement.nodeName==="LI"&&!h(p.nextSibling)&&p.nextSibling.nodeName==="BR"&&E(p.nextSibling),!t.collapsed){t.deleteContents();var u=t.startContainer;!h(u)&&u.nodeName==="LI"&&!h(u.parentElement)&&(u.parentElement.nodeName==="OL"||u.parentElement.nodeName==="UL")&&u.textContent.trim()===""&&u.parentElement.querySelectorAll("li").forEach(function(m){m.remove()})}t.insertNode(e),this.contentsDeleted=!0;return}else d=n.GetSpliceNode(t,s);d.parentNode.replaceChild(e,d)}}},a.cursorPos=function(t,e,i,n,r,s){t.classList.add("lastNode"),r.innerHTML=yd(r.innerHTML,s),t=r.querySelector(".lastNode"),h(t)||(this.placeCursorEnd(t,e,i,n,r),t.classList.remove("lastNode"),t.classList.length===0&&t.removeAttribute("class"))},a.imageFocus=function(t,e,i){var n=document.createTextNode(" ");if(t.parentNode&&t.parentNode.nodeName==="A"){var r=t.parentNode,s=r.parentNode;s.insertBefore(n,r.nextSibling),s.insertBefore(t,n)}else t.parentNode.insertBefore(n,t.nextSibling);e.setSelectionText(i,t.nextSibling,t.nextSibling,0,0)},a.getImmediateBlockNode=function(t,e){do t=t.parentNode;while(t&&li.indexOf(t.nodeName.toLocaleLowerCase())<0);return t},a.removingComments=function(t){var e=t.innerHTML;e=e.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=e},a.findDetachEmptyElem=function(t){var e;if(h(t.parentElement))e=null;else{var i=t.parentElement.textContent.length>0&&t.parentElement.textContent.match(/\u00a0/g)&&t.parentElement.textContent.match(/\u00a0/g).length>0;!i&&t.parentElement.textContent.trim()===""&&t.parentElement.contentEditable!=="true"&&h(t.parentElement.querySelector("img"))&&t.parentElement.nodeName!=="TD"&&t.parentElement.nodeName!=="TH"?e=this.findDetachEmptyElem(t.parentElement):e=t}return e},a.removeEmptyElements=function(t){for(var e=t.querySelectorAll(":empty"),i=Array.from(e).filter(function(o){return!o.closest("svg")&&!o.closest("canvas")}),n=0;n<i.length;n++){var r=!0;if(i[n].tagName==="DIV"&&(r=i[n].style.borderBottom==="none"||i[n].style.borderBottom===""),vd.indexOf(i[n].tagName.toLowerCase())<0&&r){var s=this.findDetachEmptyElem(i[n]);h(s)||E(s)}}},a.closestEle=function(t,e){var i=t;if(b(i,"li"))return b(i,"li");for(;i&&i.nodeType===1;){if(i.parentNode===e||!h(i.parentNode.tagName)&&Ct.indexOf(i.parentNode.tagName.toLocaleLowerCase())!==-1)return i;i=i.parentNode}return null},a.insertTableInList=function(t,e,i,n,r){if(t.collapsed){var s=t.startOffset===0,o=t.startContainer.textContent.trimEnd().length===t.startOffset;if(s||o)s?ue.AppendBefore(e,n,!1):ue.AppendBefore(e,n,!0);else{var l=r.SplitNode(t,i,!0),c=l.previousSibling;c.appendChild(e)}}else t.deleteContents(),i.appendChild(e);e.classList.add("ignore-table")},a.alignCheck=function(t){for(var e=t.querySelectorAll('span[style*="text-align"]'),i=0;i<e.length;i++){var n=e[i];if(n){var r=this.getImmediateBlockNode(n,null);if(r){for(var s="",o=0;o<e.length;o++){var l=e[o];r.contains(l)&&(s+=l.textContent)}r.textContent.trim()===s.trim()&&(r.style.textAlign=n.style.textAlign)}}}},a.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],a.contentsDeleted=!1,a}(),Wd=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(Vo,this.linkCommand,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(Vo,this.linkCommand),this.parent.observer.off(ie,this.destroy)},a.prototype.linkCommand=function(t){switch(t.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(t);break;case"openlink":this.openLink(t);break;case"removelink":this.removeLink(t);break}},a.prototype.createLink=function(t){var e=!h(t.item.selectParent)&&t.item.selectParent.length>0&&b(t.item.selectParent[0],"a");if(e=h(e)?!h(t.item.selectParent)&&t.item.selectParent.length>0?t.item.selectParent[0]:null:e,!h(e)&&e.tagName==="A"){var i=e,n="";if(h(t.item.url)||i.setAttribute("href",t.item.url),h(t.item.title)||i.setAttribute("title",t.item.title),!h(t.item.text)&&t.item.text!==""&&(n=i.innerText,i.firstChild.nodeName==="#text"?i.innerText=t.item.text:i.firstChild.innerText=t.item.text),h(t.item.target)?(i.removeAttribute("target"),i.removeAttribute("aria-label")):(i.setAttribute("target",t.item.target),i.setAttribute("aria-label",t.item.ariaLabel)),n===t.item.text)t.item.selection.setSelectionText(this.parent.currentDocument,i,i,1,1),t.item.selection.restore();else{var r=t.item.action==="Paste"?i.childNodes[0].textContent.length:0,s=i.firstChild.nodeName==="#text"?i.childNodes[0].textContent.length:i.childNodes.length;t.item.selection.setSelectionText(this.parent.currentDocument,i.childNodes[0],i.childNodes[0],r,s)}}else{var o=new qe,l=o.getRange(this.parent.currentDocument);l.endContainer.nodeName==="#text"&&l.startContainer.textContent.length===l.endOffset+1&&l.endContainer.textContent.charAt(l.endOffset)===" "&&!h(l.endContainer.nextSibling)&&l.endContainer.nextSibling.nodeName==="A"&&(o.setSelectionText(this.parent.currentDocument,l.startContainer,l.endContainer,l.startOffset,l.endOffset+1),l=o.getRange(this.parent.currentDocument));var c=h(t.item.text)?!0:t.item.text.replace(/ /g,"").localeCompare(l.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(t.event&&t.event.type==="keydown"&&(t.event.keyCode===32||t.event.keyCode===13)||t.item.action==="Paste"||l.collapsed||c){var p=this.createAchorNode(t);p.innerText=t.item.text===""?t.item.url:t.item.text;var d=p.innerText,u=d.replace(/  +/g,function(f){return" ".repeat(f.length)});if(p.innerText=u,t.item.selection.restore(),We.Insert(this.parent.currentDocument,p,this.parent.editableElement),t.event&&t.event.type==="keydown"&&(t.event.keyCode===32||t.event.keyCode===13)){var m=t.item.selection.range.startContainer;m.textContent=this.removeText(m.textContent,t.item.text)}else{var r=t.item.action==="Paste"?p.childNodes[0].textContent.length:0;t.item.selection.setSelectionText(this.parent.currentDocument,p.childNodes[0],p.childNodes[0],r,p.childNodes[0].textContent.length)}}else this.createLinkNode(t)}t.callBack&&t.callBack({requestType:"Links",editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.createLinkNode=function(t){for(var e=new qe,i=new ci,n=e.getRange(this.parent.currentDocument),r=this.getSelectionNodes(e.getNodeCollection(n)),s=e.save(n,this.parent.currentDocument),o=[],l=[],c,p=[],d=[],u=[],m,f=0;f<r.length;f++)r[f]=i.GetSpliceNode(n,r[f]),o[f]=r[f];for(var g=0;g<o.length;g++){var y=!0;for(c=o[g];y===!0;){if(c.parentNode.nodeName==="A"){var S=c.parentNode;c.parentNode.parentNode.insertBefore(S.firstChild,S),c.parentNode.removeChild(S)}this.isBlockNode(c.parentNode)||o.length===0||g===0||g===o.length-1||n.startContainer.nodeType===3?(l[g]=c,y=!1):c=c.parentNode}}for(var g=0,T=0;g<l.length;g++)if(g===0&&(u[T]=l[g]),l.length>1&&g<l.length-1){if(l[g].parentElement===l[g+1].parentElement&&l[g]===l[g+1])continue;u[T+1]=l[g+1],T++}var L=0;d[L]=this.createAchorNode(t);for(var g=0;g<u.length;g++)if(g===0&&(m=u[g].cloneNode(!0),d[g].appendChild(m)),g<u.length-1)if(u[g].parentNode===u[g+1].parentNode){var w=u[g+1].cloneNode(!0);d[L].appendChild(w)}else L=L+1,d[L]=this.createAchorNode(t),m=u[g+1].cloneNode(!0),d[L].appendChild(m);this.parent.nodeSelection.setRange(document,s.range);for(var g=0,N=0,M=0;g<=u.length;g++)g===0&&(u[g].parentNode.insertBefore(d[N],u[g].nextSibling),this.parent.domNode.blockNodes().length===1&&d.length===1&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,d[N]),p[M]=u[g],M++),g<u.length-1&&(u[g].parentNode===u[g+1].parentNode?(p[M]=u[g+1],M++):(N=N+1,u[g+1].parentNode.insertBefore(d[N],u[g+1]),p[M]=u[g+1],M++));for(var g=0;g<p.length;g++)p[g].parentNode&&p[g].parentNode.removeChild(p[g])},a.prototype.createAchorNode=function(t){var e=B("a",{className:"e-rte-anchor",attrs:{href:t.item.url,title:h(t.item.title)||t.item.title===""?t.item.url:t.item.title}});return h(t.item.target)||e.setAttribute("target",t.item.target),h(t.item.ariaLabel)||e.setAttribute("aria-label",t.item.ariaLabel),e},a.prototype.getSelectionNodes=function(t){t=t.reverse();for(var e=0;e<t.length;e++)(t[e].nodeType!==3||t[e].textContent.trim()==="")&&t[e].nodeName!=="IMG"&&(t.splice(e,1),e--);return t.reverse()},a.prototype.isBlockNode=function(t){return!!t&&t.nodeType===Node.ELEMENT_NODE&&li.indexOf(t.tagName.toLowerCase())>=0},a.prototype.removeText=function(t,e){for(var i=t.split(" "),n=0;n<i.length;n++)i[n]===e&&(i.splice(n,1),n--);return i.join(" ")+" "},a.prototype.openLink=function(t){document.defaultView.open(t.item.url,t.item.target),this.callBack(t)},a.prototype.removeLink=function(t){var e=this.parent.domNode.blockNodes();if(e.length<2){this.parent.domNode.setMarker(t.item.selection);for(var i=b(t.item.selectParent[0],"a"),n=i||t.item.selectParent[0],r=n.parentNode,s=[];n.firstChild&&r;null)s.push(r.insertBefore(n.firstChild,n));r.removeChild(n),s&&s.length===1&&(t.item.selection.startContainer=t.item.selection.getNodeArray(s[s.length-1],!0),t.item.selection.endContainer=t.item.selection.startContainer),t.item.selection=this.parent.domNode.saveMarker(t.item.selection)}else for(var o=0;o<e.length;o++)for(var l=e[o].querySelectorAll("a"),c=0;c<l.length;c++)this.parent.currentDocument.getSelection().containsNode(l[c],!0)&&(l[c].outerHTML=l[c].innerHTML);t.item.selection.restore(),this.callBack(t)},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.destroy=function(){this.removeEventListener()},a}(),Qd=function(){function a(t){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(ea,this.applyAlignment,this),this.parent.observer.on(Ee,this.onKeyDown,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(ea,this.applyAlignment),this.parent.observer.off(Ee,this.onKeyDown),this.parent.observer.off(ie,this.destroy)},a.prototype.onKeyDown=function(t){switch(t.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:t.callBack}),t.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:t.callBack}),t.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:t.callBack}),t.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:t.callBack}),t.event.preventDefault();break}},a.prototype.getTableNode=function(t){var e=t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer:t.startContainer.parentNode,i=b(e,"td,th");return[i]},a.prototype.applyAlignment=function(t){var e=t.value==="Table",i=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(i,this.parent.currentDocument);if(e)U(this.getTableNode(i)[0],{"text-align":this.alignments[t.subCommand]});else{this.parent.domNode.setMarker(n);var r=this.parent.domNode.blockNodes();t.enterAction==="BR"&&(r=this.parent.domNode.convertToBlockNodes(r,!1));for(var s=0;s<r.length;s++){var o=r[s];U(o,{"text-align":this.alignments[t.subCommand]})}for(var l=this.parent.domNode.getImageTagInSelection(),s=0;s<l.length;s++){var c=[];c.push(l[s]),this.parent.imgObj.imageCommand({item:{selectNode:c},subCommand:t.subCommand,value:t.subCommand,callBack:t.callBack,selector:t.selector})}this.parent.editableElement.focus(),n=this.parent.domNode.saveMarker(n),Qe()&&Ut(this.parent.editableElement,t.selector),n.restore()}t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:e?this.getTableNode(i):this.parent.domNode.blockNodes()})},a.prototype.destroy=function(){this.removeEventListener()},a}(),Kd=function(){function a(t){this.indentValue=20,this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(ta,this.applyIndents,this),this.parent.observer.on(Ee,this.onKeyDown,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(ta,this.applyIndents),this.parent.observer.off(Ee,this.onKeyDown),this.parent.observer.off(ie,this.destroy)},a.prototype.onKeyDown=function(t){switch(t.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:t.callBack}),t.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:t.callBack}),t.event.preventDefault();break}},a.prototype.applyIndents=function(t){var e=this.parent.editableElement,i=e.classList.contains("e-rtl"),n=this.parent.nodeSelection.getRange(this.parent.currentDocument),r=this.parent.nodeSelection.save(n,this.parent.currentDocument);this.parent.domNode.setMarker(r);var s=this.parent.domNode.blockNodes();t.enterAction==="BR"&&(s=this.parent.domNode.convertToBlockNodes(s,!1));for(var o=s.slice(),l=[],c=0;c<o.length;c++)o[c].tagName!=="LI"&&o[c].parentNode.tagName==="LI"?(s.splice(s.indexOf(o[c]),1),l.push(o[c].parentNode)):o[c].tagName==="LI"&&(s.splice(s.indexOf(o[c]),1),l.push(o[c]));l.length>0&&this.parent.observer.notify(Ee,{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:t.subCommand!=="Indent",which:9,action:"indent"}});for(var c=0;c<s.length;c++){var p=s[c],d=i?p.style.marginRight:p.style.marginLeft,u=void 0;t.subCommand==="Indent"?(u=d===""?this.indentValue+"px":parseInt(d,null)+this.indentValue+"px",i?p.style.marginRight=u:p.style.marginLeft=u):(u=d===""||d==="0px"||d==="0in"?"":parseInt(d,null)-this.indentValue+"px",i?p.style.marginRight=u:p.style.marginLeft=u)}e.focus(),Qe()&&Ut(e,t.selector),r=this.parent.domNode.saveMarker(r),r.restore(),t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},a.prototype.destroy=function(){this.removeEventListener()},a}(),vt="e-imgright",bt="e-imgleft",Ti="e-imgcenter",Gd="e-video-right",Xd="e-video-left",Yd="e-video-center",Bs="e-imgbreak",$d="e-audio-break",Gn="e-video-break",pe="e-img-caption",ql="e-caption-inline",Jd="e-imginline",jl="e-audio-inline",zl="e-clickelem",Xn="e-video-clickelem",Rs="e-rte-audio",Ei="e-rte-video",Yn="e-audio-wrap",Zd="e-video-wrap",Ul="e-embed-video-wrap",Vl="e-audio-focus",_l="e-video-focus",Ki="e-video-inline",eu=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(Br,this.imageCommand,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(Br,this.imageCommand),this.parent.observer.off(ie,this.destroy)},a.prototype.imageCommand=function(t){switch(t.value.toString().toLowerCase()){case"image":case"replace":this.createImage(t);break;case"insertlink":this.insertImageLink(t);break;case"openimagelink":this.openImageLink(t);break;case"editimagelink":this.editImageLink(t);break;case"removeimagelink":this.removeImageLink(t);break;case"remove":this.removeImage(t);break;case"alttext":this.insertAltTextImage(t);break;case"dimension":this.imageDimension(t);break;case"caption":this.imageCaption(t);break;case"justifyleft":this.imageJustifyLeft(t);break;case"justifycenter":this.imageJustifyCenter(t);break;case"justifyright":this.imageJustifyRight(t);break;case"inline":this.imageInline(t);break;case"break":this.imageBreak(t);break}},a.prototype.createImage=function(t){var e=this,i=!1;if(t.item.url=h(t.item.url)||t.item.url==="undefined"?t.item.src:t.item.url,!h(t.item.selectParent)&&t.item.selectParent[0].tagName==="IMG"){var n=t.item.selectParent[0];i=!0,this.setStyle(n,t,i)}else{var r=B("img");this.setStyle(r,t),h(t.item.selection)||t.item.selection.restore(),!h(t.selector)&&t.selector==="pasteCleanupModule"?h(this.parent.currentDocument)||t.callBack({requestType:"Images",editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[r]}):We.Insert(this.parent.currentDocument,r,this.parent.editableElement)}if(t.callBack&&(h(t.selector)||!h(t.selector)&&t.selector!=="pasteCleanupModule")){var s=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],o=t.value==="Replace"||i?t.item.selectParent[0]:x.isIE?s.previousSibling:s.previousElementSibling,l=function(){h(e.parent.currentDocument)||t.callBack({requestType:t.value==="Replace"?(t.item.subCommand="Replace","Replace"):"Images",editorMode:"HTML",event:t.event,range:e.parent.nodeSelection.getRange(e.parent.currentDocument),elements:[o]}),o.removeEventListener("load",l)};o.addEventListener("load",l)}},a.prototype.setStyle=function(t,e,i){h(e.item.url)||t.setAttribute("src",e.item.url);var n;if(i)for(var r={"e-imgcenter":"e-imgcenter","e-imgright":"e-imgright","e-imgleft":"e-imgleft"},s=t.classList,o=0;o<s.length;o++)h(r[s[o]])||(n=r[s[o]]);t.setAttribute("class","e-rte-image"+(h(e.item.cssClass)?"":" "+e.item.cssClass)+(h(n)?"":" "+n)),h(e.item.altText)||t.setAttribute("alt",e.item.altText.replace(/\.[a-zA-Z0-9]+$/,"")),!h(e.item.width)&&!h(e.item.width.width)&&t.setAttribute("width",this.calculateStyleValue(e.item.width.width)),!h(e.item.height)&&!h(e.item.height.height)&&t.setAttribute("height",this.calculateStyleValue(e.item.height.height)),!h(e.item.width)&&!h(e.item.width.minWidth)&&(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),!h(e.item.width)&&!h(e.item.width.maxWidth)&&(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth)),!h(e.item.height)&&!h(e.item.height.minHeight)&&(t.style.minHeight=this.calculateStyleValue(e.item.height.minHeight)),!h(e.item.height)&&!h(e.item.height.maxHeight)&&(t.style.maxHeight=this.calculateStyleValue(e.item.height.maxHeight))},a.prototype.calculateStyleValue=function(t){var e;return typeof t=="string"&&(t.indexOf("px")||t.indexOf("%")||t.indexOf("auto"))?e=t:e=t+"px",e},a.prototype.insertImageLink=function(t){var e=B("a",{attrs:{href:t.item.url}});t.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(t.item.selection.restore(),e.setAttribute("contenteditable","true")),e.appendChild(t.item.selectNode[0]),h(t.item.target)||e.setAttribute("target",t.item.target),h(t.item.ariaLabel)||e.setAttribute("aria-label",t.item.ariaLabel),We.Insert(this.parent.currentDocument,e,this.parent.editableElement),this.callBack(t)},a.prototype.openImageLink=function(t){document.defaultView.open(t.item.url,t.item.target),this.callBack(t)},a.prototype.removeImageLink=function(t){var e=t.item.selectParent[0];if(e.classList.contains("e-img-caption")){var i=F(".e-img-wrap",e),n=F(".e-img-inner",e),r=n.cloneNode(!0);E(F("a",e)),E(n),i.appendChild(t.item.insertElement),i.appendChild(r)}else E(e),x.isIE&&t.item.selection&&t.item.selection.restore(),We.Insert(this.parent.currentDocument,t.item.insertElement,this.parent.editableElement);this.callBack(t)},a.prototype.editImageLink=function(t){t.item.selectNode[0].parentElement.href=t.item.url,h(t.item.target)?(t.item.selectNode[0].parentElement.removeAttribute("target"),t.item.selectNode[0].parentElement.removeAttribute("aria-label")):(t.item.selectNode[0].parentElement.target=t.item.target,t.item.selectNode[0].parentElement.setAttribute("aria-label",t.item.ariaLabel)),this.callBack(t)},a.prototype.removeImage=function(t){b(t.item.selectNode[0],"a")?t.item.selectNode[0].parentElement.nodeName==="A"&&!h(t.item.selectNode[0].parentElement.innerText)?h(b(t.item.selectNode[0],"."+pe))?E(t.item.selectNode[0]):E(b(t.item.selectNode[0],"."+pe)):E(b(t.item.selectNode[0],"a")):h(b(t.item.selectNode[0],"."+pe))?E(t.item.selectNode[0]):E(b(t.item.selectNode[0],"."+pe)),this.callBack(t)},a.prototype.insertAltTextImage=function(t){t.item.selectNode[0].setAttribute("alt",t.item.altText),this.callBack(t)},a.prototype.imageDimension=function(t){var e=t.item.selectNode[0];e.style.height="",e.style.width="",t.item.width!=="auto"?e.style.width=z(t.item.width):e.removeAttribute("width"),t.item.height!=="auto"?e.style.height=z(t.item.height):e.removeAttribute("height"),this.callBack(t)},a.prototype.imageCaption=function(t){We.Insert(this.parent.currentDocument,t.item.insertElement,this.parent.editableElement),this.callBack(t)},a.prototype.imageJustifyLeft=function(t){var e=t.item.selectNode[0];h(e)||(e.removeAttribute("class"),k([e],"e-rte-image"),h(b(e,"."+pe))||(O([b(e,"."+pe)],vt),k([b(e,"."+pe)],bt)),e.parentElement.nodeName==="A"?(O([e.parentElement],vt),k([e.parentElement],bt),k([e],bt)):k([e],bt),this.callBack(t))},a.prototype.imageJustifyCenter=function(t){var e=t.item.selectNode[0];h(e)||(e.removeAttribute("class"),k([e],"e-rte-image"),h(b(e,"."+pe))||(O([b(e,"."+pe)],bt),O([b(e,"."+pe)],vt),k([b(e,"."+pe)],Ti)),e.parentElement.nodeName==="A"?(O([e.parentElement],bt),O([e.parentElement],vt),k([e.parentElement],Ti),k([e],Ti)):k([e],Ti),this.callBack(t))},a.prototype.imageJustifyRight=function(t){var e=t.item.selectNode[0];h(e)||(e.removeAttribute("class"),k([e],"e-rte-image"),h(b(e,"."+pe))||(O([b(e,"."+pe)],bt),k([b(e,"."+pe)],vt)),e.parentElement.nodeName==="A"?(O([e.parentElement],bt),k([e.parentElement],vt),k([e],vt)):k([e],vt),this.callBack(t))},a.prototype.imageInline=function(t){var e=t.item.selectNode[0];e.removeAttribute("class"),k([e],"e-rte-image"),k([e],Jd),h(b(e,"."+pe))||(O([b(e,"."+pe)],Bs),O([b(e,"."+pe)],Ti),O([b(e,"."+pe)],bt),O([b(e,"."+pe)],vt),k([b(e,"."+pe)],ql)),this.callBack(t)},a.prototype.imageBreak=function(t){var e=t.item.selectNode[0];e.removeAttribute("class"),k([e],Bs),k([e],"e-rte-image"),h(b(e,"."+pe))||(O([b(e,"."+pe)],ql),O([b(e,"."+pe)],Ti),O([b(e,"."+pe)],bt),O([b(e,"."+pe)],vt),k([b(e,"."+pe)],Bs)),this.callBack(t)},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.destroy=function(){this.removeEventListener()},a}(),tu=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(jo,this.audioCommand,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(jo,this.audioCommand),this.parent.observer.off(ie,this.destroy)},a.prototype.audioCommand=function(t){var e,i=t.value.toString().toLowerCase();switch((i==="inline"||i==="break"||i==="audioremove")&&(e=t.item.selectNode[0]),i){case"audio":case"audioreplace":this.createAudio(t);break;case"inline":e.removeAttribute("class"),e.closest("."+Yn).style.display="inline-block",k([e],[Rs,jl,Vl]),this.callBack(t);break;case"break":e.removeAttribute("class"),e.closest("."+Yn).style.display="block",k([e],[$d,Rs,Vl]),this.callBack(t);break;case"audioremove":E(e),this.callBack(t);break}},a.prototype.createAudio=function(t){var e=this,i=!1,n;if(!h(t.item.selectParent)&&t.item.selectParent[0].classList&&(t.item.selectParent[0].classList.contains(zl)||t.item.selectParent[0].classList.contains(Yn))){var r=t.item.selectParent[0].querySelector("source");this.setStyle(r,t),i=!0}else{n=B("span",{className:Yn,attrs:{contentEditable:"false",title:h(t.item.title)?h(t.item.fileName)?"":t.item.fileName:t.item.title}});var s=B("audio",{className:Rs+" "+jl,attrs:{controls:""}}),o=B("source"),l=B("span",{className:zl});if(this.setStyle(o,t),s.appendChild(o),l.appendChild(s),n.appendChild(l),h(t.item.selection)||t.item.selection.restore(),We.Insert(this.parent.currentDocument,n,this.parent.editableElement),n.nextElementSibling===null){var c=B("br");n.parentNode.insertBefore(c,n.nextSibling)}}if(t.callBack&&(h(t.selector)||!h(t.selector)&&t.selector!=="pasteCleanupModule")){var p=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],d=t.value==="AudioReplace"||i?t.item.selectParent[0].querySelector("audio"):x.isIE?p:p.querySelector("audio");d.addEventListener("loadeddata",function(){(t.value!=="AudioReplace"||!i)&&(h(e.parent.currentDocument)||t.callBack({requestType:"Audios",editorMode:"HTML",event:t.event,range:e.parent.nodeSelection.getRange(e.parent.currentDocument),elements:[d]}))}),i&&d.load()}},a.prototype.setStyle=function(t,e){h(e.item.url)||t.setAttribute("src",e.item.url);var i=e.item.fileName?e.item.fileName.split(".").pop().toLowerCase():e.item.url?e.item.url.split(".").pop().toLowerCase():"";i==="opus"?t.type="audio/ogg":i==="m4a"?t.type="audio/mp4":t.type=e.item.fileName&&e.item.fileName.split(".").length>0?"audio/"+e.item.fileName.split(".")[e.item.fileName.split(".").length-1]:e.item.url&&e.item.url.split(".").length>0?"audio/"+e.item.url.split(".")[e.item.url.split(".").length-1]:""},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.destroy=function(){this.removeEventListener()},a}(),iu=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(zo,this.videoCommand,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(zo,this.videoCommand),this.parent.observer.off(ie,this.destroy)},a.prototype.videoCommand=function(t){var e,i,n,r=t.value.toString().toLowerCase();switch(r!=="video"&&r!=="videoreplace"&&(e=t.item.selectNode[0],i=e.closest("."+Ul),n=e.closest("."+Xn)),r){case"video":case"videoreplace":this.createVideo(t);break;case"videodimension":this.videoDimension(t);break;case"inline":e.removeAttribute("class"),i&&(i.style.display="inline-block"),n&&(e.parentElement.style.cssFloat=""),k([e],[Ei,Ki,_l]),this.callBack(t);break;case"break":e.removeAttribute("class"),i&&(i.style.display="block"),n&&(e.parentElement.style.cssFloat=""),k([e],[Gn,Ei,_l]),this.callBack(t);break;case"justifyleft":e.removeAttribute("class"),i&&(i.style.display="block"),n&&(e.parentElement.style.cssFloat="left"),k([e],[Ei,Xd]),this.callBack(t);break;case"justifycenter":e.removeAttribute("class"),i&&(i.style.display="block"),n&&(e.parentElement.style.cssFloat=""),k([e],[Ei,Yd]),this.callBack(t);break;case"justifyright":e.removeAttribute("class"),i&&(i.style.display="block"),n&&(e.parentElement.style.cssFloat="right"),k([e],[Ei,Gd]),this.callBack(t);break;case"videoremove":E(e.parentElement),this.callBack(t);break}},a.prototype.wrapVideo=function(t){var e,i;if(t.item.isEmbedUrl){e=B("span",{className:Ul,attrs:{contentEditable:"false"}});var n=B("span",{className:Xn}),r=B("template");r.innerHTML=t.item.fileName,n.appendChild(r.content),this.vidElement=i=n.firstElementChild,this.setStyle(i,t,this.vidElement),e.style.display=t.item.cssClass===Ki?"inline-block":"block",e.appendChild(n)}else e=B("span",{className:Zd,attrs:{contentEditable:"false",title:h(t.item.title)?h(t.item.fileName)?"":t.item.fileName:t.item.title}}),this.vidElement=B("video",{className:Ei+" "+Ki,attrs:{controls:""}}),i=B("source"),this.setStyle(i,t,this.vidElement),this.vidElement.appendChild(i),e.appendChild(this.vidElement);return e},a.prototype.createVideo=function(t){var e=this,i=!1,n;if(t.value==="VideoReplace"&&!h(t.item.selectParent)&&t.item.selectParent[0].tagName==="VIDEO")if(t.item.isEmbedUrl){n=this.wrapVideo(t);var r=t.item.selection.range.startContainer;r.parentNode.replaceChild(n,r)}else{var s=t.item.selectParent[0].querySelector("source");this.setStyle(s,t,s),i=!0}else if(t.value==="VideoReplace"&&!h(t.item.selectParent)&&h(t.item.selectParent[0].querySelector("iframe"))&&t.item.selectParent[0].classList&&t.item.selectParent[0].classList.contains(Xn))t.item.selectParent[0].innerHTML=t.item.fileName,this.setStyle(t.item.selectParent[0].firstElementChild,t,t.item.selectParent[0].firstElementChild);else if(t.value==="VideoReplace"&&!h(t.item.selectParent)&&!h(t.item.selectParent[0].querySelector("iframe"))&&!t.item.isEmbedUrl){n=this.wrapVideo(t);var r=t.item.selection.range.startContainer;r.parentNode.replaceChild(n,r)}else if(t.item.isEmbedUrl?n=this.wrapVideo(t):n=this.wrapVideo(t),h(t.item.selection)||t.item.selection.restore(),We.Insert(this.parent.currentDocument,n,this.parent.editableElement),n.nextElementSibling===null){var o=B("br");n.parentNode.insertBefore(o,n.nextSibling)}if(t.callBack&&(h(t.selector)||!h(t.selector)&&t.selector!=="pasteCleanupModule")){var l=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],c;t.value==="VideoReplace"||i?t.item.isEmbedUrl?t.item.isEmbedUrl?h(n)||(c=n.querySelector("iframe")):c=t.item.selectParent[0].querySelector("iframe"):c=t.item.selectParent[0]:c=t.item.isEmbedUrl?l.querySelector("iframe"):l.lastElementChild,c.addEventListener(c.tagName!=="IFRAME"?"loadeddata":"load",function(){(t.value!=="VideoReplace"||!i)&&(t.item.isEmbedUrl&&c&&c.classList.add("e-rte-embed-url"),h(e.parent.currentDocument)||t.callBack({requestType:"Videos",editorMode:"HTML",event:t.event,range:e.parent.nodeSelection.getRange(e.parent.currentDocument),elements:[c]}))}),i&&c.load(),x.userAgent.indexOf("Firefox")!==-1&&(this.vidElement.addEventListener("play",function(){e.editAreaVideoClick(t)}),this.vidElement.addEventListener("pause",function(){e.editAreaVideoClick(t)}))}},a.prototype.editAreaVideoClick=function(t){t.callBack({requestType:"VideosPlayPause",editorMode:"HTML",event:t.event})},a.prototype.setStyle=function(t,e,i){!(e.item.url!==""&&!h(e.item.url)&&h(t))&&t.nodeName.toLowerCase()!=="iframe"&&t.setAttribute("src",e.item.url),e.item.isEmbedUrl||(t.type=e.item.fileName&&e.item.fileName.split(".").length>0?"video/"+e.item.fileName.split(".")[e.item.fileName.split(".").length-1]:e.item.url&&e.item.url.split(".").length>0?"video/"+e.item.url.split(".")[e.item.url.split(".").length-1]:""),!h(e.item.width)&&!h(e.item.width.width)&&i.setAttribute("width",z(e.item.width.width)),!h(e.item.height)&&!h(e.item.height.height)&&i.setAttribute("height",z(e.item.height.height)),!h(e.item.width)&&!h(e.item.width.minWidth)&&(i.style.minWidth=z(e.item.width.minWidth)),!h(e.item.width)&&!h(e.item.width.maxWidth)&&(i.style.maxWidth=z(e.item.width.maxWidth)),!h(e.item.height)&&!h(e.item.height.minHeight)&&(i.style.minHeight=z(e.item.height.minHeight)),!h(e.item.height)&&!h(e.item.height.maxHeight)&&(i.style.maxHeight=z(e.item.height.maxHeight)),h(e.item.cssClass)||(e.item.cssClass===Gn?(k([i],[Gn]),O([i],[Ki])):(k([i],[Ki]),O([i],[Gn])))},a.prototype.videoDimension=function(t){var e=t.item.selectNode[0].classList.contains(Xn)?t.item.selectNode[0].querySelector("iframe"):t.item.selectNode[0];e.style.height="",e.style.width="",t.item.width!=="auto"?e.style.width=z(t.item.width):e.removeAttribute("width"),t.item.height!=="auto"?e.style.height=z(t.item.height):e.removeAttribute("height"),this.callBack(t)},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.destroy=function(){this.removeEventListener()},a}(),nu=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(Uo,this.createTable,this),this.parent.observer.on(_o,this.insertRow,this),this.parent.observer.on(Wo,this.insertColumn,this),this.parent.observer.on(Qo,this.deleteRow,this),this.parent.observer.on(Ko,this.deleteColumn,this),this.parent.observer.on(Go,this.removeTable,this),this.parent.observer.on(Xo,this.tableHeader,this),this.parent.observer.on(Yo,this.tableVerticalAlign,this),this.parent.observer.on($o,this.cellMerge,this),this.parent.observer.on(Zo,this.HorizontalSplit,this),this.parent.observer.on(Jo,this.VerticalSplit,this),this.parent.observer.on(Bl,this.tableMove,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(Uo,this.createTable),this.parent.observer.off(_o,this.insertRow),this.parent.observer.off(Wo,this.insertColumn),this.parent.observer.off(Qo,this.deleteRow),this.parent.observer.off(Ko,this.deleteColumn),this.parent.observer.off(Go,this.removeTable),this.parent.observer.off(Xo,this.tableHeader),this.parent.observer.off(Yo,this.tableVerticalAlign),this.parent.observer.off($o,this.cellMerge),this.parent.observer.off(Zo,this.HorizontalSplit),this.parent.observer.off(Jo,this.VerticalSplit),this.parent.observer.off(Bl,this.tableMove),this.parent.observer.off(ie,this.destroy)},a.prototype.createTable=function(t){var e=B("table",{className:"e-rte-table"}),i=B("tbody");h(t.item.width.width)||(e.style.width=this.calculateStyleValue(t.item.width.width)),h(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),h(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth));for(var n=parseInt(t.item.width.width,10)>100?100/t.item.columns:parseInt(t.item.width.width,10)/t.item.columns,r=0;r<t.item.rows;r++){for(var s=B("tr"),o=0;o<t.item.columns;o++){var l=B("td");l.appendChild(B("br")),l.style.width=n+"%",s.appendChild(l)}i.appendChild(s)}if(e.appendChild(i),t.item.selection.restore(),We.Insert(this.parent.currentDocument,e,this.parent.editableElement),t.item.selection.setSelectionText(this.parent.currentDocument,e.querySelector("td"),e.querySelector("td"),0,0),e.nextElementSibling===null&&!e.classList.contains("ignore-table")){var c=void 0;t.enterAction==="DIV"?(c=B("div"),c.appendChild(B("br"))):t.enterAction==="BR"?c=B("br"):(c=B("p"),c.appendChild(B("br"))),this.insertAfter(c,e)}return e.classList.contains("ignore-table")&&de([e],["ignore-table"]),e.querySelector("td").classList.add("e-cell-select"),t.callBack&&t.callBack({requestType:"Table",editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[e]}),e},a.prototype.calculateStyleValue=function(t){var e;return typeof t=="string"&&(t.indexOf("px")>=0||t.indexOf("%")>=0||t.indexOf("auto")>=0)?e=t:e=t+"px",e},a.prototype.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},a.prototype.getSelectedCellMinMaxIndex=function(t){for(var e=this.curTable.querySelectorAll(".e-cell-select"),i=0,n=t.length,r=0,s=t[0].length,o=0,l=0;i<e.length;i++){var c=this.getCorrespondingIndex(e[i],t),p=this.FindIndex(c[0],c[1],t);n=Math.min(c[0],n),r=Math.max(p[0],r),s=Math.min(c[1],s),o=Math.max(p[1],o)}return{startRow:n,endRow:r,startColumn:s,endColumn:o}},a.prototype.insertRow=function(t){var e=t.item.subCommand!=="InsertRowBefore",i=t.item.selection.range.startContainer;if(i.nodeName==="TH"||i.nodeName==="TD"||(i=b(i.parentElement,"td,th")),!(i.nodeName.toLowerCase()==="th"&&t.item.subCommand==="InsertRowBefore")){if(this.curTable=b(this.parent.nodeSelection.range.startContainer.parentElement,"table"),this.curTable.querySelectorAll(".e-cell-select").length===0){var n=this.curTable.rows[this.curTable.rows.length-1],r=n.cloneNode(!0);r.removeAttribute("rowspan"),this.insertAfter(r,n)}else{for(var s=this.getCorrespondingColumns(),o=this.getSelectedCellMinMaxIndex(s),l=e?o.endRow:o.startRow,c=B("tr"),p=this.curTable.querySelectorAll("th.e-cell-select").length>0,d=0;d<s[l].length;d++)if(e&&l<s.length-1&&s[l][d]===s[l+1][d]||!e&&0<l&&s[l][d]===s[l-1][d])(d===0||0<d&&s[l][d]!==s[l][d-1])&&s[l][d].setAttribute("rowspan",(parseInt(s[l][d].getAttribute("rowspan"),10)+1).toString());else{var u=B("td");u.appendChild(B("br")),c.appendChild(u),u.setAttribute("style",s[p&&e&&s[l+1]?l+1:l][d].getAttribute("style"))}var m=void 0;p&&e?m=this.curTable.querySelector("tbody").childNodes[0]:m=this.curTable.rows[l],t.item.subCommand==="InsertRowBefore"||p?m.parentElement.insertBefore(c,m):this.insertAfter(c,m)}t.item.selection.setSelectionText(this.parent.currentDocument,t.item.selection.range.startContainer,t.item.selection.range.startContainer,0,0),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.insertColumn=function(t){var e=t.item.selection.range.startContainer;e.nodeName==="TH"||e.nodeName==="TD"||(e=b(e.parentElement,"td,th"));for(var i=b(e,"tr"),n,r=b(i,"table").rows,s=Array.prototype.slice.call(i.querySelectorAll(":scope > td, :scope > th")).indexOf(e),o=parseInt(t.item.width,10)/i.querySelectorAll(":scope > td, :scope > th").length,l=parseInt(t.item.width,10)/(i.querySelectorAll(":scope > td, :scope > th").length+1),c=b(i,"table"),p=b(i,"table").querySelectorAll("th,td"),d=0;d<p.length;d++)p[d].dataset.oldWidth=p[d].offsetWidth/c.offsetWidth*100+"%";for(var d=0;d<r.length;d++){n=r[d].querySelectorAll(":scope > td, :scope > th")[s];var u=n.cloneNode(!0);u.innerHTML="",u.appendChild(B("br")),u.removeAttribute("class"),u.removeAttribute("colspan"),u.removeAttribute("rowspan"),t.item.subCommand==="InsertColumnLeft"?n.parentElement.insertBefore(u,n):this.insertAfter(u,n),u.style.width=l.toFixed(4)+"%",delete u.dataset.oldWidth}for(var d=0;d<p.length;d++)p[d].style.width=(Number(p[d].dataset.oldWidth.split("%")[0])*l/o).toFixed(4)+"%",delete p[d].dataset.oldWidth;t.item.selection.setSelectionText(this.parent.currentDocument,e,e,0,0),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.deleteColumn=function(t){var e=t.item.selection.range.startContainer;e.nodeType===3&&(e=b(e.parentElement,"td,th"));var i=b(e,e.tagName==="TH"?"thead":"tbody"),n=i&&Array.prototype.indexOf.call(i.childNodes,e.parentNode);this.curTable=b(e,"table");var r=b(e,"tr");if(r.querySelectorAll("th,td").length===1)t.item.selection.restore(),E(b(e.parentElement,"table"));else{for(var s=void 0,o=this.getCorrespondingColumns(),l=this.getSelectedCellMinMaxIndex(o),c=l.startColumn,p=l.endColumn,d=0;d<o.length;d++)for(var u=o[d],m=0;m<u.length;m++){var f=u[m],g=this.getCorrespondingIndex(f,o),y=parseInt(f.getAttribute("colspan"),10)||1;g[1]+(y-1)>=c&&g[1]<=p&&(y>1?f.setAttribute("colspan",(y-1).toString()):(E(f),s=m,x.isIE&&(t.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))))}if(s>-1){var S=i.children[n],T=S&&S.children[s<=S.children.length-1?s:s-1];T&&(t.item.selection.setSelectionText(this.parent.currentDocument,T,T,0,0),T.classList.add("e-cell-select"))}}if(t.callBack){var L=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if(L.nodeName!=="TD"){var w=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,N=L.children[w];N&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,N,0)}t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.deleteRow=function(t){var e=t.item.selection.range.startContainer;e.nodeType===3&&(e=b(e.parentElement,"td,th"));var i=Array.prototype.indexOf.call(e.parentNode.childNodes,e);this.curTable=b(e,"table");var n,r=this.getCorrespondingColumns(),s=this.getSelectedCellMinMaxIndex(r),o,l;if(this.curTable.rows.length===1)t.item.selection.restore(),E(b(e.parentElement,"table"));else for(o=s.endRow;o>=s.startRow;o--){for(n=this.curTable.rows[o],l=0;l<r[o].length;l++){if((l===0||r[o][l]!==r[o][l-1])&&1<parseInt(r[o][l].getAttribute("rowspan"),10)){var c=parseInt(r[o][l].getAttribute("rowspan"),10)-1;if(c===1){r[o][l].removeAttribute("rowspan");var p=this.getMergedRow(this.getCorrespondingColumns())[l];if(p){var d=p.cloneNode(!0);d.innerHTML="<br>",p.parentElement&&p.parentElement.insertBefore(d,p)}}else r[o][l].setAttribute("rowspan",c.toString())}if(o<r.length-1&&r[o][l]===r[o+1][l]&&(o===0||r[o][l]!==r[o-1][l])){var u=r[o][l],m=void 0;for(m=l;0<m&&r[o][m]===r[o][m-1];m--)m===0?this.curTable.rows[o+1].prepend(u):r[o+1][m-1].insertAdjacentElement("afterend",u)}}var f=n.rowIndex;this.curTable.deleteRow(f);var g=h(this.curTable.rows[f])?this.curTable.querySelectorAll("tbody tr")[f-1]:this.curTable.querySelectorAll("tbody tr")[f],y=g&&g.querySelectorAll("td")[i];y?(t.item.selection.setSelectionText(this.parent.currentDocument,y,y,0,0),y.classList.add("e-cell-select")):(t.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))}t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.getMergedRow=function(t){for(var e,i=0;i<t.length;i++)t[i].length!==this.curTable.rows[0].childNodes.length&&(e=t[i]);return e},a.prototype.removeTable=function(t){var e=t.item.selection.range.startContainer;e=e.nodeType===3?e.parentNode:e;var i=b(e.parentElement,"table");i&&(t.item.selection.restore(),E(i)),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.tableHeader=function(t){var e=!1,i=t.item.selection.range.startContainer;i=i.nodeType===3?i.parentNode:i;var n=b(i.parentElement,"table");if([].slice.call(n.childNodes).forEach(function(u){u.nodeName==="THEAD"&&(e=!0)}),n&&!e){for(var r=n.querySelector("tr").childElementCount,s=0,o=0;o<r;o++)s=s+(parseInt(n.querySelector("tr").children[o].getAttribute("colspan"),10)||1);for(var l=n.createTHead(),c=l.insertRow(0),p=0;p<s;p++){var d=B("th");d.appendChild(B("br")),c.appendChild(d)}}else n.deleteTHead();t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.tableVerticalAlign=function(t){var e="";switch(t.item.subCommand){case"AlignTop":e="top";break;case"AlignMiddle":e="middle";break;case"AlignBottom":e="bottom";break}t.item.tableCell.style.verticalAlign=e,e&&e!==""&&t.item.tableCell.getAttribute("valign")&&t.item.tableCell.removeAttribute("valign"),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.cellMerge=function(t){h(this.curTable)&&(this.curTable=b(this.parent.nodeSelection.range.startContainer.parentElement,"table"));var e=this.curTable.querySelectorAll(".e-cell-select");if(!(e.length<2)){this.mergeCellContent();var i=this.getSelectedMinMaxIndexes(this.getCorrespondingColumns()),n=e[0],r=n.parentElement.querySelectorAll(".e-cell-select");i.startColumn<i.endColumn&&n.setAttribute("colspan",(i.endColumn-i.startColumn+1).toString()),i.startRow<i.endRow&&n.setAttribute("rowspan",(i.endRow-i.startRow+1).toString());for(var s=0,o,l=r.length-1;l>=0;l--)if(!h(r[l].style.width)&&r[l].style.width!==""){if(!o){var c=r[l].style.width.match(/^([\d.]+)([a-z%]+)$/i);o=c?c[2]:"%"}s=s+parseFloat(r[l].style.width)}else s=s+r[l].offsetWidth/this.curTable.offsetWidth*100,o="%";n.style.width=s+o;for(var p=1;p<=e.length-1;p++)E(e[p]);for(var p=0;p<this.curTable.rows.length;p++)this.curTable.rows[p].innerHTML===""&&E(this.curTable.rows[p]);de(this.curTable.querySelectorAll("table td, table th"),"e-multi-cells-select"),de(this.curTable.querySelectorAll("table td, table th"),"e-cell-select-end"),this.updateRowSpanStyle(i.startRow,i.endRow,this.getCorrespondingColumns()),this.updateColSpanStyle(i.startColumn,i.endColumn,this.getCorrespondingColumns()),t.item.selection.setSelectionText(this.parent.currentDocument,t.item.selection.range.startContainer,t.item.selection.range.startContainer,0,0),this.parent.nodeSelection&&n&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.updateColSpanStyle=function(t,e,i){var n,r,s,o=0,l,c=0,p=i;if(t<(e=Math.min(e,p[0].length-1))){for(r=t;r<=e;r++)if(o=Math.min(parseInt(p[0][r].getAttribute("colspan"),10)||1,e-t+1),!(t<r&&p[0][r]===p[0][r-1])&&1<o&&p[0][r]===p[0][r+1])for(c=o-1,n=1;n<p.length;n++){if(p[n][r]!==p[n-1][r]){for(s=r;s<r+o;s++)if(l=parseInt(p[n][s].getAttribute("colspan"),10)||1,1<l&&p[n][s]===p[n][s+1])s+=c=Math.min(c,l-1);else if(c=Math.max(0,c-1),c===0)break}if(!c)break}c&&this.updateCellAttribute(p,c,"colspan",0,p.length-1,t,e)}},a.prototype.updateRowSpanStyle=function(t,e,i){var n,r,s,o=0,l,c=0,p=i;if(t<(e=Math.min(e,p.length-1))){for(n=t;n<=e;n++)if(!(t<n&&p[n][0]===p[n-1][0])&&p[n][0]&&1<(o=Math.min(parseInt(p[n][0].getAttribute("rowspan"),10)||1,e-t+1))&&p[n][0]===p[n+1][0]){for(c=o-1,r=1;r<p[0].length;r++)if(p[n][r]!==p[n][r-1]){for(s=n;s<n+o;s++)if(l=parseInt(p[s][r].getAttribute("rowspan"),10)||1,1<l&&p[s][r]===p[s+1][r])s+=c=Math.min(c,l-1);else if(!(c=Math.max(0,c-1)))break;if(!c)break}}c&&this.updateCellAttribute(p,c,"rowspan",t,e,0,p[0].length-1)}},a.prototype.updateCellAttribute=function(t,e,i,n,r,s,o){var l,c,p;for(l=n;l<=r;l++)for(c=s;c<=o;c++)p=parseInt(t[l][c].getAttribute(i),10)||1,(n<l&&t[l][c]===t[l-1][c]||s<c&&t[l][c]===t[l][c-1]||1<p)&&(1<p-e?t[l][c].setAttribute(i,(p-e).toString()):t[l][c].removeAttribute(i))},a.prototype.mergeCellContent=function(){for(var t=this.curTable.querySelectorAll(".e-cell-select"),e=t[0].innerHTML==="<br>"?"":t[0].innerHTML,i=1;i<t.length;i++)t[i].innerHTML!=="<br>"&&(e=e?e+"<br>"+t[i].innerHTML:e+t[i].innerHTML);t[0].innerHTML=e},a.prototype.getSelectedMinMaxIndexes=function(t){var e=this.curTable.querySelectorAll(".e-cell-select");if(0<e.length){for(var i=t.length,n=0,r=t[0].length,s=0,o=0;o<e.length;o++){var l=this.getCorrespondingIndex(e[o],t),c=this.FindIndex(l[0],l[1],t);i=Math.min(l[0],i),n=Math.max(c[0],n),r=Math.min(l[1],r),s=Math.max(c[1],s)}return{startRow:i,endRow:n,startColumn:r,endColumn:s}}return null},a.prototype.HorizontalSplit=function(t){var e=t.item.selection.range.startContainer;if(this.curTable=b(e.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.activeCell.cloneNode(!0);i.removeAttribute("class"),i.innerHTML="</br>";var n=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),r=this.getCorrespondingColumns(),s=this.activeCell.getAttribute("rowspan")?parseInt(this.activeCell.getAttribute("rowspan"),10):1;if(s>1){var o=Math.ceil(s/2);1<o?this.activeCell.setAttribute("rowspan",o.toString()):this.activeCell.removeAttribute("rowspan"),1<s-o?i.setAttribute("rowspan",(s-o).toString()):i.removeAttribute("rowspan");var l=void 0,c=void 0;for(l=n[0]+Math.ceil(s/2),c=n[1]===0?n[1]:n[1]-1;0<=c&&(r[l][c]===r[l][c-1]||0<l&&r[l][c]===r[l-1][c]);)c--;c===-1?this.curTable.rows[l].firstChild?this.curTable.rows[l].prepend(i):this.curTable.appendChild(i):r[l][c].insertAdjacentElement("afterend",i)}else{var p=B("tr");p.appendChild(i);for(var d=r[n[0]],u=0;u<=d.length-1;u++)d[u]!==d[u-1]&&d[u]!==this.activeCell&&d[u].setAttribute("rowspan",((parseInt(d[u].getAttribute("rowspan"),10)?parseInt(d[u].getAttribute("rowspan"),10):1)+1).toString());this.activeCell.parentNode.insertAdjacentElement("afterend",p)}t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.VerticalSplit=function(t){var e=t.item.selection.range.startContainer;if(this.curTable=b(e.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.curTable.rows,n=this.activeCell.cloneNode(!0);n.removeAttribute("class"),n.innerHTML="</br>";var r=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),s=this.getCorrespondingColumns(),o=parseInt(this.activeCell.getAttribute("colspan"),10)||1;if(o>1){var l=Math.ceil(o/2),c=this.getColSizes(this.curTable),p=this.getSplitColWidth(r[1],r[1]+l-1,c),d=this.getSplitColWidth(r[1]+l,r[1]+o-1,c),u=this.convertPixelToPercentage(this.activeCell.offsetWidth,this.curTable.offsetWidth);d=u-p<d?u-p:d,1<l?this.activeCell.setAttribute("colspan",l.toString()):this.activeCell.removeAttribute("colspan"),1<o-l?n.setAttribute("colspan",(o-l).toString()):n.removeAttribute("colspan"),this.activeCell.style.width=p+"%",n.style.width=d+"%"}else{for(var m=parseFloat(this.activeCell.style.width)/2,f=0;f<=i.length-1;f++)if(f===0||s[f][r[1]]!==s[f-1][r[1]]){var g=s[f][r[1]];g!==this.activeCell&&g.setAttribute("colspan",((parseInt(g.getAttribute("colspan"),10)?parseInt(g.getAttribute("colspan"),10):1)+1).toString())}this.activeCell.style.width=m+"%",n.style.width=m+"%"}this.activeCell.parentNode.insertBefore(n,this.activeCell.nextSibling),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.getSplitColWidth=function(t,e,i){for(var n=0,r=t;r<=e;r++)n+=i[r];return this.convertPixelToPercentage(n,this.curTable.offsetWidth)},a.prototype.getColSizes=function(t){for(var e=t.rows[0].cells,i=0,n=0;n<e.length;n++)i=i+e[n].colSpan;for(var r=new Array(i),s=new Map,o=0;o<t.rows.length;o++)for(var l=0,c=0;c<t.rows[o].cells.length;c++){for(var p=1;p<t.rows[o].cells[c].rowSpan;p++){var d=""+(o+p)+l;s.set(d,t.rows[o].cells[c])}var u=this.getCellIndex(s,o,c);u>l&&(l=u);var m=t.rows[o].cells[c].offsetWidth;(!r[l]||m<r[l])&&(r[l]=m),l+=1+t.rows[o].cells[c].colSpan-1}return r},a.prototype.getCellIndex=function(t,e,i){var n=""+e+i,r=t.get(n);return r?this.getCellIndex(t,e,i+r.colSpan):i},a.prototype.convertPixelToPercentage=function(t,e){return t/e*100},a.prototype.getCorrespondingColumns=function(){for(var t=[],e=this,i=0,n=e.curTable.rows,r=0;r<=n.length-1;r++)for(var s=n[r],o=0,l=0;l<=s.children.length-1;l++){for(var c=s.children[l],p=c,d=parseInt(p.getAttribute("colspan"),10)||1,u=parseInt(p.getAttribute("rowspan"),10)||1,m=r;m<r+u;m++)for(var f=o;f<o+d;f++)t[m]||(t[m]=[]),t[m][f]?o++:t[m][f]=c;o+=i}return t},a.prototype.FindIndex=function(t,e,i){var n,r;for(n=t+1,r=e+1;n<i.length;){if(i[n][e]!==i[t][e]){n--;break}n++}for(n===i.length&&n--;r<i[t].length;){if(i[t][r]!==i[t][e]){r--;break}r++}return r===i[t].length&&r--,[n,r]},a.prototype.getCorrespondingIndex=function(t,e){for(var i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)if(e[i][n]===t)return[i,n];return[]},a.prototype.highlightCells=function(t,e,i,n,r){var s,o,l,c,p=t,d=e,u=i,m=n,f=new ru;for(s=p;s<=d;s++){for(l=this.getCorrespondingIndex(r[s][u],r),c=this.FindIndex(l[0],l[1],r),(1<(parseInt(r[s][u].getAttribute("rowspan"),10)||1)||1<(parseInt(r[s][u].getAttribute("colspan"),10)||1))&&c?(p=Math.min(l[0],p),d=Math.max(c[0],d),u=Math.min(l[1],u),m=Math.max(c[1],m)):(1<(parseInt(r[s][m].getAttribute("rowspan"),10)||1)||1<(parseInt(r[s][m].getAttribute("colspan"),10)||1))&&(l=this.getCorrespondingIndex(r[s][m],r),c=this.FindIndex(l[0],l[1],r),c&&(p=Math.min(l[0],p),d=Math.max(c[0],d),u=Math.min(l[1],u),m=Math.max(c[1],m))),o=u;o<=m;o++)l=this.getCorrespondingIndex(r[p][o],r),c=this.FindIndex(l[0],l[1],r),(1<(parseInt(r[p][o].getAttribute("rowspan"),10)||1)||1<(parseInt(r[p][o].getAttribute("colspan"),10)||1))&&c?(p=Math.min(l[0],p),d=Math.max(c[0],d),u=Math.min(l[1],u),m=Math.max(c[1],m)):(1<(parseInt(r[d][o].getAttribute("rowspan"),10)||1)||1<(parseInt(r[d][o].getAttribute("colspan"),10)||1))&&(l=this.getCorrespondingIndex(r[d][o],r),c=this.FindIndex(l[0],l[1],r),c&&(p=Math.min(l[0],p),d=Math.max(c[0],d),u=Math.min(l[1],u),m=Math.max(c[1],m)));f=p===t&&d===e&&u===i&&m===n?{startRow:t,endRow:e,startColumn:i,endColumn:n}:this.highlightCells(p,d,u,m,r)}return f},a.prototype.restoreRange=function(t){this.parent.currentDocument.getSelection().rangeCount&&(t.nodeName==="TD"||t.nodeName==="TH")&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},a.prototype.tableMove=function(t){this.activeCell=t.selectNode[0];var e=t.event.target,i=this.activeCell.tagName,n=e.tagName;if(this.curTable=b(e,"table"),!(e.tagName!=="TD"&&e.tagName!=="TH"&&i!==n)){var r=b(this.activeCell,"table");if(!(h(this.curTable)||h(r)||r!==this.curTable)){for(var s=this.getCorrespondingColumns(),o=this.getCorrespondingIndex(this.activeCell,s),l=this.getCorrespondingIndex(e,s),c=this.curTable.querySelectorAll(".e-cell-select, .e-multi-cells-select, .e-cell-select-end"),p=c.length-1;p>=0;p--)this.activeCell!==c[p]&&de([c[p]],["e-cell-select"]),de([c[p]],["e-multi-cells-select"]),de([c[p]],["e-cell-select-end"]);if(o[0]===l[0]&&o[1]===l[1]){c.length>1&&this.restoreRange(e);return}for(var d=this.highlightCells(Math.min(o[0],l[0]),Math.max(o[0],l[0]),Math.min(o[1],l[1]),Math.max(o[1],l[1]),s),u=d.startRow;u<=d.endRow;u++)for(var m=d.startColumn;m<=d.endColumn;m++)s[u][m].classList.add("e-cell-select"),s[u][m].classList.add("e-multi-cells-select");e.classList.add("e-cell-select-end"),t.event.type&&t.event.preventDefault(),this.restoreRange(e)}}},a.prototype.destroy=function(){this.removeEventListener()},a}(),ru=function(){function a(){}return a}(),ba=function(){function a(){}return a.applyFormat=function(t,e,i,n,r,s,o,l){this.enterAction=n;var c=["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"];if(c.indexOf(e)>-1||s==="formatPainter"){e==="backgroundcolor"&&s===""&&(s="transparent");var p=new qe,d=new Pr(i,t),u=new ci,m=new Ge,f=p.getRange(t),g=f.startContainer.parentElement;if(f.collapsed&&!h(g)&&g.tagName==="A"&&(f.startOffset===g.textContent.length||f.startOffset===0)){var y=document.createTextNode("");f.startOffset===0?g.parentNode.insertBefore(y,g):h(g.nextSibling)?g.parentNode.appendChild(y):g.parentElement.insertBefore(y,g.nextSibling);var S=t.createRange();f.setStart(y,0),f.setEnd(y,0),f.collapse(!0),p.setRange(t,S)}if(x.userAgent.indexOf("Firefox")!==-1&&f.startContainer===f.endContainer&&!h(i)&&f.startContainer===i){for(var T=f.startContainer.childNodes,L=T[f.startOffset>0?f.startOffset-1:f.startOffset]||f.startContainer,w=f.endContainer.childNodes[f.endOffset>0?f.endOffset-1:f.endOffset]||f.endContainer,N=w.lastChild.nodeName==="BR"?h(w.lastChild.previousSibling)?w:w.lastChild.previousSibling:w.firstChild;!h(N)&&N.nodeName!=="#text"&&N.nodeName!=="IMG"&&N.nodeName!=="BR"&&N.nodeName!=="HR";)N=N.lastChild;p.setSelectionText(t,L,N,0,0),f=p.getRange(t)}var M=p.save(f,t),I=void 0,A=!1;i&&r&&i.nodeName!=="#text"&&(I=r.getTextNodes()),I&&I.length>0?A=!0:I=f.collapsed?p.getSelectionNodeCollection(f):p.getSelectionNodeCollectionBr(f);var V=!1,Q=!1,Z=!1,W=!1,$=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(e)>-1;if(!A&&f.collapsed){var te=m.getFormattedNode(f.startContainer,e,i),j=h(te)?null:te.getAttribute("style")===null?te.nodeName:te.nodeName+"[style='"+te.getAttribute("style")+"']";if(I.length>0)V=!0,f=u.GetCursorRange(t,f,I[0]);else if(f.startContainer.nodeType===3&&(f.startContainer.parentElement.childElementCount>0&&f.startOffset>0&&f.startContainer.parentElement.firstElementChild.tagName.toLowerCase()!=="br"||!h(te)&&te===f.startContainer.parentElement.closest(j)&&f.startContainer.parentElement.closest(j).textContent.replace(new RegExp("​","g"),"").trim().length!==0))V=!0,f=u.GetCursorRange(t,f,f.startContainer),I.push(f.startContainer);else{var J=this.insertCursorNode(t,p,f,m,u,e,s,i);p.endContainer=p.startContainer=p.getNodeArray(J,!0);var ne=J.nodeName==="BR"&&J.parentNode.childNodes;!h(ne)&&ne.length===1&&ne[0].nodeName==="BR"&&I.length===0?(p.setSelectionText(t,f.startContainer,f.endContainer,0,0),W=!0):p.endOffset=p.startOffset=1,J.nodeName==="BR"&&J.parentNode.textContent.length===0&&(W=!0)}}Z=A?!1:f.collapsed;for(var ae=!1,q=0;q<I.length;q++){var me=m.getFormattedNode(I[q],e,i);me===null&&(e==="subscript"?(me=m.getFormattedNode(I[q],"superscript",i),ae=me!==null):e==="superscript"&&(me=m.getFormattedNode(I[q],"subscript",i),ae=me!==null)),q===0&&me===null&&(Q=!0),me!==null&&(!Q||$)?I[q]=this.removeFormat(I,q,me,Z,A,Q,$,f,u,e,s,p,i,d):I[q]=this.insertFormat(t,I,q,me,Z,A,Q,$,f,u,e,s,l,d,i),A||(p=this.applySelection(I,p,u,q,V))}Qe()&&Ut(i,o),!W&&!A&&M.restore(),ae&&this.applyFormat(t,e,i,n)}},a.insertCursorNode=function(t,e,i,n,r,s,o,l){var c=e.getNodeCollection(i),p=new Pr(l,t),d=c.length>0?c.length>1&&i.startContainer===i.endContainer?this.getCursorFormat(n,c,s,l):o===""&&s==="fontsize"&&n.getFormattedNode(c[0],s,l)==null&&c[0].parentElement.nodeName==="SPAN"?c[0].parentElement:n.getFormattedNode(c[0],s,l):null,u=null;if(d){if(u=c[0],d.firstChild.textContent.charCodeAt(0)===8203&&d.firstChild.nodeType===3){var m=new RegExp("​","g"),f=void 0;if(u.nodeName!=="#text")for(var g=0;g<c.length;g++)c[g].nodeType===Node.TEXT_NODE&&(u=c[g]);d.firstChild===u?(u.textContent=d.parentElement&&(p.isBlockNode(d.parentElement)&&d.parentElement.textContent.length<=1?d.parentElement.childElementCount>1:d.childElementCount===0)&&(d.parentElement.textContent.length>1||d.parentElement.firstChild&&d.parentElement.firstChild.nodeType===1)?u.textContent:u.textContent.replace(m,""),f=u):(d.firstChild.textContent=d.firstChild.textContent.replace(m,""),f=d.firstChild);var y=void 0;if(f.textContent.length===0){if(!h(f.previousSibling))u=f.previousSibling,y=f.textContent.length-1,e.setCursorPoint(t,f,y);else if(!h(f.parentElement)&&f.parentElement.textContent.length===0){var S=document.createElement("BR");f.parentElement.appendChild(S),E(f),u=S,e.setCursorPoint(t,u.parentElement,0)}}}["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(s)>-1?(s==="fontcolor"?d.style.color=o:s==="fontname"?d.style.fontFamily=o:s==="fontsize"?d.style.fontSize=o:d.style.backgroundColor=o,u=d):ue.unwrap(d)}else{if(c.length>1&&i.startOffset>0&&c[0].firstElementChild&&c[0].firstElementChild.tagName.toLowerCase()==="br"&&(c[0].innerHTML=""),c.length===1&&i.startOffset===0&&(c[0].nodeName==="BR"||!h(c[0].nextSibling)&&c[0].nextSibling.nodeName==="BR")&&E(c[0].nodeName==="#text"?c[0].nextSibling:c[0]),!h(c[0].parentElement)&&Ge.inlineTags.indexOf(c[0].parentElement.tagName.toLowerCase())!==-1&&c[0].textContent.includes("​")){var T=this.GetFormatNode(s,o),L=c[0];if(s==="fontsize")for(var w=c[0];w;){var N=w.parentElement.textContent.trim()===c[0].textContent.trim(),M=w.parentElement;if(!p.isBlockNode(M)&&N&&!(M.nodeName==="SPAN"&&M.classList.contains("e-img-inner")))w=M;else break;c[0]=w}return this.applyStyles(c,0,T),L}u=this.getInsertNode(t,i,s,o).firstChild}return u},a.getCursorFormat=function(t,e,i,n){for(var r,s=0;s<e.length;s++)r=e[s].lastElementChild?e[s].lastElementChild:e[s];return i==="fontsize"&&t.getFormattedNode(r,i,n)==null&&r.parentElement.nodeName==="SPAN"?r.parentElement:t.getFormattedNode(r,i,n)},a.removeFormat=function(t,e,i,n,r,s,o,l,c,p,d,u,m,f){var g=null,y=l.startContainer.nodeName==="#text"?l.startContainer.textContent.substring(l.startOffset,l.startContainer.textContent.length):l.startContainer.textContent,S=t[e].textContent;if(l.startContainer===l.endContainer&&l.startOffset===0&&l.endOffset===l.startContainer.length){if(o&&!t[e].contains(i)&&t[e].nodeType===3&&t[e].textContent!==i.textContent){for(var I=t[e].textContent===t[e].wholeText,A=t[e],V=this.GetFormatNode(p,d);A&&A.textContent===A.parentElement.textContent;)A=A.parentElement;if(I&&i.textContent!==A.textContent){var Q=[],Z=this.getPriorityFormatNode(A,m);return Z&&Z.textContent===A.textContent&&(A=Z),Q.push(A),this.applyStyles(Q,0,V),t[e]}}}else{var T=[],L=t[e],w=L;do T.push(u.getIndex(L)),L=L.parentNode;while(L&&L!==i);if(t[e].nodeName!=="BR"&&(w.nodeName==="#text"&&w.textContent.includes("​")&&w.remove(),r||(L=g=n&&i.textContent.length-1===l.startOffset?c.SplitNode(l,i,!0):c.GetSpliceNode(l,i))),n){for(var M=g;M.firstChild!==null&&M.firstChild.nodeType!==3;null)M=M.firstChild;M.innerHTML="&#8203;",t[e]=M.firstChild}else{for(;L&&L.childNodes.length>0&&T.length-1>=0&&L.childNodes.length>T[T.length-1];)L=L.childNodes[T[T.length-1]],T.pop();if(t[e].nodeName!=="BR")if(L.nodeType===3&&!(n&&L.nodeValue===""))t[e]=L;else{var N=document.createElement("div");N.innerHTML="&#8203;",L.nodeType!==3?(L.insertBefore(N.firstChild,L.firstChild),t[e]=L.firstChild):(L.parentNode.insertBefore(N.firstChild,L),t[e]=L.previousSibling,L.parentNode.removeChild(L))}}}var W;p==="backgroundcolor"&&(W=i.style.fontSize);var $;if(p==="fontsize"){var te=b(t[e].parentElement,"span[style*=background-color]");h(te)||($=te.style.backgroundColor)}var j=i.getAttribute("style"),J=i.tagName,ne;if(J==="A"&&p==="underline")i.style.textDecoration="none",ne=[i];else if(Ge.inlineTags.indexOf(J.toLowerCase())!==-1&&o&&J.toLocaleLowerCase()!=="span"){var ae=i.style;ae.color&&p==="fontcolor"?i.nodeName==="A"?ae.color=d:ae.color="":ae.backgroundColor&&p==="backgroundcolor"?ae.backgroundColor="":ae.fontSize&&p==="fontsize"?ae.fontSize="":ae.fontFamily&&p==="fontname"&&(ae.fontFamily=""),i.getAttribute("style")===""&&i.removeAttribute("style"),ne=[i]}else{ne=ue.unwrap(i);var q=t[e].parentElement;!h(q)&&q.tagName.toLowerCase()!=="li"&&(q=b(q,"li")),!h(q)&&q.tagName.toLowerCase()==="li"&&q.textContent.trim()===t[e].textContent.trim()?p==="bold"?q.style.fontWeight="normal":p==="italic"&&(q.style.fontStyle="normal"):!h(q)&&q.tagName.toLowerCase()==="li"&&q.textContent.trim()!==t[e].textContent.trim()&&a.conCatenateTextNode(q,p,"","normal",d)}if(ne[0]&&!o)for(var A=ne[e]?ne[e]:ne[0],me=A;A&&A.parentElement&&A.parentElement!==m;A=A){var Pt=void 0;if(i.nodeName==="SPAN"?Pt=A.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&A.parentElement.getAttribute("style")===j:Pt=A.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase(),A.parentElement&&Pt&&(A.parentElement.childElementCount>1||l.startOffset>1)){if(me.parentElement&&me.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&l.startOffset===l.endOffset&&me.nodeType!==1&&!h(me.textContent)&&me.parentElement.childElementCount>1&&(l.setStart(me,0),l.setEnd(me,me.textContent.length),c.SplitNode(l,me.parentElement,!1)),A.parentElement.tagName.toLocaleLowerCase()==="span"&&i.style.textDecoration==="underline"&&A.parentElement.style.textDecoration!=="underline"){A=A.parentElement;continue}ue.unwrap(A.parentElement),A=!h(A.parentElement)&&!f.isBlockNode(A.parentElement)?me:A.parentElement}else A=A.parentElement}if(ne.length>0&&o&&!(p==="fontname"&&d===""||p==="fontsize"&&d==="")){for(var le=0;le<ne.length;le++)if(ne[le].nodeType!==3||ne[le].textContent&&ne[le].textContent.trim().length>0){ne[le]=ue.Wrap(ne[le],this.GetFormatNode(p,d,J,j));var q=t[e].parentElement;!h(q)&&q.tagName.toLowerCase()!=="li"&&(q=b(q,"li")),!h(q)&&q.tagName.toLowerCase()==="li"&&q.textContent.trim()===t[e].textContent.trim()&&p==="fontname"&&(q.style.fontFamily=d),!h(q)&&q.tagName.toLowerCase()==="li"&&q.textContent.trim()!==t[e].textContent.trim()&&a.conCatenateTextNode(q,p,q.textContent,p,d),ne[le].textContent===y&&(le===0?l.setStartBefore(ne[le]):le===ne.length-1&&l.setEndAfter(ne[le]))}var ke=t[e].parentElement;if(!h(W)&&W!==""&&(ke.style.fontSize=W),!h($)&&$!==""&&(ke.style.backgroundColor=$),p==="backgroundcolor"&&!h(W)&&W!==""&&ke.parentElement.innerHTML===ke.outerHTML){var _t=ke.parentElement;_t.parentElement.insertBefore(ke,_t),E(_t)}if(p==="fontsize"||p==="fontcolor"){for(var q=t[e].parentElement,kt=t[e].parentElement;!h(kt)&&kt.tagName.toLowerCase()!=="li";)kt=kt.parentElement,q=kt;for(var le=e,Dt="";le>=0&&!h(q)&&q.tagName.toLowerCase()==="li"&&q.contains(t[le])&&q.textContent.replace("/​/g","").trim().includes(t[le].textContent.trim());)Dt=" "+t[le].textContent.trim()+Dt,le--;var xt=!1,It=0,xa=!1;if(!h(q)&&q.childNodes)for(var Fr=0;Fr<q.childNodes.length;Fr++)q.childNodes[Fr].nodeName==="OL"&&(It++,xt=!0);if(!h(q)&&q.tagName.toLowerCase()==="li"&&q.textContent.split("​").join("").trim()===Dt.split("​").join("").trim())p==="fontsize"?q.style.fontSize=d:(q.style.color=d,q.style.textDecoration="inherit");else if(!h(q)&&q.tagName.toLowerCase()==="li"&&xt){if(xt&&It>0)for(var qr=0;qr<q.childNodes.length;qr++)t[e].textContent===q.childNodes[qr].textContent&&t[e].textContent===S&&q.textContent.replace("/​/g","").trim().includes(Dt.split("​").join("").trim())&&(xa=!0);if(xa){for(var Dn=0;Dn<q.childNodes.length;Dn++)q.childNodes[Dn].nodeName==="OL"&&(q.childNodes[Dn].style.fontSize="initial");p==="fontsize"?q.style.fontSize=d:(q.style.color=d,q.style.textDecoration="inherit")}}}}return t[e]},a.insertFormat=function(t,e,i,n,r,s,o,l,c,p,d,u,m,f,g){if(r)if(d!=="uppercase"&&d!=="lowercase"){var y=this.getInsertNode(t,c,d,u);e[i]=y.firstChild,p.position=1}else p.position=c.startOffset;else if(n===null&&o||l){if(!s&&e[i].nodeName!=="BR"&&(e[i]=p.GetSpliceNode(c,e[i]),e[i].textContent=p.TrimLineBreak(e[i].textContent)),d==="uppercase"||d==="lowercase")e[i].textContent=d==="uppercase"?e[i].textContent.toLocaleUpperCase():e[i].textContent.toLocaleLowerCase();else if(!(l===!0&&u==="")){var y=this.GetFormatNode(d,u);if(u==="formatPainter"||l){for(var S=e[i].parentElement,T=e[i].parentElement;!h(T)&&T.tagName.toLowerCase()!=="li";)T=T.parentElement,S=T;if(d==="fontcolor"||d==="fontname"||d==="fontsize"){var L=e[i].parentElement;if(!h(L)&&L.childNodes)for(var w=0;w<L.childNodes.length;w++){if(this.concatenateTextExcludingList(e,i)===e[i].textContent){var N=void 0;if(L.tagName==="LI"?N=L:L.closest("li")&&(N=L.closest("li")),!h(N))switch(d){case"fontcolor":N.style.color=u;break;case"fontname":N.style.fontFamily=u;break;case"fontsize":N.style.fontSize=u;break}}var M=L.childNodes[w];if(M.tagName==="OL"||M.tagName==="UL")switch(d){case"fontcolor":M.style.color="initial";break;case"fontname":M.style.fontFamily="initial";break;case"fontsize":M.style.fontSize="initial";break}}}if(!h(S)&&S.tagName.toLowerCase()==="li"&&S.textContent.trim()===e[i].textContent.trim()&&(d==="fontsize"?S.style.fontSize=u:d==="fontcolor"?(S.style.color=u,S.style.textDecoration="inherit"):d==="fontname"&&(S.style.fontFamily=u)),u==="formatPainter")return this.insertFormatPainterElem(e,i,c,p,m,f);var I=e[i],A=this.getPriorityFormatNode(I,g);if(!h(A)||l){var V=h(A)?I:A;if(V=!h(A)&&A.style.fontSize!==""?V.firstChild:V,h(A)||d==="fontsize")for(;V;){var Q=V.parentElement.textContent.trim()===e[i].textContent.trim(),Z=V.parentElement;if(!f.isBlockNode(Z)&&Q&&!(Z.nodeName==="SPAN"&&Z.classList.contains("e-img-inner")))V=Z;else break}var W=[];if(d==="fontcolor"){var $=b(e[i].parentElement,"A");!h($)&&$.firstChild.textContent.trim()===e[i].textContent.trim()&&(V=e[i])}e[i].textContent.trim()!==V.textContent.trim()&&(V=e[i]),W[0]=V,this.applyStyles(W,0,y),!h(S)&&S.tagName.toLowerCase()==="li"&&S.textContent.trim()!==e[i].textContent.trim()&&a.conCatenateTextNode(S,d,S.textContent,d,u)}else e[i]=this.applyStyles(e,i,y)}else{e[i]=this.applyStyles(e,i,y);var S=e[i].parentElement;!h(S)&&S.tagName.toLowerCase()!=="li"&&(S=b(S,"li")),!h(S)&&S.tagName.toLowerCase()==="li"&&S.textContent.trim()===e[i].textContent.trim()?d==="bold"?S.style.fontWeight="bold":d==="italic"&&(S.style.fontStyle="italic"):!h(S)&&S.tagName.toLowerCase()==="li"&&S.textContent.trim()!==e[i].textContent.trim()&&a.conCatenateTextNode(S,d,S.textContent,d)}}}else s||(e[i]=p.GetSpliceNode(c,e[i]));return e[i]},a.applyStyles=function(t,e,i){return t[e].nodeName==="BR"&&this.enterAction==="BR"||(t[e]=e===t.length-1||t[e].nodeName==="BR"?ue.Wrap(t[e],i):ue.WrapBefore(t[e],i,!0),t[e]=this.getChildNode(t[e],i)),t[e]},a.getPriorityFormatNode=function(t,e){var i=new Ge,n=i.getFormattedNode(t,"fontsize",e),r,s,o;return h(n)?(s=i.getFormattedNode(t,"backgroundcolor",e),h(s)?(o=i.getFormattedNode(t,"fontname",e),h(o)?(r=i.getFormattedNode(t,"fontcolor",e),h(r)?null:r):o):s):n},a.getInsertNode=function(t,e,i,n){var r=this.GetFormatNode(i,n);if(r.innerHTML="&#8203;",x.isIE){var s=t.createDocumentFragment();s.appendChild(r),e.insertNode(s)}else e.insertNode(r);return r},a.getChildNode=function(t,e){return t==null&&(e.innerHTML="&#8203;",t=e.firstChild),t},a.applySelection=function(t,e,i,n,r){return t.length===1&&!r?(e.startContainer=e.getNodeArray(t[n],!0),e.endContainer=e.startContainer,e.startOffset=0,e.endOffset=t[n].textContent.length):t.length===1&&r?(e.startContainer=e.getNodeArray(t[n],!0),e.endContainer=e.startContainer,e.startOffset=i.position,e.endOffset=i.position):n===0?(e.startContainer=e.getNodeArray(t[n],!0),e.startOffset=0):n===t.length-1&&(e.endContainer=e.getNodeArray(t[n],!1),e.endOffset=t[n].textContent.length),e},a.GetFormatNode=function(t,e,i,n){var r;switch(t){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.textDecoration="underline",r;case"strikethrough":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.textDecoration="line-through",r;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.color=e,r.style.textDecoration="inherit",r;case"fontname":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.fontFamily=e,r;case"fontsize":return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.fontSize=e,r;default:return r=document.createElement("span"),this.updateStyles(r,i,n),r.style.backgroundColor=e,r}},a.updateStyles=function(t,e,i){i!==null&&e==="SPAN"&&t.setAttribute("style",i)},a.insertFormatPainterElem=function(t,e,i,n,r,s){var o=s.isBlockNode(t[e].parentElement)?t[e]:t[e].parentElement;if(!s.isBlockNode(o))for(;o.textContent.trim()===o.parentElement.textContent.trim()&&!s.isBlockNode(o.parentElement);)o=o.parentElement;!h(o)&&o.nodeType===1&&!(o.classList.contains("e-rte-img-caption")||o.classList.contains("e-img-inner"))&&this.formatPainterCleanup(e,t,o,i,n,s);var l=r.element;if(!h(l)){var c=l.cloneNode(!0),p=c.querySelectorAll(r.lastChild.nodeName),d=void 0;p.length>0?d=p[p.length-1]:!h(c)&&c.nodeName===r.lastChild.nodeName&&(d=c),d.textContent=t[e].textContent;var u=d.childNodes[0];t[e]=ue.Wrap(t[e],c),t[e].textContent="",t[e]=u}return t[e]},a.formatPainterCleanup=function(t,e,i,n,r,s){var o=["A","AUDIO","IMG","VIDEO","IFRAME"];if(t===0&&i.textContent.trim()!==e[t].textContent.trim()){r.SplitNode(n,i,!0);for(var l=e[t].parentElement.childNodes,c=0;c<l.length;c++)if(l[c].textContent.trim()===e[c].textContent.trim()){i.parentNode.insertBefore(l[c],i);break}for(var p=i.parentElement.childNodes,d=0;d<p.length;d++)(p[d].textContent.trim()===""||p[d].textContent.length===0)&&p[d].textContent.charCodeAt(0)!==160&&E(p[d])}else if(i.textContent.trim()!==e[t].textContent.trim())i.parentElement.insertBefore(e[t],i);else for(;!h(i)&&i.nodeType!==3&&!s.isBlockNode(i);){for(var u=void 0,c=0;c<i.childNodes.length;c++){var m=i.childNodes[c];m.textContent.trim().length!==0&&m.nodeType!==3&&(u=i.childNodes[c])}o.indexOf(i.tagName)===-1&&ue.unwrap(i),i=u}},a.concatenateTextExcludingList=function(t,e){var i="",n=t[e].nodeName==="#text"?b(t[e].parentElement,"li"):b(t[e],"li");if(!h(n))for(var r=0;r<n.childNodes.length;r++){var s=n.childNodes[r];(s.nodeType===3||s.nodeType===1&&s.tagName!=="OL"&&s.tagName!=="UL")&&(i+=s.textContent)}return i},a.conCatenateTextNode=function(t,e,i,n,r){var s="",o="",l="",c="";switch(e){case"bold":t.querySelectorAll("strong").forEach(function(p){s=s+p.textContent}),s===i&&(t.style.fontWeight=n);break;case"italic":t.querySelectorAll("em").forEach(function(p){s=s+p.textContent}),s===i&&(t.style.fontStyle=n);break;case"fontcolor":t.querySelectorAll("span").forEach(function(p){o=p.style.color,o===r&&(s=s+p.textContent)}),s===i&&(t.style.color=o,t.style.textDecoration="inherit");break;case"fontsize":t.querySelectorAll("span").forEach(function(p){l=p.style.getPropertyValue("font-size"),l===r&&(s=s+p.textContent)}),s===i&&(t.style.fontSize=l);break;case"fontname":t.querySelectorAll("span").forEach(function(p){c=p.style.getPropertyValue("font-family"),c=c.replace(/ /g,""),c===r&&(s=s+p.textContent)}),s===i&&(t.style.fontFamily=c);break}},a.enterAction="P",a}(),su=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(ia,this.applySelection,this),this.parent.observer.on(Ee,this.keyDownHandler,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(ia,this.applySelection),this.parent.observer.off(Ee,this.keyDownHandler),this.parent.observer.off(ie,this.destroy)},a.prototype.keyDownHandler=function(t){var e=["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"];(t.event.ctrlKey||t.event.metaKey)&&e.indexOf(t.event.action)>-1&&(t.event.preventDefault(),ba.applyFormat(this.parent.currentDocument,t.event.action,this.parent.editableElement,t.enterAction,this.parent.tableCellSelection),this.callBack(t,t.event.action))},a.prototype.applySelection=function(t){ba.applyFormat(this.parent.currentDocument,t.subCommand.toLocaleLowerCase(),this.parent.editableElement,t.enterAction,this.parent.tableCellSelection,t.value,t.selector),this.callBack(t,t.subCommand)},a.prototype.callBack=function(t,e){t.callBack&&t.callBack({requestType:e,event:t.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.destroy=function(){this.removeEventListener()},a}(),ou=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(na,this.applyHtml,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(na,this.applyHtml),this.parent.observer.off(ie,this.destroy)},a.prototype.applyHtml=function(t){if(We.Insert(this.parent.currentDocument,t.value,this.parent.editableElement,!0,t.enterAction),t.subCommand==="pasteCleanup"){var e=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(e),n=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),r=[].slice.call(n);t.callBack({requestType:t.subCommand,editorMode:"HTML",elements:i,imgElem:r})}else t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.destroy=function(){this.removeEventListener()},a}(),au=function(){function a(){}return a.clear=function(t,e,i,n,r){this.domNode=new Pr(e,t),this.defaultTag=i==="P"?this.defaultTag:"div";var s=new qe,o=new ci,l=s.getRange(t),c=l.collapsed?s.getSelectionNodeCollection(l):s.getSelectionNodeCollectionBr(l),p=s.save(l,t),d=!1;l.collapsed&&r!=="ClearFormat"&&(d=!0,l=o.GetCursorRange(t,l,c[0]));var u=l.collapsed;if(!u){var m=void 0;if(c.length>0&&c[0].nodeName==="BR"&&b(c[0],"table")?m=o.GetSpliceNode(l,b(c[0],"table")):m=o.GetSpliceNode(l,c[c.length>1&&c[0].nodeName==="IMG"?1:0]),c.length===1)s.setSelectionContents(t,m),l=s.getRange(t);else if(c.length>1){for(var f=1,g=c[c.length-f];c.length<=f&&c[c.length-f].nodeName==="BR";)f++,g=c[c.length-f];var y=o.GetSpliceNode(l,g);s.setSelectionText(t,m,y,0,y.nodeType===3?y.textContent.length:y.childNodes.length),l=s.getRange(t)}var S=s.getNodeCollection(l),T=S.slice();this.clearInlines(s.getSelectionNodes(T),T,s.getRange(t),o,e),this.reSelection(t,p,S),l=s.getRange(t),S=s.getNodeCollection(l);var L=S.slice();this.clearBlocks(t,L,e,o,s),Qe()&&Ut(e,n),this.reSelection(t,p,S)}d&&s.setCursorPoint(t,l.endContainer,l.endOffset)},a.reSelection=function(t,e,i){var n=e.getInsertNodes(i);e.startContainer=e.getNodeArray(n[0],!0,t),e.startOffset=0,e.endContainer=e.getNodeArray(n[n.length-1],!1,t);var r=n[n.length-1];e.endOffset=r.nodeType===3?r.textContent.length:r.childNodes.length,e.restore()},a.clearBlocks=function(t,e,i,n,r){for(var s=[],o=0;o<e.length;o++)this.BLOCK_TAGS.indexOf(e[o].nodeName.toLocaleLowerCase())>-1&&s.indexOf(e[o])===-1?s.push(e[o]):this.BLOCK_TAGS.indexOf(e[o].parentNode.nodeName.toLocaleLowerCase())>-1&&s.indexOf(e[o].parentNode)===-1&&i!==e[o].parentNode&&s.push(e[o].parentNode);s=this.spliceParent(s,e)[0],s=this.removeParent(s),this.unWrap(t,s,n,r)},a.spliceParent=function(t,e){for(var i=0;i<t.length;i++)for(var n=t[i].childNodes.length,r=0;r<n;r++)if(e.indexOf(t[i].childNodes[r])>0&&t[i].childNodes[r].childNodes.length>0&&(e=this.spliceParent([t[i].childNodes[r]],e)[1]),e.indexOf(t[i].childNodes[r])<=-1&&t[i].childNodes[r].textContent.trim()!==""){for(var s=0;s<n;s++)e.indexOf(t[i].childNodes[s])>-1&&e.splice(e.indexOf(t[i].childNodes[s]),1);r=t[i].childNodes.length;var o=t.indexOf(t[i].parentNode),l=e.indexOf(t[i].parentNode);o>-1&&t.splice(o,1),l>-1&&e.splice(l,1);var c=e.indexOf(t[i]);c>-1&&e.splice(c,1),t.splice(i,1),i--}return[t,e]},a.removeChild=function(t,e){var i=e.childNodes.length;if(i>0)for(var n=0;n<i;n++)t.indexOf(e.childNodes[n])>-1&&(t=this.removeChild(t,e.childNodes[n]),t.splice(t.indexOf(e.childNodes[n]),1));return t},a.removeParent=function(t){for(var e=0;e<t.length;e++)t.indexOf(t[e].parentNode)>-1&&(t=this.removeChild(t,t[e]),t.splice(e,1),e--);return t},a.unWrap=function(t,e,i,n){for(var r=0;r<e.length;r++)if(this.NONVALID_TAGS.indexOf(e[r].nodeName.toLowerCase())>-1&&e[r].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(e[r].parentNode.nodeName.toLowerCase())>-1&&(n.setSelectionText(t,e[r],e[r],0,e[r].childNodes.length),ue.unwrap(i.GetSpliceNode(n.getRange(t),e[r].parentNode))),e[r].nodeName.toLocaleLowerCase()!=="p"){this.NONVALID_PARENT_TAGS.indexOf(e[r].nodeName.toLowerCase())<0&&e[r].parentNode.nodeName.toLocaleLowerCase()!=="p"&&!((e[r].nodeName.toLocaleLowerCase()==="blockquote"||e[r].nodeName.toLocaleLowerCase()==="li")&&this.IGNORE_PARENT_TAGS.indexOf(e[r].childNodes[0].nodeName.toLocaleLowerCase())>-1)&&!(e[r].childNodes.length===1&&e[r].childNodes[0].nodeName.toLocaleLowerCase()==="p")&&ue.Wrap(e[r],t.createElement(this.defaultTag));var s=ue.unwrap(e[r]);s.length===1&&s[0].parentNode.nodeName.toLocaleLowerCase()==="p"&&(ue.Wrap(e[r],t.createElement(this.defaultTag)),ue.unwrap(e[r]));for(var o=0;o<s.length;o++)if(this.NONVALID_TAGS.indexOf(s[o].nodeName.toLowerCase())>-1)this.unWrap(t,[s[o]],i,n);else if(this.BLOCK_TAGS.indexOf(s[o].nodeName.toLocaleLowerCase())>-1&&s[o].nodeName.toLocaleLowerCase()!=="p"){var l=this.removeParent([s[o]]);this.unWrap(t,l,i,n)}else this.BLOCK_TAGS.indexOf(s[o].nodeName.toLocaleLowerCase())>-1&&s[o].parentNode.nodeName.toLocaleLowerCase()===s[o].nodeName.toLocaleLowerCase()?ue.unwrap(s[o]):this.BLOCK_TAGS.indexOf(s[o].nodeName.toLocaleLowerCase())>-1&&s[o].nodeName.toLocaleLowerCase()==="p"&&(ue.Wrap(s[o],t.createElement(this.defaultTag)),ue.unwrap(s[o]))}else ue.Wrap(e[r],t.createElement(this.defaultTag)),ue.unwrap(e[r])},a.clearInlines=function(t,e,i,n,r){for(var s=0;s<t.length;s++){for(var o=t[s],l=void 0;!this.domNode.isBlockNode(o)&&o.parentElement&&!o.parentElement.classList.contains("e-img-inner");)l=o,o=o.parentElement;l&&Ge.inlineTags.indexOf(l.nodeName.toLocaleLowerCase())>-1&&(n.GetSpliceNode(i,l),this.removeInlineParent(l))}},a.removeInlineParent=function(t){for(var e=ue.unwrap(t),i=0;i<e.length;i++)e[i].parentNode.childNodes.length===1&&!e[i].parentNode.classList.contains("e-img-inner")&&Ge.inlineTags.indexOf(e[i].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(e[i].parentNode):Ge.inlineTags.indexOf(e[i].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(e[i])},a.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","ul"],a.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],a.IGNORE_PARENT_TAGS=["ul","ol","table"],a.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],a.defaultTag="p",a}(),lu=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(sa,this.applyClear,this),this.parent.observer.on(Ee,this.onKeyDown,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(sa,this.applyClear),this.parent.observer.off(Ee,this.onKeyDown),this.parent.observer.off(ie,this.destroy)},a.prototype.onKeyDown=function(t){switch(t.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:t.callBack,enterAction:t.enterAction}),t.event.preventDefault();break}},a.prototype.applyClear=function(t){t.subCommand==="ClearFormat"&&(au.clear(this.parent.currentDocument,this.parent.editableElement,t.enterAction,t.selector,t.subCommand),t.callBack&&t.callBack({requestType:t.subCommand,event:t.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},a.prototype.destroy=function(){this.removeEventListener()},a}(),hu=function(){function a(t,e){this.undoRedoStack=[],this.parent=t,this.undoRedoSteps=h(e)?30:e.undoRedoSteps,this.undoRedoTimer=h(e)?300:e.undoRedoTimer,this.addEventListener()}return a.prototype.addEventListener=function(){this.debounceListener=$l(this.keyUp,this.undoRedoTimer),this.parent.observer.on(hi,this.debounceListener,this),this.parent.observer.on(Ee,this.keyDown,this),this.parent.observer.on(aa,this.onAction,this),this.parent.observer.on(Tn,this.onPropertyChanged,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.onPropertyChanged=function(t){for(var e=0,i=Object.keys(t.newProp);e<i.length;e++){var n=i[e];switch(n){case"undoRedoSteps":this.undoRedoSteps=t.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=t.newProp.undoRedoTimer;break}}},a.prototype.removeEventListener=function(){this.parent.observer.off(hi,this.keyUp),this.parent.observer.off(Ee,this.keyDown),this.parent.observer.off(aa,this.onAction),this.parent.observer.off(Tn,this.onPropertyChanged),this.parent.observer.off(ie,this.destroy),this.debounceListener=null},a.prototype.onAction=function(t){t.subCommand==="Undo"?this.undo(t):this.redo(t)},a.prototype.destroy=function(){this.removeEventListener(),this.element=null,this.steps=null,this.undoRedoStack=[],this.undoRedoSteps=null,this.undoRedoTimer=null},a.prototype.keyDown=function(t){var e=t.event,i=this;switch(e.action){case"undo":e.preventDefault(),i.undo(t);break;case"redo":e.preventDefault(),i.redo(t);break}},a.prototype.keyUp=function(t){t.event.keyCode!==17&&!t.event.ctrlKey&&this.saveData(t)},a.prototype.getTextContentFromFragment=function(t){for(var e="",i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];n.nodeType===Node.TEXT_NODE?e+=n.textContent:n.nodeType===Node.ELEMENT_NODE&&(e+=this.getTextContentFromFragment(n))}return e},a.prototype.isElementStructureEqual=function(t,e){if(t.childNodes.length!==e.childNodes.length)return!1;for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i],r=e.childNodes[i];if(!n||!r||n.nodeType!==r.nodeType||n.outerHTML!==r.outerHTML)return!1}return!0},a.prototype.saveData=function(t){if(this.parent.currentDocument){for(var e=new qe().getRange(this.parent.currentDocument),i=this.parent.editableElement===e.startContainer.parentElement?e.startContainer.parentElement:e.startContainer,n=i.childNodes.length-1;n>=0;n--)!h(i.childNodes[n])&&i.childNodes[n].nodeName==="#text"&&i.childNodes[n].textContent.length===0&&i.childNodes[n].nodeName!=="IMG"&&i.childNodes[n].nodeName!=="BR"&&i.childNodes[n].nodeName&&E(i.childNodes[n]);e=new qe().getRange(this.parent.currentDocument);for(var r=new qe().save(e,this.parent.currentDocument),s=this.parent.editableElement.cloneNode(!0),o=document.createDocumentFragment();s.firstChild;)o.appendChild(s.firstChild);var l={text:o,range:r};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),!(this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===e.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===r.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===r.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===r.range.startContainer&&this.getTextContentFromFragment(this.undoRedoStack[this.undoRedoStack.length-1].text).trim()===this.getTextContentFromFragment(l.text).trim()&&this.isElementStructureEqual(this.undoRedoStack[this.undoRedoStack.length-1].text,l.text))&&(this.undoRedoStack.push(l),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),t&&t.callBack&&t.callBack())}},a.prototype.undo=function(t){if(this.steps>0){var e=this.undoRedoStack[this.steps-1].range,i=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML="",this.parent.editableElement.appendChild(i.cloneNode(!0)),this.parent.editableElement.focus(),Rr(this.parent.currentDocument,this.parent.editableElement),Qe()&&Ut(this.parent.editableElement,t.selector),e.restore(),this.steps--,t.callBack&&t.callBack({requestType:"Undo",editorMode:"HTML",range:e,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:t.event})}},a.prototype.redo=function(t){if(this.undoRedoStack[this.steps+1]!=null){var e=this.undoRedoStack[this.steps+1].range,i=this.undoRedoStack[this.steps+1].text;this.parent.editableElement.innerHTML="",this.parent.editableElement.appendChild(i.cloneNode(!0)),this.parent.editableElement.focus(),Rr(this.parent.currentDocument,this.parent.editableElement),Qe()&&Ut(this.parent.editableElement,t.selector),e.restore(),this.steps++,t.callBack&&t.callBack({requestType:"Redo",editorMode:"HTML",range:e,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:t.event})}},a.prototype.getUndoStatus=function(){var t={undo:!1,redo:!1};return this.steps>0&&(t.undo=!0),this.undoRedoStack[this.steps+1]!=null&&(t.redo=!0),t},a}(),cu=function(){function a(t){this.olData=["decimal","decimal-leading-zero","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"],this.ulData=["disc","square","circle","disc","square","circle"],this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"],this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.borderStyle=["border-top","border-right","border-bottom","border-left"],this.upperRomanNumber=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX"],this.lowerRomanNumber=["i","ii","iii","iv","v","vi","vii","viii","ix","x","xi","xii","xiii","xiv","xv","xvi","xvii","xviii","xix","xx"],this.lowerGreekNumber=["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","τ","υ","φ","χ","ψ","ω"],this.removableElements=["o:p","style","w:sdt"],this.listContents=[],this.cropImageDimensions=[],this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(ca,this.wordCleanup,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(ca,this.wordCleanup),this.parent.observer.off(ie,this.destroy)},a.prototype.wordCleanup=function(t){var e=h(t.allowedStylePropertiesArray)?[]:t.allowedStylePropertiesArray,i=[],n=t.args.clipboardData.getData("text/HTML"),r=t.args.clipboardData.getData("text/rtf"),s=B("p");s.setAttribute("id","MSWord-Content"),s.innerHTML=n,this.addDoubleBr(s);var o=/class='?Mso|style='[^ ]*\bmso-/i,l=/class="?Mso|style="[^ ]*\bmso-/i,c=/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi,p=/style='mso-width-source:/i,d=this.findSource(s);o.test(n)||l.test(n)||c.test(n)||p.test(n)?(n=n.replace(/<img[^>]+>/i,""),this.addListClass(s),i=this.cleanUp(s,i),!h(i[0])&&i[0].parentElement.tagName!=="UL"&&i[0].parentElement.tagName!=="OL"&&this.listConverter(i),this.imageConversion(s,r),this.cleanList(s,"UL"),this.cleanList(s,"OL"),this.styleCorrection(s,e),this.removingComments(s),this.removeUnwantedElements(s),this.removeEmptyElements(s),this.removeEmptyAnchorTag(s),this.breakLineAddition(s),this.processMargin(s),this.removeClassName(s),p.test(n)&&this.addTableBorderClass(s),t.callBack(s.innerHTML,this.cropImageDimensions,d)):t.callBack(s.innerHTML,null,d)},a.prototype.addDoubleBr=function(t){var e=t.querySelector(".Apple-interchange-newline");if(!h(e)&&x.userAgent.indexOf("Chrome")!==-1&&e.parentElement.nodeName==="P"&&t!==e.parentElement)for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(n.nodeType===Node.COMMENT_NODE&&n.nodeValue.includes("StartFragment")){var r=document.createElement("p");r.innerHTML="<br>";var s=e.parentElement.style.cssText,o=r.getAttribute("style")||"",l=o+s;r.setAttribute("style",l),t.insertBefore(r,n.nextSibling),E(e);break}}},a.prototype.cleanList=function(t,e){for(var i=t.querySelectorAll(e+" div"),n=i.length-1;n>=0;n--){for(var r=i[n].parentNode;i[n].firstChild;)r.insertBefore(i[n].firstChild,i[n]);var s=this.findClosestListElem(i[n]);s&&this.insertAfter(i[n],s)}},a.prototype.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},a.prototype.findClosestListElem=function(t){for(var e;!h(t);)t=!h(t.closest("ul"))&&t.tagName!=="UL"?t.closest("ul"):t.tagName!=="OL"?t.closest("ol"):null,e=h(t)?e:t;return e},a.prototype.addListClass=function(t){for(var e=t.querySelectorAll("*"),i=0;i<e.length;i++)!h(e[i].getAttribute("style"))&&e[i].getAttribute("style").replace(/ /g,"").replace(`
`,"").indexOf("mso-list:l")>=0&&e[i].className.toLowerCase().indexOf("msolistparagraph")===-1&&e[i].tagName.charAt(0)!=="H"&&e[i].tagName!=="LI"&&e[i].tagName!=="OL"&&e[i].tagName!=="UL"&&e[i].classList.add("msolistparagraph")},a.prototype.addTableBorderClass=function(t){for(var e=t.querySelectorAll("table"),i=!1,n=0;n<e.length;n++){for(var r=0;r<this.borderStyle.length;r++)if(e[n].innerHTML.indexOf(this.borderStyle[r])>=0){i=!0;break}i&&(e[n].classList.add("e-rte-table-border"),i=!1)}},a.prototype.imageConversion=function(t,e){this.checkVShape(t);for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++)!h(i[n].getAttribute("v:shapes"))&&i[n].getAttribute("v:shapes").indexOf("Picture")<0&&i[n].getAttribute("v:shapes").indexOf("圖片")<0&&i[n].getAttribute("v:shapes").indexOf("Grafik")<0&&i[n].getAttribute("v:shapes").toLowerCase().indexOf("image")<0&&i[n].getAttribute("v:shapes").indexOf("Graphic")<0&&i[n].getAttribute("v:shapes").indexOf("_x0000_s")<0&&i[n].getAttribute("v:shapes").indexOf("_x0000_i")<0&&i[n].getAttribute("v:shapes").indexOf("img1")<0&&i[n].classList.add("e-rte-image-unsupported"),i[n].removeAttribute("v:shapes");i=t.querySelectorAll("img");var r=[],s=[],o=[],l=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(i.length>0){for(var n=0;n<i.length;n++)r.push(i[n].getAttribute("src")),o.push(i[n].getAttribute("src").split("/")[i[n].getAttribute("src").split("/").length-1].split(".")[0]);for(var c=this.hexConversion(e),n=0;n<c.length;n++)s.push({base64Data:h(c[n].hex)?null:this.convertToBase64(c[n]),isCroppedImage:c[n].isCroppedImage}),c[n].isCroppedImage&&this.cropImageDimensions.push({goalWidth:c[n].goalWidth,goalHeight:c[n].goalHeight,cropLength:c[n].cropLength,cropTop:c[n].cropTop,cropR:c[n].cropR,cropB:c[n].cropB});i=t.querySelectorAll("img:not(.e-rte-image-unsupported");for(var n=0;n<i.length;n++)r[n].match(l)?i[n].setAttribute("src",r[n]):(!h(s[n])&&!h(s[n].base64Data)?i[n].setAttribute("src",s[n].base64Data):(i[n].removeAttribute("src"),i[n].classList.add("e-rte-image-unsupported")),!h(s[n])&&s[n].isCroppedImage&&i[n].classList.add("e-img-cropped")),i[n].setAttribute("id","msWordImg-"+o[n]);i=t.querySelectorAll(".e-rte-image-unsupported");for(var n=0;n<i.length;n++)i[n].removeAttribute("src")}},a.prototype.checkVShape=function(t){for(var e=t.querySelectorAll("*"),i=0;i<e.length;i++)switch(e[i].nodeName){case"V:SHAPETYPE":E(e[i]);break;case"V:SHAPE":if(e[i].firstElementChild.nodeName==="V:IMAGEDATA"){var n=e[i].firstElementChild.getAttribute("src"),r=B("img");r.setAttribute("src",n),e[i].parentElement.insertBefore(r,e[i]),E(e[i])}break}},a.prototype.convertToBase64=function(t){var e=this.conHexStringToBytes(t.hex),i=this.conBytesToBase64(e),n=t.type?"data:"+t.type+";base64,"+i:null;return n},a.prototype.conBytesToBase64=function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=t.length,r=0;r<n;r+=3){var s=t.slice(r,r+3),o=s.length,l=[];if(o<3)for(var c=o;c<3;c++)s[c]=0;l[0]=(s[0]&252)>>2,l[1]=(s[0]&3)<<4|s[1]>>4,l[2]=(s[1]&15)<<2|(s[2]&192)>>6,l[3]=s[2]&63;for(var c=0;c<4;c++)c<=o?e+=i.charAt(l[c]):e+="="}return e},a.prototype.conHexStringToBytes=function(t){for(var e=[],i=t.length/2,n=0;n<i;n++)e.push(parseInt(t.substr(n*2,2),16));return e},a.prototype.hexConversion=function(t){var e=RegExp,i=new e("\\{\\\\pict[\\s\\S]+?\\\\bliptag-?\\d+(\\\\blipupi-?\\d+)?(\\{\\\\\\*\\\\blipuid\\s?[\\da-fA-F]+)?[\\s\\}]*?"),n=new e("(?:("+i.source+"))([\\da-fA-F\\s]+)\\}","g"),r=t.match(n),s,o=[];if(!h(r)){for(var l=0;l<r.length;l++)if(!(r[l].indexOf("fIsBullet")!==-1&&r[l].indexOf("wzName")===-1)){var c=!1,p=0,d=0,u=0,m=0,f=0,g=0;if(i.test(r[l])){if(r[l].indexOf("\\pngblip")!==-1)s="image/png";else if(r[l].indexOf("\\jpegblip")!==-1)s="image/jpeg";else if(r[l].indexOf("\\emfblip")!==-1)s=null;else continue;c=!!(this.extractCropValue("cropl",r[l])>0&&this.extractCropValue("cropt",r[l])>0||this.extractCropValue("cropr",r[l])>0||this.extractCropValue("cropb",r[l])),c&&(p=this.extractCropValue("wgoal",r[l]),d=this.extractCropValue("hgoal",r[l]),u=this.extractCropValue("cropl",r[l]),m=this.extractCropValue("cropt",r[l]),f=this.extractCropValue("cropr",r[l]),g=this.extractCropValue("cropb",r[l])),o.push({hex:s?r[l].replace(i,"").replace(/[^\da-fA-F]/g,""):null,type:s,isCroppedImage:c,goalWidth:p,goalHeight:d,cropLength:u,cropTop:m,cropR:f,cropB:g})}}}return o},a.prototype.extractCropValue=function(t,e){var i=RegExp,n=new i("\\\\pic"+t+"(\\-?\\d+)\\\\").exec(e.replace(/\r\n\\/g,"\\").replace(/\n/g,"\\"))[1];return parseInt(n,10)},a.prototype.removeClassName=function(t){for(var e=t.querySelectorAll("*[class]:not(.e-img-cropped):not(.e-rte-image-unsupported)"),i=0;i<e.length;i++)e[i].removeAttribute("class")},a.prototype.breakLineAddition=function(t){for(var e=t.querySelectorAll("*"),i=0;i<e.length;i++)if(e[i].children.length===0&&e[i].innerHTML==="&nbsp;"&&e[i].innerHTML==="&nbsp;"&&!e[i].closest("li")&&!e[i].closest("td")&&(e[i].nodeName!=="SPAN"||e[i].nodeName==="SPAN"&&h(e[i].previousElementSibling)&&h(e[i].nextElementSibling))){var n=this.findDetachElem(e[i]),r=B("br"),s=n.textContent.length>0&&n.textContent.match(/\u00a0/g)&&n.textContent.match(/\u00a0/g).length>0;!s&&!h(n.parentElement)&&(n.parentElement.insertBefore(r,n),E(n))}},a.prototype.findDetachElem=function(t){var e;return!h(t.parentElement)&&t.parentElement.textContent.trim()===""&&t.parentElement.tagName!=="TD"&&h(t.parentElement.querySelector("img"))?e=this.findDetachElem(t.parentElement):e=t,e},a.prototype.removeUnwantedElements=function(t){var e=t.querySelector("style");h(e)||E(e);for(var i=t.innerHTML,n=0;n<this.removableElements.length;n++){var r=RegExp,s=new r("<"+this.removableElements[n]+"\\s*[^>]*>","g"),o=new r("</"+this.removableElements[n]+">","g");i=i.replace(s,""),i=i.replace(o,"")}t.innerHTML=i,t.querySelectorAll(":empty")},a.prototype.findDetachEmptyElem=function(t){var e;if(h(t.parentElement))e=null;else{var i=t.parentElement.textContent.length>0&&t.parentElement.textContent.match(/\u00a0/g)&&t.parentElement.textContent.match(/\u00a0/g).length>0;!i&&t.parentElement.textContent.trim()===""&&t.parentElement.getAttribute("id")!=="MSWord-Content"&&!this.hasParentWithClass(t,"MsoListParagraph")&&h(t.parentElement.querySelector("img"))?e=this.findDetachEmptyElem(t.parentElement):e=t}return e},a.prototype.hasParentWithClass=function(t,e){for(var i=t.parentElement;!h(i);){if(i.classList.contains(e))return!0;i=i.parentElement}return!1},a.prototype.removeEmptyElements=function(t){for(var e=t.querySelectorAll(":empty"),i=0;i<e.length;i++){!h(e[i].closest("td"))&&!h(e[i].closest("td").querySelector(".MsoNormal"))&&(e[i].innerHTML="-");var n=!0;if(e[i].tagName==="DIV"&&(n=e[i].style.borderBottom==="none"||e[i].style.borderBottom===""),e[i].tagName!=="IMG"&&e[i].tagName!=="BR"&&e[i].tagName!=="IFRAME"&&e[i].tagName!=="TD"&&e[i].tagName!=="HR"&&n){var r=this.findDetachEmptyElem(e[i]);h(r)||E(r)}}},a.prototype.styleCorrection=function(t,e){var i=t.querySelectorAll("style"),n=[];if(i.length>0){h(i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi))?i.length>1&&(n=i[1].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi)):n=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi);var r=h(n)?null:this.findStyleObject(n);if(!h(r)){var s=Object.keys(r),o=s.map(function(N){return r[""+N]});o=this.removeUnwantedStyle(o,e),this.filterStyles(t,e);for(var l=void 0,c=!1,p=/^(p|div|li)\.(1|10|11)$/,d=0;d<s.length;d++){if(s[d].split(".")[0]==="")l=t.getElementsByClassName(s[d].split(".")[1]),c=!0;else{if(s[d].split(".").length===1&&s[d].split(".")[0].indexOf("@")>=0||p.test(s[d]))continue;s[d].split(".").length===1&&s[d].split(".")[0].indexOf("@")<0?l=t.getElementsByTagName(s[d]):l=t.querySelectorAll(s[d])}for(var u=0;u<l.length;u++)if(!(l[u].closest("li")&&s[d]==="p")){var m=l[u].getAttribute("style");if(!h(m)&&m.trim()!==""){var f=o[d].split(";");if(!c)for(var g=0;g<f.length;g++)m.indexOf(f[g].split(":")[0])>=0&&(f.splice(g,1),g--);var y=m+f.join(";")+";";l[u].setAttribute("style",y)}else o[d]=o[d].replace(/text-indent:-(.*?)(?=;|$)/gm,""),l[u].setAttribute("style",o[d])}c=!1}for(var S=["MsoListParagraphCxSpFirst","MsoListParagraphCxSpMiddle","MsoListParagraphCxSpLast"],d=0;d<S.length;d++)if(s.indexOf("li."+S[d])>-1)for(var T=t.querySelectorAll("ol."+S[d]+", ul."+S[d]),u=0;u<T.length;u++){var m=T[u].getAttribute("style");if(!h(m)&&m.trim()!==""&&T[u].style.marginLeft!==""){for(var f=o[s.indexOf("li."+S[d])].split(";"),g=0;g<f.length;g++)if("margin-left".indexOf(f[g].split(":")[0])>=0&&!h(f[g].split(":")[1])&&f[g].split(":")[1].indexOf("in")>=0&&T[u].style.marginLeft.indexOf("in")>=0){var L=parseFloat(f[g].split(":")[1].split("in")[0]),w=parseFloat(T[u].style.marginLeft.split("in")[0]);T[u].style.marginLeft=w-L+"in"}}}}}},a.prototype.filterStyles=function(t,e){for(var i=t.querySelectorAll("*[style]"),n=0;n<i.length;n++){for(var r=i[n].getAttribute("style").split(";"),s="",o=0;o<r.length;o++)e.indexOf(r[o].split(":")[0].trim())>=0&&(s+=r[o]+";");i[n].setAttribute("style",s)}},a.prototype.removeUnwantedStyle=function(t,e){for(var i=0;i<t.length;i++){var n=t[i].split(";");t[i]="";for(var r=0;r<n.length;r++)e.indexOf(n[r].split(":")[0])>=0&&(t[i]+=n[r]+";")}return t},a.prototype.findStyleObject=function(t){for(var e={},i=0;i<t.length;i++){var n=t[i],r=n.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),s=n.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");r=r.replace(/^[\s]|[\s]$/gm,""),s=s.replace(/^[\s]|[\s]$/gm,""),r=r.replace(/\n|\r|\n\r/g,""),s=s.replace(/\n|\r|\n\r/g,"");for(var o=r.split(", "),l=0;l<o.length;l++)e[o[l]]=s}return e},a.prototype.removingComments=function(t){var e=t.innerHTML;e=e.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=e},a.prototype.cleanUp=function(t,e){for(var i=[],n,r=t.querySelectorAll("*"),s=0;s<r.length;s++){if(this.ignorableNodes.indexOf(r[s].nodeName)===-1||r[s].nodeType===3&&r[s].textContent.trim()===""){i.push(r[s]);continue}else r[s].className&&r[s].className.toLowerCase().indexOf("msolistparagraph")!==-1&&!h(r[s].getAttribute("style"))&&r[s].getAttribute("style").indexOf("mso-list:")>=0&&(r[s].className.indexOf("MsoListParagraphCxSpFirst")>=0&&e.length>0&&e[e.length-1]!==null&&e.push(null),e.push(r[s]));n&&this.blockNode.indexOf(r[s].nodeName.toLowerCase())!==-1&&!(r[s].className&&r[s].className.toLowerCase().indexOf("msolistparagraph")!==-1&&!h(r[s].getAttribute("style"))&&r[s].getAttribute("style").indexOf("mso-list:")>=0)&&e.push(null),this.blockNode.indexOf(r[s].nodeName.toLowerCase())!==-1&&(r[s].className&&r[s].className.toLowerCase().indexOf("msolistparagraph")!==-1&&!h(r[s].getAttribute("style"))&&r[s].getAttribute("style").indexOf("mso-list:")>=0?n=!0:n=!1)}return e.length&&e[e.length-1]!==null&&e.push(null),e},a.prototype.listConverter=function(t){for(var e,i=[],n,r=[],s="",o,l="",c=0;c<t.length;c++){if(t[c]===null){i.push({content:this.makeConversion(r),node:t[c-1]}),r=[];continue}if(t[c].getAttribute("style")&&t[c].getAttribute("style").indexOf("mso-outline-level")!==-1&&t[c].setAttribute("style",t[c].getAttribute("style").replace("mso-outline-level","mso-outline")),s=t[c].getAttribute("style"),s&&s.indexOf("level")!==-1?e=parseInt(s.charAt(s.indexOf("level")+5),null):e=1,s&&s.indexOf("mso-list:")!==-1){var p=void 0;if(s.match(/mso-list:[^;]+;?/)){var d=s.replace(new RegExp(`
`,"g"),"").split(" ").join("");p=d.match(/mso-list:[^;]+;?/)[0].split(":l"),n=h(p)?null:parseInt(p[1].split("level")[0],10)}else n=null}this.listContents=[],this.getListContent(t[c]);var u=void 0,m=void 0,f=void 0,g=void 0;if(!h(this.listContents[0])){if(u=this.listContents[0].trim().length>1?"ol":"ul",m=this.getlistStyleType(this.listContents[0],u),u==="ol"&&(c===0||t[c-1]===null)){var y=this.listContents[0].split(".")[0],S=["A","a","I","i","α","1","01","1-"];S.indexOf(y)===-1&&(m==="decimal"?isNaN(parseInt(y,10))||(f=parseInt(y,10)):m==="upper-alpha"?f=y.split(".")[0].charCodeAt(0)-64:m==="lower-alpha"?f=y.split(".")[0].charCodeAt(0)-96:m==="upper-roman"?f=this.upperRomanNumber.indexOf(this.listContents[0].split(".")[0])+1:m==="lower-roman"?f=this.lowerRomanNumber.indexOf(this.listContents[0].split(".")[0])+1:m==="lower-greek"&&(f=this.lowerGreekNumber.indexOf(this.listContents[0].split(".")[0])+1))}t[c].style.marginLeft!==""&&(g=t[c].style.marginLeft);for(var T=[],L=1;L<this.listContents.length;L++)T.push(this.listContents[L]);var w=void 0;h(t[c].className)||(w=t[c].className),h(t[c].getAttribute("style"))||(t[c].setAttribute("style",t[c].getAttribute("style").replace("text-align:start;","")),t[c].style.textIndent="",l=t[c].getAttribute("style")),r.push({listType:u,content:T,nestedLevel:e,listFormatOverride:n,class:w,listStyle:l,listStyleTypeName:m,start:f,styleMarginLeft:g})}}for(o=t.shift();o;){for(var N=[],M=0;M<i.length;M++)if(i[M].node===o){for(var I=0;I<i[M].content.childNodes.length;I++)N.push(i[M].content.childNodes[I]);for(var I=0;I<N.length;I++)o.parentElement.insertBefore(N[I],o);break}o.remove(),o=t.shift(),o||(o=t.shift())}},a.prototype.getlistStyleType=function(t,e){var i;if(e==="ol"){var n=t.split(".")[0].charCodeAt(0);switch(!0){case this.upperRomanNumber.indexOf(t.split(".")[0])>-1:i="upper-roman";break;case this.lowerRomanNumber.indexOf(t.split(".")[0])>-1:i="lower-roman";break;case this.lowerGreekNumber.indexOf(t.split(".")[0])>-1:i="lower-greek";break;case(n>64&&n<91):i="upper-alpha";break;case(n>96&&n<123):i="lower-alpha";break;case(t.split(".")[0].length>1&&t.split(".")[0][0]==="0"&&!isNaN(Number(t.split(".")[0]))):i="decimal-leading-zero";break;default:i="decimal";break}}else switch(t.split(".")[0]){case"o":i="circle";break;case"§":i="square";break;default:i="disc";break}return i},a.prototype.makeConversion=function(t){for(var e=B("div"),i,n=1,r,s=0,o,l=t[0].listFormatOverride,c=0;c<t.length;c++){for(var p=["MsoListParagraphCxSpFirst","MsoListParagraphCxSpMiddle","MsoListParagraphCxSpLast"],d=!1,u=0;u<p.length;u++)if(p[u].indexOf(t[c].class)>=0){d=!0;break}!h(r)&&c!==0&&t[c-1].listType!==t[c].listType&&!d&&(r=null);var m=B("p",{className:"MsoNoSpacing"});if(m.innerHTML=t[c].content.join(" "),t[c].nestedLevel===1&&(s===0||l!==t[c].listFormatOverride)&&t[c].content)e.appendChild(i=B(t[c].listType,{className:t[c].class})),r=B("li"),r.appendChild(m),i.appendChild(r),i.setAttribute("level",t[c].nestedLevel.toString()),t[c].class!=="msolistparagraph"?i.style.marginLeft=t[c].styleMarginLeft:k([i],"marginLeftIgnore"),i.style.listStyleType=t[c].listStyleTypeName;else if(t[c].nestedLevel===n&&l===t[c].listFormatOverride)!h(r)&&!h(r.parentElement)&&r.parentElement.tagName.toLowerCase()===t[c].listType?(r.parentElement.appendChild(r=B("li")),r.appendChild(m)):h(r)?(i=B(t[c].listType),i.style.listStyleType=t[c].listStyleTypeName,r=B("li"),r.appendChild(m),i.appendChild(r),i.setAttribute("level",t[c].nestedLevel.toString()),e.appendChild(i)):(i=B(t[c].listType),i.style.listStyleType=t[c].listStyleTypeName,r.parentElement.parentElement.appendChild(i),r=B("li"),r.appendChild(m),i.appendChild(r),i.setAttribute("level",t[c].nestedLevel.toString()));else if(t[c].nestedLevel>n)if(h(r))if(t[c].nestedLevel>n&&d){var g=B(t[c].listType);r=B("li"),g.appendChild(r),g.style.listStyleType="none";for(var f=0;f<t[c].nestedLevel-1;f++)r.appendChild(i=B(t[c].listType)),r=B("li"),i.appendChild(r),i.style.listStyleType="none";r.appendChild(m),e.appendChild(g),i.setAttribute("level",t[c].nestedLevel.toString()),i.style.listStyleType=t[c].listStyleTypeName}else e.appendChild(i=B(t[c].listType)),r=B("li"),r.appendChild(m),i.appendChild(r),i.setAttribute("level",t[c].nestedLevel.toString()),t[c].class!=="msolistparagraph"?i.style.marginLeft=t[c].styleMarginLeft:k([i],"marginLeftIgnore"),i.style.listStyleType=t[c].listStyleTypeName;else{for(var f=0;f<t[c].nestedLevel-n;f++)r.appendChild(i=B(t[c].listType)),r=B("li"),f!==t[c].nestedLevel-n-1&&t[c].nestedLevel-n>1&&(r.style.listStyleType="none"),i.appendChild(r);r.appendChild(m),i.setAttribute("level",t[c].nestedLevel.toString()),i.style.listStyleType=t[c].listStyleTypeName}else if(t[c].nestedLevel===1)e.lastChild.tagName.toLowerCase()===t[c].listType?i=e.lastChild:(e.appendChild(i=B(t[c].listType)),i.style.listStyleType=t[c].listStyleTypeName),r=B("li"),r.appendChild(m),i.appendChild(r),i.setAttribute("level",t[c].nestedLevel.toString());else for(o=r;o.parentElement;)if(o=o.parentElement,o.attributes.getNamedItem("level")){if(parseInt(o.attributes.getNamedItem("level").textContent,10)===t[c].nestedLevel&&l===t[c].listFormatOverride){r=B("li"),r.appendChild(m),o.appendChild(r);break}else if(parseInt(o.attributes.getNamedItem("level").textContent,null)===t[c].nestedLevel&&l!==t[c].listFormatOverride){if(i=B(t[c].listType),r=B("li"),i.appendChild(r),t[c].nestedLevel>1)for(var y=0;y<t[c].nestedLevel-1;y++)r.appendChild(i=B(t[c].listType)),r=B("li"),i.appendChild(r),i.style.listStyleType="none";r.appendChild(m),o.appendChild(i),i.setAttribute("level",t[c].nestedLevel.toString()),i.style.listStyleType=t[c].listStyleTypeName;break}else if(t[c].nestedLevel>parseInt(o.attributes.getNamedItem("level").textContent,10)){o.appendChild(i=B(t[c].listType)),r=B("li"),r.appendChild(m),i.appendChild(r),i.setAttribute("level",t[c].nestedLevel.toString()),i.style.listStyleType=t[c].listStyleTypeName;break}}r.setAttribute("class",t[c].class),r.setAttribute("style",h(t[c].listStyle)?"":t[c].listStyle),n=t[c].nestedLevel,l=t[c].listFormatOverride,s++,h(t[c].start&&t[c].start!==1&&t[c].listType==="ol")||i.setAttribute("start",t[c].start.toString())}return e},a.prototype.getListContent=function(t){var e="",i=t.firstElementChild;if(i.textContent.trim()===""&&!h(i.firstElementChild)&&i.firstElementChild.nodeName==="IMG")e=t.innerHTML.trim(),this.listContents.push(""),this.listContents.push(e);else if(i.childNodes.length>0){for(var n=i.querySelectorAll('[style*="mso-list"]'),r=0;r<n.length;r++)n[r].setAttribute("style",n[r].getAttribute("style").replace(/\n/g,""));var s=i.querySelector('span[style="mso-list:Ignore"]');h(s)||(this.listContents.push(s.textContent.trim()),E(s),this.removingComments(t),this.removeUnwantedElements(t))}this.listContents.push(t.innerHTML)},a.prototype.processMargin=function(t){var e=t.querySelectorAll("li");if(e.length>0)for(var i=0;i<e.length;i++)!h(e[i].style.marginLeft)&&!e[i].parentElement.classList.contains("marginLeftIgnore")&&(e[i].style.marginLeft="");var n=t.querySelectorAll("table");if(n.length>0)for(var i=0;i<n.length;i++)!h(n[i].style.marginLeft)&&n[i].style.marginLeft.indexOf("-")>=0&&(n[i].style.marginLeft="");var r=t.querySelectorAll(".marginLeftIgnore li");if(r.length>0){for(var i=0;i<r.length;i++)if(!h(r[i].style.marginLeft)&&r[i].style.marginLeft!==""){var s=r[i].style.marginLeft,o=parseFloat(s.split("in")[0]),l=o-.5;r[i].style.marginLeft=l.toString()+"in"}}},a.prototype.removeEmptyAnchorTag=function(t){for(var e=t.querySelectorAll("a:not([href])"),i=e.length-1;i>=0;i--){for(var n=e[i].parentNode;e[i].firstChild;)n.insertBefore(e[i].firstChild,e[i]);n.removeChild(e[i])}},a.prototype.findSource=function(t){for(var e=t.querySelectorAll("meta"),i=0;i<e.length;i++){var n=e[i],r=n.getAttribute("content"),s=n.getAttribute("name");if(s&&s.toLowerCase().indexOf("generator")>=0&&r&&r.toLowerCase().indexOf("microsoft")>=0){for(var o=0;o<Os.length;o++)if(r.toLowerCase().indexOf(Os[o])>=0)return Os[o]}}return"html"},a.prototype.destroy=function(){this.removeEventListener()},a}(),pu=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(ra,this.insertText,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(ra,this.insertText),this.parent.observer.off(ie,this.destroy)},a.prototype.insertText=function(t){var e=document.createTextNode(t.value);We.Insert(this.parent.currentDocument,e,this.parent.editableElement),t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.destroy=function(){this.removeEventListener()},a}(),du=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(ma,this.emojiInsert,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.removeEventListener=function(){this.parent.observer.off(ma,this.emojiInsert),this.parent.observer.off(ie,this.destroy)},a.prototype.emojiInsert=function(t){for(var e=document.createTextNode(t.value),i=this.parent.currentDocument.getSelection(),n=i.getRangeAt(0),r=n.startOffset,s=r-1;s>=r-15;s--){var o=i.focusNode.textContent.substring(s-1,s),l=/:$/.test(o);if(l){this.beforeApplyFormat(!0);break}}var c=/:$/.test(i.focusNode.textContent.charAt(r-1)),p=i.focusNode.textContent.charAt(r-2),d=/\s/.test(p);c&&(d||i.focusOffset===1)&&this.beforeApplyFormat(!0),We.Insert(this.parent.currentDocument,e,this.parent.editableElement),t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.beforeApplyFormat=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection.getNodeCollection(e)[0],n=!(i.parentElement.innerHTML.replace(/&nbsp;|<br>/g,"").trim()===":"||i.textContent.trim().indexOf("/")===0),r=i;if(n&&t)for(;r!==this.parent.editableElement;)r=r.parentElement;for(var s=e.startOffset;this.parent.nodeSelection.getRange(document).toString().indexOf(":")===-1;)this.parent.nodeSelection.setSelectionText(document,i,i,s,e.endOffset),s--;var o=this.parent.nodeSelection.getRange(this.parent.currentDocument),l=this.parent.nodeCutter.GetSpliceNode(o,i);l.parentNode.removeChild(l)},a.prototype.destroy=function(){this.removeEventListener()},a}(),uu=function(){function a(t,e){this.INVALID_TAGS=["A","AUDIO","IMG","VIDEO","IFRAME"],this.parent=t,this.settings=e,this.addEventListener(),this.setDeniedFormats()}return a.prototype.addEventListener=function(){this.parent.observer.on(fa,this.actionHandler,this),this.parent.observer.on(Tn,this.onPropertyChanged,this),this.parent.observer.on(ie,this.destroy,this)},a.prototype.onPropertyChanged=function(t){t&&t.module==="formatPainter"&&(h(t.newProp.formatPainterSettings.allowedFormats)||(this.settings.allowedFormats=t.newProp.formatPainterSettings.allowedFormats),h(t.newProp.formatPainterSettings.deniedFormats)||(this.settings.deniedFormats=t.newProp.formatPainterSettings.deniedFormats,this.setDeniedFormats()))},a.prototype.removeEventListener=function(){this.parent.observer.off(fa,this.actionHandler),this.parent.observer.off(Tn,this.onPropertyChanged),this.parent.observer.off(ie,this.destroy)},a.prototype.destroy=function(){this.removeEventListener(),this.INVALID_TAGS=null,this.copyCollection=null,this.deniedFormatsCollection=null,this.newElem=null,this.newElemLastChild=null,this.settings=null,this.parent=null},a.prototype.actionHandler=function(t){if(this.settings.allowedContext=["Text","List","Table"],!h(t)&&!h(t.item)&&!h(t.item.formatPainterAction)){switch(t.item.formatPainterAction){case"format-copy":this.copyAction();break;case"format-paste":this.pasteAction();break;case"escape":this.escapeAction();break}this.callBack(t)}},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:"FormatPainter",action:t.item.formatPainterAction,event:t.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.generateElement=function(){var t=this.copyCollection.slice();t.reverse();for(var e=t.length,i=B("div",{className:"e-format-paste-wrapper"}),n,r=0;r<e;r++){var s=t[r],o=s.attrs,l=s.className,c=s.styles,p=s.tagName,d=B(p);l!==""&&(d.className=l);for(var u=0;u<o.length;u++){var m=o[u].name,f=o[u].value;d.setAttribute(m,f)}for(var g=0;g<c.length;g++){var m=c[g].property,f=c[g].value,y=c[g].priority;d.style.setProperty(m,f,y)}i.childElementCount===0?(i.append(d),n=d):(n.append(d),n=d)}for(var S=this.removeDeniedFormats(i),T=S;T;)T.firstChild===null?(n=T,T=void 0):T=T.firstChild;this.newElem=S,this.newElemLastChild=n},a.prototype.pasteAction=function(){if(h(this.copyCollection)||this.copyCollection.length===0){this.paintPlainTextFormat();return}this.insertFormatNode(this.newElem,this.newElemLastChild)},a.prototype.removeDeniedFormats=function(t){if(!h(this.deniedFormatsCollection)&&this.deniedFormatsCollection.length>0)for(var e=this.deniedFormatsCollection,i=e.length,n=0;n<i;n++){var r=e[n].tag;if(e[n].tag)for(var s=t.querySelectorAll(r),o=0;o<s.length;o++){if(e[n].classes.length>0){for(var l=e[n].classes,c=l.length,p=0;p<c;p++)s[o].classList.contains(l[p])&&O([s[o]],l[p].trim());s[o].classList.length===0&&s[o].removeAttribute("class")}if(e[n].styles.length>0){for(var d=e[n].styles,u=d.length,p=0;p<u;p++)s[o].style.removeProperty(d[p].trim());s[o].style.length===0&&s[o].removeAttribute("style")}if(e[n].attributes.length>0)for(var m=e[n].attributes,f=m.length,p=0;p<f;p++)s[o].removeAttribute(m[p].trim())}}return t.firstElementChild},a.prototype.copyAction=function(){var t=[],e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection,n=e.collapsed?i.getSelectionNodeCollection(e):i.getSelectionNodeCollectionBr(e);if(!(n.length===0&&i.getSelectionNodeCollectionBr(e).length===0)){n=n.length===0?i.getSelectionNodeCollectionBr(e):n;for(var r=n[0].parentElement,s=this.findCurrentContext(r),o=this.settings.allowedFormats.indexOf(";")>-1?this.settings.allowedFormats.split(";"):[this.settings.allowedFormats],l=0;l<o.length;l++)o[l]=o[l].trim();var c=this.getRangeParentElem(s,r),p=c[0],d=c[1];if(s===null&&(s=d),!h(s)&&this.settings.allowedContext.indexOf(s)>-1){e.startContainer.nodeName==="#text"&&(r=e.startContainer.parentElement);var u=r;do{if(o.indexOf(r.nodeName.toLowerCase())>-1){for(var m=r.attributes,f=[],l=0;l<m.length;l++)m[l].name!=="class"&&m[l].name!=="style"&&f.push(m[l]);for(var g=r.className,y=r.style,S=[],l=0;l<y.length;l++){var T=y[l],L=y.getPropertyValue(T),w=y.getPropertyPriority(T);S.push({property:T,value:L,priority:w})}t.push({attrs:f,className:g,styles:S,tagName:r.nodeName})}if(p===r?r=void 0:h(r.parentElement)||(r=r.parentElement),u===r)break}while(!h(r)||r===this.parent.editableElement);this.copyCollection=t}this.generateElement()}},a.prototype.getRangeParentElem=function(t,e){var i=e,n;switch(i.nodeType===3&&(i=i.parentElement),t){case"Table":n=b(i,"td"),h(n)&&(n=b(i,"th"));break;case"List":n=b(i,"li");break;case"Text":n=b(i,"p");break}if(h(n)){var r=this.getNearestBlockParentElement(e);!h(r)&&r!=="UL"&&r!=="OL"&&r!=="LI"&&(n=b(i,r),t="Text")}return t==="List"&&(n=n.parentElement),[n,t]},a.prototype.getNearestBlockParentElement=function(t){var e=t;for(e.nodeType===3&&(e=e.parentNode);e&&e!==this.parent.editableElement;){if(!h(e)&&this.isBlockElement(e))return e.nodeName;e=e.parentNode}return null},a.prototype.isBlockElement=function(t){var e=["P","DIV","UL","OL","LI","H1","H2","H3","H4","H5","H6","ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","FIGCAPTION","FIGURE","FOOTER","HEADER","HR","MAIN","NAV","SECTION","SUMMARY","PRE"];return e.indexOf(t.nodeName)>-1},a.prototype.escapeAction=function(){this.copyCollection=[]},a.prototype.paintPlainTextFormat=function(){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),e=this.parent.nodeSelection,i=t.collapsed?e.getSelectionNodeCollection(t):e.getSelectionNodeCollectionBr(t),n;if(i.length>1)for(var r=0;r<i.length;r++)n=this.validateELementTag(i[r]);else n=this.validateELementTag(t.startContainer)&&this.validateELementTag(t.endContainer);n||this.parent.execCommand("Clear","ClearFormat",null,null)},a.prototype.validateELementTag=function(t){return t.nodeType===3&&(t=t.parentElement),this.INVALID_TAGS.indexOf(t.tagName)>-1},a.prototype.findCurrentContext=function(t){var e=b(t,"p"),i=b(t,"li");return e&&!i?"Text":b(t,"li")?!h(e)&&!h(i)&&e.textContent.trim()!==i.textContent.trim()?"Text":"List":b(t,"td")||b(t,"tr")||b(t,"th")?"Table":null},a.prototype.insertFormatNode=function(t,e){var i=t.cloneNode(!0);if(!this.isBlockElement(t)){var n=B("P");n.appendChild(t),i=n.cloneNode(!0)}for(var r=this.parent.editableElement,s=this.parent.currentDocument,o=i.firstChild,l;o;)if(this.isBlockElement(o))o=o.firstChild;else{l=o.parentNode.removeChild(o);break}var c={element:l,lastChild:e};ba.applyFormat(s,null,r,"P",null,"formatPainter",null,c);var p=this.parent.nodeSelection.getRange(s),d=p.collapsed,u=this.parent.domNode.blockNodes(),m=this.isListCopied();if(m)for(var f=0;f<u.length;f++)b(u[f],"li")&&(u[f]=b(u[f],"li"));var g=!1;u.length===1&&(g=u[0].textContent.trim()===p.toString().trim()),(this.isBlockElement(i)&&d||u.length>1||g)&&this.insertBlockNode(i,p,s,u)},a.prototype.isListCopied=function(){for(var t=!1,e=0;e<this.copyCollection.length;e++)if(this.copyCollection[e].tagName==="OL"||this.copyCollection[e].tagName==="UL"){t=!0;break}return t},a.prototype.insertBlockNode=function(t,e,i,n){var r=this.parent.nodeSelection,s=r.save(e,i);this.parent.domNode.setMarker(s);var o,l,c=!1;(t.nodeName==="UL"||t.nodeName==="OL")&&(l=t.cloneNode(!0),o=l.firstChild);for(var p=h(l)?t:t.firstChild,d=0;d<n.length;d++)if(!(this.INVALID_TAGS.indexOf(n[d].nodeName)>-1||n[d].querySelectorAll("img,audio,video,iframe").length>0)){for(var u=p.cloneNode(!1);n[d].firstChild;)n[d].textContent.trim().length!==0?u.appendChild(n[d].firstChild):n[d].removeChild(n[d].firstChild);if(n[d].nodeName==="TD"||n[d].nodeName==="TH")if(h(l)){n[d].appendChild(u);continue}else if(d===0&&!h(l)){n[d].appendChild(l),l.appendChild(u);continue}else{n[d].appendChild(u);continue}if(h(l)||(c=this.isSameListType(t,n[d])),u.nodeName==="LI"&&!c?this.insertNewList(e,n,d,l,u):c?this.insertSameList(n,d,l,u):n[d].parentNode.replaceChild(u,n[d]),u.nodeName!=="LI"&&(u.parentElement.nodeName==="OL"||u.parentElement.nodeName==="UL")){var m=u.parentElement;if(this.parent.nodeCutter.SplitNode(e,m,!0),h(m.previousElementSibling))m.parentElement.prepend(u);else if(m.previousElementSibling.after(u),u.childNodes.length>1)for(var f=0;f<u.childNodes.length;f++){var g=u.childNodes[f];(g.nodeName==="OL"||g.nodeName==="UL")&&u.after(g)}}}h(o)||E(o),this.cleanEmptyLists();var y=this.parent.domNode.saveMarker(s);y.restore()},a.prototype.insertNewList=function(t,e,i,n,r){if(i===0){var s=e[i].nodeName;e[i]=e[i].parentNode.replaceChild(n,e[i]);var o=s==="LI"?n.parentElement:n;if(this.parent.nodeCutter.SplitNode(t,o,!0),e[i].nodeName==="LI"&&!h(o))n.append(r),h(o.parentNode)||o.parentNode.insertBefore(n,o);else if(h(o))n.append(r);else if(!h(o.previousElementSibling)&&o.previousElementSibling.nodeName===n.nodeName){var l=o.previousElementSibling;for(l.append(r);l.firstChild;)n.append(l.firstChild)}else if(!h(o.nextElementSibling)&&o.nextElementSibling.nodeName===n.nodeName){var l=o.nextElementSibling;for(l.prepend(r);l.firstChild;)n.append(l.firstChild)}else n.append(r)}else n.append(r);this.detachEmptyBlockNodes(e[i])},a.prototype.insertSameList=function(t,e,i,n){if(e===0){if(!h(t[e].parentNode)&&(t[e].parentNode.nodeName==="UL"||t[e].parentNode.nodeName==="OL")){if(t.length===1){for(;n.firstChild;)t[e].append(n.firstChild);for(var r=0;r<t[e].parentNode.childNodes.length;r++){var s=t[e].parentNode.childNodes[r];i.append(s.cloneNode(!0))}}else i.append(n);t[e].parentNode.parentNode.replaceChild(i,t[e].parentNode)}}else i.append(n);this.detachEmptyBlockNodes(t[e])},a.prototype.isSameListType=function(t,e){var i=!1,n=b(e,"ol, ul");return!h(n)&&n.querySelectorAll("li").length>0&&(n.nodeName===t.nodeName?i=!0:i=!1),i},a.prototype.cleanEmptyLists=function(){for(var t=this.parent.editableElement.querySelectorAll("ol, ul"),e=0;e<t.length;e++)t[e].textContent.trim()===""&&E(t[e])},a.prototype.setDeniedFormats=function(){var t=[];if(!(h(this.settings)||h(this.settings.deniedFormats))){for(var e=this.settings.deniedFormats.indexOf(";")>-1?this.settings.deniedFormats.split(";"):[this.settings.deniedFormats],i=e.length,n=0;n<i;n++){var r=e[n];if(r!==""){r.trim();var s=this.makeDeniedFormatsCollection(r);h(s)||t.push(s)}}this.deniedFormatsCollection=t}},a.prototype.detachEmptyBlockNodes=function(t){!h(t)&&t.textContent.trim()===""&&E(t)},a.prototype.makeDeniedFormatsCollection=function(t){var e=t.indexOf("("),i=t.indexOf(")"),n=t.indexOf("["),r=t.indexOf("]"),s=t.indexOf("{"),o=t.indexOf("}"),l=[],c="",p="",d="",u=[],m=[],f=[];e>-1&&i>-1&&(l=t.substring(e+1,i).split(" "),u=l[0].split(")")[0].split(",")),n>-1&&r>-1&&(c=t.substring(n+1,r),m=c.split(",")),s>-1&&o>-1&&(p=t.substring(s+1,o),f=p.split(","));var g=[e,n,s];g=g.filter(function(T){return T>-1});var y=g.length,S;return y===1?S=g[0]:y===2?S=Math.min(g[0],g[1]):y===3&&(S=Math.min(g[0],g[1],g[2])),d=t.substring(0,S),d=d.trim(),{tag:d,styles:f,classes:u,attributes:m}},a}(),fu=function(){function a(t){this.currentDocument=t.document,this.editableElement=t.editableElement,this.nodeSelection=new qe,this.nodeCutter=new ci,this.domNode=new Pr(this.editableElement,this.currentDocument),this.observer=new Xh(this),this.listObj=new Vd(this),this.formatObj=new _d(this),this.alignmentObj=new Qd(this),this.indentsObj=new Kd(this),this.linkObj=new Wd(this),this.imgObj=new eu(this),this.audioObj=new tu(this),this.videoObj=new iu(this),this.selectionObj=new su(this),this.inserthtmlObj=new ou(this),this.insertTextObj=new pu(this),this.clearObj=new lu(this),this.tableObj=new nu(this),this.undoRedoManager=new hu(this,t.options),this.msWordPaste=new cu(this),this.formatPainterEditor=new uu(this,t.formatPainterSettings),this.emojiPickerObj=new du(this),this.tableCellSelection=new vh(this.editableElement,this.currentDocument),this.wireEvents()}return a.prototype.wireEvents=function(){this.observer.on(oa,this.editorKeyDown,this),this.observer.on(ki,this.editorKeyUp,this),this.observer.on(ki,this.editorKeyUp,this),this.observer.on(Ar,this.onPropertyChanged,this),this.observer.on(pa,this.onWordPaste,this),this.observer.on(da,this.onBegin,this),this.observer.on(Hl,this.editorMouseDown,this),this.observer.on(Fl,this.destroy,this)},a.prototype.unwireEvents=function(){this.observer.off(oa,this.editorKeyDown),this.observer.off(ki,this.editorKeyUp),this.observer.off(ki,this.editorKeyUp),this.observer.off(Ar,this.onPropertyChanged),this.observer.off(pa,this.onWordPaste),this.observer.off(da,this.onBegin),this.observer.off(Hl,this.editorMouseDown),this.observer.off(Fl,this.destroy)},a.prototype.onWordPaste=function(t){this.observer.notify(ca,t)},a.prototype.onPropertyChanged=function(t){this.observer.notify(Tn,t)},a.prototype.editorKeyDown=function(t){this.observer.notify(Ee,t)},a.prototype.editorKeyUp=function(t){this.observer.notify(hi,t)},a.prototype.onBegin=function(t){this.observer.notify(ua,t)},a.prototype.execCommand=function(t,e,i,n,r,s,o,l){switch(t.toLowerCase()){case"lists":this.observer.notify(ha,{subCommand:e,event:i,callBack:n,selector:o,item:s,enterAction:l});break;case"formats":this.observer.notify(la,{subCommand:e,event:i,callBack:n,selector:o,exeValue:s,enterAction:l});break;case"alignments":this.observer.notify(ea,{subCommand:e,event:i,callBack:n,selector:o,value:s,enterAction:l});break;case"indents":this.observer.notify(ta,{subCommand:e,event:i,callBack:n,selector:o,enterAction:l});break;case"links":this.observer.notify(Vo,{command:t,value:e,item:s,event:i,callBack:n});break;case"files":this.observer.notify(Br,{command:t,value:"Image",item:s,event:i,callBack:n,selector:o});break;case"images":this.observer.notify(Br,{command:t,value:e,item:s,event:i,callBack:n,selector:o});break;case"audios":this.observer.notify(jo,{command:t,value:e,item:s,event:i,callBack:n,selector:o});break;case"videos":this.observer.notify(zo,{command:t,value:e,item:s,event:i,callBack:n,selector:o});break;case"table":switch(e.toString().toLocaleLowerCase()){case"createtable":this.observer.notify(Uo,{item:s,event:i,callBack:n,enterAction:l});break;case"insertrowbefore":case"insertrowafter":this.observer.notify(_o,{item:s,event:i,callBack:n});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify(Wo,{item:s,event:i,callBack:n});break;case"deleterow":this.observer.notify(Qo,{item:s,event:i,callBack:n});break;case"deletecolumn":this.observer.notify(Ko,{item:s,event:i,callBack:n});break;case"tableremove":this.observer.notify(Go,{item:s,event:i,callBack:n});break;case"tableheader":this.observer.notify(Xo,{item:s,event:i,callBack:n});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify(Yo,{item:s,event:i,callBack:n});break;case"merge":this.observer.notify($o,{item:s,event:i,callBack:n});break;case"horizontalsplit":this.observer.notify(Zo,{item:s,event:i,callBack:n});break;case"verticalsplit":this.observer.notify(Jo,{item:s,event:i,callBack:n});break}break;case"font":case"style":case"effects":case"casing":this.observer.notify(ia,{subCommand:e,event:i,callBack:n,value:r,selector:o,enterAction:l});break;case"inserthtml":this.observer.notify(na,{subCommand:e,callBack:n,value:r,enterAction:l});break;case"inserttext":this.observer.notify(ra,{subCommand:e,callBack:n,value:r});break;case"clear":this.observer.notify(sa,{subCommand:e,event:i,callBack:n,selector:o,enterAction:l});break;case"actions":this.observer.notify(aa,{subCommand:e,event:i,callBack:n,selector:o});break;case"formatpainter":this.observer.notify(fa,{item:s,subCommand:e,event:i,callBack:n});break;case"emojipicker":this.observer.notify(ma,{item:s,subCommand:e,value:r,event:i,callBack:n})}},a.prototype.editorMouseDown=function(t){t.args.detail===3&&this.tripleClickSelection(t.args)},a.prototype.tripleClickSelection=function(t){var e=this.nodeSelection.getRange(this.currentDocument),i=this.nodeSelection.get(this.currentDocument);if(i.rangeCount>0&&i.toString()!==""){var n=this.getParentBlockNode(e.startContainer),r=this.getParentBlockNode(e.endContainer);if(n&&r&&n===r){var s=this.currentDocument.createRange(),o=this.getFirstTextNode(n),l=this.getLastTextNode(r);o&&l&&(s.setStart(o,0),s.setEnd(l,l.textContent.length),this.nodeSelection.setRange(this.currentDocument,s),t.preventDefault())}}},a.prototype.getParentBlockNode=function(t){var e=this.currentDocument.createTreeWalker(this.editableElement,NodeFilter.SHOW_ELEMENT,{acceptNode:function(n){var r=window.getComputedStyle(n).display;return r.indexOf("inline")<0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});e.currentNode=t;var i=e.parentNode();return i},a.prototype.getLastTextNode=function(t){for(var e=this.currentDocument.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),i=null,n=e.nextNode();n;)i=n,n=e.nextNode();return i},a.prototype.getFirstTextNode=function(t){var e=this.currentDocument.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),i=e.nextNode();return i},a.prototype.destroy=function(){this.unwireEvents(),this.observer.notify(ie),this.editableElement&&(this.editableElement=null),this.currentDocument=null,this.nodeCutter&&(this.nodeCutter=null),this.domNode&&(this.domNode=null),this.listObj&&(this.listObj=null),this.formatObj&&(this.formatObj=null),this.alignmentObj&&(this.alignmentObj=null),this.indentsObj&&(this.indentsObj=null),this.linkObj&&(this.linkObj=null),this.imgObj&&(this.imgObj=null),this.audioObj&&(this.audioObj=null),this.videoObj&&(this.videoObj=null),this.selectionObj&&(this.selectionObj=null),this.inserthtmlObj&&(this.inserthtmlObj=null),this.insertTextObj&&(this.insertTextObj=null),this.clearObj&&(this.clearObj=null),this.tableObj&&(this.tableObj=null),this.msWordPaste&&(this.msWordPaste=null),this.formatPainterEditor&&(this.formatPainterEditor=null),this.emojiPickerObj&&(this.emojiPickerObj=null),this.tableCellSelection&&(this.tableCellSelection=null)},a}(),mu=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),gu=function(a){mu(t,a);function t(e){var i=a.call(this)||this;return i.initialize(),_e(i,i,e,!0),i.currentDocument&&i.element&&i.updateFormatter(i.element,i.currentDocument,e.options,e.formatPainterSettings),i}return t.prototype.initialize=function(){this.keyConfig=Ed},t.prototype.updateFormatter=function(e,i,n,r){e&&i&&(this.editorManager=new fu({document:i,editableElement:e,options:n,formatPainterSettings:r}))},t}(Ud),Wl=function(){function a(t){this.parent=t,this.toolbarStatus=this.prevToolbarStatus=uh(),this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(ni,this.onRefreshHandler,this),this.parent.on(Y,this.removeEventListener,this)},a.prototype.removeEventListener=function(){this.toolbarStatus=null,this.prevToolbarStatus=null,this.parent.off(ni,this.onRefreshHandler),this.parent.off(Y,this.removeEventListener)},a.prototype.onRefreshHandler=function(t){if(!this.parent.readonly){var e=[],i=[],n=[];this.parent.fontSize.items.forEach(function(s){e.push(s.value)}),this.parent.fontFamily.items.forEach(function(s){i.push(s.value)}),this.parent.format.types.forEach(function(s){n.push(s.value.toLocaleLowerCase())}),this.toolbarStatus=fh.get(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel(),n,e,i,t.documentNode);var r=JSON.stringify(this.toolbarStatus);this.parent.notify(Bt,this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==r&&(this.parent.notify(yo,{html:JSON.parse(r),markdown:null}),this.prevToolbarStatus=JSON.parse(r))}},a}(),vu=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(vn,this.enableXhtmlValidation,this),this.parent.on(Y,this.removeEventListener,this)},a.prototype.removeEventListener=function(){this.parent.off(vn,this.enableXhtmlValidation),this.parent.off(Y,this.removeEventListener)},a.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(h(this.parent.inputElement)?this.currentElement=this.parent.element:this.currentElement=this.parent.inputElement,this.clean(this.currentElement),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML,this.currentElement.innerText===`
`?this.currentElement.innerText.length:this.currentElement.innerText.trim().length),this.parent.setProperties({value:this.currentElement.innerHTML},!0))},a.prototype.selfEncloseValidation=function(t,e){if(e===0&&t.indexOf("table")<0&&t.indexOf("img")<0&&t.includes("&nbsp;")){var i=t.split("&nbsp;");i[i.length-1]="&#8203;"+i[i.length-1],t=i.join("")}t=t.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/ /g," ");for(var n,r=[],s=[],o=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],l=0;l<o.length;l++){for(n=o[l].exec(t);n!==null;)r.push(n[0].toString()),n=o[l].exec(t);s=r.slice(0);for(var c=0;c<r.length;c++)(r[c].indexOf("/")===-1||r[c].lastIndexOf("/")!==r[c].length-2)&&(r[c]=r[c].substr(0,r[c].length-1)+" /"+r[c].substr(r[c].length-1,r[c].length));for(var p=0;p<=r.length-1;p++)t=t.replace(s[p],r[p])}return t},a.prototype.clean=function(t){for(var e=0;e<t.childNodes.length;e++){var i=t.childNodes[e];i.nodeType===8||i.nodeName==="V:IMAGE"?(t.removeChild(i),e--):i.nodeType===1&&this.clean(i)}return this.currentElement.innerHTML},a.prototype.ImageTags=function(){for(var t=this.currentElement.querySelectorAll("IMG"),e=t.length-1;e>=0;e--)if(!t[e].hasAttribute("alt")){var i=t[e];i.setAttribute("alt","")}},a.prototype.removeTags=function(){for(var t=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],e=0;e<t.length;e++)this.RemoveElementNode(t[e][0],t[e][1])},a.prototype.RemoveElementNode=function(t,e){for(var i=this.currentElement.querySelectorAll(e),n=0;n<i.length;n++)for(var r=i[n].querySelectorAll(t),s=r.length;s>0;s--)E(r[s-1])},a.prototype.RemoveUnsupported=function(){for(var t=this.currentElement.querySelectorAll("u"),e=t.length-1;e>=0;e--){var i=this.parent.createElement("span");i.style.textDecoration="underline",i.innerHTML=t[e].innerHTML,t[e].parentNode.insertBefore(i,t[e]),E(t[e])}for(var n=this.currentElement.querySelectorAll("strong"),e=n.length-1;e>=0;e--){var r=this.parent.createElement("b");r.innerHTML=n[e].innerHTML,n[e].parentNode.insertBefore(r,n[e]),E(n[e])}for(var s=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"],e=0;e<=s.length;e++)this.RemoveAttributeByName(s[e])},a.prototype.RemoveAttributeByName=function(t){if(this.currentElement.firstChild!==null&&this.currentElement.firstChild.nodeType!==3)for(var e=0;e<this.currentElement.childNodes.length;e++){var i=this.currentElement.childNodes[e];if(i.nodeType!==3&&i.nodeName!=="TABLE"&&i.nodeName!=="TBODY"&&i.nodeName!=="THEAD"&&i.nodeName!=="TH"&&i.nodeName!=="TR"&&i.nodeName!=="TD"&&(i.hasAttribute(t)&&i.removeAttribute(t),i.hasChildNodes()))for(var n=0;n<i.childNodes.length;n++){var r=i.childNodes[n];if(r.nodeType!==3&&r.nodeName!=="TABLE"&&r.nodeName!=="TBODY"&&r.nodeName!=="THEAD"&&r.nodeName!=="TH"&&r.nodeName!=="TR"&&r.nodeName!=="TD"&&r.hasAttribute(t)&&!r.classList.contains("e-mention-chip")&&r.removeAttribute(t),r.hasChildNodes())for(var s=0;s<r.childNodes.length;s++)r.childNodes[s].nodeType!==3&&r.childNodes[s].nodeName!=="TABLE"&&r.childNodes[s].nodeName!=="TBODY"&&r.childNodes[s].nodeName!=="THEAD"&&r.childNodes[s].nodeName!=="TH"&&r.childNodes[s].nodeName!=="TR"&&r.childNodes[s].nodeName!=="TD"&&r.childNodes[s].hasAttribute(t)&&r.childNodes[s].removeAttribute(t)}}},a}(),bu=function(){function a(t,e){this.rangeCollection=[],this.isImageDelete=!1,this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.xhtmlValidation=new vu(t),this.addEventListener(),this.isDestroyed=!1}return a.prototype.destroy=function(){this.isDestroyed||(this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.removeEventListener(),this.locator=null,this.contentRenderer=null,this.renderFactory=null,this.toolbarUpdate=null,this.nodeSelectionObj=null,this.rangeCollection.length>0&&(this.rangeCollection=[]),this.rangeElement&&(this.rangeElement=null),this.oldRangeElement&&(this.oldRangeElement=null),this.deleteRangeElement&&(this.deleteRangeElement=null),this.deleteOldRangeElement&&(this.deleteOldRangeElement=null),this.saveSelection&&(this.saveSelection=null),this.xhtmlValidation&&(this.xhtmlValidation=null),this.isDestroyed=!0)},a.prototype.sanitizeHelper=function(t){return t=ch(t,this.parent),t},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.nodeSelectionObj=new qe,this.parent.on(_s,this.instantiateRenderer,this),this.parent.on(Ks,this.onToolbarClick,this),this.parent.on(we,this.onKeyDown,this),this.parent.on(Ke,this.onKeyUp,this),this.parent.on(je,this.render,this),this.parent.on(Me,this.onPropertyChanged,this),this.parent.on(Y,this.destroy,this),this.parent.on(ro,this.selectAll,this),this.parent.on(kr,this.selectRange,this),this.parent.on(so,this.getSelectedHtml,this),this.parent.on(Tt,this.onSelectionSave,this),this.parent.on(Et,this.onSelectionRestore,this),this.parent.on(co,this.updateReadOnly,this),this.parent.on(Oi,this.onPaste,this),this.parent.on(pn,this.isTableClassAdded,this),this.parent.on(oh,this.onHandleFontsizeChange,this))},a.prototype.updateReadOnly=function(){this.parent.readonly?(Ce(this.parent.contentModule.getEditPanel(),{contenteditable:"false"}),k([this.parent.element],Po)):(Ce(this.parent.contentModule.getEditPanel(),{contenteditable:"true"}),O([this.parent.element],Po))},a.prototype.onSelectionSave=function(){var t=this.contentRenderer.getDocument(),e=this.nodeSelectionObj.getRange(t);this.saveSelection=this.nodeSelectionObj.save(e,t)},a.prototype.onSelectionRestore=function(t){this.parent.isBlur=!1,(h(t.items)||t.items)&&this.saveSelection.restore()},a.prototype.isTableClassAdded=function(){for(var t=this.parent.inputElement.querySelectorAll("table"),e=0;e<t.length;e++)!t[e].classList.contains("e-rte-table")&&!t[e].classList.contains("e-rte-paste-table")&&t[e].classList.add("e-rte-table")},a.prototype.onHandleFontsizeChange=function(t){var e=t.args,i={name:"dropDownSelect"};i.item={command:"Font",subCommand:"FontSize"};var n=this.parent.fontSize.items,r;if(this.parent.toolbarModule&&this.parent.toolbarModule.dropDownModule&&this.parent.toolbarModule.dropDownModule.fontSizeDropDown&&!h(this.parent.toolbarModule.dropDownModule.fontSizeDropDown.activeElem[0].textContent)&&this.parent.toolbarModule.dropDownModule.fontSizeDropDown.activeElem[0].textContent!=="")r=this.parent.toolbarModule.dropDownModule.fontSizeDropDown.activeElem[0].textContent;else{var s=void 0,o=this.parent.contentModule.getDocument().getSelection();o&&o.focusNode&&o.focusNode.parentElement?s=document.defaultView.getComputedStyle(o.focusNode.parentElement,null).getPropertyValue("font-size"):s=this.parent.fontSize.width,s=h(s)?this.parent.fontSize.width:s;var l=s.match(/^([\d.]+)(\D+)$/),c=parseInt(l[1],10),p=l[2],d=n[1].value.match(/^([\d.]+)(\D+)$/);if(d[2]===p){var u=n.findIndex(function(T){var L=T.value;return parseInt(L,10)>=c});r=n[u].text}else{var m=this.convertFontSize(c,p,d[2]),u=n.findIndex(function(L){var w=L.value;return parseInt(w,10)>=m});r=n[u].text}}var f=n.findIndex(function(T){return T.text===(r==="Font Size"?"Default":r)});if(e.action==="increase-fontsize"&&f!==-1)if(f>=n.length-1){var g=n[f].value.match(/^([\d.]+)(\D+)$/);if(g){var y=parseInt(g[1],10),p=g[2],S=y%10===0?Math.ceil((y+1)/10)*10:Math.ceil(y/10)*10;i.item.value=S.toLocaleString()+p,i.item.text=S.toLocaleString()+" "+p}this.parent.fontSize.items.push(i.item)}else i.item.value=n[f+1].value,i.item.text=n[f+1].text;else e.action==="decrease-fontsize"&&f!==-1&&f>0?(i.item.value=n[f-1].value,i.item.text=n[f-1].text):f>=0&&f<n.length&&n[f]&&(i.item.value=n[f].value,i.item.text=n[f].text);this.parent.formatter.process(this.parent,i,e)},a.prototype.convertFontSize=function(t,e,i){(ll.indexOf(e)!==-1||ll.indexOf(i)!==-1)&&(e="px");var n=t*op[e][i];return n},a.prototype.onKeyUp=function(t){var e=t.args,i=[8,9,13,17,18,20,27,37,38,39,40,44,45,46,91,112,113,114,115,116,117,118,119,120,121,122,123],n=this.parent.getRange(),r=new RegExp("​","g"),s=n.startContainer===n.endContainer&&n.startOffset===n.endOffset&&n.startOffset===1&&n.startContainer.textContent.length===1&&n.startContainer.textContent.charCodeAt(0)===8203&&n.startContainer.textContent.replace(r,"").length===0,o=!1;if(n.startContainer===n.endContainer&&n.startOffset===n.endOffset&&n.startContainer!==this.parent.inputElement&&n.startOffset!==0){var l=n.startContainer.nodeType===3?n.startContainer:n.startContainer.childNodes[n.startOffset-1];o=e.keyCode===16&&l.textContent.charCodeAt(0)===8203&&!h(l.previousSibling)&&l.previousSibling.contentEditable==="false"}var c,p=!1;if(i.indexOf(e.keyCode)<0&&!e.shiftKey&&!e.ctrlKey&&!e.altKey&&!s&&!o){c=n.startOffset;var d=n.startContainer;if(d.nodeType===Node.TEXT_NODE&&d.nodeValue.includes("​")){var u=d.splitText(d.nodeValue.indexOf("​"));u.splitText(1),u.parentNode.removeChild(u)}if(n.startContainer.nodeName==="#text"?n.startContainer.parentElement!==this.parent.inputElement?n.startContainer.parentElement.classList.add("currentStartMark"):p=!0:n.startContainer.classList.add("currentStartMark"),n.startContainer.textContent.charCodeAt(0)===8203){var m=n.startContainer.textContent.length,f=n.startOffset;n.startContainer.textContent=n.startContainer.textContent.replace(r,""),c=f===0?f:f-(m-n.startContainer.textContent.length),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),n.startContainer,c)}var g=this.parent.inputElement.innerHTML.length,y=this.parent.inputElement.innerHTML.replace(r,"").length,S=n.startContainer;if(g>y&&!p){if(S.textContent.trim().length!==0&&S.previousSibling){var T=document.createElement("span");T.className="tempSpan",n.insertNode(T)}for(var L=this.parent.inputElement.firstChild;!h(L);){if(L.nodeName==="#text"){L=L.nextElementSibling;continue}L.textContent.replace(r,"").trim().length>0&&L.textContent.includes("​")&&(L.innerHTML=L.innerHTML.replace(r,"")),L=L.nextElementSibling}var w=this.parent.inputElement.querySelector(".tempSpan");if(w&&w.previousSibling&&S.textContent.trim().length!==0){S=w.previousSibling,c=w.previousSibling.textContent.length;var N=w.parentNode;N.removeChild(w),w=null}var M=this.parent.inputElement.querySelector(".currentStartMark").childNodes;if(M.length>1)for(var I=0;I<M.length;I++)M[I].nodeName==="#text"&&M[I].textContent.length===0&&(E(M[I]),I--),!h(M[I])&&S.textContent.replace(r,"")===M[I].textContent&&(c=S.textContent.length>1?S.textContent===M[I].textContent?c:c-(S.textContent.length-S.textContent.replace(r,"").length):S.textContent.length,S=M[I]);else M.length===1&&S.textContent.replace(r,"")===M[0].textContent&&(S=M[0]);n.startContainer!==S&&this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),S,c)}var A=this.parent.inputElement.querySelector(".currentStartMark");h(A)||(A.classList.remove("currentStartMark"),A.getAttribute("class").trim()===""&&A.removeAttribute("class")),!h(n.startContainer.previousSibling)&&!h(n.startContainer.previousSibling.parentElement)&&n.startContainer.parentElement===n.startContainer.previousSibling.parentElement&&n.startContainer.previousSibling.textContent.charCodeAt(0)===8203&&n.startContainer.previousSibling.textContent.length<=1&&(n.startContainer.previousSibling.textContent=n.startContainer.previousSibling.textContent.replace(r,"")),n.endContainer.textContent.charCodeAt(n.endOffset)===8203&&(c=n.startOffset,n.endContainer.textContent=n.endContainer.textContent.replace(r,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),n.startContainer,c))}},a.prototype.onKeyDown=function(t){var e=this,i,n=t.args;if(this.parent.inputElement.querySelectorAll(".e-cell-select").length>1&&(n.keyCode===8||n.keyCode===32||n.keyCode===13)){this.tableSelectionKeyAction(t),this.parent.autoResize();return}if(x.info.name==="chrome"&&(i=this.parent.getRange(),this.backSpaceCleanup(t,i),this.deleteCleanup(t,i)),n.keyCode===9&&this.parent.enableTabKey){if(this.parent.formatter.saveData(t),!h(n.target)&&h(b(n.target,".e-rte-toolbar"))){var r=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),s=this.nodeSelectionObj.getParentNodeCollection(r);if(!(s[0].nodeName==="LI"||b(s[0],"li")||b(s[0],"table"))){n.preventDefault();var o=this.contentRenderer.getDocument().getSelection().getRangeAt(0),l=this.parent.formatter.editorManager.domNode.blockNodes();if(this.parent.enterKey==="BR")if(o.startOffset!==o.endOffset&&o.startOffset===0){var c=this.nodeSelectionObj.save(r,this.contentRenderer.getDocument());this.parent.formatter.editorManager.domNode.setMarker(c),l=this.parent.formatter.editorManager.domNode.blockNodes(),this.parent.formatter.editorManager.domNode.convertToBlockNodes(l,!1),this.marginTabAdd(n.shiftKey,l),c=this.parent.formatter.editorManager.domNode.saveMarker(c),c.restore()}else We.Insert(this.contentRenderer.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()));else if(!n.shiftKey)o.startOffset!==o.endOffset&&o.startOffset===0?this.marginTabAdd(n.shiftKey,l):(We.Insert(this.contentRenderer.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument())));else if(this.rangeCollection.length>0&&this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length===4){var p=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(),p,p,0,p.textContent.length),We.Insert(this.contentRenderer.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}else this.marginTabAdd(n.shiftKey,l)}}this.parent.formatter.saveData(t)}if((t.args.action==="space"||t.args.action==="enter"||t.args.keyCode===13)&&(this.spaceLink(t.args),this.parent.editorMode==="HTML"&&!this.parent.readonly)){var d=this.parent.getText().trim().replace(/(\r\n|\n|\r|\t)/gm,"").replace(/\u200B/g,"").length,u=this.parent.getSelection().length,m=d-u+1;if(!(this.parent.maxLength===-1||m<=this.parent.maxLength)&&t.args.keyCode===13){t.args.preventDefault();return}else this.parent.notify(uo,{args:t.args}),Rr(this.parent.contentModule.getDocument(),this.parent.inputElement)}if(t.args.action==="space"){var f=this.parent.getRange(),g=f.startContainer.textContent.slice(0,f.startOffset),y=this.isOrderedList(g),S=this.isUnOrderedList(g);if(y&&!S||S&&!y){var T={callBack:null,event:t.args,name:"keydown-handler"},L={cancel:!1,item:{command:"Lists",subCommand:y?"OL":"UL"},name:"actionBegin",originalEvent:t.args,requestType:y?"OL":"UL"};this.parent.trigger(Re,L,function(w){w.cancel||(e.parent.formatter.editorManager.observer.notify(da,T),e.parent.trigger(ct,{editorMode:e.parent.editorMode,elements:e.parent.formatter.editorManager.domNode.blockNodes(),event:t.args,name:ct,range:e.parent.getRange(),requestType:y?"OL":"UL"}))})}}x.info.name==="chrome"&&(!h(this.rangeElement)&&!h(this.oldRangeElement)||!h(this.deleteRangeElement)&&!h(this.deleteOldRangeElement))&&i.startContainer.parentElement.tagName!=="TD"&&i.startContainer.parentElement.tagName!=="TH"&&(this.rangeElement=null,this.oldRangeElement=null,this.deleteRangeElement=null,this.deleteOldRangeElement=null,this.isImageDelete||n.preventDefault(),n.preventDefault()),this.parent.autoResize()},a.prototype.isOrderedList=function(t){t=t.replace(/\u200B/g,"");var e=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!h(t)){for(var i=0;i<e.length;i++)if(e[i].test(t))return!0}return!1},a.prototype.isUnOrderedList=function(t){t=t.replace(/\u200B/g,"");var e=[/^[*]$/,/^[-]$/];if(!h(t)){for(var i=0;i<e.length;i++)if(e[i].test(t))return!0}return!1},a.prototype.backSpaceCleanup=function(t,e){var i=!1,n=!0;!h(e.startContainer.previousSibling)&&e.startContainer.previousSibling.nodeName==="SPAN"&&(n=e.startContainer.previousSibling.contentEditable!=="false");var r=e.startContainer.nodeName==="#text"?e.startContainer.parentElement:e.startContainer,s=b(e.startContainer.nodeName==="#text"?e.startContainer.parentElement:e.startContainer,"li")?r.nodeName!=="li"&&h(r.previousSibling):!0;if(t.args.code==="Backspace"&&t.args.keyCode===8&&e.startOffset===0&&e.endOffset===0&&this.parent.getSelection().length===0&&e.startContainer.textContent.length>0&&e.startContainer.parentElement.tagName!=="TD"&&e.startContainer.parentElement.tagName!=="TH"&&n&&s){if(!this.parent.formatter.editorManager.domNode.isBlockNode(r)&&!h(r.previousSibling)&&r.previousSibling.nodeName==="BR"||!h(e.startContainer.previousSibling)&&e.startContainer.previousSibling.nodeName==="BR")return;if(this.rangeElement=this.getRootBlockNode(e.startContainer),this.rangeElement.tagName==="OL"||this.rangeElement.tagName==="UL"){var o=this.getRangeLiNode(e.startContainer);o.previousElementSibling&&o.previousElementSibling.childElementCount>0&&(this.oldRangeElement=o.previousElementSibling.lastElementChild.nodeName==="BR"?o.previousElementSibling:o.previousElementSibling.lastChild,!h(o.lastElementChild)&&o.lastElementChild.nodeName!=="BR"&&h(o.lastElementChild.previousSibling)&&o.lastChild.nodeName!=="#text"?(this.rangeElement=o.lastElementChild,i=!0):this.rangeElement=o)}else{if(this.rangeElement===this.parent.inputElement||this.rangeElement.tagName==="TABLE"||!h(this.rangeElement.previousElementSibling)&&this.rangeElement.previousElementSibling.tagName==="TABLE")return;this.oldRangeElement=this.rangeElement.previousElementSibling}if(h(this.oldRangeElement))return;(this.oldRangeElement.tagName==="OL"||this.oldRangeElement.tagName==="UL")&&(this.oldRangeElement=this.oldRangeElement.lastElementChild.lastElementChild?this.oldRangeElement.lastElementChild.lastElementChild:this.oldRangeElement.lastElementChild);for(var l=this.oldRangeElement.lastChild?this.oldRangeElement.lastChild:this.oldRangeElement;l.nodeType!==3&&l.nodeName!=="#text"&&l.nodeName!=="BR"&&!h(l.lastChild);)l=l.lastChild;if(l.nodeName==="IMG"?this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),l.parentElement,l.parentElement.childNodes.length):this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),l,l.textContent.length),this.oldRangeElement.nodeName!=="#text"&&this.oldRangeElement.querySelectorAll("BR").length===1&&E(this.oldRangeElement.querySelector("BR")),!h(this.rangeElement)&&this.oldRangeElement!==this.rangeElement){for(;this.rangeElement.firstChild;)this.oldRangeElement.nodeName==="#text"?this.oldRangeElement.parentElement.appendChild(this.rangeElement.childNodes[0]):this.oldRangeElement.appendChild(this.rangeElement.childNodes[0]);i?E(this.rangeElement.parentElement):E(this.rangeElement),this.oldRangeElement.normalize()}}},a.prototype.deleteCleanup=function(t,e){var i=!1,n,r;if(t.args.code==="Delete"&&t.args.keyCode===46&&this.parent.contentModule.getText().trim().replace(/(\r\n|\n|\r|\t)/gm,"").replace(/\u200B/g,"").length!==0&&this.parent.getSelection().length===0&&e.startContainer.parentElement.tagName!=="TD"&&e.startContainer.parentElement.tagName!=="TH"){if(this.deleteRangeElement=r=this.getRootBlockNode(e.startContainer),this.deleteRangeElement.tagName==="OL"||this.deleteRangeElement.tagName==="UL")n=this.getRangeLiNode(e.startContainer),n.nextElementSibling&&n.nextElementSibling.childElementCount>0&&!n.nextElementSibling.querySelector("BR")?h(n.lastElementChild)?this.deleteRangeElement=n:(this.deleteRangeElement=n.lastElementChild,i=!0):this.deleteRangeElement=this.getRangeElement(n);else if(this.deleteRangeElement.nodeType===3||this.deleteRangeElement.tagName==="TABLE"||!h(this.deleteRangeElement.nextElementSibling)&&this.deleteRangeElement.nextElementSibling.tagName==="TABLE")return;var s=!1;if(this.deleteRangeElement.querySelectorAll("img").length>0&&this.deleteRangeElement.textContent.trim()===""&&(s=!0),this.getCaretIndex(e,this.deleteRangeElement)===this.deleteRangeElement.textContent.length&&!s){if(h(n)?this.deleteOldRangeElement=this.deleteRangeElement.nextElementSibling:i||!h(n.nextElementSibling)?this.deleteOldRangeElement=this.getRangeElement(n.nextElementSibling):this.deleteOldRangeElement=r.nextElementSibling,h(this.deleteOldRangeElement))return;e.startOffset===0&&e.endOffset===1&&this.deleteRangeElement.childNodes[0].nodeName==="IMG"?(this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),this.deleteRangeElement,this.deleteRangeElement,0,1),this.isImageDelete=!0):(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),this.deleteRangeElement,this.deleteRangeElement.childNodes.length),this.isImageDelete=!1);var o=this.deleteRangeElement.querySelector("BR");if(o&&o.classList.contains("e-rte-image-remove-focus")){O([o],["e-rte-image-focus"]);return}else o&&(E(o),t.args.preventDefault());if(!h(this.deleteRangeElement)&&this.deleteOldRangeElement.tagName!=="OL"&&this.deleteOldRangeElement.tagName!=="UL"&&this.deleteOldRangeElement!==this.deleteRangeElement){for(;this.deleteOldRangeElement.firstChild;)this.deleteRangeElement.appendChild(this.deleteOldRangeElement.childNodes[0]);i?E(this.deleteOldRangeElement.parentElement):E(this.deleteOldRangeElement),this.deleteRangeElement.normalize()}else this.deleteRangeElement=null,this.deleteOldRangeElement=null}else this.deleteRangeElement=null}},a.prototype.getCaretIndex=function(t,e){var i=0;if(this.parent.contentModule.getDocument().getSelection().rangeCount!==0){var n=t.cloneRange();n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i=n.toString().length}return i},a.prototype.getRangeElement=function(t){var e=t.lastElementChild?t.lastElementChild.tagName==="BR"?t.lastElementChild.previousElementSibling?t.lastElementChild.previousElementSibling:t:t.lastElementChild:t;return e},a.prototype.getRootBlockNode=function(t){for(;t&&this.parent&&this.parent.inputElement!==t&&t.parentElement!==this.parent.inputElement;t=t)t=t.parentElement;return t},a.prototype.getRangeLiNode=function(t){for(var e=t.parentElement;e!==this.parent.inputElement&&!(e.nodeType===1&&e.tagName==="LI");)e=e.parentElement;return e},a.prototype.onPaste=function(t){var e=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(t.text.match(e)){if(t.isWordPaste)return;t.args.preventDefault();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument());for(var n=new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi),r=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),s=t.text.split(`
`),o="",l=0;l<s.length;l++)if(s[l].trim()==="")o+=ka(this.parent);else{for(var c="",p=!0,d=s[l].split(" "),u=0;u<d.length;u++)d[u].trim()===""?c+=p?"&nbsp;":" ":(p=!1,c+=d[u]+" ");l===0?o+="<span>"+c.trim()+"</span>":o+="<p>"+c.trim()+"</p>"}var m=this.parent.createElement("div");m.setAttribute("class","pasteContent"),m.style.display="inline",m.innerHTML=o.replace("&para","&amp;para");for(var f=m.querySelectorAll("span, p"),l=0;l<f.length;l++){for(var g=f[l].innerHTML.split(" "),y="",u=0;u<g.length;u++)g[u].match(n)||g[u].match(r)?y+='<a class="e-rte-anchor" href="'+g[u]+'" title="'+g[u]+'" target="_blank" aria-label="'+this.parent.serviceLocator.getService("rteLocale").getConstant("linkAriaLabel")+'">'+g[u]+" </a>":y+=g[u]+" ";f[l].innerHTML=y.trim()}var S=m.childNodes[0];!h(S)&&!h(S.childNodes[0])&&S.nodeName==="SPAN"&&S.childNodes[0].nodeName==="A"&&(m.innerHTML=m.innerHTML.replace("<span>","").replace("</span>","")),h(this.parent.pasteCleanupModule)?this.parent.formatter.editorManager.execCommand("insertHTML",null,null,null,m):t.callBack(m.innerHTML)}},a.prototype.spaceLink=function(t){var e=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(e),n=e.startContainer.textContent.substr(0,e.endOffset),r=n.split(" "),s=r[r.length-1],o=e.startOffset-(n.length-r[r.length-1].length);s=s.slice(0,o);var l=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(i[0].nodeName!=="A"&&s.match(l)){var c=this.nodeSelectionObj.save(e,this.parent.contentModule.getDocument()),p=s.indexOf("http")>-1?s:"http://"+s,d=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(e),u={url:p,selection:c,selectParent:d,text:s,title:"",target:"_blank"};this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},t,u)}},a.prototype.onToolbarClick=function(t){var e=this,i,n,r,s=t.item,o=b(t.originalEvent.target,".e-rte-quick-popup"),l=t.originalEvent.target;if(this.parent.notify(Nr,{target:l}),s.command!=="FormatPainter")if(o&&!o.classList.contains("e-rte-inline-popup")&&!o.classList.contains("e-rte-text-popup")){if(!(s.subCommand==="SourceCode"||s.subCommand==="Preview"||s.subCommand==="FontColor"||s.subCommand==="BackgroundColor")){Qe()&&s.command==="Images"&&this.nodeSelectionObj.restore();var c=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());i=this.nodeSelectionObj.save(c,this.parent.contentModule.getDocument()),n=this.nodeSelectionObj.getNodeCollection(c),r=this.nodeSelectionObj.getParentNodeCollection(c)}s.command==="Images"&&this.parent.notify(Zs,{member:"image",args:t,selectNode:n,selection:i,selectParent:r}),s.command==="Audios"&&this.parent.notify(qc,{member:"audio",args:t,selectNode:n,selection:i,selectParent:r}),s.command==="Videos"&&this.parent.notify(jc,{member:"video",args:t,selectNode:n,selection:i,selectParent:r}),s.command==="Links"&&this.parent.notify(eo,{member:"link",args:t,selectNode:n,selection:i,selectParent:r}),s.command==="Table"&&this.parent.notify(lo,{member:"table",args:t,selectNode:n,selection:i,selectParent:r})}else{var p=document.getElementById(this.parent.getID()+"_rtelink"),d=document.getElementById(this.parent.getID()+"_image");if(!(s.subCommand==="SourceCode"||s.subCommand==="Preview"||s.subCommand==="FontColor"||s.subCommand==="BackgroundColor")){var c=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());h(p)&&h(d)&&(i=this.nodeSelectionObj.save(c,this.parent.contentModule.getDocument())),n=this.nodeSelectionObj.getNodeCollection(c),r=this.nodeSelectionObj.getParentNodeCollection(c)}switch(s.subCommand){case"Maximize":this.parent.notify(Xs,{args:t});break;case"Minimize":this.parent.notify(Ys,{args:t});break;case"CreateLink":this.parent.notify(io,{member:"link",args:t,selectNode:n,selection:i,selectParent:r});break;case"RemoveLink":this.parent.notify(nr,{member:"link",args:t,selectNode:n,selection:i,selectParent:r});break;case"Print":this.parent.print();break;case"Image":this.parent.notify(rr,{member:"image",args:t,selectNode:n,selection:i,selectParent:r});break;case"Audio":this.parent.notify(Uc,{member:"audio",args:t,selectNode:n,selection:i,selectParent:r});break;case"Video":this.parent.notify(Vc,{member:"video",args:t,selectNode:n,selection:i,selectParent:r});break;case"CreateTable":this.parent.notify(ao,{member:"table",args:t,selection:i});break;case"SourceCode":this.parent.notify(Ni,{member:"viewSource",args:t});break;case"Preview":this.parent.notify(fn,{member:"updateSource",args:t});break;case"FontColor":case"BackgroundColor":break;case"File":this.parent.notify(sh,{member:"fileManager",args:t,selectNode:n,selection:i,selectParent:r});break;case"EmojiPicker":this.parent.notify(Dr,{member:"emojiPicker",args:t});break;default:this.parent.formatter.process(this.parent,t,t.originalEvent,null);break}}else t.originalEvent.detail===1?(clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(function(){e.parent.notify(ko,{member:"formatPainter",args:t})},200)):(clearTimeout(this.clickTimeout),this.parent.notify(Do,{member:"formatPainter",args:t}))},a.prototype.instantiateRenderer=function(){this.parent.iframeSettings.enable?this.renderFactory.addRenderer(X.Content,new Ad(this.parent)):this.renderFactory.addRenderer(X.Content,new dh(this.parent))},a.prototype.removeEventListener=function(){this.parent.off(je,this.render),this.parent.off(Me,this.onPropertyChanged),this.parent.off(Ks,this.onToolbarClick),this.parent.off(Y,this.destroy),this.parent.off(we,this.onKeyDown),this.parent.off(_s,this.instantiateRenderer),this.parent.off(ro,this.selectAll),this.parent.off(kr,this.selectRange),this.parent.off(so,this.getSelectedHtml),this.parent.off(Tt,this.onSelectionSave),this.parent.off(Et,this.onSelectionRestore),this.parent.off(co,this.updateReadOnly),this.parent.off(Oi,this.onPaste),this.parent.off(pn,this.isTableClassAdded)},a.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(X.Content);var t=this.contentRenderer.getEditPanel(),e={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};if(h(this.parent.formatter)){var i=new gu({currentDocument:this.contentRenderer.getDocument(),element:t,options:e,formatPainterSettings:this.parent.formatPainterSettings});this.parent.setProperties({formatter:i},!0)}else this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),e);this.parent.enableXhtml&&this.parent.notify(vn,{}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new Wl(this.parent)),this.parent.inlineMode.enable&&(h(this.parent.fontFamily.default)||(t.style.fontFamily=this.parent.fontFamily.default),h(this.parent.fontSize.default)||(t.style.fontSize=this.parent.fontSize.default)),this.parent.notify(Qs,{})},a.prototype.onPropertyChanged=function(t){if(!h(t)&&!h(t.newProp.toolbarSettings)&&!h(t.newProp.toolbarSettings.enable)&&(this.toolbarUpdate=new Wl(this.parent)),!h(t.newProp.formatter)){var e=this.contentRenderer.getEditPanel(),i={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),i)}},a.prototype.getModuleName=function(){return"htmlEditor"},a.prototype.selectAll=function(){var t=hh(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel());t.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),t[0],t[t.length-1],0,t[t.length-1].textContent.length)},a.prototype.selectRange=function(t){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(),t.range)},a.prototype.getSelectedHtml=function(t){t.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString())},a.prototype.tableSelectionKeyAction=function(t){for(var e=t.args,i=this.parent.inputElement.querySelectorAll(".e-cell-select"),n=0;n<i.length;n++){var r=i[n];de([r],[Ue,Ta,Sa]),n===0?(e.keyCode===32?r.innerHTML="&#8203;<br>":r.innerHTML="<br>",this.nodeSelectionObj.setCursorPoint(this.parent.contentModule.getDocument(),r.firstChild,0)):r.innerHTML="<br>"}},a.prototype.marginTabAdd=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(!n.closest("li"))if(n.style.marginLeft){var r=parseInt(n.style.marginLeft,10);t?r-=20:r+=20,n.style.marginLeft=r.toString()+"px",n.style.marginLeft==="0px"&&n.removeAttribute("style")}else t||(n.style.marginLeft="20px")}},a}(),yu=function(){function a(t,e){this.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],this.blockNode=["div","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","td","tr","th","tbody","tfoot","thead","table","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.isNotFromHtml=!1,this.containsHtml=!1,this.cropImageData=[],this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.i10n=e.getService("rteLocale"),this.dialogRenderObj=e.getService("dialogRenderObject"),this.addEventListener(),this.isDestroyed=!1}return a.prototype.addEventListener=function(){this.nodeSelectionObj=new qe,!this.parent.isDestroyed&&(this.parent.on(po,this.pasteClean,this),this.parent.on(Le,this.setCssClass,this),this.parent.on(Y,this.destroy,this),this.parent.on(oi,this.docClick,this))},a.prototype.destroy=function(){this.isDestroyed||(this.fireFoxUploadTime&&(clearTimeout(this.fireFoxUploadTime),this.fireFoxUploadTime=null),this.refreshPopupTime&&(clearTimeout(this.refreshPopupTime),this.refreshPopupTime=null),this.popupCloseTime&&(clearTimeout(this.popupCloseTime),this.popupCloseTime=null),this.failureTime&&(clearTimeout(this.failureTime),this.failureTime=null),this.iframeUploadTime&&(clearTimeout(this.iframeUploadTime),this.iframeUploadTime=null),this.removeEventListener(),this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),this.popupObj=null),this.uploadObj&&!this.uploadObj.isDestroyed&&(this.uploadObj.destroy(),this.uploadObj=null),this.keepRadioButton&&!this.keepRadioButton.isDestroyed&&(this.keepRadioButton.destroy(),this.keepRadioButton=null),this.cleanRadioButton&&!this.cleanRadioButton.isDestroyed&&(this.cleanRadioButton.destroy(),this.cleanRadioButton=null),this.plainTextRadioButton&&!this.plainTextRadioButton.isDestroyed&&(this.plainTextRadioButton.destroy(),this.plainTextRadioButton=null),this.isDestroyed=!0)},a.prototype.removeEventListener=function(){this.parent.off(po,this.pasteClean),this.parent.off(Le,this.setCssClass),this.parent.off(Y,this.destroy),this.parent.off(oi,this.docClick)},a.prototype.pasteClean=function(t){var e=this,i={requestType:"Paste",editorMode:this.parent.editorMode,event:t},n=null,r=!1,s;if(t.args&&!h(t.args.clipboardData)&&(n=t.args.clipboardData.getData("text/html")),this.parent.trigger(Zc,{value:n}),t.args&&n!==null&&this.parent.editorMode==="HTML"){var o=void 0;if(n.length===0){var l=new RegExp(/<\/[a-z][\s\S]*>/i);if(n=t.args.clipboardData.getData("text/plain"),this.isNotFromHtml=n!=="",n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),this.containsHtml=l.test(n),o=t&&t.args.clipboardData&&t.args.clipboardData.items.length>0?t.args.clipboardData.items[0].getAsFile()===null?h(t.args.clipboardData.items[1])?null:t.args.clipboardData.items[1].getAsFile():t.args.clipboardData.items[0].getAsFile():null,this.parent.notify(Oi,{file:o,args:t.args,text:n,callBack:function(y){s=y,typeof s=="object"?e.parent.formatter.editorManager.execCommand("Images","Image",t.args,e.imageFormatting.bind(e,i),"pasteCleanup",s,"pasteCleanupModule"):n=s}}),!l.test(n)){var c=this.parent.createElement("div");c.innerHTML=this.splitBreakLine(n),n=c.innerHTML,r=!0}}else n.length>0&&this.parent.formatter.editorManager.observer.notify(pa,{args:t.args,text:t.text,allowedStylePropertiesArray:this.parent.pasteCleanupSettings.allowedStyleProps,callBack:function(y,S,T){i.pasteTableSource=T,n=y.trim(),e.cropImageData=S}});this.contentRenderer=this.renderFactory.getRenderer(X.Content);var p=this.contentRenderer.getDocument(),d=this.nodeSelectionObj.getRange(p);this.saveSelection=this.nodeSelectionObj.save(d,p);var u=this.parent.createElement("div");u.innerHTML=n;for(var m=u.querySelectorAll(".e-rte-image-unsupported"),f=0;f<m.length;f++)m[f].setAttribute("alt",this.i10n.getConstant("unsupportedImage")),m[f].classList.remove("e-rte-image-unsupported");n=u.innerHTML;var g=u.textContent!==""||!h(u.querySelector("img"))||!h(u.querySelector("table"));this.parent.notify(xo,{value:n,callBack:function(y){n=y}}),this.parent.pasteCleanupSettings.prompt?g&&(t.args.preventDefault(),this.pasteDialog(n,i,r)):this.parent.pasteCleanupSettings.plainText?(t.args.preventDefault(),this.plainFormatting(n,i,r)):this.parent.pasteCleanupSettings.keepFormat?(t.args.preventDefault(),this.formatting(n,!1,i)):(t.args.preventDefault(),this.formatting(n,!0,i))}},a.prototype.splitBreakLine=function(t){for(var e=t.split(`
`),i="",n=this.parent.enterKey==="P"?"<p>":this.parent.enterKey==="DIV"?"<div>":"",r=this.parent.enterKey==="P"?"</p>":this.parent.enterKey==="DIV"?"</div>":"<br>",s=0;s<e.length;s++)if(e[s].trim()==="")i+=ka(this.parent);else{var o=this.makeSpace(e[s]);i+=(s===0&&this.parent.enterKey!=="BR"?"<span>":n)+(o.trim()===""?"<br>":o.trim())+(e.length-1===s&&this.parent.enterKey==="BR"?"":s===0&&this.parent.enterKey!=="BR"?"</span>":r)}return i},a.prototype.makeSpace=function(t){var e="",i=!0;t=t.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");for(var n=t.split(" "),r=0;r<n.length;r++)n[r].trim()===""?e+=i?"&nbsp;":" ":(i=!1,e+=n[r]+" ");return e},a.prototype.imgUploading=function(t){var e=t.querySelectorAll(".pasteContent_Img");if(this.parent.insertImageSettings.saveUrl&&e.length>0){for(var i=[],n=[],r=[],s=0;s<e.length;s++)!h(e[s].getAttribute("src"))&&e[s].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(i.push(e[s].getAttribute("src")),n.push(rt("rte_image")),r.push(e[s]));for(var o=[],s=0;s<i.length;s++)o.push(this.base64ToFile(i[s],n[s]));for(var s=0;s<o.length;s++)this.uploadMethod(o[s],r[s]);h(this.parent.insertImageSettings.path)&&this.parent.insertImageSettings.saveFormat==="Blob"&&this.getBlob(e)}else this.parent.insertImageSettings.saveFormat==="Blob"&&this.getBlob(e);for(var l=t.querySelectorAll(".pasteContent_Img"),s=0;s<l.length;s++)l[s].classList.remove("pasteContent_Img"),l[s].getAttribute("class").trim()===""&&e[s].removeAttribute("class")},a.prototype.getBlob=function(t){for(var e=0;e<t.length;e++)if(!h(t[e].getAttribute("src"))&&t[e].getAttribute("src").split(",")[0].indexOf("base64")>=0){var i=URL.createObjectURL(Sr(t[e].getAttribute("src")));t[e].setAttribute("src",i)}},a.prototype.toolbarEnableDisable=function(t){this.parent.inlineMode.enable||this.parent.toolbarModule.baseToolbar.toolbarObj.disable(t)},a.prototype.uploadMethod=function(t,e){var i=this;e.style.opacity="0.5";var n=this.parent.createElement("div");this.parent.rootContainer.appendChild(n);var r=this.parent.createElement("input",{id:this.parent.getID()+"_upload",attrs:{type:"File",name:"UploadFiles"}}),s=this.parent.iframeSettings.enable?-50:-90;this.popupObj=new At(n,{relateTo:e,height:"85px",width:"300px",offsetY:s,content:r,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(c){i.parent.isBlur=!1,i.popupObj.destroy(),E(i.popupObj.element)}}),this.popupObj.element.style.display="none",k([this.popupObj.element],[Ho,ah]),h(this.parent.cssClass)||k([this.popupObj.element],this.parent.cssClass.replace(/\s+/g," ").trim().split(" "));var o=t.size>1e6?300:100;this.refreshPopupTime=setTimeout(function(){i.refreshPopup(e,i.popupObj)},o),this.uploadObj=new Us({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},cssClass:lh,dropArea:this.parent.inputElement,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),success:function(c){i.popupClose(i.popupObj,i.uploadObj,e,c)},uploading:function(c){i.parent.isServerRendered||i.parent.trigger(fo,c,function(p){p.cancel?(h(e)||E(e),h(i.popupObj.element)||E(i.popupObj.element)):i.parent.inputElement.contentEditable="false"})},beforeUpload:function(c){i.parent.trigger(bo,c),i.toolbarEnableDisable(!0)},failure:function(c){i.failureTime=setTimeout(function(){i.uploadFailure(e,i.uploadObj,i.popupObj,c)},900)},canceling:function(){i.parent.inputElement.contentEditable="true",e.nextSibling.textContent===" "&&E(e.nextSibling),E(e),i.popupObj.close()},selected:function(c){c.cancel=!0},removing:function(){i.parent.inputElement.contentEditable="true",e.nextSibling.textContent===" "&&E(e.nextSibling),E(e),i.popupObj.close()}}),this.uploadObj.appendTo(this.popupObj.element.childNodes[0]);var l=[{name:t.name,rawFile:t,size:t.size,type:t.type,status:"Ready to Upload",validationMessages:{minSize:"",maxSize:""},statusCode:"1"}];this.uploadObj.createFileList(l),this.uploadObj.upload(l),this.popupObj.element.getElementsByClassName("e-file-select-wrap")[0].style.display="none",E(this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap"))},a.prototype.uploadFailure=function(t,e,i,n){this.parent&&this.parent.isDestroyed||(this.parent.inputElement.contentEditable="true",E(t),i&&i.close(),this.parent.trigger(go,n),e&&document.body.contains(e.element)&&e.destroy())},a.prototype.popupClose=function(t,e,i,n){var r=this;this.parent.inputElement.contentEditable="true",n.element=i,n.detectImageSource=Sn.Pasted;var s=n.file;s.statusCode==="2"?this.parent.trigger(mo,n,function(o){if(!h(r.parent.insertImageSettings.path)){var l=r.parent.insertImageSettings.path+o.file.name;i.src=l,i.setAttribute("alt",o.file.name)}}):s.statusCode==="5"&&this.parent.trigger(rh,n,function(o){h(o.element.src)||(o.element.src="")}),this.popupCloseTime=setTimeout((function(){t.close(),i.style.opacity="1",this.toolbarEnableDisable(!1),e&&document.body.contains(e.element)&&e.destroy()}).bind(this),1500)},a.prototype.refreshPopup=function(t,e){var i=this.parent.iframeSettings.enable?this.parent.element.offsetTop+t.offsetTop:t.offsetTop,n=this.parent.element.offsetTop+this.parent.element.offsetHeight;i>n?(e.relateTo=this.parent.inputElement,e.offsetY=this.parent.iframeSettings.enable?-30:-65,e.element.style.display="block"):e&&(e.refreshPosition(t),e.element.style.display="block")},a.prototype.base64ToFile=function(t,e){for(var i=t.split(","),n=i[0].match(/:(.*?);/)[1],r=n.split("/")[1],s=atob(i[1]),o=s.length,l=new Uint8Array(o);o--;)l[o]=s.charCodeAt(o);if(x.isIE||navigator.appVersion.indexOf("Edge")>-1){var c=new Blob([l],{type:r});return _e(c,{name:e+"."+(h(r)?"":r)}),c}else return new File([l],e+"."+(h(r)?"":r),{type:r})},a.prototype.imageFormatting=function(t,e){h(e.elements[0].getAttribute("src"))||e.elements[0].classList.add("pasteContent_Img");var i=this.parent.createElement("span");i.appendChild(e.elements[0]);var n=i.innerHTML;this.contentRenderer=this.renderFactory.getRenderer(X.Content);var r=this.contentRenderer.getDocument(),s=this.nodeSelectionObj.getRange(r);this.saveSelection=this.nodeSelectionObj.save(s,r),this.parent.pasteCleanupSettings.prompt?this.pasteDialog(n,t,!1):this.parent.pasteCleanupSettings.plainText?this.plainFormatting(n,t,!1):this.parent.pasteCleanupSettings.keepFormat?this.formatting(n,!1,t):this.formatting(n,!0,t)},a.prototype.radioRender=function(){this.keepRadioButton=new _r({label:this.i10n.getConstant("keepFormat"),name:"pasteOption",checked:!0}),this.keepRadioButton.isStringTemplate=!0;var t=this.parent.element.querySelector("#keepFormating");this.keepRadioButton.appendTo(t),this.cleanRadioButton=new _r({label:this.i10n.getConstant("cleanFormat"),name:"pasteOption"}),this.cleanRadioButton.isStringTemplate=!0;var e=this.parent.element.querySelector("#cleanFormat");this.cleanRadioButton.appendTo(e),this.plainTextRadioButton=new _r({label:this.i10n.getConstant("plainText"),name:"pasteOption"}),this.plainTextRadioButton.isStringTemplate=!0;var i=this.parent.element.querySelector("#plainTextFormat");this.plainTextRadioButton.appendTo(i)},a.prototype.selectFormatting=function(t,e,i,n,r){i?this.formatting(t,!1,e):n?this.formatting(t,!0,e):this.plainFormatting(t,e,r)},a.prototype.pasteDialog=function(t,e,i){var n=this,r={buttons:[{click:function(){if(!n.dialogObj.isDestroyed){var o=n.parent.element.querySelector("#keepFormating").checked,l=n.parent.element.querySelector("#cleanFormat").checked;n.dialogObj.hide();var c=n.dialogObj;n.dialogRenderObj.close(c),n.dialogObj.destroy(),n.selectFormatting(t,e,o,l,i)}},buttonModel:{isPrimary:!0,cssClass:"e-flat "+Mp,content:this.i10n.getConstant("pasteDialogOk")}},{click:function(){if(!n.dialogObj.isDestroyed){n.dialogObj.hide();var o=n.dialogObj;n.dialogRenderObj.close(o),n.dialogObj.destroy()}},buttonModel:{cssClass:"e-flat "+Bp,content:this.i10n.getConstant("pasteDialogCancel")}}],header:this.i10n.getConstant("pasteFormat"),content:this.i10n.getConstant("pasteFormatContent")+'<br/><div><div style="padding-top:24px;"><input type="radio" class="'+xp+'" id="keepFormating"/></div><div style="padding-top:20px;"><input type="radio" class="'+Np+'" id="cleanFormat"/></div><div style="padding-top:20px;"><input type="radio" class="'+Op+'" id="plainTextFormat"/></div></div>',target:this.parent.element,width:"300px",height:"265px",cssClass:Rp,isModal:x.isDevice,visible:!1};this.dialogObj=this.dialogRenderObj.render(r);var s=this.parent.element.querySelector("#"+this.parent.getID()+"_pasteCleanupDialog");s!==null&&s.innerHTML!==""&&this.destroyDialog(s),s===null&&(s=this.parent.createElement("div",{id:this.parent.getID()+"_pasteCleanupDialog"}),this.parent.rootContainer.appendChild(s)),this.dialogObj.appendTo(s),this.radioRender(),this.dialogObj.show(),this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.updateCss=function(t,e){t&&e.cssClass&&(h(e.oldCssClass)?t.setProperties({cssClass:(t.cssClass+" "+e.cssClass).trim()}):t.setProperties({cssClass:(t.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){this.popupObj&&t.cssClass&&(h(t.oldCssClass)?k([this.popupObj.element],t.cssClass):(O([this.popupObj.element],t.oldCssClass),k([this.popupObj.element],t.cssClass))),this.updateCss(this.dialogObj,t),this.updateCss(this.uploadObj,t),this.updateCss(this.plainTextRadioButton,t),this.updateCss(this.cleanRadioButton,t),this.updateCss(this.keepRadioButton,t)},a.prototype.destroyDialog=function(t){var e=this.parent.element.querySelector(".e-rte-dialog-minheight");E(e);for(var i=t.children.length,n=0;n<i;n++)E(t.children[0])},a.prototype.docClick=function(t){var e=t.args.target;e&&e.classList&&this.dialogObj&&!b(e,"[id='"+this.dialogObj.element.id+"']")&&!e.classList.contains("e-toolbar-item")&&this.dialogObj&&this.dialogObj.hide()},a.prototype.cleanAppleClass=function(t){for(var e=t.querySelectorAll("br.Apple-interchange-newline"),i=0;i<e.length;i++)E(e[i]);return t},a.prototype.formatting=function(t,e,i){var n=this,r=this.parent.createElement("div",{className:"pasteContent",styles:"display:inline;"});this.isNotFromHtml&&this.containsHtml&&(t=this.splitBreakLine(t)),r.innerHTML=t,r=this.cleanAppleClass(r),this.parent.pasteCleanupSettings.deniedTags!==null&&(r=this.deniedTags(r)),e?r=this.deniedAttributes(r,e):this.parent.pasteCleanupSettings.deniedAttrs!==null&&(r=this.deniedAttributes(r,e)),this.parent.pasteCleanupSettings.allowedStyleProps!==null&&(r=this.allowedStyle(r)),this.saveSelection.restore();var s=r.innerHTML.split("&").join("&amp;");r.innerHTML=this.sanitizeHelper(s);for(var o=r.querySelectorAll("img"),l=0;l<o.length;l++)h(o[l].getAttribute("src"))||o[l].classList.add("pasteContent_Img"),this.setImageProperties(o[l]);if(this.addTempClass(r),r.querySelectorAll("picture").length>0&&this.processPictureElement(r),r.textContent!==""||!h(r.querySelector("img"))||!h(r.querySelector("table"))){var c=this.parent.createElement("div");c.innerHTML=t;var p=[];if(!h(c.querySelector("img"))){for(var d=c.querySelectorAll("img"),u=[],m=[],f=[],l=0;l<d.length;l++)d[l].getAttribute("src")&&d[l].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(u.push(d[l].getAttribute("src")),m.push(rt("rte_image")),f.push(d[l]));for(var g=[],y=void 0,l=0;l<u.length;l++)g.push(this.base64ToFile(u[l],m[l])),y={name:g[l].name,rawFile:g[l],size:g[l].size,type:g[l].type,status:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1"},p.push(y)}this.parent.trigger(al,{value:r.innerHTML,filesData:p},function(S){t=S.value}),r.innerHTML=this.parent.addAnchorAriaLabel(t),r=this.addTableClass(r,i.pasteTableSource),this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",i,function(S){_e(i,{elements:S.elements,imageElements:S.imgElem},!0),n.parent.formatter.onSuccess(n.parent,i)},r,null,null,this.parent.enterKey),this.parent.notify(Bo,{}),Rr(this.parent.contentModule.getDocument(),this.parent.inputElement),this.removeTempClass(),this.parent.notify(ni,{}),this.cropImageHandler(this.parent.inputElement)}},a.prototype.convertBlobToBase64=function(t){for(var e=t.querySelectorAll("img"),i=function(r){if(e[r].getAttribute("src")&&e[r].getAttribute("src").startsWith("blob")){var s=e[r].getAttribute("src"),o=new Image,l=function(){var c=document.createElement("canvas"),p=c.getContext("2d");c.width=o.width,c.height=o.height,p.drawImage(o,0,0);var d=c.toDataURL("image/png");e[r].src=d,o.removeEventListener("load",l)};o.src=s,o.addEventListener("load",l)}},n=0;n<e.length;n++)i(n)},a.prototype.cropImageHandler=function(t){var e=this,i=t.querySelectorAll(".e-img-cropped");if(i.length>0)for(var n=function(s){if(i[s].getAttribute("src").split(",")[0].indexOf("base64")>=0){var o=new Image;o.src=i[s].getAttribute("src");var l=document.createElement("canvas"),c=l.getContext("2d");o.onload=function(){var p=e.cropImageData[s].goalWidth/o.naturalWidth,d=e.cropImageData[s].goalHeight/o.naturalHeight,u=e.cropImageData[s].cropLength/p,m=e.cropImageData[s].cropTop/d,f=(e.cropImageData[s].goalWidth-e.cropImageData[s].cropLength-e.cropImageData[s].cropR)/p,g=(e.cropImageData[s].goalHeight-e.cropImageData[s].cropTop-e.cropImageData[s].cropB)/d;l.width=f,l.height=g,c.drawImage(o,u,m,f,g,0,0,f,g);var y=l.toDataURL("image/png");i[s].setAttribute("src",y),i[s].classList.remove("e-img-cropped"),e.imgUploading(e.parent.inputElement),e.parent.iframeSettings.enable&&e.parent.updateValue()}}},r=0;r<i.length;r++)n(r);else!h(this.parent.insertImageSettings.saveUrl)&&!h(this.parent.insertImageSettings.path)&&this.parent.inputElement.querySelectorAll("img").length>0&&this.parent.inputElement.querySelectorAll("img")[0].src.startsWith("blob")?(this.convertBlobToBase64(this.parent.inputElement),this.iframeUploadTime=setTimeout(function(){e.imgUploading(e.parent.inputElement),e.parent.iframeSettings.enable&&e.parent.updateValue()},20)):(this.imgUploading(this.parent.inputElement),this.parent.iframeSettings.enable&&this.parent.updateValue())},a.prototype.addTableClass=function(t,e){for(var i=t.querySelectorAll("table"),n=0;n<i.length;n++){var r=i[n].parentElement.nodeName==="FIGURE";this.parent.pasteCleanupSettings.keepFormat&&e&&!r?i[n].classList.add("e-rte-paste-"+e+"-table"):i[n].classList.contains("e-rte-table")||i[n].classList.add("e-rte-table")}return t},a.prototype.setImageProperties=function(t){this.parent.insertImageSettings.width!=="auto"&&t.setAttribute("width",this.parent.insertImageSettings.width),this.parent.insertImageSettings.minWidth!=="0"&&this.parent.insertImageSettings.minWidth!==0&&(t.style.minWidth=this.parent.insertImageSettings.minWidth.toString()),this.parent.insertImageSettings.maxWidth!==null&&(t.style.maxWidth=this.parent.getInsertImgMaxWidth().toString()),this.parent.insertImageSettings.height!=="auto"&&t.setAttribute("height",this.parent.insertImageSettings.height),this.parent.insertImageSettings.minHeight!=="0"&&this.parent.insertImageSettings.minHeight!==0&&(t.style.minHeight=this.parent.insertImageSettings.minHeight.toString()),this.parent.insertImageSettings.maxHeight!==null&&(t.style.maxHeight=this.parent.insertImageSettings.maxHeight.toString())},a.prototype.addTempClass=function(t){for(var e=t.children,i=0;i<e.length;i++)e[i].classList.add("pasteContent_RTE")},a.prototype.removeTempClass=function(){for(var t=this.parent.inputElement.querySelectorAll(".pasteContent_RTE"),e=0;e<t.length;e++)t[e].classList.remove("pasteContent_RTE"),t[e].getAttribute("class")===""&&t[e].removeAttribute("class")},a.prototype.sanitizeHelper=function(t){return t=ch(t,this.parent),t},a.prototype.plainFormatting=function(t,e,i){var n=this,r=this.parent.createElement("div",{className:"pasteContent",styles:"display:inline;"});if(r.innerHTML=t,this.detachInlineElements(r),this.getTextContent(r),r.textContent.trim()!==""){if(!h(r.firstElementChild)&&r.firstElementChild.tagName!=="BR"){var s=r.firstElementChild;if(!h(r.firstElementChild)){for(var o=this.parent.createElement("span"),l=0,c=0;l<s.childNodes.length;l++,c++)if(s.childNodes[l].nodeName==="#text")o.appendChild(s.childNodes[l]),r.insertBefore(o,r.firstElementChild),l--;else if(s.childNodes[l].nodeName!=="#text"&&c===0){for(var p=0;p<s.childNodes[l].childNodes.length;p++)o.appendChild(s.childNodes[l].childNodes[p]),r.insertBefore(o,r.firstElementChild),p--;l--}else break;s.hasChildNodes()||E(s)}}this.removeEmptyElements(r),this.saveSelection.restore(),r.innerHTML=this.sanitizeHelper(r.innerHTML),this.addTempClass(r),this.removingComments(r),this.parent.enterKey==="BR"&&!i?r=this.reframeToBrContent(r):this.parent.enterKey==="DIV"&&(r.innerHTML=r.innerHTML.replace(/<p class="pasteContent_RTE">/g,"<div>").replace(/<\/p>/g,"</div>")),this.parent.trigger(al,{value:r.innerHTML,filesData:null},function(d){t=d.value}),r.innerHTML=t,this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",e,function(d){_e(e,{elements:d.elements,imageElements:d.imgElem},!0),n.parent.formatter.onSuccess(n.parent,e)},r,null,null,this.parent.enterKey),this.removeTempClass()}else this.saveSelection.restore(),_e(e,{elements:[]},!0),this.parent.formatter.onSuccess(this.parent,e)},a.prototype.removingComments=function(t){var e=t.innerHTML;e=e.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=e},a.prototype.reframeToBrContent=function(t){for(var e=this.parent.createElement("div",{className:"pasteContent",styles:"display:inline;"});!h(t.firstChild);){var i=this.parent.createElement("br"),n=t.firstChild;if(n.nodeName==="#text"){var r=!h(n.nextSibling);e.appendChild(n),r&&e.appendChild(i)}else{var s=n.nodeName==="BR";s?e.appendChild(n):e.appendChild(n.childNodes[0]),!h(n)&&!h(n.nextSibling)&&e.appendChild(i),!s&&!h(n)&&E(n)}}return e},a.prototype.getTextContent=function(t){for(var e=0;e<this.blockNode.length;e++)for(var i=t.querySelectorAll(this.blockNode[e]),n=0;n<i.length;n++){for(var r=void 0,s=0,o=0,l=void 0;s<i[n].childNodes.length;s++,o++)if(i[n].childNodes[s].nodeName==="DIV"||i[n].childNodes[s].nodeName==="P"||i[n].childNodes[s].nodeName==="#text"&&i[n].childNodes[s].nodeValue.replace(/\u00a0/g,"&nbsp;")!=="&nbsp;"&&i[n].childNodes[s].textContent.trim()==="")r=i[n].childNodes[s].parentElement,i[n].childNodes[s].parentElement.parentElement.insertBefore(i[n].childNodes[s],i[n].childNodes[s].parentElement),s--;else{if(r=i[n].childNodes[s].parentElement,l==="text"){var c=r.previousElementSibling;c.appendChild(i[n].childNodes[s])}else{var p=this.parent.createElement("div",{id:"newDiv"});p.appendChild(i[n].childNodes[s]),r.parentElement.insertBefore(p,r)}s--,l="text"}h(r)||E(r)}for(var d=t.querySelectorAll("*"),e=0;e<d.length;e++)for(var u=d[e].attributes,n=0;n<u.length;n++)d[e].removeAttribute(u[n].name),n--},a.prototype.detachInlineElements=function(t){for(var e=0;e<this.inlineNode.length;e++)for(var i=t.querySelectorAll(this.inlineNode[e]),n=0;n<i.length;n++)if(!(i[n]===t.firstChild&&i[n].nodeName==="SPAN")){for(var r=void 0,s=0;s<i[n].childNodes.length;s++)r=i[n].childNodes[s].parentElement,i[n].childNodes[s].parentElement.parentElement.insertBefore(i[n].childNodes[s],i[n].childNodes[s].parentElement),s--;h(r)||E(r)}},a.prototype.findDetachEmptyElem=function(t){var e;if(h(t.parentElement))e=null;else{var i=t.parentElement.textContent.length>0&&t.parentElement.textContent.match(/\u00a0/g)&&t.parentElement.textContent.match(/\u00a0/g).length>0;!i&&t.parentElement.textContent.trim()===""&&t.parentElement.getAttribute("class")!=="pasteContent"?e=this.findDetachEmptyElem(t.parentElement):e=t}return e},a.prototype.removeEmptyElements=function(t){for(var e=t.querySelectorAll(":empty"),i=0;i<e.length;i++)if(e[i].tagName!=="BR"){var n=this.findDetachEmptyElem(e[i]);h(n)||E(n)}},a.prototype.tagGrouping=function(t){for(var e=t.slice(),i=Object.keys(Pl),n=i.map(function(l){return Pl[""+l]}),r=[],s=0;s<e.length;s++)if(e[s].split("[").length>1&&(e[s]=e[s].split("[")[0].trim()),i.indexOf(e[s])>-1)for(var o=0;o<n[i.indexOf(e[s])].length;o++)e.indexOf(n[i.indexOf(e[s])][o])<0&&r.indexOf(n[i.indexOf(e[s])][o])<0&&r.push(n[i.indexOf(e[s])][o]);return t=t.concat(r)},a.prototype.attributesfilter=function(t){for(var e=0;e<t.length;e++)if(t[e].split("[").length>1){for(var i=t[e].split("[")[1].split("]")[0].split(","),n=[],r=[],s=0;s<i.length;s++)i[s].indexOf("!")<0?n.push(i[s].trim()):r.push(i[s].split("!")[1].trim());var o=n.length>1?n.join("]["):n.join(),l=r.length>1?r.join("]["):r.join();if(l.length>0){var c=o!==""?t[e].split("[")[0]+"["+o+"]":t[e].split("[")[0];t[e]=c+":not(["+l+"])"}else t[e]=t[e].split("[")[0]+"["+o+"]"}return t},a.prototype.deniedTags=function(t){var e=h(this.parent.pasteCleanupSettings.deniedTags)?[]:this.parent.pasteCleanupSettings.deniedTags.slice();e=this.attributesfilter(e),e=this.tagGrouping(e);for(var i=0;i<e.length;i++)for(var n=t.querySelectorAll(e[i]),r=n.length-1;r>=0;r--){for(var s=n[r].parentNode;n[r].firstChild;)s.insertBefore(n[r].firstChild,n[r]);s.removeChild(n[r])}return t},a.prototype.deniedAttributes=function(t,e){var i=h(this.parent.pasteCleanupSettings.deniedAttrs)?[]:this.parent.pasteCleanupSettings.deniedAttrs.slice();e&&i.push("style");for(var n=0;n<i.length;n++)for(var r=t.querySelectorAll("["+i[n]+"]"),s=0;s<r.length;s++)r[s].removeAttribute(i[n]);return t},a.prototype.allowedStyle=function(t){var e=h(this.parent.pasteCleanupSettings.allowedStyleProps)?[]:this.parent.pasteCleanupSettings.allowedStyleProps.slice();e.push("list-style-type","list-style");for(var i=t.querySelectorAll("[style]"),n=0;n<i.length;n++){for(var r="",s=[],o=i[n].getAttribute("style").split(";"),l=0;l<o.length;l++)e.indexOf(o[l].split(":")[0].trim())>=0&&s.push(o[l]);i[n].removeAttribute("style"),r=s.join(";").trim()===""?s.join(";"):s.join(";")+";",r&&i[n].setAttribute("style",r)}return t},a.prototype.processPictureElement=function(t){for(var e=t.querySelectorAll("picture"),i=0;i<e.length;i++){var n=e[i].querySelector("img"),r=e[i].querySelectorAll("source");if(n&&n.getAttribute("src"))for(var s=n.getAttribute("src"),o=new URL(s),l=0;l<r.length;l++){var c=r[l].getAttribute("srcset");if(c&&c.indexOf("http")===-1){var p=o.origin+c;r[l].setAttribute("srcset",p)}}}},a.prototype.getModuleName=function(){return"pasteCleanup"},a}(),Cu=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),$n=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Su=function(a){Cu(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return $n([v(null)],t.prototype,"downloadUrl",void 0),$n([v(null)],t.prototype,"getImageUrl",void 0),$n([v(null)],t.prototype,"uploadUrl",void 0),$n([v(null)],t.prototype,"url",void 0),t}(ee),bh=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Te=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Tu=["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"],Eu=function(a){bh(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Te([v(Tu)],t.prototype,"items",void 0),Te([v(!0)],t.prototype,"visible",void 0),t}(ee);(function(a){bh(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Te([v("")],t.prototype,"id",void 0),Te([v("")],t.prototype,"text",void 0),Te([v("auto")],t.prototype,"width",void 0),Te([v("")],t.prototype,"cssClass",void 0),Te([v(!1)],t.prototype,"showAlwaysInPopup",void 0),Te([v(!1)],t.prototype,"disabled",void 0),Te([v("")],t.prototype,"prefixIcon",void 0),Te([v("")],t.prototype,"suffixIcon",void 0),Te([v(!0)],t.prototype,"visible",void 0),Te([v("None")],t.prototype,"overflow",void 0),Te([v("")],t.prototype,"template",void 0),Te([v("Button")],t.prototype,"type",void 0),Te([v("Both")],t.prototype,"showTextOn",void 0),Te([v(null)],t.prototype,"htmlAttributes",void 0),Te([v("")],t.prototype,"tooltipText",void 0),Te([v("Left")],t.prototype,"align",void 0),Te([v(-1)],t.prototype,"tabIndex",void 0),Te([v()],t.prototype,"name",void 0),t})(ee);var Lu=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Jn=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},wu=function(a){Lu(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Jn([v(!0)],t.prototype,"allowSearchOnTyping",void 0),Jn([v("contains")],t.prototype,"filterType",void 0),Jn([v(!0)],t.prototype,"ignoreCase",void 0),Jn([v(null)],t.prototype,"placeholder",void 0),t}(ee),ku=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ql=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Du=[{field:"name",headerText:"Name",minWidth:120,template:'<span class="e-fe-text">${name}</span>',customAttributes:{class:"e-fe-grid-name"}},{field:"_fm_modified",headerText:"DateModified",type:"dateTime",format:"MMMM dd, yyyy HH:mm",minWidth:120,width:"190"},{field:"size",headerText:"Size",minWidth:90,width:"110",template:qs(function(a){return'<span class="e-fe-size">'+a.size+"</span>"}),format:"n2"}],xu=function(a){ku(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Ql([v(!0)],t.prototype,"columnResizing",void 0),Ql([v(Du)],t.prototype,"columns",void 0),t}(ee),Nu=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zn=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Ou=["Open","|","Cut","Copy","|","Delete","Download","Rename","|","Details"],Mu=["Open","|","Cut","Copy","Paste","|","Delete","Rename","Download","|","Details"],Bu=["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"],Ru=function(a){Nu(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Zn([v(Ou)],t.prototype,"file",void 0),Zn([v(Mu)],t.prototype,"folder",void 0),Zn([v(Bu)],t.prototype,"layout",void 0),Zn([v(!0)],t.prototype,"visible",void 0),t}(ee),Au=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),er=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Pu=function(a){Au(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return er([v("650px")],t.prototype,"maxWidth",void 0),er([v("240px")],t.prototype,"minWidth",void 0),er([v(!0)],t.prototype,"visible",void 0),er([v("None")],t.prototype,"sortOrder",void 0),t}(ee),Iu=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Li=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},Hu=function(a){Iu(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Li([v("")],t.prototype,"allowedExtensions",void 0),Li([v(!0)],t.prototype,"autoUpload",void 0),Li([v(!1)],t.prototype,"autoClose",void 0),Li([v(!1)],t.prototype,"directoryUpload",void 0),Li([v(0)],t.prototype,"minFileSize",void 0),Li([v(3e7)],t.prototype,"maxFileSize",void 0),t}(ee),Fu=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.showFullScreen=function(t){var e=this;if(this.parent.toolbarSettings.enable===!0&&this.parent.editorMode!=="Markdown"&&!h(this.parent.quickToolbarModule)&&this.parent.quickToolbarModule.hideQuickToolbars(),this.parent.showTooltip&&!h(document.querySelector(".e-tooltip-wrap"))&&this.parent.notify(yn,{args:t}),this.scrollableParent=Fs(this.parent.element),!this.parent.element.classList.contains(_i)){var i={cancel:!1,requestType:"Maximize",targetItem:"Maximize",args:t};this.parent.trigger(Re,i,function(n){n.cancel||(e.parent.toolbarSettings.enableFloating&&!e.parent.inlineMode.enable&&e.parent.toolbarSettings.enable&&(e.parent.getToolbarElement().style.width="100%",e.parent.getToolbarElement().style.top="0px"),e.parent.element.classList.add(_i),e.toggleParentOverflow(!0),e.parent.toolbarModule&&(e.parent.getBaseToolbarObject().toolbarObj.items[0].properties||e.parent.getBaseToolbarObject().toolbarObj.removeItems(0),x.isDevice&&e.parent.toolbarModule.removeFixedTBarClass(),e.parent.toolbarModule.updateItem({targetItem:"Maximize",updateItem:"Minimize",baseToolbar:e.parent.getBaseToolbarObject()})),e.parent.refreshUI(),e.parent.trigger(ct,{requestType:"Maximize",targetItem:"Maximize",args:t}))})}},a.prototype.hideFullScreen=function(t){var e=this;if(this.parent.toolbarSettings.enable===!0&&this.parent.editorMode!=="Markdown"&&!h(this.parent.quickToolbarModule)&&this.parent.quickToolbarModule.hideQuickToolbars(),this.parent.showTooltip&&!h(document.querySelector(".e-tooltip-wrap"))&&this.parent.notify(yn,{args:t}),this.parent.element.classList.contains(_i)){var i={cancel:!1,requestType:"Minimize",targetItem:"Minimize",args:t};this.parent.trigger(Re,i,function(n){if(!n.cancel){e.parent.element.classList.remove(_i);for(var r=document.querySelectorAll(".e-rte-overflow"),s=0;s<r.length;s++)O([r[s]],["e-rte-overflow"]);e.parent.toolbarModule&&(e.parent.getBaseToolbarObject().toolbarObj.items[0].properties||e.parent.getBaseToolbarObject().toolbarObj.removeItems(0),e.parent.toolbarModule.updateItem({targetItem:"Minimize",updateItem:"Maximize",baseToolbar:e.parent.getBaseToolbarObject()}),x.isDevice&&e.parent.inlineMode.enable&&e.parent.toolbarModule.addFixedTBarClass()),e.parent.refreshUI(),e.parent.trigger(ct,{requestType:"Minimize",targetItem:"Minimize",args:t})}})}},a.prototype.toggleParentOverflow=function(t){if(!h(this.scrollableParent))for(var e=0;e<this.scrollableParent.length;e++)if(this.scrollableParent[e].nodeName==="#document"){var i=document.querySelector("body");k([i],["e-rte-overflow"])}else{var i=this.scrollableParent[e];k([i],["e-rte-overflow"])}},a.prototype.onKeyDown=function(t){var e=t.args;switch(e.action){case"full-screen":this.showFullScreen(t.args),e.preventDefault();break;case"escape":this.hideFullScreen(t.args),e.preventDefault();break}},a.prototype.addEventListener=function(){this.parent.on(we,this.onKeyDown,this),this.parent.on(Y,this.destroy,this),this.parent.on(st,this.moduleDestroy,this)},a.prototype.removeEventListener=function(){this.parent.off(we,this.onKeyDown),this.parent.off(Y,this.destroy),this.parent.off(st,this.moduleDestroy)},a.prototype.destroy=function(){if(!h(this.parent)){this.parent.element.classList.contains(_i)&&this.toggleParentOverflow(!1);for(var t=document.querySelectorAll(".e-rte-overflow"),e=0;e<t.length;e++)O([t[e]],["e-rte-overflow"]);this.removeEventListener()}},a.prototype.moduleDestroy=function(){this.parent=null},a}();function As(a,t,e,i){var n;if(e){var r=t.contentModule.getDocument();n=r.querySelector("body")}else n=t.element;if(Object.keys(a).length)for(var s=0,o=Object.keys(a);s<o.length;s++){var l=o[s];if(l==="class")n.classList.add(a[""+l]);else if(l==="disabled"&&a[""+l]==="disabled")t.enabled=!1,t.setEnable();else if(l==="readonly"&&a[""+l]==="readonly")t.readonly=!0,t.setReadOnly(i);else if(l==="style")n.setAttribute("style",a[""+l]);else if(l==="tabindex")t.inputElement.setAttribute("tabindex",a[""+l]);else if(l==="placeholder")t.placeholder=a[""+l],t.setPlaceHolder();else{var c=["name","required"];c.indexOf(l)>-1?t.valueContainer.setAttribute(l,a[""+l]):n.setAttribute(l,a[""+l])}}}var qu=function(){function a(t){this.isSticky=!1,this.isActive=!1,this.parent=t,this.addEventListener(),this.isDestroyed=!1}return a.prototype.addEventListener=function(){this.parent.on(ko,this.toolbarClick,this),this.parent.on(Do,this.toolbarDoubleClick,this),this.parent.on(wt,this.editAreaClick,this),this.parent.on(we,this.onKeyDown,this),this.parent.on(Y,this.destroy,this)},a.prototype.toolbarClick=function(t){this.parent.focusIn(),this.isSticky?(t.args.action="escape",this.actionHandler(t,"keyBoard")):(this.isActive=!0,this.actionHandler(t,"click")),this.parent.quickToolbarModule&&!h(this.parent.quickToolbarSettings.text)&&this.parent.element.ownerDocument.contains(this.parent.quickToolbarModule.textQTBar.element)&&this.parent.quickToolbarModule.textQTBar.hidePopup()},a.prototype.toolbarDoubleClick=function(t){this.isActive=!0,this.isSticky=!0,this.parent.focusIn(),this.actionHandler(t,"dbClick")},a.prototype.onKeyDown=function(t){var e=t.args;(!h(e)&&!h(e.action)&&(e.action==="format-copy"||e.action==="format-paste")||e.action==="escape"&&(this.previousAction==="format-copy"||this.previousAction==="format-paste"))&&((e.action==="format-copy"||e.action==="format-paste")&&e.stopPropagation(),x.userAgent.indexOf("Firefox")!==-1&&e.preventDefault(),this.actionHandler(t,"keyBoard"))},a.prototype.actionHandler=function(t,e){var i,n=!1,r,s,o;switch(e){case"dbClick":s=t.args,o=s.item,r=t.args.originalEvent,i="format-copy";break;case"keyBoard":s=null,r=t.args,n=!0,i=t.args.action,i==="escape"&&(this.isSticky=!1,this.isActive=!1);break;case"click":s=t.args,o=s.item,r=t.args.originalEvent,i="format-copy";break;case"docClick":r=t,i="format-paste";break}this.updateCursor(n);var l=!(e==="docClick"||i==="escape");this.updateToolbarBtn(l),h(o)&&(o={command:"FormatPainter",subCommand:"FormatPainter"});var c={requestType:"FormatPainter",originalEvent:r,name:i,item:o},p={formatPainterAction:i};this.parent.formatter.process(this.parent,c,r,p),this.previousAction=i},a.prototype.updateCursor=function(t){!this.parent.inputElement.classList.contains("e-rte-cursor-brush")&&!t?k([this.parent.inputElement],"e-rte-cursor-brush"):this.isSticky||O([this.parent.inputElement],"e-rte-cursor-brush")},a.prototype.updateToolbarBtn=function(t){if(!h(this.parent.element.querySelector(".e-rte-format-painter"))){var e=this.parent.element.querySelector(".e-rte-format-painter").parentElement.parentElement;t?k([e],"e-active"):this.isSticky||O([e],"e-active")}},a.prototype.editAreaClick=function(t){this.isActive&&(this.isSticky||(this.isActive=!1),this.actionHandler(t,"docClick"),this.updateToolbarBtn(!1))},a.prototype.destroy=function(){this.isDestroyed||(this.parent.off(ko,this.toolbarClick),this.parent.off(wt,this.editAreaClick),this.parent.off(Do,this.toolbarDoubleClick),this.parent.off(we,this.onKeyDown),this.parent.off(Y,this.destroy),this.parent=null,this.isSticky=null,this.isActive=null,this.previousAction=null,this.isDestroyed=!0)},a.prototype.getModuleName=function(){return"formatPainter"},a}(),ju=function(){function a(t,e){this.parent=t,this.locator=e,this.i10n=e.getService("rteLocale"),this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.isDestroyed=!1,this.isPopupDestroyed=!1}return a.prototype.destroy=function(){this.isDestroyed||(this.removeEventListener(),this.isDestroyed=!0)},a.prototype.childDestroy=function(){if(!this.isPopupDestroyed){if(this.popupObj&&!this.popupObj.isDestroyed){if(this.popupObj.element&&this.popupObj.element.querySelector(".e-rte-emoji-search")){var t=Tr(this.popupObj.element.querySelector(".e-rte-emoji-search"),"textbox");t&&!t.isDestroyed&&t.destroy()}if(this.popupObj.element&&this.popupObj.element.querySelector(".e-rte-emojipicker-toolbar")){var e=Tr(this.popupObj.element.querySelector(".e-rte-emojipicker-toolbar"),"toolbar");e&&!e.isDestroyed&&e.destroy()}var i=this.popupObj.element.querySelector(".e-clear-icon");h(i)||C.remove(i,"mousedown",this.searchFilter),this.popupObj.destroy(),this.isPopupDestroyed=!0}if(this.popDiv&&(C.remove(this.popDiv,"keydown",this.onKeyDown),C.remove(this.popDiv,"keyup",this.searchFilter),this.popDiv.querySelector(".e-rte-emojipicker-btn"))){var n=this.popDiv.querySelector(".e-rte-emojipicker-btn");C.remove(n,"scroll",this.scrollEvent),C.remove(n,"click",this.emojiBtnClick)}}},a.prototype.addEventListener=function(){this.parent.on(Dr,this.toolbarClick,this),this.parent.on(oi,this.docClick,this),this.parent.on(we,this.onkeyPress,this),this.parent.on(Ke,this.onkeyUp,this),this.parent.on(ei,this.contentscroll,this),this.parent.on(Zt,this.contentscroll,this),this.parent.on(Y,this.destroy,this)},a.prototype.toolbarClick=function(t){var e=this,i,n,r;h(this.parent.element.querySelector(".e-emoji"))?this.parent.inlineMode.enable&&(r=this.parent.element.ownerDocument.querySelector(".e-emoji")):r=this.parent.element.querySelector(".e-emoji"),this.divElement=r.closest("div"),this.parent.inputElement.contains(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).startContainer)||this.parent.contentModule.getEditPanel().focus();var s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());this.save=this.parent.formatter.editorManager.nodeSelection.save(s,this.parent.contentModule.getDocument()),this.clickEvent=t.args;var o=this.parent.emojiPickerSettings.iconsSet;if(this.popupObj){if(O([this.divElement],"e-active"),this.popupObj.element.querySelector(".e-rte-emoji-search")||!this.parent.emojiPickerSettings.showSearchBox){this.popupObj.hide();return}this.popupObj.hide()}this.popDiv=this.parent.createElement("div",{className:"e-rte-emojipicker-popup",id:this.parent.getID()+"_emojiPicker"}),!h(this.parent.getToolbar())&&!this.parent.inlineMode.enable?this.parent.getToolbar().parentElement.appendChild(this.popDiv):this.parent.inlineMode.enable&&this.parent.rootContainer.appendChild(this.popDiv),C.add(this.popDiv,"keydown",this.onKeyDown,this),C.add(this.popDiv,"keyup",this.searchFilter,this);var l=this.parent.element.querySelector(".e-toolbar-extended"),c;if(h(l))c="10001";else{var p=window.getComputedStyle(l);c=p.getPropertyValue("z-index")}var d,u,m;if(!h(t.args)&&!this.parent.inlineMode.enable&&h(this.parent.quickToolbarSettings.text))d=t.args.originalEvent.target,d=d.classList.contains("e-toolbar-item")?d.firstChild:d.parentElement,u="left",m="bottom";else if(h(t.x)&&h(t.y)&&!this.parent.inlineMode.enable&&h(this.parent.quickToolbarSettings.text)){if(d=this.parent.inputElement,this.parent.contentModule.getDocument().getSelection().rangeCount>0){var f=this.getCoordinates();u=f.left,m=f.top}}else if(h(t.x)&&h(t.y)&&(this.parent.inlineMode.enable||!h(this.parent.quickToolbarSettings.text))){if(this.parent.notify(xr,{}),this.parent.contentModule.getDocument().getSelection().rangeCount>0){var f=this.getCoordinates();u=f.left,m=f.top}}else d=this.parent.inputElement,u=t.x,m=t.y;if(this.popupObj=new At(this.popDiv,{targetType:"relative",relateTo:d,collision:{X:"fit",Y:"none"},offsetY:8,viewPortElement:this.parent.element,position:{X:u,Y:m},enableRtl:this.parent.enableRtl,zIndex:parseInt(c,10)+1,actionOnScroll:"hide",close:function(){e.parent.isBlur=!1,e.childDestroy(),E(e.popupObj.element),e.popupObj=null}}),this.isPopupDestroyed=!1,k([this.popupObj.element],"e-popup-open"),this.popupObj.refreshPosition(d),(!h(t.args)||h(t.x)&&h(t.y))&&this.parent.emojiPickerSettings.showSearchBox){var g=B("input",{id:"e-rte-emoji-search",className:"e-rte-emoji-search"});this.popDiv.append(g);var y=new Hs({placeholder:this.i10n.getConstant("emojiPickerTypeToFind"),showClearButton:!0});y.appendTo(g),g.focus()}var S=this.popupObj.element.querySelector(".e-clear-icon");h(S)||C.add(S,"mousedown",this.searchFilter,this);var T=this.parent.createElement("div",{className:"e-rte-emojipicker-toolbar"});this.popDiv.appendChild(T);for(var L=[],w=0;w<this.parent.emojiPickerSettings.iconsSet.length;w++)h(this.parent.emojiPickerSettings.iconsSet[w].iconCss)?L.push({text:"&#x"+this.parent.emojiPickerSettings.iconsSet[w].code+";",htmlAttributes:(n={},n.title=this.parent.emojiPickerSettings.iconsSet[w].name,n)}):L.push({prefixIcon:this.parent.emojiPickerSettings.iconsSet[w].iconCss,htmlAttributes:(i={},i.title=this.parent.emojiPickerSettings.iconsSet[w].name,i)});var N=new eh({items:L,clicked:this.emojiToolbarClick.bind(this)});N.appendTo(T);var M=this.parent.createElement("div",{className:"e-rte-emojipicker-btn"});this.popDiv.appendChild(M);var I,A=window.getComputedStyle(this.popDiv);if(h(t.args)&&!(h(t.x)&&h(t.y))||!this.parent.emojiPickerSettings.showSearchBox)I=this.popDiv.getBoundingClientRect().height-T.getBoundingClientRect().height-2*parseFloat(A.borderWidth)+"px",M.style.setProperty("height",I,"important");else{var V=this.parent.element.querySelector(".e-rte-emoji-search").parentElement,Q=window.getComputedStyle(V);I=this.popDiv.getBoundingClientRect().height-T.getBoundingClientRect().height-V.getBoundingClientRect().height-parseFloat(Q.marginTop)-parseFloat(Q.marginBottom)-2*parseFloat(A.borderWidth)+"px",M.style.setProperty("height",I,"important")}for(var w=0;w<o.length;w++){var Z=this.parent.createElement("div",{className:"e-rte-emojipicker-group"});M.appendChild(Z);var W=this.parent.createElement("div",{className:"e-rte-emojipicker-name"});W.innerText=this.parent.emojiPickerSettings.iconsSet[w].name,W.setAttribute("aria-label",this.parent.emojiPickerSettings.iconsSet[w].name),Z.appendChild(W);var $=this.parent.createElement("div",{className:"e-rte-emojipickerbtn-group"});Z.appendChild($);for(var te=0;te<o[w].icons.length;te++){var j=this.parent.createElement("button",{className:"e-btn  e-control"});j.innerHTML=this.buttoncode(this.parent.emojiPickerSettings.iconsSet[w].icons[te].code),j.setAttribute("aria-label",this.parent.emojiPickerSettings.iconsSet[w].icons[te].desc),j.setAttribute("title",this.parent.emojiPickerSettings.iconsSet[w].icons[te].desc),$.appendChild(j),j.innerHTML.length>2&&(j.style.fontSize="17px")}}C.add(M,"scroll",this.scrollEvent,this),C.add(M,"click",this.emojiBtnClick,this);var J=this.parent.element.querySelectorAll(".e-rte-emojipicker-btn button");h(this.parent.element.querySelector(".e-rte-emoji-search"))&&!h(t.args)&&(J[0].focus(),k([J[0]],"e-focus"));var ne=this.parent.element.querySelector(".e-rte-emojipicker-btn"),ae=this.parent.element.querySelectorAll(".e-rte-emojipicker-toolbar button"),q;h(ne)||(q=Math.round(ne.scrollTop)),q<ae[0].offsetHeight&&k([ae[0]],"e-selected"),this.popupObj&&k([this.divElement],"e-active")},a.prototype.buttoncode=function(t){var e=t.split("-"),i=e.map(function(n){return String.fromCodePoint(parseInt(n,16))}).join("‍");return i},a.prototype.docClick=function(t){var e=t.args.target;e&&e.classList&&this.popupObj&&!b(e,"[id='"+this.popupObj.element.id+"']")&&!e.classList.contains("e-emoji")&&!e.classList.contains("e-toolbar-item")&&this.popupObj&&(O([this.divElement],"e-active"),this.popupObj.hide())},a.prototype.scrollEvent=function(){var t=this.parent.element.querySelector(".e-rte-emojipicker-btn"),e=this.parent.element.querySelectorAll(".e-rte-emojipicker-group"),i=this.parent.element.querySelectorAll(".e-rte-emojipicker-toolbar button"),n;h(t)||(n=Math.round(t.scrollTop));for(var r=0,s=0;s<i.length;s++)n<i[0].offsetHeight&&(h(i[s+1])||O([i[s+1]],"e-selected"),k([i[0]],"e-selected"));for(var o=0;o<e.length;o++)if(r+=Math.round(e[o].offsetHeight),n>=r){for(var l=0;l<i.length;l++)i[l].classList.contains("e-selected")&&O([i[l]],"e-selected");h(i[o+1])||k([i[o+1]],"e-selected")}},a.prototype.contentscroll=function(){if(h(this.clickEvent)&&this.popupObj){O([this.divElement],"e-active"),this.popupObj.hide();return}},a.prototype.emojiToolbarClick=function(t){for(var e={text:t.item.htmlAttributes.title},i=e.text,n=this.parent.element.querySelectorAll(".e-rte-emojipicker-group"),r=this.parent.element.querySelectorAll(".e-rte-emojipicker-btn button"),s=this.parent.element.querySelectorAll(".e-rte-emojipicker-toolbar button"),o=0;o<s.length;o++)s[o].classList.contains("e-selected")&&O([s[o]],"e-selected");for(var o=0;o<r.length;o++)r[o].classList.contains("e-focus")&&O([r[o]],"e-focus");var l=this.parent.element.querySelector(".e-rte-emojipicker-btn"),c=0;n.forEach(function(p){var d=p.childNodes[0],u=p.childNodes[1].childNodes[0],m=d.getAttribute("aria-label");i===m?d&&(l.scrollTop=c+10,k([u],"e-focus"),u.focus()):(c+=p.scrollHeight,O([u],"e-focus"))})},a.prototype.onKeyDown=function(t){var e=this.parent.element.querySelectorAll(".e-rte-emojipicker-btn button"),i=this.parent.element.querySelectorAll(".e-rte-emojipickerbtn-group"),n=this.parent.element.querySelector(".e-rte-emojisearch-btn button");if(t.keyCode===27&&this.popupObj&&(O([this.divElement],"e-active"),this.popupObj.hide()),t.keyCode===13){var r=document.activeElement;r.classList.contains("e-btn")&&(this.emojiBtnClick(t),t.preventDefault())}var s=t.srcElement;if(!h(s)&&s.classList.contains("e-rte-emoji-search")&&t.keyCode===40)for(var o=0;o<e.length;o++)e[o].classList.contains("e-focus")&&O([e[o]],"e-focus");if(!h(n))this.filterKeyHandler(t);else for(var o=0;o<e.length;o++){var l=o;if(e[o].classList.contains("e-focus")){if(t.keyCode===40){if(e.length-4>o){for(var c=0,p=0;p<i.length;p++)for(var d=0;d<i[p].childNodes.length;d++){var u=i[p].childNodes[d];if(u.classList.contains("e-focus")&&c!==1){var m=d,f=i[p].lastChild,g=Math.floor(d%6),y=i[p].childNodes.length-1,S=Math.floor(y%6);if(m!==-1){var T=m+6;if(h(i[p].childNodes[T]))if(h(i[p].childNodes[T])&&!f.classList.contains("e-focus")&&S<g){var L=e[o];O([L],"e-focus");var w=i[p].lastChild;k([w],"e-focus"),w.focus(),c=1;break}else{var L=e[o];O([L],"e-focus");var w=i[p+1].childNodes[g];k([w],"e-focus"),w.focus(),c=1;break}else{var L=e[o];O([L],"e-focus");var w=e[l+=6];k([w],"e-focus"),w.focus();break}}}}break}}else if(t.keyCode===38){if(o>=6)for(var c=0,p=0;p<i.length;p++)for(var d=0;d<i[p].childNodes.length;d++){var u=i[p].childNodes[d];if(u.classList.contains("e-focus")&&c!==1){var m=d,N=h(i[p-1])?null:i[p-1].childNodes.length%6||6;if(m!==-1){var M=m-6;if(h(i[p].childNodes[M]))if(h(i[p-1].childNodes[i[p-1].childNodes.length-(N-d)])){var L=e[o];O([L],"e-focus");var w=i[p-1].lastChild;k([w],"e-focus"),w.focus(),c=1;break}else{var L=e[o];O([L],"e-focus");var w=i[p-1].childNodes[i[p-1].childNodes.length-(N-d)];k([w],"e-focus"),w.focus(),c=1;break}else{var L=e[o];O([L],"e-focus");var w=e[l-=6];k([w],"e-focus"),w.focus();break}}}}else{var L=e[o];O([L],"e-focus");var w=e[l-=1],I=this.popupObj.element.querySelector(".e-rte-emoji-search");if(h(w)&&!h(I)){I.focus();break}k([w],"e-focus"),w.focus()}break}else if(t.keyCode===39){if(e.length!==o+1){var L=e[o];O([L],"e-focus");var w=e[l+=1];k([w],"e-focus"),e[l].focus()}break}else if(t.keyCode===37){if(o>0){var L=e[o];O([L],"e-focus");var w=e[l-=1];k([w],"e-focus"),e[l].focus()}break}}}if(t.keyCode===40){var L=this.parent.element.querySelector(".e-focus");if(h(L)){var w=e[0];k([w],"e-focus"),e[0].focus()}}},a.prototype.filterKeyHandler=function(t){var e=this.parent.element.querySelectorAll(".e-rte-emojisearch-btn button"),i=this.parent.element.querySelector(".e-focus");if(h(i)&&t.keyCode===40){var n=e[0];k([n],"e-focus"),e[0].focus()}else for(var r=0;r<e.length;r++){var s=r,o=e[r];if(o.classList.contains("e-focus")){if(t.keyCode===38)if(r>=6){var l=e[r];O([l],"e-focus");var n=e[s-=6];k([n],"e-focus"),n.focus();break}else{var c=e[r];O([c],"e-focus");var n=e[s-=1],p=this.popupObj.element.querySelector(".e-rte-emoji-search");if(h(n)&&!h(p)){p.focus();break}k([n],"e-focus"),n.focus()}else if(t.keyCode===40){if(e.length-6>r){var d=e[r];O([d],"e-focus");var n=e[s+=6];k([n],"e-focus"),n.focus();break}}else if(t.keyCode===39){if(e.length!==r+1){var u=e[r];O([u],"e-focus");var n=e[s+=1];k([n],"e-focus"),e[s].focus()}break}else if(t.keyCode===37&&r>0){var m=e[r];O([m],"e-focus");var n=e[s-=1];k([n],"e-focus"),e[s].focus();break}}}},a.prototype.searchFilter=function(t,e){var i=this.parent.element.querySelector(".e-rte-emoji-search"),n=this.parent.element.querySelector(".e-content");if(document.activeElement===i||document.activeElement===n){var r=void 0;e!==":"&&!h(e)?r=e.replace(/^:/,""):h(e)||(r=e);var s=h(i)?r:i.value,o=this.parent.element.querySelectorAll(".e-rte-emojipicker-btn button"),l=this.parent.element.querySelector(".e-rte-emojipicker-btn"),c=this.parent.element.querySelectorAll(".e-rte-emojipicker-group"),p=this.parent.element.querySelector(".e-rte-emojipicker-toolbar"),d=this.parent.element.querySelector(".e-rte-emojisearch-btn"),u=this.popDiv.childNodes[0],m=window.getComputedStyle(u),f=u.nodeName==="SPAN"?u.getBoundingClientRect().height+parseFloat(m.marginTop)+parseFloat(m.marginBottom):0,g=window.getComputedStyle(this.popDiv),y=h(d)?o:Array.from(o).filter(function(Q){return!d.contains(Q)});s===""||e===":"?(p.style.display="",l.style.height=this.popDiv.getBoundingClientRect().height-p.getBoundingClientRect().height-f-2*parseFloat(g.borderWidth)+"px",c.forEach(function(Q){Q.style.display=""})):(c.forEach(function(Q){Q.style.display="none"}),p.style.display="none",l.style.height=this.popDiv.getBoundingClientRect().height-f-2*parseFloat(g.borderWidth)+"px");var S=this.parent.createElement("div",{className:"e-rte-emojisearch-btn"}),T=this.parent.element.querySelector(".e-rte-emojisearch-btn");T&&T.remove();for(var L=this.parent.createElement("div",{className:"e-rte-emojiSearch-noEmoji"}),w=!0,N=0;N<y.length;N++)if(!h(y[N].getAttribute("title"))){for(var M=y[N].getAttribute("title").toLowerCase(),I=M.split(" "),A=0;A<I.length;A++)if(I[A].startsWith(s.toLowerCase())&&s!==""){var V=y[N].cloneNode(!0);S.appendChild(V),w=!1;break}}w&&!this.parent.element.querySelector(".e-rte-emojiSearch-noEmoji")&&s!==""&&e!==":"&&e!==": :"?(L.innerHTML='<span style="color: rgba(0, 0, 0, 0.75); font-weight: 500; font-size: 16px;">'+this.i10n.getConstant("emojiPickerNoResultFound")+' 😥 </span><br><span style="color: rgba(0, 0, 0, 0.75);"> '+this.i10n.getConstant("emojiPickerTrySomethingElse")+" ? </span>",L.style.margin="55px",l.appendChild(L)):(!w&&this.parent.element.querySelector(".e-rte-emojiSearch-noEmoji")||s===""&&e===":"||s===""&&this.parent.element.querySelector(".e-rte-emojiSearch-noEmoji"))&&l.removeChild(this.parent.element.querySelector(".e-rte-emojiSearch-noEmoji")),l.appendChild(S)}else return},a.prototype.emojiBtnClick=function(t){for(var e=new MouseEvent("mouseleave",{bubbles:!0,cancelable:!0}),i=this.parent.element.querySelectorAll(".e-rte-emojipicker-popup [data-tooltip-id]"),n=0;n<i.length;n++)i[n].dispatchEvent(e);var r=t.target;if(r.tagName==="BUTTON"){r.focus();var s=this.save.startOffset,o=this.save.range.startContainer.textContent,l=o.substring(s,s+1);(!h(this.clickEvent)||l!==":")&&this.save.restore(),this.popupObj&&(O([this.divElement],"e-active"),this.popupObj.hide());var c=t;this.parent.formatter.process(this.parent,{item:{command:"EmojiPicker",subCommand:"EmojiPicker",value:r.innerHTML}},t,c)}},a.prototype.onkeyPress=function(t){var e=t.args,i=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().contentWindow.getSelection():this.parent.contentModule.getDocument().getSelection();if(!(i.rangeCount<=0)){var n=i.getRangeAt(0),r=n.startOffset,s=i.focusNode.textContent.substring(r-1,r),o=/\s/.test(s),l=i.focusNode.textContent.substring(r-1,r)===":",c=i.focusNode.textContent.charAt(r-1)===":";if(e.keyCode===186&&e.shiftKey&&(o||i.focusOffset===0)){var p=this.getCoordinates();this.parent.showEmojiPicker(p.left,p.top)}if(e.keyCode===8&&c&&this.popupObj&&(O([this.divElement],"e-active"),this.popupObj.hide()),e.keyCode===32&&l&&this.popupObj){O([this.divElement],"e-active");var d=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().ownerDocument:this.parent.contentModule.getDocument();this.parent.showTooltip&&!h(d.querySelector(".e-tooltip-wrap"))&&this.parent.notify(yn,{args:event}),this.popupObj.hide()}this.popupObj&&(e.keyCode===37||e.keyCode===38||e.keyCode===39||e.keyCode===27||e.keyCode===40)&&(this.onKeyDown(e),e.preventDefault())}},a.prototype.onkeyUp=function(t){var e=t.args,i=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().contentWindow.getSelection():this.parent.contentModule.getDocument().getSelection();if(!(i.rangeCount<=0)){for(var n=i.getRangeAt(0),r=n.startOffset,s,o=0,l=r-1;l>=r-15;l--){var c=i.focusNode.textContent.substring(l-1,l),p=/:$/.test(c);p&&!h(this.popDiv)&&o===0&&(s=n.startContainer.textContent.substring(l-1,r),this.searchFilter(e,s),o=1)}var d=i.focusNode.textContent.substring(r-1,r);d===":"&&!h(this.popupObj)&&(s=d,this.searchFilter(e,s))}},a.prototype.getCoordinates=function(){var t,e=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().contentWindow.getSelection():window.getSelection(),i=e.getRangeAt(0),n;(i.startContainer.nodeName==="P"||i.startContainer.nodeName==="DIV")&&i.startContainer.childNodes[0].nodeName!=="#text"&&(n=i.startContainer.childNodes[0]);var r=h(n)?i.getBoundingClientRect():n.getBoundingClientRect(),s=this.parent.element.querySelector(".e-rte-content"),o=this.parent.element,l=o.offsetHeight-s.offsetHeight,c=r.top-this.parent.inputElement.getBoundingClientRect().top,p=r.left-this.parent.inputElement.getBoundingClientRect().left,d=window.innerHeight,u=330,m=c,f=p+r.width;return o.getBoundingClientRect().top<0&&!this.parent.inlineMode.enable&&(m=m+s.getBoundingClientRect().top-l),r.top<u?m=m:r.top+u>d&&(m-=u+20),this.parent.inputElement&&(t={top:m+60,left:f+8}),t},a.prototype.removeEventListener=function(){this.parent.off(Dr,this.toolbarClick),this.parent.off(oi,this.docClick),this.parent.off(we,this.onkeyPress),this.parent.off(Ke,this.onkeyUp),this.parent.off(ei,this.contentscroll),this.parent.off(Zt,this.contentscroll),this.parent.off(Y,this.destroy)},a.prototype.getModuleName=function(){return"emojiPicker"},a}(),zu={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},insertAudio:{command:"Audios",subCommand:"Audio"},insertVideo:{command:"Videos",subCommand:"Video"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"},copyFormatPainter:{command:"FormatPainter",value:"format-copy"},applyFormatPainter:{command:"FormatPainter",value:"format-paste"},escapeFormatPainter:{command:"FormatPainter",value:"escape"}},Uu=function(){function a(){this.services={}}return a.prototype.register=function(t,e){h(this.services[""+t])&&(this.services[""+t]=e)},a.prototype.getService=function(t){if(h(this.services[""+t]))throw"The service "+t+" is not registered";return this.services[""+t]},a.prototype.destroy=function(){this.services={}},a}(),Vu=function(){function a(){this.rendererMap={}}return a.prototype.addRenderer=function(t,e){var i=Na(X,t);h(this.rendererMap[""+i])&&(this.rendererMap[""+i]=e)},a.prototype.getRenderer=function(t){var e=Na(X,t);if(h(this.rendererMap[""+e]))throw"The renderer "+e+" is not found";return this.rendererMap[""+e]},a.prototype.destroy=function(){this.rendererMap={}},a}(),Ae=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),R=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},_u=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(!0)],t.prototype,"enable",void 0),R([v(!0)],t.prototype,"enableFloating",void 0),R([v(nt.Expand)],t.prototype,"type",void 0),R([v(td)],t.prototype,"items",void 0),R([v({})],t.prototype,"itemConfigs",void 0),t}(ee),Wu=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v([".jpeg",".jpg",".png"])],t.prototype,"allowedTypes",void 0),R([v("inline")],t.prototype,"display",void 0),R([v("Blob")],t.prototype,"saveFormat",void 0),R([v("auto")],t.prototype,"width",void 0),R([v("auto")],t.prototype,"height",void 0),R([v(null)],t.prototype,"saveUrl",void 0),R([v(null)],t.prototype,"path",void 0),R([v(!0)],t.prototype,"resize",void 0),R([v(null)],t.prototype,"removeUrl",void 0),R([v(0)],t.prototype,"minWidth",void 0),R([v(null)],t.prototype,"maxWidth",void 0),R([v(0)],t.prototype,"minHeight",void 0),R([v(null)],t.prototype,"maxHeight",void 0),R([v(!1)],t.prototype,"resizeByPercent",void 0),t}(ee),Qu=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v([".wav",".mp3",".m4a",".wma"])],t.prototype,"allowedTypes",void 0),R([v("Inline")],t.prototype,"layoutOption",void 0),R([v("Blob")],t.prototype,"saveFormat",void 0),R([v(null)],t.prototype,"saveUrl",void 0),R([v(null)],t.prototype,"removeUrl",void 0),R([v(null)],t.prototype,"path",void 0),t}(ee),Ku=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v([".mp4",".mov",".wmv",".avi"])],t.prototype,"allowedTypes",void 0),R([v("Inline")],t.prototype,"layoutOption",void 0),R([v("Blob")],t.prototype,"saveFormat",void 0),R([v("auto")],t.prototype,"width",void 0),R([v("auto")],t.prototype,"height",void 0),R([v(null)],t.prototype,"saveUrl",void 0),R([v(null)],t.prototype,"path",void 0),R([v(!0)],t.prototype,"resize",void 0),R([v(null)],t.prototype,"removeUrl",void 0),R([v(0)],t.prototype,"minWidth",void 0),R([v(null)],t.prototype,"maxWidth",void 0),R([v(0)],t.prototype,"minHeight",void 0),R([v(null)],t.prototype,"maxHeight",void 0),R([v(!1)],t.prototype,"resizeByPercent",void 0),t}(ee),Gu=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([P()],t.prototype,"beforeSend",void 0),R([se({getImageUrl:null,url:null,uploadUrl:null},Su)],t.prototype,"ajaxSettings",void 0),R([v(!1)],t.prototype,"allowDragAndDrop",void 0),R([se({visible:!0,file:["Open","|","Cut","Copy","|","Delete","Rename","|","Details"],folder:["Open","|","Cut","Copy","Paste","|","Delete","Rename","|","Details"],layout:["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"]},Ru)],t.prototype,"contextMenuSettings",void 0),R([v("")],t.prototype,"cssClass",void 0),R([se({},xu)],t.prototype,"detailsViewSettings",void 0),R([v(!1)],t.prototype,"enable",void 0),R([se({maxWidth:"650px",minWidth:"240px",visible:!0},Pu)],t.prototype,"navigationPaneSettings",void 0),R([v("/")],t.prototype,"path",void 0),R([v(null)],t.prototype,"rootAliasName",void 0),R([se({},wu)],t.prototype,"searchSettings",void 0),R([v(!0)],t.prototype,"showFileExtension",void 0),R([v(!1)],t.prototype,"showHiddenItems",void 0),R([v(!0)],t.prototype,"showThumbnail",void 0),R([v("Ascending")],t.prototype,"sortOrder",void 0),R([se({visible:!0,items:["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"]},Eu)],t.prototype,"toolbarSettings",void 0),R([se({autoUpload:!0,minFileSize:0,maxFileSize:3e7,allowedExtensions:"",autoClose:!1},Hu)],t.prototype,"uploadSettings",void 0),R([v("LargeIcons")],t.prototype,"view",void 0),t}(ee),Xu=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v("100%")],t.prototype,"width",void 0),R([v(fr)],t.prototype,"styles",void 0),R([v(!0)],t.prototype,"resize",void 0),R([v(0)],t.prototype,"minWidth",void 0),R([v(null)],t.prototype,"maxWidth",void 0),t}(ee),Yu=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(!0)],t.prototype,"enable",void 0),R([v(!1)],t.prototype,"showOnRightClick",void 0),R([v("hide")],t.prototype,"actionOnScroll",void 0),R([v(["Open","Edit","UnLink"])],t.prototype,"link",void 0),R([v(["Replace","Align","Caption","Remove","-","InsertLink","OpenImageLink","EditImageLink","RemoveImageLink","Display","AltText","Dimension"])],t.prototype,"image",void 0),R([v(["AudioReplace","AudioRemove","AudioLayoutOption"])],t.prototype,"audio",void 0),R([v(["VideoReplace","VideoAlign","VideoRemove","VideoLayoutOption","VideoDimension"])],t.prototype,"video",void 0),R([v(null)],t.prototype,"text",void 0),R([v(["TableHeader","TableRows","TableColumns","BackgroundColor","-","TableRemove","Alignments","TableCellVerticalAlign","Styles"])],t.prototype,"table",void 0),t}(ee),$u=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v("b; em; font; sub; sup; kbd; i; s; u; code; strong; span; p; div; h1; h2; h3; h4; h5; h6; blockquote; ol; ul; li; pre;")],t.prototype,"allowedFormats",void 0),R([v(null)],t.prototype,"deniedFormats",void 0),t}(ee),Ju=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(od)],t.prototype,"iconsSet",void 0),R([v(!0)],t.prototype,"showSearchBox",void 0),t}(ee),Zu=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(!1)],t.prototype,"prompt",void 0),R([v(null)],t.prototype,"deniedAttrs",void 0),R([v(["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-family","font-size","font-weight","font-style","height","left","line-height","list-style-type","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","position","right","table-layout","text-align","text-decoration","text-transform","text-indent","top","vertical-align","visibility","white-space","width"])],t.prototype,"allowedStyleProps",void 0),R([v(null)],t.prototype,"deniedTags",void 0),R([v(!0)],t.prototype,"keepFormat",void 0),R([v(!1)],t.prototype,"plainText",void 0),t}(ee),ef=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(null)],t.prototype,"default",void 0),R([v("72px")],t.prototype,"width",void 0),R([v(mr)],t.prototype,"items",void 0),t}(ee),tf=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(null)],t.prototype,"default",void 0),R([v("60px")],t.prototype,"width",void 0),R([v(id)],t.prototype,"items",void 0),t}(ee),nf=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(null)],t.prototype,"default",void 0),R([v("65px")],t.prototype,"width",void 0),R([v(gr)],t.prototype,"types",void 0),t}(ee),rf=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v("#ff0000")],t.prototype,"default",void 0),R([v("Palette")],t.prototype,"mode",void 0),R([v(10)],t.prototype,"columns",void 0),R([v(nd)],t.prototype,"colorCode",void 0),R([v(!1)],t.prototype,"modeSwitcher",void 0),t}(ee),sf=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v("#ffff00")],t.prototype,"default",void 0),R([v("Palette")],t.prototype,"mode",void 0),R([v(10)],t.prototype,"columns",void 0),R([v(rd)],t.prototype,"colorCode",void 0),R([v(!1)],t.prototype,"modeSwitcher",void 0),t}(ee),of=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(vr)],t.prototype,"types",void 0),t}(ee),af=function(a){Ae(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return R([v(br)],t.prototype,"types",void 0),t}(ee),yh=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),an=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},lf=function(a){yh(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return an([v([])],t.prototype,"styles",void 0),an([v([])],t.prototype,"scripts",void 0),t}(ee),hf=function(a){yh(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return an([v(!1)],t.prototype,"enable",void 0),an([v(null)],t.prototype,"attributes",void 0),an([se({},lf)],t.prototype,"resources",void 0),t}(ee),cf=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kl=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},pf=function(a){cf(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return Kl([v(!1)],t.prototype,"enable",void 0),Kl([v(!0)],t.prototype,"onSelection",void 0),t}(ee),df=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(uo,this.enterHandler,this),this.parent.on(Y,this.destroy,this),this.parent.on(st,this.moduleDestroy,this)},a.prototype.destroy=function(){h(this.parent)||this.removeEventListener()},a.prototype.moduleDestroy=function(){this.parent=null},a.prototype.removeEventListener=function(){this.parent.off(uo,this.enterHandler),this.parent.off(Y,this.destroy),this.parent.off(st,this.moduleDestroy)},a.prototype.getRangeNode=function(){this.range=this.parent.getRange(),this.startNode=this.range.startContainer.nodeName==="#text"?this.range.startContainer.parentElement:this.range.startContainer,this.endNode=this.range.endContainer.nodeName==="#text"?this.range.endContainer.parentElement:this.range.endContainer},a.prototype.enterHandler=function(t){var e=this;this.getRangeNode();var i=!0;this.formatTags=["h1","h2","h3","h4","h5","h6","blockquote"];var n=this.processedTableImageCursor();if((n.start||n.end)&&(n.startName==="TABLE"||n.endName==="TABLE")){this.handleCursorAtTableSide(t,n.start,n.end);return}if((n.start||n.end||this.range.startContainer.nodeName==="IMG")&&this.parent.enterKey==="BR"&&(n.startName==="IMG"||n.endName==="IMG"||this.range.startContainer.nodeName==="IMG")){this.handleEnterKeyAtImageSide(t,n.start,n.end);return}if(!h(this.startNode.closest("TABLE"))&&!h(this.endNode.closest("TABLE"))){i=!1;for(var r=this.startNode,s=r;!this.parent.formatter.editorManager.domNode.isBlockNode(r);)r=r.parentElement,s=r;i=!(s.tagName==="TH"||s.tagName==="TD"||s.tagName==="TBODY")}if(t.args.which===13&&!t.args.ctrlKey&&(x.isDevice?t.args.key==="Enter":t.args.code==="Enter")&&h(this.startNode.closest("LI, UL, OL"))&&h(this.endNode.closest("LI, UL, OL"))&&h(this.startNode.closest(".e-img-inner"))&&i&&h(this.startNode.closest("PRE"))&&h(this.endNode.closest("PRE"))&&h(this.startNode.closest("BLOCKQUOTE"))&&h(this.endNode.closest("BLOCKQUOTE"))){var o=t.args.shiftKey,l={cancel:!1,name:Re,requestType:o?"ShiftEnterAction":"EnterAction",originalEvent:t.args};this.parent.trigger(Re,l,function(c){if(!c.cancel){if(e.parent.formatter.getUndoRedoStack().length===0&&e.parent.formatter.saveData(),!(e.range.startOffset===e.range.endOffset&&e.range.startContainer===e.range.endContainer)){if(e.range.startContainer.nodeName==="SPAN"&&(e.range.startContainer.classList.contains("e-video-wrap")||e.range.startContainer.classList.contains("e-audio-wrap"))||e.range.deleteContents(),e.range.startContainer.nodeName==="#text"&&e.range.startContainer.textContent.length===0&&e.range.startContainer.parentElement!==e.parent.inputElement)e.parent.enterKey==="BR"?e.range.startContainer.parentElement.innerHTML="&#8203;":e.range.startContainer.parentElement.innerHTML="<br>";else if(e.range.startContainer===e.parent.inputElement&&e.range.startContainer.innerHTML===""){e.range.startContainer.innerHTML="<br>";var p=e.range.startContainer.childNodes[e.range.startOffset];e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),p,0)}else if(e.parent.inputElement===e.range.startContainer){var p=e.range.startContainer.childNodes[e.range.startOffset];if(p.nodeName==="#text"&&p.textContent.length===0)e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),p,p.textContent.length===0?0:p.previousSibling.textContent.length);else if(e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),p,p.textContent.length>=0?0:1),p.previousSibling.textContent.length===0){if(E(p.previousSibling),!o){for(var d=h(p.lastChild)?p:p.lastChild;!h(d)&&d.nodeName!=="#text"&&d.nodeName!=="BR";)d=d.lastChild;d.nodeName!=="BR"&&d.parentElement.textContent.length===0&&d.parentElement.innerHTML.length===0&&d.parentElement.nodeName!=="BR"&&d.parentElement.appendChild(e.parent.createElement("BR")),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),d.nodeName==="BR"?d:d.parentElement,d.parentElement.textContent.length>=0||d.nodeName==="BR"?0:1)}}else if(p.textContent.length===0){for(var d=p.previousSibling.nodeName==="#text"?p.previousSibling:p.previousSibling.lastChild;!h(d)&&d.nodeName!=="#text";)d=d.lastChild;e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),d,d.textContent.length),E(p)}else if(e.parent.enterKey!=="BR"&&p.previousSibling.textContent.length!==0&&p.textContent.length!==0){t.args.preventDefault();return}e.getRangeNode()}}if(e.range.startContainer===e.range.endContainer&&e.range.startOffset===e.range.endOffset&&e.range.startContainer===e.parent.inputElement){if(!(e.parent.inputElement.childNodes.length===1&&e.parent.inputElement.childNodes[0].nodeName==="TABLE"))if(h(e.range.startContainer.childNodes[e.range.startOffset])){for(var u=e.range.startContainer.childNodes[e.range.startOffset-1];u.lastChild!==null&&u.nodeName!=="#text";)u=u.lastChild;e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),u,u.nodeName==="BR"?0:u.textContent.length)}else e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),e.range.startContainer.childNodes[e.range.startOffset],0);e.getRangeNode()}if(e.parent.enterKey==="P"&&!o||e.parent.enterKey==="DIV"&&!o||e.parent.shiftEnterKey==="P"&&o||e.parent.shiftEnterKey==="DIV"&&o){if(e.range.startOffset===1&&e.parent.inputElement.childNodes.length===1&&e.parent.inputElement.childNodes[0].nodeName==="TABLE"){var m=e.createInsertElement(o);m.appendChild(e.parent.createElement("BR")),e.parent.inputElement.appendChild(m),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),m,0)}else{var f=void 0;i&&e.parent.formatter.editorManager.domNode.isBlockNode(e.startNode)?f=e.startNode:f=e.parent.formatter.editorManager.domNode.blockParentNode(e.startNode);var g=!1,y=!1;if(e.range.startOffset!==0&&e.range.endOffset!==0&&e.range.startContainer===e.range.endContainer&&!(!h(f.childNodes[0])&&(f.childNodes[0].nodeName==="IMG"||f.querySelectorAll("img, audio, video").length>0))){var S=e.range.startContainer.textContent,T=S.substring(0,e.range.startOffset);T.charCodeAt(e.range.startOffset-1)!==160&&T.trim().length===0&&(y=!0)}else e.range.startOffset===0&&e.range.endOffset===0&&(y=!0);e.removeBRElement(f);var L=x.userAgent.indexOf("Firefox")!==-1&&e.range.startOffset===0&&e.range.startContainer===e.range.endContainer&&e.range.startContainer.nodeName==="#text"&&!e.parent.formatter.editorManager.domNode.isBlockNode(e.range.startContainer.previousSibling)&&e.range.startContainer.parentElement===e.range.startContainer.previousSibling.parentElement,w=e.range.startContainer.nodeName==="#text"&&e.range.startContainer.textContent.includes("​")&&e.range.startContainer.textContent.trim()==="​"||e.range.startContainer.nodeName==="#text"&&!h(e.range.startContainer.textContent[e.range.startOffset])&&e.range.startContainer.textContent[e.range.startOffset].includes("​")&&e.range.startContainer.textContent[e.range.startOffset]==="​"&&e.parent.inputElement.textContent[0]!=="​";if(!w&&!L&&(e.range.startOffset===0&&e.range.endOffset===0||y)&&!(!h(e.range.startContainer.previousSibling)&&(e.range.startContainer.previousSibling.nodeName==="IMG"||e.range.startContainer.previousSibling.nodeName==="BR"))){var N=void 0,m=void 0;!h(e.range.startContainer.childNodes)&&(e.range.startContainer.textContent.length===0||e.range.startContainer.nodeName!=="#text"&&!h(e.range.startContainer.querySelector(".e-video-clickelem"))&&e.range.startContainer.querySelector(".e-video-clickelem").textContent.length===0)&&(e.range.startContainer.querySelectorAll("img, audio, video").length>0||!h(e.range.startContainer.querySelector(".e-video-clickelem"))||e.range.startContainer.nodeName==="IMG"||e.range.startContainer.nodeName==="TABLE")?(m=e.createInsertElement(o),g=!0,N=!1):f.textContent.trim().length!==0||f.childNodes[0].nodeName==="IMG"||f.textContent.trim()===""&&f.querySelectorAll("img, audio, video").length>0?(e.range.startOffset===e.range.endOffset&&e.range.startOffset!==0?m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!1).cloneNode(!0):(m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0).cloneNode(!0),g=!0),N=!1):(m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0).cloneNode(!0),N=!0);var M=void 0;for(e.formatTags.indexOf(m.nodeName.toLocaleLowerCase())<0?M=e.createInsertElement(o):M=e.parent.createElement(m.nodeName);m.firstChild;)M.appendChild(m.firstChild);if(f.parentElement.insertBefore(M,f),!N){var d=M,I=void 0;if(e.range.startOffset===e.range.endOffset&&e.range.startOffset!==0)for(;!h(d)&&d.nodeName!=="#text"&&d.nodeName!=="BR";)I=d,d=d.lastChild;else I=d;I.innerHTML="<br>",g||E(f)}e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),M.nextElementSibling,0)}else if(f.textContent.length===0&&!(!h(f.childNodes[0])&&f.childNodes[0].nodeName==="IMG"||f.querySelectorAll("video").length>0||f.querySelectorAll("audio").length>0||f.querySelectorAll("img").length>0))if(!h(f.children[0])&&f.children[0].tagName!=="BR"){var m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!1).cloneNode(!0);e.parent.formatter.editorManager.domNode.insertAfter(m,f),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),m,m.textContent.length>=0?0:1)}else{var M=e.createInsertElement(o);M.innerHTML="<br>",e.parent.formatter.editorManager.domNode.insertAfter(M,f),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),M,0)}else if(e.range.startContainer===e.range.endContainer&&e.range.startContainer.nodeName==="SPAN"&&(e.range.startContainer.classList.contains("e-video-wrap")||e.range.startContainer.classList.contains("e-audio-wrap"))){if(f.textContent.trim().length>0){for(var m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0),A=h(m.previousSibling.querySelector(".e-video-wrap"))?m.previousSibling.querySelector(".e-audio-wrap"):m.previousSibling.querySelector(".e-video-wrap"),V=!1,Q=A.previousSibling;!h(Q)&&Q.nodeName!=="#text";)Q=Q.lastChild;if(h(Q)){var Z=e.parent.createElement("br");A.parentElement.appendChild(Z),V=!0}V?e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),A.parentElement,0):e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),Q,Q.textContent.length),E(A)}else{for(var m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0),p=m.previousSibling;!h(p.firstChild);)E(p.firstChild);var Z=e.parent.createElement("br");p.appendChild(Z),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),p,0)}h(e.parent.audioModule)||e.parent.audioModule.hideAudioQuickToolbar(),h(e.parent.videoModule)||e.parent.videoModule.hideVideoQuickToolbar()}else{var m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0);if(!h(m.childNodes[0])&&m.childNodes[0].nodeName==="#text"&&m.childNodes[0].textContent.length===0&&E(m.childNodes[0]),m.textContent.trim().length===0||m.childNodes[0].textContent.trim().includes("​")&&m.childNodes[0].textContent.trim()==="​"){var Z=e.parent.createElement("br");if(e.startNode.nodeName==="A"){var W=e.startNode.parentElement;e.startNode.parentElement.insertBefore(Z,e.startNode),E(e.startNode),e.startNode=W}else e.startNode.nodeName!=="BR"&&e.startNode.appendChild(Z);m.childNodes[0].textContent===`
`&&E(m.childNodes[0]),m.childNodes[0].textContent.trim().includes("​")&&m.childNodes[0].textContent.trim()==="​"&&E(m.childNodes[0]),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),e.startNode,0)}if((e.parent.enterKey==="P"||e.parent.enterKey==="DIV")&&!o||(e.parent.shiftEnterKey==="DIV"||e.parent.shiftEnterKey==="P")&&o){var $=e.formatTags.indexOf(m.nodeName.toLocaleLowerCase());if($<0||$>=0&&m.textContent.trim().length===0){for(var te=e.createInsertElement(o);m.firstChild;)te.appendChild(m.firstChild);e.parent.formatter.editorManager.domNode.insertAfter(te,m),E(m),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),e.parent.formatter.editorManager.domNode.isBlockNode(e.startNode)?te:e.startNode,0)}}}}t.args.preventDefault()}if(e.parent.enterKey==="BR"&&!o||e.parent.shiftEnterKey==="BR"&&o){var j=void 0;if(e.parent.formatter.editorManager.domNode.isBlockNode(e.startNode))j=e.startNode;else{for(var J=e.startNode,ne=J;!e.parent.formatter.editorManager.domNode.isBlockNode(J);)ne=J,J=J.parentElement;j=J===e.parent.inputElement?ne:J}var ae=window.getComputedStyle(j);e.removeBRElement(j);for(var q=j.lastChild;!h(q)&&!(q.nodeName==="#text"||q.nodeName==="BR"||q.nodeName==="IMG");)q=q.lastChild;var me=e.range.startContainer===q?e.range.startContainer.textContent.length:j.textContent.length,Pt=e.range.startContainer.nodeName==="IMG"||e.range.startContainer.childNodes.length>0&&e.range.startContainer.childNodes[e.range.startOffset].nodeName==="IMG";if(j!==e.parent.inputElement&&e.parent.formatter.editorManager.domNode.isBlockNode(j)&&e.range.startOffset===e.range.endOffset&&(e.range.startOffset===me||j.textContent.trim().length===0&&Pt)){var le=e.parent.createElement("br");if(e.range.startOffset===0&&e.range.startContainer.nodeName==="TABLE")e.range.startContainer.parentElement.insertBefore(le,e.range.startContainer);else if(q.nodeName==="BR"&&j.textContent.length===0)e.parent.formatter.editorManager.domNode.insertAfter(le,q);else if(e.range.startOffset===0&&e.range.endOffset===0&&Pt){var ke=e.range.startContainer.nodeName==="IMG"?e.range.startContainer:e.range.startContainer.childNodes[e.range.startOffset];j.insertBefore(le,ke),le=ke}else{var _t=e.parent.createElement("br"),kt=!h(e.range.startContainer.parentElement)&&e.range.startContainer.parentElement.nodeName==="A"&&e.range.startContainer.parentElement.textContent.length===e.range.startOffset?e.range.startContainer.parentElement:e.range.startContainer;e.parent.formatter.editorManager.domNode.insertAfter(le,kt),e.parent.formatter.editorManager.domNode.insertAfter(_t,kt);var Dt=kt.nextElementSibling,xt=h(Dt)?null:Dt.nextElementSibling;!h(Dt)&&!h(xt)&&!h(xt.nextElementSibling)&&Dt.nodeName==="BR"&&xt.nodeName==="BR"&&xt.nextElementSibling.nodeName==="BR"&&xt.nextElementSibling.remove()}e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),le,0)}else if(!h(j)&&j!==e.parent.inputElement&&j.nodeName!=="BR")if(j.textContent.trim().length===0||j.textContent.trim().length===1&&j.textContent.charCodeAt(0)===8203){var m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,j,!0).cloneNode(!0);e.parent.formatter.editorManager.domNode.insertAfter(m,j);var It=e.parent.createElement("br");m.parentElement.insertBefore(It,m),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),m,0)}else{var m=void 0,It=e.parent.createElement("br");if(e.range.startOffset===0&&e.range.endOffset===0&&!h(j.previousSibling)&&j.previousSibling.nodeName==="BR"&&j.nodeName!=="P"&&j.nodeName!=="DIV"){m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,j,!1).cloneNode(!0),e.parent.formatter.editorManager.domNode.insertAfter(It,j),e.insertFocusContent();for(var d=It.nextSibling;!h(d)&&d.nodeName!=="#text";)d=d.lastChild;e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),d,0)}else j!==e.parent.inputElement&&(ae.display==="inline"||ae.display==="inline-block")?(m=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,j,!0).cloneNode(!0),j.parentElement.insertBefore(It,j),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),j,0),e.insertFocusContent()):e.insertBRElement()}else e.insertBRElement();t.args.preventDefault()}e.triggerActionComplete(t,o)}})}},a.prototype.removeBRElement=function(t){x.userAgent.indexOf("Firefox")!==-1&&this.range.endOffset===t.textContent.length&&(t.textContent.length!==0||t.querySelectorAll("BR").length>1)&&!h(t.lastChild)&&t.lastChild.nodeName==="BR"&&E(t.lastChild)},a.prototype.insertBRElement=function(){var t=!1,e=!0;this.range.endContainer.textContent.length===0&&this.range.startContainer.nodeName==="BR"&&(e=!1);for(var i=this.parent.createElement("br"),n=this.startNode;n.lastChild;)n=n.lastChild;var r=this.startNode.nodeName==="A"&&this.endNode.nodeName==="A"&&!h(this.range.startContainer.parentElement)&&this.range.startOffset===this.range.endOffset&&this.range.startContainer.textContent.trim().length===n.textContent.trim().length;if(this.startNode.nodeName==="BR"&&this.endNode.nodeName==="BR"&&this.range.startOffset===0&&this.range.startOffset===this.range.endOffset?(this.parent.formatter.editorManager.domNode.insertAfter(i,this.startNode),t=!0):(this.startNode===this.parent.inputElement&&!h(this.range.startContainer.previousSibling)&&this.range.startContainer.previousSibling.nodeName==="BR"&&this.range.startContainer.textContent.length===0&&(t=!0),r?this.parent.formatter.editorManager.domNode.insertAfter(i,this.startNode):this.range.insertNode(i)),t||!h(i.nextElementSibling)&&i.nextElementSibling.tagName==="BR"||!h(i.nextSibling)&&i.nextSibling.textContent.length>0)this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),!h(i.nextSibling)&&e?i.nextSibling:i,0),t=!1;else{var s=this.parent.createElement("br");r?this.parent.formatter.editorManager.domNode.insertAfter(s,this.startNode):this.range.insertNode(s),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),i,0)}},a.prototype.insertFocusContent=function(){this.range.startContainer.textContent.length===0&&(this.range.startContainer.nodeName==="#text"?this.range.startContainer.parentElement.innerHTML="&#8203;":this.range.startContainer.innerHTML="&#8203;")},a.prototype.createInsertElement=function(t){var e;this.parent.enterKey==="DIV"&&!t||this.parent.shiftEnterKey==="DIV"&&t?e=this.parent.createElement("div"):(this.parent.enterKey==="P"&&!t||this.parent.shiftEnterKey==="P"&&t)&&(e=this.parent.createElement("p"));var i=this.parent.formatter.editorManager.domNode.blockNodes()[0].previousSibling,n=this.parent.formatter.editorManager.domNode.blockNodes()[0].nextSibling;return!h(i)&&i.nodeName!=="#text"&&i.hasAttribute("style")&&i.nodeName!=="TABLE"&&e.setAttribute("style",i.getAttribute("style")),h(i)&&!h(n)&&n.nodeName!=="#text"&&n.hasAttribute("style")&&n.nodeName!=="TABLE"&&e.setAttribute("style",n.getAttribute("style")),e},a.prototype.triggerActionComplete=function(t,e){this.parent.trigger(ct,{requestType:e?"ShiftEnterAction":"EnterAction",args:t.args})},a.prototype.handleCursorAtTableSide=function(t,e,i){var n=this;if(this.parent.enterKey!=="BR"){var r=t.args.shiftKey,s={cancel:!1,name:Re,requestType:r?"ShiftEnterAction":"EnterAction",originalEvent:t.args};this.parent.trigger(Re,s,function(o){if(!o.cancel){var l=n.parent.createElement(n.parent.enterKey);l.innerHTML="<br>";var c=void 0;e&&(c=n.range.startContainer.childNodes[n.range.startOffset],c.parentElement.insertBefore(l,c)),i&&(c=n.range.startContainer.childNodes[n.range.startOffset-1],h(c.nextSibling)?h(c.nextSibling)&&c.parentElement.appendChild(l):c.parentElement.insertBefore(l,c.nextSibling)),n.parent.formatter.editorManager.nodeSelection.setCursorPoint(n.parent.contentModule.getDocument(),l,0),t.args.preventDefault(),n.triggerActionComplete(t,r)}})}},a.prototype.handleEnterKeyAtImageSide=function(t,e,i){var n=this,r={cancel:!1,name:Re,requestType:t.args.shiftKey?"ShiftEnterAction":"EnterAction",originalEvent:t.args},s=!1;this.range.startContainer.nodeName==="IMG"&&this.range.startOffset===0&&(s=!0),this.parent.trigger(Re,r,function(o){if(!o.cancel&&n.parent.enterKey==="BR"){var l=n.parent.createElement("BR"),c=void 0;if(s&&(c=n.range.startContainer,c.parentElement.insertBefore(l,c),n.parent.formatter.editorManager.nodeSelection.setCursorPoint(n.parent.contentModule.getDocument(),c,0)),e&&(c=n.range.startContainer.childNodes[n.range.startOffset],c.parentElement.insertBefore(l,c),n.parent.formatter.editorManager.nodeSelection.setCursorPoint(n.parent.contentModule.getDocument(),c,0)),i){if(c=n.range.startContainer.childNodes[n.range.startOffset-1],!h(c.nextSibling))c.parentElement.insertBefore(l,c.nextSibling),n.parent.formatter.editorManager.nodeSelection.setCursorPoint(n.parent.contentModule.getDocument(),l.nextSibling,0);else if(h(c.nextSibling)){c.parentElement.appendChild(l);var p=n.parent.createElement("BR");c.parentElement.appendChild(p),n.parent.formatter.editorManager.nodeSelection.setCursorPoint(n.parent.contentModule.getDocument(),p,0)}}t.args.preventDefault(),n.triggerActionComplete(t,t.args.shiftKey)}})},a.prototype.isTableOrImageStart=function(){var t=["IMG","TABLE"],e=this.range.startContainer,i=this.range.startOffset,n=this.range.collapsed&&e.nodeType===1&&e.isContentEditable&&e.childNodes[i]&&t.indexOf(e.childNodes[i].nodeName)>-1;return n?{start:n,startNodeName:e.childNodes[i].nodeName}:{start:!1,startNodeName:""}},a.prototype.isTableOrImageEnd=function(){var t=["IMG","TABLE"],e=this.range.startContainer,i=this.range.startOffset,n=this.range.collapsed&&e.nodeType===1&&e.isContentEditable&&e.childNodes[i-1]&&t.indexOf(e.childNodes[i-1].nodeName)>-1;return n?{end:n,endNodeName:e.childNodes[i-1].nodeName}:{end:!1,endNodeName:""}},a.prototype.processedTableImageCursor=function(){var t=this.isTableOrImageStart(),e=t.start,i=t.startNodeName,n=this.isTableOrImageEnd(),r=n.end,s=n.endNodeName;return{start:e,startName:i,end:r,endName:s}},a}(),uf=function(){var a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},a(t,e)};return function(t,e){a(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),ya=function(){return ya=Object.assign||function(a){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},ya.apply(this,arguments)},H=function(a,t,e,i){var n=arguments.length,r=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(a,t,e,i);else for(var o=a.length-1;o>=0;o--)(s=a[o])&&(r=(n<3?s(r):n>3?s(t,e,r):s(t,e))||r);return n>3&&r&&Object.defineProperty(t,e,r),r},pt=function(a){uf(t,a);function t(e,i){var n=a.call(this,e,i)||this;return n.needsID=!0,n.isSelectAll=!1,n}return t.prototype.requiredModules=function(){var e=[];return this.toolbarSettings.enable&&(e.push({member:"toolbar",args:[this,this.serviceLocator]}),e.push({member:"link",args:[this,this.serviceLocator]}),e.push({member:"table",args:[this,this.serviceLocator]}),e.push({member:"image",args:[this,this.serviceLocator]}),e.push({member:"audio",args:[this,this.serviceLocator]}),e.push({member:"video",args:[this,this.serviceLocator]}),this.quickToolbarSettings.enable&&e.push({member:"quickToolbar",args:[this,this.serviceLocator]})),this.showCharCount&&e.push({member:"count",args:[this,this.serviceLocator]}),this.editorMode==="Markdown"&&e.push({member:"markdownEditor",args:[this,this.serviceLocator]}),this.editorMode==="HTML"&&(e.push({member:"htmlEditor",args:[this,this.serviceLocator]}),e.push({member:"pasteCleanup",args:[this,this.serviceLocator]}),e.push({member:"formatPainter",args:[this]}),e.push({member:"emojiPicker",args:[this,this.serviceLocator]})),this.fileManagerSettings.enable&&e.push({member:"fileManager",args:[this,this.serviceLocator]}),this.enableResize&&e.push({member:"resize",args:[this]}),e},t.prototype.updateEnable=function(){this.enabled?(O([this.element],bs),this.element.setAttribute("aria-disabled","false"),h(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&(O(this.getToolbar().querySelectorAll("."+ti),ti),O([this.getToolbar().parentElement],[Ro])),k([this.element],bs),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.eventInitializer():this.unWireEvents()},t.prototype.initializeValue=function(){this.isFocusOut=!1,this.isRTE=!1,this.isBlur=!0,this.defaultResetValue=null,this.isResizeInitialized=!1},t.prototype.preRender=function(){this.initializeValue(),this.clickPoints={clientX:0,clientY:0},this.initialValue=this.value,this.serviceLocator=new Uu,this.initializeServices(),this.setContainer(),this.persistData(),U(this.element,{width:z(this.width)}),Ce(this.element,{role:"application","aria-label":"Rich Text Editor"}),this.beforeRenderClassValue=this.element.getAttribute("class")},t.prototype.persistData=function(){if(this.enablePersistence&&this.originalElement.tagName==="TEXTAREA"){this.element.id=this.originalElement.id+"_wrapper";var e=window.localStorage.getItem(this.getModuleName()+this.element.id);h(e)||e===""||this.setProperties(JSON.parse(e),!0)}},t.prototype.setContainer=function(){this.originalElement=this.element.cloneNode(!0),(this.value===null||this.valueTemplate!==null)&&this.setValue(),this.element.hasAttribute("tabindex")&&(this.htmlAttributes={tabindex:this.element.getAttribute("tabindex")},this.element.removeAttribute("tabindex")),this.element.innerHTML="";for(var e=["class","style","id","ejs-for"],i={},n=0;n<this.element.attributes.length;n++)e.indexOf(this.element.attributes[n].name)===-1&&!/^data-val/.test(this.element.attributes[n].name)&&(i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));if(_e(i,this.htmlAttributes,i),this.setProperties({htmlAttributes:i},!0),h(this.htmlAttributes.id)||(this.element.id=this.htmlAttributes.id),this.internalID=this.element.id,this.element.tagName==="TEXTAREA"){var r=this.createElement("div",{className:this.element.getAttribute("class")});this.element.innerHTML="",this.element.parentElement.insertBefore(r,this.element),this.valueContainer=this.element,O([this.valueContainer],this.element.getAttribute("class").split(" ")),this.element=r}else this.valueContainer=this.createElement("textarea",{id:this.getID()+"-value",attrs:{"aria-labelledby":this.getID()}});if(this.valueContainer.name=this.getID(),k([this.valueContainer],wl),!h(this.cssClass))for(var s=this.cssClass.split(" "),o=0;o<s.length;o++)k([this.valueContainer],s[o]);this.rootContainer=this.createElement("div",{className:ap,attrs:{role:"presentation"}}),this.element.appendChild(this.rootContainer),this.rootContainer.appendChild(this.valueContainer)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.selectAll=function(){this.notify(ro,{})},t.prototype.selectRange=function(e){this.notify(kr,{range:e})},t.prototype.getSelection=function(){var e="";return this.notify(so,{callBack:function(i){e=i}}),e},t.prototype.showEmojiPicker=function(e,i){this.readonly||this.notify(Dr,{x:e,y:i})},t.prototype.executeCommand=function(e,i,n){i=this.htmlPurifier(e,i);var r;if(this.editorMode==="HTML"){var s=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument);var o=this.iframeSettings.enable&&s.startContainer===this.inputElement?!0:!this.inputElement.contains(s.startContainer);o&&this.focusIn()}var l=zu[""+e];if(n&&n.undo&&n.undo&&this.formatter.getUndoRedoStack().length===0&&this.formatter.saveData(),this.maxLength!==-1&&!h(l.command)){var c=0;if(l.command==="Links"&&(c=i.text.length===0?i.url.length:i.text.length),(l.command==="Images"||l.command==="Table"||l.command==="Files")&&(c=1),l.command==="InsertHTML")if(h(i))!h(l.value)&&(l.value==="<hr/>"||l.value==="<br/>")&&(c=1);else{var p=this.createElement("div");p.innerHTML=i,c=p.textContent.length}l.command==="InsertText"&&(c=i.length);var d=this.getText().trim().replace(/(\r\n|\n|\r|\t)/gm,"").replace(/\u200B/g,"").length,u=this.getSelection().length,m=d-u+c;if(!(this.maxLength===-1||m<=this.maxLength))return}r=i,l.command==="FormatPainter"&&(h(i)||(this.formatPainterSettings=i),r={formatPainterAction:l.value}),this.formatter.editorManager.execCommand(l.command,l.subCommand?l.subCommand:r||l.value,null,null,r||l.value,r||(l.value==="UL"||l.value==="OL"?null:l.value),null,this.enterKey),n&&n.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.notify(Zi,{})},t.prototype.htmlPurifier=function(e,i){if(this.editorMode==="HTML")switch(e){case"insertHTML":this.enableHtmlSanitizer&&(typeof i=="string"?i=this.htmlEditorModule.sanitizeHelper(i):i=this.htmlEditorModule.sanitizeHelper(i.outerHTML));break;case"insertTable":h(i.width)&&(i.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});break;case"insertImage":{var n=this.createElement("img",{attrs:{src:i.url}}),r=n.outerHTML;this.enableHtmlSanitizer&&(r=this.htmlEditorModule.sanitizeHelper(n.outerHTML));var s=r!==""&&this.createElement("div",{innerHTML:r}).firstElementChild.getAttribute("src")||null;s=h(s)?"":s,i.url=s,h(i.width)&&(i.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),h(i.height)&&(i.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});break}case"insertAudio":{var o=this.createElement("audio",{attrs:{controls:""}}),n=this.createElement("source",{attrs:{src:i.url,type:i.url&&i.url.split(".").length>0?"audio/"+i.url.split(".")[i.url.split(".").length-1]:""}});o.appendChild(n);var l=o.outerHTML;this.enableHtmlSanitizer&&(l=this.htmlEditorModule.sanitizeHelper(o.outerHTML));var s=l!==""&&this.createElement("div",{innerHTML:l}).firstElementChild.firstElementChild.getAttribute("src")||null;s=h(s)?"":s,i.url=s;break}case"insertVideo":{var o=this.createElement("video",{attrs:{controls:""}}),n=this.createElement("source",{attrs:{src:i.url,type:i.url&&i.url.split(".").length>0?"video/"+i.url.split(".")[i.url.split(".").length-1]:""}});o.appendChild(n);var l=o.outerHTML;this.enableHtmlSanitizer&&(l=this.htmlEditorModule.sanitizeHelper(n.outerHTML));var s=l!==""&&this.createElement("div",{innerHTML:l}).firstElementChild.getAttribute("src")||null;s=h(s)?"":s,i.url=s,h(i.width)&&(i.width={minWidth:this.insertVideoSettings.minWidth,maxWidth:this.insertVideoSettings.maxWidth,width:this.insertVideoSettings.width}),h(i.height)&&(i.height={minHeight:this.insertVideoSettings.minHeight,maxHeight:this.insertVideoSettings.maxHeight,height:this.insertVideoSettings.height});break}case"createLink":{var c=this.createElement("a",{attrs:{href:i.url}}),p=c.outerHTML;this.enableHtmlSanitizer&&(p=this.htmlEditorModule.sanitizeHelper(c.outerHTML));var d=p!==""&&this.createElement("div",{innerHTML:p}).firstElementChild.getAttribute("href")||null;d=h(d)?"":d,i.url=d;break}}return i},t.prototype.encode=function(e){var i=this.createElement("div");return i.innerText=e.trim(),i.innerHTML.replace(/<br\s*[\/]?>/gi,`
`)},t.prototype.render=function(){this.value=this.editorMode!=="Markdown"&&!h(this.value)?this.addAnchorAriaLabel(this.value):this.value,this.value&&!this.valueTemplate&&this.setProperties({value:this.serializeValue(this.value)},!0),this.renderModule=new gd(this,this.serviceLocator),this.sourceCodeModule=new Nd(this,this.serviceLocator),this.notify(_s,{}),this.trigger(Ic),this.RTERender(),new zd(this),this.notify(je,{}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.toolbarSettings.enable&&(this.toolbarSettings.type==="Expand"||this.toolbarSettings.type==="MultiRow"||this.toolbarSettings.type==="Scrollable")&&!h(this.getToolbar())&&this.toolbarSettings.items.indexOf("Undo")>-1&&this.toolbarSettings.items.indexOf("Redo")>-1&&this.disableToolbarItem(["Undo","Redo"]),this.value!==null&&(this.valueContainer.defaultValue=this.value),this.enabled&&!this.readonly?this.eventInitializer():this.unWireEvents(),this.notify(Le,{cssClass:this.getCssClass()}),this.addAudioVideoWrapper(),this.notify(pn,{}),this.autoResize(),this.renderComplete()},t.prototype.addAudioVideoWrapper=function(){for(var e=this,i,n=this.element.querySelectorAll("audio"),r=0;r<n.length;r++)if(n[r].classList.contains("e-rte-audio")||(n[r].classList.add("e-rte-audio"),n[r].classList.add(fp)),!n[r].parentElement.classList.contains($t)&&!n[r].parentElement.classList.contains(Yi)){var s=this.createElement("span",{className:Yi});s.setAttribute("style","width:300px; margin:0 auto;"),s.contentEditable="false";var o=this.createElement("span",{className:$t});s.appendChild(o),n[r].parentNode.insertBefore(s,n[r].nextSibling),o.appendChild(n[r]),s.nextElementSibling===null&&(i=this.createElement("br"),s.parentNode.insertBefore(i,s.nextSibling))}for(var l=this.element.querySelectorAll("video"),r=0;r<l.length;r++){if(l[r].classList.contains("e-rte-video")||(l[r].classList.add("e-rte-video"),l[r].classList.add(mp)),!l[r].parentElement.classList.contains($t)&&!l[r].parentElement.classList.contains(Ls)){var c=this.createElement("span",{className:Ls});c.contentEditable="false",l[r].parentNode.insertBefore(c,l[r].nextSibling),c.appendChild(l[r]),c.nextElementSibling===null&&(i=this.createElement("br"),c.parentNode.insertBefore(i,c.nextSibling))}x.userAgent.indexOf("Firefox")!==-1&&(l[r].addEventListener("play",function(d){e.notify(Fe,{args:d}),e.notify("editAreaClick",{args:d})}),l[r].addEventListener("pause",function(d){e.notify(Fe,{args:d}),e.notify("editAreaClick",{args:d})}))}},t.prototype.eventInitializer=function(){this.wireEvents()},t.prototype.cleanList=function(e){var i=this.getRange(),n=i.startContainer,r=i.endContainer,s=i.startOffset,o=n===r;r.textContent.length;var l=i.endContainer.nodeName==="#text"?i.endContainer.parentElement:i.endContainer,c=b(l,"LI"),p=!1,d=i.endOffset;if(r.nodeType===Node.TEXT_NODE&&r.textContent.charAt(d-1)==="\uFEFF"&&d--,!h(c)&&l.textContent.trim().length===d&&!i.collapsed&&h(l.nextElementSibling)){for(var u=0;u<c.childNodes.length;u++)c.childNodes[u].nodeName==="#text"&&c.childNodes[u].textContent.trim().length===0&&(E(c.childNodes[u]),p=!0,u--);for(var m=c;m.lastChild!==null&&m.nodeName!=="#text";)m=m.lastChild;if(p){var f=m.nodeName==="BR"&&!h(m.previousSibling)?m.previousSibling:m;this.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),o?f:n,f,s,f.nodeName==="BR"?0:f.textContent.length)}}},t.prototype.keyDown=function(e){if(this.notify(we,{member:"keydown",args:e}),this.restrict(e),this.editorMode==="HTML"&&this.cleanList(e),this.editorMode==="HTML"&&(e.which===8&&e.code==="Backspace"||e.which===46&&e.code==="Delete")){var i=this.getRange(),n=i.startContainer.nodeName==="#text"?i.startContainer.parentElement:i.startContainer;if(b(n,"pre")&&e.which===8&&i.startContainer.textContent.charCodeAt(i.startOffset-1)===8203||e.which===46&&i.startContainer.textContent.charCodeAt(i.startOffset)===8203){var r=new RegExp("​","g"),s=e.which===8?i.startOffset-1:i.startOffset;i.startContainer.textContent=i.startContainer.textContent.replace(r,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),i.startContainer,s)}else if(e.code==="Backspace"&&e.which===8&&i.startContainer.textContent.charCodeAt(0)===8203&&i.collapsed){var o=i.startContainer.parentElement,l=void 0,c=void 0;for(c=0;c<o.childNodes.length;c++)o.childNodes[c]===i.startContainer&&(l=c);var p=!0,d=[];for(c=l;c>=0;c--)o.childNodes[c].nodeType===3&&o.childNodes[c].textContent.charCodeAt(0)===8203&&p?d.push(c):p=!1;if(d.length>0)for(c=d.length-1;c>0;c--)o.childNodes[d[c]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),i.startContainer,i.startOffset)}}var u=h(e.action)?!0:e.action!=="format-copy";this.formatter.getUndoRedoStack().length===0&&u&&!(e.altKey||e.shiftKey||e.altKey&&e.shiftKey&&e.which===67)&&this.formatter.saveData();var m=!1;if(this.editorMode==="HTML"){var i=this.getRange();m=!h(i.startContainer)&&i.startContainer===i.endContainer&&i.endContainer.childNodes.length>1&&!h(i.startContainer.childNodes[i.startOffset-1])&&i.startContainer.childNodes[i.startOffset-1].nodeName==="#text"&&!h(i.startContainer.childNodes[i.startOffset-1].previousSibling)&&i.startContainer.childNodes[i.startOffset-1].textContent.charCodeAt(0)===32&&i.startContainer.childNodes[i.startOffset-1].previousSibling.classList.contains("e-mention-chip")}var f=["insert-link","format-copy","format-paste","insert-image","insert-table","insert-audio","insert-video"];if(f.indexOf(e.action)===-1&&(!e.target||!(e.target.classList.contains("e-mention")&&!h(document.querySelector("#"+e.target.id+"_popup.e-popup-open"))&&e.code==="Tab"))&&(e.action&&e.action!=="paste"&&e.action!=="space"||e.which===9||e.code==="Backspace"&&e.which===8)&&!m){var g=!1;switch(h(this.formatPainterModule)||(g=this.formatPainterModule.previousAction==="escape"),g||(this.editorMode==="HTML"&&(e.action==="increase-fontsize"||e.action==="decrease-fontsize")?this.notify(oh,{member:"onHandleFontsizeChange",args:e}):this.formatter.process(this,null,e)),e.action){case"toolbar-focus":if(this.toolbarSettings.enable&&this.getToolbarElement()){var y=this.getToolbarElement().querySelector(".e-toolbar-item:not(.e-overlay)[title]"),S=this.getRenderedQuickToolbarElem();if(S&&(y=S.querySelector(".e-toolbar-item:not(.e-overlay)[title]")),y){var T=y.firstElementChild;T.removeAttribute("tabindex"),T.focus()}}break;case"escape":this.contentModule.getEditPanel().focus();break}}if(this.notify(No,{member:"afterKeyDown",args:e}),this.autoResize(),h(this.placeholder)||this.setPlaceHolder(),!h(e)&&!h(e.code)&&(e.code==="Backspace"||e.code==="Delete")){var i=this.contentModule.getDocument().getSelection().getRangeAt(0),L=document.createElement("div");L.appendChild(i.cloneContents());var w=L.innerHTML;w===this.inputElement.innerHTML&&(this.isSelectAll=!0)}},t.prototype.keyUp=function(e){if(this.editorMode==="HTML"){var i=this.getRange();if(!h(e)&&!h(e.code)&&(e.code==="Backspace"||e.code==="Delete")){var n=this.getRange(),r=this.iframeSettings.enable?this.contentModule.getPanel().ownerDocument.getSelection():this.contentModule.getDocument().getSelection();this.isSelectAll&&(this.inputElement.innerHTML=this.enterKey!=="BR"?"<"+this.enterKey+"><br></"+this.enterKey+">":"<br>",this.isSelectAll=!1),r.rangeCount>0&&this.contentModule.getDocument().activeElement.tagName!=="INPUT"&&this.inputElement.contains(this.contentModule.getDocument().activeElement)&&i.startContainer.innerHTML==="<br>"&&i.startContainer.textContent===""&&(r.removeAllRanges(),r.addRange(n))}if(x.userAgent.indexOf("Firefox")!==-1&&i.startContainer.nodeName==="#text"&&i.startContainer.parentElement===this.inputElement&&this.enterKey!=="BR"){var s=this.getRange(),o=this.createElement(this.enterKey);s.startContainer.parentElement.insertBefore(o,s.startContainer),o.appendChild(s.startContainer),this.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),o.childNodes[0],o.childNodes[0],o.childNodes[0].textContent.length,o.childNodes[0].textContent.length)}}this.notify(Ke,{member:"keyup",args:e}),(e.keyCode===39||e.keyCode===37)&&this.notify(Gs,{member:"tableModulekeyUp",args:e}),e.code==="KeyX"&&e.which===88&&e.keyCode===88&&e.ctrlKey&&(this.inputElement.innerHTML===""||this.inputElement.innerHTML==="<br>")&&(this.inputElement.innerHTML=Mr(ka(this),this));var l=e.which===32||e.which===13||e.which===8||e.which===46,c=e.key==="C"&&e.altKey&&e.shiftKey,p=e.key==="V"&&e.altKey&&e.shiftKey;(!c&&!p&&(e.key!=="shift"&&!e.ctrlKey&&e.key&&e.key.length===1||l)||this.editorMode==="Markdown"&&(e.key!=="shift"&&!e.ctrlKey&&e.key&&e.key.length===1||l)||this.autoSaveOnIdle&&x.isDevice&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),(this.inputElement&&this.inputElement.textContent.length!==0||this.element.querySelectorAll(".e-toolbar-item.e-active").length>0||this.formatter.getUndoRedoStack().length>0)&&this.notify(ni,{args:e}),this.setPlaceHolder()},t.prototype.serializeValue=function(e){return this.editorMode==="HTML"&&!h(e)&&(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(yt(e)),e=this.encode(e)):(e=this.htmlEditorModule.sanitizeHelper(e),e=this.enableXhtml?this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e):e)),e},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.updateValue=function(e){if(h(e)){var i=this.inputElement.innerHTML;this.setProperties({value:md(i)?null:i})}else this.setProperties({value:e})},t.prototype.triggerEditArea=function(e){if(!Se())this.notify(wt,{member:"editAreaClick",args:e});else{var i=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===i.clientX&&this.clickPoints.clientY===i.clientY&&this.notify(wt,{member:"editAreaClick",args:e})}},t.prototype.notifyMouseUp=function(e){var i=e.touches?e.changedTouches[0]:e;this.notify(dn,{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:i.clientX,clientY:i.clientY}}),(this.inputElement&&(this.editorMode==="HTML"&&this.inputElement.textContent.length!==0||this.editorMode==="Markdown"&&this.inputElement.value.length!==0)||e.target&&!h(b(e.target,"table"))||e.target&&!h(e.target.querySelector("img"))||e.target&&(e.target.nodeName==="VIDEO"||e.target.querySelectorAll("."+Ls).length>0)||e.target&&e.target.nodeName!=="BR"&&(e.target.classList.contains(Yi)||e.target.classList.contains($t)||e.target.classList.contains(Ca)))&&this.notify(ni,{args:e}),this.triggerEditArea(e)},t.prototype.mouseUp=function(e){if(this.quickToolbarSettings.showOnRightClick&&x.isDevice){var i=e.target,n=b(i,"table");if(i&&i.nodeName==="A"||i.nodeName==="IMG"||i.nodeName==="TD"||i.nodeName==="TH"||i.nodeName==="TABLE"||n&&this.contentModule.getEditPanel().contains(n))return}this.notifyMouseUp(e),this.setPlaceHolder(),this.autoResize()},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.onCopy=function(){this.contentModule.getDocument().execCommand("copy",!1,null)},t.prototype.onCut=function(){this.contentModule.getDocument().execCommand("cut",!1,null)},t.prototype.onPaste=function(e){var i=this,n={originalEvent:e,cancel:!1,requestType:"Paste"};this.trigger(Re,n,function(r){var s=i.getText().replace(/(\r\n|\n|\r|\t)/gm,"").replace(/\u200B/g,"").length,o=i.getSelection().length,l=h(e)||h(e.clipboardData)?0:e.clipboardData.getData("text/plain").replace(/(\r\n|\n|\r|\t)/gm,"").replace(/\u200B/g,"").length,c=s-o+l;if(i.editorMode==="Markdown"){var p={requestType:"Paste",editorMode:i.editorMode,event:e};setTimeout(function(){i.formatter.onSuccess(i,p)},0),i.maxLength===-1||c<=i.maxLength||e.preventDefault();return}if(!r.cancel&&i.inputElement.contentEditable==="true"&&(i.maxLength===-1||c<=i.maxLength)){var d=i.contentModule.getDocument().querySelector(".e-rte-img-dialog");if(!h(i.pasteCleanupModule))h(d)&&i.notify(po,{args:e});else{console.warn('[WARNING] :: Module "pasteCleanup" is not available in RichTextEditor component! You either misspelled the module name or forgot to load it.');var u={requestType:"Paste",editorMode:i.editorMode,event:e},m=null,f=!1;e&&!h(e.clipboardData)&&(m=e.clipboardData.getData("text/plain"),f=e.clipboardData.getData("text/html").indexOf("MsoNormal")>0);var g=e&&e.clipboardData&&e.clipboardData.items.length>0?e.clipboardData.items[0].getAsFile():null;m!==null&&i.notify(Oi,{file:g,args:e,text:m,isWordPaste:f}),setTimeout(function(){i.formatter.onSuccess(i,u)},0)}}else e.preventDefault()})},t.prototype.clipboardAction=function(e,i){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:i});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:i});break;case"paste":this.onPaste(i);break}},t.prototype.destroy=function(){if(!(this.isDestroyed||!this.isRendered)){if(this.element.className=this.beforeRenderClassValue,this.removeHtmlAttributes(),this.removeAttributes(),this.beforeRenderClassValue=null,h(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),h(this.autoSaveTimeOut)||(clearTimeout(this.autoSaveTimeOut),this.autoSaveTimeOut=null),h(this.idleInterval)||(clearTimeout(this.idleInterval),this.idleInterval=null),this.notify(Y,{}),this.destroyDependentModules(),this.unWireEvents(),this.originalElement.tagName==="TEXTAREA"){this.element.parentElement.insertBefore(this.valueContainer,this.element),this.valueContainer.id=this.getID(),this.valueContainer.removeAttribute("name"),E(this.element),this.originalElement.innerHTML.trim()!==""?(this.valueContainer.value=this.originalElement.innerHTML.trim(),this.setProperties({value:h(this.initialValue)?null:this.initialValue},!0)):this.valueContainer.value=this.valueContainer.defaultValue,this.element=this.valueContainer;for(var e=0;e<this.originalElement.classList.length;e++)k([this.element],this.originalElement.classList[e]);if(!h(this.cssClass))for(var i=this.cssClass.split(" "),e=0;e<i.length;e++)k([this.element],i[e]);O([this.element],wl)}else this.originalElement.innerHTML.trim()!==""?(this.element.innerHTML=this.originalElement.innerHTML.trim(),this.setProperties({value:h(this.initialValue)?null:this.initialValue},!0)):this.element.innerHTML="";var n=document.querySelector(".e-dialog.e-rte-elements");if(n&&E(n),this.placeholder&&this.placeHolderWrapper&&(this.placeHolderWrapper=null),!h(this.cssClass))for(var r=this.cssClass.split(" "),e=0;e<r.length;e++)r[e].trim()!==""&&O([this.element],r[e]);this.rootContainer&&(this.rootContainer=null),this.valueContainer&&(this.valueContainer=null),this.originalElement&&(this.originalElement=null),this.currentTarget=null,this.scrollParentElements=[],this.isRendered=!1,a.prototype.destroy.call(this)}},t.prototype.removeHtmlAttributes=function(){if(this.htmlAttributes)for(var e=Object.keys(this.htmlAttributes),i=0;i<e.length&&this.element.hasAttribute(e[i]);i++)this.element.removeAttribute(e[i])},t.prototype.removeAttributes=function(){this.enabled||O([this.element],bs),this.enableRtl&&O([this.element],Yt),this.readonly&&O([this.element],Po),this.element.style.width!==""&&this.originalElement.style.width===""&&this.element.style.removeProperty("width"),this.element.style.height!==""&&this.originalElement.style.height===""&&this.element.style.removeProperty("height"),this.element.removeAttribute("aria-disabled"),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.element.removeAttribute("aria-label")},t.prototype.destroyDependentModules=function(){this.renderModule.destroy(),this.formatter.editorManager.destroy()},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.getText=function(){return this.contentModule.getText()},t.prototype.getSelectedHtml=function(){var e,i=this.createElement("div"),n=this.contentModule.getDocument().getSelection();if(n.rangeCount>0){e=n.getRangeAt(0);var r=e.cloneContents();i.appendChild(r)}return i.innerHTML},t.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var e=this.getRange(),i=e.endContainer.nodeName==="#text"?e.endContainer.parentElement:e.endContainer,n=e.getClientRects()[0].left,r=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(n,r,i)}},t.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},t.prototype.getModuleName=function(){return"richtexteditor"},t.prototype.onPropertyChanged=function(e,i){for(var n=0,r=Object.keys(e);n<r.length;n++){var s=r[n];switch(s){case"enterKey":case"value":{var o=void 0;s==="enterKey"?this.value===null||this.value==="<div><br></div>"||this.value==="<p><br></p>"||this.value==="<br>"?o=null:o=this.value:o=e[s],o=this.serializeValue(o);var l=this.editorMode==="HTML"?Mr(o,this):o;(!h(o)&&o!==""||s==="enterKey")&&this.setProperties({value:this.enableHtmlEncode?this.encode(yt(l)):l},!0),this.updatePanelValue(),this.inputElement&&this.notify(pn,{}),this.setPlaceHolder(),this.notify(vn,{module:"XhtmlValidation",newProp:e,oldProp:i}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.showCharCount&&this.countModule.refresh(),this.addAudioVideoWrapper();break}case"valueTemplate":this.setValue(!0),this.showCharCount&&this.countModule.refresh();break;case"width":this.setWidth(e[s]),this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.toolbarModule.refreshToolbarOverflow(),this.resizeHandler());break;case"height":this.setHeight(e[s]),this.autoResize();break;case"readonly":this.setReadOnly(!1);break;case"cssClass":this.element.classList.remove(i[s]),this.setCssClass(e[s]),this.notify(Le,{cssClass:e[s],oldCssClass:i[s]});break;case"enabled":this.setEnable();break;case"enableRtl":this.updateRTL();break;case"placeholder":this.placeholder=e[s],this.setPlaceHolder();break;case"htmlAttributes":As(this.htmlAttributes,this,!1,!1);break;case"iframeSettings":{var c=i[s];if(c.resources){var p=this.contentModule.getDocument(),d=p.querySelector("head"),u=void 0;c.resources.scripts&&(u=d.querySelectorAll("."+hl),this.removeSheets(u)),c.resources.styles&&(u=d.querySelectorAll("."+cl),this.removeSheets(u))}this.setIframeSettings();break}case"locale":a.prototype.refresh.call(this);break;case"inlineMode":this.notify(Me,{module:"quickToolbar",newProp:e,oldProp:i});break;case"toolbarSettings":this.notify(Me,{module:"toolbar",newProp:e,oldProp:i});break;case"maxLength":this.showCharCount&&this.countModule.refresh();break;case"showCharCount":e[s]&&this.countModule?this.countModule.renderCount():e[s]===!1&&this.countModule&&this.countModule.destroy();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify(Ar,{newProp:e,oldProp:i});break;case"enableXhtml":this.notify(vn,{module:"XhtmlValidation",newProp:e,oldProp:i});break;case"quickToolbarSettings":e.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent(),this.notify(Me,{newProp:e,oldProp:i});break;case"formatPainterSettings":this.formatter.editorManager.observer.notify(Ar,{module:"formatPainter",newProp:e});break;default:this.notify(Me,{newProp:e,oldProp:i});break}this.autoResize()}},t.prototype.updateValueData=function(){this.enableHtmlEncode?this.setProperties({value:this.encode(yt(this.inputElement.innerHTML))},!0):this.setProperties({value:/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:yt(this.inputElement.innerHTML)})},t.prototype.removeSheets=function(e){var i;for(i=0;i<e.length;i++)E(e[i])},t.prototype.updatePanelValue=function(){var e=this.listOrderCorrection(this.value);e=this.enableHtmlEncode&&this.value?yt(e):e;var i=this.element.querySelector("."+ri);e?(!h(i)&&this.rootContainer.classList.contains("e-source-code-enabled")&&(i.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),this.editorMode==="HTML"&&this.inputElement&&this.inputElement.innerHTML.trim()!==e.trim()?this.inputElement.innerHTML=e:this.editorMode==="Markdown"&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(!h(i)&&this.rootContainer.classList.contains("e-source-code-enabled")&&(i.value=""),this.editorMode==="HTML"?this.enterKey==="DIV"?this.inputElement.innerHTML="<div><br/></div>":this.enterKey==="BR"?this.inputElement.innerHTML="<br/>":this.inputElement.innerHTML="<p><br/></p>":this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule.refresh()},t.prototype.listOrderCorrection=function(e){var i=this.createElement("div");i.innerHTML=e;for(var n=i.querySelectorAll("UL, OL"),r=0;r<n.length;r++)!h(n[r])&&!h(n[r].parentElement)&&!h(n[r].previousElementSibling)&&(n[r].parentElement.nodeName==="UL"||n[r].parentElement.nodeName==="OL")&&n[r].previousElementSibling.appendChild(n[r]);return i.innerHTML},t.prototype.setHeight=function(e){e!=="auto"?this.element.style.height=z(e):this.element.style.height="auto",this.toolbarSettings.type==="Expand"&&(typeof this.height=="string"&&this.height.indexOf("px")>-1||typeof this.height=="number")?this.element.classList.add(xl):this.element.classList.remove(xl)},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&this.iframeSettings.enable!==!0&&(this.editorMode!=="Markdown"?(this.placeHolderWrapper||(this.placeHolderWrapper=this.createElement("span",{className:"rte-placeholder e-rte-placeholder "+this.getCssClass()}),this.fontSize.default&&(this.placeHolderWrapper.style.fontSize=this.fontSize.default),this.inputElement&&this.inputElement.parentElement.insertBefore(this.placeHolderWrapper,this.inputElement)),this.placeHolderWrapper.innerHTML=this.placeholder,this.inputElement.textContent.length===0&&this.inputElement.childNodes.length<2&&!h(this.inputElement.firstChild)&&(this.inputElement.firstChild.nodeName==="BR"||(this.inputElement.firstChild.nodeName==="P"||this.inputElement.firstChild.nodeName==="DIV")&&!h(this.inputElement.firstChild.firstChild)&&this.inputElement.firstChild.firstChild.nodeName==="BR")?this.placeHolderWrapper.classList.add("enabled"):this.placeHolderWrapper.classList.remove("enabled")):this.inputElement.setAttribute("placeholder",this.placeholder)),this.placeholder&&this.iframeSettings.enable&&this.inputElement&&(this.inputElement.textContent.length===0&&this.inputElement.childNodes.length<2&&!h(this.inputElement.firstChild)&&(this.inputElement.firstChild.nodeName==="BR"||(this.inputElement.firstChild.nodeName==="P"||this.inputElement.firstChild.nodeName==="DIV")&&!h(this.inputElement.firstChild.firstChild)&&this.inputElement.firstChild.firstChild.nodeName==="BR")?(k([this.inputElement],"e-rte-placeholder"),this.inputElement.setAttribute("placeholder",this.placeholder)):O([this.inputElement],"e-rte-placeholder"))},t.prototype.setWidth=function(e){e!=="auto"?U(this.element,{width:z(this.width)}):this.element.style.width="auto"},t.prototype.setCssClass=function(e){if(!h(e))for(var i=e.split(" "),n=0;n<i.length;n++)i[n].trim()!==""&&this.element.classList.add(i[n])},t.prototype.updateRTL=function(){this.notify(Rt,{enableRtl:this.enableRtl}),this.enableRtl?(this.element.classList.add(Yt),this.inputElement.classList.add(Yt)):(this.element.classList.remove(Yt),this.inputElement.classList.remove(Yt))},t.prototype.updateReadOnly=function(){this.notify(co,{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?(this.unbindEvents(),this.unWireEvents()):this.enabled&&this.wireEvents())},t.prototype.print=function(){var e=this,i,n={element:this.inputElement,requestType:"print",cancel:!1};this.trigger(Re,n,function(r){if(i=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),x.info.name==="msie"&&i.resizeTo(screen.availWidth,screen.availHeight),i=Yh(e.inputElement,i),!r.cancel){var s={requestType:"print"};e.trigger(ct,s)}})},t.prototype.refreshUI=function(){this.renderModule.refresh()},t.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},t.prototype.enableToolbarItem=function(e,i){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!0,i)},t.prototype.disableToolbarItem=function(e,i){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!1,i)},t.prototype.removeToolbarItem=function(e){this.toolbarModule.removeTBarItems(e)},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument())},t.prototype.initializeServices=function(){this.serviceLocator.register("rendererFactory",new Vu),this.serviceLocator.register("rteLocale",this.localeObj=new Ir(this.getModuleName(),ad,this.locale)),this.serviceLocator.register("dialogRenderObject",new Md(this))},t.prototype.RTERender=function(){var e=this.serviceLocator.getService("rendererFactory");this.contentModule=e.getRenderer(X.Content),this.fullScreenModule=new Fu(this),this.enterKeyModule=new df(this),this.renderModule.render(),this.inputElement=this.contentModule.getEditPanel(),this.setHeight(this.height),As(this.htmlAttributes,this,!1,!0),this.iframeSettings&&this.setIframeSettings(),this.setCssClass(this.cssClass),this.updateEnable(),this.setPlaceHolder(),this.updateRTL(),this.updateReadOnly(),this.updatePanelValue(),this.enableHtmlEncode&&!h(this.value)&&this.setProperties({value:this.encode(yt(this.value))})},t.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var e=this.iframeSettings.resources.styles,i=this.iframeSettings.resources.scripts;!h(this.iframeSettings.resources.scripts)&&this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,i),!h(this.iframeSettings.resources.styles)&&this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e)}this.iframeSettings.attributes&&As(this.iframeSettings.attributes,this,!0,!1)},t.prototype.InjectSheet=function(e,i){try{if(i&&i.length>0)for(var n=this.contentModule.getDocument(),r=n.querySelector("head"),s=0;s<i.length;s++)if(e){var o=this.createScriptElement();o.src=i[s],r.appendChild(o)}else{var l=this.createStyleElement();l.href=i[s],r.appendChild(l)}}catch{return}},t.prototype.createScriptElement=function(){var e=this.createElement("script",{className:hl});return e.type="text/javascript",e},t.prototype.createStyleElement=function(){var e=this.createElement("link",{className:cl});return e.rel="stylesheet",e},t.prototype.setValue=function(e){var i=this;if(this.valueTemplate){var n=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);if(typeof this.valueTemplate=="string"&&n.test(this.valueTemplate))this.setProperties({value:this.valueTemplate});else{var r=Di(this.valueTemplate)("",this,"valueTemplate");if(typeof this.valueTemplate!="string"&&this.isReact){this.displayTempElem=this.createElement("div");for(var s=0;s<r.length;s++){var o=r[s];Ne([o],this.displayTempElem)}this.renderTemplates(function(){i.inputElement.innerHTML=i.displayTempElem.childNodes[0].innerHTML,i.setProperties({value:i.inputElement.innerHTML.trim()})})}else{var l=this.element;e&&(this.inputElement.innerHTML="",l=this.inputElement);for(var s=0;s<r.length;s++){var o=r[s];Ne([o],l)}this.setProperties({value:l.innerHTML.trim()}),this.renderReactTemplates()}}}else{var c=!h(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\/?|\!?)(!--!--)>/g,"").trim();c!==""&&(this.element.tagName==="TEXTAREA"?this.setProperties({value:yt(c)}):this.setProperties({value:c}))}},t.prototype.renderTemplates=function(e){this.renderReactTemplates(e)},t.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},t.prototype.getInsertImgMaxWidth=function(){var e=this.insertImageSettings.maxWidth,i=12,n=2,r=this.contentModule.getEditPanel();if(this.editorMode==="HTML"&&!h(this.formatter.editorManager.nodeSelection)&&!h(this.formatter.editorManager.nodeSelection.range)){var s=this.formatter.editorManager.nodeSelection.range;s.startContainer.nodeType!==3&&s.startContainer.closest&&!h(s.startContainer.closest("TD"))&&(r=s.startContainer)}var o=window.getComputedStyle(r),l=r.offsetWidth-(i+n+parseFloat(o.paddingLeft.split("px")[0])+parseFloat(o.paddingRight.split("px")[0])+parseFloat(o.marginLeft.split("px")[0])+parseFloat(o.marginRight.split("px")[0]));return h(e)?l:e},t.prototype.getInsertVidMaxWidth=function(){var e=this.insertVideoSettings.maxWidth,i=12,n=2,r=this.contentModule.getEditPanel(),s=window.getComputedStyle(r),o=r.offsetWidth-(i+n+parseFloat(s.paddingLeft.split("px")[0])+parseFloat(s.paddingRight.split("px")[0])+parseFloat(s.marginLeft.split("px")[0])+parseFloat(s.marginRight.split("px")[0]));return h(e)?o:e},t.prototype.getHtml=function(){var e=this.removeResizeElement(this.contentModule.getEditPanel().innerHTML);return this.enableXhtml&&(e==="<p><br></p>"||e==="<div><br></div>"||e==="<br>")?null:this.serializeValue(e)},t.prototype.getXhtml=function(){var e=this.removeResizeElement(this.value);return!h(e)&&this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e},t.prototype.showSourceCode=function(){this.readonly||this.notify(Ni,{})},t.prototype.getCharCount=function(){var e=this.editorMode==="Markdown"?this.inputElement.value.trim():this.inputElement.textContent.trim(),i;return this.editorMode!=="Markdown"&&e.indexOf("​")!==-1?i=e.replace(/\u200B/g,"").length:i=e.length,i},t.prototype.showDialog=function(e){e===tt.InsertLink?this.notify(Co,{}):e===tt.InsertImage?this.notify(To,{}):e===tt.InsertAudio?this.notify(ep,{}):e===tt.InsertVideo?this.notify(tp,{}):e===tt.InsertTable&&this.notify(Lo,{})},t.prototype.closeDialog=function(e){e===tt.InsertLink?this.notify(So,{}):e===tt.InsertImage?this.notify(Eo,{}):e===tt.InsertAudio?this.notify(ip,{}):e===tt.InsertVideo?this.notify(np,{}):e===tt.InsertTable&&this.notify(wo,{})},t.prototype.getBaseToolbarObject=function(){var e;return this.inlineMode.enable&&(!x.isDevice||Se())?e=this.quickToolbarModule&&this.quickToolbarModule.getInlineBaseToolbar():e=this.toolbarModule&&this.toolbarModule.getBaseToolbar(),e},t.prototype.getToolbar=function(){return this.toolbarModule?this.toolbarModule.getToolbarElement():null},t.prototype.getToolbarElement=function(){return this.toolbarModule&&this.toolbarModule.getToolbarElement()},t.prototype.getID=function(){return this.internalID},t.prototype.getCssClass=function(e){return h(this.cssClass)?"":e?" "+this.cssClass:this.cssClass},t.prototype.mouseDownHandler=function(e){var i=e.touches?e.changedTouches[0]:e;k([this.element],[Es]),this.preventDefaultResize(e),this.notify(Fe,{args:e}),this.formatter.editorManager.observer.notify(Fe,{args:e}),this.clickPoints={clientX:i.clientX,clientY:i.clientY}},t.prototype.preventImgResize=function(e){e.target.nodeName.toLocaleLowerCase()==="img"&&e.preventDefault()},t.prototype.preventDefaultResize=function(e){x.info.name==="msie"?this.contentModule.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize):x.info.name==="mozilla"&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!1,"false"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!1,"false"))},t.prototype.defaultResize=function(e){x.info.name==="msie"?this.contentModule.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):x.info.name==="mozilla"&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!0,"true"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!0,"true"))},t.prototype.resizeHandler=function(){if(!document.body.contains(this.element)){document.defaultView.removeEventListener("resize",this.resizeHandler,!0),this.onResizeHandler=null;return}this.toolbarSettings.enable&&!this.inlineMode.enable&&this.toolbarModule.refreshToolbarOverflow(),this.notify(to,null),this.autoResize()},t.prototype.scrollHandler=function(e){this.element&&this.notify(Zt,{args:e})},t.prototype.contentScrollHandler=function(e){this.notify(ei,{args:e})},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,k([this.element],[Es]),this.editorMode==="HTML"?this.cloneValue=this.inputElement.innerHTML==="<p><br></p>"||this.inputElement.innerHTML==="<div><br></div>"||this.inputElement.innerHTML==="<br>"?null:this.enableHtmlEncode?this.encode(yt(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=this.inputElement.value===""?null:this.inputElement.value;var i=document.activeElement;if((i===this.element||i===this.getToolbarElement()||i===this.contentModule.getEditPanel()||this.iframeSettings.enable&&i===this.contentModule.getPanel()&&e.target&&!e.target.classList.contains("e-img-inner")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains("e-img-wrap")||b(i,".e-rte-toolbar")===this.getToolbarElement())&&(this.contentModule.getEditPanel().focus(),!h(this.getToolbarElement()))){this.getToolbarElement().setAttribute("tabindex","-1");for(var n=this.getToolbarElement().querySelectorAll('[tabindex="0"]'),r=0;r<n.length;r++)n[r].setAttribute("tabindex","-1")}this.preventDefaultResize(e),this.trigger("focus",{event:e,isInteracted:Object.keys(e).length!==0}),!h(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&h(this.timeInterval)&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),C.add(document,"mousedown",this.onDocumentClick,this)}if(!this.readonly){var s=this.getCurrentFocus(e);(s==="editArea"||s==="textArea"||s==="sourceCode")&&this.resetToolbarTabIndex()}},t.prototype.getUpdatedValue=function(){var e,i=this.element.querySelector("."+ri);return this.editorMode==="HTML"?(e=this.inputElement.innerHTML==="<p><br></p>"||this.inputElement.innerHTML==="<div><br></div>"||this.inputElement.innerHTML==="<br>"?null:this.enableHtmlEncode?this.encode(yt(this.removeResizeElement(this.inputElement.innerHTML))):this.inputElement.innerHTML,!h(i)&&this.rootContainer.classList.contains("e-source-code-enabled")&&(e=i.value)):e=this.inputElement.value===""?null:this.inputElement.value,e!=null&&!this.enableHtmlEncode&&(e=this.removeResizeElement(e)),e},t.prototype.updateValueOnIdle=function(){!h(this.tableModule)&&!h(this.inputElement.querySelector(".e-table-box.e-rbox-select"))||(this.setProperties({value:this.getUpdatedValue()},!0),this.valueContainer.value=this.value,this.isValueChangeBlurhandler=!1,this.invokeChangeEvent())},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.cleanupResizeElements=function(e){var i=this.removeResizeElement(e.value);e.callBack(i)},t.prototype.addAnchorAriaLabel=function(e){var i=document.createElement("div");i.innerHTML=e;var n=i.querySelectorAll("a");if(n.length>0)for(var r=0;r<n.length;r++)n[r].hasAttribute("target")&&n[r].getAttribute("target")==="_blank"&&n[r].setAttribute("aria-label",this.serviceLocator.getService("rteLocale").getConstant("linkAriaLabel"));return i.innerHTML},t.prototype.removeResizeElement=function(e){var i=document.createElement("div");i.innerHTML=e;var n=i.querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box, .e-table-rhelper, .e-img-resize");if(n.length>0)for(var r=0;r<n.length;r++)E(n[r]);return this.removeSelectionClassStates(i),this.editorMode==="Markdown"?i.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"):i.innerHTML},t.prototype.updateStatus=function(e){if(!h(e.html)||!h(e.markdown)){var i=this.formatter.editorManager.undoRedoManager.getUndoStatus(),n={undo:i.undo,redo:i.redo,html:e.html,markdown:e.markdown};this.trigger(zc,n)}},t.prototype.onDocumentClick=function(e){var i=e.target,n=b(i,"."+rn);!this.element.contains(e.target)&&document!==e.target&&n!==this.element&&!b(i,'[aria-owns="'+this.getID()+'"]')&&(this.isBlur=!0,this.isRTE=!1),this.notify(oi,{args:e});var r=this.quickToolbarModule&&!this.inlineMode.enable&&h(this.quickToolbarModule.inlineQTBar);(r&&!h(b(i,".e-toolbar-wrapper"))||r&&(!h(b(i,".e-rte-table-resize"))||!h(b(i,".e-table-box"))))&&this.quickToolbarModule.hideQuickToolbars(),x.info.name!=="msie"&&e.detail>3&&e.preventDefault()},t.prototype.blurHandler=function(e){var i=e.relatedTarget;if(i){var n=b(i,"."+rn);if(!n&&this.iframeSettings.enable){var r=this.element.querySelector("#"+this.getID()+"_rte-view");r&&r.contentWindow.document.body.contains(i)&&(n=b(r,"."+rn))}n&&n===this.element?(this.isBlur=!1,i===this.getToolbarElement()&&i.setAttribute("tabindex","-1")):b(i,'[aria-owns="'+this.getID()+'"]')||b(i,"."+Oe)?this.isBlur=!1:(this.isBlur=!0,i=null)}if(this.isBlur&&h(i)){O([this.element],[Es]),this.removeSelectionClassStates(this.inputElement),this.notify(gn,{});var s=this.getUpdatedValue();this.setProperties({value:s}),this.valueContainer.value=this.value,this.notify(ni,{args:e,documentNode:document}),this.isValueChangeBlurhandler=!0,this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,kn(this.valueContainer,"focusout"),this.defaultResize(e),this.trigger("blur",{event:e,isInteracted:Object.keys(e).length!==0}),h(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),!h(this.placeHolderWrapper)&&this.element.querySelector("[title = Preview]")&&(this.placeHolderWrapper.style.display="none"),C.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0;!this.readonly&&this.getCurrentFocus(e)==="outside"&&this.resetToolbarTabIndex()},t.prototype.contentChanged=function(){this.autoSaveOnIdle&&(h(this.saveInterval)||(clearTimeout(this.autoSaveTimeOut),this.autoSaveTimeOut=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},t.prototype.invokeChangeEvent=function(){var e;this.enableXhtml?e=this.getXhtml():e=this.value;var i={value:e,isInteracted:this.isValueChangeBlurhandler};this.value!==this.cloneValue&&(this.trigger("change",i),this.cloneValue=this.value)},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=Fs(this.element);for(var e=0,i=this.scrollParentElements;e<i.length;e++){var n=i[e];C.add(n,"scroll",this.scrollHandler,this)}this.iframeSettings.enable||C.add(this.inputElement,"scroll",this.contentScrollHandler,this)},t.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(C.add(this.inputElement,"contextmenu",this.contextHandler,this),x.isDevice&&(this.touchModule=new $h(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},t.prototype.unWireContextEvent=function(){C.remove(this.inputElement,"contextmenu",this.contextHandler),x.isDevice&&this.touchModule&&this.touchModule.destroy()},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=Fs(this.element);for(var e=0,i=this.scrollParentElements;e<i.length;e++){var n=i[e];C.remove(n,"scroll",this.scrollHandler)}this.iframeSettings.enable||C.remove(this.inputElement,"scroll",this.contentScrollHandler)},t.prototype.touchHandler=function(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)},t.prototype.contextHandler=function(e){var i=b(e.target,"a, table, img, video, audio");!i&&e.target&&e.target.classList&&(e.target.classList.contains(Yi)||e.target.classList.contains($t))&&(i=e.target.querySelector("audio")),(this.inlineMode.onSelection===!1||!h(i)&&this.inputElement.contains(i)&&(i.tagName==="IMG"||i.tagName==="TABLE"||i.tagName==="A"||i.tagName.toLowerCase()==="video"||i.tagName.toLowerCase()==="audio"))&&e.preventDefault()},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim();this.setProperties({value:e===""?null:e})},t.prototype.autoResize=function(){if(!(!this.element||!this.originalElement||!this.valueContainer)){if(this.height==="auto"){if(this.editorMode==="Markdown")this.setAutoHeight(this.inputElement);else if(this.iframeSettings.enable){var e=this.element.querySelector("#"+this.getID()+"_rte-view");e&&(this.setAutoHeight(e),this.inputElement.style.overflow="hidden")}}else if(this.editorMode==="Markdown"){var i=this.inputElement,n=this.enableResize||this.showCharCount?20:0;i&&(i.style.height=this.element.clientHeight-(this.toolbarModule.getToolbarHeight()+n+3)+"px")}else if(this.iframeSettings.enable){var r=this.element.querySelector("#"+this.getID()+"_rte-view"),n=this.enableResize||this.showCharCount?20:0;r&&(r.style.height=this.element.clientHeight-(this.toolbarModule.getToolbarHeight()+n+3)+"px")}}},t.prototype.setAutoHeight=function(e){h(e)||(e.style.height="auto",e.style.height=this.inputElement.scrollHeight+16+"px",e.style.overflow="hidden")},t.prototype.wireEvents=function(){this.onResizeHandler=this.resizeHandler.bind(this),this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.on(Zi,this.contentChanged,this),this.on(ol,this.updateResizeFlag,this),this.on(yo,this.updateStatus,this),this.on(xo,this.cleanupResizeElements,this),this.on(Oo,this.updateValueOnIdle,this),this.on(Bo,this.autoResize,this),!(this.readonly&&this.enabled)&&this.bindEvents()},t.prototype.restrict=function(e){if(this.maxLength>=0){var i=this.editorMode==="Markdown"?this.contentModule.getText():this.getText().replace(/(\r\n|\n|\r|\t)/gm,"").replace(/\u200B/g,"");if(!i)return;for(var n=[8,16,17,37,38,39,40,46,65],r=void 0,s=0;s<=n.length-1;s++)if(e.which===n[s]){if(e.ctrlKey&&e.which===65)return;if(e.which!==65){r=n[s];return}}i.length>=this.maxLength&&this.maxLength!==-1&&e.which!==r&&e.preventDefault()}},t.prototype.bindEvents=function(){this.keyboardModule=new ga(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:ya({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=b(this.valueContainer,"form");e&&C.add(e,"reset",this.resetHandler,this),C.add(this.inputElement,"keyup",this.keyUp,this),C.add(this.inputElement,"paste",this.onPaste,this),C.add(this.inputElement,"content-changed",this.contentChanged,this),this.mouseDownDebListener=$l(this.mouseUp,30),C.add(this.inputElement,x.touchEndEvent,this.mouseDownDebListener,this),C.add(this.inputElement,x.touchStartEvent,this.mouseDownHandler,this),C.add(this.inputElement,"input",this.inputHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on(Ee,this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(C.add(this.inputElement,"focusin",this.focusHandler,this),C.add(this.inputElement,"focusout",this.blurHandler,this),C.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),C.add(this.inputElement.ownerDocument,x.touchStartEvent,this.onIframeMouseDown,this),C.add(this.contentModule.getPanel(),"load",this.iframeLoadHandler,this)),this.wireScrollElementsEvents()},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.currentTarget=e.target,this.notify(ht,e)},t.prototype.inputHandler=function(){this.autoResize()},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut();break;case"tab":this.iframeSettings.enable&&(this.isBlur=!0);break}e.callBack&&(e.event.action==="copy"||e.event.action==="cut"||e.event.action==="delete")&&e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.onFocusHandler=null,this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.onBlurHandler=null,this.off(Zi,this.contentChanged),this.off(ol,this.updateResizeFlag),this.off(yo,this.updateStatus),this.off(xo,this.cleanupResizeElements),this.off(Oo,this.updateValueOnIdle),this.off(Bo,this.autoResize),!(this.readonly&&this.enabled)&&this.unbindEvents()},t.prototype.unbindEvents=function(){this.keyboardModule&&!this.keyboardModule.isDestroyed&&(this.keyboardModule.destroy(),this.keyboardModule=null);var e=b(this.valueContainer,"form");e&&C.remove(e,"reset",this.resetHandler),C.remove(this.inputElement,"keyup",this.keyUp),C.remove(this.inputElement,"paste",this.onPaste),C.remove(this.inputElement,"content-changed",this.contentChanged),C.remove(this.inputElement,x.touchEndEvent,this.mouseDownDebListener),this.mouseDownDebListener=null,C.remove(this.inputElement,x.touchStartEvent,this.mouseDownHandler),C.remove(this.inputElement,"input",this.inputHandler),C.remove(document,"mousedown",this.onDocumentClick),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off(Ee,this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.onResizeHandler=null,this.iframeSettings.enable&&(C.remove(this.inputElement,"focusin",this.focusHandler),C.remove(this.inputElement,"focusout",this.blurHandler),C.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),C.remove(this.inputElement.ownerDocument,x.touchStartEvent,this.onIframeMouseDown),C.remove(this.contentModule.getPanel(),"load",this.iframeLoadHandler)),this.unWireScrollElementsEvents()},t.prototype.getCurrentFocus=function(e){return e.target===this.inputElement&&document.activeElement===this.inputElement?"editArea":e.target===this.getToolbarElement()||!h(e.relatedTarget)&&b(e.relatedTarget,".e-rte-toolbar")===this.getToolbarElement()?"toolbar":e.target===this.valueContainer&&document.activeElement===this.valueContainer?"textArea":!h(e.target)&&e.target.classList.contains(ri)&&document.activeElement===e.target?"sourceCode":"outside"},t.prototype.resetToolbarTabIndex=function(){if(this.getToolbarElement())for(var e=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]"),i=0;i<e.length;i++)!e[i].classList.contains("e-rte-dropdown-btn")&&!e[i].classList.contains("e-insert-table-btn")&&(!e[i].hasAttribute("tabindex")||e[i].getAttribute("tabindex")!=="-1")&&e[i].setAttribute("tabindex","-1")},t.prototype.removeSelectionClassStates=function(e){for(var i=[ar,Ue,Ta,Sa,Ip,Pp],n=0;n<i.length;n++){var r=e.querySelectorAll("."+i[n]);if(O(r,i[n]),r.length!==0)for(var s=0;s<r.length;s++)r[s].classList.length===0&&r[s].removeAttribute("class"),r[s].nodeName==="IMG"&&r[s].style.outline!==""&&(r[s].style.outline="")}},t.prototype.getRenderedQuickToolbarElem=function(){for(var e=this.quickToolbarModule.getQuickToolbarInstance(),i=0;i<e.length;i++)if(e[i]&&e[i].isRendered)return e[i].element;return null},t.prototype.iframeLoadHandler=function(){this.autoResize()},H([se({},_u)],t.prototype,"toolbarSettings",void 0),H([se({},Yu)],t.prototype,"quickToolbarSettings",void 0),H([se({},Zu)],t.prototype,"pasteCleanupSettings",void 0),H([se({},$u)],t.prototype,"formatPainterSettings",void 0),H([se({},Ju)],t.prototype,"emojiPickerSettings",void 0),H([se({},hf)],t.prototype,"iframeSettings",void 0),H([se({},Wu)],t.prototype,"insertImageSettings",void 0),H([se({},Qu)],t.prototype,"insertAudioSettings",void 0),H([se({},Ku)],t.prototype,"insertVideoSettings",void 0),H([se({},Xu)],t.prototype,"tableSettings",void 0),H([v(0)],t.prototype,"floatingToolbarOffset",void 0),H([se({},pf)],t.prototype,"inlineMode",void 0),H([se({},Gu)],t.prototype,"fileManagerSettings",void 0),H([v("100%")],t.prototype,"width",void 0),H([v(!1)],t.prototype,"enablePersistence",void 0),H([v(!0)],t.prototype,"showTooltip",void 0),H([v(!1)],t.prototype,"enableResize",void 0),H([v({})],t.prototype,"htmlAttributes",void 0),H([v(null)],t.prototype,"placeholder",void 0),H([v(!1)],t.prototype,"autoSaveOnIdle",void 0),H([v(!1)],t.prototype,"readonly",void 0),H([v(!0)],t.prototype,"enabled",void 0),H([v(!0)],t.prototype,"enableHtmlSanitizer",void 0),H([v(!1)],t.prototype,"enableHtmlEncode",void 0),H([v(!1)],t.prototype,"enableXhtml",void 0),H([v("auto")],t.prototype,"height",void 0),H([v(null)],t.prototype,"cssClass",void 0),H([v(null)],t.prototype,"value",void 0),H([v("P")],t.prototype,"enterKey",void 0),H([v("BR")],t.prototype,"shiftEnterKey",void 0),H([v(30)],t.prototype,"undoRedoSteps",void 0),H([v(300)],t.prototype,"undoRedoTimer",void 0),H([v("HTML")],t.prototype,"editorMode",void 0),H([v(null)],t.prototype,"keyConfig",void 0),H([v(!1)],t.prototype,"showCharCount",void 0),H([v(!1)],t.prototype,"enableTabKey",void 0),H([v(!1)],t.prototype,"enableAutoUrl",void 0),H([v(-1)],t.prototype,"maxLength",void 0),H([se({},nf)],t.prototype,"format",void 0),H([se({},of)],t.prototype,"numberFormatList",void 0),H([se({},af)],t.prototype,"bulletFormatList",void 0),H([se({},ef)],t.prototype,"fontFamily",void 0),H([se({},tf)],t.prototype,"fontSize",void 0),H([se({},rf)],t.prototype,"fontColor",void 0),H([se({},sf)],t.prototype,"backgroundColor",void 0),H([v(null)],t.prototype,"valueTemplate",void 0),H([v(1e4)],t.prototype,"saveInterval",void 0),H([P()],t.prototype,"actionBegin",void 0),H([P()],t.prototype,"actionComplete",void 0),H([P()],t.prototype,"beforeDialogOpen",void 0),H([P()],t.prototype,"dialogOpen",void 0),H([P()],t.prototype,"beforeDialogClose",void 0),H([P()],t.prototype,"dialogClose",void 0),H([P()],t.prototype,"beforeQuickToolbarOpen",void 0),H([P()],t.prototype,"quickToolbarOpen",void 0),H([P()],t.prototype,"quickToolbarClose",void 0),H([P()],t.prototype,"toolbarStatusUpdate",void 0),H([P()],t.prototype,"updatedToolbarStatus",void 0),H([P()],t.prototype,"imageSelected",void 0),H([P()],t.prototype,"beforeImageUpload",void 0),H([P()],t.prototype,"imageUploading",void 0),H([P()],t.prototype,"imageUploadSuccess",void 0),H([P()],t.prototype,"imageUploadFailed",void 0),H([P()],t.prototype,"imageRemoving",void 0),H([P()],t.prototype,"afterImageDelete",void 0),H([P()],t.prototype,"fileSelected",void 0),H([P()],t.prototype,"beforeFileUpload",void 0),H([P()],t.prototype,"fileUploading",void 0),H([P()],t.prototype,"fileUploadSuccess",void 0),H([P()],t.prototype,"fileUploadFailed",void 0),H([P()],t.prototype,"fileRemoving",void 0),H([P()],t.prototype,"afterMediaDelete",void 0),H([P()],t.prototype,"created",void 0),H([P()],t.prototype,"destroyed",void 0),H([P()],t.prototype,"beforeSanitizeHtml",void 0),H([P()],t.prototype,"blur",void 0),H([P()],t.prototype,"toolbarClick",void 0),H([P()],t.prototype,"focus",void 0),H([P()],t.prototype,"change",void 0),H([P()],t.prototype,"resizing",void 0),H([P()],t.prototype,"resizeStart",void 0),H([P()],t.prototype,"resizeStop",void 0),H([P()],t.prototype,"beforePasteCleanup",void 0),H([P()],t.prototype,"afterPasteCleanup",void 0),H([P()],t.prototype,"beforeImageDrop",void 0),H([v(null)],t.prototype,"formatter",void 0),t=H([Vt],t),t}(Ri),Ch=["isLazyUpdate","plugins","autoSaveOnIdle","backgroundColor","bulletFormatList","cssClass","editorMode","emojiPickerSettings","enableAutoUrl","enableHtmlEncode","enableHtmlSanitizer","enablePersistence","enableResize","enableRtl","enableTabKey","enableXhtml","enabled","enterKey","fileManagerSettings","floatingToolbarOffset","fontColor","fontFamily","fontSize","format","formatPainterSettings","formatter","height","htmlAttributes","iframeSettings","inlineMode","insertAudioSettings","insertImageSettings","insertVideoSettings","keyConfig","locale","maxLength","numberFormatList","pasteCleanupSettings","placeholder","quickToolbarSettings","readonly","saveInterval","shiftEnterKey","showCharCount","showTooltip","tableSettings","toolbarSettings","undoRedoSteps","undoRedoTimer","value","valueTemplate","width","actionBegin","actionComplete","afterImageDelete","afterMediaDelete","afterPasteCleanup","beforeDialogClose","beforeDialogOpen","beforeFileUpload","beforeImageDrop","beforeImageUpload","beforePasteCleanup","beforeQuickToolbarOpen","beforeSanitizeHtml","blur","change","created","destroyed","dialogClose","dialogOpen","fileRemoving","fileSelected","fileUploadFailed","fileUploadSuccess","fileUploading","focus","imageRemoving","imageSelected","imageUploadFailed","imageUploadSuccess","imageUploading","quickToolbarClose","quickToolbarOpen","resizeStart","resizeStop","resizing","toolbarClick","toolbarStatusUpdate","updatedToolbarStatus"],Sh=["value"],Th=Rh({props:Ch}),ff=Th[0],Eh=Th[1],Da=Object.keys(Eh);Da.push("modelchanged","update:modelValue");for(var Ps=0,Gl=Sh;Ps<Gl.length;Ps++){var mf=Gl[Ps];Da.push("update:"+mf)}var gf=Ah({name:"RichTextEditorComponent",mixins:[Ph],props:ff,watch:Eh,emits:Da,model:{event:"modelchanged"},provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new pt({}),propKeys:Ch,models:Sh,hasChildDirective:!1,hasInjectedModules:!0,tagMapper:{},tagNameMapper:{},isVue3:!di,templateCollection:{}}},created:function(){this.ej2Instances._trigger=this.ej2Instances.trigger,this.ej2Instances.trigger=this.trigger,this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(a){var t=di?a:Ih,e=null;return h(this.$slots.default)||(e=di?this.$slots.default:this.$slots.default()),t("textarea",e)},methods:{clearTemplate:function(a){if(a||(a=Object.keys(this.templateCollection||{})),a.length&&this.templateCollection)for(var t=0,e=a;t<e.length;t++){var i=e[t],n=this.templateCollection[i];if(n&&n.length){for(var r=0,s=n;r<s.length;r++){var o=s[r];this.destroyPortals(o)}delete this.templateCollection[i]}}},setProperties:function(a,t){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(a,t),a&&this.models&&this.models.length&&Object.keys(a).map(function(i){e.models.map(function(n){i===n&&!/datasource/i.test(i)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+i,a[i]):(e.$emit("update:"+i,a[i]),e.$emit("modelchanged",a[i])))})})},trigger:function(a,t,e){if(di||(this.models=this.models?this.models:this.ej2Instances.referModels),(a==="change"||a==="input")&&this.models&&this.models.length!==0){var i=this.models.toString().match(/checked|value/)||[],n=i[0];t&&i&&!Oa(t[n])&&(di?(a==="change"||this.$props&&!this.$props.isLazyUpdate)&&(this.$emit("update:"+n,t[n]),this.$emit("modelchanged",t[n])):(this.ej2Instances.vueInstance.$emit("update:"+n,t[n]),this.ej2Instances.vueInstance.$emit("modelchanged",t[n]),this.ej2Instances.vueInstance.$emit("update:modelValue",t[n])))}else if(a==="actionBegin"&&t.requestType==="dateNavigate"&&this.models&&this.models.length!==0){var i=this.models.toString().match(/currentView|selectedDate/)||[],n=i[0];t&&i&&!Oa(t[n])&&(di?(this.$emit("update:"+n,t[n]),this.$emit("modelchanged",t[n])):(this.ej2Instances.vueInstance.$emit("update:"+n,t[n]),this.ej2Instances.vueInstance.$emit("modelchanged",t[n])))}this.ej2Instances&&this.ej2Instances._trigger&&this.ej2Instances._trigger(a,t,e)},custom:function(){this.updated()},addAnchorAriaLabel:function(a){return this.ej2Instances.addAnchorAriaLabel(a)},cleanList:function(a){return this.ej2Instances.cleanList(a)},closeDialog:function(a){return this.ej2Instances.closeDialog(a)},disableToolbarItem:function(a,t){return this.ej2Instances.disableToolbarItem(a,t)},enableToolbarItem:function(a,t){return this.ej2Instances.enableToolbarItem(a,t)},executeCommand:function(a,t,e){return this.ej2Instances.executeCommand(a,t,e)},focusIn:function(){return this.ej2Instances.focusIn()},focusOut:function(){return this.ej2Instances.focusOut()},getCharCount:function(){return this.ej2Instances.getCharCount()},getContent:function(){return this.ej2Instances.getContent()},getHtml:function(){return this.ej2Instances.getHtml()},getRange:function(){return this.ej2Instances.getRange()},getSelectedHtml:function(){return this.ej2Instances.getSelectedHtml()},getSelection:function(){return this.ej2Instances.getSelection()},getText:function(){return this.ej2Instances.getText()},getXhtml:function(){return this.ej2Instances.getXhtml()},hideInlineToolbar:function(){return this.ej2Instances.hideInlineToolbar()},print:function(){return this.ej2Instances.print()},refreshUI:function(){return this.ej2Instances.refreshUI()},removeToolbarItem:function(a){return this.ej2Instances.removeToolbarItem(a)},renderTemplates:function(a){return this.ej2Instances.renderTemplates(a)},sanitizeHtml:function(a){return this.ej2Instances.sanitizeHtml(a)},selectAll:function(){return this.ej2Instances.selectAll()},selectRange:function(a){return this.ej2Instances.selectRange(a)},showDialog:function(a){return this.ej2Instances.showDialog(a)},showEmojiPicker:function(a,t){return this.ej2Instances.showEmojiPicker(a,t)},showFullScreen:function(){return this.ej2Instances.showFullScreen()},showInlineToolbar:function(){return this.ej2Instances.showInlineToolbar()},showSourceCode:function(){return this.ej2Instances.showSourceCode()}}});pt.Inject(Td);pt.Inject(ju);pt.Inject(qu);pt.Inject(wd);pt.Inject(jd);pt.Inject(bu);pt.Inject(yu);pt.Inject(qd);pt.Inject(Od);pt.Inject(Hd);const vf=Yl({components:{EjsRichtexteditor:gf},data(){return{emojiPickerSettings:{iconsSet:[{name:"Smilies & People",code:"1F600",iconCss:"e-emoji",icons:[{code:"1F600",desc:"Grinning face"},{code:"1F603",desc:"Grinning face with big eyes"},{code:"1F604",desc:"Grinning face with smiling eyes"},{code:"1F606",desc:"Grinning squinting face"},{code:"1F605",desc:"Grinning face with sweat"},{code:"1F602",desc:"Face with tears of joy"},{code:"1F923",desc:"Rolling on the floor laughing"},{code:"1F60A",desc:"Smiling face with smiling eyes"}]},{name:"Animals & Nature",code:"1F435",iconCss:"e-animals",icons:[{code:"1F436",desc:"Dog face"},{code:"1F431",desc:"Cat face"},{code:"1F42D",desc:"Mouse face"},{code:"1F439",desc:"Hamster face"},{code:"1F430",desc:"Rabbit face"},{code:"1F98A",desc:"Fox face"}]},{name:"Food & Drink",code:"1F347",iconCss:"e-food-and-drinks",icons:[{code:"1F34E",desc:"Red apple"},{code:"1F34C",desc:"Banana"},{code:"1F347",desc:"Grapes"},{code:"1F353",desc:"Strawberry"},{code:"1F35E",desc:"Bread"},{code:"1F950",desc:"Croissant"},{code:"1F955",desc:"Carrot"},{code:"1F354",desc:"Hamburger"}]},{name:"Activities",code:"1F383",iconCss:"e-activities",icons:[{code:"26BD",desc:"Soccer ball"},{code:"1F3C0",desc:"Basketball"},{code:"1F3C8",desc:"American football"},{code:"26BE",desc:"Baseball"},{code:"1F3BE",desc:"Tennis"},{code:"1F3D0",desc:"Volleyball"},{code:"1F3C9",desc:"Rugby football"}]},{name:"Travel & Places",code:"1F30D",iconCss:"e-travel-and-places",icons:[{code:"2708",desc:"Airplane"},{code:"1F697",desc:"Automobile"},{code:"1F695",desc:"Taxi"},{code:"1F6B2",desc:"Bicycle"},{code:"1F68C",desc:"Bus"}]},{name:"Objects",code:"1F507",iconCss:"e-objects",icons:[{code:"1F4A1",desc:"Light bulb"},{code:"1F526",desc:"Flashlight"},{code:"1F4BB",desc:"Laptop computer"},{code:"1F5A5",desc:"Desktop computer"},{code:"1F5A8",desc:"Printer"},{code:"1F4F7",desc:"Camera"},{code:"1F4F8",desc:"Camera with flash"},{code:"1F4FD",desc:"Film projector"}]},{name:"Symbols",code:"1F3E7",iconCss:"e-symbols",icons:[{code:"274C",desc:"Cross mark"},{code:"2714",desc:"Check mark"},{code:"26A0",desc:"Warning sign"},{code:"1F6AB",desc:"Prohibited"},{code:"2139",desc:"Information"},{code:"267B",desc:"Recycling symbol"},{code:"1F6AD",desc:"No smoking"}]}]}}}}),bf=Yl({components:{},mixins:[vf],setup(){return{note:new Ac}},data(){return{noteId:parseInt(this.$route.params.id),toolbarSettings:{type:"MultiRow",items:["Bold","Italic","Underline","StrikeThrough","SuperScript","SubScript","|","FontSize","FontColor","BackgroundColor","|","LowerCase","UpperCase","|","Formats","Alignments","|","NumberFormatList","BulletFormatList","|","Outdent","Indent","|","CreateLink","Image","CreateTable","|","FormatPainter","ClearFormat","|","EmojiPicker","|","Undo","Redo"]},insertImageSettings:{saveFormat:"Base64"}}},computed:{...zh(Pc,["types"]),height(){return this.$q.screen.height-400}},created(){this.noteId&&this.note.refresh(this.noteId),this.note.initValidations()},mounted(){this.note.$editor=this.$refs.editor},methods:{onSubmit(){this.note.$validate(),!this.note.$invalid&&this.note.save().then(()=>{})}}}),yf={class:"row"},Cf={class:"col-3 q-ma-md"},Sf={class:"col-2 q-ma-md"},Tf={class:"row"},Ef={class:"col q-ma-md"},Lf={class:"row q-ma-md"};function wf(a,t,e,i,n,r){const s=Wt("my-select"),o=Wt("my-date"),l=Wt("my-multi-input"),c=Wt("ejs-richtexteditor"),p=Wt("my-cancel-button"),d=Wt("my-save-button"),u=Wt("my-action-footer");return Vh(),_h(kh,{padding:""},{default:Wr(()=>[Nt(wh,{onSubmit:a.onSubmit},{default:Wr(()=>[ui("div",yf,[ui("div",Cf,[Nt(s,{value:a.note.model.type,"onUpdate:value":t[0]||(t[0]=m=>a.note.model.type=m),error:a.note.$model.type.$error,label:"Type","map-options":!1,options:a.types},null,8,["value","error","options"])]),ui("div",Sf,[Nt(o,{value:a.note.model.meeting_at,"onUpdate:value":t[1]||(t[1]=m=>a.note.model.meeting_at=m),error:a.note.$model.meeting_at.$error,label:"Date"},null,8,["value","error"])])]),ui("div",Tf,[ui("div",Ef,[Nt(l,{value:a.note.model.keywords,"onUpdate:value":t[2]||(t[2]=m=>a.note.model.keywords=m),label:"Keywords"},null,8,["value"])])]),ui("div",Lf,[Nt(c,{ref:"editor",autoSaveOnIdle:!1,emojiPickerSettings:a.emojiPickerSettings,enableXhtml:"true",height:a.height,insertImageSettings:a.insertImageSettings,maxLength:"7000",showCharCount:!0,toolbarSettings:a.toolbarSettings,value:a.note.model.notes},null,8,["emojiPickerSettings","height","insertImageSettings","toolbarSettings","value"])]),Nt(u,null,{default:Wr(()=>[Nt(Lh),Nt(p,{class:"q-mr-md",onClick:t[3]||(t[3]=m=>a.$router.push({name:"NotesGrid"}))}),Nt(d,{loading:a.note.state.isLoading,type:"submit"},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})}const Uf=Uh(bf,[["render",wf]]);export{Uf as default};
