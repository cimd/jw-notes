import{Q as e}from"./QInput-B7T_tnQa.js";import{Q as m}from"./QBtn-eBFPfLou.js";import{Q as n}from"./QForm-Bqnz71c4.js";import{Q as d}from"./QPage-Dnb37Vze.js";import{u as p}from"./index-lSnk7GHB.js";import{r as t,m as l,s as f}from"./index-Cdbtwfsg.js";import{auth as u}from"./apis-Di_SAPwX.js";import{d as w,_ as h,o as $,c as g,u as i,J as C,K as a,a2 as D}from"./index-BgKJ_Ot-.js";import"./use-file-dom-props-CUBVuoqU.js";import"./QSpinner-Cw__CG3n.js";import"./use-dark-BJYpCXgG.js";import"./render-BF43JfyS.js";import"./focus-manager-BJWzFvJg.js";import"./use-key-composition-CHHzdI92.js";import"./dom-CvelUQUV.js";import"./vm-B61G6sTM.js";import"./isTypedArray-V6sIBVz1.js";import"./http-CAOryOOa.js";const v=w({setup(){return{v$:p()}},data(){return{open:!0,formData:{password:"",passwordConfirmation:null},loading:!1,passwordErrorMessage:"",passwordConfirmationErrorMessage:""}},validations(){return{formData:{password:{required:t,minLength:l(6)},passwordConfirmation:{required:t,sameAsPassword:f(this.formData.password)}}}},methods:{submitForm(){if(this.v$.$touch(),this.v$.$invalid)return this.setErrorMessages(),!0;this.loading=!0;const r={email:this.$route.params.email,password:this.formData.password,token:this.$route.params.token};u.resetPassword(r).then(()=>{this.$router.push({path:"/"})}).finally(()=>{this.loading=!1})},setErrorMessages(){this.v$.formData.password.$error&&(this.v$.formData.passwordConfirmation.required&&(this.passwordErrorMessage="Password is required"),this.v$.formData.password.minLength&&(this.passwordErrorMessage="Password must be at least 6 characters")),this.v$.formData.passwordConfirmation.$error&&(this.v$.formData.passwordConfirmation.required&&(this.passwordConfirmationErrorMessage="Confirm Password is required"),this.v$.formData.passwordConfirmation.sameAsPassword&&(this.passwordConfirmationErrorMessage="Passwords must match"))}}}),b={class:"fixed-top-left form-box"};function V(r,s,E,M,P,Q){return $(),g(d,null,{default:i(()=>[C("div",b,[a(n,{ref:"Form",onSubmit:D(r.submitForm,["prevent"])},{default:i(()=>[a(e,{ref:"email",modelValue:r.$route.params.email,"onUpdate:modelValue":s[0]||(s[0]=o=>r.$route.params.email=o),label:"Email",name:"email",readonly:""},null,8,["modelValue"]),a(e,{ref:"password",modelValue:r.formData.password,"onUpdate:modelValue":s[1]||(s[1]=o=>r.formData.password=o),error:r.v$.formData.password.$error,"error-message":r.passwordErrorMessage,label:"Password",name:"password",type:"password"},null,8,["modelValue","error","error-message"]),a(e,{ref:"passwordConfirmation",modelValue:r.formData.passwordConfirmation,"onUpdate:modelValue":s[2]||(s[2]=o=>r.formData.passwordConfirmation=o),error:r.v$.formData.passwordConfirmation.$error,"error-message":r.passwordConfirmationErrorMessage,label:"Confirm Password",name:"passwordConfirmation",type:"password"},null,8,["modelValue","error","error-message"]),a(m,{class:"q-mt-md",color:"primary",label:"Submit",loading:r.loading,type:"submit"},null,8,["loading"])]),_:1},8,["onSubmit"])])]),_:1})}const H=h(v,[["render",V]]);export{H as default};
